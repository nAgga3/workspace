/* Thinfinity(c) Remote Desktop Server v7.0.3.114 */
try{Thinfinity!=undefined}catch(e){window.Thinfinity={}}if(typeof Thinfinity.global=="undefined")Thinfinity.global={};if(typeof Thinfinity.global.variables=="undefined")Thinfinity.global.variables={};
(function(){Thinfinity.global.variables.version="<%=$VERSION%>";Thinfinity.global.variables.wse=Thinfinity.global.variables.edition=="WORKSTATION";try{Thinfinity.global.variables.serverInfo=JSON.parse("<%=$SERVER_INFO%>")}catch(error){Thinfinity.global.variables.serverInfo=null}try{Thinfinity.global.variables.kblayouts="<%=$KBLAYOUTS%>";Thinfinity.global.variables.kblayouts=JSON.parse(Thinfinity.global.variables.kblayouts.substring(1,Thinfinity.global.variables.kblayouts.length-1))}catch(error){Thinfinity.global.variables.kblayouts=
null}Thinfinity.global.variables.maximize_start_page="<%=$MAXIMIZE_START_PAGE%>";Thinfinity.global.variables.profile="<%=profile%>";Thinfinity.global.variables.processId="<%=$PROCESSID%>";Thinfinity.global.variables.basePath="<%=@BASEURL%>";Thinfinity.global.variables.gatewayPin="<%=@GWPIN%>";Thinfinity.global.variables.gwsid="<%=@GWSID%>";Thinfinity.global.variables.edition="<%=@EDITION%>";Thinfinity.global.variables.license="<%=$LICPROD%>";Thinfinity.global.variables.minFiles=Thinfinity?.Files?.Environment?.minFiles||
false;Thinfinity.global.variables.GfxEnabled="<%=#GfxEnabled%>";Thinfinity.global.variables.H264Enabled="<%=#H264Enabled%>";Thinfinity.global.variables.totpAuthentication="<%=#totpauthentication%>";Thinfinity.global.variables.webAuthnAuthentication="<%=#webauthnauthentication%>";Thinfinity.global.variables.helpUrl="<%=@HELP_URL%>";try{Thinfinity.global.variables.serverParams="<%=@PARAMS%>";if(Thinfinity.global.variables.serverParams)Thinfinity.global.variables.serverParams=JSON.parse(Thinfinity.global.variables.serverParams)}catch(error){Thinfinity.global.variables.serverParams=
null}try{Thinfinity.global.variables.edition=parseInt(Thinfinity.global.variables.edition,10)}catch(error){Thinfinity.global.variables.edition=0}var postdata=document.querySelectorAll('meta[name="thinfinity-postdata"]');for(let i=0,len=postdata.length;i<len;i++)try{var name=postdata[i].getAttribute("data-name");var value=postdata[i].getAttribute("data-value");Thinfinity.global.variables[name]=value;var type=postdata[i].getAttribute("data-type");if(type==="json")try{if(value.substr(0)=="("&&value.substr(value.length-
1)==")")value=value.substring(1,value.length-1);value=JSON.parse(value)}catch(error){console.log("error parsing JSON ("+name+"): "+error.message)}document.head.removeChild(postdata[i])}catch(error){console.log(error.message)}document.querySelectorAll('script[name="thinfinity-detection"]').forEach(elem=>{document.head.removeChild(elem)})})();
(function(){function Identification(args){let prefix=args?.prefix??null;let useLPN=args?.autoPrefix??!args?.prefix??true;if(useLPN)prefix=btoa(location.pathname);if(!(prefix&&prefix!=""))throw new Error(`Cannot initialize Thinfinity.Identification, prefix is null or undefined;`);const _ssKey=`__#thinfinity.identification.${prefix}.__`;let _ref={};let _availableStorages=[window.sessionStorage,window.localStorage];const getTabName=()=>{let name=null,idx=0,len=_availableStorages.length;while(!name&&
idx<len){name=getNameFrom(_availableStorages[idx]);idx++}if(!name)name=setName();return name};let getNameFrom=storage=>{let name=null;let data=storage.getItem(_ssKey);if(data)try{data=JSON.parse(data);name=data.name}catch(error){}return name};const setName=()=>{let mask=useLPN?`thin.tabid-xxx-${prefix}`:`thin.${prefix}-xxx-xxx-xxx-xxx`;let name=mask.replace(/[xy]/g,function(c){var r=Math.random()*16|0,v=c=="x"?r:r&3|8;return v.toString(16)});let w=false,idx=0,len=_availableStorages.length;while(!w&&
idx<len)try{_availableStorages[idx].setItem(_ssKey,JSON.stringify({name}));w=true}catch(err){console.log(`Cannot write storage: ${err.message}`)}return name};const remove=()=>{let idx=0,len=_availableStorages.length;while(idx<len){_availableStorages[idx].removeItem(_ssKey);idx++}};const _name=getTabName();Object.defineProperty(_ref,"name",{enumerable:true,configurable:false,get:function(){return _name}});Object.defineProperty(_ref,"remove",{enumerable:true,configurable:false,writable:false,value:remove});
return _ref}try{Thinfinity!==undefined}catch(e){Thinfinity={}}Thinfinity.Identification=Identification})();
(function(){function ClientContainer(){let _ref=this;let _identification=null;let _profile=null;function initialize(){let gupCCI=gup("cci");if(location.pathname.toLowerCase().indexOf("client.container.info.html")!=-1||gupCCI){if(Thinfinity?.global?.variables?.data)try{_profile=JSON.parse(Thinfinity.global.variables.data)}catch(err){console.warn(`Cannot parse JSON profile data. Client Container fails`)}let prefix=_profile?.connectionName?.toLowerCase()??"";if(prefix==""){let result=location.pathname.toLowerCase().split("client.container.html")[0].split("/").filter(f=>
f!="");if(result.length>0)prefix=result[result.length-1].toLowerCase()}if(prefix!="")_identification=new Thinfinity.Identification({prefix});else _identification={name:""}}}function gup(name){var regex=new RegExp("[\\?&]"+name.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]")+"=([^&#]*)","ig");var results=regex.exec(window.location.href);regex=null;return results?.[1]??""}function dispose(){}initialize();Object.defineProperty(_ref,"name",{enumerable:false,configurable:false,get:()=>{return _identification.name}});
Object.defineProperty(_ref,"profile",{enumerable:false,configurable:false,get:()=>{return _profile}});Object.defineProperty(_ref,"dispose",{enumerable:false,configurable:false,writable:false,value:dispose});return _ref}try{Thinfinity!=undefined}catch(e){Thinfinity={}}window.ClientContainerInfo=new ClientContainer})();
