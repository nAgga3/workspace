/* Thinfinity(c) Remote Desktop Server v7.0.3.114 */
/*

 handlebars v4.3.1

Copyright (C) 2011-2017 by Yehuda Katz

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/
(function(){function ObserveObject(){var _observePollingTime=100;var _observeTimeoutId=null;var _objectCollection=[];var _handlerList={};var _handlerListName={};var _handlerCount=0;function isContained(elem){for(var i=0;i<_objectCollection.length;i++)if(_objectCollection[i]["object"]==elem)return true;return false}function compareObject(){var hasChanged=false;var list={};for(var i=0;i<_objectCollection.length;i++){var currentObject=_objectCollection[i];for(var key in currentObject["object"])if(key!=
undefined)if(typeof currentObject["copy"][key]=="undefined"){currentObject["copy"][key]=currentObject["object"][key];_handlerList[getHandlerName(currentObject["handler"])]["list"].push({"name":key,"object":currentObject["object"],"type":"add"})}else if(currentObject["copy"][key]!=currentObject["object"][key]&&!(Number.isNaN(currentObject["object"][key])&&Number.isNaN(currentObject["copy"][key]))){var oldValue=currentObject["copy"][key];currentObject["copy"][key]=currentObject["object"][key];_handlerList[getHandlerName(currentObject["handler"])]["list"].push({"name":key,
"object":currentObject["object"],"type":"update","oldValue":oldValue})}for(var key in currentObject["copy"])if(key!=undefined)if(typeof currentObject["object"][key]=="undefined"){var oldValue=currentObject["copy"][key];delete currentObject["copy"][key];_handlerList[getHandlerName(currentObject["handler"])]["list"].push({"name":key,"object":currentObject["object"],"type":"delete","oldValue":oldValue})}}for(var handlerName in _handlerList)try{if(_handlerList[handlerName]["list"].length>0){_handlerList[handlerName].handler(_handlerList[handlerName]["list"]);
_handlerList[handlerName]["list"]=[]}}catch(error){}clearTimeout(_observeTimeoutId);_observeTimeoutId=null;if(_objectCollection.length>0)_observeTimeoutId=setTimeout(compareObject,_observePollingTime)}function copyObject(elem){var copy={};for(var key in elem)copy[key]=elem[key];return copy}function getHandlerName(handler){for(var key in _handlerListName)if(_handlerListName[key]==handler)return key;key=(new Date).getTime()+"_"+_handlerCount.toString();_handlerCount++;if(_handlerCount>9999)_handlerCount=
0;_handlerListName[key]=handler;return key}function observe(elem,handler){if(isContained(elem)==false){var copy=copyObject(elem);var handlerName=getHandlerName(handler);if(_handlerList[handlerName]==undefined)_handlerList[handlerName]={"handler":handler,"list":[],"count":1};else _handlerList[handlerName]["count"]++;_objectCollection.push({"object":elem,"handler":handler,"copy":copy});if(_observeTimeoutId==null)_observeTimeoutId=setTimeout(compareObject,_observePollingTime)}}function unobserve(elem,
handler){for(var i=0;i<_objectCollection.length;i++)if(_objectCollection[i]["object"]==elem&&_objectCollection[i]["handler"]==handler){_objectCollection.splice(i,1);break}}function startObserve(){clearTimeout(_observeTimeoutId);_observeTimeoutId=setTimeout(compareObject,_observePollingTime)}function stopObserve(){clearTimeout(_observeTimeoutId)}clearTimeout(_observeTimeoutId);_observeTimeoutId=setTimeout(compareObject,_observePollingTime);Object.defineProperty(this,"observe",{"enumerable":true,"configurable":false,
"value":observe});Object.defineProperty(this,"unobserve",{"enumerable":true,"configurable":false,"value":unobserve});Object.defineProperty(Object,"startObserve",{"enumerable":true,"configurable":false,"value":startObserve});Object.defineProperty(Object,"stopObserve",{"enumerable":true,"configurable":false,"value":stopObserve})}if(Object["observe"]==undefined){var obs=new ObserveObject;Object.defineProperty(Object,"observe",{"enumerable":true,"configurable":false,"value":obs.observe});Object.defineProperty(Object,
"unobserve",{"enumerable":true,"configurable":false,"value":obs.unobserve})}})();
(function(){function ObserveModel(args){var _args={"parentObject":null,"id":null,"shadowCopy":false};var _path="";var _modelView=null;var _dataModel={};var _isReady=false;var _serverFiredList={};var _eventsList={};var _customEventsList={};var _commandHandlerList={};var _cbIdList={};var _modelName="model";var _readOnlyPath=null;var _observeList=[];var _isCSPAvailable=false;var _ref=this;function initialize(args){try{helper.object.eval("function _CSPCheck(param){return param;};");if(window["_CSPCheck"]instanceof
Function){_isCSPAvailable=true;window["_CSPCheck"]=undefined}}catch(error){if(error.toString().match(/'unsafe-eval'|'unsafe-inline'|CSP/)!=-1)helper.console.warning('Dynamic functions are not available, because the current "Content-Security-Policy" header do not allow that, please read the documentation about the "Content-Security-Policy (CSP)" header to allow dynamic functions.',arguments)}if(args!=null&&args!=undefined)for(var arg in _args)if(args[arg]!=undefined)_args[arg]=args[arg];_modelView=
{}}function cloneData(data){if(data==null||typeof data!="object")return data;else if(typeof data=="object"&&data.nodeType!=undefined&&data.nodeType==1)return data;else{var temp;if(data instanceof Date)temp=data;else{try{temp=new data.constructor}catch(Error){temp={}}for(var key in data)if(key.substring(0,1)=="#")temp[key]=data[key];else temp[key]=cloneData(data[key]);if(data["__canonicalPath__"]!=undefined&&temp["path"]==undefined)temp["path"]=data["__canonicalPath__"]}}return temp}function getModelPath(path,
sufix){var ar=path.split(".");var modelPath="";if(ar.length>1){for(var i=0;i<ar.length-2;i++)modelPath+=ar[i]+".objects.";modelPath+=ar[ar.length-2]+"."+sufix+"."+ar[ar.length-1]}else modelPath=path;return modelPath}function getValue(model,path){var idx=path.indexOf(".")!=-1?path.indexOf("."):path.length;var tempPath=path.substring(0,idx);path=path.substring(idx+1,path.length);if(tempPath!="")return getValue(model[tempPath],path);else return model}function setValue(model,path,value){var idx=path.indexOf(".")!=
-1?path.indexOf("."):path.length;var tempPath=path.substring(0,idx);path=path.substring(idx+1,path.length);if(tempPath!=""&&path!="")return setValue(model[tempPath],path,value);else return model[tempPath]=value}function getCanonicalPath(object){if(object!=null&&object!="")if(object["__canonicalPath__"])return object["__canonicalPath__"];else if(helper.object.getTypeOf(object)!="object")return object;else if(object["path"]!=undefined)return object["path"];else return null;else return null}function modelPropertyDescriptor(path){var propertiesPath=
getModelPath(path,"properties");var propertyModel=getValue(_dataModel,propertiesPath);var temp={};for(var attr in propertyModel)temp[attr]=propertyModel[attr];return temp}function defineProperty(obj,name,path,type,data){switch(type){case "object":Object.defineProperty(obj,name,{"enumerable":false,"configurable":false,"get":function(){return path}});break;case "private":if(obj)Object.defineProperty(obj,name,{"enumerable":false,"configurable":false,"get":function(){return data}});break;case "property":var set=
function(value){if(data!=null&&data["readonly"]&&data["readonly"]==true&&(_readOnlyPath==null||_readOnlyPath!=path+"."+name))throw new Error("Readonly property");else{_readOnlyPath=null;var node=getValue(_dataModel,path+"."+name);if(node["type"]!=undefined){var isValid=helper.object.validateTypeOf(value,node["type"],false);if(isValid){if(node["type"]!=undefined&&node["type"]=="JSON"){if(typeof value!="string")value=JSON.stringify(value).toString()}else value=helper.object.convertTo(value,node["type"]);
setValue(_dataModel,path+"."+name+".value",value)}else throw new Error("Invalid data type.");}}};var get=function(){try{var node=getValue(_dataModel,path+"."+name);var value=node["value"];if(node["type"]!=undefined&&node["type"]=="JSON")value=value==""?{}:JSON.parse(value);else if(node["type"]!=undefined)value=helper.object.convertTo(value,node["type"]);return value}catch(e){helper.console.warning(e.message,arguments)}return null};Object.defineProperty(obj,name,{"enumerable":true,"configurable":false,
"set":set,"get":get});break;case "method":if(_isCSPAvailable){var fnArgs="";var hasArgs=false;if(data["arguments"]&&data["arguments"].length>0){hasArgs=true;for(var i=0;i<data["arguments"].length;i++)fnArgs+=data["arguments"][i]["name"]+",";if(fnArgs.length>0)fnArgs=fnArgs.substring(0,fnArgs.length-1)}var fn="";var assignCBID=function(callback,type,path){return arguments.callee.caller.getCBID(callback,type,path)};var sendRemoteCommandHandler=function(_cmd,_path,_data,_cbId){arguments.callee.caller.sendRemoteObj(_cmd,
_path,_data,_cbId)};var rt=false;if(data["return"]){var hasType=false;if(data["return"]["type"]!=null)hasType=true;var cr="";var strDebugger="";if(hasType==true){fn+=cr+strDebugger;fn+=cr+'var type = "CM"; ';fn+=cr+"var _data = "+(hasArgs?"{};":'"";');if(data["return"]["type"]!="NULL"){fn+=cr+"var _cbId = "+assignCBID+'(__callback,"'+data["return"]["type"]+'" );';rt=true}else fn+='var _cbId = ""; ';for(var i=0;i<data["arguments"].length;i++)fn+=cr+'_data["'+data["arguments"][i]["name"]+'"] = '+data["arguments"][i]["name"]+
";";fn+=cr+"var t = "+sendRemoteCommandHandler+'("CM","'+path+'",_data, _cbId);';if(data["return"]["type"]!="NULL")fnArgs+=(fnArgs.length>0?",":"")+"__callback"}}helper.object.eval("function _"+name+"("+fnArgs+"){"+fn+"};");var fnHandler=helper.object.eval("_"+name);fnHandler.sendRemoteObj=_args["parentObject"]["sendRemoteCommand"];if(rt)fnHandler.getCBID=function(callback,type){var sDate=(new Date).getTime();var cbId="CB_CM_"+path+"_"+sDate;if(typeof callback=="undefined"||callback==null)callback=
function(){};_cbIdList[cbId]={"callback":callback,"type":type};return cbId};Object.defineProperty(obj,name,{"enumerable":true,"configurable":false,"value":fnHandler})}else helper.console.log(helper.string.format("Cannot create dynamic function '{0}', because (CSP) header do not allow that.",name),arguments);break;case "event":var set=function(e){setValue(_dataModel,path+"."+name,e)};var get=function(e){return getValue(_dataModel,path+"."+name)};Object.defineProperty(obj,name,{"enumerable":true,"configurable":false,
"set":set,"get":get});break;case "getProperties":Object.defineProperty(obj,name,{"enumerable":false,"configurable":false,"get":function(){return data}});break;case "getMethods":Object.defineProperty(obj,name,{"enumerable":false,"configurable":false,"get":function(){return data}});break;case "getEvents":Object.defineProperty(obj,name,{"enumerable":false,"configurable":false,"get":function(){return data}});break;case "getObjects":Object.defineProperty(obj,name,{"enumerable":false,"configurable":false,
"get":function(){return data}});break}}function getOMCommands(){var omcmds=[];if(_dataModel)for(var key in _dataModel)omcmds.push({"cmd":"rapp","data":JSON.stringify(_dataModel[key]),"group":0,"oob":0,"path":key,"pid":0,pktid:0,"type":"OM"});return omcmds}function observeModel(model,viewModel,path,isNewModel){var properties=["properties"];if(path.indexOf(".")==-1)defineProperty(model,"__isRoot",true,"object");for(var i=0;i<properties.length;i++){var property=properties[i];if(model[property]){defineProperty(model[property],
"__canonicalPath__",path+"."+property,"object");var physPath=(path.length>0?path+".":"")+property;for(var propName in model[property]){viewModel[propName]=model[property][propName];defineProperty(viewModel,propName,physPath,"property",model[property][propName]);defineProperty(model[property][propName],"__canonicalPath__",model["canonicalName"]+"."+propName,"object");_observeList.push({"elem":model[property][propName],"handler":observeChanges});Object.observe(model[property][propName],observeChanges)}defineProperty(viewModel,
"__"+property+"__",physPath,"getProperties",model[property]);_observeList.push({"elem":model[property],"handler":observeChanges});Object.observe(model[property],observeChanges)}}var events=["events"];for(var i=0;i<events.length;i++){var event=events[i];if(model[event]!=undefined){var physPath=(path.length>0?path+".":"")+event;defineProperty(model[event],"__canonicalPath__",path,"object");_observeList.push({"elem":model[event],"handler":observeEventChanges});Object.observe(model[event],observeEventChanges);
for(var eventName in model[event]){defineProperty(viewModel,eventName,physPath,"event",model[event][eventName]);defineProperty(viewModel[eventName],"__type__",physPath,"private","event")}defineProperty(viewModel,"__"+event+"__",physPath,"getEvents",model[event])}}var methods=["methods"];for(var i=0;i<methods.length;i++){var method=methods[i];if(model[method]!=undefined){for(var methodName in model[method]){defineProperty(viewModel,methodName,model["canonicalName"]+"."+methodName,"method",model[method][methodName]);
defineProperty(viewModel[methodName],"__type__",model["canonicalName"]+"."+methodName,"private","method")}defineProperty(viewModel,"__"+method+"__",physPath,"getMethods",model[method])}}var objects=["objects"];for(var i=0;i<objects.length;i++){var object=objects[i];if(model[object]!=undefined){var physPath=(path.length>0?path+".":"")+object;for(var objName in model[object]){viewModel[objName]={};defineProperty(viewModel[objName],"__type__",physPath,"private","node");observeModel(model[object][objName],
viewModel[objName],physPath+"."+model[object][objName]["id"],isNewModel)}defineProperty(viewModel,"__"+object+"__",physPath,"getObjects",model[object])}}}function unobserveModel(model,path){if(model!=null){var properties=["properties"];for(var i=0;i<properties.length;i++){var property=properties[i];if(model[property]){for(var propName in model[property]){removeElemFromObserveList(model[property][propName],observeChanges);Object.unobserve(model[property][propName],observeChanges)}removeElemFromObserveList(model[property],
observeChanges);Object.unobserve(model[property],observeChanges)}}var objects=["objects"];for(var i=0;i<objects.length;i++){var object=objects[i];if(model[object]!=undefined)for(var objName in model[object]){path=(path.length>0?path+".":"")+object+"."+objName;unobserveModel(model[object][objName],path)}}}}function removeElemFromObserveList(elem,handler){for(var i=_observeList.length-1;i>=0;i--)if(_observeList[i].elem==elem&&_observeList[i].handler==handler){_observeList.splice(i,1);break}}function removeAllBindedObserveElems(){for(var i=
0;i<_observeList.length;i++)Object.unobserve(_observeList[i].elem,_observeList[i].handler)}function setDataModel(model){_isReady=false;var _noErrors=true;if(model["data"]!=undefined&&model["type"]){switch(model["type"].toUpperCase()){case "OM":setModel(model);break;case "PC":propertyModelChange(model);break;case "EF":fireHandler(model,undefined,_eventsList);fireCommandHandler(model["path"],"fired",model["path"].substring(model["path"].lastIndexOf(".")+1,model["path"].length),model);break;case "OD":if(model["path"])deleteObject(model["path"],
true);break;case "RV":returnValue(model);break;case "ERR":helper.console.log(helper.string.format("Error: {0}, Id: {1}",JSON.parse(model["data"])["msg"],_args["id"]),arguments);var msg=model&&model["data"]?model["data"]:model;try{msg=JSON.parse(msg)["msg"]}catch(error){}fireCommandHandler(model["path"],"error",null,null,msg);break;default:helper.console.log(helper.string.format("unknown type: {0}, Id: {1}",model["type"],_args["id"]),arguments);return;break}_noErrors=true}else{helper.console.log(helper.string.format("Cannot update this property. Id:{0} ",
_args["id"]),arguments);_noErrors=false}_isReady=true;return _noErrors}function setModel(model){_isReady=false;var _noErrors=true;if(model["data"]!=undefined){var tempModelData=JSON.parse(model["data"]);var tempId=tempModelData["id"];var eventName=null;var oldModelObject=undefined;var isNewModel=false;if(_dataModel[tempId]==undefined||_dataModel[tempId]==null){eventName="created";isNewModel=true}else{eventName="updated";isNewModel=false;oldModelObject=cloneData(_modelView[tempId])}deleteObject(tempId,
false);_dataModel[tempId]=tempModelData;_modelView[tempId]={};observeModel(_dataModel[tempId],_modelView[tempId],tempId,isNewModel);if(eventName!=null){fireCommandHandler(tempId,eventName,tempId,oldModelObject);if(eventName=="created")fireEvents(tempId,"changed",null)}_noErrors=true}else{helper.console.log("Cannot observe these kind of data."+", Id:"+_args["id"]);_noErrors=false}_isReady=true;return _noErrors}function propertyModelChange(currentModel){try{_isReady=false;if(_dataModel!=null){var data=
JSON.parse(currentModel["data"]);if(_serverFiredList[currentModel["path"]]==undefined)_serverFiredList[currentModel["path"]]=0;var oldValue=getValue(_modelView,currentModel["path"]);var virtualModelPath=getModelPath(currentModel.path,"properties");setValue(_dataModel,virtualModelPath+".type",data["type"]);if(data["readonly"]===true)_readOnlyPath=virtualModelPath;else if(data["value"]!=oldValue)_serverFiredList[currentModel["path"]]++;setValue(_modelView,currentModel["path"],data["value"]);var data=
null;try{var data=JSON.parse(currentModel["data"]);data["path"]=currentModel["path"]}catch(error){}fireCommandHandler(data["path"],"changed",data["name"],oldValue)}}catch(error){}finally{_isReady=true}}function getEventObject(modelId,path,event,property,optionalOldValue,description){var propertiesPath=getModelPath(path,"properties");var isWildcard=false;if(propertiesPath.indexOf("*")!=-1){isWildcard=true;propertiesPath=propertiesPath.substr(0,propertiesPath.indexOf("*")-1)}var propertyModel=getValue(_dataModel,
propertiesPath);var obj={"modelId":modelId,"path":path,"event":event,"name":property};if(obj["modelId"]==null){var len=obj["path"].indexOf(".")!=-1?obj["path"].indexOf("."):obj["path"].length;obj["modelId"]=obj["path"].substring(0,len)}if(isWildcard==false&&propertyModel!=null&&propertyModel["name"]!=undefined&&propertyModel["type"]!=undefined&&propertyModel["value"]!=undefined){obj["type"]=propertyModel["type"];obj["name"]=propertyModel["name"];obj["value"]=propertyModel["value"]}else{if(isWildcard==
true)obj["value"]=propertyModel;if(typeof obj["name"]=="undefined"||obj["name"]==null)obj["name"]=modelId}if(event!="fired"){if(typeof obj["value"]=="undefined")obj["value"]=getValue(_modelView,path);if(typeof optionalOldValue!="undefined")obj["oldValue"]=optionalOldValue}else if(event=="fired"&&obj["value"]==undefined&&optionalOldValue!=undefined&&optionalOldValue!=null&&optionalOldValue.data!=undefined)try{var tempValue=JSON.parse(optionalOldValue.data);if(tempValue.arguments!=undefined)obj["value"]=
tempValue.arguments}catch(error){}if(event=="error")obj["message"]=description;return obj}function fireEvents(modelId,event,optionalOldValue){if(_commandHandlerList[event])for(var i=0;i<_commandHandlerList[event].length;i++){var fireEvent=true;if(_commandHandlerList[event][i]["object"]==modelId+".*"||_commandHandlerList[event][i]["object"].indexOf(modelId)!=-1){var jsonData=null;var modelPath=_commandHandlerList[event][i]["object"];if(modelPath=="*")modelPath=modelId;else{var property=getValue(_dataModel,
getModelPath(modelPath,"properties"));if(property&&typeof property["type"]!="undefined"&&property["type"]=="NULL")fireEvent=false}if(fireEvent){jsonData=getEventObject(modelId,modelPath,event,null,optionalOldValue);try{_commandHandlerList[event][i].handler(jsonData)}catch(error){helper.console.warning(error.message)}}}}}function deleteObject(id,removeEvents){try{_isReady=false;if(_dataModel[id]!=undefined){unobserveModel(_dataModel[id],"");var index=id.indexOf(".");var modelId=index!=-1?id.substring(0,
index):id;var oldModelObject=cloneData(_modelView[modelId]);delete _dataModel[id];delete _modelView[id];if(removeEvents==true){var len=id.length;for(var eventName in _eventsList)if(eventName.substr(0,len)==id)delete _eventsList[eventName]}if(eventName!=null)fireHandler(id,"deleted",_eventsList);fireCommandHandler(id,"deleted",id,oldModelObject)}}catch(error){helper.console.warning(error.message)}finally{_isReady=true}}function returnValue(model){if(model&&model["path"]){var path=model["path"];if(path.substr(0,
1)=='"'&&path.substr(path.length-1,1)=='"')path=path.substring(1,path.length-1);if(_cbIdList[path]!=undefined){var retData=null;if(_cbIdList[path]["type"]=="JSON")retData=JSON.parse(model["data"]);else retData=model["data"];_cbIdList[path]["callback"](retData);delete _cbIdList[path]}}}function on(object,event,handler){var canonicalPath=getCanonicalPath(object);if(canonicalPath.indexOf(":")!=-1&&canonicalPath.substring(0,_modelName.length)==_modelName){canonicalPath=canonicalPath.substring(_modelName.length+
1,canonicalPath.length);switch(event.toLowerCase()){case "created":case "updated":case "deleted":case "fired":case "error":case "changed":return addCommandHandler(canonicalPath,event,handler);break;default:return addEventHandler(canonicalPath,event,handler,_customEventsList);break}}else return addEventHandler(canonicalPath,event,handler,_eventsList)}function off(object,event,handler){var canonicalPath=getCanonicalPath(object);if(canonicalPath.indexOf(":")!=-1&&canonicalPath.substring(0,_modelName.length)==
_modelName){canonicalPath=canonicalPath.substring(_modelName.length+1,canonicalPath.length);switch(event.toLowerCase()){case "created":case "updated":case "deleted":case "fired":case "error":case "changed":return removeCommandHandler(canonicalPath,event,handler);break;default:return removeEventHandler(canonicalPath,event,handler,_customEventsList);break}}else return removeEventHandler(canonicalPath,event,handler,_eventsList)}function addEventHandler(object,event,handler,eventsList){var canonicalPath=
getCanonicalPath(object);if(canonicalPath==null&&_dataModel!=null)return"Cannot find canonical path. Object is not in the model view.";if(event==undefined||event==null||event=="")return"Event is undefined or null.";if(handler==undefined||handler==null||handler=="")return"Handler is undefined or null.";var item={"event":event,"object":object,"handler":handler,"modelPath":getModelPath(object,"properties")};var isContained=false;if(eventsList[canonicalPath+"."+event]==undefined)eventsList[canonicalPath+
"."+event]=[];else for(var i=0;i<eventsList[canonicalPath+"."+event].length;i++)if(eventsList[canonicalPath+"."+event][i].handler==item.handler){isContained=true;break}if(!isContained)eventsList[canonicalPath+"."+event].push(item);return true}function removeEventHandler(object,event,handler,eventsList){var ret=false;var canonicalPath=getCanonicalPath(object);if(canonicalPath==null)return"Cannot find canonical path. Object is not in the model view.";if(event==undefined||event==null||event=="")return"Event is undefined or null.";
if(handler==undefined||handler==null||handler=="")return"Handler is undefined or null.";var item={"event":event,"object":object,"handler":handler};if(eventsList[canonicalPath+"."+event]==undefined)return"Cannot find event. Event is not in the model view.";else for(var i=0;i<eventsList[canonicalPath+"."+event].length;i++)if(eventsList[canonicalPath+"."+event][i].handler.toString()==item.handler.toString()){eventsList[canonicalPath+"."+event].splice(i,1);ret=true}return ret}function fireHandler(object,
event,eventsList,jsonData){var canonicalPath="";if(helper.object.getTypeOf(object)=="object")canonicalPath=getCanonicalPath(object);else canonicalPath=object;if(event!=undefined)canonicalPath+="."+event;if(canonicalPath==null)return"Cannot find canonical path. Object is not in the model view.";if(eventsList[canonicalPath]==undefined)return"Event doesnt has a register handler.";else{var jsonArguments=null;if(helper.object.getTypeOf(object)=="object"){if(object["data"]!=undefined){var jTemp=JSON.parse(object["data"]);
if(jTemp["arguments"]!=undefined)jsonArguments=jTemp["arguments"]}}else jsonArguments=jsonData;for(var i=0;i<eventsList[canonicalPath].length;i++){var nodeValue=getValue(_dataModel,eventsList[canonicalPath][i].modelPath);if(nodeValue&&nodeValue["events"]&&nodeValue["events"][eventsList[canonicalPath][i]["event"]]){var fnArguments=nodeValue["events"][eventsList[canonicalPath][i]["event"]]["arguments"];if(fnArguments instanceof Array){var fn="";var dt="";var arArguments=[];for(var k=0;k<fnArguments.length;k++)for(var argName in jsonArguments)if(jsonArguments[argName]&&
fnArguments[k]["name"]==jsonArguments[argName]["name"]){var value=helper.object.convertTo(jsonArguments[argName]["value"],jsonArguments[argName]["type"]);arArguments.push(value)}try{eventsList[canonicalPath][i].handler.apply(this,Array.prototype.slice.call(arArguments,0))}catch(error){helper.console.warning(error.message,arguments)}}else try{eventsList[canonicalPath][i].handler(jsonArguments)}catch(error){helper.console.warning(error.message,arguments)}}else try{eventsList[canonicalPath][i].handler(jsonArguments)}catch(error){helper.console.warning(error.message)}}}}
function addCommandHandler(object,event,handler){var canonicalPath=getCanonicalPath(object);if(canonicalPath==null&&_dataModel!=null)return"Cannot find canonical path. Object is not in the model view.";if(event==undefined||event==null||event=="")return"Event is undefined or null.";if(handler==undefined||handler==null||handler=="")return"Handler is undefined or null.";var item={"event":event,"object":object,"handler":handler};var isContained=false;if(_commandHandlerList[event]==undefined)_commandHandlerList[event]=
[];else for(var i=0;i<_commandHandlerList[event].length;i++)if(_commandHandlerList[event][i].handler==item.handler){isContained=true;break}if(!isContained)_commandHandlerList[event].push(item);return true}function removeCommandHandler(object,event,handler){var ret=false;var canonicalPath=getCanonicalPath(object);if(canonicalPath==null&&_dataModel!=null)return"Cannot find canonical path. Object is not in the model view.";if(event==undefined||event==null||event=="")return"Event is undefined or null.";
if(handler==undefined||handler==null||handler=="")return"Handler is undefined or null.";var item={"event":event,"handler":handler};if(_commandHandlerList[event]==undefined)return"Cannot find event. Event is not in the command list.";else for(var i=0;i<_commandHandlerList[event].length;i++)if(_commandHandlerList[event][i].handler.toString()==item.handler.toString()){_commandHandlerList[event].splice(i,1);ret=true}return ret}function fireCommandHandler(path,commandName,property,oldValue,description){if(_commandHandlerList[commandName])for(var i=
0;i<_commandHandlerList[commandName].length;i++)if(_commandHandlerList[commandName][i]["object"]=="*"||path.indexOf(_commandHandlerList[commandName][i]["object"])!=-1){var eventObject=getEventObject(null,path,commandName,property,oldValue,description);try{_commandHandlerList[commandName][i].handler(eventObject)}catch(error){helper.console.warning(error.message)}}}function observeChanges(changes){if(_isReady==true){helper.console.log("property has been updated."+", Id:"+_args["id"]);if(changes)for(var i=
0;i<changes.length;i++){var change=changes[i];if(change["object"]["readonly"]!=true){var canonicalPath=getCanonicalPath(change["object"]);var value=change["object"]["value"];if(_serverFiredList[canonicalPath]!=undefined&&_serverFiredList[canonicalPath]>0)_serverFiredList[canonicalPath]--;else{helper.console.log("sending message to server..."+", Id:"+_args["id"]);var type="PC";try{_args["parentObject"]["sendRemoteCommand"](type,canonicalPath,value,null)}catch(error){helper.console.warning(error.message)}helper.console.log("canonicalPath: "+
canonicalPath+"."+change.name+" ,PropertyName: "+change.name+" ,Type: "+change.type+", Id:"+_args["id"])}}}}else helper.console.log("model is not ready."+", Id:"+_args["id"])}function observeEventChanges(changes){if(_isReady==true){helper.console.log("event was configured."+", Id:"+_args["id"]);if(changes.length>0&&changes[0]["object"]){var change=changes[0];var id=change["object"]["__canonicalPath__"];var event=change["name"];for(var eventName in _eventsList)if(eventName==id+"."+event)delete _eventsList[eventName];
_eventsList[id+"."+event]=[];var nodeValue=getValue(_modelView,id+"."+event);var canonicalPath=getCanonicalPath(nodeValue);var item={"event":event,"object":id+"."+event,"handler":_modelView[id][event],"modelPath":getModelPath(id+"."+event,"events")};_eventsList[id+"."+event].push(item)}}}function dispose(){removeAllBindedObserveElems();for(var id in _dataModel)deleteObject(id,true);_ref=_dataModel=_modelView=_commandHandlerList=_customEventsList=_eventsList=_observeList=null;return}Object.defineProperty(this,
"set",{"enumerable":false,"configurable":false,"value":function(value){setDataModel(value)}});initialize(args);Object.defineProperty(this,"model",{"enumerable":true,"configurable":false,"value":_modelView});Object.defineProperty(this,"modelPropertyDescriptor",{"enumerable":true,"configurable":false,"value":modelPropertyDescriptor});Object.defineProperty(this,"on",{"enumerable":true,"configurable":false,"value":function(object,event,handler){return on(object,event,handler)}});Object.defineProperty(this,
"off",{"enumerable":true,"configurable":false,"value":function(object,event,handler){return off(object,event,handler)}});Object.defineProperty(this,"dispose",{"enumerable":true,"configurable":false,"writable":false,"value":dispose});if(_args.shadowCopy)Object.defineProperty(this,"getOMCommands",{"enumerable":true,"configurable":false,"writable":false,"value":getOMCommands});return this}try{Thinfinity!=undefined}catch(e){Thinfinity={}}Thinfinity.ObserveModel=ObserveModel})();
(function(){function PostMessage(args){var _ref=this;var _contentWindow={};var _isBidirectional=true;var _commandHandlers={};var _postMessageId=null;var _secure=true;var _origin=null;var _storageDataName="post-message-storage-data";var _linkageId={"session":{},"count":0};var _args={"mode":"REMOTE","id":"POSTMESSAGE_"+(new Date).getTime().toString(),"multipleConnections":false,"sourceElem":null,"targetElem":null,"profileMode":null,"switchHost":false,"allowMethods":null};var _maxConnectTries=0;var _windowTop=
null;var _targetValues=["_self","_blank","_top","_parent"];var _jsroManager=null;var _crossDomain=false;function initialize(args){try{if(parent&&parent.document);else _crossDomain=true}catch(error){_crossDomain=true}_postMessageId=args!=undefined&&args.id!=undefined?"postMessage_"+args.id:"postMessage_"+(new Date).getTime().toString();if(_args.mode!="HOST")_contentWindow[_args.id]=getContentWindow(null);var _windowTop=helper.url.getTopWindow(window);if(_windowTop[_storageDataName]==undefined)_windowTop[_storageDataName]=
{};_windowTop[_storageDataName][_args.id]=window;if(_isBidirectional)startListening();return true}function parseArguments(args){if(args!=null&&args!=undefined)for(var arg in _args)if(args[arg]!=undefined)_args[arg]=args[arg];_args.mode=_args.mode.toUpperCase()}function getHostContentWindow(elem){if(elem!=null){if(window.roleMode!=undefined&&window.roleMode=="HOST")return window;var iframes=(elem.document||elem.documentElement||elem.contentDocument.documentElement).getElementsByTagName("iframe");if(iframes.length>
0){for(var i=0;i<iframes.length;i++)try{if(iframes[i].contentWindow&&iframes[i].contentWindow.roleMode&&iframes[i].contentWindow.roleMode.toUpperCase()=="HOST")return iframes[i].contentWindow}catch(error){}for(var i=0;i<iframes.length;i++)try{var wnd=getHostContentWindow(iframes[i]);if(wnd&&wnd.roleMode&&wnd.roleMode=="HOST")return wnd}catch(error){}return window}else{var wnd=window.roleMode!=undefined&&window.roleMode=="HOST"?window:window.frameElement!=undefined&&window.frameElement.ownerDocument.defaultView&&
window.frameElement.ownerDocument.defaultView.roleMode=="HOST"&&window.frameElement.ownerDocument.defaultView.postMessage?window.frameElement.ownerDocument.defaultView:window.frameElement!=undefined&&window.frameElement.contentWindow!=undefined&&window.frameElement.contentWindow.top.roleMode=="HOST"?window.frameElement.contentWindow.top:iframes.length==1&&iframe[0].contentWindow.roleMode=="HOST"?iframes[0].contentWindow:null;if(wnd!=null)return wnd;else{var top=window.top;if(!_crossDomain&&top){iframes=
top.document.getElementsByTagName("iframe");for(var i=0;i<iframes.length;i++)try{if(iframes[i]&&iframes[i].contentWindow&&iframes[i].contentWindow.roleMode=="HOST")return iframes[i].contentWindow}catch(error){}}return window}}}}function getContentWindow(id,message){var winRef=null;if(message&&message.source&&!(window.Thinfinity&&window.Thinfinity.JsROManager))try{if(message.source!==window&&message.source.name);}catch(error){return message.source}if(_crossDomain)if(message&&message.source)return message.source;
else if(id&&typeof id=="object")return id;else{if(!window.Thinfinity.JsROManager)return window}else{if(window.Thinfinity&&window.Thinfinity.JsROManager){if(_jsroManager==null)_jsroManager=new Thinfinity.JsROManager;winRef=_jsroManager.getJsROContentWindow(id);if(winRef)return winRef}if(id==null&&message==null)return _args.targetElem;else if(id&&id instanceof Window)return id;if(_args.mode!="HOST"){if(_args.targetElem!=undefined&&_args.targetElem!=null)if(typeof _args.targetElem=="string")if(_targetValues.indexOf(_args.targetElem)!=
-1)switch(_args.targetElem){case "_self":break;case "_blank":winRef=window.opener!=undefined?window.opener:null;break;case "_top":break;case "_parent":break}else{winRef=document.getElementById(_args.targetElem);if(winRef==null&&(window.id||window.name)==_args.targetElem)winRef=window.contentWindow;if(winRef!=null&&winRef.nodeName.toLowerCase()=="iframe")winRef=winRef.contentWindow;if(window.top.name==_args.targetElem)winRef=window.top;else{var elems=window.top.document.getElementsByName(_args.targetElem);
if(elems.length>0)winRef=elems[0].contentWindow}if(winRef==null&&window.opener!=undefined&&(window.opener.name||window.opener.id)==_args.targetElem)winRef=window.opener}else if(typeof _args.targetElem["postMessage"]!="undefined")winRef=_args.targetElem;else winRef=_args.targetElem.contentWindow;else if(!window.parent&&window.opener!=undefined)winRef=window.opener;else winRef=getHostContentWindow(window);return winRef}else{winRef=null;if(_args.targetElem!=undefined&&_args.targetElem!=null){if(typeof _args.targetElem==
"string"){winRef=document.getElementById(_args.targetElem);if(winRef==null)if((window.id||window.name)==_args.targetElem)winRef=window;else if((window.top.id||window.top.name)==_args.targetElem)winRef=window.top;if(winRef!=null&&winRef.nodeType!=undefined&&winRef.nodeName.toLowerCase()=="iframe")winRef=winRef.contentWindow}else winRef=_args.targetElem;if(winRef==null)if(typeof _args.sourceElem=="string"&&_targetValues.indexOf(_args.sourceElem)!=-1)if(window.opener!=undefined)if(typeof _args.targetElem==
"string"&&(window.name||window.id)==_args.targetElem)winRef=window.opener;else winRef=window.opener;else winRef=null;else winRef=null}else{var getContentWindowByName=function(iframes){var frmW=null;for(var i=0;i<iframes.length;i++)if(iframes[i].contentWindow.name==id){frmW=iframes[i].contentWindow;break}if(frmW==null)frmW=window;return frmW};if(winRef==null){var iframes=document.getElementsByTagName("iframe");var windowTop=helper.url.getTopWindow(window);winRef=windowTop&&windowTop[_storageDataName]&&
windowTop[_storageDataName][id]!=undefined?windowTop[_storageDataName][id]:window.frameElement!=undefined&&window.frameElement.ownerDocument.defaultView&&window.frameElement.ownerDocument.defaultView.postMessage?window.frameElement.ownerDocument.defaultView:window.frameElement!=undefined&&window.frameElement.contentWindow!=undefined?window.frameElement.contentWindow.top:iframes.length==1?iframes[0].contentWindow:iframes.length>1?getContentWindowByName(iframes):window["postMessage"]?window:null}}return winRef}}return undefined}
function postMessage(data){function postMsg(contentWindow,data){if(contentWindow&&contentWindow.postMessage!=undefined)if(!!window.attachEvent)contentWindow.postMessage(JSON.stringify(data),"*",false);else try{contentWindow.postMessage(data,"*")}catch(error){}else{contentWindow=undefined;helper.console.log("Content windows is undefined or null.")}}var allRemotes=data&&data["allRemotes"]!=undefined?data["allRemotes"]:true;var to=_args.mode=="HOST"&&allRemotes===true?"*":allRemotes===false?data&&data.linkageId?
data.linkageId:"*":-1;if(to=="*")for(var id in _contentWindow){reAttachContentWindow(id);if(_args.id!=id){data.targetId=id;postMsg(_contentWindow[id],data)}}else{if(to!=-1)reAttachContentWindow(data.linkageId);if(_args.mode=="HOST")if(to!=-1&&data["data"]["requestId"]!=undefined)postMsg(_contentWindow[data["data"]["requestId"]],data);else{var toList=allRemotes.split(",");for(var i=0;i<toList.length;i++)if(_contentWindow[toList[i]]){reAttachContentWindow(toList[i]);postMsg(_contentWindow[toList[i]],
data)}}else{if((_contentWindow[data.linkageId]==null||_contentWindow[data.linkageId]==undefined)&&_jsroManager){var hosts=_jsroManager.getHostCollection();if(hosts.length>0)_contentWindow[data.linkageId]=hosts[0]}if(_contentWindow[data.linkageId]==null||_contentWindow[data.linkageId]==undefined)reAttachContentWindow(data.linkageId);postMsg(_contentWindow[data.linkageId],data)}}}function reAttachContentWindow(linkageId){if(linkageId!=undefined&&_contentWindow[linkageId]==undefined){_contentWindow[linkageId]=
getContentWindow(linkageId);if(_contentWindow[linkageId]!=undefined&&_isBidirectional);}}function getLinkageCount(){var count=0;for(var attrib in _linkageId["session"])count++;return count}function startListening(){if(!!window.attachEvent)window.attachEvent("onmessage",receiveMessage);else window.addEventListener("message",receiveMessage,false)}function receiveMessage(e){if(_secure)if(_origin==null)_origin=e.origin;else if(_origin!=e.origin);var obj=null;if(typeof e.data=="string")try{obj=JSON.parse(e.data)}catch(e){helper.console.warning("Cannot parse data: "+
e.data,arguments);obj=null}else obj=e.data;var tempLinkageId=helper.object.existsPath(obj,"linkageId")?obj["linkageId"]:null;var isProtocol=helper.object.existsPath(obj,"protocol")?obj["protocol"]:false;if(tempLinkageId!=null&&"postMessage_"+tempLinkageId!=_postMessageId){_maxConnectTries=0;if(_contentWindow[tempLinkageId]==undefined&&_args.mode=="HOST"&&(_args["allowMethods"]==null||_args["allowMethods"]==undefined||_args["allowMethods"].length==0||helper.object.existsPath(obj,"cmd")&&_args["allowMethods"].indexOf(obj.cmd)!=
-1))_contentWindow[tempLinkageId]=getContentWindow(tempLinkageId,e);if(_args["multipleConnections"]==false&&_contentWindow[_args.id]!=(e.source||e.srcWindow)&&_contentWindow[tempLinkageId]!=(e.source||e.srcWindow))return;if(_args["multipleConnections"]==false&&isProtocol==true&&_linkageId["count"]==0){_linkageId["session"][tempLinkageId]="connected";_linkageId["count"]=getLinkageCount()}else if(_args["multipleConnections"]==true&&isProtocol==true&&_linkageId["session"][tempLinkageId]==undefined){_linkageId["session"][tempLinkageId]=
"connected";_linkageId["count"]=getLinkageCount()}else if(_crossDomain&&helper.object.getValue(obj,"data.requestId",null)==_args.id)return;if(_linkageId["session"][tempLinkageId]==undefined){if(_args.mode=="HOST")delete _contentWindow[tempLinkageId];return}if(obj!=null)callCommand(obj.namespace,obj.cmd,obj.data,e.origin);else throw new Error("Cannot deserialize this object.");}else if(_args.mode=="REMOTE"&&tempLinkageId){_maxConnectTries++;if(_maxConnectTries>=2){_contentWindow={};_maxConnectTries=
0;_contentWindow[tempLinkageId]=getContentWindow(null,e)}}}function registerCommand(namespace,cmd,handler){var ret={"result":null,"message":null};if(namespace==null||namespace==undefined||namespace==""){ret.result=false;ret.message="Namespace cannot be null."}else if(cmd==null||cmd==undefined||cmd==""){ret.result=false;ret.message="Command cannot be null."}else if(handler==null||handler==undefined||handler==""){ret.result=false;ret.message="Handler cannot be null."}else{namespace=namespace.toUpperCase();
if(_commandHandlers[namespace]==undefined)_commandHandlers[namespace]={};if(_commandHandlers[namespace][cmd]==undefined){_commandHandlers[namespace][cmd]=handler;ret.result=true}else{ret.result=false;ret.message="The command was registered previously."}}return ret}function unregisterCommand(namespace,cmd,handler){var ret={"result":null,"message":null};if(namespace==null||namespace==undefined||namespace==""){ret.result=false;ret.message="Namespace cannot be null."}else{namespace=namespace.toUpperCase();
if(_commandHandlers[namespace]!=undefined&&_commandHandlers[namespace][cmd]!=undefined&&_commandHandlers[namespace][cmd]===handler){delete _commandHandlers[namespace][cmd];ret.result=true}else{ret.result=false;ret.message="This command is not registered."}}return ret}function callCommand(namespace,cmd,data,origin,linkageId){namespace=namespace.toUpperCase();if(_commandHandlers[namespace]!=undefined&&_commandHandlers[namespace][cmd]!=undefined)_commandHandlers[namespace][cmd](data,origin);else return null}
function setSourceWindow(win){if(typeof win!="undefined"&&win!=null){if(typeof win=="string")if(window.name==win||window.id==win)_args.sourceElem=window;else _args.sourceElem=win;else _args.sourceElem=win;delete _ref["setSourceWindow"]}}function setTargetWindow(win,name){if(typeof win!="undefined"&&win!=null)if(_args.mode=="REMOTE"||!_args["multipleConnections"]){_args.targetElem=win;_contentWindow[_args.id]=null;if(_crossDomain)_contentWindow[_args.id]=getContentWindow(win);else{var regExp=new RegExp("HTML{1}[a-zA-Z]*Element{1}|Window");
var tof=regExp.exec(helper.object.getTypeOf(win));if(win instanceof HTMLElement||tof&&tof.length>0)_contentWindow[_args.id]=getContentWindow(win);else if(typeof win=="object")_contentWindow[_args.id]=win;else{elem=document.getElementById(win);if(elem){try{elem=elem.contentWindow||elem}catch(error){}_contentWindow[_args.id]=elem}else _contentWindow[_args.id]=getContentWindow(win)}}if(!_args.switchHost)delete _ref["setTargetWindow"]}else _contentWindow[name]=win}function dispose(){if(!!window.removeEvent)window.removeEvent("onmessage",
receiveMessage);else window.removeEventListener("message",receiveMessage,false);_ref=_storageDataName=_secure=_postMessageId=_origin=_linkageId=_commandHandlers=_contentWindow=null;return}function disconnectHost(id){if(id=="*"){if(_linkageId){_linkageId.session={};_linkageId.count=0}_contentWindow={}}else{_linkageId.count--;delete _linkageId.session[id];delete _contentWindow[id]}}function disconnectRemote(){_args.targetElem=null;_contentWindow[_args.id]=null;_linkageId.session={};_linkageId.count=
0}parseArguments(args);Object.defineProperty(this,"registerCommand",{"enumerable":false,"configurable":false,"value":registerCommand});Object.defineProperty(this,"unregisterCommand",{"enumerable":false,"configurable":false,"value":unregisterCommand});Object.defineProperty(this,"postMessage",{"enumerable":true,"configurable":false,"writable":false,"value":postMessage});Object.defineProperty(this,"dispose",{"enumerable":true,"configurable":false,"writable":false,"value":dispose});if(_args.mode=="HOST"){Object.defineProperty(this,
"getRemoteSessions",{"enumerable":true,"configurable":false,"writable":false,"value":function(){return _linkageId["session"]}});Object.defineProperty(this,"disconnect",{"enumerable":true,"configurable":false,"writable":false,"value":disconnectHost});Object.defineProperty(this,"id",{"enumerable":true,"configurable":false,"get":function(){return _args.id},"set":function(id){_args.id=id}})}else if(_args.switchHost){Object.defineProperty(this,"disconnect",{"enumerable":true,"configurable":false,"writable":false,
"value":disconnectRemote});Object.defineProperty(this,"setTargetWindow",{"enumerable":false,"configurable":true,"value":setTargetWindow})}if(_args["profileMode"]!=undefined&&_args["profileMode"]=="JsView"){Object.defineProperty(this,"setSourceWindow",{"enumerable":false,"configurable":true,"value":setSourceWindow});if(!(_args.mode=="REMOTE"&&_args.switchHost))Object.defineProperty(this,"setTargetWindow",{"enumerable":false,"configurable":true,"value":setTargetWindow})}initialize(args);return this}
try{Thinfinity!=undefined}catch(e){Thinfinity={}}Thinfinity.PostMessage=PostMessage})();
(function(){function LinkageConnection(args){var _ref=this;var _isRemote=false;var _isLinked=false;var _waitTime=3E3;var _waitFirstTime=500;var _waitTimeid=null;var _maxTimes=-1;var _countTimes=0;var _postMessage=null;var _linkageTimeoutId=null;var _onConnectCallBacks=[];var _onNodeConnectCallBacks=[];var _sendTimeoutHost=null;var _isFirstTimeConnectCmd=false;var _disposing=false;var _args={"namespace":"THINFINITY","mode":LinkageConnection.mode.REMOTE,"id":"LINKAGE_"+(new Date).getTime().toString(),
"multipleConnections":true,"sourceElem":null,"targetElem":null,"profileMode":null,"switchHost":false,"events":null,"channel":null};var _linkage={"id":null,"namespace":null,"mode":null,"origin":null};var _linkageList={};var _polling={"timeoutId":null,"timeout":null,"isConnected":false,"retries":-1,"maxRetries":1,"reconnectedTimeRefresh":250,"connectedTimeRefresh":4E3};var _allowMethods=["_linkageHostConnectionRequest","_linkageHostPollingRequest","_linkageHostReleaseConnection","_linkageRemoteConnectionRequest",
"_linkageRemotePollingRequest","_linkageHostSyncModelCommand","_linkageRemoteSyncModelCommand"];var _events={};var _crossDomain=false;var _targetId=undefined;var _isDisposed=false;function initialize(args){_ref["commands"]={};if(args!=null&&args!=undefined)for(var arg in _args)if(args[arg]!=undefined)_args[arg]=args[arg];if(!_args["channel"]||_args["channel"]=="")_args["channel"]="*";try{if(!parent||!parent.document)_crossDomain=true}catch(error){_crossDomain=true}_args["mode"]=_args["mode"].toUpperCase();
if(_args["mode"].indexOf("REMOTE")!=-1){_isRemote=true;if(helper.object.existsPath(args,"events.success"))onConnect(args.events.success);if(helper.object.existsPath(args,"events.failure"));}else _isRemote=false;for(var eventName in _args.events)if(helper.object.existsPath(_args,"events."+eventName)){if(!_events[eventName])_events[eventName]=[];_events[eventName].push(_args.events[eventName])}if(typeof _args["id"]=="undefined"||_args["id"]==null||_args["id"]=="")_args["id"]="Thinfinity.Linkage_"+(_isRemote?
LinkageConnection.mode.REMOTE:LinkageConnection.mode.HOST)+"_"+(new Date).getTime().toString();if(window["roleMode"]==undefined||window["roleMode"]==LinkageConnection.mode.REMOTE)window["roleMode"]=_isRemote?LinkageConnection.mode.REMOTE:LinkageConnection.mode.HOST;var errorMsg="Thinfinity.PostMessage is undefined";try{if(Thinfinity["PostMessage"]){_args["allowMethods"]=_allowMethods;_postMessage=new Thinfinity.PostMessage(_args);registerPrivateCommands()}else{_ref=null;throw new Error(errorMsg);
return}}catch(error){_ref=null;throw new Error(error.message);return}}function start(){if(_isRemote)if(!_isLinked){_disposing=false;var data={"id":_args["id"],"mode":_args["mode"],"namespace":_args["namespace"],"channel":_args["channel"]};helper.console.log("Initialize Linkage: Start [Mode: "+_args["mode"]+" , Id: "+_args["id"]+"]");if(arguments.length>0&&helper.object.getTypeOf(arguments[0])=="window"){var wnd=arguments[0];setTargetWindow(wnd,wnd.name||wnd.id||"WND_"+LinkageConnection.mode.HOST+
"_"+helper.utils.generateGUID(10))}if(_maxTimes==-1||_maxTimes>_countTimes){_countTimes++;send("_linkageHostConnectionRequest",data,undefined,true,_targetId);clearTimeout(_waitTimeid);_waitTimeid=setTimeout(start,_isFirstTimeConnectCmd!=true&&_countTimes<10?_waitFirstTime:_waitTime)}else{helper.console.log("Cannot connect to the "+LinkageConnection.mode.HOST+", disposing current element");if(helper.object.existsPath(args,"events.failure"))try{args.events.failure("Cannot connect to host")}catch(error){}disposeRemote()}}}
function linkageHostConnectionRequest(data,origin){if(args["mode"]==LinkageConnection.mode.HOST&&data["id"]!=_args["id"]&&_args["channel"]===data["channel"]){if(_linkageList[data["id"]]==undefined)_linkageList[data["id"]]={};var linkage={};linkage["origin"]=origin;for(var attrib in _linkage)if(data[attrib]!=undefined)linkage[attrib]=data[attrib];_linkageList[data["id"]]=linkage;var data={"id":_args["id"],"mode":_args["mode"],"namespace":_args["namespace"],"targetId":linkage["id"],"channel":_args["channel"]};
helper.console.log("Host Connection Request Received - Linkage: [Mode: "+_args["mode"]+" , Id: "+_args["id"]+"], Linked to: ["+linkage["id"]+"], Channel: ["+_args.channel+"], Accept connection, responding to remote...");send("_linkageRemoteConnectionRequest",data,undefined,true,linkage.id);_isLinked=true;for(var i=0;i<_onNodeConnectCallBacks.length;i++)_onNodeConnectCallBacks[i](getLinkedConfig());fireEvent("connect",{"id":_args.id,"targetId":data.targetId})}}function linkageRemoteConnectionRequest(data,
origin){if(_isLinked==false&&_args["channel"]===data["channel"]){_isLinked=true;_linkage["origin"]=origin;for(var attrib in _linkage)if(data[attrib]!=undefined)_linkage[attrib]=data[attrib];for(var i=0;i<_onConnectCallBacks.length;i++)_onConnectCallBacks[i](getLinkedConfig());helper.console.log("Remote Connection Request Complete - Linkage: [Mode: "+_args["mode"]+" , Id: "+_args["id"]+"], Linked to: ["+_linkage["id"]+"] , Channel: ["+_args.channel+"]. The Host and remote are engaged.");clearTimeout(_waitTimeid);
_waitTimeid=null;setTimeout(function(){helper.console.log("Start polling... Remote: "+_args["id"]);clearTimeout(_polling["timeoutId"]);_polling["isConnected"]=true;_polling["timeout"]=_polling["connectedTimeRefresh"];if(_polling["timeoutId"]==null){clearTimeout(_polling["timeoutId"]);_polling["timeoutId"]=null;linkageRemotePolling()}},500);_maxTimes=30;fireEvent("connect",{"id":_args.id,"targetId":data.targetId})}}function clearPolling(){clearTimeout(_polling["timeoutId"]);_polling["timeoutId"]=null}
function linkageRemotePolling(){if(_isRemote&&!_disposing){clearPolling();if(_polling["isConnected"]==false){helper.console.log("HOST was lost, retrying to connect...");_polling["timeout"]=_polling["reconnectedTimeRefresh"];if(_polling["retries"]==-1||_polling["retries"]>_polling["maxRetries"]){_isLinked=false;clearTimeout(_waitTimeid);_maxTimes=-1;_countTimes=0;_linkageList={};start();return}}else _polling["timeout"]=_polling["connectedTimeRefresh"];var data={"id":_args["id"],"mode":_args["mode"],
"namespace":_args["namespace"],"channel":_args["channel"]};if(_crossDomain)data.targetId=_targetId;send("_linkageHostPollingRequest",data,false,false);clearPolling();_polling["timeoutId"]=setTimeout(function(){_polling["isConnected"]=false;linkageRemotePolling()},_polling["timeout"])}}function linkageHostPollingRequest(data,origin){if(_args["mode"]==LinkageConnection.mode.HOST&&data["id"]!=_args["id"]&&_args["channel"]===data["channel"]){var sendData={};if(_linkageList[data["id"]]==undefined)sendData=
{"id":_args["id"],"mode":_args["mode"],"namespace":_args["namespace"],"targetId":data["id"],"channel":_args["channel"],"reconnect":true};else sendData={"id":_args["id"],"mode":_args["mode"],"namespace":_args["namespace"],"targetId":data["id"],"channel":_args["channel"]};send("_linkageRemotePollingRequest",sendData,data.id,false,data.id)}}function linkageRemotePollingRequest(data,origin){if(_isRemote&&data&&data["mode"]==LinkageConnection.mode.HOST&&data["targetId"]==_args["id"]&&_args["channel"]===
data["channel"]){clearTimeout(_polling["timeoutId"]);_polling["timeoutId"]=null;if(data["reconnect"]==true){_polling["isConnected"]=false;_polling["timeout"]=_polling["reconnectedTimeRefresh"];_isLinked=false;start()}else{_polling["isConnected"]=true;_polling["timeout"]=_polling["connectedTimeRefresh"];_polling["timeoutId"]=setTimeout(function(){linkageRemotePolling()},_polling["timeout"])}}}function linkageRemoteReleaseConnection(){helper.console.log("Requesting release connection from "+LinkageConnection.mode.HOST+
" list.");var data={"id":_args["id"],"mode":_args["mode"],"namespace":_args["namespace"],"targetId":_targetId,"channel":_args["channel"]};send("_linkageHostReleaseConnection",data,false,false,_targetId)}function linkageHostReleaseConnection(data,origin){if(_args["mode"]==LinkageConnection.mode.HOST&&data["id"]!=_args["id"]&&_args["channel"]===data["channel"])releaseRemoteConnection(data.id)}function getLinkedConfig(){if(_args["mode"]==LinkageConnection.mode.HOST)return{"mode":_args["mode"],"id":_args["id"],
"remotes":_linkageList};else return{"mode":_args["mode"],"id":_args["id"],"host":_linkage["id"]}}function guid(){function s4(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}return function(){return s4()+s4()+"-"+s4()+"-"+s4()+"-"+s4()+"-"+s4()+s4()+s4()}()}function registerPrivateCommands(){if(_isRemote){_postMessage.registerCommand(_args["namespace"],"_linkageRemoteConnectionRequest",linkageRemoteConnectionRequest);_postMessage.registerCommand(_args["namespace"],"_linkageRemotePollingRequest",
linkageRemotePollingRequest)}else{_postMessage.registerCommand(_args["namespace"],"_linkageHostConnectionRequest",linkageHostConnectionRequest);_postMessage.registerCommand(_args["namespace"],"_linkageHostPollingRequest",linkageHostPollingRequest);_postMessage.registerCommand(_args["namespace"],"_linkageHostReleaseConnection",linkageHostReleaseConnection)}}function register(cmd,handler,populate,optionalName){if(cmd!=undefined&&handler!=undefined)if(_ref["commands"][cmd]==undefined){populate=populate!==
false;var rcReturn=_postMessage.registerCommand(_args["namespace"],cmd,handler);if(populate&&rcReturn.result){var exposeName=typeof optionalName==="string"&&optionalName!=""?optionalName:cmd;_ref["commands"][exposeName]=function(data){send(cmd,data,undefined,false)}}else helper.console.log("Cannot register command:["+rcReturn.message+"]")}else helper.console.log("This command is already registered: ["+cmd+"]");else helper.console.log("Cannot register command:["+cmd+"], handler is: ["+handler.toString()+
"]")}function unregister(cmd,handler){if(cmd!=undefined&&handler!=undefined){if(_isRemote)delete _ref["commands"][cmd];var rcReturn=_postMessage.unregisterCommand(_args["namespace"],cmd,handler);if(rcReturn.result!=true)helper.console.log("Cannot unregister command:["+rcReturn.message+"]")}else helper.console.log("Cannot unregister command:["+cmd+"], handler is: ["+handler.toString()+"]")}function on(event,handler){if(event==undefined||event==null||event=="")return"Event is undefined or null.";if(handler==
undefined||handler==null||handler=="")return"Handler is undefined or null.";if(_events[event]==undefined)_events[event]=[];_events[event].push(handler)}function off(event,handler){if(event==undefined||event==null||event=="")return"Event is undefined or null.";if(handler==undefined||handler==null||handler=="")return"Handler is undefined or null.";if(_events[event])for(var i=_events[event].length-1;i>=0;i--)if(_events[event][i]===handler)_events[event].splice(i,1)}function fireEvent(name,data){if(_events[name]&&
_events[name].length>0)for(var i=0;i<_events[name].length;i++)try{setTimeout(function(args){_events[name][args[0]](data)},0,[i])}catch(error){}}function send(cmd,data,allRemotes,protocol,targetId){var sendData=null;if(!targetId||targetId=="")targetId=_targetId;if(allRemotes==undefined)sendData={"namespace":_args["namespace"],"cmd":cmd,"linkageId":_args["id"],"targetId":targetId,"data":data,"allRemotes":true,"protocol":protocol};else sendData={"namespace":_args["namespace"],"cmd":cmd,"linkageId":_args["id"],
"targetId":targetId,"data":data,"allRemotes":allRemotes,"protocol":protocol};if(_isRemote==false){var subcmd=helper.object.getValue(sendData,"data.cmd",undefined);if(cmd.indexOf("_linkage")==-1&&(!_isFirstTimeConnectCmd&&subcmd=="connect"||subcmd!="reconnecting"&&subcmd!="connect")){_isFirstTimeConnectCmd=true;var item={"cmd":cmd,"data":sendData.data,"time":(new Date).getTime(),"linkageId":{}};if(_isLinked==false);else{for(var linkageId in _linkageList)item["linkageId"][linkageId]=true;_postMessage.postMessage(sendData)}}else _postMessage.postMessage(sendData)}else if(_isLinked==
true||_allowMethods.indexOf(cmd)!=-1)_postMessage.postMessage(sendData);else;}function setSourceWindow(win){if(typeof win!="undefined"&&win!=null){_args["sourceElem"]=win;_postMessage.setSourceWindow(win);delete _ref["setSourceWindow"]}}function setTargetWindow(win,name){if(typeof win!="undefined"&&win!=null)if(_args["mode"]==LinkageConnection.mode.REMOTE||!_args["multipleConnections"]){_args["targetElem"]=win;_postMessage.setTargetWindow(win);_targetId=name;if(!_args.switchHost)delete _ref["setTargetWindow"]}else{_args["targetElem"]=
null;_postMessage.setTargetWindow(win,name)}}function onConnect(callback){var isNotAdded=true;for(var i=0;i<_onConnectCallBacks.length;i++)if(_onConnectCallBacks[i]===callback){isNotAdded=false;break}if(isNotAdded&&callback instanceof Function)if(_isLinked)callback(getLinkedConfig());else _onConnectCallBacks.push(callback)}function onNodeConnect(callback){var isNotAdded=true;for(var i=0;i<_onNodeConnectCallBacks.length;i++)if(_onNodeConnectCallBacks[i]===callback){isNotAdded=false;break}if(isNotAdded&&
callback instanceof Function)if(_isLinked)callback(getLinkedConfig());else _onNodeConnectCallBacks.push(callback)}function disposeRemote(){_disposing=true;var time=500;if(arguments.length>0)try{time=parseFloat(arguments[0])}catch(error){}if(_isDisposed)return;clearTimeout(_polling["timeoutId"]);clearTimeout(_waitTimeid);linkageRemoteReleaseConnection();if(_postMessage)_postMessage.dispose();setTimeout(function(){_ref=_postMessage=_onNodeConnectCallBacks=_onConnectCallBacks=_linkageList=_isLinked=
_countTimes=_args=null;_isDisposed=true},time);return}function disposeHost(){var time=500;if(arguments.length>0)try{time=parseFloat(arguments[0])}catch(error){}if(_isDisposed)return;if(_postMessage){_postMessage.disconnect("*");_postMessage.dispose()}setTimeout(function(){_ref=_postMessage=_onNodeConnectCallBacks=_onConnectCallBacks=_linkageList=_isLinked=_countTimes=_args=null;_isDisposed=true},time);return}function activeSessions(){var count=0;for(var link in _linkageList)count++;return count}function releaseRemoteConnection(id){delete _linkageList[id];
_postMessage.disconnect(id)}function disconnectRemote(id,echo){if(echo==undefined||!echo)linkageRemoteReleaseConnection();clearTimeout(_polling.timeoutId);_isLinked=false;_postMessage.disconnect();_args.targetElem=null}initialize(args);Object.defineProperty(this,"register",{"enumerable":true,"configurable":false,"value":register});Object.defineProperty(this,"unregister",{"enumerable":false,"configurable":false,"value":unregister});Object.defineProperty(this,"send",{"enumerable":true,"configurable":false,
"value":send});if(_isRemote==true){Object.defineProperty(this,"start",{"enumerable":true,"configurable":false,"writable":false,"value":start});Object.defineProperty(this,"isConnected",{"enumerable":true,"configurable":false,"get":function(){return _isLinked}});Object.defineProperty(this,"onConnect",{"enumerable":true,"configurable":false,"set":onConnect});Object.defineProperty(this,"dispose",{"enumerable":true,"configurable":false,"writable":false,"value":disposeRemote});if(_args.switchHost){Object.defineProperty(this,
"setTargetWindow",{"enumerable":false,"configurable":true,"value":setTargetWindow});Object.defineProperty(this,"disconnect",{"enumerable":true,"configurable":false,"writable":false,"value":disconnectRemote})}Object.defineProperty(this,"targetId",{"enumerable":false,"configurable":true,"get":function(){return _targetId},"set":function(targetId){_targetId=targetId}})}else{Object.defineProperty(this,"onNodeConnect",{"enumerable":true,"configurable":false,"set":onNodeConnect});Object.defineProperty(this,
"dispose",{"enumerable":true,"configurable":false,"writable":false,"value":disposeHost});Object.defineProperty(this,"activeSessions",{"enumerable":true,"configurable":false,"get":function(){return activeSessions()}});Object.defineProperty(this,"disconnect",{"enumerable":true,"configurable":false,"writable":false,"value":releaseRemoteConnection});Object.defineProperty(this,"id",{"enumerable":true,"configurable":false,"get":function(){return _args.id},"set":function(id){_args.id=id;if(_postMessage)_postMessage.id=
id}});Object.defineProperty(this,"isConnected",{"enumerable":true,"configurable":false,"get":function(){for(var k in _linkageList)return true;return false}})}Object.defineProperty(this,"on",{"enumerable":true,"configurable":false,"value":on});Object.defineProperty(this,"off",{"enumerable":true,"configurable":false,"value":off});if(_args["profileMode"]!=undefined&&[LinkageConnection.profileMode.JSVIEW,LinkageConnection.profileMode.CONFIGURABLE].indexOf(_args["profileMode"])!=1){Object.defineProperty(this,
"setSourceWindow",{"enumerable":false,"configurable":true,"value":setSourceWindow});if(!(_isRemote&&_args.switchHost))Object.defineProperty(this,"setTargetWindow",{"enumerable":false,"configurable":true,"value":setTargetWindow})}return this}try{Thinfinity!=undefined}catch(e){Thinfinity={}}var _profileMode=helper.object.createEnum({"NONE":"none","JSVIEW":"JsView","CONFIGURABLE":"configurable"});Object.defineProperty(LinkageConnection,"profileMode",{"enumerable":false,"configurable":false,"get":function(){return _profileMode}});
var _modes=helper.object.createEnum({"HOST":"HOST","REMOTE":"REMOTE"});Object.defineProperty(LinkageConnection,"mode",{"enumerable":false,"configurable":false,"get":function(){return _modes}});Thinfinity.LinkageConnection=LinkageConnection})();
(function(){function JsRO(args){var _ref=this;var _linkageConnection=null;var _isRemote=false;var _onRemoteCommandList=[];var _id;var _pid=null;var _name=null;var _args={"input":null,"output":null,"clientSettings":null,"autoStart":true,"id":null,"mode":"REMOTE","supportObserve":true,"events":null,"customEvents":null,"outputMode":"cmd","sourceElem":null,"targetElem":null,"switchHost":false,"commands":null,"hostId":null,"description":null};var _populateMethods={};var _observeModel=null;var _shadowModel=
null;var _privateHandler={};var _jsroManager=null;var _crossDomain=false;try{if(parent&&parent.document);else _crossDomain=true}catch(error){_crossDomain=true}var _wndTop=getTopJsROManager();var _isReadyInterval=null;var _crossInterval=null;var _isDisposing=false;var _visibilityChange=null;function initialize(args){if(args&&args.switchHost)_args.autoStart=false;helper.object.parseAttributes(_args,args,"MATCH");_args.mode=_args.mode.toUpperCase();_id="Thinfinity.JsRO_"+_args.mode+"_"+(new Date).getTime().toString();
_name=_args.name||_args.id||_args.alias||_id;_args.description=_args.description||_name;_args.id=_id;var errorMsg="Thinfinity.LinkageConnection is undefined";try{if(Thinfinity["LinkageConnection"])_linkageConnection=new Thinfinity.LinkageConnection(_args);else{_ref=null;throw new Error(errorMsg);return}}catch(error){_ref=null;throw new Error(error.message);return}if(_args["mode"]&&_args["mode"].indexOf("HOST")!=-1)try{if(typeof _args["input"]!="function")throw"input param is not a function";if(typeof _args["output"]!=
"function")throw"output param is not a function";if(_args["clientSettings"]!=null&&_args["clientSettings"]!=undefined&&typeof _args["clientSettings"]!="object")throw"clientSettings param is not an object";_isRemote=false;initializeLocal();if(_args["supportObserve"]==true){var args={"parentObject":{"sendMessage":function(){},"sendRemoteCommand":function(){},"dispose":function(){}},"id":_id,"shadowCopy":true};_shadowModel=new Thinfinity.ObserveModel(args)}if(agentInfo.isMSIE!=true&&agentInfo.msieVersion>
9)helper.console.log("JsRO - HOST was created and is listening...")}catch(error){helper.console.log("Cannot initialize Thinfinity.JsRO, ["+error+"].");_ref=null;return}else{_isRemote=true;initializeRemote();if(_args["supportObserve"]==true)initializeObserveModel()}}function afterInitialize(){if(helper.object.existsPath(window,"Thinfinity.JsROManager")){_jsroManager=new Thinfinity.JsROManager({});if(_wndTop&&_wndTop.Thinfinity&&_wndTop.Thinfinity.registerJsRO)_wndTop.Thinfinity.registerJsRO(_ref,window)}if(_crossDomain){if(_isRemote&&
!helper.object.existsPath(window,"Thinfinity.JsROManager"))_linkageConnection.start();return}else if(_isRemote)if(_args.hostId!=undefined&&_args.hostId!=""&&_args.hostId!=null)connect(_args.hostId,_args["autoStart"]||_linkageConnection.isConnected);else if(_args.autoStart)_linkageConnection.start()}function getTopJsROManager(){var tempWnd=null;var tempFn=function(wnd){if(wnd.parent&&wnd.parent!=wnd)try{if(wnd.parent&&wnd.parent.document)if(wnd.Thinfinity&&wnd.isJsROManager){tempWnd=wnd;tempFn(wnd.parent)}else tempFn(wnd.parent)}catch(error){return window}else try{if(wnd.Thinfinity&&
wnd.isJsROManager)tempWnd=wnd;else return null}catch(error){return null}};tempFn(window.parent);return tempWnd||window}function crossCommand(cmd,data){if(_linkageConnection.isConnected)_linkageConnection.send("crossCommand",{"cmd":cmd,"data":data});else{if(!data)data={};data.requestId=_id;data.cmd=cmd;data.id=_id;window.top.postMessage({"cmd":"crossCommand","data":data},"*")}}var onBodyFocus=function(){if(document.hasFocus())if(!_crossDomain){if(_wndTop&&_wndTop.Thinfinity&&_wndTop.Thinfinity.focusJsRO)_wndTop.Thinfinity.focusJsRO(_id)}else crossCommand("focusJsRO",
{"id":_id})};function initializeLocal(){var isTrigger=_linkageConnection=="undefined"||_linkageConnection["send"]==undefined?true:false;_args["input"](function(obj){var result=true;switch(obj["cmd"]){case "rapp":if(obj.pid!=null)_pid=obj.pid;_shadowModel.set(obj);if(isTrigger)$(window).trigger("rapp",[obj]);else if(!_isDisposing&&_linkageConnection.isConnected)_linkageConnection.send("rapp",obj);else result=false;break;case "apiMsg":if(isTrigger)$(window).trigger("receiveMessage",[obj.msg]);else if(!_isDisposing&&
_linkageConnection.isConnected)_linkageConnection.send("receiveMessage",{"message":obj.msg});else result=false;break;case "clientSettings":if(typeof obj["HideMousePointer"]!="undefined"){helper["console"]["log"]("clientSettingsChanged: clientSettings.HideMousePointer="+obj["HideMousePointer"]);if(clientSettings&&clientSettings["hidePointer"])clientSettings["hidePointer"]=obj["HideMousePointer"]}if(typeof obj["MouseMovement"]!="undefined"){helper["console"]["log"]("clientSettingsChanged: clientSettings.MouseMovement="+
obj["MouseMovement"]);if(clientSettings&&clientSettings["relativeTouch"])clientSettings["relativeTouch"]=obj["MouseMovement"]=="relative"}if(typeof obj["MouseMoveMode"]!="undefined"){helper["console"]["log"]("clientSettingsChanged: clientSettings.MouseMoveMode="+obj["MouseMoveMode"]);if(obj["MouseMoveMode"]=="move");else;}break}return result});_linkageConnection.register("sendMessage",function(jsonData,origin){if(_pid!=null&&jsonData&&jsonData.pid==null)jsonData.pid=_pid;switch(_args["outputMode"].toLowerCase()){case "json":_args["output"](jsonData);
break;case "cmd":default:var message=jsonData.message;message=message instanceof Object?JSON.stringify(encodeURIComponent(message)):encodeURIComponent(message);var query="cmd=apiMsg"+"&msg="+message;_args["output"](query);break}});_linkageConnection.register("sendRemoteCommand",function(jsonData,origin){switch(_args["outputMode"].toLowerCase()){case "json":if(typeof jsonData["cmd"]=="undefined")jsonData["cmd"]="rapp";if(_pid!=null&&jsonData.pid==null)jsonData.pid=_pid;_args["output"](jsonData);break;
case "cmd":default:var type=jsonData["type"];var path=jsonData["path"];var data=jsonData["data"];var cbid=jsonData["cbid"];if(typeof data=="object")data=JSON.stringify(data);var query="cmd=rapp"+"&type="+encodeURIComponent(type)+"&path="+encodeURIComponent(path)+"&data="+encodeURIComponent(data)+"&cbid="+encodeURIComponent(cbid);if(_pid!=null)query+="&pid="+encodeURIComponent(_pid);_args["output"](query);break}});_linkageConnection.register("syncModelRemoteCommand",function(jsonData){if(!_isDisposing&&
_shadowModel&&_shadowModel.getOMCommands)_linkageConnection.send("syncModelHostCommand",{"data":JSON.stringify(_shadowModel.getOMCommands())},jsonData.id)});_linkageConnection.register("disconnect",function(jsonData){_linkageConnection.disconnect(jsonData.id)});if(_args.customEvents)_linkageConnection.register("sendCommand",function(jsonData){if(jsonData)if(helper.object.existsPath(_args,"customEvents."+jsonData.cmd))try{_args.customEvents[jsonData.cmd](jsonData)}catch(error){}},false);_privateHandler["sendCommand"]=
function(cmd,data){if(isTrigger==true)$(window).trigger("sendCommand",[controlId,keystrokes]);else if(!_isDisposing)_linkageConnection.send("sendCommand",{"cmd":cmd,"data":data})};if(_args.commands)for(var cmd in _args.commands)_linkageConnection.register(cmd,_args.commands[cmd]);initializeFocus()}function processFocus(cmd,value){if(value&&!_crossDomain)if(_wndTop&&_wndTop.Thinfinity&&_wndTop.Thinfinity.focusJsRO)_wndTop.Thinfinity.focusJsRO(_id);else crossCommand("focusJsRO",{"id":_id})}function initializeFocus(){if(Thinfinity.TabFocusHook)Thinfinity.TabFocusHook.on(["visible",
"focus"],function(e){processFocus("focus",true)}).on(["hidden","blur"],function(e){processFocus("blur",false)}).on("visibility",function(e){processFocus(e.visibilityState==="visible"?"focus":"blur",e.visibilityState==="visible")});else{_visibilityChange=function(e){e.stopPropagation();e.preventDefault();var v=false;var h=true;var isHidden=false;var map={"focus":v,"focusin":v,"blur":h,"focusout":h,"pagehide":h};e=e||window.event;if(e.type in map)isHidden=map[e.type];else isHidden=this.hidden?true:
false;if(isHidden);else processFocus("focus",true);pollingTime=map=isHidden=h=v=null;return false};var hidden="hidden";if(hidden in document)document.addEventListener("visibilitychange",_visibilityChange,false);else if(hidden=="mozHidden")document.addEventListener("mozvisibilitychange",_visibilityChange,false);else if(hidden=="webkitHidden")document.addEventListener("webkitvisibilitychange",_visibilityChange,false);else if(hidden=="msHidden")document.addEventListener("msvisibilitychange",_visibilityChange,
false);else if("onfocusin"in document)document.onfocusin=document.onfocusout=_visibilityChange;window.onpageshow=window.onpagehide=window.onfocus=window.onblur=_visibilityChange;if(document[hidden]!==undefined)_visibilityChange({"type":document[hidden]?"blur":"focus","stopPropagation":function(){return},"preventDefault":function(){return}});document.body.addEventListener("focus",onBodyFocus,false)}}function initializeRemote(){var isTrigger=_linkageConnection=="undefined"||_linkageConnection["send"]==
undefined?true:false;_linkageConnection.register("receiveMessage",function(jsonData){if(_ref["onReceiveMessage"])_ref["onReceiveMessage"](jsonData.message)});_linkageConnection.register("rapp",function(jsonData){for(var i=0;i<_onRemoteCommandList.length;i++)_onRemoteCommandList[i](jsonData)});_linkageConnection.register("sendCommand",function(jsonData){if(_args["events"]&&_args["events"]["sendCommand"])try{var cmd=null;var data=null;if(typeof jsonData!="undefined"){cmd=jsonData["cmd"];data=jsonData["data"]}_args["events"]["sendCommand"](cmd,
data)}catch(error){}});_linkageConnection.register("crossCommand",function(jsonData){if(jsonData&&jsonData.cmd&&!_crossDomain){var data=jsonData.data;if(data)if(typeof data=="string")data=JSON.parse(data);switch(jsonData.cmd){case "focusJsRO":if(_wndTop&&_wndTop.Thinfinity&&_wndTop.Thinfinity.focusJsRO)_wndTop.Thinfinity.focusJsRO(data.id);break}}});_linkageConnection.register("syncModelHostCommand",function(jsonData){if(helper.object.existsPath(jsonData,"data")){var omCmds=[];try{omCmds=JSON.parse(jsonData.data)}catch(error){}for(var k=
0;k<omCmds.length;k++)try{for(var i=0;i<_onRemoteCommandList.length;i++)_onRemoteCommandList[i](omCmds[k])}catch(error){}}});_populateMethods["sendMessage"]=function(message){if(isTrigger==true)$(window).trigger("sendMessage",[message]);else if(!_isDisposing)_linkageConnection.send("sendMessage",{"message":message})};_populateMethods["sendRemoteCommand"]=function(type,path,data,cbid){if(isTrigger==true)$(window).trigger("sendRemoteCommand",[controlId,keystrokes]);else if(!_isDisposing)_linkageConnection.send("sendRemoteCommand",
{"type":type,"path":path,"data":data,"cbid":cbid})};_populateMethods["dispose"]=function(){_isDisposing=true;var isConnected=_linkageConnection.isConnected;if(_crossDomain)crossCommand("unregisterJsRO",{"id":_id,"mode":_args.mode});if(_wndTop&&_wndTop.Thinfinity&&_wndTop.Thinfinity.unregisterJsRO)_wndTop.Thinfinity.unregisterJsRO(_ref);_observeModel["dispose"]();_linkageConnection["dispose"]();setTimeout(function(){_observeModel=null;_linkageConnection=null;_populateMethods=null;_privateHandler=null;
_onRemoteCommandList=null;if(isConnected&&helper.object.existsPath(args,"events.disconnect"))try{args.events.disconnect({"id":_id})}catch(error){}_ref=args=_args=_onRemoteCommandList=_privateHandler=_populateMethods=_linkageConnection=_observeModel=null},500);return};if(_args.commands)for(var cmd in _args.commands)_linkageConnection.register(cmd,_args.commands[cmd])}function connect(hostId){var forceConnect=helper.object.convertTo(helper.object.getValue(arguments,"[1]",false),"boolean");if(hostId&&
hostId!="")_args.hostId=hostId;if(!_crossDomain||_args.targetElem==null&&_args.hostId!="")if(_jsroManager){var done=function(){var hostCollection=_jsroManager.getHostCollection();if(_args.hostId=="*")if(hostCollection.length>0){for(var i=0;i<hostCollection.length;i++)if(hostCollection[i]["default"]){updateTarget(_jsroManager.getJsROContentWindow(hostCollection[i].id),forceConnect);return}_args.hostId=hostCollection[0].id;updateTarget(_jsroManager.getJsROContentWindow(hostCollection[0].id),forceConnect);
return}for(var i=0;i<hostCollection.length;i++)if(hostCollection[i].name==_args.hostId||hostCollection[i].id==_args.hostId){updateTarget(_jsroManager.getJsROContentWindow(hostCollection[i].id),forceConnect);return}for(var i=0;i<hostCollection.length;i++)if(hostCollection[i]["default"]){updateTarget(_jsroManager.getJsROContentWindow(hostCollection[i].id),forceConnect);return}};clearInterval(_isReadyInterval);function doConnect(){if(_jsroManager.isReady){clearInterval(_isReadyInterval);done()}}_isReadyInterval=
setInterval(doConnect,250);doConnect()}else{if(_isRemote&&!_args.autoStart&&_args.hostId==undefined)_linkageConnection.start()}else if(_args.targetElem){_linkageConnection.setTargetWindow(_args.targetElem,_args.hostId);_linkageConnection.hostId=_args.hostId;_linkageConnection.start()}}function updateTarget(targetElem){var forceConnect=helper.object.convertTo(helper.object.getValue(arguments,"[1]",false),"boolean");var regExp=new RegExp("HTML{1}[a-zA-Z]*Element{1}|Window");var tof=regExp.exec(helper.object.getTypeOf(targetElem));
if(targetElem&&(targetElem instanceof HTMLElement||targetElem instanceof String||tof&&tof.length>0||typeof targetElem=="object")){disconnect();_args.targetElem=targetElem;_linkageConnection.setTargetWindow(targetElem,_args.hostId);if(_args["autoStart"]||_linkageConnection.isConnected||forceConnect)_linkageConnection.start()}else helper.console.log("JsRO - targetElement must be a HTMLELement or String id",arguments)}function disconnect(){var isConnected=_linkageConnection.isConnected;if(_linkageConnection.isConnected)_linkageConnection.disconnect(_id);
if(_args.targetElem!=null&&!(_crossDomain&&_isRemote))_args.targetElem=null;if(isConnected&&helper.object.existsPath(args,"events.disconnect"))try{args.events.disconnect({"id":_id})}catch(error){}}function initializeObserveModel(){helper.console.log("Initializing Observe Model");if(Thinfinity["ObserveModel"]){var args={"parentObject":_populateMethods,"id":_id};_observeModel=new Thinfinity.ObserveModel(args);_linkageConnection.onConnect=function(){helper.console.log("Linkage was successfully invoked.");
function onRemoteCommandHandler(jsonData){_observeModel.set(jsonData)}_onRemoteCommandList.push(onRemoteCommandHandler);if(!_isDisposing)_linkageConnection.send("syncModelRemoteCommand",{"id":_id})}}else helper.console.warning("Observe Model is undefined.")}function updateManagerInstance(){if(_jsroManager)_jsroManager.updateJsROInstance(_ref)}function updateName(name){if(name!=_name){var oldName=_name;_name=name;updateManagerInstance()}}function updateDescription(description){if(description!=_args.description){var oldDescription=
_args.description;_args.description=description;updateManagerInstance()}}function disposeHost(){var isConnected=false;if(_observeModel)_observeModel.dispose();if(_shadowModel)_shadowModel.dispose();if(_linkageConnection){isConnected=_linkageConnection.isConnected;_linkageConnection.dispose()}if(_crossDomain)crossCommand("unregisterJsRO",{"id":_id,"mode":_args.mode});if(_wndTop&&_wndTop.Thinfinity&&_wndTop.Thinfinity.unregisterJsRO)_wndTop.Thinfinity.unregisterJsRO(_ref);if(isConnected&&helper.object.existsPath(args,
"events.disconnect"))try{args.events.disconnect({"id":_id})}catch(error){}if(Thinfinity.TabFocusHook)Thinfinity.TabFocusHook.off(["visible","focus","hidden","blur","visibility"]);else{document.body.removeEventListener("focus",onBodyFocus,false);onBodyFocus=null;var hidden="hidden";if(hidden in document)document.removeEventListener("visibilitychange",_visibilityChange,false);else if(hidden=="mozHidden")document.removeEventListener("mozvisibilitychange",_visibilityChange,false);else if(hidden=="webkitHidden")document.removeEventListener("webkitvisibilitychange",
_visibilityChange,false);else if(hidden=="msHidden")document.removeEventListener("msvisibilitychange",_visibilityChange,false);else if("onfocusin"in document)document.onfocusin=document.onfocusout=function(){};window.onpageshow=window.onpagehide=window.onfocus=window.onblur=function(){};_visibilityChange=function(){}}}initialize(args);for(var method in _linkageConnection.commands)Object.defineProperty(this,method,{"enumerable":true,"configurable":false,"value":_linkageConnection.commands[method]});
if(_isRemote){if(_observeModel&&_args.supportObserve){Object.defineProperty(this,"model",{"enumerable":true,"configurable":false,"value":_observeModel.model});Object.defineProperty(this,"on",{"enumerable":true,"configurable":false,"value":_observeModel.on});Object.defineProperty(this,"off",{"enumerable":true,"configurable":false,"value":_observeModel.off});Object.defineProperty(this,"modelPropertyDescriptor",{"enumerable":false,"configurable":false,"value":_observeModel.modelPropertyDescriptor});
Object.defineProperty(this,"dispose",{"enumerable":false,"configurable":false,"writable":false,"value":_populateMethods.dispose})}if(_args.autoStart===false||_args.switchHost){Object.defineProperty(this,"start",{"enumerable":true,"configurable":false,"value":function(){return connect(undefined,true)}});Object.defineProperty(this,"connect",{"enumerable":true,"configurable":false,"value":function(hostId){return connect(hostId,true)}})}if(_args.switchHost){Object.defineProperty(this,"disconnect",{"enumerable":true,
"configurable":false,"value":disconnect});Object.defineProperty(this,"id",{"enumerable":true,"configurable":false,"get":function(){return _id}})}Object.defineProperty(this,"description",{"enumerable":true,"configurable":false,"get":function(){return _args.description}})}else{Object.defineProperty(this,"sendCommand",{"enumerable":false,"configuable":false,"value":_privateHandler.sendCommand});Object.defineProperty(this,"id",{"enumerable":true,"configurable":false,"get":function(){return _id}});Object.defineProperty(this,
"description",{"enumerable":true,"configurable":false,"get":function(){return _args.description},"set":updateDescription})}Object.defineProperty(this,"name",{"enumerable":true,"configurable":false,"get":function(){return _name},"set":function(name){return updateName(name)}});if(!_isRemote)Object.defineProperty(this,"dispose",{"enumerable":true,"configurable":false,"value":disposeHost});Object.defineProperty(this,"mode",{"enumerable":true,"configurable":false,"get":function(){return _args.mode}});
afterInitialize(args);return _ref}try{Thinfinity!=undefined}catch(e){Thinfinity={}}Thinfinity.JsRO=JsRO})();
(function(){var _wndKey="__ # JsRO __";var _crossDomain=false;try{if(parent&&parent.document);else _crossDomain=true}catch(error){_crossDomain=true}var _wndTop=getTopJsROManager();var _wndTopMost=_crossDomain?window.opener&&window.opener.top?window.opener.top:window.top||_wndTop:null;var _onReadyCallbacks=[];var _jsroManager=null;var _jsroManagerBridge=null;var _collectionCallbacks={"onCollectionUpdate":[]};var _lastFocusId=null;var _id="__Thinfinity.JsROManager_"+(new Date).getTime();var _isReady=
false;var _fireManagerCollectionUpdate=null;var purgeCollection=function(){if(_wndTop.Thinfinity[_wndKey].collection)for(var key in _wndTop.Thinfinity[_wndKey].collection)try{if(_wndTop.Thinfinity[_wndKey].collection[key].contentWindow||_wndTop.Thinfinity[_wndKey].collection[key].contentWindow.name);else delete _wndTop.Thinfinity[_wndKey].collection[key]}catch(error){delete _wndTop.Thinfinity[_wndKey].collection[key]}};function getTopJsROManager(){var tempWnd=null;var tempFn=function(wnd){if(wnd.parent&&
wnd.parent!=wnd)try{if(wnd.parent&&wnd.parent.document)if(wnd.Thinfinity&&wnd.isJsROManager){tempWnd=wnd;tempFn(wnd.parent)}else tempFn(wnd.parent)}catch(error){return window}else try{if(wnd.Thinfinity&&wnd.isJsROManager)tempWnd=wnd;else return null}catch(error){return null}};tempFn(window.parent);return tempWnd||window}function JsROManagerSingleton(args){var _ref=this;var _args={};var _bridge=null;function initialize(args){helper.object.parseAttributes(_args,args,"MATCH");try{if(_wndTop){if(_wndTop.Thinfinity==
undefined)_wndTop.Thinfinity={};if(_wndTop.Thinfinity.registerJsRO==undefined){Object.defineProperty(_wndTop.Thinfinity,"registerJsRO",{"enumerable":true,"configurable":false,"value":registerJsRO});Object.defineProperty(_wndTop.Thinfinity,"unregisterJsRO",{"enumerable":true,"configurable":false,"value":unregisterJsRO});Object.defineProperty(_wndTop.Thinfinity,"focusJsRO",{"enumerable":true,"configurable":false,"value":focusJsRO})}}}catch(error){helper.console.error("Cannot initialize JsRO.Manager",
error,arguments)}}function registerJsRO(jsro,wnd){var synchronize=helper.object.convertTo(helper.object.getValue(arguments,"[2]",true),"boolean");if(jsro&&wnd){var getContentWnd=helper.object.convertTo(helper.object.getValue(arguments,"[3]",false),"boolean");_wndTop.Thinfinity[_wndKey].collection[jsro.id]={"jsro":jsro,"contentWindow":getContentWnd?getContentWindow(wnd):wnd}}var fn=function(){_jsroManagerBridge.sendSynchronize();fireEvent("onCollectionUpdate",getUpdateList())};if(synchronize)_isReady&&
(_jsroManagerBridge.isConnected||!_crossDomain)?fn():_onReadyCallbacks.push(fn);else fireEvent("onCollectionUpdate",getUpdateList())}function unregisterJsRO(jsro){var wait=helper.object.convertTo(helper.object.getValue(arguments,"[2]",false),"boolean");if(jsro&&_wndTop.Thinfinity[_wndKey].collection[jsro.id])try{delete _wndTop.Thinfinity[_wndKey].collection[jsro.id]}catch(error){helper.console.error(error.message,error,arguments)}fireEvent("onCollectionUpdate",getUpdateList());if(wait)setTimeout(function(){_jsroManagerBridge.sendSynchronize()},
150);else _jsroManagerBridge.sendSynchronize()}function focusJsRO(id){if(typeof id=="string")_lastFocusId=id;else _lastFocusId=id.id}function registerBridge(bridge,contentWindow,goThrough){return function(message){if(message.data&&_wndTop.Thinfinity[_wndKey].collection[message.data.requestId])_wndTop.Thinfinity[_wndKey].collection[message.data.requestId].contentWindow.postMessage(message,"*")}}function getContentWindow(elem){if(elem){var regExp=new RegExp("HTML{1}[a-zA-Z]*Element{1}|Window");try{function isWindow(el){return helper.object.existsPath(el,
"document.body")&&helper.object.existsPath(el,"constructor")&&el.constructor.toString()=="[object WindowConstructor]"}var rex=regExp.exec(helper.object.getTypeOf(elem));if(typeof elem=="object"&&(elem instanceof HTMLElement||isWindow(elem)||rex!=null&&rex.length>0))if(elem.contentWindow)return elem.contentWindow;else return elem;else return null}catch(error){helper.console.error(error.message,error,arguments)}}else return null}function getHostCollection(){var response=[];var defaultHost=false;for(var key in _wndTop.Thinfinity[_wndKey].collection)try{if(_wndTop.Thinfinity[_wndKey].collection[key].jsro.mode==
"HOST"){if(key==_lastFocusId)defaultHost=true;else defaultHost=false;var jsroItem=_wndTop.Thinfinity[_wndKey].collection[key].jsro;response.push({"name":jsroItem.name,"id":key,"description":jsroItem.description,"mode":jsroItem.mode,"default":defaultHost,"isWrapper":jsroItem.isWrapper});jsroItem=null}}catch(error){purgeCollection()}return response}function getRemoteCollection(){var response=[];for(var key in _wndTop.Thinfinity[_wndKey].collection)try{if(_wndTop.Thinfinity[_wndKey].collection[key].jsro.mode==
"REMOTE"){var jsroItem=_wndTop.Thinfinity[_wndKey].collection[key].jsro;response.push({"name":jsroItem.name,"id":key,"description":jsroItem.description,"mode":jsroItem.mode});jsroItem=null}}catch(error){purgeCollection()}return response}function getUpdateList(){var response=[];var defaultHost=false;for(var key in _wndTop.Thinfinity[_wndKey].collection){if(key==_lastFocusId)defaultHost=true;else defaultHost=false;try{var jsroItem=_wndTop.Thinfinity[_wndKey].collection[key].jsro;response.push({"name":jsroItem.name,
"id":key,"description":jsroItem.description,"mode":jsroItem.mode,"default":defaultHost});jsroItem=null}catch(error){purgeCollection()}}return response}function fireEvent(eventName,data){var purgeCollection;if(_collectionCallbacks&&_collectionCallbacks[eventName]){for(var i=0;i<_collectionCallbacks[eventName].length;i++)try{_collectionCallbacks[eventName][i](data)}catch(error){if(error.number==-2146823277){if(typeof purgeCollection=="undefined")purgeCollection=[];purgeCollection.push({"index":i,"eventName":eventName})}}if(purgeCollection&&
purgeCollection.length>0){purgeCollection.sort(function(a,b){return b.index-a.index});for(var i=purgeCollection.length-1;i>=0;i--)_collectionCallbacks[purgeCollection[i].eventName].splice([purgeCollection[i].index],1)}}}function getJsROInstance(name){if(name&&_wndTop.Thinfinity[_wndKey].collection!=undefined)if(_wndTop.Thinfinity[_wndKey].collection[name]!=undefined)return _wndTop.Thinfinity[_wndKey].collection[name].jsro;else for(var id in _wndTop.Thinfinity[_wndKey].collection){if(_wndTop.Thinfinity[_wndKey].collection[id].jsro&&
_wndTop.Thinfinity[_wndKey].collection[id].jsro.name==name)return _wndTop.Thinfinity[_wndKey].collection[id].jsro}else return null}function getJsROContentWindow(name){if(name&&_wndTop.Thinfinity[_wndKey].collection[name]!=undefined)try{return _wndTop.Thinfinity[_wndKey].collection[name].contentWindow}catch(error){purgeCollection()}else for(var id in _wndTop.Thinfinity[_wndKey].collection)if(_wndTop.Thinfinity[_wndKey].collection[id].jsro&&_wndTop.Thinfinity[_wndKey].collection[id].jsro.name==name)return _wndTop.Thinfinity[_wndKey].collection[id].contentWindow;
return null}function updateJsROInstance(jsro){if(jsro&&_wndTop.Thinfinity[_wndKey].collection[jsro.id]){if(_crossDomain)_jsroManagerBridge.sendSynchronize();fireEvent("onCollectionUpdate",getUpdateList())}}_fireManagerCollectionUpdate=function(){fireEvent("onCollectionUpdate",getUpdateList())};initialize(args);Object.defineProperty(_ref,"getHostCollection",{"enumerable":true,"configurable":false,"value":getHostCollection});Object.defineProperty(_ref,"getRemoteCollection",{"enumerable":true,"configurable":false,
"value":getRemoteCollection});Object.defineProperty(_ref,"getJsROInstance",{"enumerable":true,"configurable":false,"value":getJsROInstance});Object.defineProperty(_ref,"getJsROContentWindow",{"enumerable":true,"configurable":false,"value":getJsROContentWindow});Object.defineProperty(_ref,"updateJsROInstance",{"enumerable":true,"configurable":false,"value":updateJsROInstance});Object.defineProperty(_ref,"id",{"enumerable":true,"configurable":false,"get":function(){return _id}});Object.defineProperty(_ref,
"isReady",{"enumerable":true,"configurable":false,"get":function(){return _isReady}});if(window.isJsROManager===undefined)Object.defineProperty(window,"isJsROManager",{"enumerable":false,"configurable":false,"get":function(){return true}});_jsroManager=_ref;return _ref}function JsROManagerBridge(){var _ref=this;var _isConnected=false;var _intervalConnect;var _JsROManagerList={};var _isBridgeConnected=false;function initialize(){initializeListener();if(_crossDomain)sendExternalJsROManagerRegistration();
else{_isReady=true;fireOnReadyEvent()}}function initializeListener(){window.addEventListener("message",function(message){if(message.data)switch(message.data.cmd){case "_new.Remote.JsROManager.Registration":registerNewRemoteJsROManager(message);break;case "_new.Remote.JsROManager.Registration.Accepted":registrationAccepted(message);break;case "_JsROManager.Synchronize":receivedSynchronize(message);break;case "_JsROManager.Connect":var jsro=searchJsro(message.data.id);if(jsro)jsro.connect(message.data.hostId);
break;case "_JsROManager.Disconnect":break;default:var id=message.data.targetId;if(_wndTop.Thinfinity[_wndKey].collection[id]&&!_wndTop.Thinfinity[_wndKey].collection[id].jsro.isWrapper)switch(message.data.cmd){case "connect":_wndTop.Thinfinity[_wndKey].collection[id].jsro[message.data.cmd](message.data.hostId);break;case "disconnect":_wndTop.Thinfinity[_wndKey].collection[id].jsro[message.data.cmd]();break;default:if(_wndTop.Thinfinity[_wndKey].collection[id].contentWindow&&_wndTop!==_wndTop.Thinfinity[_wndKey].collection[id].contentWindow)_wndTop.Thinfinity[_wndKey].collection[id].contentWindow.postMessage(message.data,
"*");break}else for(var jkey in _JsROManagerList)for(var j=0;j<_JsROManagerList[jkey].collection.length;j++)if(_JsROManagerList[jkey].collection[j].id==id)_JsROManagerList[jkey].contentWindow.postMessage(message.data,"*");break}})}function searchJsro(id){if(_wndTop.Thinfinity[_wndKey].collection[id])return _wndTop.Thinfinity[_wndKey].collection[id];else return null}function extendJsRO(jsro,manager){if(typeof jsro.mode=="undefined")jsro.mode="REMOTE";jsro.connect=function(hostId){var data={"cmd":"connect",
"id":jsro.id,"targetId":jsro.id,"hostId":hostId};_wndTop.Thinfinity[_wndKey].collection[jsro.id].contentWindow.postMessage(data,"*")};jsro.disconnect=function(hostId){};jsro.manager=manager;jsro.isWrapper=true;return jsro}function postMessage(wnd,data){if(wnd)wnd.postMessage(data,"*")}function sendExternalJsROManagerRegistration(){_isBridgeConnected=false;var data={"cmd":"_new.Remote.JsROManager.Registration","id":_id,"collection":getCollection()};clearInterval(_intervalConnect);if(window!=window.parent){var _wndPost=
window.parent;var _count=0;var _startAgain=0;var _fnTimeout=function(){clearInterval(_intervalConnect);_intervalConnect=setInterval(_fnInterval,100)};var _fnInterval=function(){if(_startAgain>10){clearInterval(_intervalConnect);return}if(_count>3){if(_wndPost!=_wndPost.parent)_wndPost=_wndPost.parent;else{_wndPost=window.parent;clearInterval(_intervalConnect);_isReady=true;_isBridgeConnected=true;return}count=0}postMessage(_wndPost,data);_count++};_fnTimeout()}else{_intervalConnect=setInterval(function(){postMessage(_wndTopMost,
data)},1E3);postMessage(_wndTopMost,data)}}function registerNewRemoteJsROManager(message){if(message){if(!_JsROManagerList[message.data.id]){_JsROManagerList[message.data.id]={"contentWindow":message.source,"collection":message.data.collection};registerCollection(message.data.collection,message.source,message.data.id)}postMessage(_JsROManagerList[message.data.id].contentWindow,{"cmd":"_new.Remote.JsROManager.Registration.Accepted","id":_id,"collection":getCollection()})}}function registrationAccepted(message){clearInterval(_intervalConnect);
if(message){if(!_JsROManagerList[message.data.id])_JsROManagerList[message.data.id]={"contentWindow":message.source,"collection":message.data.collection};_wndTopMost=message.source;registerCollection(message.data.collection,message.source,message.data.id)}_isBridgeConnected=true;_isReady=true;fireOnReadyEvent()}function registerCollection(collection,wnd,manager){if(collection&&wnd&&_wndTop.Thinfinity&&_wndTop.Thinfinity.registerJsRO)for(var i=0;i<collection.length;i++){extendJsRO(collection[i],manager);
_wndTop.Thinfinity.registerJsRO(collection[i],wnd,!_crossDomain,false)}}function getCollection(){var collection=[];if(_wndTop.Thinfinity&&_wndTop.Thinfinity[_wndKey]&&_wndTop.Thinfinity[_wndKey].collection){var jsroItem=null;for(var key in _wndTop.Thinfinity[_wndKey].collection)try{if(key==_lastFocusId)defaultHost=true;else defaultHost=false;jsroItem=_wndTop.Thinfinity[_wndKey].collection[key].jsro;collection.push({"name":jsroItem.name,"id":key,"description":jsroItem.description,"mode":jsroItem.mode,
"default":defaultHost,"isWrapper":jsroItem.isWrapper||false,"manager":jsroItem.manager});jsroItem=null}catch(error){purgeCollection()}}return collection}function sendSynchronizeWithFilter(managerListException){var except=typeof managerListException!="undefined"&&managerListException[0]instanceof Array?managerListException:[];var data={"cmd":"_JsROManager.Synchronize","id":_id,"collection":getCollection()};if(_crossDomain)postMessage(_wndTopMost,data);else for(var jm in _JsROManagerList)if(jm!=_id&&
except.indexOf(jm)==-1)postMessage(_JsROManagerList[jm].contentWindow,data)}function sendSynchronize(){sendSynchronizeWithFilter([])}function receivedSynchronize(message){var collection=getCollection();var jsroItem=null;for(var i=0;i<collection.length;i++){var item=message.data.collection.find(function(elem){return elem.id==collection[i].id});if(item){if(_JsROManagerList[message.data.id]&&_JsROManagerList[message.data.id].collection.length>0){var changed=false;jsroItem=_JsROManagerList[message.data.id].collection.find(function(elem){return elem.id==
item.id});if(jsroItem){changed=jsroItem.name!=item.name||jsroItem.description!=item.description;if(changed){jsroItem.name=item.name;jsroItem.description=item.description;if(_fireManagerCollectionUpdate){_fireManagerCollectionUpdate();sendSynchronizeWithFilter([])}}}}}else{item=collection[i];_wndTop.Thinfinity.unregisterJsRO(item,message.source,true);if(item.manager&&_JsROManagerList[item.manager])for(var k=0;k<_JsROManagerList[item.manager].collection.length;k++)if(_JsROManagerList[item.manager].collection[k].id==
item.id){_JsROManagerList[item.manager].collection.splice(k,1);break}}}for(var i=0;i<message.data.collection.length;i++){var jsroItem=collection.find(function(elem){return elem.id==message.data.collection[i].id});if(!jsroItem){var mngId=message.data.collection[i].manager==undefined?message.data.id:message.data.collection[i].manager;extendJsRO(message.data.collection[i],mngId);if(_JsROManagerList[mngId])_JsROManagerList[mngId].collection.push(message.data.collection[i]);_wndTop.Thinfinity.registerJsRO(message.data.collection[i],
message.source,false,false)}}if(!_crossDomain&&!_isBridgeConnected)sendSynchronizeWithFilter([message.data.id])}initialize();Object.defineProperty(_ref,"sendSynchronize",{"enumerable":true,"configurable":false,"writable":false,"value":sendSynchronize});Object.defineProperty(_ref,"isConnected",{"enumerable":true,"configurable":false,"get":function(){return _isBridgeConnected}});return _ref}(function(){if(!helper.object.existsPath(_wndTop,"Thinfinity."+_wndKey)){if(typeof _wndTop.Thinfinity=="undefined")_wndTop.Thinfinity=
{};_wndTop.Thinfinity[_wndKey]={"jsroManagerBridge":new JsROManagerBridge,"jsroManager":new JsROManagerSingleton,"collectionCallbacks":{"onCollectionUpdate":[]},"collection":{},"focus":null}}_jsroManagerBridge=_wndTop.Thinfinity[_wndKey].jsroManagerBridge;_jsroManager=_wndTop.Thinfinity[_wndKey].jsroManager;_collectionCallbacks=_wndTop.Thinfinity[_wndKey].collectionCallbacks;_lastFocusId=_wndTop.Thinfinity[_wndKey].focus})();function JsROManager(args){if(helper.object.existsPath(args,"events.onCollectionUpdate"))_collectionCallbacks.onCollectionUpdate.push(args.events.onCollectionUpdate);
return _jsroManager}function fireOnReadyEvent(){if(_onReadyCallbacks){for(var i=0;i<_onReadyCallbacks.length;i++)try{_onReadyCallbacks[i]()}catch(error){}_onReadyCallbacks=[]}}try{Thinfinity!=undefined}catch(e){Thinfinity={}}Thinfinity.JsROManager=JsROManager})();
(function webpackUniversalModuleDefinition(root,factory){if(typeof exports==="object"&&typeof module==="object")module.exports=factory();else if(typeof define==="function"&&define.amd)define([],factory);else if(typeof exports==="object")exports["Handlebars"]=factory();else root["Handlebars"]=factory()})(this,function(){return function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]=
{exports:{},id:moduleId,loaded:false};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.loaded=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.p="";return __webpack_require__(0)}([function(module,exports,__webpack_require__){var _interopRequireDefault=__webpack_require__(1)["default"];exports.__esModule=true;var _handlebarsRuntime=__webpack_require__(2);var _handlebarsRuntime2=_interopRequireDefault(_handlebarsRuntime);
var _handlebarsCompilerAst=__webpack_require__(35);var _handlebarsCompilerAst2=_interopRequireDefault(_handlebarsCompilerAst);var _handlebarsCompilerBase=__webpack_require__(36);var _handlebarsCompilerCompiler=__webpack_require__(41);var _handlebarsCompilerJavascriptCompiler=__webpack_require__(42);var _handlebarsCompilerJavascriptCompiler2=_interopRequireDefault(_handlebarsCompilerJavascriptCompiler);var _handlebarsCompilerVisitor=__webpack_require__(39);var _handlebarsCompilerVisitor2=_interopRequireDefault(_handlebarsCompilerVisitor);
var _handlebarsNoConflict=__webpack_require__(34);var _handlebarsNoConflict2=_interopRequireDefault(_handlebarsNoConflict);var _create=_handlebarsRuntime2["default"].create;function create(){var hb=_create();hb.compile=function(input,options){return _handlebarsCompilerCompiler.compile(input,options,hb)};hb.precompile=function(input,options){return _handlebarsCompilerCompiler.precompile(input,options,hb)};hb.AST=_handlebarsCompilerAst2["default"];hb.Compiler=_handlebarsCompilerCompiler.Compiler;hb.JavaScriptCompiler=
_handlebarsCompilerJavascriptCompiler2["default"];hb.Parser=_handlebarsCompilerBase.parser;hb.parse=_handlebarsCompilerBase.parse;return hb}var inst=create();inst.create=create;_handlebarsNoConflict2["default"](inst);inst.Visitor=_handlebarsCompilerVisitor2["default"];inst["default"]=inst;exports["default"]=inst;module.exports=exports["default"]},function(module,exports){exports["default"]=function(obj){return obj&&obj.__esModule?obj:{"default":obj}};exports.__esModule=true},function(module,exports,
__webpack_require__){var _interopRequireWildcard=__webpack_require__(3)["default"];var _interopRequireDefault=__webpack_require__(1)["default"];exports.__esModule=true;var _handlebarsBase=__webpack_require__(4);var base=_interopRequireWildcard(_handlebarsBase);var _handlebarsSafeString=__webpack_require__(21);var _handlebarsSafeString2=_interopRequireDefault(_handlebarsSafeString);var _handlebarsException=__webpack_require__(6);var _handlebarsException2=_interopRequireDefault(_handlebarsException);
var _handlebarsUtils=__webpack_require__(5);var Utils=_interopRequireWildcard(_handlebarsUtils);var _handlebarsRuntime=__webpack_require__(22);var runtime=_interopRequireWildcard(_handlebarsRuntime);var _handlebarsNoConflict=__webpack_require__(34);var _handlebarsNoConflict2=_interopRequireDefault(_handlebarsNoConflict);function create(){var hb=new base.HandlebarsEnvironment;Utils.extend(hb,base);hb.SafeString=_handlebarsSafeString2["default"];hb.Exception=_handlebarsException2["default"];hb.Utils=
Utils;hb.escapeExpression=Utils.escapeExpression;hb.VM=runtime;hb.template=function(spec){return runtime.template(spec,hb)};return hb}var inst=create();inst.create=create;_handlebarsNoConflict2["default"](inst);inst["default"]=inst;exports["default"]=inst;module.exports=exports["default"]},function(module,exports){exports["default"]=function(obj){if(obj&&obj.__esModule)return obj;else{var newObj={};if(obj!=null)for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];
newObj["default"]=obj;return newObj}};exports.__esModule=true},function(module,exports,__webpack_require__){var _interopRequireDefault=__webpack_require__(1)["default"];exports.__esModule=true;exports.HandlebarsEnvironment=HandlebarsEnvironment;var _utils=__webpack_require__(5);var _exception=__webpack_require__(6);var _exception2=_interopRequireDefault(_exception);var _helpers=__webpack_require__(10);var _decorators=__webpack_require__(18);var _logger=__webpack_require__(20);var _logger2=_interopRequireDefault(_logger);
var VERSION="4.3.1";exports.VERSION=VERSION;var COMPILER_REVISION=8;exports.COMPILER_REVISION=COMPILER_REVISION;var LAST_COMPATIBLE_COMPILER_REVISION=7;exports.LAST_COMPATIBLE_COMPILER_REVISION=LAST_COMPATIBLE_COMPILER_REVISION;var REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0 <4.3.0",8:">= 4.3.0"};exports.REVISION_CHANGES=REVISION_CHANGES;var objectType="[object Object]";function HandlebarsEnvironment(helpers,
partials,decorators){this.helpers=helpers||{};this.partials=partials||{};this.decorators=decorators||{};_helpers.registerDefaultHelpers(this);_decorators.registerDefaultDecorators(this)}HandlebarsEnvironment.prototype={constructor:HandlebarsEnvironment,logger:_logger2["default"],log:_logger2["default"].log,registerHelper:function registerHelper(name,fn){if(_utils.toString.call(name)===objectType){if(fn)throw new _exception2["default"]("Arg not supported with multiple helpers");_utils.extend(this.helpers,
name)}else this.helpers[name]=fn},unregisterHelper:function unregisterHelper(name){delete this.helpers[name]},registerPartial:function registerPartial(name,partial){if(_utils.toString.call(name)===objectType)_utils.extend(this.partials,name);else{if(typeof partial==="undefined")throw new _exception2["default"]('Attempting to register a partial called "'+name+'" as undefined');this.partials[name]=partial}},unregisterPartial:function unregisterPartial(name){delete this.partials[name]},registerDecorator:function registerDecorator(name,
fn){if(_utils.toString.call(name)===objectType){if(fn)throw new _exception2["default"]("Arg not supported with multiple decorators");_utils.extend(this.decorators,name)}else this.decorators[name]=fn},unregisterDecorator:function unregisterDecorator(name){delete this.decorators[name]}};var log=_logger2["default"].log;exports.log=log;exports.createFrame=_utils.createFrame;exports.logger=_logger2["default"]},function(module,exports){exports.__esModule=true;exports.extend=extend;exports.indexOf=indexOf;
exports.escapeExpression=escapeExpression;exports.isEmpty=isEmpty;exports.createFrame=createFrame;exports.blockParams=blockParams;exports.appendContextPath=appendContextPath;var escape={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"};var badChars=/[&<>"'`=]/g,possible=/[&<>"'`=]/;function escapeChar(chr){return escape[chr]}function extend(obj){for(var i=1;i<arguments.length;i++)for(var key in arguments[i])if(Object.prototype.hasOwnProperty.call(arguments[i],
key))obj[key]=arguments[i][key];return obj}var toString=Object.prototype.toString;exports.toString=toString;var isFunction=function isFunction(value){return typeof value==="function"};if(isFunction(/x/))exports.isFunction=isFunction=function(value){return typeof value==="function"&&toString.call(value)==="[object Function]"};exports.isFunction=isFunction;var isArray=Array.isArray||function(value){return value&&typeof value==="object"?toString.call(value)==="[object Array]":false};exports.isArray=
isArray;function indexOf(array,value){for(var i=0,len=array.length;i<len;i++)if(array[i]===value)return i;return-1}function escapeExpression(string){if(typeof string!=="string"){if(string&&string.toHTML)return string.toHTML();else if(string==null)return"";else if(!string)return string+"";string=""+string}if(!possible.test(string))return string;return string.replace(badChars,escapeChar)}function isEmpty(value){if(!value&&value!==0)return true;else if(isArray(value)&&value.length===0)return true;else return false}
function createFrame(object){var frame=extend({},object);frame._parent=object;return frame}function blockParams(params,ids){params.path=ids;return params}function appendContextPath(contextPath,id){return(contextPath?contextPath+".":"")+id}},function(module,exports,__webpack_require__){var _Object$defineProperty=__webpack_require__(7)["default"];exports.__esModule=true;var errorProps=["description","fileName","lineNumber","message","name","number","stack"];function Exception(message,node){var loc=
node&&node.loc,line=undefined,column=undefined;if(loc){line=loc.start.line;column=loc.start.column;message+=" - "+line+":"+column}var tmp=Error.prototype.constructor.call(this,message);for(var idx=0;idx<errorProps.length;idx++)this[errorProps[idx]]=tmp[errorProps[idx]];if(Error.captureStackTrace)Error.captureStackTrace(this,Exception);try{if(loc){this.lineNumber=line;if(_Object$defineProperty)Object.defineProperty(this,"column",{value:column,enumerable:true});else this.column=column}}catch(nop){}}
Exception.prototype=new Error;exports["default"]=Exception;module.exports=exports["default"]},function(module,exports,__webpack_require__){module.exports={"default":__webpack_require__(8),__esModule:true}},function(module,exports,__webpack_require__){var $=__webpack_require__(9);module.exports=function defineProperty(it,key,desc){return $.setDesc(it,key,desc)}},function(module,exports){var $Object=Object;module.exports={create:$Object.create,getProto:$Object.getPrototypeOf,isEnum:{}.propertyIsEnumerable,
getDesc:$Object.getOwnPropertyDescriptor,setDesc:$Object.defineProperty,setDescs:$Object.defineProperties,getKeys:$Object.keys,getNames:$Object.getOwnPropertyNames,getSymbols:$Object.getOwnPropertySymbols,each:[].forEach}},function(module,exports,__webpack_require__){var _interopRequireDefault=__webpack_require__(1)["default"];exports.__esModule=true;exports.registerDefaultHelpers=registerDefaultHelpers;exports.moveHelperToHooks=moveHelperToHooks;var _helpersBlockHelperMissing=__webpack_require__(11);
var _helpersBlockHelperMissing2=_interopRequireDefault(_helpersBlockHelperMissing);var _helpersEach=__webpack_require__(12);var _helpersEach2=_interopRequireDefault(_helpersEach);var _helpersHelperMissing=__webpack_require__(13);var _helpersHelperMissing2=_interopRequireDefault(_helpersHelperMissing);var _helpersIf=__webpack_require__(14);var _helpersIf2=_interopRequireDefault(_helpersIf);var _helpersLog=__webpack_require__(15);var _helpersLog2=_interopRequireDefault(_helpersLog);var _helpersLookup=
__webpack_require__(16);var _helpersLookup2=_interopRequireDefault(_helpersLookup);var _helpersWith=__webpack_require__(17);var _helpersWith2=_interopRequireDefault(_helpersWith);function registerDefaultHelpers(instance){_helpersBlockHelperMissing2["default"](instance);_helpersEach2["default"](instance);_helpersHelperMissing2["default"](instance);_helpersIf2["default"](instance);_helpersLog2["default"](instance);_helpersLookup2["default"](instance);_helpersWith2["default"](instance)}function moveHelperToHooks(instance,
helperName,keepHelper){if(instance.helpers[helperName]){instance.hooks[helperName]=instance.helpers[helperName];if(!keepHelper)delete instance.helpers[helperName]}}},function(module,exports,__webpack_require__){exports.__esModule=true;var _utils=__webpack_require__(5);exports["default"]=function(instance){instance.registerHelper("blockHelperMissing",function(context,options){var inverse=options.inverse,fn=options.fn;if(context===true)return fn(this);else if(context===false||context==null)return inverse(this);
else if(_utils.isArray(context))if(context.length>0){if(options.ids)options.ids=[options.name];return instance.helpers.each(context,options)}else return inverse(this);else{if(options.data&&options.ids){var data=_utils.createFrame(options.data);data.contextPath=_utils.appendContextPath(options.data.contextPath,options.name);options={data:data}}return fn(context,options)}})};module.exports=exports["default"]},function(module,exports,__webpack_require__){var _interopRequireDefault=__webpack_require__(1)["default"];
exports.__esModule=true;var _utils=__webpack_require__(5);var _exception=__webpack_require__(6);var _exception2=_interopRequireDefault(_exception);exports["default"]=function(instance){instance.registerHelper("each",function(context,options){if(!options)throw new _exception2["default"]("Must pass iterator to #each");var fn=options.fn,inverse=options.inverse,i=0,ret="",data=undefined,contextPath=undefined;if(options.data&&options.ids)contextPath=_utils.appendContextPath(options.data.contextPath,options.ids[0])+
".";if(_utils.isFunction(context))context=context.call(this);if(options.data)data=_utils.createFrame(options.data);function execIteration(field,index,last){if(data){data.key=field;data.index=index;data.first=index===0;data.last=!!last;if(contextPath)data.contextPath=contextPath+field}ret=ret+fn(context[field],{data:data,blockParams:_utils.blockParams([context[field],field],[contextPath+field,null])})}if(context&&typeof context==="object")if(_utils.isArray(context))for(var j=context.length;i<j;i++){if(i in
context)execIteration(i,i,i===context.length-1)}else{var priorKey=undefined;for(var key in context)if(context.hasOwnProperty(key)){if(priorKey!==undefined)execIteration(priorKey,i-1);priorKey=key;i++}if(priorKey!==undefined)execIteration(priorKey,i-1,true)}if(i===0)ret=inverse(this);return ret})};module.exports=exports["default"]},function(module,exports,__webpack_require__){var _interopRequireDefault=__webpack_require__(1)["default"];exports.__esModule=true;var _exception=__webpack_require__(6);
var _exception2=_interopRequireDefault(_exception);exports["default"]=function(instance){instance.registerHelper("helperMissing",function(){if(arguments.length===1)return undefined;else throw new _exception2["default"]('Missing helper: "'+arguments[arguments.length-1].name+'"');})};module.exports=exports["default"]},function(module,exports,__webpack_require__){exports.__esModule=true;var _utils=__webpack_require__(5);exports["default"]=function(instance){instance.registerHelper("if",function(conditional,
options){if(_utils.isFunction(conditional))conditional=conditional.call(this);if(!options.hash.includeZero&&!conditional||_utils.isEmpty(conditional))return options.inverse(this);else return options.fn(this)});instance.registerHelper("unless",function(conditional,options){return instance.helpers["if"].call(this,conditional,{fn:options.inverse,inverse:options.fn,hash:options.hash})})};module.exports=exports["default"]},function(module,exports){exports.__esModule=true;exports["default"]=function(instance){instance.registerHelper("log",
function(){var args=[undefined],options=arguments[arguments.length-1];for(var i=0;i<arguments.length-1;i++)args.push(arguments[i]);var level=1;if(options.hash.level!=null)level=options.hash.level;else if(options.data&&options.data.level!=null)level=options.data.level;args[0]=level;instance.log.apply(instance,args)})};module.exports=exports["default"]},function(module,exports){exports.__esModule=true;exports["default"]=function(instance){instance.registerHelper("lookup",function(obj,field){if(!obj)return obj;
if(field==="constructor"&&!obj.propertyIsEnumerable(field))return undefined;return obj[field]})};module.exports=exports["default"]},function(module,exports,__webpack_require__){exports.__esModule=true;var _utils=__webpack_require__(5);exports["default"]=function(instance){instance.registerHelper("with",function(context,options){if(_utils.isFunction(context))context=context.call(this);var fn=options.fn;if(!_utils.isEmpty(context)){var data=options.data;if(options.data&&options.ids){data=_utils.createFrame(options.data);
data.contextPath=_utils.appendContextPath(options.data.contextPath,options.ids[0])}return fn(context,{data:data,blockParams:_utils.blockParams([context],[data&&data.contextPath])})}else return options.inverse(this)})};module.exports=exports["default"]},function(module,exports,__webpack_require__){var _interopRequireDefault=__webpack_require__(1)["default"];exports.__esModule=true;exports.registerDefaultDecorators=registerDefaultDecorators;var _decoratorsInline=__webpack_require__(19);var _decoratorsInline2=
_interopRequireDefault(_decoratorsInline);function registerDefaultDecorators(instance){_decoratorsInline2["default"](instance)}},function(module,exports,__webpack_require__){exports.__esModule=true;var _utils=__webpack_require__(5);exports["default"]=function(instance){instance.registerDecorator("inline",function(fn,props,container,options){var ret=fn;if(!props.partials){props.partials={};ret=function(context,options){var original=container.partials;container.partials=_utils.extend({},original,props.partials);
var ret=fn(context,options);container.partials=original;return ret}}props.partials[options.args[0]]=options.fn;return ret})};module.exports=exports["default"]},function(module,exports,__webpack_require__){exports.__esModule=true;var _utils=__webpack_require__(5);var logger={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function lookupLevel(level){if(typeof level==="string"){var levelMap=_utils.indexOf(logger.methodMap,level.toLowerCase());if(levelMap>=0)level=levelMap;else level=
parseInt(level,10)}return level},log:function log(level){level=logger.lookupLevel(level);if(typeof console!=="undefined"&&logger.lookupLevel(logger.level)<=level){var method=logger.methodMap[level];if(!console[method])method="log";for(var _len=arguments.length,message=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)message[_key-1]=arguments[_key];console[method].apply(console,message)}}};exports["default"]=logger;module.exports=exports["default"]},function(module,exports){exports.__esModule=true;function SafeString(string){this.string=
string}SafeString.prototype.toString=SafeString.prototype.toHTML=function(){return""+this.string};exports["default"]=SafeString;module.exports=exports["default"]},function(module,exports,__webpack_require__){var _Object$seal=__webpack_require__(23)["default"];var _interopRequireWildcard=__webpack_require__(3)["default"];var _interopRequireDefault=__webpack_require__(1)["default"];exports.__esModule=true;exports.checkRevision=checkRevision;exports.template=template;exports.wrapProgram=wrapProgram;
exports.resolvePartial=resolvePartial;exports.invokePartial=invokePartial;exports.noop=noop;var _utils=__webpack_require__(5);var Utils=_interopRequireWildcard(_utils);var _exception=__webpack_require__(6);var _exception2=_interopRequireDefault(_exception);var _base=__webpack_require__(4);var _helpers=__webpack_require__(10);function checkRevision(compilerInfo){var compilerRevision=compilerInfo&&compilerInfo[0]||1,currentRevision=_base.COMPILER_REVISION;if(compilerRevision>=_base.LAST_COMPATIBLE_COMPILER_REVISION&&
compilerRevision<=_base.COMPILER_REVISION)return;if(compilerRevision<_base.LAST_COMPATIBLE_COMPILER_REVISION){var runtimeVersions=_base.REVISION_CHANGES[currentRevision],compilerVersions=_base.REVISION_CHANGES[compilerRevision];throw new _exception2["default"]("Template was precompiled with an older version of Handlebars than the current runtime. "+"Please update your precompiler to a newer version ("+runtimeVersions+") or downgrade your runtime to an older version ("+compilerVersions+").");}else throw new _exception2["default"]("Template was precompiled with a newer version of Handlebars than the current runtime. "+
"Please update your runtime to a newer version ("+compilerInfo[1]+").");}function template(templateSpec,env){if(!env)throw new _exception2["default"]("No environment passed to template");if(!templateSpec||!templateSpec.main)throw new _exception2["default"]("Unknown template object: "+typeof templateSpec);templateSpec.main.decorator=templateSpec.main_d;env.VM.checkRevision(templateSpec.compiler);var templateWasPrecompiledWithCompilerV7=templateSpec.compiler&&templateSpec.compiler[0]===7;function invokePartialWrapper(partial,
context,options){if(options.hash){context=Utils.extend({},context,options.hash);if(options.ids)options.ids[0]=true}partial=env.VM.resolvePartial.call(this,partial,context,options);var optionsWithHooks=Utils.extend({},options,{hooks:this.hooks});var result=env.VM.invokePartial.call(this,partial,context,optionsWithHooks);if(result==null&&env.compile){options.partials[options.name]=env.compile(partial,templateSpec.compilerOptions,env);result=options.partials[options.name](context,optionsWithHooks)}if(result!=
null){if(options.indent){var lines=result.split("\n");for(var i=0,l=lines.length;i<l;i++){if(!lines[i]&&i+1===l)break;lines[i]=options.indent+lines[i]}result=lines.join("\n")}return result}else throw new _exception2["default"]("The partial "+options.name+" could not be compiled when running in runtime-only mode");}var container={strict:function strict(obj,name){if(!(name in obj))throw new _exception2["default"]('"'+name+'" not defined in '+obj);return obj[name]},lookup:function lookup(depths,name){var len=
depths.length;for(var i=0;i<len;i++)if(depths[i]&&depths[i][name]!=null)return depths[i][name]},lambda:function lambda(current,context){return typeof current==="function"?current.call(context):current},escapeExpression:Utils.escapeExpression,invokePartial:invokePartialWrapper,fn:function fn(i){var ret=templateSpec[i];ret.decorator=templateSpec[i+"_d"];return ret},programs:[],program:function program(i,data,declaredBlockParams,blockParams,depths){var programWrapper=this.programs[i],fn=this.fn(i);if(data||
depths||blockParams||declaredBlockParams)programWrapper=wrapProgram(this,i,fn,data,declaredBlockParams,blockParams,depths);else if(!programWrapper)programWrapper=this.programs[i]=wrapProgram(this,i,fn);return programWrapper},data:function data(value,depth){while(value&&depth--)value=value._parent;return value},nullContext:_Object$seal({}),noop:env.VM.noop,compilerInfo:templateSpec.compiler};function ret(context){var options=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var data=options.data;
ret._setup(options);if(!options.partial&&templateSpec.useData)data=initData(context,data);var depths=undefined,blockParams=templateSpec.useBlockParams?[]:undefined;if(templateSpec.useDepths)if(options.depths)depths=context!=options.depths[0]?[context].concat(options.depths):options.depths;else depths=[context];function main(context){return""+templateSpec.main(container,context,container.helpers,container.partials,data,blockParams,depths)}main=executeDecorators(templateSpec.main,main,container,options.depths||
[],data,blockParams);return main(context,options)}ret.isTop=true;ret._setup=function(options){if(!options.partial){container.helpers=Utils.extend({},env.helpers,options.helpers);if(templateSpec.usePartial)container.partials=Utils.extend({},env.partials,options.partials);if(templateSpec.usePartial||templateSpec.useDecorators)container.decorators=Utils.extend({},env.decorators,options.decorators);container.hooks={};var keepHelperInHelpers=options.allowCallsToHelperMissing||templateWasPrecompiledWithCompilerV7;
_helpers.moveHelperToHooks(container,"helperMissing",keepHelperInHelpers);_helpers.moveHelperToHooks(container,"blockHelperMissing",keepHelperInHelpers)}else{container.helpers=options.helpers;container.partials=options.partials;container.decorators=options.decorators;container.hooks=options.hooks}};ret._child=function(i,data,blockParams,depths){if(templateSpec.useBlockParams&&!blockParams)throw new _exception2["default"]("must pass block params");if(templateSpec.useDepths&&!depths)throw new _exception2["default"]("must pass parent depths");
return wrapProgram(container,i,templateSpec[i],data,0,blockParams,depths)};return ret}function wrapProgram(container,i,fn,data,declaredBlockParams,blockParams,depths){function prog(context){var options=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var currentDepths=depths;if(depths&&context!=depths[0]&&!(context===container.nullContext&&depths[0]===null))currentDepths=[context].concat(depths);return fn(container,context,container.helpers,container.partials,options.data||data,blockParams&&
[options.blockParams].concat(blockParams),currentDepths)}prog=executeDecorators(fn,prog,container,depths,data,blockParams);prog.program=i;prog.depth=depths?depths.length:0;prog.blockParams=declaredBlockParams||0;return prog}function resolvePartial(partial,context,options){if(!partial)if(options.name==="@partial-block")partial=options.data["partial-block"];else partial=options.partials[options.name];else if(!partial.call&&!options.name){options.name=partial;partial=options.partials[partial]}return partial}
function invokePartial(partial,context,options){var currentPartialBlock=options.data&&options.data["partial-block"];options.partial=true;if(options.ids)options.data.contextPath=options.ids[0]||options.data.contextPath;var partialBlock=undefined;if(options.fn&&options.fn!==noop)(function(){options.data=_base.createFrame(options.data);var fn=options.fn;partialBlock=options.data["partial-block"]=function partialBlockWrapper(context){var options=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];
options.data=_base.createFrame(options.data);options.data["partial-block"]=currentPartialBlock;return fn(context,options)};if(fn.partials)options.partials=Utils.extend({},options.partials,fn.partials)})();if(partial===undefined&&partialBlock)partial=partialBlock;if(partial===undefined)throw new _exception2["default"]("The partial "+options.name+" could not be found");else if(partial instanceof Function)return partial(context,options)}function noop(){return""}function initData(context,data){if(!data||
!("root"in data)){data=data?_base.createFrame(data):{};data.root=context}return data}function executeDecorators(fn,prog,container,depths,data,blockParams){if(fn.decorator){var props={};prog=fn.decorator(prog,props,container,depths&&depths[0],data,blockParams,depths);Utils.extend(prog,props)}return prog}},function(module,exports,__webpack_require__){module.exports={"default":__webpack_require__(24),__esModule:true}},function(module,exports,__webpack_require__){__webpack_require__(25);module.exports=
__webpack_require__(30).Object.seal},function(module,exports,__webpack_require__){var isObject=__webpack_require__(26);__webpack_require__(27)("seal",function($seal){return function seal(it){return $seal&&isObject(it)?$seal(it):it}})},function(module,exports){module.exports=function(it){return typeof it==="object"?it!==null:typeof it==="function"}},function(module,exports,__webpack_require__){var $export=__webpack_require__(28),core=__webpack_require__(30),fails=__webpack_require__(33);module.exports=
function(KEY,exec){var fn=(core.Object||{})[KEY]||Object[KEY],exp={};exp[KEY]=exec(fn);$export($export.S+$export.F*fails(function(){fn(1)}),"Object",exp)}},function(module,exports,__webpack_require__){var global=__webpack_require__(29),core=__webpack_require__(30),ctx=__webpack_require__(31),PROTOTYPE="prototype";var $export=function(type,name,source){var IS_FORCED=type&$export.F,IS_GLOBAL=type&$export.G,IS_STATIC=type&$export.S,IS_PROTO=type&$export.P,IS_BIND=type&$export.B,IS_WRAP=type&$export.W,
exports=IS_GLOBAL?core:core[name]||(core[name]={}),target=IS_GLOBAL?global:IS_STATIC?global[name]:(global[name]||{})[PROTOTYPE],key,own,out;if(IS_GLOBAL)source=name;for(key in source){own=!IS_FORCED&&target&&key in target;if(own&&key in exports)continue;out=own?target[key]:source[key];exports[key]=IS_GLOBAL&&typeof target[key]!="function"?source[key]:IS_BIND&&own?ctx(out,global):IS_WRAP&&target[key]==out?function(C){var F=function(param){return this instanceof C?new C(param):C(param)};F[PROTOTYPE]=
C[PROTOTYPE];return F}(out):IS_PROTO&&typeof out=="function"?ctx(Function.call,out):out;if(IS_PROTO)(exports[PROTOTYPE]||(exports[PROTOTYPE]={}))[key]=out}};$export.F=1;$export.G=2;$export.S=4;$export.P=8;$export.B=16;$export.W=32;module.exports=$export},function(module,exports){var global=module.exports=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();if(typeof __g=="number")__g=global},function(module,exports){var core=
module.exports={version:"1.2.6"};if(typeof __e=="number")__e=core},function(module,exports,__webpack_require__){var aFunction=__webpack_require__(32);module.exports=function(fn,that,length){aFunction(fn);if(that===undefined)return fn;switch(length){case 1:return function(a){return fn.call(that,a)};case 2:return function(a,b){return fn.call(that,a,b)};case 3:return function(a,b,c){return fn.call(that,a,b,c)}}return function(){return fn.apply(that,arguments)}}},function(module,exports){module.exports=
function(it){if(typeof it!="function")throw TypeError(it+" is not a function!");return it}},function(module,exports){module.exports=function(exec){try{return!!exec()}catch(e){return true}}},function(module,exports){(function(global){exports.__esModule=true;exports["default"]=function(Handlebars){var root=typeof global!=="undefined"?global:window,$Handlebars=root.Handlebars;Handlebars.noConflict=function(){if(root.Handlebars===Handlebars)root.Handlebars=$Handlebars;return Handlebars}};module.exports=
exports["default"]}).call(exports,function(){return this}())},function(module,exports){exports.__esModule=true;var AST={helpers:{helperExpression:function helperExpression(node){return node.type==="SubExpression"||(node.type==="MustacheStatement"||node.type==="BlockStatement")&&!!(node.params&&node.params.length||node.hash)},scopedId:function scopedId(path){return/^\.|this\b/.test(path.original)},simpleId:function simpleId(path){return path.parts.length===1&&!AST.helpers.scopedId(path)&&!path.depth}}};
exports["default"]=AST;module.exports=exports["default"]},function(module,exports,__webpack_require__){var _interopRequireDefault=__webpack_require__(1)["default"];var _interopRequireWildcard=__webpack_require__(3)["default"];exports.__esModule=true;exports.parse=parse;var _parser=__webpack_require__(37);var _parser2=_interopRequireDefault(_parser);var _whitespaceControl=__webpack_require__(38);var _whitespaceControl2=_interopRequireDefault(_whitespaceControl);var _helpers=__webpack_require__(40);
var Helpers=_interopRequireWildcard(_helpers);var _utils=__webpack_require__(5);exports.parser=_parser2["default"];var yy={};_utils.extend(yy,Helpers);function parse(input,options){if(input.type==="Program")return input;_parser2["default"].yy=yy;yy.locInfo=function(locInfo){return new yy.SourceLocation(options&&options.srcName,locInfo)};var strip=new _whitespaceControl2["default"](options);return strip.accept(_parser2["default"].parse(input))}},function(module,exports){exports.__esModule=true;var handlebars=
function(){var parser={trace:function trace(){},yy:{},symbols_:{"error":2,"root":3,"program":4,"EOF":5,"program_repetition0":6,"statement":7,"mustache":8,"block":9,"rawBlock":10,"partial":11,"partialBlock":12,"content":13,"COMMENT":14,"CONTENT":15,"openRawBlock":16,"rawBlock_repetition_plus0":17,"END_RAW_BLOCK":18,"OPEN_RAW_BLOCK":19,"helperName":20,"openRawBlock_repetition0":21,"openRawBlock_option0":22,"CLOSE_RAW_BLOCK":23,"openBlock":24,"block_option0":25,"closeBlock":26,"openInverse":27,"block_option1":28,
"OPEN_BLOCK":29,"openBlock_repetition0":30,"openBlock_option0":31,"openBlock_option1":32,"CLOSE":33,"OPEN_INVERSE":34,"openInverse_repetition0":35,"openInverse_option0":36,"openInverse_option1":37,"openInverseChain":38,"OPEN_INVERSE_CHAIN":39,"openInverseChain_repetition0":40,"openInverseChain_option0":41,"openInverseChain_option1":42,"inverseAndProgram":43,"INVERSE":44,"inverseChain":45,"inverseChain_option0":46,"OPEN_ENDBLOCK":47,"OPEN":48,"mustache_repetition0":49,"mustache_option0":50,"OPEN_UNESCAPED":51,
"mustache_repetition1":52,"mustache_option1":53,"CLOSE_UNESCAPED":54,"OPEN_PARTIAL":55,"partialName":56,"partial_repetition0":57,"partial_option0":58,"openPartialBlock":59,"OPEN_PARTIAL_BLOCK":60,"openPartialBlock_repetition0":61,"openPartialBlock_option0":62,"param":63,"sexpr":64,"OPEN_SEXPR":65,"sexpr_repetition0":66,"sexpr_option0":67,"CLOSE_SEXPR":68,"hash":69,"hash_repetition_plus0":70,"hashSegment":71,"ID":72,"EQUALS":73,"blockParams":74,"OPEN_BLOCK_PARAMS":75,"blockParams_repetition_plus0":76,
"CLOSE_BLOCK_PARAMS":77,"path":78,"dataName":79,"STRING":80,"NUMBER":81,"BOOLEAN":82,"UNDEFINED":83,"NULL":84,"DATA":85,"pathSegments":86,"SEP":87,"$accept":0,"$end":1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",
72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,1],[17,2],[21,0],[21,
2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function anonymous(yytext,yyleng,yylineno,yy,yystate,$$,_$){var $0=$$.length-1;switch(yystate){case 1:return $$[$0-1];break;case 2:this.$=
yy.prepareProgram($$[$0]);break;case 3:this.$=$$[$0];break;case 4:this.$=$$[$0];break;case 5:this.$=$$[$0];break;case 6:this.$=$$[$0];break;case 7:this.$=$$[$0];break;case 8:this.$=$$[$0];break;case 9:this.$={type:"CommentStatement",value:yy.stripComment($$[$0]),strip:yy.stripFlags($$[$0],$$[$0]),loc:yy.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:$$[$0],value:$$[$0],loc:yy.locInfo(this._$)};break;case 11:this.$=yy.prepareRawBlock($$[$0-2],$$[$0-1],$$[$0],this._$);break;
case 12:this.$={path:$$[$0-3],params:$$[$0-2],hash:$$[$0-1]};break;case 13:this.$=yy.prepareBlock($$[$0-3],$$[$0-2],$$[$0-1],$$[$0],false,this._$);break;case 14:this.$=yy.prepareBlock($$[$0-3],$$[$0-2],$$[$0-1],$$[$0],true,this._$);break;case 15:this.$={open:$$[$0-5],path:$$[$0-4],params:$$[$0-3],hash:$$[$0-2],blockParams:$$[$0-1],strip:yy.stripFlags($$[$0-5],$$[$0])};break;case 16:this.$={path:$$[$0-4],params:$$[$0-3],hash:$$[$0-2],blockParams:$$[$0-1],strip:yy.stripFlags($$[$0-5],$$[$0])};break;
case 17:this.$={path:$$[$0-4],params:$$[$0-3],hash:$$[$0-2],blockParams:$$[$0-1],strip:yy.stripFlags($$[$0-5],$$[$0])};break;case 18:this.$={strip:yy.stripFlags($$[$0-1],$$[$0-1]),program:$$[$0]};break;case 19:var inverse=yy.prepareBlock($$[$0-2],$$[$0-1],$$[$0],$$[$0],false,this._$),program=yy.prepareProgram([inverse],$$[$0-1].loc);program.chained=true;this.$={strip:$$[$0-2].strip,program:program,chain:true};break;case 20:this.$=$$[$0];break;case 21:this.$={path:$$[$0-1],strip:yy.stripFlags($$[$0-
2],$$[$0])};break;case 22:this.$=yy.prepareMustache($$[$0-3],$$[$0-2],$$[$0-1],$$[$0-4],yy.stripFlags($$[$0-4],$$[$0]),this._$);break;case 23:this.$=yy.prepareMustache($$[$0-3],$$[$0-2],$$[$0-1],$$[$0-4],yy.stripFlags($$[$0-4],$$[$0]),this._$);break;case 24:this.$={type:"PartialStatement",name:$$[$0-3],params:$$[$0-2],hash:$$[$0-1],indent:"",strip:yy.stripFlags($$[$0-4],$$[$0]),loc:yy.locInfo(this._$)};break;case 25:this.$=yy.preparePartialBlock($$[$0-2],$$[$0-1],$$[$0],this._$);break;case 26:this.$=
{path:$$[$0-3],params:$$[$0-2],hash:$$[$0-1],strip:yy.stripFlags($$[$0-4],$$[$0])};break;case 27:this.$=$$[$0];break;case 28:this.$=$$[$0];break;case 29:this.$={type:"SubExpression",path:$$[$0-3],params:$$[$0-2],hash:$$[$0-1],loc:yy.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:$$[$0],loc:yy.locInfo(this._$)};break;case 31:this.$={type:"HashPair",key:yy.id($$[$0-2]),value:$$[$0],loc:yy.locInfo(this._$)};break;case 32:this.$=yy.id($$[$0-1]);break;case 33:this.$=$$[$0];break;case 34:this.$=
$$[$0];break;case 35:this.$={type:"StringLiteral",value:$$[$0],original:$$[$0],loc:yy.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number($$[$0]),original:Number($$[$0]),loc:yy.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:$$[$0]==="true",original:$$[$0]==="true",loc:yy.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",original:undefined,value:undefined,loc:yy.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,
loc:yy.locInfo(this._$)};break;case 40:this.$=$$[$0];break;case 41:this.$=$$[$0];break;case 42:this.$=yy.preparePath(true,$$[$0],this._$);break;case 43:this.$=yy.preparePath(false,$$[$0],this._$);break;case 44:$$[$0-2].push({part:yy.id($$[$0]),original:$$[$0],separator:$$[$0-1]});this.$=$$[$0-2];break;case 45:this.$=[{part:yy.id($$[$0]),original:$$[$0]}];break;case 46:this.$=[];break;case 47:$$[$0-1].push($$[$0]);break;case 48:this.$=[$$[$0]];break;case 49:$$[$0-1].push($$[$0]);break;case 50:this.$=
[];break;case 51:$$[$0-1].push($$[$0]);break;case 58:this.$=[];break;case 59:$$[$0-1].push($$[$0]);break;case 64:this.$=[];break;case 65:$$[$0-1].push($$[$0]);break;case 70:this.$=[];break;case 71:$$[$0-1].push($$[$0]);break;case 78:this.$=[];break;case 79:$$[$0-1].push($$[$0]);break;case 82:this.$=[];break;case 83:$$[$0-1].push($$[$0]);break;case 86:this.$=[];break;case 87:$$[$0-1].push($$[$0]);break;case 90:this.$=[];break;case 91:$$[$0-1].push($$[$0]);break;case 94:this.$=[];break;case 95:$$[$0-
1].push($$[$0]);break;case 98:this.$=[$$[$0]];break;case 99:$$[$0-1].push($$[$0]);break;case 100:this.$=[$$[$0]];break;case 101:$$[$0-1].push($$[$0]);break}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],
14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],
19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],
83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{13:40,15:[1,20],17:39},{20:42,56:41,64:43,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,
32],85:[1,34],86:33},{4:45,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:48,72:[1,35],78:26,79:27,80:[1,28],
81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:42,56:49,64:43,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:50,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,
34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],
80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,51]},{72:[1,35],86:52},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:53,
54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:54,38:56,39:[1,58],43:57,44:[1,59],45:55,47:[2,54]},{28:60,43:61,44:[1,59],47:[2,56]},{13:63,15:[1,20],18:[1,62]},{15:[2,48],18:[2,48]},{33:[2,86],57:64,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],
85:[2,41]},{20:65,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:66,47:[1,67]},{30:68,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:69,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:70,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:71,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,
90],83:[2,90],84:[2,90],85:[2,90]},{20:75,33:[2,80],50:72,63:73,64:76,65:[1,44],69:74,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,80]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,51]},{20:75,53:81,54:[2,84],63:82,64:76,65:[1,44],69:83,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:84,47:[1,
67]},{47:[2,55]},{4:85,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:86,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:87,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:88,47:[1,67]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,
11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:75,33:[2,88],58:89,63:90,64:76,65:[1,44],69:91,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:92,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:93,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,
32],85:[1,34],86:33},{20:75,31:94,33:[2,60],63:95,64:76,65:[1,44],69:96,70:77,71:78,72:[1,79],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,33:[2,66],36:97,63:98,64:76,65:[1,44],69:99,70:77,71:78,72:[1,79],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,22:100,23:[2,52],63:101,64:76,65:[1,44],69:102,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,
33:[2,92],62:103,63:104,64:76,65:[1,44],69:105,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,106]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,
28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:107,72:[1,108],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,109],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,110]},{54:[2,83],65:[2,83],72:[2,83],80:[2,
83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:56,39:[1,58],43:57,44:[1,59],45:112,46:111,47:[2,76]},{33:[2,70],40:113,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,
14]},{33:[1,114]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:75,63:116,64:76,65:[1,44],67:115,68:[2,96],69:117,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,118]},{32:119,33:[2,62],74:120,75:[1,121]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:122,74:123,75:[1,121]},{33:[2,65],65:[2,
65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,124]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,125]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],
68:[2,99],72:[2,99],75:[2,99]},{73:[1,109]},{20:75,63:126,64:76,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:75,33:[2,72],41:127,63:128,64:76,65:[1,44],69:129,70:77,71:78,72:[1,79],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],
15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,130]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,131]},{33:[2,63]},{72:[1,133],76:132},{33:[1,134]},{33:[2,69]},{15:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],
48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:135,74:136,75:[1,121]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,
15],60:[2,15]},{72:[1,138],77:[1,137]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,139]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],55:[2,55],57:[2,20],61:[2,57],74:[2,81],83:[2,85],87:[2,18],91:[2,89],102:[2,53],105:[2,93],111:[2,19],112:[2,77],117:[2,
97],120:[2,63],123:[2,69],124:[2,12],136:[2,75],137:[2,32]},parseError:function parseError(str,hash){throw new Error(str);},parse:function parse(input){var self=this,stack=[0],vstack=[null],lstack=[],table=this.table,yytext="",yylineno=0,yyleng=0,recovering=0,TERROR=2,EOF=1;this.lexer.setInput(input);this.lexer.yy=this.yy;this.yy.lexer=this.lexer;this.yy.parser=this;if(typeof this.lexer.yylloc=="undefined")this.lexer.yylloc={};var yyloc=this.lexer.yylloc;lstack.push(yyloc);var ranges=this.lexer.options&&
this.lexer.options.ranges;if(typeof this.yy.parseError==="function")this.parseError=this.yy.parseError;function popStack(n){stack.length=stack.length-2*n;vstack.length=vstack.length-n;lstack.length=lstack.length-n}function lex(){var token;token=self.lexer.lex()||1;if(typeof token!=="number")token=self.symbols_[token]||token;return token}var symbol,preErrorSymbol,state,action,a,r,yyval={},p,len,newState,expected;while(true){state=stack[stack.length-1];if(this.defaultActions[state])action=this.defaultActions[state];
else{if(symbol===null||typeof symbol=="undefined")symbol=lex();action=table[state]&&table[state][symbol]}if(typeof action==="undefined"||!action.length||!action[0]){var errStr="";if(!recovering){expected=[];for(p in table[state])if(this.terminals_[p]&&p>2)expected.push("'"+this.terminals_[p]+"'");if(this.lexer.showPosition)errStr="Parse error on line "+(yylineno+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+expected.join(", ")+", got '"+(this.terminals_[symbol]||symbol)+"'";else errStr="Parse error on line "+
(yylineno+1)+": Unexpected "+(symbol==1?"end of input":"'"+(this.terminals_[symbol]||symbol)+"'");this.parseError(errStr,{text:this.lexer.match,token:this.terminals_[symbol]||symbol,line:this.lexer.yylineno,loc:yyloc,expected:expected})}}if(action[0]instanceof Array&&action.length>1)throw new Error("Parse Error: multiple actions possible at state: "+state+", token: "+symbol);switch(action[0]){case 1:stack.push(symbol);vstack.push(this.lexer.yytext);lstack.push(this.lexer.yylloc);stack.push(action[1]);
symbol=null;if(!preErrorSymbol){yyleng=this.lexer.yyleng;yytext=this.lexer.yytext;yylineno=this.lexer.yylineno;yyloc=this.lexer.yylloc;if(recovering>0)recovering--}else{symbol=preErrorSymbol;preErrorSymbol=null}break;case 2:len=this.productions_[action[1]][1];yyval.$=vstack[vstack.length-len];yyval._$={first_line:lstack[lstack.length-(len||1)].first_line,last_line:lstack[lstack.length-1].last_line,first_column:lstack[lstack.length-(len||1)].first_column,last_column:lstack[lstack.length-1].last_column};
if(ranges)yyval._$.range=[lstack[lstack.length-(len||1)].range[0],lstack[lstack.length-1].range[1]];r=this.performAction.call(yyval,yytext,yyleng,yylineno,this.yy,action[1],vstack,lstack);if(typeof r!=="undefined")return r;if(len){stack=stack.slice(0,-1*len*2);vstack=vstack.slice(0,-1*len);lstack=lstack.slice(0,-1*len)}stack.push(this.productions_[action[1]][0]);vstack.push(yyval.$);lstack.push(yyval._$);newState=table[stack[stack.length-2]][stack[stack.length-1]];stack.push(newState);break;case 3:return true}}return true}};
var lexer=function(){var lexer={EOF:1,parseError:function parseError(str,hash){if(this.yy.parser)this.yy.parser.parseError(str,hash);else throw new Error(str);},setInput:function setInput(input){this._input=input;this._more=this._less=this.done=false;this.yylineno=this.yyleng=0;this.yytext=this.matched=this.match="";this.conditionStack=["INITIAL"];this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};if(this.options.ranges)this.yylloc.range=[0,0];this.offset=0;return this},input:function input(){var ch=
this._input[0];this.yytext+=ch;this.yyleng++;this.offset++;this.match+=ch;this.matched+=ch;var lines=ch.match(/(?:\r\n?|\n).*/g);if(lines){this.yylineno++;this.yylloc.last_line++}else this.yylloc.last_column++;if(this.options.ranges)this.yylloc.range[1]++;this._input=this._input.slice(1);return ch},unput:function unput(ch){var len=ch.length;var lines=ch.split(/(?:\r\n?|\n)/g);this._input=ch+this._input;this.yytext=this.yytext.substr(0,this.yytext.length-len-1);this.offset-=len;var oldLines=this.match.split(/(?:\r\n?|\n)/g);
this.match=this.match.substr(0,this.match.length-1);this.matched=this.matched.substr(0,this.matched.length-1);if(lines.length-1)this.yylineno-=lines.length-1;var r=this.yylloc.range;this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:lines?(lines.length===oldLines.length?this.yylloc.first_column:0)+oldLines[oldLines.length-lines.length].length-lines[0].length:this.yylloc.first_column-len};if(this.options.ranges)this.yylloc.range=
[r[0],r[0]+this.yyleng-len];return this},more:function more(){this._more=true;return this},less:function less(n){this.unput(this.match.slice(n))},pastInput:function pastInput(){var past=this.matched.substr(0,this.matched.length-this.match.length);return(past.length>20?"...":"")+past.substr(-20).replace(/\n/g,"")},upcomingInput:function upcomingInput(){var next=this.match;if(next.length<20)next+=this._input.substr(0,20-next.length);return(next.substr(0,20)+(next.length>20?"...":"")).replace(/\n/g,
"")},showPosition:function showPosition(){var pre=this.pastInput();var c=(new Array(pre.length+1)).join("-");return pre+this.upcomingInput()+"\n"+c+"^"},next:function next(){if(this.done)return this.EOF;if(!this._input)this.done=true;var token,match,tempMatch,index,col,lines;if(!this._more){this.yytext="";this.match=""}var rules=this._currentRules();for(var i=0;i<rules.length;i++){tempMatch=this._input.match(this.rules[rules[i]]);if(tempMatch&&(!match||tempMatch[0].length>match[0].length)){match=
tempMatch;index=i;if(!this.options.flex)break}}if(match){lines=match[0].match(/(?:\r\n?|\n).*/g);if(lines)this.yylineno+=lines.length;this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:lines?lines[lines.length-1].length-lines[lines.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+match[0].length};this.yytext+=match[0];this.match+=match[0];this.matches=match;this.yyleng=this.yytext.length;if(this.options.ranges)this.yylloc.range=
[this.offset,this.offset+=this.yyleng];this._more=false;this._input=this._input.slice(match[0].length);this.matched+=match[0];token=this.performAction.call(this,this.yy,this,rules[index],this.conditionStack[this.conditionStack.length-1]);if(this.done&&this._input)this.done=false;if(token)return token;else return}if(this._input==="")return this.EOF;else return this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},
lex:function lex(){var r=this.next();if(typeof r!=="undefined")return r;else return this.lex()},begin:function begin(condition){this.conditionStack.push(condition)},popState:function popState(){return this.conditionStack.pop()},_currentRules:function _currentRules(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function topState(){return this.conditionStack[this.conditionStack.length-2]},pushState:function begin(condition){this.begin(condition)}};lexer.options=
{};lexer.performAction=function anonymous(yy,yy_,$avoiding_name_collisions,YY_START){function strip(start,end){return yy_.yytext=yy_.yytext.substring(start,yy_.yyleng-end+start)}var YYSTATE=YY_START;switch($avoiding_name_collisions){case 0:if(yy_.yytext.slice(-2)==="\\\\"){strip(0,1);this.begin("mu")}else if(yy_.yytext.slice(-1)==="\\"){strip(0,1);this.begin("emu")}else this.begin("mu");if(yy_.yytext)return 15;break;case 1:return 15;break;case 2:this.popState();return 15;break;case 3:this.begin("raw");
return 15;break;case 4:this.popState();if(this.conditionStack[this.conditionStack.length-1]==="raw")return 15;else{strip(5,9);return"END_RAW_BLOCK"}break;case 5:return 15;break;case 6:this.popState();return 14;break;case 7:return 65;break;case 8:return 68;break;case 9:return 19;break;case 10:this.popState();this.begin("raw");return 23;break;case 11:return 55;break;case 12:return 60;break;case 13:return 29;break;case 14:return 47;break;case 15:this.popState();return 44;break;case 16:this.popState();
return 44;break;case 17:return 34;break;case 18:return 39;break;case 19:return 51;break;case 20:return 48;break;case 21:this.unput(yy_.yytext);this.popState();this.begin("com");break;case 22:this.popState();return 14;break;case 23:return 48;break;case 24:return 73;break;case 25:return 72;break;case 26:return 72;break;case 27:return 87;break;case 28:break;case 29:this.popState();return 54;break;case 30:this.popState();return 33;break;case 31:yy_.yytext=strip(1,2).replace(/\\"/g,'"');return 80;break;
case 32:yy_.yytext=strip(1,2).replace(/\\'/g,"'");return 80;break;case 33:return 85;break;case 34:return 82;break;case 35:return 82;break;case 36:return 83;break;case 37:return 84;break;case 38:return 81;break;case 39:return 75;break;case 40:return 77;break;case 41:return 72;break;case 42:yy_.yytext=yy_.yytext.replace(/\\([\\\]])/g,"$1");return 72;break;case 43:return"INVALID";break;case 44:return 5;break}};lexer.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,
/^(?:\{\{\{\{(?=[^\/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]*?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,
/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/];lexer.conditions={"mu":{"rules":[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,
26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],"inclusive":false},"emu":{"rules":[2],"inclusive":false},"com":{"rules":[6],"inclusive":false},"raw":{"rules":[3,4,5],"inclusive":false},"INITIAL":{"rules":[0,1,44],"inclusive":true}};return lexer}();parser.lexer=lexer;function Parser(){this.yy={}}Parser.prototype=parser;parser.Parser=Parser;return new Parser}();exports["default"]=handlebars;module.exports=exports["default"]},function(module,exports,__webpack_require__){var _interopRequireDefault=
__webpack_require__(1)["default"];exports.__esModule=true;var _visitor=__webpack_require__(39);var _visitor2=_interopRequireDefault(_visitor);function WhitespaceControl(){var options=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];this.options=options}WhitespaceControl.prototype=new _visitor2["default"];WhitespaceControl.prototype.Program=function(program){var doStandalone=!this.options.ignoreStandalone;var isRoot=!this.isRootSeen;this.isRootSeen=true;var body=program.body;for(var i=
0,l=body.length;i<l;i++){var current=body[i],strip=this.accept(current);if(!strip)continue;var _isPrevWhitespace=isPrevWhitespace(body,i,isRoot),_isNextWhitespace=isNextWhitespace(body,i,isRoot),openStandalone=strip.openStandalone&&_isPrevWhitespace,closeStandalone=strip.closeStandalone&&_isNextWhitespace,inlineStandalone=strip.inlineStandalone&&_isPrevWhitespace&&_isNextWhitespace;if(strip.close)omitRight(body,i,true);if(strip.open)omitLeft(body,i,true);if(doStandalone&&inlineStandalone){omitRight(body,
i);if(omitLeft(body,i))if(current.type==="PartialStatement")current.indent=/([ \t]+$)/.exec(body[i-1].original)[1]}if(doStandalone&&openStandalone){omitRight((current.program||current.inverse).body);omitLeft(body,i)}if(doStandalone&&closeStandalone){omitRight(body,i);omitLeft((current.inverse||current.program).body)}}return program};WhitespaceControl.prototype.BlockStatement=WhitespaceControl.prototype.DecoratorBlock=WhitespaceControl.prototype.PartialBlockStatement=function(block){this.accept(block.program);
this.accept(block.inverse);var program=block.program||block.inverse,inverse=block.program&&block.inverse,firstInverse=inverse,lastInverse=inverse;if(inverse&&inverse.chained){firstInverse=inverse.body[0].program;while(lastInverse.chained)lastInverse=lastInverse.body[lastInverse.body.length-1].program}var strip={open:block.openStrip.open,close:block.closeStrip.close,openStandalone:isNextWhitespace(program.body),closeStandalone:isPrevWhitespace((firstInverse||program).body)};if(block.openStrip.close)omitRight(program.body,
null,true);if(inverse){var inverseStrip=block.inverseStrip;if(inverseStrip.open)omitLeft(program.body,null,true);if(inverseStrip.close)omitRight(firstInverse.body,null,true);if(block.closeStrip.open)omitLeft(lastInverse.body,null,true);if(!this.options.ignoreStandalone&&isPrevWhitespace(program.body)&&isNextWhitespace(firstInverse.body)){omitLeft(program.body);omitRight(firstInverse.body)}}else if(block.closeStrip.open)omitLeft(program.body,null,true);return strip};WhitespaceControl.prototype.Decorator=
WhitespaceControl.prototype.MustacheStatement=function(mustache){return mustache.strip};WhitespaceControl.prototype.PartialStatement=WhitespaceControl.prototype.CommentStatement=function(node){var strip=node.strip||{};return{inlineStandalone:true,open:strip.open,close:strip.close}};function isPrevWhitespace(body,i,isRoot){if(i===undefined)i=body.length;var prev=body[i-1],sibling=body[i-2];if(!prev)return isRoot;if(prev.type==="ContentStatement")return(sibling||!isRoot?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(prev.original)}
function isNextWhitespace(body,i,isRoot){if(i===undefined)i=-1;var next=body[i+1],sibling=body[i+2];if(!next)return isRoot;if(next.type==="ContentStatement")return(sibling||!isRoot?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(next.original)}function omitRight(body,i,multiple){var current=body[i==null?0:i+1];if(!current||current.type!=="ContentStatement"||!multiple&&current.rightStripped)return;var original=current.value;current.value=current.value.replace(multiple?/^\s+/:/^[ \t]*\r?\n?/,"");current.rightStripped=
current.value!==original}function omitLeft(body,i,multiple){var current=body[i==null?body.length-1:i-1];if(!current||current.type!=="ContentStatement"||!multiple&&current.leftStripped)return;var original=current.value;current.value=current.value.replace(multiple?/\s+$/:/[ \t]+$/,"");current.leftStripped=current.value!==original;return current.leftStripped}exports["default"]=WhitespaceControl;module.exports=exports["default"]},function(module,exports,__webpack_require__){var _interopRequireDefault=
__webpack_require__(1)["default"];exports.__esModule=true;var _exception=__webpack_require__(6);var _exception2=_interopRequireDefault(_exception);function Visitor(){this.parents=[]}Visitor.prototype={constructor:Visitor,mutating:false,acceptKey:function acceptKey(node,name){var value=this.accept(node[name]);if(this.mutating){if(value&&!Visitor.prototype[value.type])throw new _exception2["default"]('Unexpected node type "'+value.type+'" found when accepting '+name+" on "+node.type);node[name]=value}},
acceptRequired:function acceptRequired(node,name){this.acceptKey(node,name);if(!node[name])throw new _exception2["default"](node.type+" requires "+name);},acceptArray:function acceptArray(array){for(var i=0,l=array.length;i<l;i++){this.acceptKey(array,i);if(!array[i]){array.splice(i,1);i--;l--}}},accept:function accept(object){if(!object)return;if(!this[object.type])throw new _exception2["default"]("Unknown type: "+object.type,object);if(this.current)this.parents.unshift(this.current);this.current=
object;var ret=this[object.type](object);this.current=this.parents.shift();if(!this.mutating||ret)return ret;else if(ret!==false)return object},Program:function Program(program){this.acceptArray(program.body)},MustacheStatement:visitSubExpression,Decorator:visitSubExpression,BlockStatement:visitBlock,DecoratorBlock:visitBlock,PartialStatement:visitPartial,PartialBlockStatement:function PartialBlockStatement(partial){visitPartial.call(this,partial);this.acceptKey(partial,"program")},ContentStatement:function ContentStatement(){},
CommentStatement:function CommentStatement(){},SubExpression:visitSubExpression,PathExpression:function PathExpression(){},StringLiteral:function StringLiteral(){},NumberLiteral:function NumberLiteral(){},BooleanLiteral:function BooleanLiteral(){},UndefinedLiteral:function UndefinedLiteral(){},NullLiteral:function NullLiteral(){},Hash:function Hash(hash){this.acceptArray(hash.pairs)},HashPair:function HashPair(pair){this.acceptRequired(pair,"value")}};function visitSubExpression(mustache){this.acceptRequired(mustache,
"path");this.acceptArray(mustache.params);this.acceptKey(mustache,"hash")}function visitBlock(block){visitSubExpression.call(this,block);this.acceptKey(block,"program");this.acceptKey(block,"inverse")}function visitPartial(partial){this.acceptRequired(partial,"name");this.acceptArray(partial.params);this.acceptKey(partial,"hash")}exports["default"]=Visitor;module.exports=exports["default"]},function(module,exports,__webpack_require__){var _interopRequireDefault=__webpack_require__(1)["default"];exports.__esModule=
true;exports.SourceLocation=SourceLocation;exports.id=id;exports.stripFlags=stripFlags;exports.stripComment=stripComment;exports.preparePath=preparePath;exports.prepareMustache=prepareMustache;exports.prepareRawBlock=prepareRawBlock;exports.prepareBlock=prepareBlock;exports.prepareProgram=prepareProgram;exports.preparePartialBlock=preparePartialBlock;var _exception=__webpack_require__(6);var _exception2=_interopRequireDefault(_exception);function validateClose(open,close){close=close.path?close.path.original:
close;if(open.path.original!==close){var errorNode={loc:open.path.loc};throw new _exception2["default"](open.path.original+" doesn't match "+close,errorNode);}}function SourceLocation(source,locInfo){this.source=source;this.start={line:locInfo.first_line,column:locInfo.first_column};this.end={line:locInfo.last_line,column:locInfo.last_column}}function id(token){if(/^\[.*\]$/.test(token))return token.substring(1,token.length-1);else return token}function stripFlags(open,close){return{open:open.charAt(2)===
"~",close:close.charAt(close.length-3)==="~"}}function stripComment(comment){return comment.replace(/^\{\{~?!-?-?/,"").replace(/-?-?~?\}\}$/,"")}function preparePath(data,parts,loc){loc=this.locInfo(loc);var original=data?"@":"",dig=[],depth=0;for(var i=0,l=parts.length;i<l;i++){var part=parts[i].part,isLiteral=parts[i].original!==part;original+=(parts[i].separator||"")+part;if(!isLiteral&&(part===".."||part==="."||part==="this"))if(dig.length>0)throw new _exception2["default"]("Invalid path: "+original,
{loc:loc});else{if(part==="..")depth++}else dig.push(part)}return{type:"PathExpression",data:data,depth:depth,parts:dig,original:original,loc:loc}}function prepareMustache(path,params,hash,open,strip,locInfo){var escapeFlag=open.charAt(3)||open.charAt(2),escaped=escapeFlag!=="{"&&escapeFlag!=="&";var decorator=/\*/.test(open);return{type:decorator?"Decorator":"MustacheStatement",path:path,params:params,hash:hash,escaped:escaped,strip:strip,loc:this.locInfo(locInfo)}}function prepareRawBlock(openRawBlock,
contents,close,locInfo){validateClose(openRawBlock,close);locInfo=this.locInfo(locInfo);var program={type:"Program",body:contents,strip:{},loc:locInfo};return{type:"BlockStatement",path:openRawBlock.path,params:openRawBlock.params,hash:openRawBlock.hash,program:program,openStrip:{},inverseStrip:{},closeStrip:{},loc:locInfo}}function prepareBlock(openBlock,program,inverseAndProgram,close,inverted,locInfo){if(close&&close.path)validateClose(openBlock,close);var decorator=/\*/.test(openBlock.open);program.blockParams=
openBlock.blockParams;var inverse=undefined,inverseStrip=undefined;if(inverseAndProgram){if(decorator)throw new _exception2["default"]("Unexpected inverse block on decorator",inverseAndProgram);if(inverseAndProgram.chain)inverseAndProgram.program.body[0].closeStrip=close.strip;inverseStrip=inverseAndProgram.strip;inverse=inverseAndProgram.program}if(inverted){inverted=inverse;inverse=program;program=inverted}return{type:decorator?"DecoratorBlock":"BlockStatement",path:openBlock.path,params:openBlock.params,
hash:openBlock.hash,program:program,inverse:inverse,openStrip:openBlock.strip,inverseStrip:inverseStrip,closeStrip:close&&close.strip,loc:this.locInfo(locInfo)}}function prepareProgram(statements,loc){if(!loc&&statements.length){var firstLoc=statements[0].loc,lastLoc=statements[statements.length-1].loc;if(firstLoc&&lastLoc)loc={source:firstLoc.source,start:{line:firstLoc.start.line,column:firstLoc.start.column},end:{line:lastLoc.end.line,column:lastLoc.end.column}}}return{type:"Program",body:statements,
strip:{},loc:loc}}function preparePartialBlock(open,program,close,locInfo){validateClose(open,close);return{type:"PartialBlockStatement",name:open.path,params:open.params,hash:open.hash,program:program,openStrip:open.strip,closeStrip:close&&close.strip,loc:this.locInfo(locInfo)}}},function(module,exports,__webpack_require__){var _interopRequireDefault=__webpack_require__(1)["default"];exports.__esModule=true;exports.Compiler=Compiler;exports.precompile=precompile;exports.compile=compile;var _exception=
__webpack_require__(6);var _exception2=_interopRequireDefault(_exception);var _utils=__webpack_require__(5);var _ast=__webpack_require__(35);var _ast2=_interopRequireDefault(_ast);var slice=[].slice;function Compiler(){}Compiler.prototype={compiler:Compiler,equals:function equals(other){var len=this.opcodes.length;if(other.opcodes.length!==len)return false;for(var i=0;i<len;i++){var opcode=this.opcodes[i],otherOpcode=other.opcodes[i];if(opcode.opcode!==otherOpcode.opcode||!argEquals(opcode.args,otherOpcode.args))return false}len=
this.children.length;for(var i=0;i<len;i++)if(!this.children[i].equals(other.children[i]))return false;return true},guid:0,compile:function compile(program,options){this.sourceNode=[];this.opcodes=[];this.children=[];this.options=options;this.stringParams=options.stringParams;this.trackIds=options.trackIds;options.blockParams=options.blockParams||[];var knownHelpers=options.knownHelpers;options.knownHelpers={"helperMissing":true,"blockHelperMissing":true,"each":true,"if":true,"unless":true,"with":true,
"log":true,"lookup":true};if(knownHelpers)for(var _name in knownHelpers)this.options.knownHelpers[_name]=knownHelpers[_name];return this.accept(program)},compileProgram:function compileProgram(program){var childCompiler=new this.compiler,result=childCompiler.compile(program,this.options),guid=this.guid++;this.usePartial=this.usePartial||result.usePartial;this.children[guid]=result;this.useDepths=this.useDepths||result.useDepths;return guid},accept:function accept(node){if(!this[node.type])throw new _exception2["default"]("Unknown type: "+
node.type,node);this.sourceNode.unshift(node);var ret=this[node.type](node);this.sourceNode.shift();return ret},Program:function Program(program){this.options.blockParams.unshift(program.blockParams);var body=program.body,bodyLength=body.length;for(var i=0;i<bodyLength;i++)this.accept(body[i]);this.options.blockParams.shift();this.isSimple=bodyLength===1;this.blockParams=program.blockParams?program.blockParams.length:0;return this},BlockStatement:function BlockStatement(block){transformLiteralToPath(block);
var program=block.program,inverse=block.inverse;program=program&&this.compileProgram(program);inverse=inverse&&this.compileProgram(inverse);var type=this.classifySexpr(block);if(type==="helper")this.helperSexpr(block,program,inverse);else if(type==="simple"){this.simpleSexpr(block);this.opcode("pushProgram",program);this.opcode("pushProgram",inverse);this.opcode("emptyHash");this.opcode("blockValue",block.path.original)}else{this.ambiguousSexpr(block,program,inverse);this.opcode("pushProgram",program);
this.opcode("pushProgram",inverse);this.opcode("emptyHash");this.opcode("ambiguousBlockValue")}this.opcode("append")},DecoratorBlock:function DecoratorBlock(decorator){var program=decorator.program&&this.compileProgram(decorator.program);var params=this.setupFullMustacheParams(decorator,program,undefined),path=decorator.path;this.useDecorators=true;this.opcode("registerDecorator",params.length,path.original)},PartialStatement:function PartialStatement(partial){this.usePartial=true;var program=partial.program;
if(program)program=this.compileProgram(partial.program);var params=partial.params;if(params.length>1)throw new _exception2["default"]("Unsupported number of partial arguments: "+params.length,partial);else if(!params.length)if(this.options.explicitPartialContext)this.opcode("pushLiteral","undefined");else params.push({type:"PathExpression",parts:[],depth:0});var partialName=partial.name.original,isDynamic=partial.name.type==="SubExpression";if(isDynamic)this.accept(partial.name);this.setupFullMustacheParams(partial,
program,undefined,true);var indent=partial.indent||"";if(this.options.preventIndent&&indent){this.opcode("appendContent",indent);indent=""}this.opcode("invokePartial",isDynamic,partialName,indent);this.opcode("append")},PartialBlockStatement:function PartialBlockStatement(partialBlock){this.PartialStatement(partialBlock)},MustacheStatement:function MustacheStatement(mustache){this.SubExpression(mustache);if(mustache.escaped&&!this.options.noEscape)this.opcode("appendEscaped");else this.opcode("append")},
Decorator:function Decorator(decorator){this.DecoratorBlock(decorator)},ContentStatement:function ContentStatement(content){if(content.value)this.opcode("appendContent",content.value)},CommentStatement:function CommentStatement(){},SubExpression:function SubExpression(sexpr){transformLiteralToPath(sexpr);var type=this.classifySexpr(sexpr);if(type==="simple")this.simpleSexpr(sexpr);else if(type==="helper")this.helperSexpr(sexpr);else this.ambiguousSexpr(sexpr)},ambiguousSexpr:function ambiguousSexpr(sexpr,
program,inverse){var path=sexpr.path,name=path.parts[0],isBlock=program!=null||inverse!=null;this.opcode("getContext",path.depth);this.opcode("pushProgram",program);this.opcode("pushProgram",inverse);path.strict=true;this.accept(path);this.opcode("invokeAmbiguous",name,isBlock)},simpleSexpr:function simpleSexpr(sexpr){var path=sexpr.path;path.strict=true;this.accept(path);this.opcode("resolvePossibleLambda")},helperSexpr:function helperSexpr(sexpr,program,inverse){var params=this.setupFullMustacheParams(sexpr,
program,inverse),path=sexpr.path,name=path.parts[0];if(this.options.knownHelpers[name])this.opcode("invokeKnownHelper",params.length,name);else if(this.options.knownHelpersOnly)throw new _exception2["default"]("You specified knownHelpersOnly, but used the unknown helper "+name,sexpr);else{path.strict=true;path.falsy=true;this.accept(path);this.opcode("invokeHelper",params.length,path.original,_ast2["default"].helpers.simpleId(path))}},PathExpression:function PathExpression(path){this.addDepth(path.depth);
this.opcode("getContext",path.depth);var name=path.parts[0],scoped=_ast2["default"].helpers.scopedId(path),blockParamId=!path.depth&&!scoped&&this.blockParamIndex(name);if(blockParamId)this.opcode("lookupBlockParam",blockParamId,path.parts);else if(!name)this.opcode("pushContext");else if(path.data){this.options.data=true;this.opcode("lookupData",path.depth,path.parts,path.strict)}else this.opcode("lookupOnContext",path.parts,path.falsy,path.strict,scoped)},StringLiteral:function StringLiteral(string){this.opcode("pushString",
string.value)},NumberLiteral:function NumberLiteral(number){this.opcode("pushLiteral",number.value)},BooleanLiteral:function BooleanLiteral(bool){this.opcode("pushLiteral",bool.value)},UndefinedLiteral:function UndefinedLiteral(){this.opcode("pushLiteral","undefined")},NullLiteral:function NullLiteral(){this.opcode("pushLiteral","null")},Hash:function Hash(hash){var pairs=hash.pairs,i=0,l=pairs.length;this.opcode("pushHash");for(;i<l;i++)this.pushParam(pairs[i].value);while(i--)this.opcode("assignToHash",
pairs[i].key);this.opcode("popHash")},opcode:function opcode(name){this.opcodes.push({opcode:name,args:slice.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function addDepth(depth){if(!depth)return;this.useDepths=true},classifySexpr:function classifySexpr(sexpr){var isSimple=_ast2["default"].helpers.simpleId(sexpr.path);var isBlockParam=isSimple&&!!this.blockParamIndex(sexpr.path.parts[0]);var isHelper=!isBlockParam&&_ast2["default"].helpers.helperExpression(sexpr);var isEligible=!isBlockParam&&
(isHelper||isSimple);if(isEligible&&!isHelper){var _name2=sexpr.path.parts[0],options=this.options;if(options.knownHelpers[_name2])isHelper=true;else if(options.knownHelpersOnly)isEligible=false}if(isHelper)return"helper";else if(isEligible)return"ambiguous";else return"simple"},pushParams:function pushParams(params){for(var i=0,l=params.length;i<l;i++)this.pushParam(params[i])},pushParam:function pushParam(val){var value=val.value!=null?val.value:val.original||"";if(this.stringParams){if(value.replace)value=
value.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".");if(val.depth)this.addDepth(val.depth);this.opcode("getContext",val.depth||0);this.opcode("pushStringParam",value,val.type);if(val.type==="SubExpression")this.accept(val)}else{if(this.trackIds){var blockParamIndex=undefined;if(val.parts&&!_ast2["default"].helpers.scopedId(val)&&!val.depth)blockParamIndex=this.blockParamIndex(val.parts[0]);if(blockParamIndex){var blockParamChild=val.parts.slice(1).join(".");this.opcode("pushId","BlockParam",blockParamIndex,
blockParamChild)}else{value=val.original||value;if(value.replace)value=value.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"");this.opcode("pushId",val.type,value)}}this.accept(val)}},setupFullMustacheParams:function setupFullMustacheParams(sexpr,program,inverse,omitEmpty){var params=sexpr.params;this.pushParams(params);this.opcode("pushProgram",program);this.opcode("pushProgram",inverse);if(sexpr.hash)this.accept(sexpr.hash);else this.opcode("emptyHash",omitEmpty);return params},
blockParamIndex:function blockParamIndex(name){for(var depth=0,len=this.options.blockParams.length;depth<len;depth++){var blockParams=this.options.blockParams[depth],param=blockParams&&_utils.indexOf(blockParams,name);if(blockParams&&param>=0)return[depth,param]}}};function precompile(input,options,env){if(input==null||typeof input!=="string"&&input.type!=="Program")throw new _exception2["default"]("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+input);options=options||
{};if(!("data"in options))options.data=true;if(options.compat)options.useDepths=true;var ast=env.parse(input,options),environment=(new env.Compiler).compile(ast,options);return(new env.JavaScriptCompiler).compile(environment,options)}function compile(input,options,env){if(options===undefined)options={};if(input==null||typeof input!=="string"&&input.type!=="Program")throw new _exception2["default"]("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+input);options=_utils.extend({},
options);if(!("data"in options))options.data=true;if(options.compat)options.useDepths=true;var compiled=undefined;function compileInput(){var ast=env.parse(input,options),environment=(new env.Compiler).compile(ast,options),templateSpec=(new env.JavaScriptCompiler).compile(environment,options,undefined,true);return env.template(templateSpec)}function ret(context,execOptions){if(!compiled)compiled=compileInput();return compiled.call(this,context,execOptions)}ret._setup=function(setupOptions){if(!compiled)compiled=
compileInput();return compiled._setup(setupOptions)};ret._child=function(i,data,blockParams,depths){if(!compiled)compiled=compileInput();return compiled._child(i,data,blockParams,depths)};return ret}function argEquals(a,b){if(a===b)return true;if(_utils.isArray(a)&&_utils.isArray(b)&&a.length===b.length){for(var i=0;i<a.length;i++)if(!argEquals(a[i],b[i]))return false;return true}}function transformLiteralToPath(sexpr){if(!sexpr.path.parts){var literal=sexpr.path;sexpr.path={type:"PathExpression",
data:false,depth:0,parts:[literal.original+""],original:literal.original+"",loc:literal.loc}}}},function(module,exports,__webpack_require__){var _interopRequireDefault=__webpack_require__(1)["default"];exports.__esModule=true;var _base=__webpack_require__(4);var _exception=__webpack_require__(6);var _exception2=_interopRequireDefault(_exception);var _utils=__webpack_require__(5);var _codeGen=__webpack_require__(43);var _codeGen2=_interopRequireDefault(_codeGen);function Literal(value){this.value=
value}function JavaScriptCompiler(){}JavaScriptCompiler.prototype={nameLookup:function nameLookup(parent,name){if(name==="constructor")return["(",parent,".propertyIsEnumerable('constructor') ? ",parent,".constructor : undefined",")"];if(JavaScriptCompiler.isValidJavaScriptVariableName(name))return[parent,".",name];else return[parent,"[",JSON.stringify(name),"]"]},depthedLookup:function depthedLookup(name){return[this.aliasable("container.lookup"),'(depths, "',name,'")']},compilerInfo:function compilerInfo(){var revision=
_base.COMPILER_REVISION,versions=_base.REVISION_CHANGES[revision];return[revision,versions]},appendToBuffer:function appendToBuffer(source,location,explicit){if(!_utils.isArray(source))source=[source];source=this.source.wrap(source,location);if(this.environment.isSimple)return["return ",source,";"];else if(explicit)return["buffer += ",source,";"];else{source.appendToBuffer=true;return source}},initializeBuffer:function initializeBuffer(){return this.quotedString("")},compile:function compile(environment,
options,context,asObject){this.environment=environment;this.options=options;this.stringParams=this.options.stringParams;this.trackIds=this.options.trackIds;this.precompile=!asObject;this.name=this.environment.name;this.isChild=!!context;this.context=context||{decorators:[],programs:[],environments:[]};this.preamble();this.stackSlot=0;this.stackVars=[];this.aliases={};this.registers={list:[]};this.hashes=[];this.compileStack=[];this.inlineStack=[];this.blockParams=[];this.compileChildren(environment,
options);this.useDepths=this.useDepths||environment.useDepths||environment.useDecorators||this.options.compat;this.useBlockParams=this.useBlockParams||environment.useBlockParams;var opcodes=environment.opcodes,opcode=undefined,firstLoc=undefined,i=undefined,l=undefined;for(i=0,l=opcodes.length;i<l;i++){opcode=opcodes[i];this.source.currentLocation=opcode.loc;firstLoc=firstLoc||opcode.loc;this[opcode.opcode].apply(this,opcode.args)}this.source.currentLocation=firstLoc;this.pushSource("");if(this.stackSlot||
this.inlineStack.length||this.compileStack.length)throw new _exception2["default"]("Compile completed with content left on stack");if(!this.decorators.isEmpty()){this.useDecorators=true;this.decorators.prepend("var decorators = container.decorators;\n");this.decorators.push("return fn;");if(asObject)this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]);else{this.decorators.prepend("function(fn, props, container, depth0, data, blockParams, depths) {\n");
this.decorators.push("}\n");this.decorators=this.decorators.merge()}}else this.decorators=undefined;var fn=this.createFunctionContext(asObject);if(!this.isChild){var ret={compiler:this.compilerInfo(),main:fn};if(this.decorators){ret.main_d=this.decorators;ret.useDecorators=true}var _context=this.context;var programs=_context.programs;var decorators=_context.decorators;for(i=0,l=programs.length;i<l;i++)if(programs[i]){ret[i]=programs[i];if(decorators[i]){ret[i+"_d"]=decorators[i];ret.useDecorators=
true}}if(this.environment.usePartial)ret.usePartial=true;if(this.options.data)ret.useData=true;if(this.useDepths)ret.useDepths=true;if(this.useBlockParams)ret.useBlockParams=true;if(this.options.compat)ret.compat=true;if(!asObject){ret.compiler=JSON.stringify(ret.compiler);this.source.currentLocation={start:{line:1,column:0}};ret=this.objectLiteral(ret);if(options.srcName){ret=ret.toStringWithSourceMap({file:options.destName});ret.map=ret.map&&ret.map.toString()}else ret=ret.toString()}else ret.compilerOptions=
this.options;return ret}else return fn},preamble:function preamble(){this.lastContext=0;this.source=new _codeGen2["default"](this.options.srcName);this.decorators=new _codeGen2["default"](this.options.srcName)},createFunctionContext:function createFunctionContext(asObject){var varDeclarations="";var locals=this.stackVars.concat(this.registers.list);if(locals.length>0)varDeclarations+=", "+locals.join(", ");var aliasCount=0;for(var alias in this.aliases){var node=this.aliases[alias];if(this.aliases.hasOwnProperty(alias)&&
node.children&&node.referenceCount>1){varDeclarations+=", alias"+ ++aliasCount+"="+alias;node.children[0]="alias"+aliasCount}}var params=["container","depth0","helpers","partials","data"];if(this.useBlockParams||this.useDepths)params.push("blockParams");if(this.useDepths)params.push("depths");var source=this.mergeSource(varDeclarations);if(asObject){params.push(source);return Function.apply(this,params)}else return this.source.wrap(["function(",params.join(","),") {\n  ",source,"}"])},mergeSource:function mergeSource(varDeclarations){var isSimple=
this.environment.isSimple,appendOnly=!this.forceBuffer,appendFirst=undefined,sourceSeen=undefined,bufferStart=undefined,bufferEnd=undefined;this.source.each(function(line){if(line.appendToBuffer){if(bufferStart)line.prepend("  + ");else bufferStart=line;bufferEnd=line}else{if(bufferStart){if(!sourceSeen)appendFirst=true;else bufferStart.prepend("buffer += ");bufferEnd.add(";");bufferStart=bufferEnd=undefined}sourceSeen=true;if(!isSimple)appendOnly=false}});if(appendOnly)if(bufferStart){bufferStart.prepend("return ");
bufferEnd.add(";")}else{if(!sourceSeen)this.source.push('return "";')}else{varDeclarations+=", buffer = "+(appendFirst?"":this.initializeBuffer());if(bufferStart){bufferStart.prepend("return buffer + ");bufferEnd.add(";")}else this.source.push("return buffer;")}if(varDeclarations)this.source.prepend("var "+varDeclarations.substring(2)+(appendFirst?"":";\n"));return this.source.merge()},blockValue:function blockValue(name){var blockHelperMissing=this.aliasable("container.hooks.blockHelperMissing"),
params=[this.contextName(0)];this.setupHelperArgs(name,0,params);var blockName=this.popStack();params.splice(1,0,blockName);this.push(this.source.functionCall(blockHelperMissing,"call",params))},ambiguousBlockValue:function ambiguousBlockValue(){var blockHelperMissing=this.aliasable("container.hooks.blockHelperMissing"),params=[this.contextName(0)];this.setupHelperArgs("",0,params,true);this.flushInline();var current=this.topStack();params.splice(1,0,current);this.pushSource(["if (!",this.lastHelper,
") { ",current," = ",this.source.functionCall(blockHelperMissing,"call",params),"}"])},appendContent:function appendContent(content){if(this.pendingContent)content=this.pendingContent+content;else this.pendingLocation=this.source.currentLocation;this.pendingContent=content},append:function append(){if(this.isInline()){this.replaceStack(function(current){return[" != null ? ",current,' : ""']});this.pushSource(this.appendToBuffer(this.popStack()))}else{var local=this.popStack();this.pushSource(["if (",
local," != null) { ",this.appendToBuffer(local,undefined,true)," }"]);if(this.environment.isSimple)this.pushSource(["else { ",this.appendToBuffer("''",undefined,true)," }"])}},appendEscaped:function appendEscaped(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function getContext(depth){this.lastContext=depth},pushContext:function pushContext(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function lookupOnContext(parts,
falsy,strict,scoped){var i=0;if(!scoped&&this.options.compat&&!this.lastContext)this.push(this.depthedLookup(parts[i++]));else this.pushContext();this.resolvePath("context",parts,i,falsy,strict)},lookupBlockParam:function lookupBlockParam(blockParamId,parts){this.useBlockParams=true;this.push(["blockParams[",blockParamId[0],"][",blockParamId[1],"]"]);this.resolvePath("context",parts,1)},lookupData:function lookupData(depth,parts,strict){if(!depth)this.pushStackLiteral("data");else this.pushStackLiteral("container.data(data, "+
depth+")");this.resolvePath("data",parts,0,true,strict)},resolvePath:function resolvePath(type,parts,i,falsy,strict){var _this=this;if(this.options.strict||this.options.assumeObjects){this.push(strictLookup(this.options.strict&&strict,this,parts,type));return}var len=parts.length;for(;i<len;i++)this.replaceStack(function(current){var lookup=_this.nameLookup(current,parts[i],type);if(!falsy)return[" != null ? ",lookup," : ",current];else return[" && ",lookup]})},resolvePossibleLambda:function resolvePossibleLambda(){this.push([this.aliasable("container.lambda"),
"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function pushStringParam(string,type){this.pushContext();this.pushString(type);if(type!=="SubExpression")if(typeof string==="string")this.pushString(string);else this.pushStackLiteral(string)},emptyHash:function emptyHash(omitEmpty){if(this.trackIds)this.push("{}");if(this.stringParams){this.push("{}");this.push("{}")}this.pushStackLiteral(omitEmpty?"undefined":"{}")},pushHash:function pushHash(){if(this.hash)this.hashes.push(this.hash);
this.hash={values:[],types:[],contexts:[],ids:[]}},popHash:function popHash(){var hash=this.hash;this.hash=this.hashes.pop();if(this.trackIds)this.push(this.objectLiteral(hash.ids));if(this.stringParams){this.push(this.objectLiteral(hash.contexts));this.push(this.objectLiteral(hash.types))}this.push(this.objectLiteral(hash.values))},pushString:function pushString(string){this.pushStackLiteral(this.quotedString(string))},pushLiteral:function pushLiteral(value){this.pushStackLiteral(value)},pushProgram:function pushProgram(guid){if(guid!=
null)this.pushStackLiteral(this.programExpression(guid));else this.pushStackLiteral(null)},registerDecorator:function registerDecorator(paramSize,name){var foundDecorator=this.nameLookup("decorators",name,"decorator"),options=this.setupHelperArgs(name,paramSize);this.decorators.push(["fn = ",this.decorators.functionCall(foundDecorator,"",["fn","props","container",options])," || fn;"])},invokeHelper:function invokeHelper(paramSize,name,isSimple){var nonHelper=this.popStack(),helper=this.setupHelper(paramSize,
name);var possibleFunctionCalls=[];if(isSimple)possibleFunctionCalls.push(helper.name);possibleFunctionCalls.push(nonHelper);if(!this.options.strict)possibleFunctionCalls.push(this.aliasable("container.hooks.helperMissing"));var functionLookupCode=["(",this.itemsSeparatedBy(possibleFunctionCalls,"||"),")"];var functionCall=this.source.functionCall(functionLookupCode,"call",helper.callParams);this.push(functionCall)},itemsSeparatedBy:function itemsSeparatedBy(items,separator){var result=[];result.push(items[0]);
for(var i=1;i<items.length;i++)result.push(separator,items[i]);return result},invokeKnownHelper:function invokeKnownHelper(paramSize,name){var helper=this.setupHelper(paramSize,name);this.push(this.source.functionCall(helper.name,"call",helper.callParams))},invokeAmbiguous:function invokeAmbiguous(name,helperCall){this.useRegister("helper");var nonHelper=this.popStack();this.emptyHash();var helper=this.setupHelper(0,name,helperCall);var helperName=this.lastHelper=this.nameLookup("helpers",name,"helper");
var lookup=["(","(helper = ",helperName," || ",nonHelper,")"];if(!this.options.strict){lookup[0]="(helper = ";lookup.push(" != null ? helper : ",this.aliasable("container.hooks.helperMissing"))}this.push(["(",lookup,helper.paramsInit?["),(",helper.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",helper.callParams)," : helper))"])},invokePartial:function invokePartial(isDynamic,name,indent){var params=[],options=this.setupParams(name,
1,params);if(isDynamic){name=this.popStack();delete options.name}if(indent)options.indent=JSON.stringify(indent);options.helpers="helpers";options.partials="partials";options.decorators="container.decorators";if(!isDynamic)params.unshift(this.nameLookup("partials",name,"partial"));else params.unshift(name);if(this.options.compat)options.depths="depths";options=this.objectLiteral(options);params.push(options);this.push(this.source.functionCall("container.invokePartial","",params))},assignToHash:function assignToHash(key){var value=
this.popStack(),context=undefined,type=undefined,id=undefined;if(this.trackIds)id=this.popStack();if(this.stringParams){type=this.popStack();context=this.popStack()}var hash=this.hash;if(context)hash.contexts[key]=context;if(type)hash.types[key]=type;if(id)hash.ids[key]=id;hash.values[key]=value},pushId:function pushId(type,name,child){if(type==="BlockParam")this.pushStackLiteral("blockParams["+name[0]+"].path["+name[1]+"]"+(child?" + "+JSON.stringify("."+child):""));else if(type==="PathExpression")this.pushString(name);
else if(type==="SubExpression")this.pushStackLiteral("true");else this.pushStackLiteral("null")},compiler:JavaScriptCompiler,compileChildren:function compileChildren(environment,options){var children=environment.children,child=undefined,compiler=undefined;for(var i=0,l=children.length;i<l;i++){child=children[i];compiler=new this.compiler;var existing=this.matchExistingProgram(child);if(existing==null){this.context.programs.push("");var index=this.context.programs.length;child.index=index;child.name=
"program"+index;this.context.programs[index]=compiler.compile(child,options,this.context,!this.precompile);this.context.decorators[index]=compiler.decorators;this.context.environments[index]=child;this.useDepths=this.useDepths||compiler.useDepths;this.useBlockParams=this.useBlockParams||compiler.useBlockParams;child.useDepths=this.useDepths;child.useBlockParams=this.useBlockParams}else{child.index=existing.index;child.name="program"+existing.index;this.useDepths=this.useDepths||existing.useDepths;
this.useBlockParams=this.useBlockParams||existing.useBlockParams}}},matchExistingProgram:function matchExistingProgram(child){for(var i=0,len=this.context.environments.length;i<len;i++){var environment=this.context.environments[i];if(environment&&environment.equals(child))return environment}},programExpression:function programExpression(guid){var child=this.environment.children[guid],programParams=[child.index,"data",child.blockParams];if(this.useBlockParams||this.useDepths)programParams.push("blockParams");
if(this.useDepths)programParams.push("depths");return"container.program("+programParams.join(", ")+")"},useRegister:function useRegister(name){if(!this.registers[name]){this.registers[name]=true;this.registers.list.push(name)}},push:function push(expr){if(!(expr instanceof Literal))expr=this.source.wrap(expr);this.inlineStack.push(expr);return expr},pushStackLiteral:function pushStackLiteral(item){this.push(new Literal(item))},pushSource:function pushSource(source){if(this.pendingContent){this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),
this.pendingLocation));this.pendingContent=undefined}if(source)this.source.push(source)},replaceStack:function replaceStack(callback){var prefix=["("],stack=undefined,createdStack=undefined,usedLiteral=undefined;if(!this.isInline())throw new _exception2["default"]("replaceStack on non-inline");var top=this.popStack(true);if(top instanceof Literal){stack=[top.value];prefix=["(",stack];usedLiteral=true}else{createdStack=true;var _name=this.incrStack();prefix=["((",this.push(_name)," = ",top,")"];stack=
this.topStack()}var item=callback.call(this,stack);if(!usedLiteral)this.popStack();if(createdStack)this.stackSlot--;this.push(prefix.concat(item,")"))},incrStack:function incrStack(){this.stackSlot++;if(this.stackSlot>this.stackVars.length)this.stackVars.push("stack"+this.stackSlot);return this.topStackName()},topStackName:function topStackName(){return"stack"+this.stackSlot},flushInline:function flushInline(){var inlineStack=this.inlineStack;this.inlineStack=[];for(var i=0,len=inlineStack.length;i<
len;i++){var entry=inlineStack[i];if(entry instanceof Literal)this.compileStack.push(entry);else{var stack=this.incrStack();this.pushSource([stack," = ",entry,";"]);this.compileStack.push(stack)}}},isInline:function isInline(){return this.inlineStack.length},popStack:function popStack(wrapped){var inline=this.isInline(),item=(inline?this.inlineStack:this.compileStack).pop();if(!wrapped&&item instanceof Literal)return item.value;else{if(!inline){if(!this.stackSlot)throw new _exception2["default"]("Invalid stack pop");
this.stackSlot--}return item}},topStack:function topStack(){var stack=this.isInline()?this.inlineStack:this.compileStack,item=stack[stack.length-1];if(item instanceof Literal)return item.value;else return item},contextName:function contextName(context){if(this.useDepths&&context)return"depths["+context+"]";else return"depth"+context},quotedString:function quotedString(str){return this.source.quotedString(str)},objectLiteral:function objectLiteral(obj){return this.source.objectLiteral(obj)},aliasable:function aliasable(name){var ret=
this.aliases[name];if(ret){ret.referenceCount++;return ret}ret=this.aliases[name]=this.source.wrap(name);ret.aliasable=true;ret.referenceCount=1;return ret},setupHelper:function setupHelper(paramSize,name,blockHelper){var params=[],paramsInit=this.setupHelperArgs(name,paramSize,params,blockHelper);var foundHelper=this.nameLookup("helpers",name,"helper"),callContext=this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : (container.nullContext || {})");return{params:params,paramsInit:paramsInit,
name:foundHelper,callParams:[callContext].concat(params)}},setupParams:function setupParams(helper,paramSize,params){var options={},contexts=[],types=[],ids=[],objectArgs=!params,param=undefined;if(objectArgs)params=[];options.name=this.quotedString(helper);options.hash=this.popStack();if(this.trackIds)options.hashIds=this.popStack();if(this.stringParams){options.hashTypes=this.popStack();options.hashContexts=this.popStack()}var inverse=this.popStack(),program=this.popStack();if(program||inverse){options.fn=
program||"container.noop";options.inverse=inverse||"container.noop"}var i=paramSize;while(i--){param=this.popStack();params[i]=param;if(this.trackIds)ids[i]=this.popStack();if(this.stringParams){types[i]=this.popStack();contexts[i]=this.popStack()}}if(objectArgs)options.args=this.source.generateArray(params);if(this.trackIds)options.ids=this.source.generateArray(ids);if(this.stringParams){options.types=this.source.generateArray(types);options.contexts=this.source.generateArray(contexts)}if(this.options.data)options.data=
"data";if(this.useBlockParams)options.blockParams="blockParams";return options},setupHelperArgs:function setupHelperArgs(helper,paramSize,params,useRegister){var options=this.setupParams(helper,paramSize,params);options=this.objectLiteral(options);if(useRegister){this.useRegister("options");params.push("options");return["options=",options]}else if(params){params.push(options);return""}else return options}};(function(){var reservedWords=("break else new var"+" case finally return void"+" catch for switch while"+
" continue function this with"+" default if throw"+" delete in try"+" do instanceof typeof"+" abstract enum int short"+" boolean export interface static"+" byte extends long super"+" char final native synchronized"+" class float package throws"+" const goto private transient"+" debugger implements protected volatile"+" double import public let yield await"+" null true false").split(" ");var compilerWords=JavaScriptCompiler.RESERVED_WORDS={};for(var i=0,l=reservedWords.length;i<l;i++)compilerWords[reservedWords[i]]=
true})();JavaScriptCompiler.isValidJavaScriptVariableName=function(name){return!JavaScriptCompiler.RESERVED_WORDS[name]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(name)};function strictLookup(requireTerminal,compiler,parts,type){var stack=compiler.popStack(),i=0,len=parts.length;if(requireTerminal)len--;for(;i<len;i++)stack=compiler.nameLookup(stack,parts[i],type);if(requireTerminal)return[compiler.aliasable("container.strict"),"(",stack,", ",compiler.quotedString(parts[i]),")"];else return stack}exports["default"]=
JavaScriptCompiler;module.exports=exports["default"]},function(module,exports,__webpack_require__){exports.__esModule=true;var _utils=__webpack_require__(5);var SourceNode=undefined;try{if(false){var SourceMap=require("source-map");SourceNode=SourceMap.SourceNode}}catch(err){}if(!SourceNode){SourceNode=function(line,column,srcFile,chunks){this.src="";if(chunks)this.add(chunks)};SourceNode.prototype={add:function add(chunks){if(_utils.isArray(chunks))chunks=chunks.join("");this.src+=chunks},prepend:function prepend(chunks){if(_utils.isArray(chunks))chunks=
chunks.join("");this.src=chunks+this.src},toStringWithSourceMap:function toStringWithSourceMap(){return{code:this.toString()}},toString:function toString(){return this.src}}}function castChunk(chunk,codeGen,loc){if(_utils.isArray(chunk)){var ret=[];for(var i=0,len=chunk.length;i<len;i++)ret.push(codeGen.wrap(chunk[i],loc));return ret}else if(typeof chunk==="boolean"||typeof chunk==="number")return chunk+"";return chunk}function CodeGen(srcFile){this.srcFile=srcFile;this.source=[]}CodeGen.prototype=
{isEmpty:function isEmpty(){return!this.source.length},prepend:function prepend(source,loc){this.source.unshift(this.wrap(source,loc))},push:function push(source,loc){this.source.push(this.wrap(source,loc))},merge:function merge(){var source=this.empty();this.each(function(line){source.add(["  ",line,"\n"])});return source},each:function each(iter){for(var i=0,len=this.source.length;i<len;i++)iter(this.source[i])},empty:function empty(){var loc=this.currentLocation||{start:{}};return new SourceNode(loc.start.line,
loc.start.column,this.srcFile)},wrap:function wrap(chunk){var loc=arguments.length<=1||arguments[1]===undefined?this.currentLocation||{start:{}}:arguments[1];if(chunk instanceof SourceNode)return chunk;chunk=castChunk(chunk,this,loc);return new SourceNode(loc.start.line,loc.start.column,this.srcFile,chunk)},functionCall:function functionCall(fn,type,params){params=this.generateList(params);return this.wrap([fn,type?"."+type+"(":"(",params,")"])},quotedString:function quotedString(str){return'"'+(str+
"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function objectLiteral(obj){var pairs=[];for(var key in obj)if(obj.hasOwnProperty(key)){var value=castChunk(obj[key],this);if(value!=="undefined")pairs.push([this.quotedString(key),":",value])}var ret=this.generateList(pairs);ret.prepend("{");ret.add("}");return ret},generateList:function generateList(entries){var ret=this.empty();for(var i=
0,len=entries.length;i<len;i++){if(i)ret.add(",");ret.add(castChunk(entries[i],this))}return ret},generateArray:function generateArray(entries){var ret=this.generateList(entries);ret.prepend("[");ret.add("]");return ret}};exports["default"]=CodeGen;module.exports=exports["default"]}])});
function TermApi(){var _ref=this;var _psId=null;var _jsroManager=null;var _jsro=null;var _term=null;var _waitCallbackSuccess,_waitCallbackFailed=null;var _screen=null;var _screens=[];var _waitTimer=null;var _xsystem=false;var _xwait=false;var _lastHostUpdateCount=0;var _externalEvents={};var _lastScreenNumber=-1;var _screenNumberLock=-1;var _stateData={"data":null,"source":null};var _newDataCount=0;var _lastSendCursorPos=1;var _lastTopRow=1;var _lastCursorPos=0;var _lastScreenLength=0;var _bufferRange=
{"start":-1,"end":0};var _lastBufferRange={"start":-1,"end":0};var _syncStatus={PENDING:0,SENT:1,COMPLETED:2};var _syncState=_syncStatus.PENDING;var _minScreenDef={"number":1,"cursorPos":1,"colCount":1,"rowCount":1,"text":""};var _minTermDef={"topRow":1,"cursorPos":1,"screenTextLen":0,"lastSendCursorPos":1,"sbCount":0,"sbIndex":0};function initialize(){if(Thinfinity.JsROManager)if(_jsroManager==null)_jsroManager=new Thinfinity.JsROManager({"events":{"onCollectionUpdate":function(collection){fireEvent("querySessions",
querySessions())}}})}function isLocked(){return _xsystem||_xwait}function checkWait(){if(_waitCallbackSuccess){if(_waitTimer){clearTimeout(_waitTimer);_waitTimer=null}_waitCallbackSuccess();_waitCallbackSuccess=null}}function on(event,callback){if(!_externalEvents[event])_externalEvents[event]=[];off(event,callback);_externalEvents[event].push({owner:this,callback:callback})}function off(event,callback){if(!_externalEvents[event])return;for(var n=0;n<_externalEvents[event].length;n++){var obj=_externalEvents[event][n];
if(!callback||callback==obj.callback){_externalEvents[event].splice(n,1);break}}}function fireEvent(event,args){if(_externalEvents[event])_externalEvents[event].forEach(function(obj){obj.callback(args)})}function setState(value){function addProperty(data,source,name){Object.defineProperty(data,name,{"enumerable":true,"configurable":false,"get":function(){return source[name]},"set":function(value){source[name]=value;if(_term)_term.stateData=JSON.stringify(_stateData.source)}})}function setProperties(data,
source){for(var name in source)if(data[name]!=undefined)data[name]=source[name];else addProperty(data,source,name);if(_term)_term.stateData=JSON.stringify(source)}if(!value&&_term&&_term.stateData)value=_term.stateData;if(value){_stateData.source=JSON.parse(value.substr(0,1)=="-"?value.substr(1):value);_stateData.data={}}if(_stateData.source)setProperties(_stateData.data,_stateData.source)}function topRow(){return!_term?1:_term.topRow}function topPos(){return!_term||!_screen?0:(_term.topRow-1)*_screen.colCount}
function screenTextLen(){return!_screen?0:_screen.colCount*_screen.rowCount}function connectPS(psId,success,failure,disconnect){_psId=psId;var successCallback=success;_jsro=new Thinfinity.JsRO({"switchHost":true,"hostId":psId,"events":{"connect":function(data){},"failure":function(data){_term=null;_screen=null;if(failure)try{failure(data)}catch(error){}},"disconnect":function(data){_term=null;_screen=null;if(disconnect)try{disconnect(data)}catch(error){}},"sendCommand":function(obj,data){if(helper.object.existsPath(_jsro,
obj.cmd))try{_jsro[obj.cmd](data)}catch(error){helper.console.error(error.message)}}}});_jsro.on("model:term","created",function(obj){if(_syncState==_syncStatus.PENDING){_jsro.sendCommand({cmd:"synchronize"});_syncState=_syncStatus.SENT}_term=_jsro.model.term;helper.object.merge(_minTermDef,_term,false);var screen=null;for(var i=0;i<_term.sbCount;i++){var newIdx=(i+(_term.sbIndex+1))%_term.sbCount;screen=_term["sb_"+newIdx];if(!screen.text64)continue;screen.text=atob(screen.text64);screen.locked=
false;_screens.push(screen)}if(screen!=null)_screen=screen;setState();if(successCallback)successCallback(_jsro);if(typeof _term.topRow!="undefined")_lastTopRow=_term.topRow;if(_screens.length>0&&_term.connected)screenChange(_screens[_screens.length-1])});_jsro.on("term","onConnect",function(expired){_xsystem=false;_xwait=false;setScreenLock();fireEvent("connect")});_jsro.on("term","onConnectFail",function(expired){_xsystem=false;_xwait=false;setScreenLock();checkWait();fireEvent("connectfail")});
_jsro.on("term","onDisconnect",function(expired){_xsystem=false;_xwait=false;_syncState=_syncStatus.PENDING;setScreenLock();checkWait();if(disconnect)try{disconnect(data)}catch(error){}fireEvent("disconnect")});_jsro.on("model:cursorPos","changed",function(obj){_screen.cursorPos=_term.cursorPos});_jsro.on("model:sbIndex","changed",function(obj){if(_term.sbCount==1)return;var tScreen=_term["sb_"+obj.value];tScreen.text=atob(tScreen.text64);_screens.push(tScreen);if(_screens.length>_term.sbCount)_screens.splice(0,
1);screenChange(tScreen)});_jsro.on("model:sb_0","changed",function(obj){if(_term.sbCount==1){var tScreen=_term["sb_0"];tScreen.text=atob(tScreen.text64);_screens.push(tScreen);screenChange(tScreen);if(tScreen.type=="VT"&&_syncState==_syncStatus.SENT)processScreenChunk(tScreen.text,1)}});_jsro.on("model:stateData","changed",function(obj){setState()});_jsro.on("term","onFieldModified",function(fld){var text=atob(fld.text64);fld.text=text;var buf1=_screen.text.slice(0,(fld.pos-1)*2);if(buf1.length<
(fld.pos-1)*2)buf1=buf1+" ".repeat((fld.pos-1)*2-buf1.length);_screen.text=buf1+text+_screen.text.slice((fld.pos-1)*2+text.length);fireEvent("fldUpdate",fld)});_jsro.on("term","onEndVTStream",function(){if(!_screen)return;fireEvent("endVTStream",false);_lastSendCursorPos=_screen.cursorPos;if(_newDataCount){function checkNewData(){if(!_newDataCount)checkWait()}setTimeout(checkNewData,100)}if(_bufferRange.start!=-1){_lastBufferRange=JSON.parse(JSON.stringify(_bufferRange));_bufferRange={"start":-1,
"end":0}}_newDataCount=0});_jsro.on("term","onVTData",function(data){if(!_screen)return;if(data.len){var newPos=(data.pos-1)*2;var text=atob(data.text64);data.text=text;processScreenChunk(text,newPos)}else{data.text="";data.len=0;data.pos=_screen?_screen.cursorPos:1}_screen.cursorPos=data.pos;fireEvent("vtData",data);if(_lastTopRow!==_term.topRow||Math.abs(_screen.text.length-_lastScreenLength)>4||data.len>2&&Math.abs(_lastCursorPos,_screen.cursorPos)>1){_lastTopRow=_term.topRow;_newDataCount++}_lastCursorPos=
_screen.cursorPos;_lastScreenLength=_screen.text.length});_jsro.on("term","onInputEnable",function(){fireEvent("inputEnabled",true)});_jsro.on("term","onInputDisable",function(){fireEvent("inputEnabled",false)});_jsro.on("term","onSystemLock",function(){_xsystem=true;_xwait=false;if(!_screen)return;setScreenLock();_screenNumberLock=_lastScreenNumber;fireEvent("systemLock",_xsystem)});_jsro.on("term","onSystemUnlock",function(){if(!_xsystem&&(!_screen||_screen.type!=="VT"))return;_xsystem=false;_xwait=
false;setScreenLock();fireEvent("systemUnlock",_xsystem);checkWait();if(_screen&&_screenNumberLock==_screen.number)return});_jsro.start();return 0}function screenChange(screen){if(_lastScreenNumber==screen.number)return;_screen=helper.object.merge(_minScreenDef,screen,false);_lastScreenNumber=_screen.number;_lastCursorPos=_screen.cursorPos;_xsystem=_screen.locked;fireEvent("screenChange")}function processScreenChunk(text,newPos){_syncState=_syncStatus.COMPLETED;var buf1=_screen.text.slice(0,newPos);
if(buf1.length<newPos)buf1=buf1+" ".repeat(newPos-buf1.length);_screen.text=buf1+text+_screen.text.slice(newPos+text.length);if(newPos<_bufferRange.start||_bufferRange.start==-1)_bufferRange.start=newPos;if(newPos+text.length>_bufferRange.end)_bufferRange.end=newPos+text.length}function disconnectPS(){_jsro.__dispose();_jsro=null}function setScreenLock(){if(isLocked())_screen.locked=true;else _screens.forEach(function(screen){screen.locked=false})}function sendKey(key){_newDataCount=0;_lastSendCursorPos=
_screen.cursorPos;_term.sendKey(key)}function wait(success,failed){var rc=1;var result="";if(_term){rc=0;if(!isLocked()&&_newDataCount)success();else{if(failed&&_params.wait==_const.NWAIT){failed();return}_waitCallbackSuccess=success;if(failed&&_params.wait==_const.TWAIT)_waitTimer=setTimeout(failed,6E4)}}return{"returnCode":rc}}function formatText(text,colCount){if(!colCount&&_screen)colCount=_screen.colCount;var result="";for(var i=0;i<text.length;i=i+colCount){var row=text.substr(i,colCount);result=
result+row+"\n"}return result}function querySessions(){var sessions=[];var collection=Thinfinity.JsROManager().getHostCollection();for(var i=0;i<collection.length;i++)sessions.push({"shortName":collection[i].name,"longName":collection[i].description});var rc=0;return{"returnCode":rc,"sessions":sessions}}function refresh(){if(_term)_term.refresh()}function getCursorPos(){return _term?_term.cursorPos:1}function setCursorPos(pos){if(_term)_term.cursorPos=pos}function setText(input,position){if(_term)_term.setText(input,
position)}function isConnected(){return _term&&_term.connected}function available(){if(_jsroManager){var hostCollection=_jsroManager.getHostCollection();return hostCollection&&hostCollection.length>0}else return false}function bufferStart(){return _bufferRange.start!=-1?_bufferRange.start/2+1:_lastBufferRange.start!=-1?_lastBufferRange.start/2+1:-1}function bufferEnd(){return _bufferRange.end!=0?_bufferRange.end/2:_lastBufferRange.end!=0?_lastBufferRange.end/2:0}function bufferLength(){var start=
bufferStart();return start==-1?0:bufferEnd()-start+1}initialize();Object.defineProperty(_ref,"connectPS",{"enumerable":true,"configurable":false,"writable":false,"value":connectPS});Object.defineProperty(_ref,"disconnectPS",{"enumerable":true,"configurable":false,"writable":false,"value":disconnectPS});Object.defineProperty(_ref,"querySessions",{"enumerable":true,"configurable":false,"writable":false,"value":querySessions});Object.defineProperty(_ref,"sendKey",{"enumerable":true,"configurable":false,
"writable":false,"value":sendKey});Object.defineProperty(_ref,"cursorPos",{"enumerable":true,"configurable":false,"get":getCursorPos,"set":setCursorPos});Object.defineProperty(_ref,"lastSendCursorPos",{"enumerable":true,"configurable":false,"get":function(){return _lastSendCursorPos}});Object.defineProperty(_ref,"psId",{"enumerable":true,"configurable":false,"get":function(){return _psId}});Object.defineProperty(_ref,"on",{"enumerable":true,"configurable":false,"value":on});Object.defineProperty(_ref,
"off",{"enumerable":true,"configurable":false,"value":off});Object.defineProperty(_ref,"jsro",{"enumerable":true,"configurable":false,"get":function(){return _jsro}});Object.defineProperty(_ref,"refresh",{"enumerable":true,"configurable":false,"value":refresh});Object.defineProperty(_ref,"isLocked",{"enumerable":true,"configurable":false,"writable":false,"value":isLocked});Object.defineProperty(_ref,"isConnected",{"enumerable":true,"configurable":false,"writable":false,"value":isConnected});Object.defineProperty(_ref,
"type",{"enumerable":true,"configurable":false,"get":function(){return _term.type}});Object.defineProperty(_ref,"xsystem",{"enumerable":true,"configurable":false,"get":function(){return _xsystem}});Object.defineProperty(_ref,"xwait",{"enumerable":true,"configurable":false,"get":function(){return _xwait}});Object.defineProperty(_ref,"wait",{"enumerable":true,"configurable":false,value:wait});Object.defineProperty(_ref,"screen",{"enumerable":true,"configurable":false,"get":function(){return _screen}});
Object.defineProperty(_ref,"topRow",{"enumerable":true,"configurable":false,"get":function(){return topRow()}});Object.defineProperty(_ref,"topPos",{"enumerable":true,"configurable":false,"get":function(){return topPos()}});Object.defineProperty(_ref,"screenTextLen",{"enumerable":true,"configurable":false,"get":function(){return screenTextLen()}});Object.defineProperty(_ref,"screens",{"enumerable":true,"configurable":false,"get":function(){return _screens}});Object.defineProperty(_ref,"setText",{"enumerable":true,
"configurable":false,"writable":false,"value":setText});Object.defineProperty(_ref,"formatText",{"enumerable":true,"configurable":false,"writable":false,"value":formatText});Object.defineProperty(_ref,"state",{"enumerable":true,"configurable":false,"get":function(){return _stateData.data},"set":function(value){setState(JSON.stringify(value))}});Object.defineProperty(_ref,"available",{"enumerable":true,"configurable":false,"writable":false,"value":available});Object.defineProperty(_ref,"bufferStart",
{"enumerable":true,"configurable":false,"get":bufferStart});Object.defineProperty(_ref,"bufferEnd",{"enumerable":true,"configurable":false,"get":bufferEnd});Object.defineProperty(_ref,"bufferLength",{"enumerable":true,"configurable":false,"get":bufferLength})}
(function(){function HLLAPI(termapi){_const={"STRLEN":0,"STREOT":1,"EOT":0,"SRCHALL":0,"SRCHFROM":1,"SRCHFRWD":0,"SRCHBKWD":1,"NOATTRB":0,"ATTRB":1,"NULLATTRB":2,"FPAUSE":0,"IPAUSE":1,"NOQUIET":0,"QUIET":1,"TIMEOUT":0,"ESC":"@","AUTORESET":0,"NORESET":1,"CONLOG":0,"CONPHYS":1,"TWAIT":0,"LWAIT":1,"NWAIT":2,"NOEAB":0,"EAB":1,"NOXLATE":0,"XLATE":1,"BLANK":0,"NOBLANK":1,"DISPLAY":0,"NODISPLAY":1,"NOPUTEAB":0,"PUTEAB":1,"RETRY":0,"NORETRY":1};var _ref=this;var _termapi=termapi;var _externalEvents={};var _psconnected=
false;var _lastScreenNumber=-1;var _lastTopRow=1;var _lastCursorPos=0;var _lastScreenLength=0;var _pendingPsUpdate=false;var _params={searchFrom:_const.SRCHALL,searchDir:_const.SRCHFRWD,str:_const.STRLEN,eot:0,pause:_const.FPAUSE,attrb:_const.NOATTRB,sndrcv:_const.NOQUIET,timeout:0,esc:"@",reset:_const.AUTORESET,wait:_const.TWAIT,eab:_const.NOEAB,xlate:_const.NOXLATE,blank:_const.BLANK,display:_const.DISPLAY,puteab:_const.NOPUTEAB,retry:_const.RETRY};function initialize(){if(!_termapi)_termapi=new TermApi;
_termapi.on("querySessions",function(obj){fireEvent("querySessions",obj)})}function on(event,callback){if(!_externalEvents[event])_externalEvents[event]=[];off(event,callback);_externalEvents[event].push({owner:this,callback:callback})}function off(event,callback){if(!_externalEvents[event])return;for(var n=0;n<_externalEvents[event].length;n++){var obj=_externalEvents[event][n];if(!callback||callback==obj.callback){_externalEvents[event].splice(n,1);break}}}function fireEvent(event,args){if(_externalEvents[event])_externalEvents[event].forEach(function(obj){obj.callback(args)})}
function fillParams(params){if(!params)params={};for(var o in _params)if(typeof params[o]=="undefined")params[o]=_params[o];return params}function connectPresentationSpace(psId,success,failure,disconnect){_psconnected=false;_termapi.on("connect",function(){fireEvent("oiaUpdate",false)});_termapi.on("connectfail",function(){fireEvent("oiaUpdate",false)});_termapi.on("disconnect",function(){fireEvent("oiaUpdate",false)});_termapi.on("screenChange",function(){if(_lastScreenNumber==_termapi.screen.number)return;
var firstscreen=_lastScreenNumber==-1;_psconnected=true;_lastScreenNumber=_termapi.screen.number;fireEvent("psUpdate",_termapi.screen);if(firstscreen)fireEvent("oiaUpdate",_termapi.isLocked());_lastCursorPos=_termapi.screen.cursorPos;_lastScreenLength=_termapi.screen.text.length;_lastTopRow=_termapi.topRow});_termapi.on("fldUpdate",function(fld){fireEvent("fldUpdate",fld)});_termapi.on("endVTStream",function(fld){if(_pendingPsUpdate){fireEvent("psUpdate",_termapi.screen);_pendingPsUpdate=false}});
_termapi.on("vtData",function(data){if(_lastTopRow!==_termapi.topRow||Math.abs(_termapi.screen.text.length-_lastScreenLength)>4||data.len>2&&Math.abs(_lastCursorPos,_termapi.screen.cursorPos)>1){_lastTopRow=_termapi.topRow;_pendingPsUpdate=true}else{data.pos=data.pos-_termapi.topPos;fireEvent("fldUpdate",data)}_lastCursorPos=_termapi.screen.cursorPos;_lastScreenLength=_termapi.screen.text.length});_termapi.on("systemLock",function(xsystem){fireEvent("oiaUpdate",xsystem)});_termapi.on("systemUnlock",
function(xsystem){fireEvent("oiaUpdate",xsystem)});return _termapi.connectPS(psId,function(obj){_psconnected=true;success(obj)},failure,disconnect)}function convertPosition(row,col){var rc=0;var pos=0;if(row&&col)if(row>_termapi.screen.rowCount||col>_termapi.screen.colCount)rc=1;else pos=col+(row-1)*_termapi.screen.colCount;else{pos=row;col=0;if(pos<0||pos>_termapi.screenTextLen)rc=1;else{row=round(pos/_termapi.screen.colCount);col=pos-(row-1)*_termapi.screen.colCount}}return{rc:rc,pos:pos,row:row,
col:col}}function disconnectPresentationSpace(){_psconnected=false;_termapi.disconnectPS()}function filterText(text,params){params=fillParams(params);var result="";var eab;for(var i=0;i<text.length;i++){var c=text[i];if(i%2==1){eab=text[i-1].charCodeAt(0);if(c.charCodeAt(0)==0&&(params.blank==_const.BLANK||params.attrb==_const.NOATTRB))c=" ";if((eab&255)==255&&params.attrb==_const.NOATTRB)c=" ";result=result+c}else if(params.eab==_const.EAB)result=result+c}return result}function isConnected(){return _psconnected&&
_termapi.isConnected()}function copyPresentationSpace(params){params=fillParams(params);var rc=1;var result="";if(isConnected()){rc=0;if(_termapi.screen&&_termapi.screen.text)result=filterText(_termapi.screen.text.substr(_termapi.topPos*2),params);if(_termapi.isLocked())rc=5;if(_termapi.xwait)rc=4}return{"data":result,"returnCode":rc,"length":result.length}}function searchPresentationSpace(data,from,params){params=fillParams(params);var start=from-1;if(params.searchFrom==_const.SRCHALL)if(params.searchDir==
_const.SRCHFRWD)start=0;else start=_termapi.screen.colCount*_termapi.screen.colCount;var fp=0;var ps=copyPresentationSpace({blank:_const.BLANK,attrb:_const.NOATTRB,eab:_const.NOEAB});var rc=ps.returnCode;if(rc==0){if(params.searchDir==_const.SRCHFRWD)fp=ps.data.indexOf(data,start);else fp=ps.data.lastIndexOf(data,start);if(fp>=0)rc=0;else rc=24}return{"returnCode":rc,"position":fp+1}}function queryCursorLocation(){return{"returnCode":isConnected()?0:1,"position":isConnected()?_termapi.cursorPos-_termapi.topPos:
0}}function copyPresentationSpaceToString(pos,len,params){params=fillParams(params);var result=copyPresentationSpace({blank:_const.NOBLANK,attrb:_const.ATTRB,eab:_const.EAB});if(result.returnCode==0)if(pos<1||pos+len-1>_termapi.screenTextLen){result.returnCode=2;result.data=""}else{result.data=result.data.substr((pos-1)*2,len*2);result.data=filterText(result.data,params)}return{"returnCode":result.returnCode,"data":result.data,"length":result.data.length}}function pause(time,callback){return setTimeout(callback,
time)}function querySessionStatus(){return{"psId":_termapi.psId,"sessionType":"","rows":_termapi.screen.rowCount,"cols":_termapi.screen.colCount}}function getCurrentField(pos){var fp=pos;var max=_termapi.screenTextLen*2;var tPos=_termapi.topPos*2;var found=false;var i=(pos+1)%max;var inipos=(i+1)%max;var eab;while(i!=inipos){var c=_termapi.screen.text[i+tPos];if(i%2==1){eab=_termapi.screen.text[i+tPos-1].charCodeAt(0);if((eab&255)==255){fp=i-1;found=true;break}}i--;if(i==-1)i=max-1}if(!found)fp=-1;
return fp}function getFieldLength(pos){var max=_termapi.screenTextLen*2;var tPos=_termapi.topPos*2;var found=false;var len=0;var i=pos+2;var inipos=i-1;var eab;if(i==max)i=0;while(i!=inipos){len++;var c=_termapi.screen.text[i+tPos];if(i%2==1){eab=_termapi.screen.text[i+tPos-1].charCodeAt(0);if((eab&255)==255){len-=2;found=true;break}}i++;if(i==max)i=0}return len}function findFieldPosition(type,position){var result=findField(type,position);return{"returnCode":result.returnCode,"position":result.position}}
function findFieldLength(type,position){var result=findField(type,position);return{"returnCode":result.returnCode,"length":result.length}}function findField(type,position){var rc=1;var len=0;var fp=0;if(isConnected()){rc=0;var scrLen=_termapi.screenTextLen;var max=scrLen*2;if(type!="  "&&type!="T "&&type!="P "&&type!="N "&&type!="NP"&&type!="NU"&&type!="PP"&&type!="PU")rc=2;else if(position<0||position>scrLen)rc=7;else{fp=getCurrentField((position-1)*2);len=getFieldLength(fp);var firstfp=fp;var tPos=
_termapi.topPos*2;if(type[0]=="N")while(true){fp=getCurrentField((fp+len+2)%scrLen);if(fp!=-1){len=getFieldLength(fp);if(type[1]=="U"&&(_termapi.screen.text[fp+1+tPos].charCodeAt(0)&32)==0)break;if(type[1]=="P"&&(_termapi.screen.text[fp+1+tPos].charCodeAt(0)&32)==32)break;if(fp==firstfp){rc=24;break}}else{rc=24;break}}else if(type[0]=="P")while(true){fp=getCurrentField((fp-4)%max);if(fp!=-1){len=getFieldLength(fp);if(type[1]=="U"&&(_termapi.screen.text[fp+1+tPos].charCodeAt(0)&32)==0)break;if(type[1]==
"P"&&(_termapi.screen.text[fp+1+tPos].charCodeAt(0)&32)==32)break;if(fp==firstfp){rc=24;break}}else{rc=24;break}}attr=_termapi.screen.text[fp+1+tPos].charCodeAt(0);fp=(fp/2+1)%scrLen+1;len=len/2;if(len==0)rc=28}}return{"returnCode":rc,"position":fp,"length":len,"attr":attr,"data":rc==0&&len>0?copyPresentationSpaceToString(fp,len,{blank:_const.BLANK,attrb:_const.NOATTRB,eab:_const.NOEAB}).data:""}}function copyStringToPresentationSpace(input,position,params){var rc=1;var result="";if(isConnected()){params=
fillParams(params);rc=0;_termapi.setText(input,position);if(_termapi.screen)_termapi.screen.outdated=true}return{"returnCode":rc}}function copyStringToField(input,position,params){params=fillParams(params);var result=findField("  ",position);if(result.returnCode==0)if((_termapi.screen.text[(result.position-1)*2-1+_termapi.topPos*2].charCodeAt(0)&32)==0)result=copyStringToPresentationSpace(input,position,params);else result.returnCode=5;return{"returnCode":result.returnCode}}function copyFieldToString(position,
length,params){var field=findField("  ",position);var data="";var len=!length||length>field.length?field.length:length;var rc=field.returnCode;if(rc==0){params=fillParams(params);var result=copyPresentationSpaceToString(field.position,len,{blank:params.blank,attrb:params.attrb,eab:params.eab});rc=result.returnCode;data=result.data}return{"returnCode":rc,"length":len,"data":data}}function setCursor(pos){if(isConnected())_termapi.cursorPos=pos}function sendKey(key){var rc=1;var result="";if(isConnected()){rc=
0;var idx=key.lastIndexOf(_params.esc);_xwait=idx>=0&&key.length>idx+1;idx=key.lastIndexOf(_params.esc);_termapi.sendKey(key)}return{"returnCode":rc}}initialize();Object.defineProperty(_ref,"connectPresentationSpace",{"enumerable":true,"configurable":false,"writable":false,"value":connectPresentationSpace});Object.defineProperty(_ref,"copyFieldToString",{"enumerable":true,"configurable":false,"writable":false,"value":copyFieldToString});Object.defineProperty(_ref,"copyPresentationSpace",{"enumerable":true,
"configurable":false,"writable":false,"value":copyPresentationSpace});Object.defineProperty(_ref,"copyPresentationSpaceToString",{"enumerable":true,"configurable":false,"writable":false,"value":copyPresentationSpaceToString});Object.defineProperty(_ref,"copyStringToField",{"enumerable":true,"configurable":false,"writable":false,"value":copyStringToField});Object.defineProperty(_ref,"copyStringToPresentationSpace",{"enumerable":true,"configurable":false,"writable":false,"value":copyStringToPresentationSpace});
Object.defineProperty(_ref,"disconnectPresentationSpace",{"enumerable":true,"configurable":false,"writable":false,"value":disconnectPresentationSpace});Object.defineProperty(_ref,"findField",{"enumerable":true,"configurable":false,"writable":false,"value":findField});Object.defineProperty(_ref,"findFieldPosition",{"enumerable":true,"configurable":false,"writable":false,"value":findFieldPosition});Object.defineProperty(_ref,"findFieldLength",{"enumerable":true,"configurable":false,"writable":false,
"value":findFieldLength});Object.defineProperty(_ref,"pause",{"enumerable":true,"configurable":false,"writable":false,"value":pause});Object.defineProperty(_ref,"queryCursorLocation",{"enumerable":true,"configurable":false,"writable":false,"value":queryCursorLocation});Object.defineProperty(_ref,"querySessionStatus",{"enumerable":true,"configurable":false,"writable":false,"value":querySessionStatus});Object.defineProperty(_ref,"querySessions",{"enumerable":true,"configurable":false,"writable":false,
"value":_termapi.querySessions});Object.defineProperty(_ref,"searchPresentationSpace",{"enumerable":true,"configurable":false,"writable":false,"value":searchPresentationSpace});Object.defineProperty(_ref,"sendKey",{"enumerable":true,"configurable":false,"writable":false,"value":sendKey});Object.defineProperty(_ref,"setCursor",{"enumerable":true,"configurable":false,"writable":false,"value":setCursor});Object.defineProperty(_ref,"wait",{"enumerable":true,"configurable":false,"writable":false,"value":_termapi.wait});
Object.defineProperty(_ref,"on",{"enumerable":true,"configurable":false,"value":on});Object.defineProperty(_ref,"off",{"enumerable":true,"configurable":false,"value":off});Object.defineProperty(_ref,"const",{"enumerable":true,"configurable":false,"writable":false,"value":_const});Object.defineProperty(_ref,"params",{"enumerable":true,"configurable":false,"get":function(){return _params}});Object.defineProperty(_ref,"convertPosition",{"enumerable":true,"configurable":false,"writable":false,"value":convertPosition})}
try{zScope!=undefined}catch(e){zScope={}}zScope.HLLAPI=HLLAPI})();
(function(){var _hostSurfer=null;var _wndTop=null;var _wndKey="__ # HostSurfer __";var _accessMode="window";function HS(args){var _ref=this;var _args={"view":{"id":"hs-view","binding":{"attribute":"hs-field","processTemplate":null},"cache":false,"manage":{"visibility":true,"blocking":true}},"term":{"id":null,"url":undefined,"float":null},"rules":{"baseUrl":null,"paths":undefined},"hllApi":null};var _screenRules=[];var _screenRuleNotMatchCallback=null;var _waitForObj=null;var _waitForTimeout=1E3;var _waitForTimer=
null;var _waitForLoop=false;var _hllapi=null;var _screens=[];var _lastScreenNumber=-1;var _lastWaitForScreenNumber=-1;var _lastPSUpdate=0;var _internalFieldSetting=false;var _externalEvents={};var _defaultRoute="";var _chainedAction=false;var _lastAction="";var _chainedScreens=[];var _ready=false;var _visible=null;var _ishost=false;var _loading=false;var _initialized=false;var _termapi=null;var _view=null;var _terminal=null;var _keypressListenerSet=false;var _inputDict={};var _baseUrl=null;var _gifurl=
"";var _eventsSet=null;var _divlocker=null;var _key={};var _checkRulesOnPsUpdate=false;var _screenNotificationDelay=false;var _screenNotificationTimer=null;var _presentationSpace={"connected":false,"isConnecting":false};function initialize(){if(_initialized)return;_initialized=true;helper.object.parseAttributes(_args,args,"MATCH");_hllapi=helper.object.getValue(_args,"hllApi",null);var onloadCallback=function(){if(!_hllapi){helper.console.log("hostsurfer.init !hllapi",arguments);_hllapi=new zScope.HLLAPI(_termapi);
if(_hllapi)connectPS(_hllapi.querySessions())}if(!_eventsSet){_hllapi.on("fldUpdate",onFldUpdate);_hllapi.on("psUpdate",onPsUpdate);_hllapi.on("oiaUpdate",onOiaUpdate);_hllapi.on("querySessions",connectPS);_eventsSet=true}};function loadTerminal(){var pUrl=helper.url.parseUrl(_args.term.url);if(pUrl.virtualPath.substr(pUrl.virtualPath.length-1,1)!="/")pUrl.virtualPath+="/";pUrl.parameters.push({"name":"norule","value":true});pUrl.parameters.push({"name":"caption","value":false});pUrl.parameters.push({"name":"menu",
"value":false});var emW=document.querySelector("iframe[id="+_args.term.id+"]");if(emW)emW.src=pUrl.toUrl();else addTerminalEmulator(pUrl.toUrl());setTimeout(onloadCallback,500)}_termapi=new TermApi;if(!_termapi.available())if(typeof _args.term.url!="undefined")if(document.readyState=="complete")loadTerminal();else document.addEventListener("readystatechange",function(){if(document.readyState=="complete")loadTerminal()});else if(typeof _args.term.id=="string")_terminal=document.getElementById(_args.term.id);
var script=document.querySelector('script[src$="terminal.api.min.js"]');if(!script)script=document.querySelector('script[src$="hostsurfer.js"]');var pUrl=helper.url.parseUrl(script.baseURI?script.baseURI:window.location.href);_baseUrl=pUrl.toUrl("-r-a-o");_gifurl=pUrl.toUrl("-r-a-vp")+"images/";helper.dom.ready(function(){if(_args.view)if(typeof _args.view.id=="string")_view=document.getElementById(_args.view.id);if(_view&&_view.style&&(!_args.view.manage||_args.view.manage.visibility)){on("showPage",
function(){if(_terminal)_terminal.style.display="none";_view=document.getElementById(_args.view.id);_view.style.display="block"});on("hidePage",function(){if(_terminal)_terminal.style.display="block";_view=document.getElementById(_args.view.id);_view.style.display="none"})}if(_view&&_view.style&&(!_args.view.manage||_args.view.manage.blocking)){_divlocker=helper.dom.appendJsonElement({"parentElement":document.body,"type":"div","attributes":{"style":"display:none;position: fixed;z-index: 1000;"+'background-image:url("'+
_gifurl+"loadajax.gif"+'");'+"background-repeat:no-repeat;background-position:center;"+"left: 0;bottom: 0;right: 0;top: 0;"}});on("pageLocked",function(){_divlocker.style.display="block"});on("pageUnlocked",function(){_divlocker.style.display="none"})}});loadRules(helper.object.getValue(_args,"rules.baseUrl",null),helper.object.getValue(_args,"rules.paths",null),onloadCallback)}function loadRules(baseUrl,paths,callback){if(baseUrl==null&&paths==null){callback();return}if(paths==null&&baseUrl!=null){paths=
[baseUrl];baseUrl=null;_loading=true}var xhrCount=0;for(var n=0;n<paths.length;n++){function xhrDone(){xhrCount++;if(xhrCount==paths.length){_loading=false;callback()}}var url=paths[n];if(baseUrl)url=baseUrl+url;if(url.indexOf(".js")==-1)url+=".js";xhrGet(url,function(text){try{eval(text)}catch(err){helper.console.error(err)}xhrDone()},function(err){helper.console.error(err);xhrDone()})}}function addTerminalEmulator(url){if(_args.term.float)new FloatingTerminal(url,_args.term.float);else{_terminal=
helper.dom.appendJsonElement({"parentElement":document.body,"type":"iframe","attributes":{"style":"width:100%;height:100%;border:0;","src":url}});_terminal.style.position="relative";_terminal.style.display="none"}}function on(event,callback){if(!_externalEvents[event])_externalEvents[event]=[];off(event,callback);_externalEvents[event].push({owner:this,callback:callback})}function off(event,callback){if(!_externalEvents[event])return;for(var n=0;n<_externalEvents[event].length;n++){var obj=_externalEvents[event][n];
if(!callback||callback==obj.callback){_externalEvents[event].splice(n,1);break}}}function fireEvent(event,args){if(_externalEvents[event])_externalEvents[event].forEach(function(obj){obj.callback(args)})}function connectPS(querySessions){if(_presentationSpace.connected||_presentationSpace.isConnecting)if(querySessions.sessions.length>0)return;else _presentationSpace.connected=false;if(querySessions.sessions.length>0&&querySessions.sessions[0].shortName.length==1){_presentationSpace.isConnecting=true;
_hllapi.connectPresentationSpace(querySessions.sessions[0].shortName,function(){_presentationSpace.connected=true;_presentationSpace.isConnecting=false;if(!_key.enter)switch(_termapi.type){case "3270":addSendProperties3270();break;case "VT":addSendPropertiesVT();break;default:addSendProperties5250();break}},function(){setTimeout(function(){connectPS(_hllapi.querySessions())},100)})}}function setVisible(value){if(_ishost)return;if(_visible!==value&&_termapi&&_termapi.jsro){if(value)fireEvent("showPage",
value);else fireEvent("hidePage",value);_termapi.jsro.sendCommand({cmd:"hsappmsg",data:{from:window.name,visible:value}});_visible=value}}function close(){if(_ishost)return;if(_termapi.jsro)_termapi.jsro.sendCommand({cmd:"hsappmsg",data:{from:window.name,close:true}})}function getCursorPos(){return _termapi.screen.cursorPos-_termapi.topPos}function getApps(){var lastScreen=getLastScreen();if(lastScreen.apply)return lastScreen.apply.apps;else return null}function getActions(){var lastScreen=getLastScreen();
if(lastScreen.apply)return lastScreen.apply.actions;else return null}function getData(){var lastScreen=getLastScreen();if(lastScreen.fields&&lastScreen.fields.data)return lastScreen.fields.data;else if(lastScreen.dynFields)return lastScreen.dynFields.data;else return null}function newScreen(insert){var screen={colCount:80,rowCount:25,rules:[],fields:null,dynFields:null};if(insert)_screens.splice(0,0,screen);else _screens.push(screen);if(_screens.length>10)_screens.splice(0,1);return screen}function getLastScreen(){if(_screens.length==
0)newScreen();return _screens[_screens.length-1]}function retrieveScreen(){if(_termapi.screens){var screen=_termapi.screens[_termapi.screens.length-_screens.length];genDynamicJson(screen,true);checkScreenRules(screen,false)}}function getPrevScreen(){var screen=null;if(_screens.length<2)retrieveScreen();if(_screens.length>1)screen=_screens[_screens.length-2];return screen}function getScreenPath(){var path="";_screens.forEach(function(screen){path+="."+screen.id});return path}function getPreviousScreenId(){var res=
"";if(_screens.length>=2){var prevscreen=_screens[_screens.length-2];if(prevscreen)res=prevscreen.id}return res}function updateField(fld){var fldnames=[];var text=_hllapi.copyPresentationSpaceToString(fld.pos,fld.len).data.trimRight();var screen=getLastScreen();for(var name in screen.fields.source)if(screen.fields.source[name]instanceof Array)screen.fields.source[name].forEach(function(srcObj){for(var name in srcObj)if(srcObj[name].pos<=fld.pos&&srcObj[name].pos+srcObj[name].len>fld.pos){_internalFieldSetting=
true;srcObj[name].value=text;fldnames.push(name);_internalFieldSetting=false}});else if(screen.fields.source[name].pos<=fld.pos&&screen.fields.source[name].pos+screen.fields.source[name].len>fld.pos){_internalFieldSetting=true;screen.fields.source[name].value=text;screen.fields.data[name]=text;fldnames.push(name);_internalFieldSetting=false}if(!_chainedAction)fireEvent("fldUpdate",fld);updateBind(fld,fldnames)}function genActionsFromTemplate(actions){var screen=getLastScreen();screen["actions"]=actions}
function genFieldsFromTemplate(template){var screen=getLastScreen();function addProperty(data,source,name){if(!data)data={};Object.defineProperty(data,name,{"enumerable":true,"configurable":false,set:function(value){if(_internalFieldSetting)return;if(source.set)value=source.set(value);if((source.attr&32)==0&&_termapi.type!=="VT")if(_hllapi.copyStringToPresentationSpace(value,source.pos).returnCode==0);},get:function(){if(source.get)return source.get(source.value);else return source.value}})}if(!screen.fields)screen.fields=
{data:null,source:null};template.forEach(function(field){if(field.items)if(field.fromRow&&field.toRow)if(field.match)for(var row=field.fromRow;row<=field.toRow;row++){var pos=(row-1)*screen.colCount+1;var value=_hllapi.copyPresentationSpaceToString(pos,screen.colCount);var re=new RegExp(field.match,"g");var m=null;var breakFlag=false;var text=value.data;while((m=re.exec(text))!=null){var srcObj={};var dataObj={};var add=false;if(m.index===re.lastIndex)re.lastIndex++;field.items.forEach(function(item){if(m[item.index]){var obj=
{pos:pos,len:item.len,value:m[item.index].trimRight(),attr:32,get:item.get,set:item.set};srcObj[item.name]=obj;addProperty(dataObj,srcObj[item.name],item.name);add=true}});if(field["break"]&&field["break"](dataObj)){breakFlag=true;break}if(add&&(!field.skip||!field.skip(dataObj))){if(!screen.fields.source[field.name])screen.fields.source[field.name]=[];screen.fields.source[field.name].push(srcObj);if(!screen.fields.data[field.name])screen.fields.data[field.name]=[];screen.fields.data[field.name].push(dataObj)}pos+=
re.lastIndex}if(breakFlag)break}else for(var row=field.fromRow;row<=field.toRow;row++){var srcObj={};var dataObj={};field.items.forEach(function(item){if(item.col&&item.len){var pos=item.col+(row-1)*screen.colCount;var value=_hllapi.copyPresentationSpaceToString(pos,item.len);var fld=_hllapi.findField("  ",pos);var obj={pos:pos,len:item.len,value:value.data.trimRight(),attr:fld.attr,get:item.get,set:item.set};srcObj[item.name]=obj;addProperty(dataObj,srcObj[item.name],item.name)}});if(field["break"]&&
field["break"](dataObj))break;if(!field.skip||!field.skip(dataObj)){if(!screen.fields.source[field.name])screen.fields.source[field.name]=[];screen.fields.source[field.name].push(srcObj);if(!screen.fields.data[field.name])screen.fields.data[field.name]=[];screen.fields.data[field.name].push(dataObj)}}if(field.col&&field.row&&field.len){var pos=field.col+(field.row-1)*screen.colCount;var value=_hllapi.copyPresentationSpaceToString(pos,field.len);var fld=_hllapi.findField("  ",pos);if(!screen.fields.source)screen.fields.source=
{};screen.fields.source[field.name]={pos:pos,len:field.len,value:value.data.trimRight(),attr:fld.attr,get:field.get,set:field.set};addProperty(screen.fields.data,screen.fields.source[field.name],field.name)}})}function genDynamicJson(screen,insert){var lastScreen=newScreen(insert);lastScreen.colCount=screen.colCount;lastScreen.rowCount=screen.rowCount;var dynFields={data:{},source:{},attr:{}};lastScreen.dynFields=dynFields;lastScreen.fields=dynFields;if(_termapi.type=="VT")return;function addProperty(){var name=
curfld.name;Object.defineProperty(dynFields.data,name,{"enumerable":true,"configurable":false,set:function(value){if(_internalFieldSetting)return;if((lastScreen.dynFields.source[name].attr&32)==0){if(_hllapi.copyStringToPresentationSpace(value,lastScreen.dynFields.source[name].pos).returnCode==0);}else alert("Protected field")},get:function(){return lastScreen.dynFields.source[name].value}})}var lastPos=0;var curfld=null,firstfld={name:"R1C1",text:"",attr:0,pos:1,eab:0};var eab;for(var i=0;i<screen.text.length;i++){var c=
screen.text[i];var cc=c.charCodeAt(0);if(i%2==1){eab=screen.text[i-1].charCodeAt(0);if((eab&255)==255){if(curfld){lastPos=Math.floor((i+1)/2);dynFields.source[curfld.name]={value:curfld.text.trimRight(),attr:curfld.attr,pos:curfld.pos,len:lastPos-curfld.pos,eab:curfld.eab};addProperty()}curfld={name:"R"+(Math.floor((i+1)/2/screen.colCount)%screen.rowCount+1)+"C"+((i+1)/2%screen.colCount+1),text:"",attr:cc,pos:(i+1)/2+1,eab:-1};c=""}else if(cc==0)c=" ";if(curfld)curfld.text+=c;else firstfld.text+=
c}else if(curfld&&curfld.eab==-1)curfld.eab=cc}lastPos=Math.floor((i+1)/2);if(!curfld){curfld=firstfld;firstfld.text=""}if(lastPos-curfld.pos>0){dynFields.source[curfld.name]={value:(curfld.text+firstfld.text).trimRight(),attr:curfld.attr,pos:curfld.pos,len:lastPos-curfld.pos,eab:curfld.eab};addProperty()}return dynFields}function dynJson(){return _screens[_screens.length-1].dynFields}function getBestRule(screen,ruleObj,newdata){function checkWaitForItem(obj){function matchItem(item){if(!item.pos&&
item.row&&item.col)item.pos=item.col+(item.row-1)*screen.colCount;if(item.pos){var len=item.len?item.len:item.text.length;var text=_hllapi.copyPresentationSpaceToString(item.pos,len).data.trimRight();return text==item.text}else{var from=1;if(_termapi.type=="VT"){if(_termapi.bufferStart!=-1)from=_termapi.bufferStart-_termapi.topPos;if(!from)from=1}if(typeof item.col=="undefined")return _hllapi.searchPresentationSpace(item.text?item.text:item,from,{searchFrom:_const.SRCHFROM,searchDir:_const.SRCHFRWD}).returnCode==
0;else{var text="\u00b7".repeat(from%screen.colCount-1)+_hllapi.copyPresentationSpaceToString(from,_termapi.type=="VT"&&_termapi.bufferStart!=-1?_termapi.bufferLength:getText().length).data.trimRight();var curPos=item.col-1;while(curPos<=text.length&&text.substr(curPos,item.text.length)!=item.text)curPos+=screen.colCount;return curPos<=text.length}}}var rc=false;var matchCount=0;if(typeof obj.match!="string")if(typeof obj.match=="function")obj.match(_ref)?matchCount=10:matchCount=0;else if(obj.match instanceof
Array)for(var i=0;i<obj.match.length;i++)if(matchItem(obj.match[i]))matchCount++;else{matchCount=0;break}else matchItem(obj.match)?matchCount++:matchCount=0;else matchItem(obj.match)?matchCount++:matchCount=0;return matchCount}var bestRule=null;var obj=ruleObj;if(obj.length>0)for(var o in obj){matchCount=checkWaitForItem(obj[o]);if(matchCount&&(!bestRule||bestRule.matchCount<matchCount)){bestRule=obj[o];bestRule.matchCount=matchCount}}else{matchCount=checkWaitForItem(obj);if(matchCount>0){bestRule=
obj;bestRule.matchCount=matchCount}}return bestRule}function checkWaitFor(){if(_waitForObj&&_lastWaitForScreenNumber!=_lastPSUpdate){_lastWaitForScreenNumber=_lastPSUpdate;var bestRule=getBestRule(getLastScreen(),_waitForObj,true);if(bestRule){if(_waitForTimer){clearTimeout(_waitForTimer);_waitForTimer=null}if(!_waitForLoop)_waitForObj=null;if(bestRule.function)bestRule.function();else if(bestRule.handler)bestRule.handler()}}}function xhrGet(url,callback,errback){var xhr=new XMLHttpRequest;xhr.open("GET",
url,true);xhr.onreadystatechange=function(evt){var status,err;if(xhr.readyState===4){status=xhr.status||0;if(status>399&&status<600){err=new Error(url+" HTTP status: "+status);err.xhr=xhr;if(errback)errback(err)}else callback(xhr.responseText)}};xhr.send(null)}function checkScreenRules(screen,execute){if(screen.checked)return;screen.checked=true;screen.rules=[];var bestRules=screen.rules;if(_screenRules&&_screenRules.length>0){var bestRule=getBestRule(screen,_screenRules);while(bestRule){bestRule.parent=
null;if(bestRules.length>0)bestRule.parent=bestRules[0];bestRules.splice(0,0,bestRule);if(bestRule.rules)bestRule=getBestRule(screen,bestRule.rules);else break}if(bestRules.length>0){var finalApply={};var screenId="";bestRules.forEach(function(rule){helper.object.extend(finalApply,rule.apply,true);if(screenId!="")screenId+=".";screenId=rule.id+screenId});screen.id=screenId;if(_chainedAction)_chainedScreens.push(bestRules[0].id);if(finalApply.byPath){var apply=null;finalApply.byPath.forEach(function(apply){if(typeof apply.path!=
"undefined"&&apply.path==getPreviousScreenId()){if(!apply.apps)apply.apps=finalApply.apps;if(!apply.dynFields)apply.dynFields=finalApply.dynFields;if(!apply.fields)apply.fields=finalApply.fields;if(!apply.render)apply.render=finalApply.render;if(!apply.actions)apply.actions=finalApply.actions;if(!apply.screenId)apply.screenId=finalApply.screenId;finalApply=apply}})}if(finalApply.fields&&finalApply.fields.length>0)genFieldsFromTemplate(finalApply.fields);if(finalApply.actions){genActionsFromTemplate(finalApply.actions);
runChainedAction();if(_chainedAction)return}else finishChainedAction();getLastScreen()["apply"]=finalApply;fireEvent("ruleSelected",bestRules[0]);if(finalApply.apps){_ishost=true;fireEvent("appsUpdate",finalApply.apps);return}if(!execute)return;if(finalApply.render&&finalApply.render.route&&(!finalApply.render.view||finalApply.render.type=="route"))if(typeof finalApply.render.route=="function")finalApply.render.route(_ref);else{var win=window;if(finalApply.render.route.window&&finalApply.render.route.window!=
"_top")win=document.getElementById(finalApply.render.route.window);if(win)win.location.href=finalApply.render.route.url}_view=document.getElementById(_args.view.id);if(finalApply.render&&finalApply.render.view&&finalApply.render.type!="route"){var view=null;if(typeof finalApply.render.view!="string"){if(typeof screen.rules[0].apply.render.view.cache=="string")view=screen.rules[0].apply.render.view.cache;else if(typeof finalApply.render.view.template=="string")view=finalApply.render.view.template;
else if(typeof finalApply.render.view.template=="function")view=finalApply.render.view.template(_ref);if(view)if(typeof finalApply.render.view.id=="string")_view=document.getElementById(finalApply.render.view.id)}else view=finalApply.render.view;function processTemplate(html){var obj={hs:_ref};if(typeof _args.view.binding.processTemplate=="function")_view.innerHTML=_args.view.binding.processTemplate(html,obj);else{html=html.replace(/({{[^}]*)\[(\d+)\]?/g,function(match,p1,p2,p3,offset,string){return p1+
"."+p2});_view.innerHTML=Handlebars.compile(html)(obj)}var scripts=_view.getElementsByTagName("script");for(var i=0,len=scripts.length;i<len;i++){var script=document.createElement("script");script.innerHTML=scripts[i].innerHTML;document.body.removeChild(document.body.appendChild(script))}bindEditFields();fireEvent("viewLoaded",null)}if(view&&_view){if(view.indexOf("<")!=-1)processTemplate(view);else if(view[0]=="#"){var el=document.getElementById(view.substr(1));if(el)processTemplate(el.innerHTML);
else helper.console.warning(helper.string.format('Cannot process template, element is null or undefined - id:"{0}"',view),arguments)}else xhrGet(view,function(html){var pattern=/<body[^>]*>((.|[\n\r])*)<\/body>/im;var matches=pattern.exec(html);if(matches&&matches.length>1)html=matches[1];if(_args.view.cache)screen.rules[0].apply.render.view.cache=html;processTemplate(html)});if(typeof finalApply.render.view.oncomplete=="function")finalApply.render.view.oncomplete(_ref)}}if(finalApply.handler)finalApply.handler(_ref);
setVisible(typeof finalApply.render!="undefined"&&(typeof finalApply.render.route!="undefined"||typeof finalApply.render.view!="undefined"))}else{if(!execute)return;clearInputDict();setVisible(false);finishChainedAction();if(_screenRuleNotMatchCallback)_screenRuleNotMatchCallback();else if(_defaultRoute)location.href=_defaultRoute;fireEvent("ruleSelected",null)}fireEvent("appsUpdate",null)}}function clearInputDict(){_inputDict={}}function updateBind(fld,fldnames){for(var i=0,len=fldnames.length;i<
len;i++)if(typeof _inputDict["data."+fldnames[i]]!="undefined"){_inputDict["data."+fldnames[i]].value=_ref.data[fldnames[i]];break}}function bindEditFields(){var attr=_args.view.binding.attribute;clearInputDict();function bind(el,firsttime){var node=el.getAttribute(attr);if(typeof node=="string"){node=node.substr(node.indexOf(".")+1,node.length);var value=helper.object.getValue(_ref,node,null);if(value!==null)if(firsttime){el.value=value;_inputDict[node]=el}else if(el.value!=value)helper.object.setValue(_ref,
node,el.value)}}var arr=document.querySelectorAll("input");for(var i=0,len=arr.length;i<len;i++)bind(arr[i],true);if(!_keypressListenerSet){_keypressListenerSet=true;_view.addEventListener("keyup",function(e){bind(e.target)});_view.addEventListener("change",function(e){bind(e.target)})}}function wait(success,failed){_termapi.wait(success,failed);return _ref}function waitForLoop(){_waitForLoop=true;waitFor(arguments[0],arguments[1],arguments[2],arguments[3])}function waitFor(){if(arguments.length<
1)return null;if(typeof arguments[0]=="string"&&typeof arguments[1]=="function"){var obj={"match":arguments[0],"function":arguments[1]};return waitForEx(obj,arguments[2],arguments[3])}else if(typeof arguments[0]=="object")return waitForEx(arguments[0],arguments[1],arguments[2]);else return null}function waitForEx(obj,failed,timeout){_waitForObj=obj;if(timeout!=undefined)timeout=_waitForTimeout;if(timeout)_waitForTimer=setTimeout(function(){waitForEnd();if(failed)failed()},timeout);checkWaitFor();
return _ref}function waitForEnd(){if(!_waitForLoop){_waitForObj=null;if(_waitForTimer){window.clearTimeout(_waitForTimer);_waitForTimer=null}}}function waitForBreak(){_waitForLoop=false;waitForEnd()}function onPsUpdate(screen){if(screen.number!=_lastScreenNumber){_lastScreenNumber=screen.number;genDynamicJson(screen);if(_checkRulesOnPsUpdate&&!screen.locked)checkScreenRules(getLastScreen(),true)}if(_termapi.type=="VT"){screen.checked=false;checkScreenRules(screen,true)}_lastPSUpdate++;if(_waitForObj)checkWaitFor()}
function onOiaUpdate(locked){if(!locked){if(!_ready){_ready=true;fireEvent("ready")}if(_screenNotificationDelay==0)checkScreenRules(getLastScreen(),true);else{if(_screenNotificationTimer)window.clearTimeout(_screenNotificationTimer);_screenNotificationTimer=window.setTimeout(checkScreenRules,_screenNotificationDelay,getLastScreen(),true)}if(!_chainedAction)fireEvent("pageUnlocked")}else if(!_chainedAction)fireEvent("pageLocked")}function onFldUpdate(fld){updateField(fld)}function register(rule,parentRule){if(Array.isArray(rule))for(var r=
0;r<rule.length;r++)addRule(rule[r].rule,rule[r].parentRule||parentRule);else addRule(rule,parentRule)}function fixRuleLinks(rule){if(helper.object.existsPath(rule,"apply.apps"))for(var i=0;i<rule.apply.apps.length;i++)if(rule.apply.apps[i].link)rule.apply.apps[i].link=(_baseUrl+rule.apply.apps[i].link).replace(/\/\//g,"/")}function addRule(rule,parentRule){fixRuleLinks(rule);if(!parentRule)_screenRules.push(rule);else{if(!parentRule.rules)parentRule.rules=[];parentRule.rules.push(rule)}}function press(value){_hllapi.sendKey(value);
return _ref}function type(value){_hllapi.sendKey(value);return _ref}function sendKeys(value){_hllapi.sendKey(value);return _ref}function registerRules(obj){if(!_screenRules)_screenRules=[];_screenRules.concat(obj)}function navigate(action){go(action,true);return _ref}function go(action,chained){var screen=getLastScreen();if(screen.actions&&screen.actions[action]&&!(_chainedAction&&getPreviousScreenId()==screen.id)){fireEvent("pageLocked");if(chained)_chainedAction=true;if(typeof screen.actions[action]==
"function")screen.actions[action](_ref);else screen.actions[action]["do"](_ref);_lastAction=action;return true}else{if(!_chainedAction)alert("Action '"+action+"' is invalid in current context.");finishChainedAction();return false}}function chainAction(action){if(action)_lastAction=action;_chainedAction=true}function finishChainedAction(){_chainedAction=false;_chainedScreens=[];fireEvent("pageUnlocked")}function runChainedAction(){if(_chainedAction){if(_chainedScreens.length>1){var currentScreenId=
_chainedScreens[_chainedScreens.length-1];for(var n=_chainedScreens.length-2;n>=0;n--)if(_chainedScreens[n]==currentScreenId){finishChainedAction();return}}go(_lastAction)}}function realRowCount(){return _termapi.screen.rowCount-_termapi.topRow-1}function getText(a,b,c){var screen=getLastScreen();var len=_termapi.screenTextLen;var row=1,col=1;var pos=a||1;if(c){len=c;row=a;col=b;pos=col+(row-1)*screen.colCount}else if(b)len=b;if(pos==-1&&len>0)pos=1;var text=_hllapi.copyPresentationSpaceToString(pos,
len).data;return text}function getLastText(){return _termapi.type=="VT"?getText(_termapi.bufferStart,Math.min(_termapi.bufferLength,_termapi.screenTextLen-_termapi.bufferStart+1)):getText()}function addSendProperties(props){props.forEach(function(prop){Object.defineProperty(_key,prop.n,{"enumerable":true,"configurable":false,"writable":false,"value":function(){_hllapi.sendKey(prop.d)}})})}function addSendProperties3270(){addSendProperties([{n:"enter",d:"@E"},{n:"clear",d:"@C"},{n:"reset",d:"@R"},
{n:"attn",d:"@AQ"},{n:"sysreq",d:"@AH"},{n:"eraseeof",d:"@AF"},{n:"backspace",d:"@<"},{n:"backtab",d:"@B"},{n:"tab",d:"@T"},{n:"pa1",d:"@x"},{n:"pa2",d:"@y"},{n:"pa3",d:"@z"},{n:"pf1",d:"@1"},{n:"pf2",d:"@2"},{n:"pf3",d:"@3"},{n:"pf4",d:"@4"},{n:"pf5",d:"@5"},{n:"pf6",d:"@6"},{n:"pf7",d:"@7"},{n:"pf8",d:"@8"},{n:"pf9",d:"@9"},{n:"pf10",d:"@a"},{n:"pf11",d:"@b"},{n:"pf12",d:"@c"},{n:"pf13",d:"@d"},{n:"pf14",d:"@e"},{n:"pf15",d:"@f"},{n:"pf16",d:"@g"},{n:"pf17",d:"@h"},{n:"pf18",d:"@i"},{n:"pf19",d:"@j"},
{n:"pf20",d:"@k"},{n:"pf21",d:"@l"},{n:"pf22",d:"@m"},{n:"pf23",d:"@n"},{n:"pf24",d:"@o"}])}function addSendProperties5250(){addSendProperties([{n:"enter",d:"@E"},{n:"clear",d:"@C"},{n:"reset",d:"@R"},{n:"attn",d:"@AQ"},{n:"sysreq",d:"@AH"},{n:"fieldminus",d:"@A-"},{n:"fieldplus",d:"@A+"},{n:"fieldexit",d:"@AE"},{n:"eraseeof",d:"@AF"},{n:"backspace",d:"@<"},{n:"backtab",d:"@B"},{n:"erasefield",d:"@F"},{n:"help",d:"@H"},{n:"print",d:"@P"},{n:"pgup",d:"@u"},{n:"pgdown",d:"@v"},{n:"tab",d:"@T"},{n:"pa1",
d:"@x"},{n:"pa2",d:"@y"},{n:"pa3",d:"@z"},{n:"pf1",d:"@1"},{n:"pf2",d:"@2"},{n:"pf3",d:"@3"},{n:"pf4",d:"@4"},{n:"pf5",d:"@5"},{n:"pf6",d:"@6"},{n:"pf7",d:"@7"},{n:"pf8",d:"@8"},{n:"pf9",d:"@9"},{n:"pf10",d:"@a"},{n:"pf11",d:"@b"},{n:"pf12",d:"@c"},{n:"pf13",d:"@d"},{n:"pf14",d:"@e"},{n:"pf15",d:"@f"},{n:"pf16",d:"@g"},{n:"pf17",d:"@h"},{n:"pf18",d:"@i"},{n:"pf19",d:"@j"},{n:"pf20",d:"@k"},{n:"pf21",d:"@l"},{n:"pf22",d:"@m"},{n:"pf23",d:"@n"},{n:"pf24",d:"@o"}])}function addSendPropertiesVT(){addSendProperties([{n:"enter",
d:"@E"},{n:"left",d:"@L"},{n:"print",d:"@P"},{n:"tab",d:"@T"},{n:"up",d:"@U"},{n:"down",d:"@V"},{n:"right",d:"@Z"},{n:"pf1",d:"@M@a"},{n:"pf2",d:"@M@b"},{n:"pf3",d:"@M@c"},{n:"pf4",d:"@M@d"},{n:"f1",d:"@1"},{n:"f2",d:"@2"},{n:"f3",d:"@3"},{n:"f4",d:"@4"},{n:"f5",d:"@5"},{n:"f6",d:"@6"},{n:"f7",d:"@7"},{n:"f8",d:"@8"},{n:"f9",d:"@9"},{n:"f10",d:"@a"},{n:"f11",d:"@b"},{n:"f12",d:"@c"},{n:"f13",d:"@d"},{n:"f14",d:"@e"},{n:"f15",d:"@f"},{n:"f16",d:"@g"},{n:"f17",d:"@h"},{n:"f18",d:"@i"},{n:"f19",d:"@j"},
{n:"f20",d:"@k"},{n:"newline",d:"@N"},{n:"numPad0",d:"@M@0"},{n:"numPad1",d:"@M@1"},{n:"numPad2",d:"@M@2"},{n:"numPad3",d:"@M@3"},{n:"numPad4",d:"@M@4"},{n:"numPad5",d:"@M@5"},{n:"numPad6",d:"@M@6"},{n:"numPad7",d:"@M@7"},{n:"numPap8",d:"@M@8"},{n:"numPad9",d:"@M@9"},{n:"numPadMinus",d:"@M@-"},{n:"numPadComma",d:"@M@,"},{n:"numPadPeriod",d:"@M@."},{n:"numPadEnter",d:"@M@e"},{n:"find",d:"@M@f"},{n:"insert",d:"@M@i"},{n:"remove",d:"@M@r"},{n:"select",d:"@M@s"},{n:"prevScreen",d:"@M@p"},{n:"nextScreen",
d:"@M@n"},{n:"NUL",d:"@M@ "},{n:"SOH",d:"@M@A"},{n:"STX",d:"@M@B"},{n:"ETX",d:"@M@C"},{n:"EOT",d:"@M@D"},{n:"ENQ",d:"@M@E"},{n:"ACK",d:"@M@F"},{n:"BEL",d:"@M@G"},{n:"BS",d:"@M@H"},{n:"HT",d:"@M@I"},{n:"LF",d:"@M@J"},{n:"VT",d:"@M@K"},{n:"FF",d:"@M@L"},{n:"CR",d:"@M@M"},{n:"SO",d:"@M@N"},{n:"SI",d:"@M@O"},{n:"DLE",d:"@M@P"},{n:"DC1",d:"@M@Q"},{n:"DC2",d:"@M@R"},{n:"DC3",d:"@M@S"},{n:"DC4",d:"@M@T"},{n:"NAK",d:"@M@U"},{n:"SYN",d:"@M@V"},{n:"ETB",d:"@M@W"},{n:"CAN",d:"@M@X"},{n:"EM",d:"@M@Y"},{n:"SUB",
d:"@M@Z"},{n:"ESC",d:"@M@u"},{n:"FS",d:"@M@v"},{n:"GS",d:"@M@w"},{n:"RS",d:"@M@x"},{n:"US",d:"@M@y"},{n:"DEL",d:"@M@z"},{n:"backtab",d:"@Q@a"},{n:"backpace",d:"@<"}])}initialize();Object.defineProperty(_ref,"data",{"enumerable":true,"configurable":false,get:getData});Object.defineProperty(_ref,"apps",{"enumerable":true,"configurable":false,get:getApps});Object.defineProperty(_ref,"actions",{"enumerable":true,"configurable":false,get:getActions});Object.defineProperty(_ref,"checkRulesOnPsUpdate",{"enumerable":true,
"configurable":false,"get":function(){return _checkRulesOnPsUpdate},"set":function(value){_checkRulesOnPsUpdate=value}});Object.defineProperty(_ref,"screenNotificationDelay",{"enumerable":true,"configurable":false,"get":function(){return _screenNotificationDelay},"set":function(value){_screenNotificationDelay=value}});Object.defineProperty(_ref,"cursorPos",{"enumerable":true,"configurable":false,get:getCursorPos});Object.defineProperty(_ref,"hllapi",{"enumerable":true,"configurable":false,get:function(){return _hllapi}});
Object.defineProperty(_ref,"defaultPage",{"enumerable":true,"configurable":false,get:function(){return _defaultRoute},set:function(value){_defaultRoute=value}});Object.defineProperty(_ref,"defaultRoute",{"enumerable":true,"configurable":false,get:function(){return _defaultRoute},set:function(value){_defaultRoute=value}});Object.defineProperty(_ref,"screen",{"enumerable":true,"configurable":false,"get":getLastScreen});Object.defineProperty(_ref,"screens",{"enumerable":true,"configurable":false,"get":function(){return _screens}});
Object.defineProperty(_ref,"prevScreen",{"enumerable":true,"configurable":false,"get":getPrevScreen});Object.defineProperty(_ref,"screenPath",{"enumerable":true,"configurable":false,"get":getScreenPath});Object.defineProperty(_ref,"register",{"enumerable":true,"configurable":false,"writable":false,"value":register});Object.defineProperty(_ref,"sendKeys",{"enumerable":true,"configurable":false,"writable":false,"value":sendKeys});Object.defineProperty(_ref,"key",{"enumerable":true,"configurable":false,
get:function(){return _key}});Object.defineProperty(_ref,"send",{"enumerable":true,"configurable":false,get:function(){return _key}});Object.defineProperty(_ref,"on",{"enumerable":true,"configurable":false,"value":on});Object.defineProperty(_ref,"off",{"enumerable":true,"configurable":false,"value":off});Object.defineProperty(_ref,"go",{"enumerable":true,"configurable":false,"value":go});Object.defineProperty(_ref,"navigate",{"enumerable":true,"configurable":false,"value":navigate});Object.defineProperty(_ref,
"close",{"enumerable":true,"configurable":false,"value":close});Object.defineProperty(_ref,"getText",{"enumerable":true,"configurable":false,"value":getText});Object.defineProperty(_ref,"getLastText",{"enumerable":true,"configurable":false,"value":getLastText});Object.defineProperty(_ref,"waitFor",{"enumerable":true,"configurable":false,"writable":false,"value":waitFor});Object.defineProperty(_ref,"wait",{"enumerable":true,"configurable":false,"writable":false,"value":wait});Object.defineProperty(_ref,
"waitForLoop",{"enumerable":true,"configurable":false,"writable":false,"value":waitForLoop});Object.defineProperty(_ref,"waitForBreak",{"enumerable":true,"configurable":false,"writable":false,"value":waitForBreak});Object.defineProperty(_ref,"state",{"enumerable":true,"configurable":false,"get":function(){return _termapi.state},"set":function(value){_termapi.state=value}});_hostSurfer=_ref;return _ref}function HostSurfer(args){return _hostSurfer?_hostSurfer:helper.object.existsPath(_wndTop,"zScope."+
_wndKey+".hostSurfer")?_wndTop.zScope[_wndKey]["hostSurfer"]:new HS(args)}(function(){switch(_accessMode.toUpperCase()){case "WINDOW":_wndTop=window;break;case "DOMAIN":default:_wndTop=helper.url.getTopWindow(window);break}if(helper.object.existsPath(_wndTop,"zScope."+_wndKey))_hostSurfer=_wndTop.zScope[_wndKey].hostSurfer})();try{zScope!=undefined}catch(e){zScope={}}zScope.HostSurfer=HostSurfer;Object.defineProperty(window.zScope,"hostSurfer",{"enumerable":true,"configurable":false,"get":function(args){return HostSurfer(args)}})})();
function FloatingTerminal(url,float){var _float={"left":null,"right":null,"top":null,"bottom":null,"width":380,"height":240};var minWidth=60;var minHeight=40;var MARGINS=4;var CAPTIONHEIGHT=20;var clicked=null;var onRightEdge,onBottomEdge,onLeftEdge,onTopEdge;var rightScreenEdge,bottomScreenEdge;var b,x,y;var redraw=false;helper.object.parseAttributes(_float,float,"MATCH");var pane=helper.dom.appendJsonElement({"parentElement":document.body,"type":"div","attributes":{"style":"position:absolute;z-index:1;margin:0;padding:0;width:"+
_float.width+"px;height:"+_float.height+"px;border:"+MARGINS+"px solid purple;border-top:"+CAPTIONHEIGHT+"px solid purple;background:#000"}});if(_float.left!==null)pane.style.left=_float.left+"px";if(_float.top!==null)pane.style.top=_float.top+"px";if(_float.right!==null)pane.style.right=_float.right+"px";if(_float.bottom!==null)pane.style.bottom=_float.bottom+"px";var iframe=helper.dom.appendJsonElement({"parentElement":pane,"type":"iframe","attributes":{"style":"width:100%;height:100%;border:0",
"src":url}});var ghostpane=helper.dom.appendJsonElement({"parentElement":document.body,"type":"div","attributes":{"style":"position:absolute;z-index:0;margin:0;padding:0;width:0;height:0;opacity:0;display:none"}});function setBounds(element,x,y,w,h){element.style.left=x+"px";element.style.top=y+"px";element.style.width=w+"px";element.style.height=h+"px"}pane.addEventListener("mousedown",onMouseDown);document.addEventListener("mousemove",onMove);document.addEventListener("mouseup",onUp);pane.addEventListener("touchstart",
onTouchDown);document.addEventListener("touchmove",onTouchMove);document.addEventListener("touchend",onTouchEnd);function onTouchDown(e){onDown(e.touches[0]);e.preventDefault()}function onTouchMove(e){onMove(e.touches[0])}function onTouchEnd(e){if(e.touches.length==0)onUp(e.changedTouches[0])}function onMouseDown(e){onDown(e);e.preventDefault()}function onDown(e){calc(e);var isResizing=onRightEdge||onBottomEdge||onTopEdge||onLeftEdge;ghostpane.style.zIndex=100;ghostpane.style.opacity=.2;ghostpane.style.left=
"0px";ghostpane.style.top="0px";ghostpane.style.width=document.body.clientWidth+"px";ghostpane.style.height=document.body.clientHeight+"px";ghostpane.style.display="block";clicked={x:x,y:y,cx:e.clientX,cy:e.clientY,w:b.width,h:b.height,isResizing:isResizing,isMoving:!isResizing&&canMove(),onTopEdge:onTopEdge,onLeftEdge:onLeftEdge,onRightEdge:onRightEdge,onBottomEdge:onBottomEdge}}function canMove(){return x>0&&x<b.width&&y>0&&y<b.height&&y<CAPTIONHEIGHT}function calc(e){b=pane.getBoundingClientRect();
x=e.clientX-b.left;y=e.clientY-b.top;onTopEdge=y<MARGINS;onLeftEdge=x<MARGINS;onRightEdge=x>=b.width-MARGINS;onBottomEdge=y>=b.height-MARGINS;rightScreenEdge=window.innerWidth-MARGINS;bottomScreenEdge=window.innerHeight-MARGINS}function onMove(ee){var e;calc(ee);e=ee;if(clicked&&clicked.isResizing){if(clicked.onRightEdge)pane.style.width=Math.max(x,minWidth)+"px";if(clicked.onBottomEdge)pane.style.height=Math.max(y,minHeight)+"px";if(clicked.onLeftEdge){var currentWidth=Math.max(clicked.cx-e.clientX+
clicked.w,minWidth);if(currentWidth>minWidth){pane.style.width=currentWidth+"px";pane.style.left=e.clientX+"px"}}if(clicked.onTopEdge){var currentHeight=Math.max(clicked.cy-e.clientY+clicked.h,minHeight);if(currentHeight>minHeight){pane.style.height=currentHeight+"px";pane.style.top=e.clientY+"px"}}return}if(clicked&&clicked.isMoving){pane.style.top=e.clientY-clicked.y+"px";pane.style.left=e.clientX-clicked.x+"px";return}if(onRightEdge&&onBottomEdge||onLeftEdge&&onTopEdge)pane.style.cursor="nwse-resize";
else if(onRightEdge&&onTopEdge||onBottomEdge&&onLeftEdge)pane.style.cursor="nesw-resize";else if(onRightEdge||onLeftEdge)pane.style.cursor="ew-resize";else if(onBottomEdge||onTopEdge)pane.style.cursor="ns-resize";else if(canMove())pane.style.cursor="move";else pane.style.cursor="default";if(clicked&&clicked.isMoving)ghostpane.style.cursor=pane.style.cursor}function onUp(e){ghostpane.style.opacity=0;ghostpane.style.zIndex=0;ghostpane.style.cursor="default";ghostpane.style.display="none";calc(e);clicked=
null}}
(function(){function HSAppManager(args){var _ref=this;var _args={};var _IFRAMEID="hsappframe";var _defaultFeatures={"hasToolbar":true,"canHide":true,"canMaximize":true};var _events={appregistration:null,appderegistration:null,applicationStart:null,applicationStop:null,applicationShow:null,applicationHide:null,panelConfig:null,error:null};var _currentApps=[];var _canMaximize=true;var _canHide=true;function initialize(args){if(args&&args.events)helper.object.parseAttributes(_events,args.events,"MATCH")}
function update(apps){if(_events.appderegistration)_events.appderegistration();if(!apps)return;apps.forEach(function(app){var appclone=findAppByName(app.name);if(!appclone){appclone=helper.object.clone(app);_currentApps.push(appclone);appclone.running=false;appclone.wasClosed=false}});_currentApps.forEach(function(app){if(_events.appregistration)_events.appregistration(app);if(app.autostart)fireApp(app,app.autostart)})}function findAppByDesc(appdesc){var res=null;for(app in _currentApps)if(_currentApps[app].desc.toLowerCase()==
appdesc.toLowerCase()){res=_currentApps[app];break}return res}function findAppByName(appname){var res=null;for(app in _currentApps)if(_currentApps[app].name==appname){res=_currentApps[app];break}return res}function throwError(message){if(_events.error)_events.error(message);else helper.console.error(message)}function fireApp(app,autostart){if(!autostart)app.wasClosed=false;else if(app.wasClosed)return;if(app.running)return;app.running=true;var panelInfo={"maximizedMargin":0,"onwindowresize":true,
"onclosed":function(){app.wasClosed=true;remove(app)},"callback":[]};if(typeof app.link!="undefined")panelInfo.contentIframe={src:app.link,name:app.name,width:"100%",height:"100%"};else if(helper.object.existsPath(app,"panel.content")!="undefined"){panelInfo.content=app.panel.content;if(helper.object.existsPath(app,"panel.callback"))panelInfo.callback=app.panel.callback}if(helper.object.existsPath(app,"panel.theme"))panelInfo.theme=app.panel.theme;var width=getPosValue(app,"panel.width","auto");var height=
getPosValue(app,"panel.height","auto");if(width!="auto"||height!="auto")panelInfo.contentSize=width+" "+height;var position=getPosValue(app,"panel.position",null);if(position!=null)panelInfo.position=position;var features=helper.object.getValue(app,"panel.features",null);if(features){if(features.maximized)panelInfo.setstatus="maximize";if(typeof features.resizeit!="undefined")panelInfo.resizeit=features.resizeit;if(typeof features.draggable!="undefined")panelInfo.draggable=features.draggable;if(features.hasToolbar===
false)panelInfo.headerRemove=true;else{if(app.icon)panelInfo.headerLogo=app.icon;panelInfo.headerTitle=app.desc;panelInfo.headerControls=features.headerControls;panelInfo.headerControls.iconfont="thinfinity-icons";if(features.useParentStyle)if(typeof _events.panelConfig!=null)panelInfo.callback.push(function(){this.header.css(_events.panelConfig())})}panelInfo.id="jsPanel_"+app.name}if(autostart)panelInfo.callback.push(function(){hide(app)});var pnl=null;if(helper.object.existsPath(app,"panel.toolbarClass"))pnl=
$.jsPanel(panelInfo).addClass(app.panel.toolbarClass);else pnl=$.jsPanel(panelInfo);$("#jsPanel_"+app.name).panel=pnl;if(_events.applicationStart)_events.applicationStart(app)}function getPosValue(obj,pathfield,defaultValue){var value=helper.object.getValue(obj,pathfield,defaultValue);if(!isNaN(value))value=value+"px";return value}function on(eventName,handler){if(typeof _events[eventName]!="undefined")_events[eventName]=handler}function open(desc){app=findAppByDesc(desc);if(!app)return;if(app.running)show(app);
else fireApp(app,false)}function show(app){$("#jsPanel_"+app.name).show();app.wasClosed=false;if(_events.applicationShow)_events.applicationShow(app)}function hide(app){$("#jsPanel_"+app.name).hide();if(_events.applicationHide)_events.applicationHide(app)}function remove(app){if(_events.applicationStop)_events.applicationStop(app);app.running=false;helper.console.log("application removed...")}function appmsg(obj){if(obj.close)$("#jsPanel_"+obj.from).panel.close();else if(obj.visible)show(findAppByName(obj.from));
else hide(findAppByName(obj.from))}initialize(args);Object.defineProperty(_ref,"appmsg",{"enumerable":true,"configurable":false,"writable":false,"value":appmsg});Object.defineProperty(_ref,"on",{"enumerable":true,"configurable":false,"writable":false,"value":on});Object.defineProperty(_ref,"hide",{"enumerable":true,"configurable":false,"writable":false,"value":hide});Object.defineProperty(_ref,"open",{"enumerable":true,"configurable":false,"writable":false,"value":open});Object.defineProperty(_ref,
"show",{"enumerable":true,"configurable":false,"writable":false,"value":show});Object.defineProperty(_ref,"remove",{"enumerable":true,"configurable":false,"writable":false,"value":remove});Object.defineProperty(_ref,"update",{"enumerable":false,"configurable":false,"writable":false,"value":update});return _ref}try{zScope!=undefined}catch(e){zScope={}}zScope.HSAppManager=HSAppManager})();
