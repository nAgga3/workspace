/* Thinfinity(c) Remote Desktop Server v7.0.3.114 */
if(typeof ITHit==="undefined")ITHit={};ITHit._oComponents={};ITHit._oNamespace={};ITHit.Temp={};ITHit.Define=function(sComponentName){this._oComponents[sComponentName]=true};ITHit.Defined=function(sComponentName){return!!this._oComponents[sComponentName]};
ITHit.Add=function(sLable,mValue){var aLable=sLable.split("."),oObj=this,iLength=aLable.length;for(var i=0;i<iLength;i++){if("undefined"===typeof oObj[aLable[i]])if(i<iLength-1)oObj[aLable[i]]={};else oObj[aLable[i]]=mValue;else if(!(oObj[aLable[i]]instanceof Object))return;oObj=oObj[aLable[i]]}};
ITHit.Config={Global:window,ShowOriginalException:true,PreventCaching:false,AjaxFileBrowser:{ProtectedProperties:{},FlushCacheOnOpenFolder:true,ShowFolders:true,ProgressRefreshTime:5,ClassName:"ih_style",OnUploadAutoRefresh:true,ShowImagePreview:true,ImageTypes:"png|jpg|jpeg|gif|bmp|tiff",PreventImageCaching:true,PreventOpenDocumentCaching:false,FileIconsPath:"icons/",MsOfficeTemplatesPath:"templates/",NotAllowedCharacters:'\\/:*?"<>|',ThemesPath:"themes/",ThemeName:"windows_8",PluginsPath:"plugins/",
EnablePlugins:true,EnableHistoryNavigation:true,OpenHistoryLink:true,ShowContextHelp:true,ShowUploadErrorDetails:true,SuppressServerWarning:false,UploadRetryIntervalSeconds:10,UploadRetryMaxCount:-1,MaxUploadSegmentBytes:-1,CancelUploadRetryIntervalSeconds:1,CancelUploadRetryCount:5}};
ITHit.Add("GetNamespace",function(mNamespace,bCreate,oContext){var utilsNs=ITHit.Utils;if(!utilsNs.IsString(mNamespace)&&!utilsNs.IsArray(mNamespace))throw new ITHit.Exception("ITHit.GetNamespace() expected string as first parameter of method.");var aNamespace=utilsNs.IsArray(mNamespace)?mNamespace:mNamespace.split(".");var oObj=oContext||ITHit.Config.Global;for(var i=0,sPart="";oObj&&(sPart=aNamespace[i]);i++)if(sPart in oObj)oObj=oObj[sPart];else if(bCreate){oObj[sPart]={};oObj=oObj[sPart]}else oObj=
undefined;return oObj});ITHit.Add("Namespace",function(sNamespace,oContext){return ITHit.GetNamespace(sNamespace,false,oContext)});ITHit.Add("Declare",function(sNamespace,oContext){return ITHit.GetNamespace(sNamespace,true,oContext)});
ITHit.Add("DetectOS",function(){var _plat=navigator.platform,detectOS={Windows:-1!=_plat.indexOf("Win"),MacOS:-1!=_plat.indexOf("Mac"),Linux:-1!=_plat.indexOf("Linux"),UNIX:-1!=_plat.indexOf("X11"),OS:null};if(detectOS.Windows)detectOS.OS="Windows";else if(detectOS.Linux)detectOS.OS="Linux";else if(detectOS.MacOS)detectOS.OS="MacOS";else if(detectOS.UNIX)detectOS.OS="UNIX";return detectOS}());
ITHit.Add("DetectBrowser",function(){var _nav=navigator.userAgent,detectBrowser={IE:false,FF:false,Chrome:false,Safari:false,Opera:false,Browser:null,Mac:false},browsers={IE:{Search:"MSIE",Browser:"IE"},IE11:{Search:"Trident/7",Version:"rv",Browser:"IE"},FF:{Search:"Firefox",Browser:"FF"},Chrome:{Search:"Chrome",Browser:"Chrome"},Safari:{Search:"Safari",Version:"Version",Browser:"Safari",Mac:"Macintosh",iPad:"iPad",iPhone:"iPhone"},Opera:{Search:"Opera",Browser:"Opera"}};for(var check in browsers){var pos=
_nav.indexOf(browsers[check].Search);if(-1!=pos){detectBrowser.Browser=browsers[check].Browser;detectBrowser.Mac=navigator.platform.indexOf("Mac")==0;detectBrowser.iPad=browsers[check].iPad&&_nav.indexOf(browsers[check].iPad)!=-1;detectBrowser.iPhone=browsers[check].iPhone&&_nav.indexOf(browsers[check].iPhone)!=-1;var versionSearch=browsers[check].Version||browsers[check].Search,index=_nav.indexOf(versionSearch);if(-1==index){detectBrowser[browsers[check].Browser]=true;break}detectBrowser[browsers[check].Browser]=
parseFloat(_nav.substring(index+versionSearch.length+1));break}}return detectBrowser}());
ITHit.Add("DetectDevice",function(){var sUserAgent=navigator.userAgent;var resultDevices={};var devices={Android:{Search:"Android"},BlackBerry:{Search:"BlackBerry"},iOS:{Search:"iPhone|iPad|iPod"},Opera:{Search:"Opera Mini"},Windows:{Search:"IEMobile"},Mobile:{}};for(var name in devices){var oParams=devices[name];if(!oParams.Search)continue;var oRegExp=new RegExp(oParams.Search,"i");resultDevices[name]=oRegExp.test(sUserAgent);if(!resultDevices.Mobile&&resultDevices[name])resultDevices.Mobile=true}return resultDevices}());
ITHit.Add("HttpRequest",function(sHref,sMethod,oHeaders,sBody,sUser,sPass){if(!ITHit.Utils.IsString(sHref))throw new ITHit.Exception('Expexted string href in ITHit.HttpRequest. Passed: "'+sHref+'"',"sHref");if(!ITHit.Utils.IsObjectStrict(oHeaders)&&!ITHit.Utils.IsNull(oHeaders)&&!ITHit.Utils.IsUndefined(oHeaders))throw new ITHit.Exception("Expexted headers list as object in ITHit.HttpRequest.","oHeaders");this.Href=sHref;this.Method=sMethod;this.Headers=oHeaders;this.Body=sBody;this.User=sUser||null;
this.Password=sPass||null});
ITHit.Add("HttpResponse",function(){var HttpResponse=function(sHref,iStatus,sStatusDescription,oHeaders){if(!ITHit.Utils.IsString(sHref))throw new ITHit.Exception('Expexted string href in ITHit.HttpResponse. Passed: "'+sHref+'"',"sHref");if(!ITHit.Utils.IsInteger(iStatus))throw new ITHit.Exception("Expexted integer status in ITHit.HttpResponse.","iStatus");if(!ITHit.Utils.IsString(sStatusDescription))throw new ITHit.Exception("Expected string status description in ITHit.HttpResponse.","sStatusDescription");
if(oHeaders&&!ITHit.Utils.IsObjectStrict(oHeaders))throw new ITHit.Exception("Expected object headers in ITHit.HttpResponse.","oHeaders");else if(!oHeaders)oHeaders={};this.Href=sHref;this.Status=iStatus;this.StatusDescription=sStatusDescription;this.Headers=oHeaders;this.BodyXml=null;this.BodyText=""};HttpResponse.prototype._SetBody=function(oBodyXml,sBodyText){this.BodyXml=oBodyXml||null;this.BodyText=sBodyText||""};HttpResponse.prototype.SetBodyText=function(sBody){this.BodyXml=null;this.BodyText=
sBody};HttpResponse.prototype.SetBodyXml=function(oBody){this.BodyXml=oBody;this.BodyText=""};HttpResponse.prototype.ParseXml=function(sXml){if(!ITHit.Utils.IsString(sXml))throw new ITHit.Exception("Expected XML string in ITHit.HttpResponse.ParseXml","sXml");var oXml=new ITHit.XMLDoc;oXml.load(sXml);this.BodyXml=oXml._get();this.BodyText=sXml};HttpResponse.prototype.GetResponseHeader=function(sHeader,bToLowerCase){if(!bToLowerCase)return this.Headers[sHeader];else{var sHeader=String(sHeader).toLowerCase();
for(var sHeaderName in this.Headers)if(sHeader===String(sHeaderName).toLowerCase())return this.Headers[sHeaderName];return undefined}};return HttpResponse}());
ITHit.Add("XMLRequest",function(){var XMLRequest=function(oHttpRequest,bAsync){this.bAsync=bAsync===true;this.OnData=null;this.OnError=null;this.OnProgress=null;this.oHttpRequest=oHttpRequest;this.oError=null;if(!oHttpRequest.Href)throw new ITHit.Exception("Server url had not been set.");if(ITHit.Logger&&ITHit.LogLevel)ITHit.Logger.WriteMessage("["+oHttpRequest.Href+"]");this.oRequest=GetXMLObject();var sHref=String(oHttpRequest.Href);var sMethod=oHttpRequest.Method||"GET";try{this.oRequest.open(sMethod,
ITHit.DecodeHost(sHref),this.bAsync,oHttpRequest.User||null,oHttpRequest.Password||null);if(ITHit.DetectBrowser.IE&&ITHit.DetectBrowser.IE>=10)try{this.oRequest.responseType="msxml-document"}catch(e){}}catch(e){var aDestHost=sHref.match(/(?:\/\/)[^\/]+/);if(aDestHost){var sDestHost=aDestHost[0].substr(2);if(XMLRequest.Host!=sDestHost)throw new ITHit.Exception(ITHit.Phrases.CrossDomainRequestAttempt.Paste(window.location,sHref,String(sMethod)),e);else throw e;}}for(var sHeader in oHttpRequest.Headers)this.oRequest.setRequestHeader(sHeader,
oHttpRequest.Headers[sHeader]);if(this.bAsync)try{this.oRequest.withCredentials=true}catch(e){}if(this.bAsync){var self=this;this.oRequest.onreadystatechange=function(){if(self.oRequest.readyState!=4)return;var oResponse=self.GetResponse();if(typeof self.OnData==="function")self.OnData.call(self,oResponse)};if("onprogress"in this.oRequest)this.oRequest.onprogress=function(oEvent){if(typeof self.OnProgress==="function")self.OnProgress.call(self,oEvent)}}};XMLRequest.prototype.Send=function(){var sBody=
this.oHttpRequest.Body;sBody=sBody||(ITHit.Utils.IsUndefined(sBody)||ITHit.Utils.IsNull(sBody)||ITHit.Utils.IsBoolean(sBody)?"":sBody);sBody=String(sBody);if(sBody==="")sBody=null;try{this.oRequest.send(sBody)}catch(e){this.oError=e;if(typeof this.OnError==="function")this.OnError.call(this,e)}};XMLRequest.prototype.Abort=function(){if(this.oRequest)try{this.oRequest.abort()}catch(e){this.oError=e;if(typeof this.OnError==="function")this.OnError.call(this,e)}};XMLRequest.prototype.GetResponse=function(){var oHttpRequest=
this.oHttpRequest;var oRequest=this.oRequest;var sHref=String(oHttpRequest.Href);if(this.bAsync&&oRequest.readyState!=4)throw new ITHit.Exception("Request sended as asynchronous, please register callback through XMLRequest.OnData() method for get responce object.");if(404==oRequest.status&&(-1!=sHref.indexOf(".js")&&oHttpRequest.Method!=="PROPFIND")){ITHit.debug.loadTrace.failed(ITHit.debug.loadTrace.FAILED_LOAD);throw new ITHit.Exception('Failed to load script ("'+sHref+'"). Request returned status: '+
oRequest.status+(oRequest.statusText?" ("+oRequest.statusText+")":"")+".",this.oError?this.oError:undefined);}var oStatus=this.FixResponseStatus(oRequest.status,oRequest.statusText);var oResponse=new ITHit.HttpResponse(sHref,oStatus.Status,oStatus.StatusDescription,parseResponseHeaders(oRequest.getAllResponseHeaders()));oResponse._SetBody(oRequest.responseXML,oRequest.responseText);return oResponse};XMLRequest.prototype.FixResponseStatus=function(iStatus,sStatusText){var oStatus={Status:iStatus,StatusDescription:sStatusText};
if(1223==iStatus){oStatus.Status=204;oStatus.StatusDescription="No Content"}return oStatus};XMLRequest.Host=window.location.host;var XMLObjectVersion;var GetXMLObject=function(){if(ITHit.DetectBrowser.IE&&ITHit.DetectBrowser.IE<10&&window.ActiveXObject)if(XMLObjectVersion)return new ActiveXObject(XMLObjectVersion);else{var aVers=["MSXML2.XmlHttp.6.0","MSXML2.XmlHttp.3.0"];for(var i=0;i<aVers.length;i++)try{var oXmlObj=new ActiveXObject(aVers[i]);XMLObjectVersion=aVers[i];return oXmlObj}catch(e){}}else if("undefined"!=
typeof XMLHttpRequest)return new XMLHttpRequest;throw new ITHit.Exception("XMLHttpRequest (AJAX) not supported");};var parseResponseHeaders=function(sHeaders){var oHeaders={};if(!sHeaders)return oHeaders;var aHeaders=sHeaders.split("\n");for(var i=0;i<aHeaders.length;i++){if(!ITHit.Trim(aHeaders[i]))continue;var aParts=aHeaders[i].split(":");var sHeaderName=aParts.shift();oHeaders[sHeaderName]=ITHit.Trim(aParts.join(":"))}return oHeaders};return XMLRequest}());
ITHit.Add("Utils",{IsString:function(mValue){return"string"==typeof mValue||mValue instanceof String},IsStringNullOrEmpty:function(mValue){return"undefined"==typeof mValue||mValue==null||mValue.length==0},IsNumber:function(mValue){return"number"==typeof mValue},IsBoolean:function(mValue){return"boolean"==typeof mValue||mValue instanceof Boolean},IsInteger:function(mValue){return this.IsNumber(mValue)&&-1==String(mValue).indexOf(".")},IsArray:function(mValue){return mValue instanceof Array||"array"==
typeof mValue},IsFunction:function(mValue){return mValue instanceof Function},IsObject:function(mValue){return"object"==typeof mValue},IsDate:function(mValue){return mValue instanceof Date},IsRegExp:function(mValue){return mValue instanceof RegExp},IsObjectStrict:function(mValue){return this.IsObject(mValue)&&!this.IsArray(mValue)&&!this.IsString(mValue)&&!this.IsNull(mValue)&&!this.IsNumber(mValue)&&!this.IsDate(mValue)&&!this.IsRegExp(mValue)&&!this.IsBoolean(mValue)&&!this.IsFunction(mValue)&&
!this.IsNull(mValue)},IsUndefined:function(mValue){return undefined===mValue},IsNull:function(mValue){return null===mValue},IsDOMObject:function(mValue){return mValue&&this.IsObject(mValue)&&!this.IsUndefined(mValue.nodeType)},HtmlEscape:function(text){return String(text).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},CreateDOMElement:function(elem,props){var utilsNs=ITHit.Utils;if(utilsNs.IsObject(elem)){if(!elem.nodeName)throw new ITHit.Exception("nodeName property does not specified.");
props=elem;elem=elem.nodeName;delete props.nodeName}var newElem=document.createElement(elem);if(props&&utilsNs.IsObject(props))for(var propName in props){if(!props.hasOwnProperty(propName))continue;switch(propName){case "class":if(props[propName])newElem.className=props[propName];break;case "style":var stylesList=props[propName];for(var style in stylesList){if(!stylesList.hasOwnProperty(style))continue;newElem.style[style]=stylesList[style]}break;case "childNodes":for(var i=0,l=props[propName].length;i<
l;i++){var child=props[propName][i];if(utilsNs.IsString(child)||utilsNs.IsNumber(child)||utilsNs.IsBoolean(child))child=document.createTextNode(child);else if(!child)continue;if(!utilsNs.IsDOMObject(child))child=ITHit.Utils.CreateDOMElement(child);newElem.appendChild(child)}break;default:newElem[propName]=props[propName]}}return newElem},GetComputedStyle:function(elem){var computedStyle;if(!this.IsUndefined(elem.currentStyle))computedStyle=elem.currentStyle;else computedStyle=document.defaultView.getComputedStyle(elem,
null);return computedStyle},MakeScopeClosure:function(scope,method,params){if(this.IsUndefined(params))return this._GetClosureFunction(scope,method);else{if(!this.IsArray(params))params=[params];return this._GetClosureParamsFunction(scope,method,params)}},_GetClosureParamsFunction:function(scope,method,params){return function(){var args=[];for(var i=0,l=params.length;i<l;i++)args.push(params[i]);if(arguments.length)for(var i=0,l=arguments.length;i<l;i++)args.push(arguments[i]);return scope[method].apply(scope,
args)}},_GetClosureFunction:function(scope,method){return function(){return scope[method].apply(scope,arguments)}},GetParentUrl:function(url){url.replace(/\/?$/,"/");var oNsCl=ITHit.WebDAV.Client;var path=oNsCl.HierarchyItem.GetAbsoluteUriPath(url);path=path.substr(0,path.length-2);return path.substr(0,path.lastIndexOf("/")+1)}});
ITHit.Add("Trim",function(sText,sType,bHardCheck){if("string"!=typeof sText&&!(sText instanceof String))if(!bHardCheck)return sText;else throw new ITHit.Exception("ITHit.Trim() expected string as first prametr.");switch(sType){case ITHit.Trim.Left:return sText.replace(/^\s+/,"");break;case ITHit.Trim.Right:return sText.replace(/\s+$/,"");break;default:return sText.replace(/(?:^\s+|\s+$)/g,"")}});ITHit.Add("Trim.Left","Left");ITHit.Add("Trim.Right","Right");ITHit.Add("Trim.Both","Both");
ITHit.Add("Exception",function(){var Exception=function(sMessage,oInnerException){this.Message=sMessage;this.InnerException=oInnerException;if(ITHit.Logger.GetCount(ITHit.LogLevel.Error)){var sException="Exception: "+this.Name+"\n"+"Message: "+this.Message+"\n";if(oInnerException)sException+=(!oInnerException instanceof Error?"Inner exception: ":"")+this.GetExceptionsStack(oInnerException);ITHit.Logger.WriteMessage(sException,ITHit.LogLevel.Error)}};Exception.prototype.Name="Exception";Exception.prototype.GetExceptionsStack=
function(oException,iLevel){if("undefined"===typeof oException)var oException=this;var iLevel=iLevel?iLevel:0;var sStr="";var sSingleMargin="      ";var sMargin="";for(var i=0;i<iLevel;i++)sMargin+=sSingleMargin;if(oException instanceof ITHit.Exception)sStr+=sMargin+(oException.Message?oException.Message:oException)+"\n";else if(ITHit.Config.ShowOriginalException){sStr+="\nOriginal exception:\n";if("string"!=typeof oException&&!(oException instanceof String))for(var sProp in oException)sStr+="\t"+
sProp+': "'+ITHit.Trim(oException[sProp])+'"\n';else sStr+="\t"+oException+"\n"}return sStr};Exception.prototype.toString=function(){return this.GetExceptionsStack()};return Exception}());ITHit.Add("Extend",function(subClass,baseClass){function inheritance(){}inheritance.prototype=baseClass.prototype;subClass.prototype=new inheritance;subClass.prototype.constructor=subClass;subClass.baseConstructor=baseClass;if(baseClass.base)baseClass.prototype.base=baseClass.base;subClass.base=baseClass.prototype});
ITHit.Add("Events",function(){var Events=function(){this._Listeners=this._NewObject();this._DispatchEvents={};this._DelayedDelete={}};Events.prototype._NewObject=function(){var obj={};for(var prop in obj)delete obj[prop];return obj};Events.prototype.AddListener=function(oObject,sEventName,mHandler,mHandlerScope){var oHandler;var oNsHandler=ITHit.EventHandler;if(!(mHandler instanceof ITHit.EventHandler))oHandler=new ITHit.EventHandler(mHandlerScope||null,mHandler);else oHandler=mHandler;var oListeners=
this._Listeners[oObject]||(this._Listeners[oObject]=this._NewObject());var oEventHandlers=oListeners[sEventName]||(oListeners[sEventName]=[]);var bFounded=false;for(var i=0,l=oEventHandlers.length;i<l;i++)if(oEventHandlers[i].IsEqual(oHandler)){bFounded=true;break}if(!bFounded)oEventHandlers.push(oHandler)};Events.prototype.DispatchEvent=function(oObject,sEventName,mData){if(!this._Listeners[oObject]||!this._Listeners[oObject][sEventName]||!this._Listeners[oObject][sEventName].length)return undefined;
var oNsHandler=ITHit.EventHandler;var bRet;var oHandlers=[];for(var i=0,l=this._Listeners[oObject][sEventName].length;i<l;i++)oHandlers.push(this._Listeners[oObject][sEventName][i]);this._DispatchEvents[oObject]=(this._DispatchEvents[oObject]||0)+1;this._DispatchEvents[oObject+":"+sEventName]=(this._DispatchEvents[oObject+":"+sEventName]||0)+1;for(var i=0;i<oHandlers.length;i++){var bForRet;if(oHandlers[i]instanceof oNsHandler)bForRet=oHandlers[i].CallHandler(oObject,sEventName,mData);if(oHandlers[i]instanceof
Function)bForRet=oHandlers[i](oObject,sEventName,mData);if(!ITHit.Utils.IsUndefined(bForRet))bRet=bForRet}this._DispatchEvents[oObject]--;this._DispatchEvents[oObject+":"+sEventName]--;this._CheckDelayedDelete(oObject,sEventName);return bRet};Events.prototype.RemoveListener=function(oObject,sEventName,mHandler,mHandlerScope){mHandlerScope=mHandlerScope||null;if(!this._Listeners[oObject]||!this._Listeners[oObject][sEventName]||!this._Listeners[oObject][sEventName].length)return true;var aHandlers=
this._Listeners[oObject][sEventName];for(var i=0,l=aHandlers.length;i<l;i++)if(aHandlers[i].IsEqual(mHandlerScope,mHandler)){this._Listeners[oObject][sEventName].splice(i,1);break}};Events.prototype.RemoveAllListeners=function(oObject,sEventName){if(!ITHit.Utils.IsUndefined(sEventName))if(ITHit.Utils.IsUndefined(this._DispatchEvents[oObject+":"+sEventName]))delete this._Listeners[oObject][sEventName];else this._DelayedDelete[oObject+":"+sEventName]=true;else if(ITHit.Utils.IsUndefined(this._DispatchEvents[oObject]))delete this._Listeners[oObject];
else this._DelayedDelete[oObject]=true};Events.prototype._CheckDelayedDelete=function(oObject,sEventName){if(!this._DispatchEvents[oObject+":"+sEventName]){delete this._DispatchEvents[oObject+":"+sEventName];if(!ITHit.Utils.IsUndefined(this._DelayedDelete[oObject+":"+sEventName]))this.RemoveAllListeners(oObject,sEventName)}if(!this._DispatchEvents[oObject]){delete this._DispatchEvents[oObject];if(!ITHit.Utils.IsUndefined(this._DelayedDelete[oObject]))this.RemoveAllListeners(oObject)}};Events.prototype.ListenersLength=
function(oObject,sEventName){if(!this._Listeners[oObject]||!this._Listeners[oObject][sEventName])return 0;return this._Listeners[oObject][sEventName].length};Events.prototype.GetTarget=function(e){return e.target||e.srcElement};Events.prototype.Fix=function(e){e=e||window.event;if(!e.target)e.target=this.GetTarget(e);if(null==e.pageX&&null!=e.clientX){var html=document.documentElement,body=document.body;e.pageX=e.clientX+(html&&html.scrollLeft||body&&body.scrollLeft||0)-(html.clientLeft||0);e.pageY=
e.clientY+(html&&html.scrollTop||body&&body.scrollTop||0)-(html.clientTop||0)}if(!e.which&&e.button)e.which=e.button&1?1:e.button&2?3:e.button&4?2:0;return e};Events.prototype.AttachEvent=function(elem,eventName,handler){eventName=eventName.replace(/^on/,"");if(elem.addEventListener)elem.addEventListener(eventName,handler,false);else if(elem.attachEvent)elem.attachEvent("on"+eventName,handler);else elem["on"+eventName]=handler};Events.prototype.DettachEvent=function(elem,eventName,handler){eventName=
eventName.replace(/^on/,"");if(elem.removeEventListener)elem.removeEventListener(eventName,handler,false);else if(elem.detachEvent)elem.detachEvent("on"+eventName,handler);else elem["on"+eventName]=null},Events.prototype.Stop=function(e){e=e||window.event;if(e.stopPropagation)e.stopPropagation();if(e.preventDefault)e.preventDefault();else e.returnValue=false;e.cancelBubble=true;return false};return new Events}());
ITHit.Add("EventHandler",function(){var EventHandler=function(oScope,mMethod){var oNsUtils=ITHit.Utils;if(!oNsUtils.IsObjectStrict(oScope)&&!oNsUtils.IsNull(oScope))throw new ITHit.Exception("Event handler scope expected to be an object.");if(!oNsUtils.IsFunction(mMethod)&&(oScope&&!oNsUtils.IsString(mMethod)))throw new ITHit.Exception("Method handler expected to be a string or function.");this.Scope=oScope;this.Method=mMethod};EventHandler.prototype.IsEqual=function(oScopeOrEventHandler,mMethod){if(oScopeOrEventHandler instanceof
ITHit.EventHandler)return this.GetCredentials()===oScopeOrEventHandler.GetCredentials();else return(oScopeOrEventHandler||null)===this.Scope&&mMethod===this.Method};EventHandler.prototype.GetCredentials=function(){return this.Scope+"::"+this.Method};EventHandler.prototype.CallHandler=function(oScope,sEvent,aParams){if(!(aParams instanceof Array))aParams=[aParams];if(this.Scope)if(this.Method instanceof Function)return this.Method.apply(this.Scope||window,aParams.concat([oScope]));else return this.Scope[this.Method].apply(this.Scope,
aParams.concat([oScope]));else return this.Method.apply({},aParams.concat([oScope]))};return EventHandler}());ITHit.Add("HtmlEncode",function(sText){return sText.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&amp;").replace(/"/g,"&quot;")});ITHit.Add("HtmlDecode",function(sText){return sText.replace(/&quot;/,'"').replace(/&amp;/g,"'").replace(/&gt;/g,">").replace(/&lt;/g,"<")});
ITHit.Add("Encode",function(sText){if(!sText)return sText;return ITHit.EncodeURI(sText.replace(/%/g,"%25")).replace(/~/g,"%7E").replace(/!/g,"%21").replace(/@/g,"%40").replace(/#/g,"%23").replace(/\$/g,"%24").replace(/&/g,"%26").replace(/\*/g,"%2A").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\-/g,"%2D").replace(/_/g,"%5F").replace(/\+/g,"%2B").replace(/=/g,"%3D").replace(/'/g,"%27").replace(/;/g,"%3B").replace(/,/g,"%2C").replace(/\?/g,"%3F")});
ITHit.Add("EncodeURI",function(sText){if(!sText)return sText;return encodeURI(sText).replace(/%25/g,"%")});
ITHit.Add("Decode",function(sText){if(!sText)return sText;var sText=sText.replace(/%7E/gi,"~").replace(/%21/g,"!").replace(/%40/g,"@").replace(/%23/g,"#").replace(/%24/g,"$").replace(/%26/g,"&").replace(/%2A/gi,"*").replace(/%28/g,"(").replace(/%29/g,")").replace(/%2D/gi,"-").replace(/%5F/gi,"_").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%27/g,"'").replace(/%3B/gi,";").replace(/%2E/gi,".").replace(/%2C/gi,",").replace(/%3F/gi,"?");return sText});
ITHit.Add("DecodeURI",function(sText){if(!sText)return sText;return decodeURI(sText.replace(/%([^0-9A-F]|.(?:[^0-9A-F]|$)|$)/gi,"%25$1"))});ITHit.Add("DecodeHost",function(sHref){if(/^(http|https):\/\/[^:\/]*?%/.test(sHref)){var aMatchRes=sHref.match(/^(?:http|https):\/\/[^\/:]+/);if(aMatchRes&&aMatchRes[0]){var sMatch=aMatchRes[0].replace(/^(http|https):\/\//,"");sHref=sHref.replace(sMatch,ITHit.Decode(sMatch))}}return sHref});
(function(){var fNoop=function(){};var extendWithSuper=function(childClass,newProperties){for(var key in newProperties){if(!newProperties.hasOwnProperty(key))continue;var value=newProperties[key];if(typeof value=="function"&&typeof childClass[key]=="function"&&childClass[key]!==fNoop)childClass[key]=coverVirtual(value,childClass[key]);else childClass[key]=value}if(!childClass._super)childClass._super=fNoop};var coverVirtual=function(childMethod,parentMethod){return function(){var old=this._super;
this._super=parentMethod;var r=childMethod.apply(this,arguments);this._super=old;return r}};var instanceUniqueCounter=0;ITHit.Add("DefineClass",function(globalName,parentClass,prototypeProperties,staticProperties){parentClass=parentClass!==null?parentClass:function(){};var childClass;if(prototypeProperties&&prototypeProperties.hasOwnProperty("constructor"))childClass=coverVirtual(prototypeProperties.constructor,parentClass);else childClass=function(){return parentClass.apply(this,arguments)};for(var prop in parentClass)childClass[prop]=
parentClass[prop];extendWithSuper(childClass,staticProperties);var Surrogate=function(){this.constructor=childClass};Surrogate.prototype=parentClass.prototype;childClass.prototype=new Surrogate;for(var key in Surrogate.prototype){if(!Surrogate.prototype.hasOwnProperty(key))continue;var value=Surrogate.prototype[key];if(!value)continue;if(value instanceof Array){if(value.length===0)childClass.prototype[key]=[]}else if(typeof value==="object"){var isEmpty=true;for(var k in value)isEmpty=isEmpty&&value.hasOwnProperty(k);
if(isEmpty)childClass.prototype[key]={}}}if(prototypeProperties)extendWithSuper(childClass.prototype,prototypeProperties);childClass.prototype.toString=function(){if(!this.__instanceName)this.__instanceName=globalName+instanceUniqueCounter++;return this.__instanceName};var iPos=globalName.lastIndexOf("."),sLocalName=globalName.substr(iPos+1);return ITHit.Declare(globalName.substr(0,iPos))[sLocalName]=childClass})})();
ITHit.Temp.WebDAV_Phrases={CrossDomainRequestAttempt:"Attempting to make cross-domain request.\nRoot URL: {0}\nDestination URL: {1}\nMethod: {2}",Exceptions:{BadRequest:"The request could not be understood by the server due to malformed syntax.",Conflict:"The request could not be carried because of conflict on server.",DependencyFailed:"The method could not be performed on the resource because the requested action depended on another action and that action failed.",InsufficientStorage:"The request could not be carried because of insufficient storage.",
Forbidden:"The server refused to fulfill the request.",Http:"Exception during the request occurred.",Locked:"The item is locked.",MethodNotAllowed:"The method is not allowed.",NotFound:"The item doesn't exist on the server.",PreconditionFailed:"Precondition failed.",PropertyFailed:"Failed to get one or more properties.",PropertyForbidden:"Not enough rights to obtain one of requested properties.",PropertyNotFound:"One or more properties not found.",Unauthorized:"Incorrect credentials provided or insufficient permissions to access the requested item.",
LockWrongCountParametersPassed:"Lock.{0}: Wrong count of parameters passed. (Passed {1})",UnableToParseLockInfoResponse:"Unable to parse response: quantity of LockInfo elements isn't equal to 1.",ParsingPropertiesException:"Exception while parsing properties.",InvalidDepthValue:"Invalid Depth value.",FailedCreateFolder:"Failed creating folder.",ResourceExists:'Resourse with name "{0}" is already exists on the server.',FailedCreateResource:"Failed creating resource.",FolderWasExpectedAsDestinationForMoving:"Folder was expected as destination for moving folder.",
AddOrUpdatePropertyDavProhibition:'Add or update of property {0} ignored: properties from "DAV:" namespace could not be updated/added.',DeletePropertyDavProhibition:'Delete of property {0} ignored: properties from "DAV:" namespace could not be deleted.',NoPropertiesToManipulateWith:"Calling UpdateProperties ignored: no properties to update/add/delete.",ActiveLockDoesntContainLockscope:"Activelock node doesn't contain lockscope node.",ActiveLockDoesntContainDepth:"Activelock node doedn't contain depth node.",
WrongCountPropertyInputParameters:"Wrong count of input parameters passed for Property constructor. Expected 1-3, passed: {1}.",FailedToWriteContentToFile:"Failed to write content to file.",PropertyUpdateTypeException:"Property expected to be an Property class instance.",PropertyDeleteTypeException:"Property name expected to be an PropertyName class instance.",UnknownResourceType:"Unknown resource type.",NotAllPropertiesReceivedForUploadProgress:"Not all properties received for upload progress. {0}",
ReportOnResourceItemWithParameterCalled:"For files the method should be called without parametres.",WrongHref:"Href expected to be a string.",WrongUploadedBytesType:"Count of uploaded bytes expected to be a integer.",WrongContentLengthType:"File content length expected to be a integer.",BytesUploadedIsMoreThanTotalFileContentLength:"Bytes uploaded is more than total file content length."},ResourceNotFound:"Resource not found. {0}",ResponseItemNotFound:"The response doesn't have required item. {0}",
ResponseResourceWrongType:"Server returned folder while resource is expected. {0}",FolderNotFound:"Folder not found. {0}",ResponseFolderWrongType:"Server returned resource while folder is expected. {0}",ItemIsMovedOrDeleted:'Cannot perform operation because item "{0}" is moved or deleted.',FailedToCopy:"Failed to copy item.",FailedToCopyWithStatus:"Copy failed with status {0}: {1}.",FailedToDelete:"Failed to delete item.",DeleteFailedWithStatus:"Delete failed with status {0}: {1}.",FailedToMove:"Failed to move item.",
MoveFailedWithStatus:"Move failed with status {0}: {1}.",UnlockFailedWithStatus:"Unlock failed with status {0}: {1}.",PropfindFailedWithStatus:"PROPFIND method failed with status {0}.",FailedToUpdateProp:"Failed to update or delete one or more properties.",FromTo:"The From parameter cannot be less than To.",NotToken:"The supplied string is not a valid HTTP token.",RangeTooSmall:"The From or To parameter cannot be less than 0.",RangeType:"A different range specifier has already been added to this request.",
ServerReturned:"Server returned:",UserAgent:"IT Hit WebDAV AJAX Library v{0}",wdrs:{status:"\n{0} {1}",response:"{0}: {1}"}};ITHit.Temp.WebDAV_Client_AjaxFileBrowser_Phrases=ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser.Phrases");
ITHit.oNS.EN={AjaxFileBrowser:{Commands:{UndoCommand:"Undo {0}",CancelCommand:"Cancel {0}",Names:{Load:"Load",Copy:"Copy",CreateFolder:"Create Folder",Delete:"Delete",LoadFolder:"Load Folder",LoadItem:"Load Item",LoadTree:"Load Tree",Move:"Move",Rename:"Rename",Search:"Search"},Process:{Load:"Loading...",Copy:'Copying "{0}"...',CreateFolder:'Creating Folder "{0}"...',Delete:'Deleting "{0}"...',LoadFolder:'Loading Folder "{0}"...',LoadItem:'Loading Item "{0}"...',LoadTree:'Loading Tree "{0}"...',Move:'Moving "{0}"...',
Rename:'Renaming "{0}"...',Search:'Searching "{0}"...'}},Interface:{Buttons:{Copy:"Copy",CustomProp:"Custom Properties",Cut:"Cut",Close:"Close",Delete:"Delete",Details:"Details",Download:"Download",Edit:"Edit",ExtraLargeIcons:"Extra Large Icons",FileManager:"Open OS's File Manager.",Folders:"Folders",Info:"Properties",LargeIcons:"Large Icons",Lock:"Lock",Log:"Log",MediumIcons:"Medium Icons",NewFolder:"New Folder",Paste:"Paste",Redo:"Redo",Refresh:"Refresh",VersionUpdateToThis:"Update",VersionRemove:"Remove",
VersionDownload:"Download",Versions:"Versions",Views:"Views",Undo:"Undo",Unlock:"Unlock",Up:"Up",Upload:"Upload",UploadFolder:"Upload Folder"},Add:"Add",AddProperty:"Add Property",Address:"Address:",BrowseFiles:"Browse...",BuyNow:"Buy Now",Cancel:"Cancel",CannotCreateDocument:"Selected document is not created.",CannotEditFile:"Current file cannot be opened for editing.",Close:"Close",CopyPattern:"Copy",Create:"Create",Created:"Created:",CrossDomainRequestsIssue:'Your server may not be configured to allow cross-domain requests.<br/>Please see how to enable cross-domain requests <a target="_blank" href="http://www.webdavsystem.com/ajaxfilebrowser/programming/cross_domain">here</a>.<br/>',
CrossDomainRequestsIssueIE:'Your Internet Explorer may not be configured to allow cross-domain requests.<br/>Please see how to enable cross-domain requests in Interner Explorer 9 and earlier <a target="_blank" href="http://www.webdavsystem.com/ajaxfilebrowser/programming/cross_domain">here</a>.<br/>',CrossDomainRequestsIssueTitle:"Failed to connect to server",DateModified:"Date Modified",Delete:"Delete",DeleteItemsConfirmQuestion:"Are you sure you want to delete selected item(s)?",DeletePropertiesConfirmQuestion:"Are you sure want to delete selected property(s)?",
DeleteVersionConfirmQuestion:"Are you sure want to delete selected version?",Details:"Details",DropFilesIEUnsupported:"Files drag and drop from file system is supported only in Internet Explorer 10, Chrome 4, FireFox 3.6, Safari 4 and later versions.",Edit:"Edit",EditProperty:"Edit \u0420roperty",Error:"Error:",ErrorDetails:"Error Details",FailedToOpenWinExplorer:"Failed to open WebDAV folder in Windows Explorer.",File:"File",FileExistsOverwriteConfirmQuestion:'File "{0}" already exists. Do you want to overwrite it?',
FileFolderType:"Folder",FileNameSpecialCharactersRestriction:"The name cannot contain any of the following characters:\n\t\t{0}",FilePrecentInUploadList:"Selected file is already present in upload list.",FilesPresentInUploadList:"The following file(s) is present in the upload list:\n\n{0}",FilesResumeNotInListOrChanged:"The following file(s) was modified:\n{0}\n\n"+"The following file(s) was not among your selection for resume in the upload list:\n{1}\n\nThe upload will start from the begging of each file.",
FileUploadFailed:"Failed to upload the file.",FillOutFileName:"Specify the file name.",FillOutFolderName:"Specify the folder name.",FirefoxLargeFilesToUpload:"In Firefox files over 100 Mb cannot be uploaded together with other files or via drag and drop. The following files are too large:\n\n<b>{0}</b>\n\n"+'To upload this file(s) you must select them one by one using "Browse..." button or use other browser.',FirefoxFolderDropNotSupported:"Folders drag and drop is available only in Google Chrome 21 and later versions.",
ItemAlreadyExists:"Item already exists.",FolderAlreadyExists:"Folder already exists.",FolderName:"Folder name",FolderUploadNotAvailedInYourBrowser:"Folders upload is available only in Google Chrome 21 and later versions.",FollowingErrorsOccurred:"The Following Errors Has Occurred",FreeSpace:"Free space:",GetPropertiesError:"Properties are not selected.",GetVersionsError:"Versions are not selected.",HttpNotAvailableError:"Server is not available.",Item:"Item",ItemType:"Item type:",LocalResource:"Local Resource",
Location:"Location:",Log:"Log",ManageProperties:"Manage Properties",Message:"Message",Modified:"Modified:",MoveFolderToSubfolderRestriction:"The destination folder is a subfolder of the source folder.",MoveFileToSameDirectoryRestriction:"The source and destination file names are the same.",Name:"Name",Namespace:"Namespace",NewFolder:"New Folder",NewFolderPattern:"New Folder",NewName:"New name",No:"No",NonExistentLocation:"Location does not exist.",NotFoundLocation:'Location "{0}" not found.',NoToAll:"No to All",
OK:"OK",OperationCannotBePerformed:"Operation Cannot Be Performed:",OverwriteConfirm:"Overwrite Confirm",Properties:"Properties",ProtectedForRunningFileExtension:'File with extension "{0}" protected for running.',PropertyNameRestriction:"Property name and namespace can not be empty and must begin with a letter, may be followed by letters, digits, hyphens, underscores and periods.",Rename:"Rename",RequestError:"Error",Safari51WindowsMultiUploadNotSupported:"Safari 5.1.x does not support multiselection via 'Browse' button. Please use drag and drop or select a single file only or use other web browser.",
Search:"Search:",Size:"Size:",Source:"Source",SpecifyItemName:"Specify the item name",TargetFolder:"Target Folder",TotalSpace:"Total space:",Type:"Type",TrialPeriodExpired:"The trial period has expired.",UpdateFile:"Update File",Upload:"Upload",UploadCaption:"Upload",UploadCaptionForDnDFilesSupportedBrowsers:"To upload drag and drop files here or into folder structure.",UploadFile:"Upload Files",UploadInProgressWarning:"One or more files are being uploaded. If you close this page upload will be paused.",
UsedPercent:"Used: {0}%",UsedSpace:"Used space:",Value:"Value",Versions:"Versions",VersionUpdateToThisTooltip:"Update to this version",Yes:"Yes",YesToAll:"Yes to All",WarningOldVersion:"Ajax File Browser has detected that your IT Hit WebDAV server version is {0}. For correct versions support it is recommended to upgrade to v3.5.x or later version. To avoid this message set SuppressServerWarning=true when creating Ajax File Browser.",WebFoldersUpdate:'Please install <a target="_blank" href="{0}">Software Update for Web Folders</a>.'},
FileSizes:{Bytes:"Bytes",B:"B",GB:"GB",KB:"KB",MB:"MB"},Menu:{ArrangeIconsBy:"Arrange Icons By",CancelUpload:"Cancel",Copy:"Copy",CustomProperties:"Custom Properties...",Cut:"Cut",Delete:"Delete",Details:"Details",EditDocument:"Edit Document",ExtraLargeIcons:"Extra Large Icons",LargeIcons:"Large Icons",Lock:"Lock...",Name:"Name",NewDocument:"New Document",NewFolder:"New Folder...",NewWord:"Microsoft Office Word Document",NewExcel:"Microsoft Office Excel Worksheet",NewPowerPoint:"Microsoft Office PowerPoint Presentation",
MediumIcons:"Medium Icons",Modified:"Modified",OpenContainingFolderInFM:"Open Containing Folder",OpenDownload:"Download",OpenFolderInFM:"Open Folder in File Manager",OpenLocation:"Open Item Location",Paste:"Paste",PauseUpload:"Pause",Properties:"Properties...",Refresh:"Refresh",Rename:"Rename...",RestartUpload:"Restart Upload",ResumeUpload:"Resume",Size:"Size",Type:"Type",Unlock:"Unlock...",UpdateFile:"Update File...",UploadFile:"Upload Files...",UploadFolder:"Upload Folder...",Versions:"Versions...",
View:"View",ViewError:"View Error..."},Grid:{DateModified:"Date Modified",FileTypePrefix:"File ",Name:"Name",Size:"Size",Type:"Type",Folder:"Folder"},Property:{Name:"Name",Namespace:"Namespace",Value:"Value"},Version:{Name:"Version Name",CreationDate:"Creation Date",Size:"Size",Comments:"Comments",SavedBy:"Saved By"},Upload:{Destination:"Destination",Elapsed:"Elapsed",Error:"Error",FileSize:"File Size",Left:"Left",Paused:"Paused",Progress:"Progress",ProgressPercent:"Status",Queued:"Queued",RetryIn:"Retry in {0}s",
Source:"File",Speed:"Speed",Uploaded:"Uploaded"},StatusDescriptions:{},Exceptions:{TrySearchByResource:"You try to search by resource. Only folders support search.",BytesUploadedIsMoreThanTotalFileContentLength:"Bytes uploaded cannot be more than total file content length.",DestinationLocationNotPassed:"Destination URL is not passed.",EmptyElementParameter:"Element parameter is empty.",EmptyUrlProvided:"Please specify WebDAV server url.",FolderInstanceExpected:"ITHit.WebDAV.Client.AjaxFileBrowser.Folder instance object expected as input parameter.",
FunctionalityNotSupported:"Functionality {0} is not supported by your browser.",HierarchyItemInstanceExpected:"ITHit.WebDAV.Client.AjaxFileBrowser.HierarchyItem instance object expected as input parameter.",InterfaceLabelIsNotPassed:"Interface label is not passed.",KeyCodeNotSpecified:"Key code not specified. Passed: {0}",NonExistentLocation:'Location "{0}" does not exist.',ResourceInstanceExpected:"ITHit.WebDAV.Client.AjaxFileBrowser.Resource instance object expected as input parameter.",SessionNotStarted:"Session is not started. Possible reason: ITHit WebDAV AJAX Library is not loaded.",
UnexpectedUploadItemState:"Unexpected upload item state: {0}",UploadProgressInfoInstanceExpected:"ITHit.WebDAV.Client.AjaxFileBrowser.InternalUploadProgressInfo instance expected.",WrongBaseUrl:"Incorrect URL provided or URl is empty.",WrongContentLengthType:"File content length is expected to be an integer.",WrongCountAsMaximumUploadTasks:"Expected integer value above zero as count of maximum upload tasks at the same time. Passed: {0}",WrongCountInputParameters:"Wrong count of imput parameters passed.",
WrongElementIdOrObject:"Expected element as string id or object.",WrongInterfaceHandler:"Wrong interface handler indentifier. Passed: {0}",WrongMenuItemType:"Passed wrong menu item type. Passed: {0}",WrongParametrType:"Wrong parameter type.",WrongTemplateIndex:"Passed wrong template index.",WrongUploadedBytesType:"Count of uploaded bytes expected to be a integer.",WrongUrl:'Passed wrong URL: "{0}".',WrongViewModeIndex:'Passed wrong view mode index: "{0}".'},ContextHelp:{Commands:{CancelUpload:"Cancel upload of the selected file.",
Copy:"Copy the selected items to the clipboard. To put them in the new location, use the Paste command.",CustomProp:"Manage custom properties associated with the selected item.",Cut:"Cut the selected items to buffer.",Delete:"Deletes the selected items.",Download:"Download the selected file.",Edit:"Edit the selected file. Open document directly from server for editing with associated application.",FileManager:"Open this folder in Operating System's file manager.",Folders:"Show or hide navigation tree.",
Info:"Show information about the selected item.",Lock:"Lock the selected file. The item will be protected from modification. Note that you would not be able to edit the file as well.",Log:"Show log. Send this log to administrator if you experience any issues, togather with a description and screenshots.",NewDocument:"Create a new Microsoft Office document.",NewExcel:"Create a new Microsoft Office Excel document.",NewFolder:"Create a new folder",NewPowerPoint:"Creates a new Microsoft Office PowerPoint document.",
NewWord:"Creates new Microsoft Office Word document.",OpenLocation:"Navigate to folder that contains this file.",Paste:"Paste the content of the buffer to the current location.",PauseUpload:"Pause upload of the selected file(s).",RedoButton:"Redo undone operation.",Refresh:"Refresh content of this folder.",Rename:"Rename the selected item.",RestartUpload:"Restart file upload.",ResumeUpload:"Resume upload of the selected file(s).",Undo:"Undo previous operation.",Unlock:"Unlock item.",Up:"Navigate one level up in the folder structure.",
UpdateFile:"Update file content. Your file will be overwritten with a selected file.",Upload:"Upload files to selected folder.",UploadFolder:"Upload local folder with all contained files to selected folder.",Versions:"Manage file versions. Download previous file versions, delete and rollback to previous versions.",Views:"Displays items using thumbnails or details view.",ViewsDetails:"Displays items using details view.",ViewsMedium:"Displays items using medium view.",ViewsLarge:"Displays items using large view.",
ViewsExtraLarge:"Displays items using extra large view.",ViewError:"Show upload errors."}}},Exceptions:{ObjectExpected:"Object or null expected.",UndefinedEventHandler:"Event handler {0}::{1} is undefined."}};ITHit.oNS=ITHit.Declare("ITHit.Exceptions");ITHit.oNS.LoggerException=function(sMessage,oInnerException){ITHit.Exceptions.LoggerException.baseConstructor.call(this,sMessage,oInnerException)};ITHit.Extend(ITHit.oNS.LoggerException,ITHit.Exception);ITHit.oNS.LoggerException.prototype.Name="LoggerException";
ITHit.oNS=ITHit.Declare("ITHit");ITHit.oNS.LogLevel={All:32,Debug:16,Info:8,Warn:4,Error:2,Fatal:1,Off:0};ITHit.oNS=ITHit.Declare("ITHit");
ITHit.oNS.Logger=function(){var oListeners={};var oListenersCount={};var oListenersForLevels={};for(var sProp in ITHit.LogLevel){oListeners[ITHit.LogLevel[sProp]]=[];oListenersForLevels[ITHit.LogLevel[sProp]]=[]}var Logger=function(){this.Level="undefined"!==typeof ITHit.Config.LogLevel?ITHit.Config.LogLevel:ITHit.LogLevel.Debug;this._IgnoreStartLogging=false;this._IgnoreFinishLogging=false;this._bNextSessFinish=false;this.AddListener=function(fHandler,iLogLevel){if(iLogLevel==ITHit.LogLevel.Off)this.RemoveListener();
var iLevel=0;var iIndex=0;outer:for(var iProp in oListeners)for(var i=0;i<oListeners[iProp].length;i++)if(oListeners[iProp][i]==fHandler){iLevel=iProp;iIndex=i;break outer}if(!iLevel){oListeners[iLogLevel].push(fHandler);recheck.add(iLogLevel,fHandler)}else if(iLogLevel!=iLevel){oListeners[iLevel].splice(iIndex,1);oListeners[iLogLevel].push(fHandler);if(iLogLevel>iLevel)recheck.increase(iLevel,iLogLevel,fHandler);else recheck.decrease(iLogLevel,iLevel,fHandler)}};this.RemoveListener=function(fHandler){outer:for(var iLogLevel in oListeners)for(var i=
0;i<oListeners[iLogLevel].length;i++)if(oListeners[iLogLevel][i]==fHandler){oListeners[iLogLevel].splice(i,1);recheck.del(iLogLevel,fHandler);break outer}return true};this.SetLogLevel=function(fHandler,iLogLevel){return this.AddListener(fHandler,iLogLevel,true)};this.GetLogLevel=function(fHandler){for(var iLogLevel in oListeners)for(var i=0;i<oListeners[iLogLevel].length;i++)if(oListeners[iLogLevel][i]==fHandler)return iLogLevel;return false};this.GetListenersForLogLevel=function(iLogLevel){return oListenersForLevels[iLogLevel]};
this.GetCount=function(iLogLevel){return oListenersForLevels[iLogLevel].length};var recheck=function(bIncrease,iFrom,iTo,fHandler){for(var sProp in ITHit.LogLevel){if(ITHit.LogLevel[sProp]>iTo)continue;if(!ITHit.LogLevel[sProp]||iFrom>=ITHit.LogLevel[sProp])continue;if(bIncrease)oListenersForLevels[ITHit.LogLevel[sProp]].push(fHandler);else for(var i=0;i<oListenersForLevels[ITHit.LogLevel[sProp]].length;i++)if(oListenersForLevels[ITHit.LogLevel[sProp]][i]==fHandler)oListenersForLevels[ITHit.LogLevel[sProp]].splice(i,
1)}};recheck.add=function(iTo,fHandler){recheck.increase(ITHit.LogLevel.Off,iTo,fHandler)};recheck.del=function(iTo,fHandler){recheck.decrease(ITHit.LogLevel.Off,iTo,fHandler)};recheck.increase=function(iFrom,iTo,fHandler){recheck(true,iFrom,iTo,fHandler)};recheck.decrease=function(iFrom,iTo,fHandler){recheck(false,iFrom,iTo,fHandler)}};Logger.prototype.WriteResponse=function(oResponse){if(Logger.GetCount(ITHit.LogLevel.Info)){var sStr="";if(oResponse instanceof HttpWebResponse)sStr+="\n"+oResponse.StatusCode+
" "+oResponse.StatusDescription+"\n";sStr+=oResponse.ResponseUri+"\n";for(var sProp in oResponse.Headers)sStr+=sProp+": "+oResponse.Headers[sProp]+"\n";sStr+=oResponse.GetResponse();this.WriteMessage(sStr)}};Logger.prototype.WriteMessage=function(sMessage,iLogLevel){this._IgnoreStartLogging=false;iLogLevel="undefined"==typeof iLogLevel?ITHit.LogLevel.Info:parseInt(iLogLevel);if(ITHit.Logger.GetCount(iLogLevel)){var aListeners=this.GetListenersForLogLevel(iLogLevel);var sMessage=String(sMessage).replace(/([^\n])$/,
"$1\n");for(var i=0;i<aListeners.length;i++)try{aListeners[i](sMessage,ITHit.LogLevel.Info)}catch(e){if(!aListeners[i]instanceof Function)throw new ITHit.Exceptions.LoggerException('Log listener expected function, passed: "'+aListeners[i]+'"',e);else throw new ITHit.Exceptions.LoggerException("Message could'nt be logged.",e);}}if(this._bNextSessFinish){this._bNextSessFinish=false;this.FinishLogging()}};Logger.prototype.StartLogging=function(){if(this._IgnoreStartLogging){this._IgnoreStartLogging=
false;return}this._IgnoreFinishLogging=false;var oDateNow=new Date;this.WriteMessage("\n----------------- Started: "+oDateNow.toUTCString()+" ["+oDateNow.getTime()+"] -----------------",ITHit.LogLevel.Info)};Logger.prototype.FinishLogging=function(){if(this._IgnoreFinishLogging){this._IgnoreFinishLogging=false;return}var oDateNow=new Date;this.WriteMessage("----------------- Finished: "+oDateNow.toUTCString()+" ["+oDateNow.getTime()+"] -----------------"+"\n",ITHit.LogLevel.Info)};Logger.prototype.StartRequest=
function(){var oDateNow=new Date;this.WriteMessage("--- Request started ---",ITHit.LogLevel.Info)};Logger.prototype.FinishRequest=function(){var oDateNow=new Date;this.WriteMessage("--- Request finished ---",ITHit.LogLevel.Info)};Logger.prototype.DeclareFinish=function(){this._bNextSessFinish=true};Logger.prototype.IgnoreNextStartLogging=function(){this._IgnoreStartLogging=true};Logger.prototype.IgnoreNextFinishLogging=function(){this._IgnoreFinishLogging=true};return new Logger}();ITHit.oNS=ITHit.Declare("ITHit.Exceptions");
ITHit.oNS.PhraseException=function(sMessage,oInnerException){ITHit.Exceptions.PhraseException.baseConstructor.call(this,sMessage,oInnerException)};ITHit.Extend(ITHit.oNS.PhraseException,ITHit.Exception);ITHit.oNS.PhraseException.prototype.Name="PhraseException";
ITHit.Phrases=function(){var PhrasesToEval={};var _callbackReplace=function(oArguments){this._arguments=oArguments};_callbackReplace.prototype.Replace=function(sPlaceholder){var iIndex=sPlaceholder.substr(1,sPlaceholder.length-2);return"undefined"!=typeof this._arguments[iIndex]?this._arguments[iIndex]:sPlaceholder};var Phrase=function(sPhrase){this._phrase=sPhrase};Phrase.prototype.toString=function(){return this._phrase};Phrase.prototype.Paste=function(){var sPhrase=this._phrase;if(/\{\d+?\}/.test(sPhrase)){var oReplace=
new _callbackReplace(arguments);sPhrase=sPhrase.replace(/\{(\d+?)\}/g,function(args){return oReplace.Replace(args)})}return sPhrase};var Phrases=function(){};Phrases.prototype.LoadJSON=function(mPhrases,sNamespace){var utilsNs=ITHit.Utils;if(sNamespace&&!utilsNs.IsString(sNamespace))throw new ITHit.Exceptions.PhraseException("Namespace expected to be a string.");var _context=this;if(sNamespace)_context=ITHit.Declare(sNamespace);try{var oPhrases=mPhrases;if(utilsNs.IsString(oPhrases))oPhrases=eval("("+
mPhrases+")");this._AddPhrases(oPhrases,_context)}catch(e){throw new ITHit.Exceptions.PhraseException("Wrong text structure.",e);}};Phrases.prototype.LoadLocalizedJSON=function(defaultPhrases,localizedPhrases,namespace){var utilsNs=ITHit.Utils,isUndefined=utilsNs.IsUndefined,isObject=utilsNs.IsObject;if(!defaultPhrases||!utilsNs.IsObjectStrict(defaultPhrases))throw new ITHit.Exceptions.PhraseException("Default phrases expected to be an JSON object.");if(localizedPhrases&&!utilsNs.IsObjectStrict(localizedPhrases))throw new ITHit.Exceptions.PhraseException("Default phrases expected to be an JSON object");
var mergedPhrases;if(localizedPhrases){mergedPhrases={};this._MergePhrases(mergedPhrases,localizedPhrases);this._MergePhrases(mergedPhrases,defaultPhrases)}else mergedPhrases=defaultPhrases;this.LoadJSON(mergedPhrases,namespace)};Phrases.prototype._MergePhrases=function(dest,source){var utilsNs=ITHit.Utils,isUndefined=utilsNs.IsUndefined,isObject=utilsNs.IsObject;for(var prop in source){if(!source.hasOwnProperty(prop))continue;if(isUndefined(dest[prop]))dest[prop]=source[prop];else if(isObject(dest[prop]))this._MergePhrases(dest[prop],
source[prop])}};Phrases.prototype._AddPhrases=function(oPhrases,_context){_context=_context||this;for(var phrase in oPhrases)if("object"!=typeof oPhrases[phrase]||!(oPhrases[phrase]instanceof Object)){switch(phrase){case "_AddPhrases":case "LoadJSON":case "LoadLocalizedJSON":case "_Merge":case "prototype":case "toString":throw new ITHit.Exceptions.PhraseException('"'+phrase+'" is reserved word.');break}_context[phrase]=new Phrase(oPhrases[phrase])}else this._AddPhrases(oPhrases[phrase],_context[phrase]?
_context[phrase]:_context[phrase]={})};return new Phrases}();ITHit.oNS=ITHit.Declare("ITHit.Exceptions");ITHit.oNS.XPathException=function(sMessage,oInnerException){ITHit.Exceptions.XPathException.baseConstructor.call(this,sMessage,oInnerException)};ITHit.Extend(ITHit.oNS.XPathException,ITHit.Exception);ITHit.oNS.XPathException.prototype.Name="XPathException";ITHit.XPath={_component:null,_version:null};
ITHit.XPath.evaluate=function(sExpression,oXmlDom,oResolver,oResult,_bSelectSingle){if("string"!=typeof sExpression&&!(sExpression instanceof String))throw new ITHit.Exceptions.XPathException("Expression was expected to be a string in ITHit.XPath.eveluate.");if(!(oXmlDom instanceof ITHit.XMLDoc))throw new ITHit.Exceptions.XPathException("Element was expected to be an ITHit.XMLDoc object in ITHit.XPath.evaluate.");if(oResolver&&!(oResolver instanceof ITHit.XPath.resolver))throw new ITHit.Exceptions.XPathException("Namespace resolver was expected to be an ITHit.XPath.resolver object in ITHit.XPath.evaluate.");
if(oResult&&!(oResult instanceof ITHit.XPath.result))throw new ITHit.Exceptions.XPathException("Result expected to be an ITHit.XPath.result object in ITHit.XPath.evaluate.");oResolver=oResolver||null;oResult=oResult||null;if(document.implementation.hasFeature("XPath","3.0")&&document.evaluate){var oContext=oXmlDom._get();var oContextDocument=oContext.ownerDocument||oContext;if(oResult){oContextDocument.evaluate(sExpression,oContext,oResolver,ITHit.XPath.result.UNORDERED_NODE_SNAPSHOT_TYPE,oResult._res);
return}var oRes=new ITHit.XPath.result(oContextDocument.evaluate(sExpression,oContext,oResolver,ITHit.XPath.result.UNORDERED_NODE_SNAPSHOT_TYPE,null));if(!_bSelectSingle)return oRes;else return oRes.iterateNext()}else if(undefined!==window.ActiveXObject){var oContext=oXmlDom._get();var bIsSetProp=false;try{oContext.getProperty("SelectionNamespaces");bIsSetProp=true}catch(e){}var bChangedNs=false;if(3==ITHit.XMLDoc._version){var sXml=oContext.xml.replace(/^\s+|\s+$/g,"");var sReplaceWhat="urn:uuid:c2f41010-65b3-11d1-a29f-00aa00c14882/";
var sReplaceTo="cutted";if(-1!=sXml.indexOf(sReplaceWhat)||true){var sXmlNew=sXml.replace(sReplaceWhat,sReplaceTo);var oXmlDoc=new ITHit.XMLDoc;oXmlDoc.load(sXmlNew);if(oResolver){var oNs=oResolver.getAll();for(var sAlias in oNs)if(sReplaceWhat==oNs[sAlias]){oNs.add(sAlias,sReplaceTo);break}}oContext=oXmlDoc._get();bIsSetProp=true;bChangedNs=true}}if(bIsSetProp&&oResolver&&oResolver.length()){var oNsPairs=oResolver.getAll();var aNs=[];for(var sAlias in oNsPairs)aNs.push("xmlns:"+sAlias+"='"+oNsPairs[sAlias]+
"'");oContext.setProperty("SelectionNamespaces",aNs.join(" "))}if(bChangedNs)oContext=oContext.documentElement;try{if(!_bSelectSingle)if(!oResult)return new ITHit.XPath.result(oContext.selectNodes(sExpression));else{oResult._res=oContext.selectNodes(sExpression);return}else{var mOut=oContext.selectSingleNode(sExpression);if(mOut)return new ITHit.XMLDoc(mOut);else return mOut}}catch(e){if(!bIsSetProp&&-1!=e.message.indexOf("Reference to undeclared namespace prefix")&&oResolver&&oResolver.length()){var sEl=
(new ITHit.XMLDoc(oContext)).toString();var oEl=new ITHit.XMLDoc;oEl.load(sEl);oContext=oEl._get();var oNsPairs=oResolver.getAll();var aNs=[];for(var sAlias in oNsPairs)aNs.push("xmlns:"+sAlias+"='"+oNsPairs[sAlias]+"'");oContext.setProperty("SelectionNamespaces",aNs.join(" "));oContext=oContext.documentElement;if(!_bSelectSingle)if(!oResult)return new ITHit.XPath.result(oContext.selectNodes(sExpression));else{oResult._res=oContext.selectNodes(sExpression);return}else{var mOut=oContext.selectSingleNode(sExpression);
if(mOut)return new ITHit.XMLDoc(mOut);else return mOut}}else throw new ITHit.Exceptions.XPathException('Evaluation failed for searching "'+sExpression+'".',e);}}throw new ITHit.Exceptions.XPathException("XPath support is not implemented for your browser.");};ITHit.XPath.selectSingleNode=function(sExpression,oXmlDom,oResolver){return ITHit.XPath.evaluate(sExpression,oXmlDom,oResolver,false,true)};ITHit.XPath.resolver=function(){this._ns={};this._length=0};
ITHit.XPath.resolver.prototype.add=function(sAlias,sNs){this._ns[sAlias]=sNs;this._length++};ITHit.XPath.resolver.prototype.remove=function(sAlias){delete this._ns[sAlias];this._length--};ITHit.XPath.resolver.prototype.get=function(sAlias){return this._ns[sAlias]||null};ITHit.XPath.resolver.prototype.lookupNamespaceURI=ITHit.XPath.resolver.prototype.get;ITHit.XPath.resolver.prototype.getAll=function(){var oOut={};for(var sAlias in this._ns)oOut[sAlias]=this._ns[sAlias];return oOut};
ITHit.XPath.resolver.prototype.length=function(){return this._length};ITHit.XPath.result=function(oResult){this._res=oResult;this._i=0;this.length=oResult.length?oResult.length:oResult.snapshotLength};ITHit.XPath.result.ANY_TYPE=0;ITHit.XPath.result.NUMBER_TYPE=1;ITHit.XPath.result.STRING_TYPE=2;ITHit.XPath.result.BOOLEAN_TYPE=3;ITHit.XPath.result.UNORDERED_NODE_ITERATOR_TYPE=4;ITHit.XPath.result.ORDERED_NODE_ITERATOR_TYPE=5;ITHit.XPath.result.UNORDERED_NODE_SNAPSHOT_TYPE=6;
ITHit.XPath.result.ORDERED_NODE_SNAPSHOT_TYPE=7;ITHit.XPath.result.ANY_UNORDERED_NODE_TYPE=8;ITHit.XPath.result.FIRST_ORDERED_NODE_TYPE=9;ITHit.XPath.result.prototype.iterateNext=function(iIndex){var mOut;if(!iIndex)if(!this._res.snapshotItem)try{mOut=this._res[this._i++]}catch(e){return null}else mOut=this._res.snapshotItem(this._i++);else mOut=this._res[iIndex];if(mOut)return new ITHit.XMLDoc(mOut);else return mOut};ITHit.XPath.result.prototype.snapshotItem=ITHit.XPath.result.prototype.iterateNext;
ITHit.XPath.result.prototype.type=function(){return this._res.resultType};ITHit.XPath.result.prototype._get=function(){return this._res};ITHit.oNS=ITHit.Declare("ITHit.Exceptions");ITHit.oNS.XMLDocException=function(sMessage,oInnerException){ITHit.Exceptions.XMLDocException.baseConstructor.call(this,sMessage,oInnerException)};ITHit.Extend(ITHit.oNS.XMLDocException,ITHit.Exception);ITHit.oNS.XMLDocException.prototype.Name="XMLDocException";
ITHit.XMLDoc=function(){var _actXObj;var NODE_ELEMENT=1;var NODE_ATTRIBUTE=2;var NODE_TEXT=3;var NODE_CDATA_SECTION=4;var NODE_ENTITY_REFERENCE=5;var NODE_ENTITY=6;var NODE_PROCESSING_INSTRUCTION=7;var NODE_COMMENT=8;var NODE_DOCUMENT=9;var NODE_DOCUMENT_TYPE=10;var NODE_DOCUMENT_FRAGMENT=11;var NODE_NOTATION=12;var XMLDoc=function(oDomElem){this._xml=null;this._encoding=null;if(null!==oDomElem)if(!oDomElem||"object"!=typeof oDomElem){if(undefined!==window.ActiveXObject)if(_actXObj)this._xml=new window.ActiveXObject(_actXObj);
else{var aComponents=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.4.0","Msxml2.DOMDocument.3.0"];var aVers=[6,4,3];for(var i=0;i<aComponents.length;i++)try{this._xml=new window.ActiveXObject(aComponents[i]);XMLDoc._version=aVers[i];_actXObj=aComponents[i];break}catch(e){if(3==aVers[i])throw new ITHit.Exception("XML component is not supported.");}}else if(document.implementation&&document.implementation.createDocument)this._xml=document.implementation.createDocument("","",null);if(undefined===this._xml)throw new ITHit.Exceptions.XMLDocException("XML support for current browser is not implemented.");
this._xml.async=false}else this._xml=oDomElem;else{this._xml=null;return null}};XMLDoc._version=0;XMLDoc.prototype.contentEncoding=function(sEncoding){if(undefined!==sEncoding)this._encoding=sEncoding;return this._encoding};XMLDoc.prototype.load=function(sXmlText){if(!ITHit.Utils.IsString(sXmlText))throw new ITHit.Exceptions.XMLDocException("String was expected for xml parsing.");if(!sXmlText)return new XMLDoc;var oDoc;if(undefined!==window.ActiveXObject)try{if(3==XMLDoc._version)sXmlText=sXmlText.replace(/(?:urn:uuid:c2f41010\-65b3\-11d1\-a29f\-00aa00c14882\/)/g,
"cutted");if(XMLDoc._version)this._xml.loadXML(sXmlText);else{var oXmlDoc=new XMLDoc;if(3==XMLDoc._version)sXmlText=sXmlText.replace(/(?:urn:uuid:c2f41010\-65b3\-11d1\-a29f\-00aa00c14882\/)/g,"cutted");oXmlDoc.load(sXmlText);this._xml=oXmlDoc._get()}}catch(e){var oError=e}else if(document.implementation.createDocument)try{var oParser=new DOMParser;oDoc=oParser.parseFromString(sXmlText,"text/xml");this._xml=oDoc}catch(e){var oError=e}else throw new ITHit.Exceptions.XMLDocException("Cannot create XML parser object. Support for current browser is not implemented.");
if(undefined!==oError)throw new ITHit.Exceptions.XMLDocException("ITHit.XMLDoc.load() method failed.\nPossible reason: syntax error in passed XML string.",oError);};XMLDoc.prototype.appendChild=function(oNode){if(!oNode instanceof ITHit.XMLDoc)throw ITHit.Exceptions.XMLDocException("Instance of XMLDoc was expected in appendChild method.");this._xml.appendChild(oNode._get())};XMLDoc.prototype.createElement=function(sElementName){return new XMLDoc(this._xml.createElement(sElementName))};XMLDoc.prototype.createElementNS=
function(sNS,sElementName){if(this._xml.createElementNS){var oElement=this._xml.createElementNS(sNS,sElementName);return new ITHit.XMLDoc(oElement)}else try{return new XMLDoc(this._xml.createNode(NODE_ELEMENT,sElementName,sNS))}catch(e){throw new ITHit.Exceptions.XMLDocException("Node is not created.",e);}throw new ITHit.Exceptions.XMLDocException("createElementNS for current browser is not implemented.");};XMLDoc.prototype.createTextNode=function(sText){return new XMLDoc(this._xml.createTextNode(sText))};
XMLDoc.prototype.getElementById=function(sId){return new XMLDoc(this._xml.getElementById(sId))};XMLDoc.prototype.getElementsByTagName=function(sTagName){return new XMLDoc(this._xml.getElementsByTagName(sTagName))};XMLDoc.prototype.childNodes=function(){var oNodes=this._xml.childNodes;var oRetNodes=[];for(var i=0;i<oNodes.length;i++)oRetNodes.push(new ITHit.XMLDoc(oNodes[i]));return oRetNodes};XMLDoc.prototype.getElementsByTagNameNS=function(sNamespace,sTagName){if(this._xml.getElementsByTagNameNS)var oNode=
this._xml.getElementsByTagNameNS(sNamespace,sTagName);else{var sElem=this.toString();var oXmlDoc=new ITHit.XMLDoc;oXmlDoc.load(sElem);var oResolver=new ITHit.XPath.resolver;oResolver.add("a",sNamespace);var oRes=ITHit.XPath.evaluate("//a:"+sTagName,oXmlDoc,oResolver);var oNode=oRes._get()}var aRet=[];for(var i=0;i<oNode.length;i++){var oNodeI=new ITHit.XMLDoc(oNode[i]);aRet.push(oNodeI)}return aRet};XMLDoc.prototype.setAttribute=function(sName,mValue){this._xml.setAttribute(sName,mValue)};XMLDoc.prototype.hasAttribute=
function(sName){return this._xml.hasAttribute(sName)};XMLDoc.prototype.getAttribute=function(sName){return this._xml.getAttribute(sName)};XMLDoc.prototype.removeAttribute=function(sName){this._xml.removeAttribute(sName)};XMLDoc.prototype.hasAttributeNS=function(sName){return this._xml.hasAttribute(sName)};XMLDoc.prototype.getAttributeNS=function(sName){return this._xml.getAttribute(sName)};XMLDoc.prototype.removeAttributeNS=function(sName){this._xml.removeAttribute(sName)};XMLDoc.prototype.removeChild=
function(oNode){if(!oNode instanceof ITHit.XMLDoc)throw ITHit.Exceptions.XMLDocException("Instance of XMLDoc was expected in ITHit.XMLDoc.removeChild() method.");this._xml.removeChild(oNode);return new ITHit.XMLDoc(oNode)};XMLDoc.prototype.removeNode=function(oNode){if(!oNode instanceof ITHit.XMLDoc)throw ITHit.Exceptions.XMLDocException("Instance of XMLDoc was expected in ITHit.XMLDoc.removeNode() method.");oNode=oNode._get();if(oNode.removeNode)return new XMLDoc(oNode.removeNode(true));else return new XMLDoc(oNode.parentNode.removeChild(oNode))};
XMLDoc.prototype.cloneNode=function(bWithChildren){if(undefined===bWithChildren)bWithChildren=true;return new ITHit.XMLDoc(this._xml.cloneNode(bWithChildren))};XMLDoc.prototype.getProperty=function(sPropName){return this._xml[sPropName]};XMLDoc.prototype.setProperty=function(sPropName,mValue){this._xml[sPropName]=mValue};XMLDoc.prototype.nodeName=function(){return this._xml.nodeName};XMLDoc.prototype.nextSibling=function(){return new ITHit.XMLDoc(this._xml.nextSibling)};XMLDoc.prototype.namespaceURI=
function(){return this._xml.namespaceURI};XMLDoc.prototype.hasChildNodes=function(){return this._xml&&this._xml.hasChildNodes()};XMLDoc.prototype.firstChild=function(){return new XMLDoc(this._xml.firstChild)};XMLDoc.prototype.localName=function(){return this._xml.localName||this._xml.baseName};XMLDoc.prototype.nodeValue=function(){var mValue="";if(this._xml)mValue=this._xml.nodeValue;if("object"!=typeof mValue)return mValue;else return new ITHit.XMLDoc(mValue)};XMLDoc.prototype.nodeType=function(){return this._xml.nodeType};
XMLDoc.prototype._get=function(){return this._xml};XMLDoc.prototype.toString=function(bWithoutDeclaration){return XMLDoc.toString(this._xml,this._encoding,bWithoutDeclaration)};XMLDoc.toString=function(oXmlObj,sEncoding,bWithoutDeclaration){if(!oXmlObj)throw new ITHit.Exceptions.XMLDocException("ITHit.XMLDoc: XML object expected.");var sOutput="";var bRaiseException=true;if(undefined!==oXmlObj.xml){sOutput=oXmlObj.xml.replace(/^\s+|\s+$/g,"");bRaiseException=false}else if(document.implementation.createDocument&&
undefined!==XMLSerializer){sOutput=(new XMLSerializer).serializeToString(oXmlObj);bRaiseException=false}if(sOutput){if(sEncoding)sEncoding=' encoding="'+this._encoding+'"';else sEncoding="";var sOut=(!bWithoutDeclaration?'<?xml version="1.0"'+sEncoding+"?>":"")+sOutput.replace(/^<\?xml[^?]+\?>/,"");return sOut}if(bRaiseException)throw new ITHit.Exceptions.XMLDocException("XML parser object is not created.");return sOutput};return XMLDoc}();
ITHit.XMLDoc.nodeTypes={NODE_ELEMENT:1,NODE_ATTRIBUTE:2,NODE_TEXT:3,NODE_CDATA_SECTION:4,NODE_ENTITY_REFERENCE:5,NODE_ENTITY:6,NODE_PROCESSING_INSTRUCTION:7,NODE_COMMENT:8,NODE_DOCUMENT:9,NODE_DOCUMENT_TYPE:10,NODE_DOCUMENT_FRAGMENT:11,NODE_NOTATION:12};ITHit.oNS=ITHit.Declare("ITHit.Exceptions");ITHit.oNS.ArgumentException=function(sMessage,sVariable){sMessage+=' Variable name: "'+sVariable+'"';ITHit.Exceptions.ArgumentException.baseConstructor.call(this,sMessage)};
ITHit.Extend(ITHit.oNS.ArgumentException,ITHit.Exception);ITHit.oNS.ArgumentException.prototype.Name="ArgumentException";ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client");ITHit.oNS.Depth=function(mValue){this.Value=mValue};
ITHit.oNS.Depth.Parse=function(sValue){var oNsDepth=ITHit.WebDAV.Client.Depth;switch(sValue.toLowerCase()){case "0":return oNsDepth.Zero;break;case "1":return oNsDepth.One;break;case "infinity":return oNsDepth.Infinity;break;default:throw new ITHit.Exceptions.ArgumentException(ITHit.Phrases.Exceptions.InvalidDepthValue,"sValue");}};ITHit.oNS.Depth.Zero=new ITHit.oNS.Depth(0);ITHit.oNS.Depth.One=new ITHit.oNS.Depth(1);ITHit.oNS.Depth.Infinity=new ITHit.oNS.Depth("Infinity");ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.Methods");
ITHit.oNS.HttpMethod=function(){};ITHit.oNS=ITHit.Declare("ITHit.Exceptions");ITHit.oNS.ArgumentNullException=function(sVariable){var sMessage='Variable "'+sVariable+'" nas null value.';ITHit.Exceptions.ArgumentNullException.baseConstructor.call(this,sMessage)};ITHit.Extend(ITHit.oNS.ArgumentNullException,ITHit.Exception);ITHit.oNS.ArgumentNullException.prototype.Name="ArgumentNullException";ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client");ITHit.oNS.WebDavUtil={};
ITHit.oNS.WebDavUtil.VerifyArgumentNotNull=function(oArgument,sArgumentName){if(null===oArgument)throw new ITHit.Exceptions.ArgumentNullException(sArgumentName);};ITHit.oNS.WebDavUtil.VerifyArgumentNotNullOrEmpty=function(oArgument,sArgumentName){if(null===oArgument||""===oArgument)throw new ITHit.Exceptions.ArgumentNullException(sArgumentName);};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client");
ITHit.oNS.PropertyName=function(sName,sNamespaceUri){ITHit.WebDAV.Client.WebDavUtil.VerifyArgumentNotNullOrEmpty(sName,"sName");this.Name=sName;this.NamespaceUri=sNamespaceUri};ITHit.oNS.PropertyName.prototype.toString=function(){return this.NamespaceUri+":"+this.Name};ITHit.oNS.PropertyName.prototype.Equals=function(oObj){if(this==oObj)return true;if(!oObj instanceof ITHit.WebDAV.Client.PropertyName)return false;return this.Name===oObj.Name&&this.NamespaceUri===oObj.NamespaceUri};
ITHit.oNS.PropertyName.prototype.IsStandardProperty=function(){var oNsCl=ITHit.WebDAV.Client;var oNsPropName=oNsCl.PropertyName;var oNsDavConst=oNsCl.DavConstants;if(!oNsPropName.StandardNames)oNsPropName.StandardNames=[oNsDavConst.ResourceType,oNsDavConst.DisplayName,oNsDavConst.CreationDate,oNsDavConst.GetLastModified,oNsDavConst.GetContentLength,oNsDavConst.GetContentType,oNsDavConst.GetETag,oNsDavConst.IsCollection,oNsDavConst.IsFolder,oNsDavConst.IsHidden,oNsDavConst.SupportedLock,oNsDavConst.LockDiscovery,
oNsDavConst.GetContentLanguage,oNsDavConst.Source,oNsDavConst.QuotaAvailableBytes,oNsDavConst.QuotaUsedBytes,new oNsPropName("Win32FileAttributes","urn:schemas-microsoft-com:")];for(var i=0;i<oNsPropName.StandardNames.length;i++)if(this.Equals(oNsPropName.StandardNames[i]))return true;return false};ITHit.oNS.PropertyName.prototype.HasDavNamespace=function(){var oNsCl=ITHit.WebDAV.Client;return this.NamespaceUri===oNsCl.DavConstants.NamespaceUri};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client");
(function(){var oNsPropName=ITHit.WebDAV.Client.PropertyName;var sNamespaceUri="DAV:";ITHit.oNS.DavConstants={NamespaceUri:sNamespaceUri,Comment:new oNsPropName("comment",sNamespaceUri),CreationDate:new oNsPropName("creationdate",sNamespaceUri),CreatorDisplayName:new oNsPropName("creator-displayname",sNamespaceUri),DisplayName:new oNsPropName("displayname",sNamespaceUri),GetContentLength:new oNsPropName("getcontentlength",sNamespaceUri),GetContentType:new oNsPropName("getcontenttype",sNamespaceUri),
GetETag:new oNsPropName("getetag",sNamespaceUri),GetLastModified:new oNsPropName("getlastmodified",sNamespaceUri),IsCollection:new oNsPropName("iscollection",sNamespaceUri),IsFolder:new oNsPropName("isFolder",sNamespaceUri),IsHidden:new oNsPropName("ishidden",sNamespaceUri),ResourceType:new oNsPropName("resourcetype",sNamespaceUri),SupportedLock:new oNsPropName("supportedlock",sNamespaceUri),LockDiscovery:new oNsPropName("lockdiscovery",sNamespaceUri),GetContentLanguage:new oNsPropName("getcontentlanguage",
sNamespaceUri),Source:new oNsPropName("source",sNamespaceUri),QuotaAvailableBytes:new oNsPropName("quota-available-bytes",sNamespaceUri),QuotaUsedBytes:new oNsPropName("quota-used-bytes",sNamespaceUri),VersionName:new oNsPropName("version-name",sNamespaceUri),CheckedIn:new oNsPropName("checked-in",sNamespaceUri),CheckedOut:new oNsPropName("checked-out",sNamespaceUri),Src:"src",Dst:"dst",Link:"link",Slash:"/",DepndencyFailedCode:424,LockedCode:423,OpaqueLockToken:"opaquelocktoken:",QuotaNotExceeded:new oNsPropName("quota-not-exceeded",
sNamespaceUri),SufficientDiskSpace:new oNsPropName("sufficient-disk-space",sNamespaceUri)}})();ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client");ITHit.oNS.HttpStatus=function(iCode,sDescription){this.Code=iCode;this.Description=sDescription};ITHit.oNS.HttpStatus.None=new ITHit.oNS.HttpStatus(0,"");ITHit.oNS.HttpStatus.Unauthorized=new ITHit.oNS.HttpStatus(401,"Unauthorized");ITHit.oNS.HttpStatus.OK=new ITHit.oNS.HttpStatus(200,"OK");ITHit.oNS.HttpStatus.Created=new ITHit.oNS.HttpStatus(201,"Created");
ITHit.oNS.HttpStatus.NoContent=new ITHit.oNS.HttpStatus(204,"No Content");ITHit.oNS.HttpStatus.PartialContent=new ITHit.oNS.HttpStatus(206,"Partial Content");ITHit.oNS.HttpStatus.MultiStatus=new ITHit.oNS.HttpStatus(207,"Multi-Status");ITHit.oNS.HttpStatus.Redirect=new ITHit.oNS.HttpStatus(278,"Redirect");ITHit.oNS.HttpStatus.BadRequest=new ITHit.oNS.HttpStatus(400,"Bad Request");ITHit.oNS.HttpStatus.NotFound=new ITHit.oNS.HttpStatus(404,"Not Found");
ITHit.oNS.HttpStatus.MethodNotAllowed=new ITHit.oNS.HttpStatus(405,"Method Not Allowed");ITHit.oNS.HttpStatus.PreconditionFailed=new ITHit.oNS.HttpStatus(412,"Precondition Failed");ITHit.oNS.HttpStatus.Locked=new ITHit.oNS.HttpStatus(423,"Locked");ITHit.oNS.HttpStatus.DependencyFailed=new ITHit.oNS.HttpStatus(424,"Dependency Failed");ITHit.oNS.HttpStatus.Forbidden=new ITHit.oNS.HttpStatus(403,"Forbidden");ITHit.oNS.HttpStatus.Conflict=new ITHit.oNS.HttpStatus(409,"Conflict");
ITHit.oNS.HttpStatus.NotImplemented=new ITHit.oNS.HttpStatus(501,"Not Implemented");ITHit.oNS.HttpStatus.BadGateway=new ITHit.oNS.HttpStatus(502,"Bad gateway");ITHit.oNS.HttpStatus.InsufficientStorage=new ITHit.oNS.HttpStatus(507,"Insufficient Storage");ITHit.oNS.HttpStatus.Parse=function(sStatus){var aParts=sStatus.split(" ");var iStatus=parseInt(aParts[1]);aParts.splice(0,2);return new ITHit.WebDAV.Client.HttpStatus(iStatus,aParts.join(" "))};
ITHit.oNS.HttpStatus.prototype.Equals=function(oHttpStatus){if(!oHttpStatus||!(oHttpStatus instanceof ITHit.WebDAV.Client.HttpStatus))return false;return this.Code==oHttpStatus.Code};ITHit.oNS.HttpStatus.prototype.IsCreateOk=function(){return this.Equals(ITHit.WebDAV.Client.HttpStatus.Created)};ITHit.oNS.HttpStatus.prototype.IsDeleteOk=function(){var oNsHttpStat=ITHit.WebDAV.Client.HttpStatus;return this.Equals(oNsHttpStat.OK)||this.Equals(oNsHttpStat.NoContent)};
ITHit.oNS.HttpStatus.prototype.IsOk=function(){return this.Equals(ITHit.WebDAV.Client.HttpStatus.OK)};ITHit.oNS.HttpStatus.prototype.IsCopyMoveOk=function(){var oNsHttpStat=ITHit.WebDAV.Client.HttpStatus;return this.Equals(oNsHttpStat.NoContent)||this.Equals(oNsHttpStat.Created)};ITHit.oNS.HttpStatus.prototype.IsGetOk=function(){var oNsHttpStat=ITHit.WebDAV.Client.HttpStatus;return this.Equals(oNsHttpStat.OK)||this.Equals(oNsHttpStat.PartialContent)};
ITHit.oNS.HttpStatus.prototype.IsPutOk=function(){var oNsHttpStat=ITHit.WebDAV.Client.HttpStatus;return this.Equals(oNsHttpStat.OK)||this.Equals(oNsHttpStat.Created)||this.Equals(oNsHttpStat.NoContent)};ITHit.oNS.HttpStatus.prototype.IsUnlockOk=function(){var oNsHttpStat=ITHit.WebDAV.Client.HttpStatus;return this.Equals(oNsHttpStat.OK)||this.Equals(oNsHttpStat.NoContent)};
ITHit.oNS.HttpStatus.prototype.IsHeadOk=function(){var oNsHttpStat=ITHit.WebDAV.Client.HttpStatus;return this.Equals(oNsHttpStat.OK)||this.Equals(oNsHttpStat.NotFound)};ITHit.oNS.HttpStatus.prototype.IsUpdateOk=function(){var oNsHttpStat=ITHit.WebDAV.Client.HttpStatus;return this.Equals(oNsHttpStat.OK)||this.Equals(oNsHttpStat.None)};ITHit.oNS.HttpStatus.prototype.IsSuccess=function(){return parseInt(this.Code/100)==2};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client");
ITHit.oNS.Property=function(mOne,mTwo,mThree){this.Name;this.Value;var oNsCl=ITHit.WebDAV.Client;switch(arguments.length){case 1:var oElement=mOne;oNsCl.WebDavUtil.VerifyArgumentNotNull(oElement,"oElement");this.Name=new oNsCl.PropertyName(oElement.localName(),oElement.namespaceURI());this.Value=oElement;break;case 2:var oName=mOne,sStringValue=mTwo;oNsCl.WebDavUtil.VerifyArgumentNotNull(oName,"oName");oNsCl.WebDavUtil.VerifyArgumentNotNull(sStringValue,"sStringValue");this.Name=oName;var oXmlDoc=
new ITHit.XMLDoc,oElem=oXmlDoc.createElementNS(oName.NamespaceUri,oName.Name);oElem.appendChild(oXmlDoc.createTextNode(sStringValue));this.Value=oElem;break;case 3:var sName=mOne,sValue=mTwo,sNameSpace=mThree;oNsCl.WebDavUtil.VerifyArgumentNotNullOrEmpty(sName,"sName");oNsCl.WebDavUtil.VerifyArgumentNotNull(sValue,"sValue");oNsCl.WebDavUtil.VerifyArgumentNotNullOrEmpty(sNameSpace,"sNameSpace");this.Name=new oNsCl.PropertyName(sName,sNameSpace);var oXmlDoc=new ITHit.XMLDoc,oElem=oXmlDoc.createElementNS(sNameSpace,
sName);oElem.appendChild(oXmlDoc.createTextNode(sValue));this.Value=oElem;break;default:throw ITHit.Exception(ITHit.Phrases.Exceptions.WrongCountPropertyInputParameters.Paste(arguments.length));}};ITHit.oNS.Property.prototype.StringValue=function(){return this.Value.firstChild().nodeValue()};ITHit.oNS.Property.prototype.toString=function(){return this.Name.toString()};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.Methods");
ITHit.oNS.Propstat=function(oElement){this.PropertiesByNames={};this.Properties=[];this.ResponseDescription="";this.Status="";var oNsCl=ITHit.WebDAV.Client;var oNode;var oResolver=new ITHit.XPath.resolver;oResolver.add("d",oNsCl.DavConstants.NamespaceUri);if(oNode=ITHit.XPath.selectSingleNode("d:responsedescription",oElement,oResolver))this.ResponseDescription=oNode.firstChild().nodeValue();oNode=ITHit.XPath.selectSingleNode("d:status",oElement,oResolver);this.Status=oNsCl.HttpStatus.Parse(oNode.firstChild().nodeValue());
var oRes=ITHit.XPath.evaluate("d:prop/*",oElement,oResolver);while(oNode=oRes.iterateNext()){var oProperty=new oNsCl.Property(oNode.cloneNode());var sPropName=oProperty.Name;if("undefined"==typeof this.PropertiesByNames[sPropName])this.PropertiesByNames[sPropName]=oProperty;else{var aChildNodes=oNode.childNodes();for(var i=0;i<aChildNodes.length;i++)this.PropertiesByNames[sPropName].Value.appendChild(aChildNodes[i])}this.Properties.push(oProperty)}};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.Methods");
ITHit.oNS.Response=function(oResponseItem,sOriginalUri){this.Href="";this.ResponseDescription="";this.Status="";this.Propstats=[];var oNsCl=ITHit.WebDAV.Client;var oNsMethods=oNsCl.Methods;var oNode;var oResolver=new ITHit.XPath.resolver;oResolver.add("d",oNsCl.DavConstants.NamespaceUri);this.Href=ITHit.XPath.selectSingleNode("d:href",oResponseItem,oResolver).firstChild().nodeValue();if(oNode=ITHit.XPath.selectSingleNode("d:responsedescription",oResponseItem,oResolver))this.ResponseDescription=oNode.firstChild().nodeValue();
if(oNode=ITHit.XPath.selectSingleNode("d:status",oResponseItem,oResolver))this.Status=oNsCl.HttpStatus.Parse(oNode.firstChild().nodeValue());var oRes=ITHit.XPath.evaluate("d:propstat",oResponseItem,oResolver);while(oNode=oRes.iterateNext())this.Propstats.push(new oNsMethods.Propstat(oNode.cloneNode()))};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.Methods");
ITHit.oNS.MultiResponse=function(oXmlDoc,sOriginalUri){this.ResponseDescription="";this.Responses=[];var oNsCl=ITHit.WebDAV.Client;var oNsResponse=oNsCl.Methods.Response;var oResolver=new ITHit.XPath.resolver;oResolver.add("d",oNsCl.DavConstants.NamespaceUri);var oRes=ITHit.XPath.evaluate("/d:multistatus/d:response",oXmlDoc,oResolver);var oNode;while(oNode=oRes.iterateNext())this.Responses.push(new oNsResponse(oNode.cloneNode(),sOriginalUri));ITHit.XPath.evaluate("/d:multistatus/d:responsedescription",
oXmlDoc,oResolver,oRes);if(oNode=oRes.iterateNext())this.ResponseDescription=oNode.firstChild().nodeValue()};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client");ITHit.oNS.AsyncResult=function(oResult,bSuccess,oError){this.Result=oResult;this.IsSuccess=bSuccess;this.Error=oError};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.Methods");ITHit.oNS.Propfind=function(oResponse){ITHit.WebDAV.Client.Methods.Propfind.baseConstructor.call(this);this.Response=oResponse};ITHit.Extend(ITHit.oNS.Propfind,ITHit.oNS.HttpMethod);
ITHit.oNS.Propfind.PropfindMode={SelectedProperties:"SelectedProperties",PropertyNames:"PropertyNames"};
ITHit.oNS.Propfind.Go=function(oSession,sUri,iMode,aProperties,oDepth,sHost,fCallback){var oNsCl=ITHit.WebDAV.Client;var oNsPropfind=oNsCl.Methods.Propfind;var oRequest=oNsPropfind.createRequest(oSession,sUri,iMode,aProperties,oDepth,sHost);var self=this;var fOnResponse=typeof fCallback==="function"?function(oResult){self._GoCallback(oSession,sUri,oResult,fCallback)}:null;var oResponse=oRequest.GetResponse(fOnResponse);if(typeof fCallback!=="function"){var oResult=new oNsCl.AsyncResult(oResponse,
oResponse!=null,null);return this._GoCallback(oSession,sUri,oResult,fCallback)}else return oRequest};
ITHit.oNS.Propfind._GoCallback=function(oSession,sUri,oResult,fCallback){var oNsCl=ITHit.WebDAV.Client;var oResponse=oResult;var bSuccess=true;var oError=null;if(oResult instanceof ITHit.WebDAV.Client.AsyncResult){oResponse=oResult.Result;bSuccess=oResult.IsSuccess;oError=oResult.Error}var oPropfind=null;if(bSuccess){var oResponseData=oResponse.GetResponseStream();ITHit.Logger.FinishRequest();var oMultiResponse=new oNsCl.Methods.MultiResponse(oResponseData,sUri);var oNsPropfind=oNsCl.Methods.Propfind;
oPropfind=new oNsPropfind(oMultiResponse)}if(typeof fCallback==="function"){var oPropfindResult=new oNsCl.AsyncResult(oPropfind,bSuccess,oError);fCallback.call(this,oPropfindResult)}else return oPropfind};
ITHit.oNS.Propfind.createRequest=function(oSession,sUri,iMode,aProperties,oDepth,sHost){var oRequest=oSession.CreateRequest(sHost,sUri);oRequest.Method("PROPFIND");oRequest.Headers.Add("Depth",oDepth.Value);oRequest.Headers.Add("Content-Type",'text/xml; charset="utf-8"');oRequest.LogRequestInfo();var oNsCl=ITHit.WebDAV.Client;var oNsMethods=oNsCl.Methods;var oWriter=new ITHit.XMLDoc;var propfind=oWriter.createElementNS(oNsCl.DavConstants.NamespaceUri,"propfind");switch(iMode){case oNsMethods.Propfind.PropfindMode.SelectedProperties:if(!aProperties||
!aProperties.length)var propEl=oWriter.createElementNS(oNsCl.DavConstants.NamespaceUri,"allprop");else{var propEl=oWriter.createElementNS(oNsCl.DavConstants.NamespaceUri,"prop");for(var i=0;i<aProperties.length;i++){var prop=oWriter.createElementNS(aProperties[i].NamespaceUri,aProperties[i].Name);propEl.appendChild(prop)}}break;case oNsMethods.Propfind.PropfindMode.PropertyNames:var propEl=oWriter.createElementNS(oNsCl.DavConstants.NamespaceUri,"propname");break}propfind.appendChild(propEl);oWriter.appendChild(propfind);
oRequest.Body(oWriter);return oRequest};ITHit.oNS=ITHit.Namespace("ITHit.WebDAV.Client");ITHit.oNS.ResourceType={Folder:"Folder",Resource:"Resource"};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.Exceptions");ITHit.oNS.WebDavException=function(sMessage,oInnerException){ITHit.WebDAV.Client.Exceptions.WebDavException.baseConstructor.call(this,sMessage,oInnerException)};ITHit.Extend(ITHit.oNS.WebDavException,ITHit.Exception);ITHit.oNS.WebDavException.prototype.Name="WebDavException";ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client");
ITHit.oNS.IMultistatus=function(){};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client");ITHit.oNS.IMultistatusResponse=function(){};ITHit.oNSClient=ITHit.Declare("ITHit.WebDAV.Client");ITHit.oNS=ITHit.Declare("Exceptions.Info",ITHit.oNSClient);
ITHit.oNS.MultistatusResponse=function(oResponse){this.Href=oResponse.Href;this.Description=oResponse.ResponseDescription;this.Status=oResponse.Status;var oNsCl=ITHit.WebDAV.Client;for(var i=0;i<oResponse.Propstats.length;i++)if(oResponse.Propstats[i]!=oNsCl.HttpStatus.OK){this.Status=oResponse.Propstats[i];break}};ITHit.Extend(ITHit.oNS.MultistatusResponse,ITHit.oNSClient.IMultistatusResponse);ITHit.oNSClient=ITHit.Declare("ITHit.WebDAV.Client");ITHit.oNS=ITHit.Declare("Exceptions.Info",ITHit.oNSClient);
ITHit.oNS.Multistatus=function(oMultiResponse){var oNsInfo=ITHit.WebDAV.Client.Exceptions.Info;oNsInfo.Multistatus.baseConstructor.call(this);this.Description="";this.Responses=[];if(oMultiResponse){this.Description=oMultiResponse.ResponseDescription;for(var i=0;i<oMultiResponse.Responses.length;i++)this.Responses.push(new oNsInfo.MultistatusResponse(oMultiResponse.Responses[i]))}};ITHit.Extend(ITHit.oNS.Multistatus,ITHit.oNSClient.IMultistatus);ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.Exceptions");
ITHit.oNS.WebDavHttpException=function(sMessage,sHref,oMultistatus,oStatus,oInnerException,oError){var oNsCl=ITHit.WebDAV.Client;var oNsExpt=oNsCl.Exceptions;oNsExpt.WebDavHttpException.baseConstructor.call(this,sMessage,oInnerException);this.Multistatus=oMultistatus||new oNsExpt.Info.Multistatus;this.Status=oStatus;this.Uri=sHref;this.Error=oError};ITHit.Extend(ITHit.oNS.WebDavHttpException,ITHit.oNS.WebDavException);ITHit.oNS.WebDavHttpException.prototype.Name="WebDavHttpException";ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.Exceptions");
ITHit.oNS.PropertyException=function(sMessage,sHref,oPropertyName,oMultistatus,oStatus,oInnerException){var oNsCl=ITHit.WebDAV.Client;this.PropertyName=oPropertyName;oNsCl.Exceptions.PropertyException.baseConstructor.call(this,sMessage,sHref,oMultistatus,oStatus,oInnerException)};ITHit.Extend(ITHit.oNS.PropertyException,ITHit.oNS.WebDavHttpException);ITHit.oNS.PropertyException.prototype.Name="PropertyException";ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.Exceptions");
ITHit.oNS.PropertyNotFoundException=function(sMessage,sHref,oPropertyName,oMultistatus,oInnerException){var oNsCl=ITHit.WebDAV.Client;oNsCl.Exceptions.PropertyNotFoundException.baseConstructor.call(this,sMessage,sHref,oPropertyName,oMultistatus,oNsCl.HttpStatus.NotFound,oInnerException)};ITHit.Extend(ITHit.oNS.PropertyNotFoundException,ITHit.oNS.PropertyException);ITHit.oNS.PropertyNotFoundException.prototype.Name="PropertyNotFoundException";ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.Exceptions");
ITHit.oNS.PropertyForbiddenException=function(sMessage,sHref,oPropertyName,oMultistatus,oInnerException){var oNsCl=ITHit.WebDAV.Client;oNsCl.Exceptions.PropertyForbiddenException.baseConstructor.call(this,sMessage,sHref,oPropertyName,oMultistatus,oNsCl.HttpStatus.Forbidden,oInnerException)};ITHit.Extend(ITHit.oNS.PropertyForbiddenException,ITHit.oNS.PropertyException);ITHit.oNS.PropertyForbiddenException.prototype.Name="PropertyForbiddenException";ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client");
ITHit.oNS.IPropertyMultistatusResponse=function(){ITHit.WebDAV.Client.IPropertyMultistatusResponse.baseConstructor.call(this)};ITHit.Extend(ITHit.oNS.IPropertyMultistatusResponse,ITHit.oNS.IMultistatusResponse);ITHit.oNSClient=ITHit.Declare("ITHit.WebDAV.Client");ITHit.oNS=ITHit.Declare("Exceptions.Info",ITHit.oNSClient);
ITHit.oNS.PropertyMultistatusResponse=function(sHref,sDescription,oStatus,oPropertyName){ITHit.WebDAV.Client.Exceptions.Info.PropertyMultistatusResponse.baseConstructor.call(this);this.Href=sHref;this.Description=sDescription;this.Status=oStatus;this.PropertyName=oPropertyName};ITHit.Extend(ITHit.oNS.PropertyMultistatusResponse,ITHit.oNSClient.IPropertyMultistatusResponse);ITHit.oNSClient=ITHit.Declare("ITHit.WebDAV.Client");ITHit.oNS=ITHit.Declare("Exceptions.Info",ITHit.oNSClient);
ITHit.oNS.PropertyMultistatus=function(oMultiResponse){this.Description="";this.Responses=[];if(oMultiResponse){this.Description=oMultiResponse.ResponseDescription;var oNsMultistatPropResp=ITHit.WebDAV.Client.Exceptions.Info.PropertyMultistatusResponse;for(var i=0;i<oMultiResponse.Responses.length;i++){var oResponse=oMultiResponse.Responses[i];for(var j=0;j<oResponse.Propstats.length;j++){var oPropstat=oResponse.Propstats[j];for(var k=0;k<oPropstat.Properties.length;k++)this.Responses.push(new oNsMultistatPropResp(oResponse.Href,
oPropstat.ResponseDescription,oPropstat.Status,oPropstat.Properties[k].Name))}}}};ITHit.Extend(ITHit.oNS.PropertyMultistatus,ITHit.oNSClient.IMultistatus);ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client");ITHit.oNS.Encoder={Encode:ITHit.Encode,EncodeURI:ITHit.EncodeURI,Decode:ITHit.Decode,DecodeURI:ITHit.DecodeURI};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.Methods");ITHit.oNS.SingleResponse=function(oResponse){this.Status=oResponse.Status;this.ResponseDescription=oResponse.Status.Description};
ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.Methods");ITHit.oNS.ResponseFactory={};ITHit.oNS.ResponseFactory.GetResponse=function(oResponse,sOriginalUri){var oNsCl=ITHit.WebDAV.Client;var oResponseData=oResponse.GetResponseStream(oResponse);if(!oResponseData||!oResponse.Status.Equals(oNsCl.HttpStatus.MultiStatus))return new oNsCl.Methods.SingleResponse(oResponse);else return new oNsCl.Methods.MultiResponse(oResponseData,sOriginalUri)};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.Methods");
ITHit.oNS.CopyMove=function(oResponse){ITHit.WebDAV.Client.Methods.CopyMove.baseConstructor.call(this);this.Response=oResponse};ITHit.Extend(ITHit.oNS.CopyMove,ITHit.oNS.HttpMethod);ITHit.oNS.CopyMove.Mode={Copy:"Copy",Move:"Move"};
ITHit.oNS.CopyMove.Go=function(oSession,sMode,sSource,sDestination,bIsCollection,bDeep,bOverwrite,aLockTokens,sHost){var oRequest=this.createRequest(oSession,sMode,sSource,sDestination,bIsCollection,bDeep,bOverwrite,aLockTokens,sHost);var oResponse=oRequest.GetResponse();return this._ProcessResponse(oResponse,sSource)};
ITHit.oNS.CopyMove.GoAsync=function(oSession,sMode,sSource,sDestination,bIsCollection,bDeep,bOverwrite,aLockTokens,sHost,fCallback){var oRequest=this.createRequest(oSession,sMode,sSource,sDestination,bIsCollection,bDeep,bOverwrite,aLockTokens,sHost);var that=this;oRequest.GetResponse(function(oAsyncResult){if(!oAsyncResult.IsSuccess){fCallback(new ITHit.WebDAV.Client.AsyncResult(null,false,oAsyncResult.Error));return}var oResult=that._ProcessResponse(oAsyncResult.Result,sSource);fCallback(new ITHit.WebDAV.Client.AsyncResult(oResult,
true,null))});return oRequest};ITHit.oNS.CopyMove._ProcessResponse=function(oResponse,sSource){var oResp=ITHit.WebDAV.Client.Methods.ResponseFactory.GetResponse(oResponse,sSource);return new ITHit.WebDAV.Client.Methods.CopyMove(oResp)};
ITHit.oNS.CopyMove.createRequest=function(oSession,sMode,sSource,sDestination,bIsCollection,bDeep,bOverwrite,aLockTokens,sHost){var oNsCl=ITHit.WebDAV.Client;var oNsMethods=oNsCl.Methods;var oRequest=oSession.CreateRequest(sHost,sSource,aLockTokens);if(/^\//.test(sDestination))sDestination=sHost+sDestination.substr(1);oRequest.Method(sMode==oNsMethods.CopyMove.Mode.Copy?"COPY":"MOVE");oRequest.Headers.Add("Content-Type",'text/xml; charset="utf-8"');oRequest.Headers.Add("Destination",ITHit.DecodeHost(sDestination));
oRequest.Headers.Add("Overwrite",bOverwrite?"T":"F");if(bIsCollection&&sMode==oNsMethods.CopyMove.Mode.Copy)if(!bDeep)oRequest.Headers.Add("Depth",oNsCl.Depth.Zero.Value);var oWriter=new ITHit.XMLDoc;var propBehav=oWriter.createElementNS(oNsCl.DavConstants.NamespaceUri,"propertybehavior");var keepAlive=oWriter.createElementNS(oNsCl.DavConstants.NamespaceUri,"keepalive");keepAlive.appendChild(oWriter.createTextNode("*"));propBehav.appendChild(keepAlive);oWriter.appendChild(propBehav);oRequest.Body(oWriter);
return oRequest};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.Methods");ITHit.oNS.Delete=function(oResponse){ITHit.WebDAV.Client.Methods.Delete.baseConstructor.call(this);this.Response=oResponse};ITHit.Extend(ITHit.oNS.Delete,ITHit.oNS.HttpMethod);ITHit.oNS.Delete.Go=function(oSession,sHref,oLockTokens,sHost){var oRequest=this.createRequest(oSession,sHref,oLockTokens,sHost);var oResponse=oRequest.GetResponse();return this._ProcessResponse(oResponse)};
ITHit.oNS.Delete.GoAsync=function(oSession,sHref,oLockTokens,sHost,fCallback){var oRequest=this.createRequest(oSession,sHref,oLockTokens,sHost);var that=this;oRequest.GetResponse(function(oAsyncResult){if(!oAsyncResult.IsSuccess){fCallback(new ITHit.WebDAV.Client.AsyncResult(null,false,oAsyncResult.Error));return}var oResult=that._ProcessResponse(oAsyncResult.Result);fCallback(new ITHit.WebDAV.Client.AsyncResult(oResult,true,null))});return oRequest};
ITHit.oNS.Delete._ProcessResponse=function(oResponse,sHref){var oResp=ITHit.WebDAV.Client.Methods.ResponseFactory.GetResponse(oResponse,sHref);ITHit.Logger.FinishRequest();return new ITHit.WebDAV.Client.Methods.Delete(oResp)};ITHit.oNS.Delete.createRequest=function(oSession,sHref,oLockTokens,sHost){var oRequest=oSession.CreateRequest(sHost,sHref,oLockTokens);oRequest.Method("DELETE");return oRequest};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.Methods");
ITHit.oNS.Proppatch=function(oResponse){ITHit.WebDAV.Client.Methods.Proppatch.baseConstructor.call(this);this.Response=oResponse};ITHit.Extend(ITHit.oNS.Proppatch,ITHit.oNS.HttpMethod);
ITHit.oNS.Proppatch.Go=function(oSession,sHref,aPropsToAddOrUpdate,aPropsToDelete,sLockToken,sHost){var oNsCl=ITHit.WebDAV.Client;var oNsMethods=oNsCl.Methods;var oRequest=oNsMethods.Proppatch.createRequest(oSession,sHref,aPropsToAddOrUpdate,aPropsToDelete,sLockToken,sHost);var oResult=oRequest.GetResponse();ITHit.Logger.FinishRequest();return this._ProcessResponse(oResult)};
ITHit.oNS.Proppatch.GoAsync=function(oSession,sHref,aPropsToAddOrUpdate,aPropsToDelete,sLockToken,sHost,fCallback){var oNsCl=ITHit.WebDAV.Client;var oNsMethods=oNsCl.Methods;var oRequest=oNsMethods.Proppatch.createRequest(oSession,sHref,aPropsToAddOrUpdate,aPropsToDelete,sLockToken,sHost);var that=this;oRequest.GetResponse(function(oAsyncResult){ITHit.Logger.FinishRequest();if(!oAsyncResult.IsSuccess){fCallback(new ITHit.WebDAV.Client.AsyncResult(null,false,oAsyncResult.Error));return}var oResult=
that._ProcessResponse(oAsyncResult.Result,sHref);fCallback(new ITHit.WebDAV.Client.AsyncResult(oResult,true,null))})};ITHit.oNS.Proppatch._ProcessResponse=function(oResponse,sHref){var oNsCl=ITHit.WebDAV.Client;var oNsMethods=oNsCl.Methods;var oResponseData=oResponse.GetResponseStream();return new oNsMethods.Proppatch(new oNsMethods.MultiResponse(oResponseData,sHref))};ITHit.oNS.Proppatch.ItemExists=function(aArr){if(aArr&&aArr.length)for(var i=0;i<aArr.length;i++)if(aArr[i])return true;return false};
ITHit.oNS.Proppatch.createRequest=function(oSession,sHref,aPropsToAddOrUpdate,aPropsToDelete,sLockToken,sHost){sLockToken=sLockToken||null;var oNsCl=ITHit.WebDAV.Client;var oNsMethods=oNsCl.Methods;var oRequest=oSession.CreateRequest(sHost,sHref,sLockToken);oRequest.Method("PROPPATCH");oRequest.Headers.Add("Content-Type",'text/xml; charset="utf-8"');var oWriter=new ITHit.XMLDoc;var propUpd=oWriter.createElementNS(oNsCl.DavConstants.NamespaceUri,"propertyupdate");if(oNsMethods.Proppatch.ItemExists(aPropsToAddOrUpdate)){var set=
oWriter.createElementNS(oNsCl.DavConstants.NamespaceUri,"set");for(var i=0;i<aPropsToAddOrUpdate.length;i++)if(aPropsToAddOrUpdate[i]){var prop=oWriter.createElementNS(oNsCl.DavConstants.NamespaceUri,"prop");prop.appendChild(aPropsToAddOrUpdate[i].Value);set.appendChild(prop)}propUpd.appendChild(set)}if(oNsMethods.Proppatch.ItemExists(aPropsToDelete)){var remove=oWriter.createElementNS(oNsCl.DavConstants.NamespaceUri,"remove");var prop=oWriter.createElementNS(oNsCl.DavConstants.NamespaceUri,"prop");
for(var i=0;i<aPropsToDelete.length;i++)if(aPropsToDelete[i]){var elem=oWriter.createElementNS(aPropsToDelete[i].NamespaceUri,aPropsToDelete[i].Name);prop.appendChild(elem)}remove.appendChild(prop);propUpd.appendChild(remove)}oWriter.appendChild(propUpd);oRequest.Body(oWriter);return oRequest};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client");ITHit.oNS.LockScope={Exclusive:"Exclusive",Shared:"Shared"};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client");
ITHit.oNS.LockUriTokenPair=function(sHref,sLockToken){var oNsCl=ITHit.Namespace("ITHit.WebDAV.Client");oNsCl.WebDavUtil.VerifyArgumentNotNull(sHref,"href");oNsCl.WebDavUtil.VerifyArgumentNotNullOrEmpty(sLockToken,"lockToken");this.Href=sHref;this.LockToken=sLockToken};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client");ITHit.oNS.LockInfo=function(oLockScope,bDeep,sOwner,iTimeOut,oLockToken){this.LockScope=oLockScope;this.Deep=bDeep;this.TimeOut=iTimeOut;this.Owner=sOwner;this.LockToken=oLockToken};
ITHit.oNS.LockInfo.ParseLockInfo=function(oElement,sHref){var oNsCl=ITHit.WebDAV.Client;var oResolver=new ITHit.XPath.resolver;oResolver.add("d",oNsCl.DavConstants.NamespaceUri);var oNode;if(!(oNode=ITHit.XPath.selectSingleNode("d:lockscope",oElement,oResolver)))throw new oNsCl.Exceptions.WebDavException(ITHit.Phrases.Exceptions.ActiveLockDoesntContainLockscope);var oLockScope=oNode.firstChild().localName();if(!(oNode=ITHit.XPath.selectSingleNode("d:depth",oElement,oResolver)))throw new oNsCl.Exceptions.WebDavException(ITHit.Phrases.Exceptions.ActiveLockDoesntContainDepth);
var oDepthValue=oNsCl.Depth.Parse(oNode.firstChild().nodeValue());var bDeep=oDepthValue==oNsCl.Depth.Infinity;var sOwner=null;if(oNode=ITHit.XPath.selectSingleNode("d:owner",oElement,oResolver))sOwner=oNode.firstChild().nodeValue();var iTimeOut=-1;if(oNode=ITHit.XPath.selectSingleNode("d:timeout",oElement,oResolver)){var sTimeOut=oNode.firstChild().nodeValue();if("infinite"!=sTimeOut.toLowerCase()){if(-1!=sTimeOut.toLowerCase().indexOf("second-"))sTimeOut=sTimeOut.substr(7);var iTimeOut=parseInt(sTimeOut)}}var oLockToken=
null;if(oNode=ITHit.XPath.selectSingleNode("d:locktoken",oElement,oResolver)){var sLockTokenText=ITHit.XPath.selectSingleNode("d:href",oNode,oResolver).firstChild().nodeValue();sLockTokenText=sLockTokenText.replace(oNsCl.DavConstants.OpaqueLockToken,"");oLockToken=new oNsCl.LockUriTokenPair(sHref,sLockTokenText)}return new oNsCl.LockInfo(oLockScope,bDeep,sOwner,iTimeOut,oLockToken)};
ITHit.oNS.LockInfo.ParseLockDiscovery=function(oElement,sHref){var oNsCl=ITHit.WebDAV.Client;var aLocks=[];var aSearchedLocks=oElement.getElementsByTagNameNS(oNsCl.DavConstants.NamespaceUri,"activelock");for(var i=0;i<aSearchedLocks.length;i++)aLocks.push(oNsCl.LockInfo.ParseLockInfo(aSearchedLocks[i],sHref));return aLocks};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.Methods");
ITHit.oNS.LockResponse=function(oResponse,sHref){this.ResponseDescriptiono=oResponse.Status.Description;this.Status=oResponse.Status;this.LockInfo;var oNsCl=ITHit.WebDAV.Client;var oXmlDoc=oResponse.GetResponseStream();var oResolver=new ITHit.XPath.resolver;oResolver.add("d",oNsCl.DavConstants.NamespaceUri);var oProp=new oNsCl.Property(ITHit.XPath.selectSingleNode("/d:prop",oXmlDoc,oResolver));try{var oInfos=new oNsCl.LockInfo.ParseLockDiscovery(oProp.Value,sHref);if(1!=oInfos.length)throw new oNsCl.Exceptions.WebDavException(ITHit.Phrases.UnableToParseLockInfoResponse);
this.LockInfo=oInfos[0]}catch(e){throw new oNsCl.Exceptions.PropertyException(ITHit.Phrases.Exceptions.ParsingPropertiesException,sHref,oProp.Name,null,oNsCl.HttpStatus.OK,e);}};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.Methods");ITHit.oNS.Lock=function(oResponse){ITHit.WebDAV.Client.Methods.Lock.baseConstructor.call(this);this.Response=oResponse};ITHit.Extend(ITHit.oNS.Lock,ITHit.oNS.HttpMethod);
ITHit.oNS.Lock.Go=function(oSession,sHref,iTimeout,sLockTokenOrScope,sHost,bDeep,sOwner){var oNsCl=ITHit.WebDAV.Client;var oNsMethods=oNsCl.Methods;switch(arguments.length){case 7:var oRequest=oNsMethods.Lock.createRequest(oSession,sHref,iTimeout,sLockTokenOrScope,sHost,bDeep,sOwner);break;case 5:var oRequest=oNsMethods.Lock.createRequest(oSession,sHref,iTimeout,sLockTokenOrScope,sHost);break;default:throw new ITHit.Exception(ITHit.Phrases.Exceptions.LockWrongCountParametersPassed.Paste("Go",arguments.length));
}var oResponse=oRequest.GetResponse();var oLockResponse=new oNsMethods.LockResponse(oResponse,sHref);ITHit.Logger.FinishRequest();return new oNsMethods.Lock(oLockResponse)};
ITHit.oNS.Lock.createRequest=function(oSession,sHref,iTimeout,sLockTokenOrScope,sHost,bDeep,sOwner){var oNsCl=ITHit.WebDAV.Client;switch(arguments.length){case 7:var sLockScope=sLockTokenOrScope;var oRequest=oSession.CreateRequest(sHost,sHref);oRequest.Method("LOCK");oRequest.Headers.Add("Timeout",-1==iTimeout?"Infinite":"Second-"+parseInt(iTimeout));oRequest.Headers.Add("Depth",bDeep?oNsCl.Depth.Infinity.Value:oNsCl.Depth.Zero.Value);oRequest.Headers.Add("Content-Type",'text/xml; charset="utf-8"');
var oWriter=new ITHit.XMLDoc;var sNamespaceUri=oNsCl.DavConstants.NamespaceUri;var lockInfo=oWriter.createElementNS(sNamespaceUri,"lockinfo");var lockScope=oWriter.createElementNS(sNamespaceUri,"lockscope");var lockScopeData=oWriter.createElementNS(sNamespaceUri,sLockScope.toLowerCase());lockScope.appendChild(lockScopeData);var lockType=oWriter.createElementNS(sNamespaceUri,"locktype");var write=oWriter.createElementNS(sNamespaceUri,"write");lockType.appendChild(write);var owner=oWriter.createElementNS(sNamespaceUri,
"owner");owner.appendChild(oWriter.createTextNode(sOwner));lockInfo.appendChild(lockScope);lockInfo.appendChild(lockType);lockInfo.appendChild(owner);oWriter.appendChild(lockInfo);oRequest.Body(oWriter);break;case 5:var sLockToken=sLockTokenOrScope;var oRequest=oSession.CreateRequest(sHost,sHref,sLockToken);oRequest.Method("LOCK");oRequest.Headers.Add("Timeout",-1==iTimeout?"Infinite":"Second-"+parseInt(iTimeout));oRequest.Body("");break;default:throw new ITHit.Exception(ITHit.Phrases.Exceptions.LockWrongCountParametersPassed.Paste("createRequest",
arguments.length));}return oRequest};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.Methods");ITHit.oNS.Unlock=function(oResponse){ITHit.WebDAV.Client.Methods.Unlock.baseConstructor.call(this);this.Response=oResponse};ITHit.Extend(ITHit.oNS.Unlock,ITHit.oNS.HttpMethod);
ITHit.oNS.Unlock.Go=function(oSession,sHref,sLockToken,sHost){var oNsCl=ITHit.WebDAV.Client;var oNsMethods=oNsCl.Methods;var oRequest=oNsMethods.Unlock.createRequest(oSession,sHref,sLockToken,sHost);var oResponse=oRequest.GetResponse();var oUnlock=new oNsMethods.Unlock(new oNsMethods.SingleResponse(oResponse));ITHit.Logger.FinishRequest();return oUnlock};
ITHit.oNS.Unlock.createRequest=function(oSession,sHref,sLockToken,sHost){var oRequest=oSession.CreateRequest(sHost,sHref);oRequest.Method("UNLOCK");oRequest.Headers.Add("Lock-Token","<"+ITHit.WebDAV.Client.DavConstants.OpaqueLockToken+sLockToken+">");return oRequest};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client");
ITHit.oNS.OptionsInfo=function(iFeatures,bMsAuthorViaDav,iVersionControl,iSearchSupported,sServerVersion){this.Features=iFeatures;this.MsAuthorViaDav=bMsAuthorViaDav;this.VersionControl=iVersionControl;this.Search=iSearchSupported;this.ServerVersion=sServerVersion};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client");ITHit.oNS.Features={Class1:1,Class2:2,VersionControl:4,CheckoutInPlace:16,VersionHistory:32,Update:64,ResumableUpload:128,ResumableDownload:256};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.Methods");
ITHit.oNS.Options=function(oResponse){var oNsCl=ITHit.WebDAV.Client;oNsCl.Methods.Options.baseConstructor.call(this);var sDav=oResponse._Response.GetResponseHeader("dav",true);var iFeatures=0;var iVersionControl=0;if(sDav){if(-1!=sDav.indexOf("2"))iFeatures=oNsCl.Features.Class1+oNsCl.Features.Class2;else if(-1!=sDav.indexOf("1"))iFeatures=oNsCl.Features.Class1;if(-1!=sDav.indexOf("version-control"))iVersionControl=oNsCl.Features.VersionControl;if(-1!=sDav.indexOf("resumable-upload"))iFeatures+=oNsCl.Features.ResumableUpload}var bMsAuthorViaDav=
false;var sMsAuthorViaHeader=oResponse._Response.GetResponseHeader("ms-author-via",true);if(sMsAuthorViaHeader&&-1!=sMsAuthorViaHeader.toLowerCase().indexOf("dav"))bMsAuthorViaDav=true;var iSearchSupported=false;var sAllowHeader=oResponse._Response.GetResponseHeader("allow",true)||"";var aAllowList=sAllowHeader.toLowerCase().split(/[^a-z-_]+/);for(var i=0,l=aAllowList.length;i<l;i++)if(aAllowList[i]==="search"){iSearchSupported=true;break}var sServerVersion=oResponse._Response.GetResponseHeader("x-engine",
true);this.ItemOptions=new oNsCl.OptionsInfo(iFeatures,bMsAuthorViaDav,iVersionControl,iSearchSupported,sServerVersion)};ITHit.Extend(ITHit.oNS.Options,ITHit.oNS.HttpMethod);ITHit.oNS.Options.Go=function(oSession,sHref,sHost){return ITHit.WebDAV.Client.Methods.Options.GoAsync(oSession,sHref,sHost)};
ITHit.oNS.Options.GoAsync=function(oSession,sHref,sHost,fCallback){var oNsCl=ITHit.WebDAV.Client;var oNsMethods=oNsCl.Methods;var oRequest=oNsMethods.Options.createRequest(oSession,sHref,sHost);var self=this;var fOnResponse=typeof fCallback==="function"?function(oResult){self._GoCallback(oSession,sHref,oResult,fCallback)}:null;var oResponse=oRequest.GetResponse(fOnResponse);if(typeof fCallback!=="function"){var oResult=new oNsCl.AsyncResult(oResponse,oResponse!=null,null);return this._GoCallback(oSession,
sHref,oResult,fCallback)}else return oRequest};
ITHit.oNS.Options._GoCallback=function(oSession,sHref,oResult,fCallback){var oNsCl=ITHit.WebDAV.Client;var oNsMethods=oNsCl.Methods;var oResponse=oResult;var bSuccess=true;var oError=null;if(oResult instanceof ITHit.WebDAV.Client.AsyncResult){oResponse=oResult.Result;bSuccess=oResult.IsSuccess;oError=oResult.Error}var oOptions=null;if(bSuccess){var oOptions=new oNsMethods.Options(oResponse);ITHit.Logger.FinishRequest()}if(typeof fCallback==="function"){var oOptionsResult=new oNsCl.AsyncResult(oOptions,
bSuccess,oError);fCallback.call(this,oOptionsResult)}else return oOptions};ITHit.oNS.Options.createRequest=function(oSession,sHref,sHost){var oRequest=oSession.CreateRequest(sHost,sHref);oRequest.Method("OPTIONS");oRequest.Headers.Add("ITHit-CancelOldUploads",1);return oRequest};ITHit.oNS=ITHit.Declare("ITHit.Exceptions");ITHit.oNS.ExpressionException=function(sMessage){ITHit.Exceptions.ExpressionException.baseConstructor.call(this,sMessage)};ITHit.Extend(ITHit.oNS.ExpressionException,ITHit.Exception);
ITHit.oNS.ExpressionException.prototype.Name="ExpressionException";ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client");
ITHit.oNS.UploadProgressInfo=function(sHref,iBytesUploaded,iContentLength,oLastChunkSaved){if(!ITHit.Utils.IsString(sHref)||!sHref)throw new ITHit.Exceptions.ArgumentException(ITHit.Phrases.Exceptions.WrongHref.Paste(),sHref);if(!ITHit.Utils.IsInteger(iBytesUploaded))throw new ITHit.Exceptions.ArgumentException(ITHit.Phrases.Exceptions.WrongUploadedBytesType,iBytesUploaded);if(!ITHit.Utils.IsInteger(iContentLength))throw new ITHit.Exceptions.ArgumentException(ITHit.Phrases.Exceptions.WrongContentLengthType,iContentLength);
if(iBytesUploaded>iContentLength)throw new ITHit.Exceptions.ExpressionException(ITHit.Phrases.Exceptions.BytesUploadedIsMoreThanTotalFileContentLength);this.Href=sHref;this.BytesUploaded=iBytesUploaded;this.TotalContentLength=iContentLength;this.LastChunkSaved=oLastChunkSaved};
ITHit.oNS.UploadProgressInfo.GetUploadProgress=function(oMultiResponse){var oNsCl=ITHit.WebDAV.Client;var oNsUplProgress=oNsCl.UploadProgressInfo;var aUploadInfo=[];if(!oNsUplProgress.PropNames)oNsUplProgress.PropNames=[new oNsCl.PropertyName("bytes-uploaded","ithit"),new oNsCl.PropertyName("last-chunk-saved","ithit"),new oNsCl.PropertyName("total-content-length","ithit")];for(var i=0,oResponse;oResponse=oMultiResponse.Responses[i];i++)for(var j=0,oPropstat;oPropstat=oResponse.Propstats[j];j++){var oFoundedProps=
[];for(var k=0,oProp;oProp=oPropstat.Properties[k];k++)if(oProp.Name.Equals(oNsUplProgress.PropNames[0]))oFoundedProps[0]=oProp.Value;else if(oProp.Name.Equals(oNsUplProgress.PropNames[1]))oFoundedProps[1]=oProp.Value;else if(oProp.Name.Equals(oNsUplProgress.PropNames[2]))oFoundedProps[2]=oProp.Value;if(!oFoundedProps[0]||!oFoundedProps[1]||!oFoundedProps[2])throw new ITHit.Exception(ITHit.Phrases.Exceptions.NotAllPropertiesReceivedForUploadProgress.Paste(oResponse.Href));aUploadInfo.push(new oNsUplProgress(oResponse.Href,
parseInt(oFoundedProps[0].firstChild().nodeValue()),parseInt(oFoundedProps[2].firstChild().nodeValue()),oNsCl.HierarchyItem.GetDate(oFoundedProps[1].firstChild().nodeValue())))}return aUploadInfo};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.Methods");ITHit.oNS.Report=function(oResponse,reportType){var oNsCl=ITHit.WebDAV.Client;var oNsMethods=oNsCl.Methods;oNsCl.Methods.Report.baseConstructor.call(this);this.Response=oResponse;switch(reportType){case oNsMethods.Report.ReportType.UploadProgress:return oNsCl.UploadProgressInfo.GetUploadProgress(oResponse)}};
ITHit.Extend(ITHit.oNS.Report,ITHit.oNS.HttpMethod);ITHit.oNS.Report.ReportType={UploadProgress:"UploadProgress",VersionsTree:"VersionsTree"};ITHit.oNS.Report.Go=function(oSession,sHref,sHost,reportType,aProperties){return ITHit.WebDAV.Client.Methods.Report.GoAsync(oSession,sHref,sHost,reportType,aProperties)};
ITHit.oNS.Report.GoAsync=function(oSession,sHref,sHost,reportType,aProperties,fCallback){var oNsCl=ITHit.WebDAV.Client;var oNsMethods=oNsCl.Methods;if(!reportType)reportType=oNsMethods.Report.ReportType.UploadProgress;var oRequest=oNsMethods.Report.createRequest(oSession,sHref,sHost,reportType,aProperties);var self=this;var fOnResponse=typeof fCallback==="function"?function(oResult){self._GoCallback(oSession,sHref,oResult,reportType,fCallback)}:null;var oResponse=oRequest.GetResponse(fOnResponse);
if(typeof fCallback!=="function"){var oResult=new oNsCl.AsyncResult(oResponse,oResponse!=null,null);return this._GoCallback(oSession,sHref,oResult,reportType,fCallback)}else return oRequest};
ITHit.oNS.Report._GoCallback=function(oSession,sHref,oResult,reportType,fCallback){var oNsCl=ITHit.WebDAV.Client;var oNsMethods=oNsCl.Methods;var oResponse=oResult;var bSuccess=true;var oError=null;if(oResult instanceof ITHit.WebDAV.Client.AsyncResult){oResponse=oResult.Result;bSuccess=oResult.IsSuccess;oError=oResult.Error}var oReport=null;if(bSuccess){var oResponseData=oResponse.GetResponseStream();ITHit.Logger.FinishRequest();oReport=new oNsMethods.Report(new oNsMethods.MultiResponse(oResponseData,
sHref),reportType)}if(typeof fCallback==="function"){var oReportResult=new oNsCl.AsyncResult(oReport,bSuccess,oError);fCallback.call(this,oReportResult)}else return oReport};
ITHit.oNS.Report.createRequest=function(oSession,sHref,sHost,reportType,aProperties){var oNsCl=ITHit.WebDAV.Client;var oNsMethods=oNsCl.Methods;var oRequest=oSession.CreateRequest(sHost,sHref);oRequest.Method("REPORT");oRequest.Headers.Add("Content-Type",'text/xml; charset="utf-8"');var oWriter=new ITHit.XMLDoc;switch(reportType){case oNsMethods.Report.ReportType.UploadProgress:var oElem=oWriter.createElementNS("ithit","upload-progress");oWriter.appendChild(oElem);break;case oNsMethods.Report.ReportType.VersionsTree:var oVersionTreeElement=
oWriter.createElementNS(oNsCl.DavConstants.NamespaceUri,"version-tree");if(!aProperties||!aProperties.length)var propEl=oWriter.createElementNS(oNsCl.DavConstants.NamespaceUri,"allprop");else{var propEl=oWriter.createElementNS(oNsCl.DavConstants.NamespaceUri,"prop");for(var i=0;i<aProperties.length;i++){var prop=oWriter.createElementNS(aProperties[i].NamespaceUri,aProperties[i].Name);propEl.appendChild(prop)}}oVersionTreeElement.appendChild(propEl);oWriter.appendChild(oVersionTreeElement);break}oRequest.Body(oWriter);
return oRequest};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.Methods");ITHit.oNS.VersionUpdate=function(oResponse){ITHit.WebDAV.Client.Methods.VersionUpdate.baseConstructor.call(this);this.Response=oResponse};ITHit.Extend(ITHit.oNS.VersionUpdate,ITHit.oNS.HttpMethod);
ITHit.oNS.VersionUpdate.Go=function(oSession,sHref,sHost,sToVersionHref){var oNsCl=ITHit.WebDAV.Client;var oNsMethods=oNsCl.Methods;var oRequest=oNsMethods.VersionUpdate.createRequest(oSession,sHref,sHost,sToVersionHref);var oResponse=oRequest.GetResponse();return this._ProcessResponse(oResponse,sHref)};
ITHit.oNS.VersionUpdate.GoAsync=function(oSession,sHref,sHost,sToVersionHref,fCallback){var oNsCl=ITHit.WebDAV.Client;var oNsMethods=oNsCl.Methods;var oRequest=oNsMethods.VersionUpdate.createRequest(oSession,sHref,sHost,sToVersionHref);var that=this;oRequest.GetResponse(function(oAsyncResult){if(!oAsyncResult.IsSuccess){fCallback(new ITHit.WebDAV.Client.AsyncResult(null,false,oAsyncResult.Error));return}var oResult=that._ProcessResponse(oAsyncResult.Result,sHref);fCallback(new ITHit.WebDAV.Client.AsyncResult(oResult,
true,null))});return oRequest};ITHit.oNS.VersionUpdate._ProcessResponse=function(oResponse,sHref){var oNsMethods=ITHit.WebDAV.Client.Methods;var oResponseData=oResponse.GetResponseStream();return new oNsMethods.VersionUpdate(new oNsMethods.MultiResponse(oResponseData,sHref))};
ITHit.oNS.VersionUpdate.createRequest=function(oSession,sHref,sHost,sToVersionHref){var oNsCl=ITHit.WebDAV.Client;var oRequest=oSession.CreateRequest(sHost,sHref);oRequest.Method("UPDATE");oRequest.Headers.Add("Content-Type",'text/xml; charset="utf-8"');var oWriter=new ITHit.XMLDoc;var sNamespaceUri=oNsCl.DavConstants.NamespaceUri;var oUpdateElement=oWriter.createElementNS(sNamespaceUri,"update");var oVersionElement=oWriter.createElementNS(sNamespaceUri,"version");var oHrefElement=oWriter.createElementNS(sNamespaceUri,
"href");oHrefElement.appendChild(oWriter.createTextNode(sToVersionHref));oVersionElement.appendChild(oHrefElement);oUpdateElement.appendChild(oVersionElement);oWriter.appendChild(oUpdateElement);oRequest.Body(oWriter);return oRequest};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client");
ITHit.oNS.HierarchyItem=function(oSession,sHref,oLastModified,sDisplayName,oCreationDate,sResourceType,aSupportedLocks,aActiveLocks,sHost,iAvailableBytes,iUsedBytes,aCheckedIn,aCheckedOut,oProperties){this.Session=oSession;this.Href=sHref;this.LastModified=oLastModified;this.DisplayName=sDisplayName;this.CreationDate=oCreationDate;this.ResourceType=sResourceType;this.SupportedLocks=aSupportedLocks;this.ActiveLocks=aActiveLocks;this.Host=sHost;this.AvailableBytes=iAvailableBytes;this.UsedBytes=iUsedBytes;
this.CheckedIn=aCheckedIn;this.CheckedOut=aCheckedOut;this.ServerVersion=oSession.sServerEngine;this.Properties=oProperties};ITHit.oNS.HierarchyItem.prototype.HasProperty=function(oPropName){var sKey=oPropName.toString();return this.Properties.hasOwnProperty(sKey)};
ITHit.oNS.HierarchyItem.prototype.GetProperty=function(oPropName){var sKey=oPropName.toString();if(!this.Properties.hasOwnProperty(sKey))throw new ITHit.WebDAV.Client.Exceptions.PropertyNotFoundException("Not found property `"+sKey+"` in resource `"+this.Href+"`.");return this.Properties[sKey]};
ITHit.oNS.HierarchyItem.prototype.Refresh=function(){var item=this.Session.OpenItem(this.Href);this.LastModified=item.LastModified;this.CreationDate=item.CreationDate;this.SupportedLocks=item.SupportedLocks;this.ActiveLocks=item.ActiveLocks};
ITHit.oNS.HierarchyItem.prototype.CopyTo=function(oDestinationFolder,sDestinationName,bDeep,bOverwrite,oLockTokens){oLockTokens=oLockTokens||null;ITHit.Logger.StartLogging();var oResult=this._CopyToGoRequest(oDestinationFolder,sDestinationName,bDeep,bOverwrite,oLockTokens);ITHit.Logger.FinishLogging();var oError=this._CopyToProcessResponseException(oResult);if(oError)throw oError;};
ITHit.oNS.HierarchyItem.prototype.CopyToAsync=function(oDestinationFolder,sDestinationName,bDeep,bOverwrite,oLockTokens,fCallback){oLockTokens=oLockTokens||null;ITHit.Logger.StartLogging();var that=this;return this._CopyToGoRequest(oDestinationFolder,sDestinationName,bDeep,bOverwrite,oLockTokens,function(oAsyncResult){ITHit.Logger.FinishLogging();if(!oAsyncResult.IsSuccess){fCallback(new ITHit.WebDAV.Client.AsyncResult(null,false,oAsyncResult.Error));return}var oError=that._CopyToProcessResponseException(oAsyncResult.Result);
fCallback(new ITHit.WebDAV.Client.AsyncResult(null,oError===null,oError))})};
ITHit.oNS.HierarchyItem.prototype._CopyToGoRequest=function(oDestinationFolder,sDestinationName,bDeep,bOverwrite,oLockTokens,fCallback){fCallback=fCallback||null;var sMethod=fCallback?"GoAsync":"Go";return ITHit.WebDAV.Client.Methods.CopyMove[sMethod](this.Session,ITHit.WebDAV.Client.Methods.CopyMove.Mode.Copy,this.Href,ITHit.WebDAV.Client.HierarchyItem.AppendToUri2(oDestinationFolder.Href,sDestinationName),this.ResourceType==ITHit.WebDAV.Client.ResourceType.Folder,bDeep,bOverwrite,oLockTokens,this.Host,
fCallback)};
ITHit.oNS.HierarchyItem.prototype._CopyToProcessResponseException=function(oResponse){var oNsCl=ITHit.WebDAV.Client;var oNsExcpt=oNsCl.Exceptions;var oError=null;if(oResponse instanceof oNsCl.Methods.MultiResponse){var aResponses=oResponse.Responses;for(var i=0,l=aResponses.length;i<l;i++)if(!aResponses[i].Status.IsCopyMoveOk()){oError=new oNsExcpt.WebDavHttpException(ITHit.Phrases.FailedToCopy,this.Href,new oNsExcpt.Info.Multistatus(oResponse),oNsCl.HttpStatus.MultiStatus,null);break}}else if(oResponse instanceof oNsCl.Methods.SingleResponse){var oResponseStatus=
oResponse.Status;if(!oResponseStatus.IsCopyMoveOk())oError=new oNsExcpt.WebDavHttpException(ITHit.Phrases.FailedToCopyWithStatus.Paste(oResponseStatus.Code,oResponseStatus.Description),this.Href,null,oResponseStatus,null)}return oError};ITHit.oNS.HierarchyItem.AppendToUri=function(sUri,sDestinationName){return ITHit.WebDAV.Client.HierarchyItem.GetAbsoluteUriPath(sUri)+encodeURIComponent(sDestinationName)};
ITHit.oNS.HierarchyItem.AppendToUri2=function(sUri,sDestinationName){return ITHit.WebDAV.Client.HierarchyItem.GetAbsoluteUriPath(sUri)+sDestinationName};ITHit.oNS.HierarchyItem.prototype.Delete=function(oLockTokens){oLockTokens=oLockTokens||null;var oResult=ITHit.WebDAV.Client.Methods.Delete.Go(this.Session,this.Href,oLockTokens,this.Host);var oError=this._DeleteProcessResponseException(oResult.Response);if(oError)throw oError;};
ITHit.oNS.HierarchyItem.prototype.DeleteAsync=function(oLockTokens,fCallback){oLockTokens=oLockTokens||null;var that=this;return ITHit.WebDAV.Client.Methods.Delete.GoAsync(this.Session,this.Href,oLockTokens,this.Host,function(oAsyncResult){if(!oAsyncResult.IsSuccess){fCallback(new ITHit.WebDAV.Client.AsyncResult(null,false,oAsyncResult.Error));return}var oError=that._DeleteProcessResponseException(oAsyncResult.Result);fCallback(new ITHit.WebDAV.Client.AsyncResult(null,oError===null,oError))})};
ITHit.oNS.HierarchyItem.prototype._DeleteProcessResponseException=function(oResponse){var oError=null;if(oResponse instanceof ITHit.WebDAV.Client.Methods.MultiResponse)oError=new ITHit.WebDAV.Client.Exceptions.WebDavHttpException(ITHit.Phrases.FailedToDelete,this.Href,new ITHit.WebDAV.Client.Exceptions.Info.Multistatus(oResponse),ITHit.WebDAV.Client.HttpStatus.MultiStatus,null);if(oResponse instanceof ITHit.WebDAV.Client.Methods.SingleResponse)if(oResponse.Status.IsSuccess());else{var sMessage=ITHit.Phrases.DeleteFailedWithStatus.Paste(oResponse.Status.Code,
oResponse.Status.Description);oError=new ITHit.WebDAV.Client.Exceptions.WebDavHttpException(sMessage,this.Href,null,oResponse.Status,null)}ITHit.Logger.FinishLogging();return oError};
ITHit.oNS.HierarchyItem.GetActiveLocks=function(oResp,sHref){var oNsCl=ITHit.WebDAV.Client;var oLockDiscovery=oNsCl.DavConstants.LockDiscovery;for(var i=0;i<oResp.Propstats.length;i++){var oPropstat=oResp.Propstats[i];if(!oPropstat.Status.IsOk())break;if("undefined"!=typeof oPropstat.PropertiesByNames[oLockDiscovery]){var oProp=oPropstat.PropertiesByNames[oLockDiscovery];try{return oNsCl.LockInfo.ParseLockDiscovery(oProp.Value,sHref)}catch(e){break}}else break}return[]};
ITHit.oNS.HierarchyItem.prototype.GetAllProperties=function(){return this.GetPropertyValues(null)};ITHit.oNS.HierarchyItem.prototype.GetAllPropertiesAsync=function(fCallback){return this.GetPropertyValuesAsync(null,fCallback)};ITHit.oNS.HierarchyItem.prototype.GetParent=function(){var oNsCl=ITHit.WebDAV.Client;return oNsCl.Folder.Open(this.Session,oNsCl.HierarchyItem.GetFolderParentUri(oNsCl.Encoder.Decode(this.Href)))};
ITHit.oNS.HierarchyItem.prototype.GetPropertyNames=function(){var oNsCl=ITHit.WebDAV.Client;var oNsMethods=oNsCl.Methods;var oNsHierItem=oNsCl.HierarchyItem;var oNsExcpt=oNsCl.Exceptions;var oResponse=oNsMethods.Propfind.Go(this.Session,this.Href,oNsMethods.Propfind.PropfindMode.PropertyNames,null,oNsCl.Depth.Zero,this.Host).Response;for(var i=0;i<oResponse.Responses.length;i++){var oResp=oResponse.Responses[i];if(oNsHierItem.HrefEquals(oResp.Href,this.Href)){var oProperties=[];for(var j=0;j<oResp.Propstats.length;j++){var oPropstat=
oResp.Propstats[j];if(oPropstat.Properties.length){if(oPropstat.Status.IsSuccess()){for(var k=0;k<oPropstat.Properties.length;k++){var oProperty=oPropstat.Properties[k];if(!oProperty.Name.IsStandardProperty())oProperties.push(oProperty.Name)}continue}if(oPropstat.Status.Equals(oNsCl.HttpStatus.NotFound))throw new oNsExcpt.PropertyNotFoundException(ITHit.Phrases.Exceptions.PropertyNotFound,this.Href,oProppropstat.Properties[0].Name,new oNsExcpt.Info.PropertyMultistatus(oResponse),null);if(oPropstat.Status.Equals(oNsCl.HttpStatus.Forbidden))throw new oNsExcpt.PropertyForbiddenException(ITHit.Phrases.Exceptions.PropertyForbidden,
this.Href,oPropstat.Properties[0].Name,new oNsExcpt.Info.PropertyMultistatus(oResponse),null);throw new oNsExcpt.PropertyException(ITHit.Phrases.Exceptions.PropertyFailed,this.Href,oPropstat.Properties[0].Name,new oNsExcpt.Info.PropertyMultistatus(oResponse),oPropstat.Status,null);}}return oProperties}}throw new oNsExcpt.WebDavException(ITHit.Phrases.ResponseItemNotFound.Paste(this.Href));};
ITHit.oNS.HierarchyItem.prototype.GetPropertyValues=function(oNames){oNames=oNames||null;var oNsCl=ITHit.WebDAV.Client;var oNsMethods=oNsCl.Methods;ITHit.Logger.StartLogging();var oResponse=oNsMethods.Propfind.Go(this.Session,this.Href,oNsMethods.Propfind.PropfindMode.SelectedProperties,oNames,oNsCl.Depth.Zero,this.Host);ITHit.Logger.FinishLogging();return this._GetPropertyValuesProcessResponse(oResponse)};
ITHit.oNS.HierarchyItem.prototype.GetPropertyValuesAsync=function(oNames,fCallback){oNames=oNames||null;var oNsCl=ITHit.WebDAV.Client;var oNsMethods=oNsCl.Methods;ITHit.Logger.StartLogging();var that=this;return oNsMethods.Propfind.Go(this.Session,this.Href,oNsMethods.Propfind.PropfindMode.SelectedProperties,oNames,oNsCl.Depth.Zero,this.Host,function(oAsyncResult){ITHit.Logger.FinishLogging();if(oAsyncResult.IsSuccess)try{oAsyncResult.Result=that._GetPropertyValuesProcessResponse(oAsyncResult.Result)}catch(oException){oAsyncResult.Result=
null;oAsyncResult.IsSuccess=false;oAsyncResult.Error=oException}fCallback(oAsyncResult)})};
ITHit.oNS.HierarchyItem.prototype._GetPropertyValuesProcessResponse=function(oResponse){var oResponseData=oResponse.Response;var oNsCl=ITHit.WebDAV.Client;var oNsHierItem=oNsCl.HierarchyItem;var oNsExcpt=oNsCl.Exceptions;for(var i=0;i<oResponseData.Responses.length;i++){var oResp=oResponseData.Responses[i];if(oNsHierItem.HrefEquals(oResp.Href,this.Href)){var oProperties=[];for(var j=0;j<oResp.Propstats.length;j++){var oPropstat=oResp.Propstats[j];if(oPropstat.Properties.length){if(oPropstat.Status.IsSuccess()){for(var k=
0;k<oPropstat.Properties.length;k++){var oProperty=oPropstat.Properties[k];if(!oProperty.Name.IsStandardProperty())oProperties.push(oProperty)}continue}if(oPropstat.Status.Equals(oNsCl.HttpStatus.NotFound))throw new oNsExcpt.PropertyNotFoundException(ITHit.Phrases.Exceptions.PropertyNotFound,this.Href,oPropstat.Properties[0].Name,new oNsExcpt.Info.PropertyMultistatus(oResponseData),null);if(oPropstat.Status.Equals(oNsCl.HttpStatus.Forbidden))throw new oNsExcpt.PropertyForbiddenException(ITHit.Phrases.Exceptions.PropertyForbidden,
ithit.Href,oPropstat.Properties[0].Name,new oNsExcpt.Info.PropertyMultistatus(oResponseData),null);throw new oNsExcpt.PropertyException(ITHit.Phrases.Exceptions.PropertyFailed,this.Href,oPropstat.Properties[0].Name,new oNsExcpt.Info.PropertyMultistatus(oResponseData),oPropstat.Status,null);}}return oProperties}}throw new oNsExcpt.WebDavException(ITHit.Phrases.ResponseItemNotFound.Paste(this.Href));};
ITHit.oNS.HierarchyItem.prototype.GetSource=function(){ITHit.Logger.StartLogging();var oNsCl=ITHit.WebDAV.Client;var oNsMethods=oNsCl.Methods;var oNsExcpt=oNsCl.Exceptions;var oNames=[oNsCl.DavConstants.Source];var oResponse=oNsMethods.Propfind.Go(this.Session,this.Href,oNsMethods.Propfind.PropfindMode.SelectedProperties,oNames,oNsCl.Depth.Zero,this.Host).Response;for(var i=0;i<oResponse.Responses.length;i++){var oResp=oResponse.Responses[i];if(oNsCl.HierarchyItem.HrefEquals(oResp.Href,this.Href)){var oSouces=
[];for(var j=0;j<oResp.Propstats;j++){var oPropstat=oResp.Propstats[j];if(!oPropstat.Status.IsOk())if(oPropstat.Status.Equals(oNsCl.HttpStatus.NotFound)){ITHit.Logger.FinishLogging();return null}else{ITHit.Logger.DeclareFinish();throw new oNsExcpt.PropertyForbiddenException(ITHit.Phrases.PropfindFailedWithStatus.Paste(propstat.Status.Description),this.Href,oPropstat.Properties[0].Name,new oNsExcpt.Info.Multistatus(oResponse),null);}for(var k=0;k<oPropstat.Properties.length;k++){var oProperty=oPropstat.Properties[k];
if(oProperty.Name.Equals(oNsCl.DavConstants.Source)){var aLinks=oProperty.Value.GetElementsByTagNameNS(DavConstants.NamespaceUri,DavConstants.Link);for(var l=0;l<aLinks.length;l++){var oLink=aLinks[i];var oSource=new oNsCl.Source(oLink.GetElementsByTagName(oNsCl.DavConstants.NamespaceUri,oNsCl.DavConstants.Src)[0].firstChild().nodeValue(),oLink.GetElementsByTagName(oNsCl.DavConstants.NamespaceUri,oNsCl.DavConstants.Dst)[0].firstChild().nodeValue());oSources.push(oSource)}ITHit.Logger.FinishLogging();
return oSources}}}}}ITHit.Logger.DeclareFinish();throw new oNsExcpt.WebDavException(ITHit.Phrases.ResponseItemNotFound.Paste(this.Href));};
ITHit.oNS.HierarchyItem.GetSupportedLock=function(oResp){var oNsCl=ITHit.WebDAV.Client;var oSupportedLock=oNsCl.DavConstants.SupportedLock;for(var i=0;i<oResp.Propstats.length;i++){var oPropstat=oResp.Propstats[i];if(!oPropstat.Status.IsOk())break;var out=[];for(var p in oPropstat.PropertiesByNames)out.push(p);if("undefined"!=typeof oPropstat.PropertiesByNames[oSupportedLock]){var oProp=oPropstat.PropertiesByNames[oSupportedLock];try{return oNsCl.HierarchyItem.ParseSupportedLock(oProp.Value)}catch(e){break}}}return[]};
ITHit.oNS.HierarchyItem.ParseSupportedLock=function(oSupportedLockProp){var aLocks=[];var oNsCl=ITHit.WebDAV.Client;var oNsResponse=oNsCl.Methods.Response;var oResolver=new ITHit.XPath.resolver;oResolver.add("d",oNsCl.DavConstants.NamespaceUri);var oNode=null;var oNode1=null;var iNodeElType=ITHit.XMLDoc.nodeTypes.NODE_ELEMENT;var oRes=ITHit.XPath.evaluate("d:lockentry",oSupportedLockProp,oResolver);while(oNode=oRes.iterateNext()){var oRes1=ITHit.XPath.evaluate("d:*",oNode,oResolver);while(oNode1=
oRes1.iterateNext())if(oNode1.nodeType()==iNodeElType){var sNodeName="";if(oNode1.hasChildNodes()){var oChildNode=oNode1.firstChild();while(oChildNode){if(oChildNode.nodeType()==iNodeElType){sNodeName=oChildNode.localName();break}oChildNode=oChildNode.nextSibling()}}else sNodeName=oNode1.localName();switch(sNodeName.toLowerCase()){case "shared":aLocks.push(oNsCl.LockScope.Shared);break;case "exclusive":aLocks.push(oNsCl.LockScope.Exclusive);break}}}return aLocks};
ITHit.oNS.HierarchyItem.GetQuotaAvailableBytes=function(oResp){var oNsCl=ITHit.WebDAV.Client;var oAvailableBytes=oNsCl.DavConstants.QuotaAvailableBytes;for(var i=0;i<oResp.Propstats.length;i++){var oPropstat=oResp.Propstats[i];if(!oPropstat.Status.IsOk())break;if("undefined"!=typeof oPropstat.PropertiesByNames[oAvailableBytes]){var oProp=oPropstat.PropertiesByNames[oAvailableBytes];try{return parseInt(oProp.Value.firstChild().nodeValue())}catch(e){break}}}return-1};
ITHit.oNS.HierarchyItem.GetQuotaUsedBytes=function(oResp){var oNsCl=ITHit.WebDAV.Client;var oUsedBytes=oNsCl.DavConstants.QuotaUsedBytes;for(var i=0;i<oResp.Propstats.length;i++){var oPropstat=oResp.Propstats[i];if(!oPropstat.Status.IsOk())break;if("undefined"!=typeof oPropstat.PropertiesByNames[oUsedBytes]){var oProp=oPropstat.PropertiesByNames[oUsedBytes];try{return parseInt(oProp.Value.firstChild().nodeValue())}catch(e){break}}}return-1};
ITHit.oNS.HierarchyItem.GetCkeckedIn=function(oResp){var oNsCl=ITHit.WebDAV.Client;var CheckedIn=oNsCl.DavConstants.CheckedIn;for(var i=0;i<oResp.Propstats.length;i++){var oPropstat=oResp.Propstats[i];if(!oPropstat.Status.IsOk())break;if("undefined"!=typeof oPropstat.PropertiesByNames[CheckedIn]){var oProp=oPropstat.PropertiesByNames[CheckedIn];try{return oNsCl.HierarchyItem.ParseChecked(oProp.Value)}catch(e){break}}}return false};
ITHit.oNS.HierarchyItem.GetCheckedOut=function(oResp){var oNsCl=ITHit.WebDAV.Client;var CheckedIn=oNsCl.DavConstants.CheckedOut;for(var i=0;i<oResp.Propstats.length;i++){var oPropstat=oResp.Propstats[i];if(!oPropstat.Status.IsOk())break;if("undefined"!=typeof oPropstat.PropertiesByNames[CheckedIn]){var oProp=oPropstat.PropertiesByNames[CheckedIn];try{return oNsCl.HierarchyItem.ParseChecked(oProp.Value)}catch(e){break}}}return false};
ITHit.oNS.HierarchyItem.ParseChecked=function(oCheckedProp){var aCheckeds=[];var oNsCl=ITHit.WebDAV.Client;var oResolver=new ITHit.XPath.resolver;oResolver.add("d",oNsCl.DavConstants.NamespaceUri);var oNode=null;var iNodeElType=ITHit.XMLDoc.nodeTypes.NODE_ELEMENT;var oRes=ITHit.XPath.evaluate("d:href",oCheckedProp,oResolver);while(oNode=oRes.iterateNext())if(oNode.nodeType()==iNodeElType)aCheckeds.push(oNode.firstChild().nodeValue());return aCheckeds};
ITHit.oNS.HierarchyItem.prototype.GetVersions=function(){ITHit.Logger.StartLogging();var oResult=ITHit.WebDAV.Client.Methods.Report.Go(this.Session,this.Href,this.Host,ITHit.WebDAV.Client.Methods.Report.ReportType.VersionsTree,this._GetVersionsProperties());ITHit.Logger.FinishLogging();return this._VersionsProcessResponse(oResult)};
ITHit.oNS.HierarchyItem.prototype.GetVersionsAsync=function(fCallback){ITHit.Logger.StartLogging();var that=this;return ITHit.WebDAV.Client.Methods.Report.GoAsync(this.Session,this.Href,this.Host,ITHit.WebDAV.Client.Methods.Report.ReportType.VersionsTree,this._GetVersionsProperties(),function(oAsyncResult){ITHit.Logger.FinishLogging();if(!oAsyncResult.IsSuccess){fCallback(new ITHit.WebDAV.Client.AsyncResult(null,false,oAsyncResult.Error));return}var mResult=that._VersionsProcessResponse(oAsyncResult.Result);
fCallback(new ITHit.WebDAV.Client.AsyncResult(mResult,true,null))})};ITHit.oNS.HierarchyItem.prototype._GetVersionsProperties=function(){var oNsDavConst=ITHit.WebDAV.Client.DavConstants;return[oNsDavConst.VersionName,oNsDavConst.GetContentLength,oNsDavConst.CreationDate,oNsDavConst.CreatorDisplayName,oNsDavConst.Comment]};
ITHit.oNS.HierarchyItem.prototype._VersionsProcessResponse=function(oResult){var oResponse=oResult.Response;var aVersionList=[];var oNsCl=ITHit.WebDAV.Client;var oNsDavConst=oNsCl.DavConstants;var oNsExcpt=oNsCl.Exceptions;for(var i=0;i<oResponse.Responses.length;i++){var oResp=oResponse.Responses[i];var aProperties=[];for(var j=0;j<oResp.Propstats.length;j++){var oPropstat=oResp.Propstats[j];if(oPropstat.Properties.length){if(oPropstat.Status.IsSuccess()){for(var k=0;k<oPropstat.Properties.length;k++){var oProperty=
oPropstat.Properties[k];if(oNsDavConst.CreationDate.Equals(oPropstat.Properties[k].Name))oProperty=oNsCl.HierarchyItem.GetDate(oProperty.StringValue(),"tz");aProperties.push(oProperty)}continue}if(oPropstat.Status.Equals(oNsCl.HttpStatus.NotFound))throw new oNsExcpt.PropertyNotFoundException(ITHit.Phrases.Exceptions.PropertyNotFound,this.Href,oPropstat.Properties[0].Name,new oNsExcpt.Info.PropertyMultistatus(oResponse),null);if(oPropstat.Status.Equals(oNsCl.HttpStatus.Forbidden))throw new oNsExcpt.PropertyForbiddenException(ITHit.Phrases.Exceptions.PropertyForbidden,
this.Href,oPropstat.Properties[0].Name,new oNsExcpt.Info.PropertyMultistatus(oResponse),null);throw new oNsExcpt.PropertyException(ITHit.Phrases.Exceptions.PropertyFailed,this.Href,oPropstat.Properties[0].Name,new oNsExcpt.Info.PropertyMultistatus(oResponse),oPropstat.Status,null);}}aProperties.push(oResp.Href);aVersionList.push(aProperties)}return aVersionList};
ITHit.oNS.HierarchyItem.prototype.VersionUpdate=function(sToHrefUpdate){ITHit.Logger.StartLogging();var oNsCl=ITHit.WebDAV.Client;var oNsMethods=oNsCl.Methods;var oRequest=oNsMethods.VersionUpdate.Go(this.Session,this.Href,this.Host,sToHrefUpdate);var oResponse=oRequest.Response;ITHit.Logger.FinishLogging();return oResponse.Responses[0].Status.IsSuccess()};
ITHit.oNS.HierarchyItem.prototype.VersionUpdateAsync=function(sToHrefUpdate,fCallback){ITHit.Logger.StartLogging();var oNsCl=ITHit.WebDAV.Client;var oNsMethods=oNsCl.Methods;return oNsMethods.VersionUpdate.GoAsync(this.Session,this.Href,this.Host,sToHrefUpdate,function(oAsyncResult){ITHit.Logger.FinishLogging();if(!oAsyncResult.IsSuccess){fCallback(new ITHit.WebDAV.Client.AsyncResult(false,false,oAsyncResult.Error));return}var bIsSuccess=oAsyncResult.Result.Response.Responses[0].Status.IsSuccess();
fCallback(new ITHit.WebDAV.Client.AsyncResult(bIsSuccess,true,null))})};ITHit.oNS.HierarchyItem.prototype.VersionDelete=function(sVersionHref){ITHit.Logger.StartLogging();var oNsCl=ITHit.WebDAV.Client;var oNsMethods=oNsCl.Methods;oNsMethods.Delete.Go(this.Session,sVersionHref,null,this.Host);ITHit.Logger.FinishLogging()};
ITHit.oNS.HierarchyItem.prototype.VersionDeleteAsync=function(sVersionHref,fCallback){ITHit.Logger.StartLogging();return ITHit.WebDAV.Client.Methods.Delete.GoAsync(this.Session,sVersionHref,null,this.Host,function(oAsyncResult){ITHit.Logger.FinishLogging();if(!oAsyncResult.IsSuccess){fCallback(new ITHit.WebDAV.Client.AsyncResult(false,false,oAsyncResult.Error));return}fCallback(new ITHit.WebDAV.Client.AsyncResult(true,true,null))})};
ITHit.oNS.HierarchyItem.prototype.Lock=function(sLockScope,bDeep,sOwner,iTimeout){ITHit.Logger.StartLogging();var oNsCl=ITHit.WebDAV.Client;var oNsMethods=oNsCl.Methods;var oLockMethod=oNsMethods.Lock.Go(this.Session,this.Href,iTimeout,sLockScope,this.Host,bDeep,sOwner);var oLockResponse=oLockMethod.Response;ITHit.Logger.FinishLogging();return oLockResponse.LockInfo};
ITHit.oNS.HierarchyItem.prototype.MoveTo=function(oDestinationFolder,sDestinationName,bOverwrite,oLockTokens){bOverwrite=bOverwrite||false;oLockTokens=oLockTokens||null;ITHit.Logger.StartLogging();var oResponse=this._MoveToGoRequest(oDestinationFolder,sDestinationName,bOverwrite,oLockTokens);ITHit.Logger.FinishLogging();var oError=this._MoveToProcessResponseException(oResponse);if(oError!==null)throw oError;};
ITHit.oNS.HierarchyItem.prototype.MoveToAsync=function(oDestinationFolder,sDestinationName,bOverwrite,oLockTokens,fCallback){bOverwrite=bOverwrite||false;oLockTokens=oLockTokens||null;ITHit.Logger.StartLogging();var that=this;return this._MoveToGoRequest(oDestinationFolder,sDestinationName,bOverwrite,oLockTokens,function(oAsyncResult){ITHit.Logger.FinishLogging();if(!oAsyncResult.IsSuccess){fCallback(new ITHit.WebDAV.Client.AsyncResult(null,false,oAsyncResult.Error));return}var oError=that._MoveToProcessResponseException(oAsyncResult.Result);
fCallback(new ITHit.WebDAV.Client.AsyncResult(null,oError===null,oError))})};
ITHit.oNS.HierarchyItem.prototype._MoveToGoRequest=function(oDestinationFolder,sDestinationName,bOverwrite,oLockTokens,fCallback){var oNsCl=ITHit.WebDAV.Client;var oNsMethods=oNsCl.Methods;if(!(oDestinationFolder instanceof oNsCl.Folder))throw new ITHit.Exception(ITHit.Phrases.Exceptions.FolderWasExpectedAsDestinationForMoving);var sMethod=fCallback?"GoAsync":"Go";return oNsMethods.CopyMove[sMethod](this.Session,oNsMethods.CopyMove.Mode.Move,this.Href,oNsCl.HierarchyItem.AppendToUri2(oDestinationFolder.Href,
sDestinationName),this.ResourceType,true,bOverwrite,oLockTokens,this.Host,fCallback)};
ITHit.oNS.HierarchyItem.prototype._MoveToProcessResponseException=function(oResponse){var oError=null;var oNsCl=ITHit.WebDAV.Client;var oNsMethods=oNsCl.Methods;var oNsExcpt=oNsCl.Exceptions;if(oResponse instanceof oNsMethods.MultiResponse){var aResponses=oResponse.Responses;for(var i=0,l=aResponses.length;i<l;i++)if(!aResponses[i].Status.IsCopyMoveOk()){oError=new oNsExcpt.WebDavHttpException(ITHit.Phrases.FailedToMove,this.Href,new oNsExcpt.Info.Multistatus(oResponse),oNsCl.HttpStatus.MultiStatus,
null);break}this.DeletedMoved=true}else if(oResponse instanceof oNsMethods.SingleResponse){var oResponseStatus=oResponse.Status;if(oResponseStatus.IsCopyMoveOk());else oError=new oNsExcpt.WebDavHttpException(ITHit.Phrases.MoveFailedWithStatus.Paste(oResponseStatus.Code,oResponseStatus.Description),this.Href,null,oResponseStatus,null)}return oError};
ITHit.oNS.HierarchyItem.prototype.RefreshLock=function(sLockToken,iTimeout){ITHit.Logger.StartLogging();var oNsCl=ITHit.WebDAV.Client;var oNsMethods=oNsCl.Methods;var oLockMethod=oNsMethods.Lock.Go(this.Session,this.Href,iTimeout,sLockToken,this.Host);var oLockResponse=oLockMethod.Response;ITHit.Logger.FinishLogging();return oLockResponse.LockInfo};
ITHit.oNS.HierarchyItem.prototype.SupportedFeatures=function(){ITHit.Logger.StartLogging();var oOptions=ITHit.WebDAV.Client.Methods.Options.Go(this.Session,this.Href,this.Host).ItemOptions;ITHit.Logger.FinishLogging();return oOptions};
ITHit.oNS.HierarchyItem.prototype.Unlock=function(sLockToken){ITHit.Logger.StartLogging();var oNsCl=ITHit.WebDAV.Client;var oNsMethods=oNsCl.Methods;var oUnlock=oNsMethods.Unlock.Go(this.Session,this.Href,sLockToken,this.Host);if(!oUnlock.Response.Status.IsUnlockOk()){ITHit.Logger.DeclareFinish();throw new oNsCl.Exceptions.WebDavHttpException(ITHit.Phrases.UnlockFailedWithStatus.Paste(oUnlock.Response.Status.Code,oUnlock.Response.Status.Description),this.Href,null,oUnlock.Response.Status,null);}ITHit.Logger.FinishLogging()};
ITHit.oNS.HierarchyItem.prototype.UpdateProperties=function(oPropertiesToAddOrUpdate,oPropertiesToDelete,sLockToken){sLockToken=sLockToken||null;ITHit.Logger.StartLogging();var aPropsToAddOrUpdate=this._GetPropertiesForUpdate(oPropertiesToAddOrUpdate);var aPropsToDelete=this._GetPropertiesForDelete(oPropertiesToDelete);if(aPropsToAddOrUpdate.length+aPropsToDelete.length===0){ITHit.Logger.WriteMessage(ITHit.Phrases.Exceptions.NoPropertiesToManipulateWith);ITHit.Logger.FinishLogging();fCallback(true);
return}var oResult=ITHit.WebDAV.Client.Methods.Proppatch.Go(this.Session,this.Href,aPropsToAddOrUpdate,aPropsToDelete,sLockToken,this.Host);this._UpdatePropertiesProcessResponse(oResult)};
ITHit.oNS.HierarchyItem.prototype.UpdatePropertiesAsync=function(oPropertiesToAddOrUpdate,oPropertiesToDelete,sLockToken,fCallback){sLockToken=sLockToken||null;ITHit.Logger.StartLogging();var aPropsToAddOrUpdate=this._GetPropertiesForUpdate(oPropertiesToAddOrUpdate);var aPropsToDelete=this._GetPropertiesForDelete(oPropertiesToDelete);if(aPropsToAddOrUpdate.length+aPropsToDelete.length===0){ITHit.Logger.WriteMessage(ITHit.Phrases.Exceptions.NoPropertiesToManipulateWith);ITHit.Logger.FinishLogging();
fCallback(true);return}var that=this;return ITHit.WebDAV.Client.Methods.Proppatch.GoAsync(this.Session,this.Href,aPropsToAddOrUpdate,aPropsToDelete,sLockToken,this.Host,function(oAsyncResult){ITHit.Logger.FinishLogging();if(!oAsyncResult.IsSuccess){fCallback(new ITHit.WebDAV.Client.AsyncResult(false,false,oAsyncResult.Error));return}try{that._UpdatePropertiesProcessResponse(oAsyncResult.Result)}catch(oException){fCallback(new ITHit.WebDAV.Client.AsyncResult(false,false,oException));return}fCallback(new ITHit.WebDAV.Client.AsyncResult(true,
true,null))})};
ITHit.oNS.HierarchyItem.prototype._GetPropertiesForUpdate=function(oPropertiesToAddOrUpdate){var oNsCl=ITHit.WebDAV.Client;var oNsExcpt=oNsCl.Exceptions;var aPropsToAddOrUpdate=[];if(oPropertiesToAddOrUpdate)for(var i=0;i<oPropertiesToAddOrUpdate.length;i++)if(oPropertiesToAddOrUpdate[i]instanceof oNsCl.Property&&oPropertiesToAddOrUpdate[i])if(oPropertiesToAddOrUpdate[i].Name.NamespaceUri!=oNsCl.DavConstants.NamespaceUri)aPropsToAddOrUpdate.push(oPropertiesToAddOrUpdate[i]);else throw new oNsExcpt.PropertyException(ITHit.Phrases.Exceptions.AddOrUpdatePropertyDavProhibition.Paste(oPropertiesToAddOrUpdate[i]),this.Href,
oPropertiesToAddOrUpdate[i]);else throw new oNsExcpt.PropertyException(ITHit.Phrases.Exceptions.PropertyUpdateTypeException);return aPropsToAddOrUpdate};
ITHit.oNS.HierarchyItem.prototype._GetPropertiesForDelete=function(oPropertiesToDelete){var oNsCl=ITHit.WebDAV.Client;var oNsExcpt=oNsCl.Exceptions;var aPropsToDelete=[];if(oPropertiesToDelete)for(var i=0;i<oPropertiesToDelete.length;i++)if(oPropertiesToDelete[i]instanceof oNsCl.PropertyName&&oPropertiesToDelete[i])if(oPropertiesToDelete[i].NamespaceUri!=oNsCl.DavConstants.NamespaceUri)aPropsToDelete.push(oPropertiesToDelete[i]);else throw new oNsExcpt.PropertyException(ITHit.Phrases.Exceptions.DeletePropertyDavProhibition.Paste(oPropertiesToDelete[i]),
this.Href,oPropertiesToDelete[i]);else throw new oNsExcpt.PropertyException(ITHit.Phrases.Exceptions.PropertyDeleteTypeException);return aPropsToDelete};
ITHit.oNS.HierarchyItem.prototype._UpdatePropertiesProcessResponse=function(oResult){var oNsCl=ITHit.WebDAV.Client;var oNsExcpt=oNsCl.Exceptions;var oMultiResponse=oResult.Response;if(oMultiResponse){var oMultistatus=new oNsExcpt.Info.PropertyMultistatus(oMultiResponse);for(var i=0;i<oMultistatus.Responses.length;i++){var oPropResp=oMultistatus.Responses[i];if(!oPropResp.Status.IsSuccess()){ITHit.Logger.DeclareFinish();throw new oNsExcpt.PropertyException(ITHit.Phrases.FailedToUpdateProp,this.Href,
oPropResp.PropertyName,oMultistatus,oNsCl.HttpStatus.MultiStatus,null);}}}};
ITHit.oNS.HierarchyItem.prototype.GetUploadProgress=function(sFileName){ITHit.Logger.StartLogging();var oNsCl=ITHit.WebDAV.Client;var sHref=this.Href;if(undefined!==sFileName){if(this.ResourceType==oNsCl.ResourceType.Resource)throw new oNsCl.Exceptions.WebDavException(ITHit.Phrases.Exceptions.ReportOnResourceItemWithParameterCalled);sHref=oNsCl.HierarchyItem.AppendToUri(this.Href,sFileName)}ITHit.Logger.IgnoreNextStartLogging();return this.Session.GetUploadProgress(sHref)};
ITHit.oNS.HierarchyItem.prototype.VersionControlled=function(){return this.CheckedIn!==false||this.CheckedOut!==false};ITHit.oNS.HierarchyItem.GetResourceType=function(oResponse){var oNsCl=ITHit.WebDAV.Client;var oProperty=oNsCl.HierarchyItem.GetProperty(oResponse,oNsCl.DavConstants.ResourceType);var sResourceType=oNsCl.ResourceType.Resource;if(oProperty.Value.getElementsByTagNameNS(oNsCl.DavConstants.NamespaceUri,"collection").length>0)sResourceType=oNsCl.ResourceType.Folder;return sResourceType};
ITHit.oNS.HierarchyItem.HasProperty=function(oResponse,oPropName){for(var i=0;i<oResponse.Propstats.length;i++){var oPropstat=oResponse.Propstats[i];for(var j=0;j<oPropstat.Properties.length;j++){var oProperty=oPropstat.Properties[j];if(oProperty.Name.Equals(oPropName))return true}}return false};
ITHit.oNS.HierarchyItem.GetProperty=function(oResponse,oPropName){for(var i=0;i<oResponse.Propstats.length;i++){var oPropstat=oResponse.Propstats[i];for(var j=0;j<oPropstat.Properties.length;j++){var oProperty=oPropstat.Properties[j];if(oProperty.Name.Equals(oPropName))return oProperty}}throw new ITHit.WebDAV.Client.Exceptions.PropertyNotFoundException(ITHit.Phrases.Exceptions.PropertyNotFound,oResponse.Href,oPropName,null,null);};
ITHit.oNS.HierarchyItem.GetCustomProperties=function(oResponse){var oDefaultProperties=[ITHit.WebDAV.Client.DavConstants.ResourceType,ITHit.WebDAV.Client.DavConstants.DisplayName,ITHit.WebDAV.Client.DavConstants.CreationDate,ITHit.WebDAV.Client.DavConstants.GetLastModified,ITHit.WebDAV.Client.DavConstants.GetContentType,ITHit.WebDAV.Client.DavConstants.GetContentLength,ITHit.WebDAV.Client.DavConstants.SupportedLock,ITHit.WebDAV.Client.DavConstants.LockDiscovery,ITHit.WebDAV.Client.DavConstants.QuotaAvailableBytes,
ITHit.WebDAV.Client.DavConstants.QuotaUsedBytes,ITHit.WebDAV.Client.DavConstants.CheckedIn,ITHit.WebDAV.Client.DavConstants.CheckedOut];var aProperties={};for(var i=0;i<oResponse.Propstats.length;i++){var oPropstat=oResponse.Propstats[i];for(var i2=0;i2<oPropstat.Properties.length;i2++){var oProperty=oPropstat.Properties[i2];var bIsFind=false;for(var i3=0;i3<oDefaultProperties.length;i3++)if(oProperty.Name.Equals(oDefaultProperties[i3]))bIsFind=true;if(bIsFind)continue;aProperties[oProperty.toString()]=
oProperty.Value.firstChild().nodeValue()}}return aProperties};ITHit.oNS.HierarchyItem.GetDisplayName=function(oResponse){var oNsCl=ITHit.WebDAV.Client;var oElement=oNsCl.HierarchyItem.GetProperty(oResponse,oNsCl.DavConstants.DisplayName).Value;var sName;if(oElement.hasChildNodes())sName=oElement.firstChild().nodeValue();else sName=oNsCl.Encoder.Decode(oNsCl.HierarchyItem.GetLastName(oResponse.Href));return sName};
ITHit.oNS.HierarchyItem.GetLastModified=function(oResponse){var oNsCl=ITHit.WebDAV.Client;if(!oNsCl.HierarchyItem.GetProperty(oResponse,oNsCl.DavConstants.GetLastModified))return oNsCl.HierarchyItem.GetDate();var oProp=oNsCl.HierarchyItem.GetProperty(oResponse,oNsCl.DavConstants.GetLastModified);return oNsCl.HierarchyItem.GetDate(oProp.Value.firstChild().nodeValue(),"rfc1123")};
ITHit.oNS.HierarchyItem.GetContentType=function(oResponse){var oNsCl=ITHit.WebDAV.Client;var sContentType=null;var oValue=oNsCl.HierarchyItem.GetProperty(oResponse,oNsCl.DavConstants.GetContentType).Value;if(oValue.hasChildNodes())sContentType=oValue.firstChild().nodeValue();return sContentType};
ITHit.oNS.HierarchyItem.GetContentLength=function(oResponse){var oNsCl=ITHit.WebDAV.Client;var iContentLength=0;var oValue=oNsCl.HierarchyItem.GetProperty(oResponse,oNsCl.DavConstants.GetContentLength).Value;if(oValue.hasChildNodes())iContentLength=parseInt(oValue.firstChild().nodeValue());return iContentLength};
ITHit.oNS.HierarchyItem.GetCreationDate=function(oResponse){var oNsCl=ITHit.WebDAV.Client;if(!oNsCl.HierarchyItem.GetProperty(oResponse,oNsCl.DavConstants.CreationDate))return oNsCl.HierarchyItem.GetDate();var oProp=oNsCl.HierarchyItem.GetProperty(oResponse,oNsCl.DavConstants.CreationDate);return oNsCl.HierarchyItem.GetDate(oProp.Value.firstChild().nodeValue(),"tz")};
ITHit.oNS.HierarchyItem.GetDate=function(sDate,sDateFormat){var oDate;var i=0;if("tz"==sDateFormat)i++;if(!sDate)return new Date(0);for(var e=i+1;i<=e;i++)if(0==i%2){var oDate=new Date(sDate);if(!isNaN(oDate))break}else{var aTime=sDate.match(/([\d]{4})\-([\d]{2})\-([\d]{2})T([\d]{2}):([\d]{2}):([\d]{2})(\.[\d]+)?((?:Z)|(?:[\+\-][\d]{2}:[\d]{2}))/);if(aTime&&aTime.length>=7){aTime.shift();var oDate=new Date(aTime[0],aTime[1]-1,aTime[2],aTime[3],aTime[4],aTime[5]);var iCounter=6;if("undefined"!=typeof aTime[iCounter]&&
-1!=aTime[iCounter].indexOf("."))oDate.setMilliseconds(aTime[iCounter].replace(/[^\d]/g,""));iCounter++;if("undefined"!=typeof aTime[iCounter]&&"-00:00"!=aTime[iCounter]&&-1!=aTime[iCounter].search(/(?:\+|-)/)){var aParts=aTime[iCounter].slice(1).split(":");var iOffset=parseInt(aParts[1])+60*aParts[0];if("+"==aTime[iCounter][0])oDate.setMinutes(oDate.getMinutes()-iOffset);else oDate.setMinutes(oDate.getMinutes()+iOffset);iCounter++}oDate.setMinutes(oDate.getMinutes()+-1*oDate.getTimezoneOffset());
break}}if(!oDate||isNaN(oDate))oDate=new Date(0);return oDate};ITHit.oNS.HierarchyItem.GetAbsoluteUriPath=function(sHref){return sHref.replace(/\/?$/,"/")};ITHit.oNS.HierarchyItem.GetRelativePath=function(sHref){return sHref.replace(/^[a-z]+:\/\/[^\/]+\//,"/")};ITHit.oNS.HierarchyItem.GetLastName=function(sHref){var sName=ITHit.WebDAV.Client.HierarchyItem.GetRelativePath(sHref).replace(/\/$/,"");return sName.match(/[^\/]*$/)[0]};
ITHit.oNS.HierarchyItem.HrefEquals=function(sHref1,sHref2){var oNsCl=ITHit.WebDAV.Client;var oNsRelPath=oNsCl.HierarchyItem.GetRelativePath;var oNsDecode=oNsCl.Encoder.Decode;var iPos=sHref2.search(/\?[^\/]+$/);if(-1!=iPos)sHref2=sHref2.substr(0,iPos);var iPos=sHref2.search(/\?[^\/]+$/);if(-1!=iPos)sHref2=sHref2.substr(0,iPos);return oNsRelPath(oNsDecode(sHref1)).replace(/\/$/,"")==oNsRelPath(oNsDecode(sHref2)).replace(/\/$/,"")};
ITHit.oNS.HierarchyItem.GetFolderParentUri=function(sHref){var oNsCl=ITHit.WebDAV.Client;var sPath=oNsCl.HierarchyItem.GetAbsoluteUriPath(sHref);sPath=sPath.substr(0,sPath.length-2);return sPath.substr(0,sPath.lastIndexOf("/")+1)};ITHit.oNS.HierarchyItem.GetHost=function(sHref){var sHost;if(/^https?:\/\//.test(sHref))sHost=sHref.match(/^https?:\/\/[^\/]+/)[0]+"/";else sHost=location.protocol+"//"+location.host+"/";return sHost};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.Methods");
ITHit.oNS.Put=function(oResponse){ITHit.WebDAV.Client.Methods.Put.baseConstructor.call(this);this.Response=oResponse};ITHit.Extend(ITHit.oNS.Put,ITHit.oNS.HttpMethod);ITHit.oNS.Put.GoUpload=function(oSession,sHref,sContentType,sContent,sLockToken,sHost){var oNsPut=ITHit.WebDAV.Client.Methods.Put;var oRequest=oNsPut.createRequest(oSession,sHref,sContentType,sContent,sLockToken,sHost);var oResponse=oRequest.GetResponse();ITHit.Logger.FinishRequest();return new oNsPut(oResponse)};
ITHit.oNS.Put.createRequest=function(oSession,sHref,sContentType,sContent,sLockToken,sHost){var oRequest=oSession.CreateRequest(sHost,sHref,sLockToken);oRequest.Method("PUT");if(""!=sContentType)oRequest.Headers.Add("Content-Type",sContentType);oRequest.Body(sContent);return oRequest};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.Methods");ITHit.oNS.Get=function(sResponse){ITHit.WebDAV.Client.Methods.Put.baseConstructor.call(this);this.Response=sResponse};ITHit.Extend(ITHit.oNS.Get,ITHit.oNS.HttpMethod);
ITHit.oNS.Get.Go=function(oSession,sHref,iStartIndex,iBytesCount,sHost){var oNsGet=ITHit.WebDAV.Client.Methods.Get;var oRequest=oNsGet.createRequest(oSession,sHref,iStartIndex,iBytesCount,sHost);var oResponse=oRequest.GetResponse();ITHit.Logger.FinishRequest();return new oNsGet(oResponse._Response.BodyText)};
ITHit.oNS.Get.createRequest=function(oSession,sHref,iBytesFrom,iBytesTo,sHost){var oRequest=oSession.CreateRequest(sHost,sHref);oRequest.Method("GET");oRequest.Headers.Add("Translate","f");if("undefined"!=typeof iBytesFrom){var sByteRange=iBytesFrom;if(iBytesFrom>=0)if("undefined"!=typeof iBytesTo&&iBytesTo>=0)sByteRange+="-"+iBytesTo;else sByteRange+="-";else sByteRange=String(sByteRange);oRequest.Headers.Add("Range","bytes="+sByteRange)}return oRequest};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.Methods");
ITHit.oNS.CancelUpload=function(oResponse){ITHit.WebDAV.Client.Methods.CancelUpload.baseConstructor.call(this);this.Response=oResponse};ITHit.Extend(ITHit.oNS.CancelUpload,ITHit.oNS.HttpMethod);ITHit.oNS.CancelUpload.Go=function(oSession,sHref,sLockToken,sHost){return ITHit.WebDAV.Client.Methods.CancelUpload.GoAsync(oSession,sHref,sLockToken,sHost)};
ITHit.oNS.CancelUpload.GoAsync=function(oSession,sHref,sLockToken,sHost,fCallback){var oNsCl=ITHit.WebDAV.Client;var oNsMethods=oNsCl.Methods;var oRequest=oNsMethods.CancelUpload.createRequest(oSession,sHref,sLockToken,sHost);var self=this;var fOnResponse=typeof fCallback==="function"?function(oResult){self._GoCallback(oSession,sHref,oResult,fCallback)}:null;var oResponse=oRequest.GetResponse(fOnResponse);if(typeof fCallback!=="function"){var oResult=new oNsCl.AsyncResult(oResponse,oResponse!=null,
null);return this._GoCallback(oSession,sHref,oResult,fCallback)}else return oRequest};
ITHit.oNS.CancelUpload._GoCallback=function(oSession,sHref,oResult,fCallback){var oNsCl=ITHit.WebDAV.Client;var oNsMethods=oNsCl.Methods;var oResponse=oResult;var bSuccess=true;var oError=null;if(oResult instanceof ITHit.WebDAV.Client.AsyncResult){oResponse=oResult.Result;bSuccess=oResult.IsSuccess;oError=oResult.Error}var oUnlock=null;if(bSuccess)oUnlock=new oNsMethods.CancelUpload(new oNsMethods.SingleResponse(oResponse));ITHit.Logger.FinishRequest();if(typeof fCallback==="function"){var oUnlockResult=
new oNsCl.AsyncResult(oUnlock,bSuccess,oError);fCallback.call(this,oUnlockResult)}else return oUnlock};ITHit.oNS.CancelUpload.createRequest=function(oSession,sHref,sLockToken,sHost){var oRequest=oSession.CreateRequest(sHost,sHref,sLockToken);oRequest.Method("CANCELUPLOAD");return oRequest};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.DocManager");
ITHit.oNS.JavaOpen=function(sUrl,sMountUrl,sJavaAppletUrl,bOpenFolder,oContainer){if(sMountUrl==null)if(!bOpenFolder){var s=sUrl.lastIndexOf("/");sMountUrl=s!=-1?sUrl.substr(0,s+1):"/"}else sMountUrl=sUrl;if(sJavaAppletUrl==null)sJavaAppletUrl="/plugins/ITHitMountOpenDocument.jar";if(oContainer==null)oContainer=window.document.body;var pramNameUrl=bOpenFolder?"folder":"file";if(document.mountAppletOpenDocs!=null)document.mountAppletOpenDocs.parentElement.outerHTML="";var appletContainer={nodeName:"div",
style:{width:"0px",height:"0px",position:"absolute",overflow:"hidden",top:"-1000px",left:"-1000px"}};var oAppletContainer=ITHit.Utils.CreateDOMElement(appletContainer);oContainer.appendChild(oAppletContainer);var applet;if(ITHit.DetectBrowser.IE)applet='<object name="mountAppletOpenDocs"'+' classid="clsid:8AD9C840-044E-11D1-B3E9-00805F499D93"'+' codebase="http://java.sun.com/update/1.6.0/jinstall-6u26-windows-i586.cab#Version=1,6,0,0"'+' width="0" height="0"'+">"+'  <param name="archive" value="'+
sJavaAppletUrl+'">'+'  <param name="code" value="MODApplet.class">'+'  <param name="'+pramNameUrl+'" value="'+sUrl+'">'+'  <param name="mountUrl" value="'+sMountUrl+'">'+"</object>";else applet='<embed name="mountAppletOpenDocs"'+' type="application/x-java-applet;version=1.6"'+' pluginspage = "http://www.java.com/en/download/"'+' width="0" height="0"'+' archive="'+sJavaAppletUrl+'"'+' code="MODApplet.class"'+" "+pramNameUrl+'="'+sUrl+'"'+' mountUrl="'+sMountUrl+'"'+">";oAppletContainer.innerHTML=
applet};ITHit.oNS.JavaEditDocument=function(sDocumentUrl,sMountUrl,sJavaAppletUrl,oContainer){ITHit.WebDAV.Client.DocManager.JavaOpen(sDocumentUrl,sMountUrl,sJavaAppletUrl,false,oContainer)};ITHit.oNS.JavaOpenFolderInOsFileManager=function(sFolderUrl,sMountUrl,sJavaAppletUrl,oContainer){ITHit.WebDAV.Client.DocManager.JavaOpen(sFolderUrl,sMountUrl,sJavaAppletUrl,true,oContainer)};
ITHit.oNS.OpenFolderInOsFileManager=function(sFolderUrl,sMountUrl,sJavaAppletUrl,oContainer){if(oContainer==null)oContainer=window.document.body;if(ITHit.DetectBrowser.IE&&ITHit.DetectBrowser.IE<11){if(oContainer._httpFolder==null){var span={nodeName:"span",style:{display:"none",behavior:"url(#default#httpFolder)"}};oContainer._httpFolder=ITHit.Utils.CreateDOMElement(span);oContainer.appendChild(oContainer._httpFolder)}var res=oContainer._httpFolder.navigate(sFolderUrl);return res=="OK"}else ITHit.WebDAV.Client.DocManager.JavaOpenFolderInOsFileManager(sFolderUrl,
sMountUrl,sJavaAppletUrl,oContainer)};ITHit.oNS.IsMicrosoftOfficeAvailable=function(){if(ITHit.DetectBrowser.IE)try{new ActiveXObject("SharePoint.OpenDocuments");return true}catch(e){}else{var plugins=navigator.plugins;var pluginName=ITHit.DetectBrowser.Mac?"SharePoint Browser Plug-in":"Microsoft Office";for(var i=0;i<plugins.length;i++)if(plugins[i].name.indexOf(pluginName)==0)return true}return false};
ITHit.oNS.IsMicrosoftOfficeDocument=function(sDocumentUrl){var ext=ITHit.Trim(sDocumentUrl.substr(sDocumentUrl.lastIndexOf(".")+1));if(!ext)return false;return ITHit.WebDAV.Client.DocManager.FileFormats.MsOfficeEditExtensions.join("|").indexOf(ext)!=-1};
ITHit.oNS.GetMsOfficeVersion=function(){if(ITHit.DetectBrowser.IE)try{new ActiveXObject("SharePoint.OpenDocuments.5");return 2013}catch(e){}else{var officeVer=-1;var plugins=navigator.plugins;for(var i=0;i<plugins.length;i++)if(plugins[i].name.indexOf("Microsoft Office")==0){var strVer=plugins[i].name.substr("Microsoft Office ".length,4);var newVer=parseInt(strVer);if(newVer>officeVer)officeVer=newVer}return officeVer}return null};
ITHit.oNS.GetSharePointOpenDocumentsCtrl=function(container){if(container==null)container=window.document.body;if(container._sharePointOpenDocuments==null)if(ITHit.DetectBrowser.IE)try{container._sharePointOpenDocuments=new ActiveXObject("SharePoint.OpenDocuments")}catch(e){}else{var objectPlugin={nodeName:"object",type:"application/x-sharepoint",style:{visibility:"hidden"},width:"0",height:"0"};container._sharePointOpenDocuments=ITHit.Utils.CreateDOMElement(objectPlugin);container.appendChild(container._sharePointOpenDocuments)}return container._sharePointOpenDocuments};
ITHit.oNS.GetMsOfficeSchemaByExtension=function(sExt){sExt=sExt.toLowerCase();switch(sExt){case "docx":case "doc":case "docm":case "dot":case "dotm":case "dotx":case "odt":return"ms-word";case "xltx":case "xltm":case "xlt":case "xlsx":case "xlsm":case "xlsb":case "xls":case "xll":case "xlam":case "xla":case "ods":return"ms-excel";case "pptx":case "pptm":case "ppt":case "ppsx":case "ppsm":case "pps":case "ppam":case "ppa":case "potx":case "potm":case "pot":case "odp":return"ms-powerpoint";case "accdb":case "mdb":return"ms-access";
case "xsn":case "xsf":return"ms-infopath";case "pub":return"ms-publisher";case "vstx":case "vstm":case "vst":case "vssx":case "vssm":case "vssm":case "vss":case "vsl":case "vsdx":case "vsdm":case "vsd":case "vdw":return"ms-visio";case "mpp":case "mpt":return"ms-project"}};ITHit.oNS.ShowMicrosoftOfficeWarning=function(){var oNS=ITHit.WebDAV.Client.DocManager;if(oNS.GetMsOfficeVersion()<2013||ITHit.DetectBrowser.Chrome)oNS.GetSharePointOpenDocumentsCtrl()};
ITHit.oNS.MicrosoftOfficeEditDocument=function(sDocumentUrl){var oNS=ITHit.WebDAV.Client.DocManager;try{if(oNS.GetMsOfficeVersion()>=2013&&!ITHit.DetectBrowser.Chrome){var ext=ITHit.Trim(sDocumentUrl.substr(sDocumentUrl.lastIndexOf(".")+1));var url=oNS.GetMsOfficeSchemaByExtension(ext)+":ofe|u|"+sDocumentUrl;window.location.href=url}else{var sho=oNS.GetSharePointOpenDocumentsCtrl();if(sho)if(!sho.EditDocument(sDocumentUrl))return false}}catch(e){return false}return true};
ITHit.oNS.FileFormats={ProtectedExtentions:[],MsOfficeEditExtensions:["docx","doc","docm","dot","dotm","dotx","odt","xltx","xltm","xlt","xlsx","xlsm","xlsb","xls","xll","xlam","xla","ods","pptx","pptm","ppt","ppsx","ppsm","pps","ppam","ppa","potx","potm","pot","odp","accdb","mdb","xsn","xsf","pub","vstx","vstm","vst","vssx","vssm","vssm","vss","vsl","vsdx","vsdm","vsd","vdw","mpp","mpt"]};
ITHit.oNS.EditDocument=function(sDocumentUrl,sJavaAppletUrl){var oNs=ITHit.WebDAV.Client.DocManager;if(oNs.IsMicrosoftOfficeAvailable()&&oNs.IsMicrosoftOfficeDocument(sDocumentUrl))return oNs.MicrosoftOfficeEditDocument(sDocumentUrl);else{oNs.JavaEditDocument(sDocumentUrl,null,sJavaAppletUrl);return true}return false};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client");
ITHit.oNS.Resource=function(oSession,sHref,oGetLastModified,sDisplayName,oCreationDate,sContentType,iContentLength,aSupportedLocks,aActiveLocks,sHost,iAvailableBytes,iUsedBytes,aCheckedIn,aCheckedOut,oProperties){var oNsCl=ITHit.WebDAV.Client;oNsCl.Resource.baseConstructor.call(this,oSession,sHref,oGetLastModified,sDisplayName,oCreationDate,oNsCl.ResourceType.Resource,aSupportedLocks,aActiveLocks,sHost,iAvailableBytes,iUsedBytes,aCheckedIn,aCheckedOut,oProperties);this.ContentLength=iContentLength;
this.ContentType=sContentType};ITHit.Extend(ITHit.oNS.Resource,ITHit.oNS.HierarchyItem);
ITHit.oNS.Resource.Open=function(oSession,sHref){ITHit.Logger.StartLogging();var oNsCl=ITHit.WebDAV.Client;var oNsDavConst=oNsCl.DavConstants;var oNsMethods=oNsCl.Methods;var oNsHierItem=oNsCl.HierarchyItem;sHref=ITHit.WebDAV.Client.Encoder.EncodeURI(sHref);var sHost=oNsCl.HierarchyItem.GetHost(sHref);var oProperties=[oNsDavConst.ResourceType,oNsDavConst.DisplayName,oNsDavConst.CreationDate,oNsDavConst.GetLastModified,oNsDavConst.GetContentLength,oNsDavConst.GetContentType,oNsDavConst.SupportedLock,
oNsDavConst.LockDiscovery,oNsDavConst.QuotaAvailableBytes,oNsDavConst.QuotaUsedBytes,oNsDavConst.CheckedIn,oNsDavConst.CheckedOut];var oResponse=oNsMethods.Propfind.Go(oSession,sHref,oNsMethods.Propfind.PropfindMode.SelectedProperties,oProperties,oNsCl.Depth.Zero,sHost).Response;for(var i=0;i<oResponse.Responses.length;i++){var oResp=oResponse.Responses[i];if(oNsHierItem.HrefEquals(oResp.Href,sHref)){var oType=oNsHierItem.GetResourceType(oResp);if(oType!=oNsCl.ResourceType.Resource)throw new oNsCl.Exceptions.WebDavException(ITHit.Phrases.ResponseResourceWrongType.Paste(sHref));
var oResource=new oNsCl.Resource(oSession,sHref,oNsHierItem.GetLastModified(oResp),oNsHierItem.GetDisplayName(oResp),oNsHierItem.GetCreationDate(oResp),oNsHierItem.GetContentType(oResp),oNsHierItem.GetContentLength(oResp),oNsHierItem.GetSupportedLock(oResp),oNsHierItem.GetActiveLocks(oResp,sHref),sHost,oNsHierItem.GetQuotaAvailableBytes(oResp),oNsHierItem.GetQuotaUsedBytes(oResp),oNsHierItem.GetCkeckedIn(oResp),oNsHierItem.GetCheckedOut(oResp));ITHit.Logger.FinishLogging();return oResource}}ITHit.Logger.DeclareFinish();
throw new oNsCl.Exceptions.NotFoundException(ITHit.Phrases.ResourceNotFound.Paste(sHref));};ITHit.oNS.Resource.prototype.ReadContent=function(iBytesFrom,iBytesCount){ITHit.Logger.StartLogging();var iBytesTo;if(iBytesFrom&&iBytesCount)iBytesTo=iBytesFrom+iBytesCount-1;var oResponse=ITHit.WebDAV.Client.Methods.Get.Go(this.Session,this.Href,iBytesFrom,iBytesTo,this.Host);ITHit.Logger.FinishLogging();return oResponse.Response};
ITHit.oNS.Resource.prototype.WriteContent=function(sContent,sLockToken,sMimeType){ITHit.Logger.StartLogging();sMimeType=sMimeType||"";var oNsCl=ITHit.WebDAV.Client;var oResponse=oNsCl.Methods.Put.GoUpload(this.Session,this.Href,sMimeType,sContent,sLockToken,this.Host).Response;if(!oResponse.Status.Equals(oNsCl.HttpStatus.OK)&&!oResponse.Status.Equals(oNsCl.HttpStatus.NoContent)){ITHit.Logger.DeclareFinish();throw new oNsCl.Exceptions.WebDavHttpException(ITHit.Phrases.Exceptions.FailedToWriteContentToFile,
this.Href,null,oResponse.Status,null);}ITHit.Logger.FinishLogging()};ITHit.oNS.Resource.prototype.CancelUpload=function(sLockToken){ITHit.Logger.StartLogging();var oNsCl=ITHit.WebDAV.Client;var oResponse=oNsCl.Methods.CancelUpload.Go(this.Session,this.Href,sLockToken,this.Host);ITHit.Logger.FinishLogging()};ITHit.oNS.Resource.prototype.EditDocument=function(sJavaAppletUrl){ITHit.WebDAV.Client.DocManager.EditDocument(this.Href,sJavaAppletUrl)};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.Methods");
ITHit.oNS.Mkcol=function(oResponse){ITHit.WebDAV.Client.Methods.Mkcol.baseConstructor.call(this);this.Response=oResponse};ITHit.Extend(ITHit.oNS.Mkcol,ITHit.oNS.HttpMethod);ITHit.oNS.Mkcol.Go=function(oSession,sHref,sLockToken,sHost){var oRequest=this.createRequest(oSession,sHref,sLockToken,sHost);var oResponse=oRequest.GetResponse();var oSingleResponse=new ITHit.WebDAV.Client.Methods.SingleResponse(oResponse);return new ITHit.WebDAV.Client.Methods.Mkcol(oSingleResponse)};
ITHit.oNS.Mkcol.GoAsync=function(oSession,sHref,sLockToken,sHost,fCallback){var oRequest=this.createRequest(oSession,sHref,sLockToken,sHost);oRequest.GetResponse(function(oAsyncResult){if(!oAsyncResult.IsSuccess){fCallback(new ITHit.WebDAV.Client.AsyncResult(null,false,oAsyncResult.Error));return}var oSingleResponse=new ITHit.WebDAV.Client.Methods.SingleResponse(oAsyncResult.Result);var oMkcol=new ITHit.WebDAV.Client.Methods.Mkcol(oSingleResponse);fCallback(new ITHit.WebDAV.Client.AsyncResult(oMkcol,
true,null))});return oRequest};ITHit.oNS.Mkcol.createRequest=function(oSession,sHref,sLockToken,sHost){var oRequest=oSession.CreateRequest(sHost,sHref,sLockToken);oRequest.Method("MKCOL");return oRequest};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.Methods");ITHit.oNS.Head=function(bExists){ITHit.WebDAV.Client.Methods.Head.baseConstructor.call(this);this.IsOK=bExists;ITHit.Logger.FinishLogging()};ITHit.Extend(ITHit.oNS.Head,ITHit.oNS.HttpMethod);
ITHit.oNS.Head.Go=function(oSession,sHref,sHost){var oNsCl=ITHit.WebDAV.Client;var oNsMethods=oNsCl.Methods;var oRequest=oNsMethods.Head.createRequest(oSession,sHref,sHost);try{var oResponse=oRequest.GetResponse();ITHit.Logger.FinishRequest();return new oNsMethods.Head(oResponse.Status.Equals(oNsCl.HttpStatus.OK))}catch(e){if(e instanceof oNsCl.Exceptions.NotFoundException){ITHit.Logger.FinishLogging();return new oNsMethods.Head(false)}else throw e;}};
ITHit.oNS.Head.createRequest=function(oSession,sHref,sHost){var oRequest=oSession.CreateRequest(sHost,sHref);oRequest.Method("HEAD");return oRequest};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client");ITHit.oNS.SearchQuery=function(sSearchPhrase){this.Phrase=sSearchPhrase;this.SelectProperties=[];this.EnableLike=true;this.LikeProperties=[ITHit.WebDAV.Client.DavConstants.DisplayName];this.EnableContains=true};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.Methods");
ITHit.oNS.Search=function(oResponse){ITHit.WebDAV.Client.Methods.Search.baseConstructor.call(this);this.Response=oResponse};ITHit.Extend(ITHit.oNS.Search,ITHit.oNS.HttpMethod);ITHit.oNS.Search.Go=function(oSession,sHref,sHost,oSearchQuery){var oRequest=this._createRequest(oSession,sHref,sHost,oSearchQuery);var oResponse=oRequest.GetResponse();return this._ProcessResponse(oResponse)};
ITHit.oNS.Search.GoAsync=function(oSession,sHref,sHost,oSearchQuery,fCallback){var oRequest=this._createRequest(oSession,sHref,sHost,oSearchQuery);var that=this;oRequest.GetResponse(function(oAsyncResult){if(!oAsyncResult.IsSuccess){fCallback(new ITHit.WebDAV.Client.AsyncResult(null,false,oAsyncResult.Error));return}var oResult=that._ProcessResponse(oAsyncResult.Result,sHref);fCallback(new ITHit.WebDAV.Client.AsyncResult(oResult,true,null))});return oRequest};
ITHit.oNS.Search._ProcessResponse=function(oResponse,sUri){ITHit.Logger.FinishRequest();var oResponseData=oResponse.GetResponseStream();var oMultiResponse=new ITHit.WebDAV.Client.Methods.MultiResponse(oResponseData,sUri);return new ITHit.WebDAV.Client.Methods.Search(oMultiResponse)};
ITHit.oNS.Search._createRequest=function(oSession,sHref,sHost,oSearchQuery){var oRequest=oSession.CreateRequest(sHost,sHref);oRequest.Method("SEARCH");var oWriter=new ITHit.XMLDoc;var nsDavConstants=ITHit.WebDAV.Client.DavConstants;var sNamespaceUri=nsDavConstants.NamespaceUri;var eSelectProp=oWriter.createElementNS(sNamespaceUri,"prop");if(oSearchQuery.SelectProperties&&oSearchQuery.SelectProperties.length>0)for(var i=0;i<oSearchQuery.SelectProperties.length;i++)eSelectProp.appendChild(oWriter.createElementNS(oSearchQuery.SelectProperties[i].NamespaceUri,
oSearchQuery.SelectProperties[i].Name));else eSelectProp.appendChild(sNamespaceUri,"allprop");var eSelect=oWriter.createElementNS(sNamespaceUri,"select");eSelect.appendChild(eSelectProp);var eLike=null;if(oSearchQuery.EnableLike){var eWhereProp=oWriter.createElementNS(sNamespaceUri,"prop");if(oSearchQuery.LikeProperties&&oSearchQuery.LikeProperties.length>0)for(var i=0;i<oSearchQuery.LikeProperties.length;i++)eWhereProp.appendChild(oWriter.createElementNS(oSearchQuery.LikeProperties[i].NamespaceUri,
oSearchQuery.LikeProperties[i].Name));var eLiteral=oWriter.createElementNS(sNamespaceUri,"literal");eLiteral.appendChild(oWriter.createTextNode(oSearchQuery.Phrase));eLike=oWriter.createElementNS(sNamespaceUri,"like");eLike.appendChild(eWhereProp);eLike.appendChild(eLiteral)}var eContains=null;if(oSearchQuery.EnableContains){eContains=oWriter.createElementNS(sNamespaceUri,"contains");eContains.appendChild(oWriter.createTextNode(oSearchQuery.Phrase))}var eWhere=oWriter.createElementNS(sNamespaceUri,
"where");if(eLike&&eContains){var eOr=oWriter.createElementNS(sNamespaceUri,"or");eOr.appendChild(eLike);eOr.appendChild(eContains);eWhere.appendChild(eOr)}else if(eLike)eWhere.appendChild(eLike);else if(eContains)eWhere.appendChild(eContains);var basicSearch=oWriter.createElementNS(sNamespaceUri,"basicsearch");basicSearch.appendChild(eSelect);basicSearch.appendChild(eWhere);var eSearchRequest=oWriter.createElementNS(sNamespaceUri,"searchrequest");eSearchRequest.appendChild(basicSearch);oWriter.appendChild(eSearchRequest);
oRequest.Body(oWriter);return oRequest};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client");
ITHit.oNS.Folder=function(oSession,sHref,oGetLastModified,sDisplayName,oCreationDate,aSupportedLocks,aActiveLocks,sHost,iAvailableBytes,iUsedBytes,aCheckedIn,aCheckedOut,oProperties){var oNsCl=ITHit.WebDAV.Client;oNsCl.Folder.baseConstructor.call(this,oSession,sHref,oGetLastModified,sDisplayName,oCreationDate,oNsCl.ResourceType.Folder,aSupportedLocks,aActiveLocks,sHost,iAvailableBytes,iUsedBytes,aCheckedIn,aCheckedOut,oProperties)};ITHit.Extend(ITHit.oNS.Folder,ITHit.oNS.HierarchyItem);
ITHit.oNS.Folder.prototype.CreateFolder=function(sName,sLockTokens){ITHit.Logger.StartLogging();sLockTokens=sLockTokens||null;var oNsCl=ITHit.WebDAV.Client;var sNewUri=oNsCl.HierarchyItem.AppendToUri(this.Href,sName);var oResponse=oNsCl.Methods.Mkcol.Go(this.Session,sNewUri,sLockTokens,this.Host).Response;if(!oResponse.Status.Equals(oNsCl.HttpStatus.Created)){ITHit.Logger.DeclareFinish();throw new oNsCl.Exceptions.WebDavHttpException(ITHit.Phrases.Exceptions.FailedCreateFolder,sNewUri,null,oResponse.Status,
null);}ITHit.Logger.IgnoreNextStartLogging();return oNsCl.Folder.Open(this.Session,oNsCl.Encoder.DecodeURI(sNewUri))};
ITHit.oNS.Folder.prototype.CreateResource=function(sName,sLockTokens,sContent){ITHit.Logger.StartLogging();sLockTokens=sLockTokens||null;sContent="undefined"!=typeof sContent?sContent:"";var oNsCl=ITHit.WebDAV.Client;var sNewUri=oNsCl.HierarchyItem.AppendToUri(this.Href,sName);ITHit.Logger.IgnoreNextStartLogging();ITHit.Logger.IgnoreNextFinishLogging();var oResponse=oNsCl.Methods.Put.GoUpload(this.Session,sNewUri,"",sContent,sLockTokens,this.Host).Response;if(!oResponse.Status.Equals(oNsCl.HttpStatus.Created)&&
!oResponse.Status.Equals(oNsCl.HttpStatus.OK)){ITHit.Logger.DeclareFinish();throw new oNsCl.Exceptions.WebDavHttpException(ITHit.Phrases.Exceptions.FailedCreateResource,sNewUri,null,oResponse.Status,null);}ITHit.Logger.IgnoreNextStartLogging();return oNsCl.Resource.Open(this.Session,sNewUri)};
ITHit.oNS.Folder.prototype.CreateLockNull=function(sNewItemName,sLockScope,bDeep,sOwner,iTimeout){ITHit.Logger.StartLogging();var oNsCl=ITHit.WebDAV.Client;var oNsMethods=oNsCl.Methods;var sNewUri=oNsCl.HierarchyItem.AppendToUri(this.Href,sNewItemName);var oLockMethod=oNsMethods.Lock.Go(this.Session,sNewUri,iTimeout,sLockScope,this.Host,bDeep,sOwner);var oLockResponse=oLockMethod.Response;ITHit.Logger.FinishLogging();return oLockResponse.LockInfo};
ITHit.oNS.Folder.prototype.GetChildren=function(bRecurcively,aProperties){bRecurcively=bRecurcively||false;aProperties=aProperties||[];return this._GetChildren(bRecurcively,aProperties)};ITHit.oNS.Folder.prototype.GetChildrenAsync=function(bRecurcively,aProperties,fCallback){bRecurcively=bRecurcively||false;if(typeof aProperties==="function"){fCallback=aProperties;aProperties=[]}else{aProperties=aProperties||[];fCallback=fCallback||function(){}}return this._GetChildren(bRecurcively,aProperties,fCallback)};
ITHit.oNS.Folder.prototype._GetChildrenProperties=function(aAdditionalProperties){var oNsCl=ITHit.WebDAV.Client;var oNsDavConst=oNsCl.DavConstants;var oProperties=[oNsDavConst.ResourceType,oNsDavConst.DisplayName,oNsDavConst.CreationDate,oNsDavConst.GetLastModified,oNsDavConst.GetContentType,oNsDavConst.GetContentLength,oNsDavConst.SupportedLock,oNsDavConst.LockDiscovery,oNsDavConst.QuotaAvailableBytes,oNsDavConst.QuotaUsedBytes,oNsDavConst.CheckedIn,oNsDavConst.CheckedOut];var aNormalizedAdditionalProperties=
[];for(var i=0,l=aAdditionalProperties.length;i<l;i++){var oProperty=aAdditionalProperties[i];var bFinedInDefaults=false;for(var i2=0,l2=oProperties.length;i2<l2;i2++)if(oProperty.Equals(oProperties[i2])){bFinedInDefaults=true;break}if(!bFinedInDefaults)aNormalizedAdditionalProperties.push(oProperty)}return{All:oProperties.concat(aNormalizedAdditionalProperties),Additional:aNormalizedAdditionalProperties}};
ITHit.oNS.Folder.prototype._GetChildren=function(bRecurcively,aAdditionalProperties,fCallback){ITHit.Logger.StartLogging();var oNsCl=ITHit.WebDAV.Client;var oNsMethods=oNsCl.Methods;var oProperties=this._GetChildrenProperties(aAdditionalProperties);var self=this;var fOnResponse=typeof fCallback==="function"?function(oResult){self._GetChildrenCallback(oResult,oProperties.Additional,fCallback)}:null;var iDepth=bRecurcively?oNsCl.Depth.Infinity:oNsCl.Depth.One;var oResponse=oNsMethods.Propfind.Go(this.Session,
this.Href,oNsMethods.Propfind.PropfindMode.SelectedProperties,oProperties.All,iDepth,this.Host,fOnResponse);if(typeof fCallback!=="function"){var oResult=new oNsCl.AsyncResult(oResponse,oResponse!=null,null);return this._GetChildrenCallback(oResult,oProperties.Additional,fCallback)}else return oResponse};
ITHit.oNS.Folder.prototype._GetChildrenCallback=function(oResult,aAdditionalProperties,fCallback){var oNsCl=ITHit.WebDAV.Client;var oNsHierItem=oNsCl.HierarchyItem;var oResponse=oResult;var bSuccess=true;var oError=null;if(oResult instanceof ITHit.WebDAV.Client.AsyncResult){oResponse=oResult.Result;bSuccess=oResult.IsSuccess;oError=oResult.Error}var aItems=null;if(bSuccess){aItems=this._ProcessChildrenResponse(oResponse,aAdditionalProperties);ITHit.Logger.FinishLogging()}if(typeof fCallback==="function"){var aItemsResult=
new oNsCl.AsyncResult(aItems,bSuccess,oError);fCallback.call(this,aItemsResult)}else return aItems};
ITHit.oNS.Folder.prototype._ProcessChildrenResponse=function(oResponse,aAdditionalProperties){var oResponseData=oResponse.Response;var oNsCl=ITHit.WebDAV.Client;var oNsHierItem=oNsCl.HierarchyItem;var aItems=[];for(var i=0;i<oResponseData.Responses.length;i++){var oResp=oResponseData.Responses[i];if(oNsHierItem.HrefEquals(oResp.Href,this.Href))continue;if(oResp.Status&&!oResp.Status.IsOk())continue;var oAdditionalProperties=oNsHierItem.GetCustomProperties(oResp);for(var i2=0,l2=aAdditionalProperties.length;i2<
l2;i2++){var sKey=aAdditionalProperties[i2].toString();if(!oNsHierItem.HasProperty(oResp,aAdditionalProperties[i2]))oAdditionalProperties[sKey]=null}var oType=oNsHierItem.GetResourceType(oResp);if(oType==oNsCl.ResourceType.Folder)aItems.push(new oNsCl.Folder(this.Session,oResp.Href,oNsHierItem.GetLastModified(oResp),oNsHierItem.GetDisplayName(oResp),oNsHierItem.GetCreationDate(oResp),oNsHierItem.GetSupportedLock(oResp),oNsHierItem.GetActiveLocks(oResp,oResp.Href),this.Host,oNsHierItem.GetQuotaAvailableBytes(oResp),
oNsHierItem.GetQuotaUsedBytes(oResp),oNsHierItem.GetCkeckedIn(oResp),oNsHierItem.GetCheckedOut(oResp),oAdditionalProperties));else aItems.push(new oNsCl.Resource(this.Session,oResp.Href,oNsHierItem.GetLastModified(oResp),oNsHierItem.GetDisplayName(oResp),oNsHierItem.GetCreationDate(oResp),oNsHierItem.GetContentType(oResp),oNsHierItem.GetContentLength(oResp),oNsHierItem.GetSupportedLock(oResp),oNsHierItem.GetActiveLocks(oResp,oResp.Href),this.Host,oNsHierItem.GetQuotaAvailableBytes(oResp),oNsHierItem.GetQuotaUsedBytes(oResp),
oNsHierItem.GetCkeckedIn(oResp),oNsHierItem.GetCheckedOut(oResp),oAdditionalProperties))}return aItems};ITHit.oNS.Folder.Open=function(oSession,sHref){return this._Open(oSession,sHref)};ITHit.oNS.Folder.OpenAsync=function(oSession,sHref,fCallback){return this._Open(oSession,sHref,fCallback)};
ITHit.oNS.Folder._Open=function(oSession,sHref,fCallback){ITHit.Logger.StartLogging();var oNsCl=ITHit.WebDAV.Client;var oNsMethods=oNsCl.Methods;var aHrefParts=sHref.split("?");aHrefParts[0]=aHrefParts[0].replace(/\/?$/,"/");sHref=oNsCl.Encoder.EncodeURI(aHrefParts.join("?"));var sHost=oNsCl.HierarchyItem.GetHost(sHref);var aProperties=[oNsCl.DavConstants.ResourceType,oNsCl.DavConstants.DisplayName,oNsCl.DavConstants.CreationDate,oNsCl.DavConstants.GetLastModified,oNsCl.DavConstants.SupportedLock,
oNsCl.DavConstants.LockDiscovery,oNsCl.DavConstants.QuotaAvailableBytes,oNsCl.DavConstants.QuotaUsedBytes,oNsCl.DavConstants.CheckedIn,oNsCl.DavConstants.CheckedOut];var self=this;var fOnResponse=typeof fCallback==="function"?function(oResult){self._OpenCallback(oSession,sHref,oResult,fCallback)}:null;var oResponse=oNsMethods.Propfind.Go(oSession,sHref,oNsMethods.Propfind.PropfindMode.SelectedProperties,aProperties,oNsCl.Depth.Zero,sHost,fOnResponse);if(typeof fCallback!=="function"){var oResult=
new oNsCl.AsyncResult(oResponse,oResponse!=null,null);return this._OpenCallback(oSession,sHref,oResult,fCallback)}else return oResponse};
ITHit.oNS.Folder._OpenCallback=function(oSession,sHref,oResult,fCallback){var oNsCl=ITHit.WebDAV.Client;var oNsHierItem=oNsCl.HierarchyItem;var sHost=oNsCl.HierarchyItem.GetHost(sHref);var oResponse=oResult;var bSuccess=true;var oError=null;if(oResult instanceof ITHit.WebDAV.Client.AsyncResult){oResponse=oResult.Result;bSuccess=oResult.IsSuccess;oError=oResult.Error}var oFolder=null;if(bSuccess){var oResponseData=oResponse.Response;for(var i=0;i<oResponseData.Responses.length;i++){var oResp=oResponseData.Responses[i];
if(oNsHierItem.HrefEquals(oResp.Href,sHref)){var oType=oNsHierItem.GetResourceType(oResp);if(oType!=oNsCl.ResourceType.Folder)throw new oNsCl.Exceptions.WebDavException(ITHit.Phrases.ResponseFolderWrongType.Paste(sHref));oFolder=new oNsCl.Folder(oSession,sHref,oNsHierItem.GetLastModified(oResp),oNsHierItem.GetDisplayName(oResp),oNsHierItem.GetCreationDate(oResp),oNsHierItem.GetSupportedLock(oResp),oNsHierItem.GetActiveLocks(oResp,sHref),sHost,oNsHierItem.GetQuotaAvailableBytes(oResp),oNsHierItem.GetQuotaUsedBytes(oResp),
oNsHierItem.GetCkeckedIn(oResp),oNsHierItem.GetCheckedOut(oResp));ITHit.Logger.FinishLogging();break}}}ITHit.Logger.DeclareFinish();if(oFolder!=null)if(typeof fCallback==="function"){var oFolderResult=new oNsCl.AsyncResult(oFolder,bSuccess,oError);fCallback.call(this,oFolderResult)}else return oFolder;else{oError=new oNsCl.Exceptions.NotFoundException(ITHit.Phrases.FolderNotFound.Paste(sHref));if(typeof fCallback==="function"){var oFolderResult=new oNsCl.AsyncResult(oFolder,false,oError);fCallback.call(this,
oFolderResult)}else throw oError;}};ITHit.oNS.Folder.prototype.GetFolder=function(sName){ITHit.Logger.StartLogging();ITHit.Logger.IgnoreNextStartLogging();return this.Session.OpenFolder(ITHit.WebDAV.Client.HierarchyItem.AppendToUri(this.Href,sName))};ITHit.oNS.Folder.prototype.GetResource=function(sName){ITHit.Logger.StartLogging();ITHit.Logger.IgnoreNextStartLogging();return this.Session.OpenResource(ITHit.WebDAV.Client.HierarchyItem.AppendToUri(this.Href,sName))};
ITHit.oNS.Folder.prototype.GetItem=function(sName){ITHit.Logger.StartLogging();ITHit.Logger.IgnoreNextStartLogging();return this.Session.OpenItem(ITHit.WebDAV.Client.HierarchyItem.AppendToUri(this.Href,sName))};
ITHit.oNS.Folder.prototype.ItemExists=function(sName){ITHit.Logger.StartLogging();var oNsCl=ITHit.WebDAV.Client;var oNsMethods=oNsCl.Methods;try{return oNsMethods.Head.Go(this.Session,oNsCl.HierarchyItem.AppendToUri(this.Href,sName),this.Host).IsOK}catch(e){if(e instanceof oNsCl.Exceptions.MethodNotAllowedException){var aProperties=[oNsCl.DavConstants.DisplayName];try{oNsMethods.Propfind.Go(this.Session,oNsCl.HierarchyItem.AppendToUri(this.Href,sName),oNsMethods.Propfind.PropfindMode.SelectedProperties,
aProperties,oNsCl.Depth.Zero,this.Host)}catch(e1){if(e1 instanceof oNsCl.Exceptions.NotFoundException){ITHit.Logger.FinishLogging();return false}else throw e1;}ITHit.Logger.FinishLogging();return true}else throw e;}};
ITHit.oNS.Folder.prototype.SearchByQuery=function(oSearchQuery){ITHit.Logger.StartLogging();var oProperties=this._GetChildrenProperties(oSearchQuery.SelectProperties||[]);oSearchQuery.SelectProperties=oProperties.All;var oResult=ITHit.WebDAV.Client.Methods.Search.Go(this.Session,this.Href,this.Host,oSearchQuery);ITHit.Logger.FinishLogging();return this._SearchProcessResponse(oResult,oProperties.Additional)};
ITHit.oNS.Folder.prototype.SearchByQueryAsync=function(oSearchQuery,fCallback){ITHit.Logger.StartLogging();var that=this;var oProperties=this._GetChildrenProperties(oSearchQuery.SelectProperties||[]);oSearchQuery.SelectProperties=oProperties.All;return ITHit.WebDAV.Client.Methods.Search.GoAsync(this.Session,this.Href,this.Host,oSearchQuery,function(oAsyncResult){ITHit.Logger.FinishLogging();if(!oAsyncResult.IsSuccess){fCallback(new ITHit.WebDAV.Client.AsyncResult(null,false,oAsyncResult.Error));return}var mResult=
that._SearchProcessResponse(oAsyncResult.Result,oProperties.Additional);fCallback(new ITHit.WebDAV.Client.AsyncResult(mResult,true,null))})};ITHit.oNS.Folder.prototype.Search=function(sSearchQuery,aAdditionalProperties){var oSearchQuery=new ITHit.WebDAV.Client.SearchQuery(sSearchQuery);oSearchQuery.SelectProperties=aAdditionalProperties||[];return this.SearchByQuery(oSearchQuery)};
ITHit.oNS.Folder.prototype.SearchAsync=function(sSearchQuery,aAdditionalProperties,fCallback){var oSearchQuery=new ITHit.WebDAV.Client.SearchQuery(sSearchQuery);oSearchQuery.SelectProperties=aAdditionalProperties||[];return this.SearchByQueryAsync(oSearchQuery,fCallback)};ITHit.oNS.Folder.prototype._SearchProcessResponse=function(oResponse,aAdditionalProperties){return this._ProcessChildrenResponse(oResponse,aAdditionalProperties)};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.Methods");
ITHit.oNS.GetItem=function(oSession,sHref,fCallback){ITHit.Logger.StartLogging();var oNsCl=ITHit.WebDAV.Client;var oNsDavConst=oNsCl.DavConstants;var oNsMethods=oNsCl.Methods;sHref=oNsCl.Encoder.EncodeURI(sHref);var sHost=oNsCl.HierarchyItem.GetHost(sHref);var oProperties=[oNsDavConst.ResourceType,oNsDavConst.DisplayName,oNsDavConst.CreationDate,oNsDavConst.GetLastModified,oNsDavConst.GetContentLength,oNsDavConst.GetContentType,oNsDavConst.SupportedLock,oNsDavConst.LockDiscovery,oNsDavConst.QuotaAvailableBytes,
oNsDavConst.QuotaUsedBytes];var self=this;var fOnResponse=typeof fCallback==="function"?function(oResult){self._GetItemCallback(oSession,sHref,sHost,oResult,fCallback)}:null;var oResponse=oNsMethods.Propfind.Go(oSession,sHref,oNsMethods.Propfind.PropfindMode.SelectedProperties,oProperties,oNsCl.Depth.Zero,sHost,fOnResponse);if(typeof fCallback!=="function"){var oResult=new oNsCl.AsyncResult(oResponse,oResponse!=null,null);return this._GetItemCallback(oSession,sHref,sHost,oResult,fCallback)}else return oResponse};
ITHit.oNS._GetItemCallback=function(oSession,sHref,sHost,oResult,fCallback){var oNsCl=ITHit.WebDAV.Client;var oNsHierItem=oNsCl.HierarchyItem;var oResponse=oResult;var bSuccess=true;var oError=null;if(oResult instanceof ITHit.WebDAV.Client.AsyncResult){oResponse=oResult.Result;bSuccess=oResult.IsSuccess;oError=oResult.Error}var oItem=null;if(bSuccess){var oResponseData=oResponse.Response;for(var i=0;i<oResponseData.Responses.length;i++){var oResp=oResponseData.Responses[i];if(oNsHierItem.HrefEquals(oResp.Href,
sHref)){var sType=oNsHierItem.GetResourceType(oResp);if(sType==oNsCl.ResourceType.Resource)oItem=new oNsCl.Resource(oSession,sHref,oNsHierItem.GetLastModified(oResp),oNsHierItem.GetDisplayName(oResp),oNsHierItem.GetCreationDate(oResp),oNsHierItem.GetContentType(oResp),oNsHierItem.GetContentLength(oResp),oNsHierItem.GetSupportedLock(oResp),oNsHierItem.GetActiveLocks(oResp,sHref),sHost,oNsHierItem.GetQuotaAvailableBytes(oResp),oNsHierItem.GetQuotaUsedBytes(oResp));else if(sType==oNsCl.ResourceType.Folder)oItem=
new oNsCl.Folder(oSession,sHref,oNsHierItem.GetLastModified(oResp),oNsHierItem.GetDisplayName(oResp),oNsHierItem.GetCreationDate(oResp),oNsHierItem.GetSupportedLock(oResp),oNsHierItem.GetActiveLocks(oResp,sHref),sHost,oNsHierItem.GetQuotaAvailableBytes(oResp),oNsHierItem.GetQuotaUsedBytes(oResp));else throw new oNsCl.Exceptions.WebDavException(ITHit.Phrases.Exceptions.UnknownResourceType);ITHit.Logger.FinishLogging();break}}}ITHit.Logger.DeclareFinish();if(oItem!=null)if(typeof fCallback==="function"){var oItemResult=
new oNsCl.AsyncResult(oItem,bSuccess,oError);fCallback.call(this,oItemResult)}else return oItem;else{oError=new oNsCl.Exceptions.NotFoundException(ITHit.Phrases.ResponseItemNotFound.Paste(sHref),sHref);if(typeof fCallback==="function"){var oItemResult=new oNsCl.AsyncResult(oItem,false,oError);fCallback.call(this,oItemResult)}else throw oError;}};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.Methods");
ITHit.oNS.Undelete=function(oResponse){var oNsCl=ITHit.WebDAV.Client;oNsCl.Methods.Undelete.baseConstructor.call(this);return true};ITHit.Extend(ITHit.oNS.Undelete,ITHit.oNS.HttpMethod);ITHit.oNS.Undelete.Go=function(oSession,sHref,sHost){var oNsCl=ITHit.WebDAV.Client;var oNsMethods=oNsCl.Methods;var oRequest=oNsMethods.Undelete.createRequest(oSession,sHref,sHost);var oResponse=oRequest.GetResponse();ITHit.Logger.FinishRequest();var oReport=new oNsMethods.Report(oResponse);return oReport};
ITHit.oNS.Undelete.createRequest=function(oSession,sHref,sHost){var oRequest=oSession.CreateRequest(sHost,sHref);oRequest.Method("UNDELETE");return oRequest};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client");
ITHit.oNS.WebDavResponse=function(oResponseData,sRequestMethod){if(ITHit.Logger.Level>=ITHit.LogLevel.Info){ITHit.Logger.WriteMessage(ITHit.Phrases.wdrs.status.Paste(oResponseData.Status,oResponseData.StatusDescription));ITHit.Logger.WriteMessage(ITHit.Trim(oResponseData.Headers));var aHeaders=[];for(var sHeader in oResponseData.Headers)aHeaders.push(sHeader+":"+oResponseData.Headers[sHeader]);ITHit.Logger.WriteMessage(aHeaders.join("\n"))}this._Response=oResponseData;this.RequestMethod=sRequestMethod;
this.Status=new ITHit.WebDAV.Client.HttpStatus(oResponseData.Status,oResponseData.StatusDescription)};ITHit.oNS.WebDavResponse.prototype.Headers=function(){return this._Response.Headers};
ITHit.oNS.WebDavResponse.prototype.GetResponseStream=function(){var oNsIgnore=ITHit.WebDAV.Client.WebDavResponse.ignoreXmlByMethodAndStatus;var oOut=null;if(this._Response.BodyXml&&!(oNsIgnore[this.RequestMethod]&&oNsIgnore[this.RequestMethod][this._Response.Status]))oOut=new ITHit.XMLDoc(this._Response.BodyXml);if(ITHit.Logger.Level>=ITHit.LogLevel.Debug&&this.RequestMethod.toUpperCase()!="GET")if(oOut)ITHit.Logger.WriteMessage(String(oOut),ITHit.LogLevel.Debug);else if(this._Response.BodyText)ITHit.Logger.WriteMessage(this._Response.BodyText,
ITHit.LogLevel.Debug);return oOut};ITHit.oNS.WebDavResponse.ignoreXmlByMethodAndStatus={"DELETE":{200:true},"COPY":{201:true,204:true},"MOVE":{201:true,204:true}};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.Methods");
ITHit.oNS.ErrorResponse=function(oXmlDoc,sOriginalUri){this.ResponseDescription="";this.Properties=[];var oNsCl=ITHit.WebDAV.Client,oNsResponse=oNsCl.Methods.Response,oDescription=new oNsCl.PropertyName("responsedescription",oNsCl.DavConstants.NamespaceUri);var oResolver=new ITHit.XPath.resolver;oResolver.add("d",oNsCl.DavConstants.NamespaceUri);var oRes=ITHit.XPath.evaluate("/d:error/*",oXmlDoc,oResolver);var oNode;while(oNode=oRes.iterateNext()){var oProp=new oNsCl.Property(oNode.cloneNode());if(oDescription.Equals(oProp.Name)){this.ResponseDescription=
oProp.StringValue();continue}this.Properties.push(oProp)}};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.Exceptions");ITHit.oNS.UnauthorizedException=function(sMessage,sHref,oInnerException){var oNsCl=ITHit.WebDAV.Client;oNsCl.Exceptions.UnauthorizedException.baseConstructor.call(this,sMessage,sHref,null,oNsCl.HttpStatus.Unauthorized,oInnerException)};ITHit.Extend(ITHit.oNS.UnauthorizedException,ITHit.oNS.WebDavHttpException);ITHit.oNS.UnauthorizedException.prototype.Name="UnauthorizedException";
ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.Exceptions");ITHit.oNS.BadRequestException=function(sMessage,sHref,oMultistatus,oErrorInfo,oInnerException){var oNsCl=ITHit.WebDAV.Client;oNsCl.Exceptions.BadRequestException.baseConstructor.call(this,sMessage,sHref,oMultistatus,oNsCl.HttpStatus.BadRequest,oInnerException,oErrorInfo)};ITHit.Extend(ITHit.oNS.BadRequestException,ITHit.oNS.WebDavHttpException);ITHit.oNS.BadRequestException.prototype.Name="BadRequestException";ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.Exceptions");
ITHit.oNS.ConflictException=function(sMessage,sHref,oMultistatus,oErrorInfo,oInnerException){var oNsCl=ITHit.WebDAV.Client;oNsCl.Exceptions.ConflictException.baseConstructor.call(this,sMessage,sHref,oMultistatus,oNsCl.HttpStatus.Conflict,oInnerException,oErrorInfo)};ITHit.Extend(ITHit.oNS.ConflictException,ITHit.oNS.WebDavHttpException);ITHit.oNS.ConflictException.prototype.Name="ConflictException";ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.Exceptions");
ITHit.oNS.LockedException=function(sMessage,sHref,oMultistatus,oErrorInfo,oInnerException){var oNsCl=ITHit.WebDAV.Client;oNsCl.Exceptions.LockedException.baseConstructor.call(this,sMessage,sHref,oMultistatus,oNsCl.HttpStatus.Locked,oInnerException,oErrorInfo)};ITHit.Extend(ITHit.oNS.LockedException,ITHit.oNS.WebDavHttpException);ITHit.oNS.LockedException.prototype.Name="LockedException";ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.Exceptions");
ITHit.oNS.ForbiddenException=function(sMessage,sHref,oMultistatus,oErrorInfo,oInnerException){var oNsCl=ITHit.WebDAV.Client;oNsCl.Exceptions.ForbiddenException.baseConstructor.call(this,sMessage,sHref,oMultistatus,oNsCl.HttpStatus.Forbidden,oInnerException,oErrorInfo)};ITHit.Extend(ITHit.oNS.ForbiddenException,ITHit.oNS.WebDavHttpException);ITHit.oNS.ForbiddenException.prototype.Name="ForbiddenException";ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.Exceptions");
ITHit.oNS.MethodNotAllowedException=function(sMessage,sHref,oMultistatus,oErrorInfo,oInnerException){var oNsCl=ITHit.WebDAV.Client;oNsCl.Exceptions.MethodNotAllowedException.baseConstructor.call(this,sMessage,sHref,oMultistatus,oNsCl.HttpStatus.MethodNotAllowed,oInnerException,oErrorInfo)};ITHit.Extend(ITHit.oNS.MethodNotAllowedException,ITHit.oNS.WebDavHttpException);ITHit.oNS.MethodNotAllowedException.prototype.Name="MethodNotAllowedException";ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.Exceptions");
ITHit.oNS.NotImplementedException=function(sMessage,sHref,oMultistatus,oErrorInfo,oInnerException){var oNsCl=ITHit.WebDAV.Client;oNsCl.Exceptions.NotImplementedException.baseConstructor.call(this,sMessage,sHref,oMultistatus,oNsCl.HttpStatus.NotImplemented,oInnerException,oErrorInfo)};ITHit.Extend(ITHit.oNS.NotImplementedException,ITHit.oNS.WebDavHttpException);ITHit.oNS.NotImplementedException.prototype.Name="NotImplementedException";ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.Exceptions");
ITHit.oNS.NotFoundException=function(sMessage,sHref,oInnerException){var oNsCl=ITHit.WebDAV.Client;oNsCl.Exceptions.NotFoundException.baseConstructor.call(this,sMessage,sHref,null,oNsCl.HttpStatus.NotFound,oInnerException)};ITHit.Extend(ITHit.oNS.NotFoundException,ITHit.oNS.WebDavHttpException);ITHit.oNS.NotFoundException.prototype.Name="NotFoundException";ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.Exceptions");
ITHit.oNS.PreconditionFailedException=function(sMessage,sHref,oMultistatus,oErrorInfo,oInnerException){var oNsCl=ITHit.WebDAV.Client;oNsCl.Exceptions.PreconditionFailedException.baseConstructor.call(this,sMessage,sHref,oMultistatus,oNsCl.HttpStatus.PreconditionFailed,oInnerException,oErrorInfo)};ITHit.Extend(ITHit.oNS.PreconditionFailedException,ITHit.oNS.WebDavHttpException);ITHit.oNS.PreconditionFailedException.prototype.Name="PreconditionFailedException";ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.Exceptions");
ITHit.oNS.DependencyFailedException=function(sMessage,sHref,oMultistatus,oErrorInfo,oInnerException){var oNsCl=ITHit.WebDAV.Client;oNsCl.Exceptions.DependencyFailedException.baseConstructor.call(this,sMessage,sHref,oMultistatus,oNsCl.HttpStatus.DependencyFailed,oInnerException,oErrorInfo)};ITHit.Extend(ITHit.oNS.DependencyFailedException,ITHit.oNS.WebDavHttpException);ITHit.oNS.DependencyFailedException.prototype.Name="DependencyFailedException";ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.Exceptions");
ITHit.oNS.InsufficientStorageException=function(sMessage,sHref,oMultistatus,oInnerException,oError){var oNsCl=ITHit.WebDAV.Client;oNsCl.Exceptions.InsufficientStorageException.baseConstructor.call(this,sMessage,sHref,oMultistatus,oNsCl.HttpStatus.InsufficientStorage,oInnerException,oError)};ITHit.Extend(ITHit.oNS.InsufficientStorageException,ITHit.oNS.WebDavHttpException);ITHit.oNS.InsufficientStorageException.prototype.Name="InsufficientStorageException";ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.Exceptions");
ITHit.oNS.QuotaNotExceededException=function(sMessage,sHref,oMultistatus,oInnerException,oError){var oNsCl=ITHit.WebDAV.Client;oNsCl.Exceptions.QuotaNotExceededException.baseConstructor.call(this,sMessage,sHref,oMultistatus,oNsCl.HttpStatus.InsufficientStorage,oInnerException,oError)};ITHit.Extend(ITHit.oNS.QuotaNotExceededException,ITHit.oNS.InsufficientStorageException);ITHit.oNS.QuotaNotExceededException.prototype.Name="QuotaNotExceededException";ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.Exceptions");
ITHit.oNS.SufficientDiskSpaceException=function(sMessage,sHref,oMultistatus,oInnerException,oError){var oNsCl=ITHit.WebDAV.Client;oNsCl.Exceptions.SufficientDiskSpaceException.baseConstructor.call(this,sMessage,sHref,oMultistatus,oNsCl.HttpStatus.InsufficientStorage,oInnerException,oError)};ITHit.Extend(ITHit.oNS.SufficientDiskSpaceException,ITHit.oNS.InsufficientStorageException);ITHit.oNS.SufficientDiskSpaceException.prototype.Name="SufficientDiskSpaceException";ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.Exceptions.Parsers");
ITHit.oNS.InsufficientStorage=function(sMessage,sHref,oMultistatus,oError,oInnerException){var sExceptionClass="InsufficientStorageException",oNsCl=ITHit.WebDAV.Client;if(1==oError.Properties.length){var oPropName=oError.Properties[0].Name;if(oPropName.Equals(oNsCl.DavConstants.QuotaNotExceeded))sExceptionClass="QuotaNotExceededException";else if(oPropName.Equals(oNsCl.DavConstants.SufficientDiskSpace))sExceptionClass="SufficientDiskSpaceException"}return new oNsCl.Exceptions[sExceptionClass](oError.Description||
sMessage,sHref,oMultistatus,oInnerException,oError)};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client");ITHit.oNS.IError=function(){};ITHit.oNSClient=ITHit.Declare("ITHit.WebDAV.Client");ITHit.oNS=ITHit.Declare("Exceptions.Info",ITHit.oNSClient);
ITHit.oNS.Error=function(oErrorResponse){var oNsInfo=ITHit.WebDAV.Client.Exceptions.Info;oNsInfo.Error.baseConstructor.call(this);this.Description="";this.Properties=[];this.BodyText="";if(oErrorResponse){this.Description=oErrorResponse.ResponseDescription;this.Properties=oErrorResponse.Properties}};ITHit.Extend(ITHit.oNS.Error,ITHit.oNSClient.IError);ITHit.Phrases.LoadJSON(ITHit.Temp.WebDAV_Phrases);ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client");ITHit.oNS.WebDavRequest={};
(function(){var Headers=function(oHeaders){this.Headers=oHeaders};Headers.prototype.Add=function(sHeader,sValue){this.Headers[sHeader]=sValue};Headers.prototype.GetAll=function(){return this.Headers};var WebDavRequest=function(sUri,sUser,sPass){ITHit.Logger.StartRequest();this._Href=sUri;this._Method="GET";this._Headers={};this._Body="";this._User=sUser;this._Password=sPass;this.Headers=new Headers(this._Headers);this.PreventCaching=null;this.OnProgress=null;this._XMLRequest=null;this._ClassId="ITHit.WebDAV.Client.WebDavSession.WebDavRequest_"+
WebDavRequest._Counter++};WebDavRequest._Counter=0;ITHit.oNS.WebDavRequest.Create=function(sUri,mLockTokens,sUser,sPass,sHost){if(/^\//.test(sUri))sUri=sHost+sUri.substr(1);var oRequest=new WebDavRequest(sUri,sUser,sPass);var oNsCl=ITHit.WebDAV.Client;if("string"==typeof mLockTokens){if(mLockTokens)oRequest.Headers.Add("If","(<"+oNsCl.DavConstants.OpaqueLockToken+mLockTokens+">)")}else if(mLockTokens instanceof Array&&mLockTokens.length){var sLockTokensHeader="";var bFirst=true;for(var i=0;i<mLockTokens.length;i++){oNsCl.WebDavUtil.VerifyArgumentNotNull(mLockTokens[i],
"lockToken");sLockTokensHeader+=(bFirst?"":" ")+"(<"+oNsCl.DavConstants.OpaqueLockToken+mLockTokens[i].LockToken+">)";bFirst=false}oRequest.Headers.Add("If",sLockTokensHeader)}return oRequest};WebDavRequest.prototype.Method=function(sValue){if(undefined!==sValue)this._Method=sValue;return this._Method};WebDavRequest.prototype.Body=function(mBody){if(undefined!==mBody)this._Body=mBody;return this._Body};WebDavRequest.prototype.Abort=function(){if(this._XMLRequest!==null)this._XMLRequest.Abort()};WebDavRequest.prototype.GetResponse=
function(fCallback){var bAsync=typeof fCallback==="function";var sHref=this._Href;if(ITHit.Config.PreventCaching&&this.PreventCaching===null||this.PreventCaching===true){var sAndSymbol=sHref.indexOf("?")!==-1?"&":"?";var sNoCacheParam=sAndSymbol+"nocache="+(new Date).getTime();if(sHref.indexOf("#")!==-1)sHref.replace(/#/g,sNoCacheParam+"#");else sHref+=sNoCacheParam}sHref=sHref.replace(/#/g,"%23");var oRequestData=new ITHit.HttpRequest(sHref,this._Method,this._Headers,String(this._Body));var oResponseData=
ITHit.Events.DispatchEvent(this,"OnBeforeRequestSend",oRequestData);if(!oResponseData||!(oResponseData instanceof ITHit.HttpResponse)){oRequestData.User=null===oRequestData.User?this._User:oRequestData.User;oRequestData.Password=null===oRequestData.Password?this._Password:oRequestData.Password;ITHit.Logger.WriteMessage(oRequestData.Method+" "+oRequestData.Href);var oHeaders=oRequestData.Headers;for(var sHeader in oHeaders)ITHit.Logger.WriteMessage(sHeader+": "+oHeaders[sHeader]);oRequestData.Body=
String(oRequestData.Body)||"";if("PUT"!=oRequestData.Method.toUpperCase()&&oRequestData.Body)ITHit.Logger.WriteMessage(oRequestData.Body);this._XMLRequest=new ITHit.XMLRequest(oRequestData,bAsync)}if(bAsync)if(this._XMLRequest!==null){var self=this;this._XMLRequest.OnData=function(oResponseData){var oWebDavResponse=null;var bSuccess=true;var oError=null;try{oWebDavResponse=self._onGetResponse(oRequestData,oResponseData);bSuccess=true}catch(e){oError=e;bSuccess=false}var oAsyncResult=new ITHit.WebDAV.Client.AsyncResult(oWebDavResponse,
bSuccess,oError);fCallback.call(this,oAsyncResult)};this._XMLRequest.OnError=function(oException){var oWebDavHttpException=new ITHit.WebDAV.Client.Exceptions.WebDavHttpException(oException.message,sHref,null,null,oException);var oAsyncResult=new ITHit.WebDAV.Client.AsyncResult(null,false,oWebDavHttpException);fCallback.call(this,oAsyncResult)};this._XMLRequest.OnProgress=function(oEvent){if(typeof self.OnProgress==="function")self.OnProgress(oEvent)};this._XMLRequest.Send()}else{var oWebDavResponse=
this._onGetResponse(oRequestData,oResponseData);fCallback.call(this,oWebDavResponse)}else{if(this._XMLRequest!==null){this._XMLRequest.Send();oResponseData=this._XMLRequest.GetResponse()}var oWebDavResponse=this._onGetResponse(oRequestData,oResponseData);return oWebDavResponse}};WebDavRequest.prototype._onGetResponse=function(oRequestData,oResponseData){var oNsCl=ITHit.WebDAV.Client;ITHit.Events.DispatchEvent(this,"OnResponse",oResponseData);var oStatus=new oNsCl.HttpStatus(oResponseData.Status,oResponseData.StatusDescription);
if(oResponseData.Status==oNsCl.HttpStatus.Redirect.Code)window.location.replace(oResponseData.Headers["Location"]);if(!oStatus.IsSuccess())throw WebDavRequest.ProcessWebException(oResponseData);return new oNsCl.WebDavResponse(oResponseData,oRequestData.Method)};WebDavRequest.ProcessWebException=function(oResponseData){var oNsCl=ITHit.WebDAV.Client,oNsHttpStatus=oNsCl.HttpStatus,oNsExcept=oNsCl.Exceptions,oResponse=null,sResponseData="";if(oResponseData.BodyXml&&oResponseData.BodyXml.childNodes.length){oResponse=
new ITHit.XMLDoc(oResponseData.BodyXml);sResponseData=String(oResponse)}ITHit.Logger.WriteMessage("\n"+oResponseData.Status+" "+oResponseData.StatusDescription);var aHeaders=[];for(var sHeader in oResponseData.Headers)aHeaders.push(sHeader+":"+oResponseData.Headers[sHeader]);ITHit.Logger.WriteMessage(aHeaders.join("\n"));ITHit.Logger.WriteMessage(sResponseData?sResponseData:oResponseData.BodyText);var oInfo=null,oErrorInfo=null;if(oResponse){var oErrorResponse=new oNsCl.Methods.ErrorResponse(oResponse,
oResponseData.Href);oErrorInfo=new oNsExcept.Info.Error(oErrorResponse);var oMultiResponse=new oNsCl.Methods.MultiResponse(oResponse,oResponseData.Href);oInfo=new oNsExcept.Info.Multistatus(oMultiResponse)}else{oErrorInfo=new oNsExcept.Info.Error;oErrorInfo.BodyText=oResponseData.BodyText}var oException=null,oExceptionToThrow;switch(oResponseData.Status){case oNsHttpStatus.Unauthorized.Code:oExceptionToThrow=new oNsExcept.UnauthorizedException(ITHit.Phrases.Exceptions.Unauthorized,oResponseData.Href,
oException);break;case oNsHttpStatus.Conflict.Code:oExceptionToThrow=new oNsExcept.ConflictException(ITHit.Phrases.Exceptions.Conflict,oResponseData.Href,oInfo,oErrorInfo,oException);break;case oNsHttpStatus.Locked.Code:oExceptionToThrow=new oNsExcept.LockedException(ITHit.Phrases.Exceptions.Locked,oResponseData.Href,oInfo,oErrorInfo,oException);break;case oNsHttpStatus.BadRequest.Code:oExceptionToThrow=new oNsExcept.BadRequestException(ITHit.Phrases.Exceptions.BadRequest,oResponseData.Href,oInfo,
oErrorInfo,oException);break;case oNsHttpStatus.Forbidden.Code:oExceptionToThrow=new oNsExcept.ForbiddenException(ITHit.Phrases.Exceptions.Forbidden,oResponseData.Href,oInfo,oErrorInfo,oException);break;case oNsHttpStatus.MethodNotAllowed.Code:oExceptionToThrow=new oNsExcept.MethodNotAllowedException(ITHit.Phrases.Exceptions.MethodNotAllowed,oResponseData.Href,oInfo,oErrorInfo,oException);break;case oNsHttpStatus.NotImplemented.Code:oExceptionToThrow=new oNsExcept.NotImplementedException(ITHit.Phrases.Exceptions.MethodNotAllowed,
oResponseData.Href,oInfo,oErrorInfo,oException);break;case oNsHttpStatus.NotFound.Code:oExceptionToThrow=new oNsExcept.NotFoundException(ITHit.Phrases.Exceptions.NotFound,oResponseData.Href,oException);break;case oNsHttpStatus.PreconditionFailed.Code:oExceptionToThrow=new oNsExcept.PreconditionFailedException(ITHit.Phrases.Exceptions.PreconditionFailed,oResponseData.Href,oInfo,oErrorInfo,oException);break;case oNsHttpStatus.DependencyFailed.Code:oExceptionToThrow=new oNsExcept.DependencyFailedException(ITHit.Phrases.Exceptions.DependencyFailed,
oResponseData.Href,oInfo,oErrorInfo,oException);break;case oNsHttpStatus.InsufficientStorage.Code:oExceptionToThrow=oNsExcept.Parsers.InsufficientStorage(ITHit.Phrases.Exceptions.InsufficientStorage,oResponseData.Href,oInfo,oErrorInfo,oException);break;default:if(sResponseData)sResponseData="\n"+ITHit.Phrases.ServerReturned+"\n----\n"+sResponseData+"\n----\n";oExceptionToThrow=new oNsExcept.WebDavHttpException(ITHit.Phrases.Exceptions.Http+sResponseData,oResponseData.Href,oInfo,new oNsCl.HttpStatus(oResponseData.Status,
oResponseData.StatusDescription),oException,oErrorInfo);break}ITHit.Logger.FinishLogging();return oExceptionToThrow};WebDavRequest.prototype.LogRequestInfo=function(){if(ITHit.Logger.LogLevel<=ITHit.LogLevel.Info){ITHit.Logger.WriteMessage(oRequest._Method+" "+oRequest._Href);var oHeaders=oRequest._Headers;for(var sHeaderName in oHeaders)ITHit.Logger.WriteMessage(sHeaderName+" : "+oHeaders[sHeaderName])}};WebDavRequest.prototype.toString=function(){return this._ClassId};return this})();
ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client");ITHit.oNS.WebDavSession=function(){this.sServerEngine=null;this.bIisDetected=null;this._User="";this._Pass="";this._ClassId="ITHit.WebDAV.Client.WebDavSession_"+ITHit.WebDAV.Client.WebDavSession._Counter++};ITHit.oNS.WebDavSession.Version="1.7.0.1230";ITHit.oNS.WebDavSession._Counter=0;
ITHit.oNS.WebDavSession.prototype.OpenResource=function(sPath){var oNsCl=ITHit.WebDAV.Client;ITHit.Logger.StartLogging();ITHit.Logger.IgnoreNextStartLogging();return oNsCl.Resource.Open(this,sPath)};ITHit.oNS.WebDavSession.prototype.OpenFolder=function(sPath){var oNsCl=ITHit.WebDAV.Client;ITHit.Logger.StartLogging();ITHit.Logger.IgnoreNextStartLogging();return oNsCl.Folder.Open(this,sPath)};
ITHit.oNS.WebDavSession.prototype.OpenFolderAsync=function(sPath,fCallback){fCallback=fCallback||function(){};var oNsCl=ITHit.WebDAV.Client;ITHit.Logger.StartLogging();ITHit.Logger.IgnoreNextStartLogging();oNsCl.Folder.OpenAsync(this,sPath,fCallback)};ITHit.oNS.WebDavSession.prototype.OpenItem=function(sPath){var oNsMethods=ITHit.WebDAV.Client.Methods;ITHit.Logger.StartLogging();ITHit.Logger.IgnoreNextStartLogging();return oNsMethods.GetItem(this,sPath)};
ITHit.oNS.WebDavSession.prototype.OpenItemAsync=function(sPath,fCallback){fCallback=fCallback||function(){};var oNsMethods=ITHit.WebDAV.Client.Methods;ITHit.Logger.StartLogging();ITHit.Logger.IgnoreNextStartLogging();return oNsMethods.GetItem(this,sPath,fCallback)};
ITHit.oNS.WebDavSession.prototype.CreateRequest=function(sHost,sPath,mLockTokens){var oNsCl=ITHit.WebDAV.Client;if("undefined"==typeof mLockTokens)mLockTokens=[];var oRequest=oNsCl.WebDavRequest.Create(sPath,mLockTokens,this._User,this._Pass,sHost);ITHit.Events.AddListener(oRequest,"OnBeforeRequestSend","OnBeforeRequestSendHandler",this);ITHit.Events.AddListener(oRequest,"OnResponse","OnResponseHandler",this);return oRequest};
ITHit.oNS.WebDavSession.prototype.OnBeforeRequestSendHandler=function(oRequestData,oWebDavRequest){ITHit.Events.RemoveListener(oWebDavRequest,"OnBeforeRequestSend","OnBeforeRequestSendHandler",this);return ITHit.Events.DispatchEvent(this,"OnBeforeRequestSend",oRequestData)};
ITHit.oNS.WebDavSession.prototype.OnResponseHandler=function(oResponseData,oWebDavRequest){var oWebDavRequest=arguments[arguments.length-1];if(this.sServerEngine===null)this.sServerEngine=oResponseData.GetResponseHeader("x-engine",true);if(this.bIisDetected===null){var sServerHeader=oResponseData.GetResponseHeader("server",true);this.bIisDetected=/^Microsoft-IIS\//i.test(sServerHeader)}ITHit.Events.RemoveListener(oWebDavRequest,"OnResponse","OnResponseHandler",this);return ITHit.Events.DispatchEvent(this,
"OnResponse",oResponseData)};ITHit.oNS.WebDavSession.prototype.GetUploadProgress=function(sPath){var oNsCl=ITHit.WebDAV.Client;ITHit.Logger.StartLogging();ITHit.Logger.IgnoreNextStartLogging();var sPath=oNsCl.Encoder.EncodeURI(sPath);var oReport=oNsCl.Methods.Report.Go(this,sPath,oNsCl.HierarchyItem.GetHost(sPath));ITHit.Logger.FinishLogging();return oReport};
ITHit.oNS.WebDavSession.prototype.GetUploadProgressAsync=function(sPath,fCallback){var oNsCl=ITHit.WebDAV.Client;ITHit.Logger.StartLogging();ITHit.Logger.IgnoreNextStartLogging();var sPath=oNsCl.Encoder.EncodeURI(sPath);var oWebDavRequest=oNsCl.Methods.Report.GoAsync(this,sPath,oNsCl.HierarchyItem.GetHost(sPath),null,null,fCallback);ITHit.Logger.FinishLogging();return oWebDavRequest};
ITHit.oNS.WebDavSession.prototype.GetSupportedFeaturesAsync=function(sPath,fCallback){var oNsCl=ITHit.WebDAV.Client;ITHit.Logger.StartLogging();ITHit.Logger.IgnoreNextStartLogging();var oWebDavRequest=oNsCl.Methods.Options.GoAsync(this,sPath,oNsCl.HierarchyItem.GetHost(sPath),fCallback);ITHit.Logger.FinishLogging();return oWebDavRequest};
ITHit.oNS.WebDavSession.prototype.DeleteAsync=function(sPath,oLockTokens,fCallback){var oNsCl=ITHit.WebDAV.Client;ITHit.Logger.StartLogging();ITHit.Logger.IgnoreNextStartLogging();var oWebDavRequest=oNsCl.Methods.Delete.GoAsync(this,sPath,oLockTokens,oNsCl.HierarchyItem.GetHost(sPath),fCallback);ITHit.Logger.FinishLogging();return oWebDavRequest};
ITHit.oNS.WebDavSession.prototype.CancelUploadAsync=function(sPath,sLockToken,fCallback){var oNsCl=ITHit.WebDAV.Client;ITHit.Logger.StartLogging();ITHit.Logger.IgnoreNextStartLogging();var oWebDavRequest=oNsCl.Methods.CancelUpload.GoAsync(this,sPath,sLockToken,oNsCl.HierarchyItem.GetHost(sPath),fCallback);ITHit.Logger.FinishLogging();return oWebDavRequest};
ITHit.oNS.WebDavSession.prototype.CreateFolderAsync=function(sPath,sLockToken,fCallback){var oNsCl=ITHit.WebDAV.Client;ITHit.Logger.StartLogging();ITHit.Logger.IgnoreNextStartLogging();var oWebDavRequest=oNsCl.Methods.Mkcol.GoAsync(this,sPath,sLockToken,oNsCl.HierarchyItem.GetHost(sPath),fCallback);ITHit.Logger.FinishLogging();return oWebDavRequest};
ITHit.oNS.WebDavSession.prototype.Undelete=function(sPath){var oNsCl=ITHit.WebDAV.Client;ITHit.Logger.StartLogging();ITHit.Logger.IgnoreNextStartLogging();var sPath=oNsCl.Encoder.EncodeURI(sPath),oReport=oNsCl.Methods.Undelete.Go(this,sPath,oNsCl.HierarchyItem.GetHost(sPath));ITHit.Logger.FinishLogging();return oReport};ITHit.oNS.WebDavSession.prototype.SetCredentials=function(sUser,sPass){this._User=sUser;this._Pass=sPass};ITHit.oNS.WebDavSession.prototype.GetIisDetected=function(){return this.bIisDetected};
ITHit.oNS.WebDavSession.prototype.toString=function(){return this._ClassId};ITHit.Declare("ITHit.Components");
(function(){var YAHOO={};ITHit.Components.YAHOO=YAHOO;YAHOO.namespace=function(){var A=arguments,E=null,C,B,D;for(C=0;C<A.length;C=C+1){D=A[C].split(".");E=YAHOO;for(B=D[0]=="YAHOO"?1:0;B<D.length;B=B+1){E[D[B]]=E[D[B]]||{};E=E[D[B]]}}return E};YAHOO.log=function(D,A,C){var B=YAHOO.widget.Logger;if(B&&B.log)return B.log(D,A,C);else return false};YAHOO.register=function(A,E,D){var I=YAHOO.env.modules;if(!I[A])I[A]={versions:[],builds:[]};var B=I[A],H=D.version,G=D.build,F=YAHOO.env.listeners;B.name=
A;B.version=H;B.build=G;B.versions.push(H);B.builds.push(G);B.mainClass=E;for(var C=0;C<F.length;C=C+1)F[C](B);if(E){E.VERSION=H;E.BUILD=G}else YAHOO.log("mainClass is undefined for module "+A,"warn")};YAHOO.env=YAHOO.env||{modules:[],listeners:[]};YAHOO.env.getVersion=function(A){return YAHOO.env.modules[A]||null};YAHOO.env.ua=function(){var C={ie:0,opera:0,gecko:0,webkit:0,mobile:null,air:0};var B=navigator.userAgent,A;if(/KHTML/.test(B))C.webkit=1;A=B.match(/AppleWebKit\/([^\s]*)/);if(A&&A[1]){C.webkit=
parseFloat(A[1]);if(/ Mobile\//.test(B))C.mobile="Apple";else{A=B.match(/NokiaN[^\/]*/);if(A)C.mobile=A[0]}A=B.match(/AdobeAIR\/([^\s]*)/);if(A)C.air=A[0]}if(!C.webkit){A=B.match(/Opera[\s\/]([^\s]*)/);if(A&&A[1]){C.opera=parseFloat(A[1]);A=B.match(/Opera Mini[^;]*/);if(A)C.mobile=A[0]}else{A=B.match(/MSIE\s([^;]*)/);if(A&&A[1])C.ie=parseFloat(A[1]);else{A=B.match(/Gecko\/([^\s]*)/);if(A){C.gecko=1;A=B.match(/rv:([^\s\)]*)/);if(A&&A[1])C.gecko=parseFloat(A[1])}}}}return C}();(function(){YAHOO.namespace("util",
"widget","example");if("undefined"!==typeof YAHOO_config){var B=YAHOO_config.listener,A=YAHOO.env.listeners,D=true,C;if(B){for(C=0;C<A.length;C=C+1)if(A[C]==B){D=false;break}if(D)A.push(B)}}})();YAHOO.lang=YAHOO.lang||{isArray:function(B){if(B){var A=YAHOO.lang;return A.isNumber(B.length)&&A.isFunction(B.splice)}return false},isBoolean:function(A){return typeof A==="boolean"},isFunction:function(A){return typeof A==="function"},isNull:function(A){return A===null},isNumber:function(A){return typeof A===
"number"&&isFinite(A)},isObject:function(A){return A&&(typeof A==="object"||YAHOO.lang.isFunction(A))||false},isString:function(A){return typeof A==="string"},isUndefined:function(A){return typeof A==="undefined"},hasOwnProperty:function(A,B){if(Object.prototype.hasOwnProperty)return A.hasOwnProperty(B);return!YAHOO.lang.isUndefined(A[B])&&A.constructor.prototype[B]!==A[B]},_IEEnumFix:function(C,B){if(YAHOO.env.ua.ie){var E=["toString","valueOf"],A;for(A=0;A<E.length;A=A+1){var F=E[A],D=B[F];if(YAHOO.lang.isFunction(D)&&
D!=Object.prototype[F])C[F]=D}}},extend:function(D,E,C){if(!E||!D)throw new Error("YAHOO.lang.extend failed, please check that "+"all dependencies are included.");var B=function(){};B.prototype=E.prototype;D.prototype=new B;D.prototype.constructor=D;D.superclass=E.prototype;if(E.prototype.constructor==Object.prototype.constructor)E.prototype.constructor=E;if(C){for(var A in C)D.prototype[A]=C[A];YAHOO.lang._IEEnumFix(D.prototype,C)}},augmentObject:function(E,D){if(!D||!E)throw new Error("Absorb failed, verify dependencies.");
var A=arguments,C,F,B=A[2];if(B&&B!==true)for(C=2;C<A.length;C=C+1)E[A[C]]=D[A[C]];else{for(F in D)if(B||!E[F])E[F]=D[F];YAHOO.lang._IEEnumFix(E,D)}},augmentProto:function(D,C){if(!C||!D)throw new Error("Augment failed, verify dependencies.");var A=[D.prototype,C.prototype];for(var B=2;B<arguments.length;B=B+1)A.push(arguments[B]);YAHOO.lang.augmentObject.apply(this,A)},dump:function(A,G){var C=YAHOO.lang,D,F,I=[],J="{...}",B="f(){...}",H=", ",E=" => ";if(!C.isObject(A))return A+"";else if(A instanceof
Date||"nodeType"in A&&"tagName"in A)return A;else if(C.isFunction(A))return B;G=C.isNumber(G)?G:3;if(C.isArray(A)){I.push("[");for(D=0,F=A.length;D<F;D=D+1){if(C.isObject(A[D]))I.push(G>0?C.dump(A[D],G-1):J);else I.push(A[D]);I.push(H)}if(I.length>1)I.pop();I.push("]")}else{I.push("{");for(D in A)if(C.hasOwnProperty(A,D)){I.push(D+E);if(C.isObject(A[D]))I.push(G>0?C.dump(A[D],G-1):J);else I.push(A[D]);I.push(H)}if(I.length>1)I.pop();I.push("}")}return I.join("")},substitute:function(Q,B,J){var G,
F,E,M,N,P,D=YAHOO.lang,L=[],C,H="dump",K=" ",A="{",O="}";for(;;){G=Q.lastIndexOf(A);if(G<0)break;F=Q.indexOf(O,G);if(G+1>=F)break;C=Q.substring(G+1,F);M=C;P=null;E=M.indexOf(K);if(E>-1){P=M.substring(E+1);M=M.substring(0,E)}N=B[M];if(J)N=J(M,N,P);if(D.isObject(N))if(D.isArray(N))N=D.dump(N,parseInt(P,10));else{P=P||"";var I=P.indexOf(H);if(I>-1)P=P.substring(4);if(N.toString===Object.prototype.toString||I>-1)N=D.dump(N,parseInt(P,10));else N=N.toString()}else if(!D.isString(N)&&!D.isNumber(N)){N=
"~-"+L.length+"-~";L[L.length]=C}Q=Q.substring(0,G)+N+Q.substring(F+1)}for(G=L.length-1;G>=0;G=G-1)Q=Q.replace(new RegExp("~-"+G+"-~"),"{"+L[G]+"}","g");return Q},trim:function(A){try{return A.replace(/^\s+|\s+$/g,"")}catch(B){return A}},merge:function(){var D={},B=arguments;for(var C=0,A=B.length;C<A;C=C+1)YAHOO.lang.augmentObject(D,B[C],true);return D},later:function(H,B,I,D,E){H=H||0;B=B||{};var C=I,G=D,F,A;if(YAHOO.lang.isString(I))C=B[I];if(!C)throw new TypeError("method undefined");if(!YAHOO.lang.isArray(G))G=
[D];F=function(){C.apply(B,G)};A=E?setInterval(F,H):setTimeout(F,H);return{interval:E,cancel:function(){if(this.interval)clearInterval(A);else clearTimeout(A)}}},isValue:function(B){var A=YAHOO.lang;return A.isObject(B)||A.isString(B)||A.isNumber(B)||A.isBoolean(B)}};YAHOO.util.Lang=YAHOO.lang;YAHOO.lang.augment=YAHOO.lang.augmentProto;YAHOO.augment=YAHOO.lang.augmentProto;YAHOO.extend=YAHOO.lang.extend;YAHOO.register("yahoo",YAHOO,{version:"2.5.1",build:"984"});(function(){var B=YAHOO.util,K,I,J=
{},F={},M=window.document;YAHOO.env._id_counter=YAHOO.env._id_counter||0;var C=YAHOO.env.ua.opera,L=YAHOO.env.ua.webkit,A=YAHOO.env.ua.gecko,G=YAHOO.env.ua.ie;var E={HYPHEN:/(-[a-z])/i,ROOT_TAG:/^body|html$/i,OP_SCROLL:/^(?:inline|table-row)$/i};var N=function(P){if(!E.HYPHEN.test(P))return P;if(J[P])return J[P];var Q=P;while(E.HYPHEN.exec(Q))Q=Q.replace(RegExp.$1,RegExp.$1.substr(1).toUpperCase());J[P]=Q;return Q};var O=function(Q){var P=F[Q];if(!P){P=new RegExp("(?:^|\\s+)"+Q+"(?:\\s+|$)");F[Q]=
P}return P};if(M.defaultView&&M.defaultView.getComputedStyle)K=function(P,S){var R=null;if(S=="float")S="cssFloat";var Q=P.ownerDocument.defaultView.getComputedStyle(P,"");if(Q)R=Q[N(S)];return P.style[S]||R};else if(M.documentElement.currentStyle&&G)K=function(P,R){switch(N(R)){case "opacity":var T=100;try{T=P.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(S){try{T=P.filters("alpha").opacity}catch(S){}}return T/100;case "float":R="styleFloat";default:var Q=P.currentStyle?P.currentStyle[R]:
null;return P.style[R]||Q}};else K=function(P,Q){return P.style[Q]};if(G)I=function(P,Q,R){switch(Q){case "opacity":if(YAHOO.lang.isString(P.style.filter)){P.style.filter="alpha(opacity="+R*100+")";if(!P.currentStyle||!P.currentStyle.hasLayout)P.style.zoom=1}break;case "float":Q="styleFloat";default:P.style[Q]=R}};else I=function(P,Q,R){if(Q=="float")Q="cssFloat";P.style[Q]=R};var D=function(P,Q){return P&&P.nodeType==1&&(!Q||Q(P))};YAHOO.util.Dom={get:function(R){if(R&&(R.nodeType||R.item))return R;
if(YAHOO.lang.isString(R)||!R)return M.getElementById(R);if(R.length!==undefined){var S=[];for(var Q=0,P=R.length;Q<P;++Q)S[S.length]=B.Dom.get(R[Q]);return S}return R},getStyle:function(P,R){R=N(R);var Q=function(S){return K(S,R)};return B.Dom.batch(P,Q,B.Dom,true)},setStyle:function(P,R,S){R=N(R);var Q=function(T){I(T,R,S)};B.Dom.batch(P,Q,B.Dom,true)},getXY:function(P){var Q=function(R){if((R.parentNode===null||R.offsetParent===null||this.getStyle(R,"display")=="none")&&R!=R.ownerDocument.body)return false;
return H(R)};return B.Dom.batch(P,Q,B.Dom,true)},getX:function(P){var Q=function(R){return B.Dom.getXY(R)[0]};return B.Dom.batch(P,Q,B.Dom,true)},getY:function(P){var Q=function(R){return B.Dom.getXY(R)[1]};return B.Dom.batch(P,Q,B.Dom,true)},setXY:function(P,S,R){var Q=function(V){var U=this.getStyle(V,"position");if(U=="static"){this.setStyle(V,"position","relative");U="relative"}var X=this.getXY(V);if(X===false)return false;var W=[parseInt(this.getStyle(V,"left"),10),parseInt(this.getStyle(V,"top"),
10)];if(isNaN(W[0]))W[0]=U=="relative"?0:V.offsetLeft;if(isNaN(W[1]))W[1]=U=="relative"?0:V.offsetTop;if(S[0]!==null)V.style.left=S[0]-X[0]+W[0]+"px";if(S[1]!==null)V.style.top=S[1]-X[1]+W[1]+"px";if(!R){var T=this.getXY(V);if(S[0]!==null&&T[0]!=S[0]||S[1]!==null&&T[1]!=S[1])this.setXY(V,S,true)}};B.Dom.batch(P,Q,B.Dom,true)},setX:function(Q,P){B.Dom.setXY(Q,[P,null])},setY:function(P,Q){B.Dom.setXY(P,[null,Q])},getRegion:function(P){var Q=function(R){if((R.parentNode===null||R.offsetParent===null||
this.getStyle(R,"display")=="none")&&R!=R.ownerDocument.body)return false;var S=B.Region.getRegion(R);return S};return B.Dom.batch(P,Q,B.Dom,true)},getClientWidth:function(){return B.Dom.getViewportWidth()},getClientHeight:function(){return B.Dom.getViewportHeight()},getElementsByClassName:function(T,X,U,V){X=X||"*";U=U?B.Dom.get(U):null||M;if(!U)return[];var Q=[],P=U.getElementsByTagName(X),W=O(T);for(var R=0,S=P.length;R<S;++R)if(W.test(P[R].className)){Q[Q.length]=P[R];if(V)V.call(P[R],P[R])}return Q},
hasClass:function(R,Q){var P=O(Q);var S=function(T){return P.test(T.className)};return B.Dom.batch(R,S,B.Dom,true)},addClass:function(Q,P){var R=function(S){if(this.hasClass(S,P))return false;S.className=YAHOO.lang.trim([S.className,P].join(" "));return true};return B.Dom.batch(Q,R,B.Dom,true)},removeClass:function(R,Q){var P=O(Q);var S=function(T){if(!Q||!this.hasClass(T,Q))return false;var U=T.className;T.className=U.replace(P," ");if(this.hasClass(T,Q))this.removeClass(T,Q);T.className=YAHOO.lang.trim(T.className);
return true};return B.Dom.batch(R,S,B.Dom,true)},replaceClass:function(S,Q,P){if(!P||Q===P)return false;var R=O(Q);var T=function(U){if(!this.hasClass(U,Q)){this.addClass(U,P);return true}U.className=U.className.replace(R," "+P+" ");if(this.hasClass(U,Q))this.replaceClass(U,Q,P);U.className=YAHOO.lang.trim(U.className);return true};return B.Dom.batch(S,T,B.Dom,true)},generateId:function(P,R){R=R||"yui-gen";var Q=function(S){if(S&&S.id)return S.id;var T=R+YAHOO.env._id_counter++;if(S)S.id=T;return T};
return B.Dom.batch(P,Q,B.Dom,true)||Q.apply(B.Dom,arguments)},isAncestor:function(P,Q){P=B.Dom.get(P);Q=B.Dom.get(Q);if(!P||!Q)return false;if(P.contains&&Q.nodeType&&!L)return P.contains(Q);else if(P.compareDocumentPosition&&Q.nodeType)return!!(P.compareDocumentPosition(Q)&16);else if(Q.nodeType)return!!this.getAncestorBy(Q,function(R){return R==P});return false},inDocument:function(P){return this.isAncestor(M.documentElement,P)},getElementsBy:function(W,Q,R,T){Q=Q||"*";R=R?B.Dom.get(R):null||M;
if(!R)return[];var S=[],V=R.getElementsByTagName(Q);for(var U=0,P=V.length;U<P;++U)if(W(V[U])){S[S.length]=V[U];if(T)T(V[U])}return S},batch:function(T,W,V,R){T=T&&(T.tagName||T.item)?T:B.Dom.get(T);if(!T||!W)return false;var S=R?V:window;if(T.tagName||T.length===undefined)return W.call(S,T,V);var U=[];for(var Q=0,P=T.length;Q<P;++Q)U[U.length]=W.call(S,T[Q],V);return U},getDocumentHeight:function(){var Q=M.compatMode!="CSS1Compat"?M.body.scrollHeight:M.documentElement.scrollHeight;var P=Math.max(Q,
B.Dom.getViewportHeight());return P},getDocumentWidth:function(){var Q=M.compatMode!="CSS1Compat"?M.body.scrollWidth:M.documentElement.scrollWidth;var P=Math.max(Q,B.Dom.getViewportWidth());return P},getViewportHeight:function(){var P=self.innerHeight;var Q=M.compatMode;if((Q||G)&&!C)P=Q=="CSS1Compat"?M.documentElement.clientHeight:M.body.clientHeight;return P},getViewportWidth:function(){var P=self.innerWidth;var Q=M.compatMode;if(Q||G)P=Q=="CSS1Compat"?M.documentElement.clientWidth:M.body.clientWidth;
return P},getAncestorBy:function(P,Q){while(P=P.parentNode)if(D(P,Q))return P;return null},getAncestorByClassName:function(Q,P){Q=B.Dom.get(Q);if(!Q)return null;var R=function(S){return B.Dom.hasClass(S,P)};return B.Dom.getAncestorBy(Q,R)},getAncestorByTagName:function(Q,P){Q=B.Dom.get(Q);if(!Q)return null;var R=function(S){return S.tagName&&S.tagName.toUpperCase()==P.toUpperCase()};return B.Dom.getAncestorBy(Q,R)},getPreviousSiblingBy:function(P,Q){while(P){P=P.previousSibling;if(D(P,Q))return P}return null},
getPreviousSibling:function(P){P=B.Dom.get(P);if(!P)return null;return B.Dom.getPreviousSiblingBy(P)},getNextSiblingBy:function(P,Q){while(P){P=P.nextSibling;if(D(P,Q))return P}return null},getNextSibling:function(P){P=B.Dom.get(P);if(!P)return null;return B.Dom.getNextSiblingBy(P)},getFirstChildBy:function(P,R){var Q=D(P.firstChild,R)?P.firstChild:null;return Q||B.Dom.getNextSiblingBy(P.firstChild,R)},getFirstChild:function(P,Q){P=B.Dom.get(P);if(!P)return null;return B.Dom.getFirstChildBy(P)},getLastChildBy:function(P,
R){if(!P)return null;var Q=D(P.lastChild,R)?P.lastChild:null;return Q||B.Dom.getPreviousSiblingBy(P.lastChild,R)},getLastChild:function(P){P=B.Dom.get(P);return B.Dom.getLastChildBy(P)},getChildrenBy:function(Q,S){var R=B.Dom.getFirstChildBy(Q,S);var P=R?[R]:[];B.Dom.getNextSiblingBy(R,function(T){if(!S||S(T))P[P.length]=T;return false});return P},getChildren:function(P){P=B.Dom.get(P);if(!P);return B.Dom.getChildrenBy(P)},getDocumentScrollLeft:function(P){P=P||M;return Math.max(P.documentElement.scrollLeft,
P.body.scrollLeft)},getDocumentScrollTop:function(P){P=P||M;return Math.max(P.documentElement.scrollTop,P.body.scrollTop)},insertBefore:function(Q,P){Q=B.Dom.get(Q);P=B.Dom.get(P);if(!Q||!P||!P.parentNode)return null;return P.parentNode.insertBefore(Q,P)},insertAfter:function(Q,P){Q=B.Dom.get(Q);P=B.Dom.get(P);if(!Q||!P||!P.parentNode)return null;if(P.nextSibling)return P.parentNode.insertBefore(Q,P.nextSibling);else return P.parentNode.appendChild(Q)},getClientRegion:function(){var R=B.Dom.getDocumentScrollTop(),
Q=B.Dom.getDocumentScrollLeft(),S=B.Dom.getViewportWidth()+Q,P=B.Dom.getViewportHeight()+R;return new B.Region(R,S,P,Q)}};var H=function(){if(M.documentElement.getBoundingClientRect)return function(Q){var R=Q.getBoundingClientRect();var P=Q.ownerDocument;return[R.left+B.Dom.getDocumentScrollLeft(P),R.top+B.Dom.getDocumentScrollTop(P)]};else return function(R){var S=[R.offsetLeft,R.offsetTop];var Q=R.offsetParent;var P=L&&B.Dom.getStyle(R,"position")=="absolute"&&R.offsetParent==R.ownerDocument.body;
if(Q!=R)while(Q){S[0]+=Q.offsetLeft;S[1]+=Q.offsetTop;if(!P&&L&&B.Dom.getStyle(Q,"position")=="absolute")P=true;Q=Q.offsetParent}if(P){S[0]-=R.ownerDocument.body.offsetLeft;S[1]-=R.ownerDocument.body.offsetTop}Q=R.parentNode;while(Q.tagName&&!E.ROOT_TAG.test(Q.tagName)){if(Q.scrollTop||Q.scrollLeft)if(!E.OP_SCROLL.test(B.Dom.getStyle(Q,"display")))if(!C||B.Dom.getStyle(Q,"overflow")!=="visible"){S[0]-=Q.scrollLeft;S[1]-=Q.scrollTop}Q=Q.parentNode}return S}}()})();YAHOO.util.Region=function(C,D,A,
B){this.top=C;this[1]=C;this.right=D;this.bottom=A;this.left=B;this[0]=B};YAHOO.util.Region.prototype.contains=function(A){return A.left>=this.left&&A.right<=this.right&&A.top>=this.top&&A.bottom<=this.bottom};YAHOO.util.Region.prototype.getArea=function(){return(this.bottom-this.top)*(this.right-this.left)};YAHOO.util.Region.prototype.intersect=function(E){var C=Math.max(this.top,E.top);var D=Math.min(this.right,E.right);var A=Math.min(this.bottom,E.bottom);var B=Math.max(this.left,E.left);if(A>=
C&&D>=B)return new YAHOO.util.Region(C,D,A,B);else return null};YAHOO.util.Region.prototype.union=function(E){var C=Math.min(this.top,E.top);var D=Math.max(this.right,E.right);var A=Math.max(this.bottom,E.bottom);var B=Math.min(this.left,E.left);return new YAHOO.util.Region(C,D,A,B)};YAHOO.util.Region.prototype.toString=function(){return"Region {"+"top: "+this.top+", right: "+this.right+", bottom: "+this.bottom+", left: "+this.left+"}"};YAHOO.util.Region.getRegion=function(D){var F=YAHOO.util.Dom.getXY(D);
var C=F[1];var E=F[0]+D.offsetWidth;var A=F[1]+D.offsetHeight;var B=F[0];return new YAHOO.util.Region(C,E,A,B)};YAHOO.util.Point=function(A,B){if(YAHOO.lang.isArray(A)){B=A[1];A=A[0]}this.x=this.right=this.left=this[0]=A;this.y=this.top=this.bottom=this[1]=B};YAHOO.util.Point.prototype=new YAHOO.util.Region;YAHOO.register("dom",YAHOO.util.Dom,{version:"2.5.1",build:"984"});YAHOO.util.CustomEvent=function(D,B,C,A){this.type=D;this.scope=B||window;this.silent=C;this.signature=A||YAHOO.util.CustomEvent.LIST;
this.subscribers=[];if(!this.silent);var E="_YUICEOnSubscribe";if(D!==E)this.subscribeEvent=new YAHOO.util.CustomEvent(E,this,true);this.lastError=null};YAHOO.util.CustomEvent.LIST=0;YAHOO.util.CustomEvent.FLAT=1;YAHOO.util.CustomEvent.prototype={subscribe:function(B,C,A){if(!B)throw new Error("Invalid callback for subscriber to '"+this.type+"'");if(this.subscribeEvent)this.subscribeEvent.fire(B,C,A);this.subscribers.push(new YAHOO.util.Subscriber(B,C,A))},unsubscribe:function(D,F){if(!D)return this.unsubscribeAll();
var E=false;for(var B=0,A=this.subscribers.length;B<A;++B){var C=this.subscribers[B];if(C&&C.contains(D,F)){this._delete(B);E=true}}return E},fire:function(){var D=this.subscribers.length;if(!D&&this.silent)return true;var H=[].slice.call(arguments,0),F=true,C,I=false;if(!this.silent);var B=this.subscribers.slice();for(C=0;C<D;++C){var K=B[C];if(!K)I=true;else{if(!this.silent);var J=K.getScope(this.scope);if(this.signature==YAHOO.util.CustomEvent.FLAT){var A=null;if(H.length>0)A=H[0];try{F=K.fn.call(J,
A,K.obj)}catch(E){this.lastError=E}}else try{F=K.fn.call(J,this.type,H,K.obj)}catch(G){this.lastError=G}if(false===F){if(!this.silent);return false}}}return true},unsubscribeAll:function(){for(var A=this.subscribers.length-1;A>-1;A--)this._delete(A);this.subscribers=[];return A},_delete:function(A){var B=this.subscribers[A];if(B){delete B.fn;delete B.obj}this.subscribers.splice(A,1)},toString:function(){return"CustomEvent: "+"'"+this.type+"', "+"scope: "+this.scope}};YAHOO.util.Subscriber=function(B,
C,A){this.fn=B;this.obj=YAHOO.lang.isUndefined(C)?null:C;this.override=A};YAHOO.util.Subscriber.prototype.getScope=function(A){if(this.override)if(this.override===true)return this.obj;else return this.override;return A};YAHOO.util.Subscriber.prototype.contains=function(A,B){if(B)return this.fn==A&&this.obj==B;else return this.fn==A};YAHOO.util.Subscriber.prototype.toString=function(){return"Subscriber { obj: "+this.obj+", override: "+(this.override||"no")+" }"};if(!YAHOO.util.Event){YAHOO.util.Event=
function(){var H=false;var I=[];var J=[];var G=[];var E=[];var C=0;var F=[];var B=[];var A=0;var D={63232:38,63233:40,63234:37,63235:39,63276:33,63277:34,25:9};return{POLL_RETRYS:2E3,POLL_INTERVAL:20,EL:0,TYPE:1,FN:2,WFN:3,UNLOAD_OBJ:3,ADJ_SCOPE:4,OBJ:5,OVERRIDE:6,lastError:null,isSafari:YAHOO.env.ua.webkit,webkit:YAHOO.env.ua.webkit,isIE:YAHOO.env.ua.ie,_interval:null,_dri:null,DOMReady:false,startInterval:function(){if(!this._interval){var K=this;var L=function(){K._tryPreloadAttach()};this._interval=
setInterval(L,this.POLL_INTERVAL)}},onAvailable:function(P,M,Q,O,N){var K=YAHOO.lang.isString(P)?[P]:P;for(var L=0;L<K.length;L=L+1)F.push({id:K[L],fn:M,obj:Q,override:O,checkReady:N});C=this.POLL_RETRYS;this.startInterval()},onContentReady:function(M,K,N,L){this.onAvailable(M,K,N,L,true)},onDOMReady:function(K,M,L){if(this.DOMReady)setTimeout(function(){var N=window;if(L)if(L===true)N=M;else N=L;K.call(N,"DOMReady",[],M)},0);else this.DOMReadyEvent.subscribe(K,M,L)},addListener:function(M,K,V,Q,
L){if(!V||!V.call)return false;if(this._isValidCollection(M)){var W=true;for(var R=0,T=M.length;R<T;++R)W=this.on(M[R],K,V,Q,L)&&W;return W}else if(YAHOO.lang.isString(M)){var P=this.getEl(M);if(P)M=P;else{this.onAvailable(M,function(){YAHOO.util.Event.on(M,K,V,Q,L)});return true}}if(!M)return false;if("unload"==K&&Q!==this){J[J.length]=[M,K,V,Q,L];return true}var Y=M;if(L)if(L===true)Y=Q;else Y=L;var N=function(Z){return V.call(Y,YAHOO.util.Event.getEvent(Z,M),Q)};var X=[M,K,V,N,Y,Q,L];var S=I.length;
I[S]=X;if(this.useLegacyEvent(M,K)){var O=this.getLegacyIndex(M,K);if(O==-1||M!=G[O][0]){O=G.length;B[M.id+K]=O;G[O]=[M,K,M["on"+K]];E[O]=[];M["on"+K]=function(Z){YAHOO.util.Event.fireLegacyEvent(YAHOO.util.Event.getEvent(Z),O)}}E[O].push(X)}else try{this._simpleAdd(M,K,N,false)}catch(U){this.lastError=U;this.removeListener(M,K,V);return false}return true},fireLegacyEvent:function(O,M){var Q=true,K,S,R,T,P;S=E[M].slice();for(var L=0,N=S.length;L<N;++L){R=S[L];if(R&&R[this.WFN]){T=R[this.ADJ_SCOPE];
P=R[this.WFN].call(T,O);Q=Q&&P}}K=G[M];if(K&&K[2])K[2](O);return Q},getLegacyIndex:function(L,M){var K=this.generateId(L)+M;if(typeof B[K]=="undefined")return-1;else return B[K]},useLegacyEvent:function(L,M){if(this.webkit&&("click"==M||"dblclick"==M)){var K=parseInt(this.webkit,10);if(!isNaN(K)&&K<418)return true}return false},removeListener:function(L,K,T){var O,R,V;if(typeof L=="string")L=this.getEl(L);else if(this._isValidCollection(L)){var U=true;for(O=L.length-1;O>-1;O--)U=this.removeListener(L[O],
K,T)&&U;return U}if(!T||!T.call)return this.purgeElement(L,false,K);if("unload"==K){for(O=J.length-1;O>-1;O--){V=J[O];if(V&&V[0]==L&&V[1]==K&&V[2]==T){J.splice(O,1);return true}}return false}var P=null;var Q=arguments[3];if("undefined"===typeof Q)Q=this._getCacheIndex(L,K,T);if(Q>=0)P=I[Q];if(!L||!P)return false;if(this.useLegacyEvent(L,K)){var N=this.getLegacyIndex(L,K);var M=E[N];if(M)for(O=0,R=M.length;O<R;++O){V=M[O];if(V&&V[this.EL]==L&&V[this.TYPE]==K&&V[this.FN]==T){M.splice(O,1);break}}}else try{this._simpleRemove(L,
K,P[this.WFN],false)}catch(S){this.lastError=S;return false}delete I[Q][this.WFN];delete I[Q][this.FN];I.splice(Q,1);return true},getTarget:function(M,L){var K=M.target||M.srcElement;return this.resolveTextNode(K)},resolveTextNode:function(L){try{if(L&&3==L.nodeType)return L.parentNode}catch(K){}return L},getPageX:function(L){var K=L.pageX;if(!K&&0!==K){K=L.clientX||0;if(this.isIE)K+=this._getScrollLeft()}return K},getPageY:function(K){var L=K.pageY;if(!L&&0!==L){L=K.clientY||0;if(this.isIE)L+=this._getScrollTop()}return L},
getXY:function(K){return[this.getPageX(K),this.getPageY(K)]},getRelatedTarget:function(L){var K=L.relatedTarget;if(!K)if(L.type=="mouseout")K=L.toElement;else if(L.type=="mouseover")K=L.fromElement;return this.resolveTextNode(K)},getTime:function(M){if(!M.time){var L=(new Date).getTime();try{M.time=L}catch(K){this.lastError=K;return L}}return M.time},stopEvent:function(K){this.stopPropagation(K);this.preventDefault(K)},stopPropagation:function(K){if(K.stopPropagation)K.stopPropagation();else K.cancelBubble=
true},preventDefault:function(K){if(K.preventDefault)K.preventDefault();else K.returnValue=false},getEvent:function(M,K){var L=M||window.event;if(!L){var N=this.getEvent.caller;while(N){L=N.arguments[0];if(L&&Event==L.constructor)break;N=N.caller}}return L},getCharCode:function(L){var K=L.keyCode||L.charCode||0;if(YAHOO.env.ua.webkit&&K in D)K=D[K];return K},_getCacheIndex:function(O,P,N){for(var M=0,L=I.length;M<L;M=M+1){var K=I[M];if(K&&K[this.FN]==N&&K[this.EL]==O&&K[this.TYPE]==P)return M}return-1},
generateId:function(K){var L=K.id;if(!L){L="yuievtautoid-"+A;++A;K.id=L}return L},_isValidCollection:function(L){try{return L&&typeof L!=="string"&&L.length&&!L.tagName&&!L.alert&&typeof L[0]!=="undefined"}catch(K){return false}},elCache:{},getEl:function(K){return typeof K==="string"?document.getElementById(K):K},clearCache:function(){},DOMReadyEvent:new YAHOO.util.CustomEvent("DOMReady",this),_load:function(L){if(!H){H=true;var K=YAHOO.util.Event;K._ready();K._tryPreloadAttach()}},_ready:function(L){var K=
YAHOO.util.Event;if(!K.DOMReady){K.DOMReady=true;K.DOMReadyEvent.fire();K._simpleRemove(document,"DOMContentLoaded",K._ready)}},_tryPreloadAttach:function(){if(F.length===0){C=0;clearInterval(this._interval);this._interval=null;return}if(this.locked)return;if(this.isIE)if(!this.DOMReady){this.startInterval();return}this.locked=true;var Q=!H;if(!Q)Q=C>0&&F.length>0;var P=[];var R=function(T,U){var S=T;if(U.override)if(U.override===true)S=U.obj;else S=U.override;U.fn.call(S,U.obj)};var L,K,O,N,M=[];
for(L=0,K=F.length;L<K;L=L+1){O=F[L];if(O){N=this.getEl(O.id);if(N)if(O.checkReady){if(H||N.nextSibling||!Q){M.push(O);F[L]=null}}else{R(N,O);F[L]=null}else P.push(O)}}for(L=0,K=M.length;L<K;L=L+1){O=M[L];R(this.getEl(O.id),O)}C--;if(Q){for(L=F.length-1;L>-1;L--){O=F[L];if(!O||!O.id)F.splice(L,1)}this.startInterval()}else{clearInterval(this._interval);this._interval=null}this.locked=false},purgeElement:function(O,P,R){var M=YAHOO.lang.isString(O)?this.getEl(O):O;var Q=this.getListeners(M,R),N,K;if(Q)for(N=
Q.length-1;N>-1;N--){var L=Q[N];this.removeListener(M,L.type,L.fn)}if(P&&M&&M.childNodes)for(N=0,K=M.childNodes.length;N<K;++N)this.purgeElement(M.childNodes[N],P,R)},getListeners:function(M,K){var P=[],L;if(!K)L=[I,J];else if(K==="unload")L=[J];else L=[I];var R=YAHOO.lang.isString(M)?this.getEl(M):M;for(var O=0;O<L.length;O=O+1){var T=L[O];if(T)for(var Q=0,S=T.length;Q<S;++Q){var N=T[Q];if(N&&N[this.EL]===R&&(!K||K===N[this.TYPE]))P.push({type:N[this.TYPE],fn:N[this.FN],obj:N[this.OBJ],adjust:N[this.OVERRIDE],
scope:N[this.ADJ_SCOPE],index:Q})}}return P.length?P:null},_unload:function(Q){var K=YAHOO.util.Event,N,M,L,P,O,R=J.slice();for(N=0,P=J.length;N<P;++N){L=R[N];if(L){var S=window;if(L[K.ADJ_SCOPE])if(L[K.ADJ_SCOPE]===true)S=L[K.UNLOAD_OBJ];else S=L[K.ADJ_SCOPE];L[K.FN].call(S,K.getEvent(Q,L[K.EL]),L[K.UNLOAD_OBJ]);R[N]=null;L=null;S=null}}J=null;if(I){for(M=I.length-1;M>-1;M--){L=I[M];if(L)K.removeListener(L[K.EL],L[K.TYPE],L[K.FN],M)}L=null}G=null;K._simpleRemove(window,"unload",K._unload)},_getScrollLeft:function(){return this._getScroll()[1]},
_getScrollTop:function(){return this._getScroll()[0]},_getScroll:function(){var K=document.documentElement,L=document.body;if(K&&(K.scrollTop||K.scrollLeft))return[K.scrollTop,K.scrollLeft];else if(L)return[L.scrollTop,L.scrollLeft];else return[0,0]},regCE:function(){},_simpleAdd:function(){if(window.addEventListener)return function(M,N,L,K){M.addEventListener(N,L,K)};else if(window.attachEvent)return function(M,N,L,K){M.attachEvent("on"+N,L)};else return function(){}}(),_simpleRemove:function(){if(window.removeEventListener)return function(M,
N,L,K){M.removeEventListener(N,L,K)};else if(window.detachEvent)return function(L,M,K){L.detachEvent("on"+M,K)};else return function(){}}()}}();(function(){var EU=YAHOO.util.Event;EU.on=EU.addListener;if(EU.isIE){YAHOO.util.Event.onDOMReady(YAHOO.util.Event._tryPreloadAttach,YAHOO.util.Event,true);var n=document.createElement("p");EU._dri=setInterval(function(){try{n.doScroll("left");clearInterval(EU._dri);EU._dri=null;EU._ready();n=null}catch(ex){}},EU.POLL_INTERVAL)}else if(EU.webkit&&EU.webkit<
525)EU._dri=setInterval(function(){var rs=document.readyState;if("loaded"==rs||"complete"==rs){clearInterval(EU._dri);EU._dri=null;EU._ready()}},EU.POLL_INTERVAL);else EU._simpleAdd(document,"DOMContentLoaded",EU._ready);EU._simpleAdd(window,"load",EU._load);EU._simpleAdd(window,"unload",EU._unload);EU._tryPreloadAttach()})()}YAHOO.util.EventProvider=function(){};YAHOO.util.EventProvider.prototype={__yui_events:null,__yui_subscribers:null,subscribe:function(A,C,F,E){this.__yui_events=this.__yui_events||
{};var D=this.__yui_events[A];if(D)D.subscribe(C,F,E);else{this.__yui_subscribers=this.__yui_subscribers||{};var B=this.__yui_subscribers;if(!B[A])B[A]=[];B[A].push({fn:C,obj:F,override:E})}},unsubscribe:function(C,E,G){this.__yui_events=this.__yui_events||{};var A=this.__yui_events;if(C){var F=A[C];if(F)return F.unsubscribe(E,G)}else{var B=true;for(var D in A)if(YAHOO.lang.hasOwnProperty(A,D))B=B&&A[D].unsubscribe(E,G);return B}return false},unsubscribeAll:function(A){return this.unsubscribe(A)},
createEvent:function(G,D){this.__yui_events=this.__yui_events||{};var A=D||{};var I=this.__yui_events;if(I[G]);else{var H=A.scope||this;var E=A.silent;var B=new YAHOO.util.CustomEvent(G,H,E,YAHOO.util.CustomEvent.FLAT);I[G]=B;if(A.onSubscribeCallback)B.subscribeEvent.subscribe(A.onSubscribeCallback);this.__yui_subscribers=this.__yui_subscribers||{};var F=this.__yui_subscribers[G];if(F)for(var C=0;C<F.length;++C)B.subscribe(F[C].fn,F[C].obj,F[C].override)}return I[G]},fireEvent:function(E,D,A,C){this.__yui_events=
this.__yui_events||{};var G=this.__yui_events[E];if(!G)return null;var B=[];for(var F=1;F<arguments.length;++F)B.push(arguments[F]);return G.fire.apply(G,B)},hasEvent:function(A){if(this.__yui_events)if(this.__yui_events[A])return true;return false}};YAHOO.util.KeyListener=function(A,F,B,C){if(!A);else if(!F);else if(!B);if(!C)C=YAHOO.util.KeyListener.KEYDOWN;var D=new YAHOO.util.CustomEvent("keyPressed");this.enabledEvent=new YAHOO.util.CustomEvent("enabled");this.disabledEvent=new YAHOO.util.CustomEvent("disabled");
if(typeof A=="string")A=document.getElementById(A);if(typeof B=="function")D.subscribe(B);else D.subscribe(B.fn,B.scope,B.correctScope);function E(J,I){if(!F.shift)F.shift=false;if(!F.alt)F.alt=false;if(!F.ctrl)F.ctrl=false;if(J.shiftKey==F.shift&&J.altKey==F.alt&&J.ctrlKey==F.ctrl){var G;if(F.keys instanceof Array)for(var H=0;H<F.keys.length;H++){G=F.keys[H];if(G==J.charCode){D.fire(J.charCode,J);break}else if(G==J.keyCode){D.fire(J.keyCode,J);break}}else{G=F.keys;if(G==J.charCode)D.fire(J.charCode,
J);else if(G==J.keyCode)D.fire(J.keyCode,J)}}}this.enable=function(){if(!this.enabled){YAHOO.util.Event.addListener(A,C,E);this.enabledEvent.fire(F)}this.enabled=true};this.disable=function(){if(this.enabled){YAHOO.util.Event.removeListener(A,C,E);this.disabledEvent.fire(F)}this.enabled=false};this.toString=function(){return"KeyListener ["+F.keys+"] "+A.tagName+(A.id?"["+A.id+"]":"")}};YAHOO.util.KeyListener.KEYDOWN="keydown";YAHOO.util.KeyListener.KEYUP="keyup";YAHOO.util.KeyListener.KEY={ALT:18,
BACK_SPACE:8,CAPS_LOCK:20,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,META:224,NUM_LOCK:144,PAGE_DOWN:34,PAGE_UP:33,PAUSE:19,PRINTSCREEN:44,RIGHT:39,SCROLL_LOCK:145,SHIFT:16,SPACE:32,TAB:9,UP:38};YAHOO.register("event",YAHOO.util.Event,{version:"2.5.1",build:"984"});YAHOO.register("yahoo-dom-event",YAHOO,{version:"2.5.1",build:"984"});if(!YAHOO.util.DragDropMgr){YAHOO.util.DragDropMgr=function(){var A=YAHOO.util.Event;return{ids:{},handleIds:{},dragCurrent:null,dragOvers:{},
deltaX:0,deltaY:0,preventDefault:true,stopPropagation:true,initialized:false,locked:false,interactionInfo:null,init:function(){this.initialized=true},POINT:0,INTERSECT:1,STRICT_INTERSECT:2,mode:0,_execOnAll:function(D,C){for(var E in this.ids)for(var B in this.ids[E]){var F=this.ids[E][B];if(!this.isTypeOfDD(F))continue;F[D].apply(F,C)}},_onLoad:function(){this.init();A.on(document,"mouseup",this.handleMouseUp,this,true);A.on(document,"mousemove",this.handleMouseMove,this,true);A.on(window,"unload",
this._onUnload,this,true);A.on(window,"resize",this._onResize,this,true)},_onResize:function(B){this._execOnAll("resetConstraints",[])},lock:function(){this.locked=true},unlock:function(){this.locked=false},isLocked:function(){return this.locked},locationCache:{},useCache:true,clickPixelThresh:3,clickTimeThresh:1E3,dragThreshMet:false,clickTimeout:null,startX:0,startY:0,fromTimeout:false,regDragDrop:function(C,B){if(!this.initialized)this.init();if(!this.ids[B])this.ids[B]={};this.ids[B][C.id]=C},
removeDDFromGroup:function(D,B){if(!this.ids[B])this.ids[B]={};var C=this.ids[B];if(C&&C[D.id])delete C[D.id]},_remove:function(C){for(var B in C.groups)if(B&&this.ids[B][C.id])delete this.ids[B][C.id];delete this.handleIds[C.id]},regHandle:function(C,B){if(!this.handleIds[C])this.handleIds[C]={};this.handleIds[C][B]=B},isDragDrop:function(B){return this.getDDById(B)?true:false},getRelated:function(G,C){var F=[];for(var E in G.groups)for(var D in this.ids[E]){var B=this.ids[E][D];if(!this.isTypeOfDD(B))continue;
if(!C||B.isTarget)F[F.length]=B}return F},isLegalTarget:function(F,E){var C=this.getRelated(F,true);for(var D=0,B=C.length;D<B;++D)if(C[D].id==E.id)return true;return false},isTypeOfDD:function(B){return B&&B.__ygDragDrop},isHandle:function(C,B){return this.handleIds[C]&&this.handleIds[C][B]},getDDById:function(C){for(var B in this.ids)if(this.ids[B][C])return this.ids[B][C];return null},handleMouseDown:function(D,C){this.currentTarget=YAHOO.util.Event.getTarget(D);this.dragCurrent=C;var B=C.getEl();
this.startX=YAHOO.util.Event.getPageX(D);this.startY=YAHOO.util.Event.getPageY(D);this.deltaX=this.startX-B.offsetLeft;this.deltaY=this.startY-B.offsetTop;this.dragThreshMet=false;this.clickTimeout=setTimeout(function(){var E=YAHOO.util.DDM;E.startDrag(E.startX,E.startY);E.fromTimeout=true},this.clickTimeThresh)},startDrag:function(B,D){clearTimeout(this.clickTimeout);var C=this.dragCurrent;if(C&&C.events.b4StartDrag){C.b4StartDrag(B,D);C.fireEvent("b4StartDragEvent",{x:B,y:D})}if(C&&C.events.startDrag){C.startDrag(B,
D);C.fireEvent("startDragEvent",{x:B,y:D})}this.dragThreshMet=true},handleMouseUp:function(B){if(this.dragCurrent){clearTimeout(this.clickTimeout);if(this.dragThreshMet){if(this.fromTimeout)this.handleMouseMove(B);this.fromTimeout=false;this.fireEvents(B,true)}else;this.stopDrag(B);this.stopEvent(B)}},stopEvent:function(B){if(this.stopPropagation)YAHOO.util.Event.stopPropagation(B);if(this.preventDefault)YAHOO.util.Event.preventDefault(B)},stopDrag:function(D,C){var B=this.dragCurrent;if(B&&!C){if(this.dragThreshMet){if(B.events.b4EndDrag){B.b4EndDrag(D);
B.fireEvent("b4EndDragEvent",{e:D})}if(B.events.endDrag){B.endDrag(D);B.fireEvent("endDragEvent",{e:D})}}if(B.events.mouseUp){B.onMouseUp(D);B.fireEvent("mouseUpEvent",{e:D})}}this.dragCurrent=null;this.dragOvers={}},handleMouseMove:function(E){var B=this.dragCurrent;if(B){if(YAHOO.util.Event.isIE&&!E.button){this.stopEvent(E);return this.handleMouseUp(E)}else if(E.clientX<0||E.clientY<0);if(!this.dragThreshMet){var D=Math.abs(this.startX-YAHOO.util.Event.getPageX(E));var C=Math.abs(this.startY-YAHOO.util.Event.getPageY(E));
if(D>this.clickPixelThresh||C>this.clickPixelThresh)this.startDrag(this.startX,this.startY)}if(this.dragThreshMet){if(B&&B.events.b4Drag){B.b4Drag(E);B.fireEvent("b4DragEvent",{e:E})}if(B&&B.events.drag){B.onDrag(E);B.fireEvent("dragEvent",{e:E})}if(B)this.fireEvents(E,false)}this.stopEvent(E)}},fireEvents:function(U,K){var Z=this.dragCurrent;if(!Z||Z.isLocked()||Z.dragOnly)return;var M=YAHOO.util.Event.getPageX(U),L=YAHOO.util.Event.getPageY(U),O=new YAHOO.util.Point(M,L),J=Z.getTargetCoord(O.x,
O.y),E=Z.getDragEl(),D=["out","over","drop","enter"],T=new YAHOO.util.Region(J.y,J.x+E.offsetWidth,J.y+E.offsetHeight,J.x),H=[],C={},P=[],a={outEvts:[],overEvts:[],dropEvts:[],enterEvts:[]};for(var R in this.dragOvers){var c=this.dragOvers[R];if(!this.isTypeOfDD(c))continue;if(!this.isOverTarget(O,c,this.mode,T))a.outEvts.push(c);H[R]=true;delete this.dragOvers[R]}for(var Q in Z.groups){if("string"!=typeof Q)continue;for(R in this.ids[Q]){var F=this.ids[Q][R];if(!this.isTypeOfDD(F))continue;if(F.isTarget&&
!F.isLocked()&&F!=Z)if(this.isOverTarget(O,F,this.mode,T)){C[Q]=true;if(K)a.dropEvts.push(F);else{if(!H[F.id])a.enterEvts.push(F);else a.overEvts.push(F);this.dragOvers[F.id]=F}}}}this.interactionInfo={out:a.outEvts,enter:a.enterEvts,over:a.overEvts,drop:a.dropEvts,point:O,draggedRegion:T,sourceRegion:this.locationCache[Z.id],validDrop:K};for(var B in C)P.push(B);if(K&&!a.dropEvts.length){this.interactionInfo.validDrop=false;if(Z.events.invalidDrop){Z.onInvalidDrop(U);Z.fireEvent("invalidDropEvent",
{e:U})}}for(R=0;R<D.length;R++){var X=null;if(a[D[R]+"Evts"])X=a[D[R]+"Evts"];if(X&&X.length){var G=D[R].charAt(0).toUpperCase()+D[R].substr(1),W="onDrag"+G,I="b4Drag"+G,N="drag"+G+"Event",V="drag"+G;if(this.mode){if(Z.events[I]){Z[I](U,X,P);Z.fireEvent(I+"Event",{event:U,info:X,group:P})}if(Z.events[V]){Z[W](U,X,P);Z.fireEvent(N,{event:U,info:X,group:P})}}else for(var Y=0,S=X.length;Y<S;++Y){if(Z.events[I]){Z[I](U,X[Y].id,P[0]);Z.fireEvent(I+"Event",{event:U,info:X[Y].id,group:P[0]})}if(Z.events[V]){Z[W](U,
X[Y].id,P[0]);Z.fireEvent(N,{event:U,info:X[Y].id,group:P[0]})}}}}},getBestMatch:function(D){var F=null;var C=D.length;if(C==1)F=D[0];else for(var E=0;E<C;++E){var B=D[E];if(this.mode==this.INTERSECT&&B.cursorIsOver){F=B;break}else if(!F||!F.overlap||B.overlap&&F.overlap.getArea()<B.overlap.getArea())F=B}return F},refreshCache:function(C){var E=C||this.ids;for(var B in E){if("string"!=typeof B)continue;for(var D in this.ids[B]){var F=this.ids[B][D];if(this.isTypeOfDD(F)){var G=this.getLocation(F);
if(G)this.locationCache[F.id]=G;else delete this.locationCache[F.id]}}}},verifyEl:function(C){try{if(C){var B=C.offsetParent;if(B)return true}}catch(D){}return false},getLocation:function(G){if(!this.isTypeOfDD(G))return null;var E=G.getEl(),J,D,C,L,K,M,B,I,F;try{J=YAHOO.util.Dom.getXY(E)}catch(H){}if(!J)return null;D=J[0];C=D+E.offsetWidth;L=J[1];K=L+E.offsetHeight;M=L-G.padding[0];B=C+G.padding[1];I=K+G.padding[2];F=D-G.padding[3];return new YAHOO.util.Region(M,B,I,F)},isOverTarget:function(J,B,
D,E){var F=this.locationCache[B.id];if(!F||!this.useCache){F=this.getLocation(B);this.locationCache[B.id]=F}if(!F)return false;B.cursorIsOver=F.contains(J);var I=this.dragCurrent;if(!I||!D&&!I.constrainX&&!I.constrainY)return B.cursorIsOver;B.overlap=null;if(!E){var G=I.getTargetCoord(J.x,J.y);var C=I.getDragEl();E=new YAHOO.util.Region(G.y,G.x+C.offsetWidth,G.y+C.offsetHeight,G.x)}var H=E.intersect(F);if(H){B.overlap=H;return D?true:B.cursorIsOver}else return false},_onUnload:function(C,B){this.unregAll()},
unregAll:function(){if(this.dragCurrent){this.stopDrag();this.dragCurrent=null}this._execOnAll("unreg",[]);this.ids={}},elementCache:{},getElWrapper:function(C){var B=this.elementCache[C];if(!B||!B.el)B=this.elementCache[C]=new this.ElementWrapper(YAHOO.util.Dom.get(C));return B},getElement:function(B){return YAHOO.util.Dom.get(B)},getCss:function(C){var B=YAHOO.util.Dom.get(C);return B?B.style:null},ElementWrapper:function(B){this.el=B||null;this.id=this.el&&B.id;this.css=this.el&&B.style},getPosX:function(B){return YAHOO.util.Dom.getX(B)},
getPosY:function(B){return YAHOO.util.Dom.getY(B)},swapNode:function(D,B){if(D.swapNode)D.swapNode(B);else{var E=B.parentNode;var C=B.nextSibling;if(C==D)E.insertBefore(D,B);else if(B==D.nextSibling)E.insertBefore(B,D);else{D.parentNode.replaceChild(B,D);E.insertBefore(D,C)}}},getScroll:function(){var D,B,E=document.documentElement,C=document.body;if(E&&(E.scrollTop||E.scrollLeft)){D=E.scrollTop;B=E.scrollLeft}else if(C){D=C.scrollTop;B=C.scrollLeft}else;return{top:D,left:B}},getStyle:function(C,
B){return YAHOO.util.Dom.getStyle(C,B)},getScrollTop:function(){return this.getScroll().top},getScrollLeft:function(){return this.getScroll().left},moveToEl:function(B,D){var C=YAHOO.util.Dom.getXY(D);YAHOO.util.Dom.setXY(B,C)},getClientHeight:function(){return YAHOO.util.Dom.getViewportHeight()},getClientWidth:function(){return YAHOO.util.Dom.getViewportWidth()},numericSort:function(C,B){return C-B},_timeoutCount:0,_addListeners:function(){var B=YAHOO.util.DDM;if(YAHOO.util.Event&&document)B._onLoad();
else if(B._timeoutCount>2E3);else{setTimeout(B._addListeners,10);if(document&&document.body)B._timeoutCount+=1}},handleWasClicked:function(B,D){if(this.isHandle(D,B.id))return true;else{var C=B.parentNode;while(C)if(this.isHandle(D,C.id))return true;else C=C.parentNode}return false}}}();YAHOO.util.DDM=YAHOO.util.DragDropMgr;YAHOO.util.DDM._addListeners()}(function(){var A=YAHOO.util.Event;var B=YAHOO.util.Dom;YAHOO.util.DragDrop=function(E,C,D){if(E)this.init(E,C,D)};YAHOO.util.DragDrop.prototype=
{events:null,on:function(){this.subscribe.apply(this,arguments)},id:null,config:null,dragElId:null,handleElId:null,invalidHandleTypes:null,invalidHandleIds:null,invalidHandleClasses:null,startPageX:0,startPageY:0,groups:null,locked:false,lock:function(){this.locked=true},unlock:function(){this.locked=false},isTarget:true,padding:null,dragOnly:false,_domRef:null,__ygDragDrop:true,constrainX:false,constrainY:false,minX:0,maxX:0,minY:0,maxY:0,deltaX:0,deltaY:0,maintainOffset:false,xTicks:null,yTicks:null,
primaryButtonOnly:true,available:false,hasOuterHandles:false,cursorIsOver:false,overlap:null,b4StartDrag:function(C,D){},startDrag:function(C,D){},b4Drag:function(C){},onDrag:function(C){},onDragEnter:function(C,D){},b4DragOver:function(C){},onDragOver:function(C,D){},b4DragOut:function(C){},onDragOut:function(C,D){},b4DragDrop:function(C){},onDragDrop:function(C,D){},onInvalidDrop:function(C){},b4EndDrag:function(C){},endDrag:function(C){},b4MouseDown:function(C){},onMouseDown:function(C){},onMouseUp:function(C){},
onAvailable:function(){},getEl:function(){if(!this._domRef)this._domRef=B.get(this.id);return this._domRef},getDragEl:function(){return B.get(this.dragElId)},init:function(F,C,D){this.initTarget(F,C,D);A.on(this._domRef||this.id,"mousedown",this.handleMouseDown,this,true);for(var E in this.events)this.createEvent(E+"Event")},initTarget:function(E,C,D){this.config=D||{};this.events={};this.DDM=YAHOO.util.DDM;this.groups={};if(typeof E!=="string"){this._domRef=E;E=B.generateId(E)}this.id=E;this.addToGroup(C?
C:"default");this.handleElId=E;A.onAvailable(E,this.handleOnAvailable,this,true);this.setDragElId(E);this.invalidHandleTypes={A:"A"};this.invalidHandleIds={};this.invalidHandleClasses=[];this.applyConfig()},applyConfig:function(){this.events={mouseDown:true,b4MouseDown:true,mouseUp:true,b4StartDrag:true,startDrag:true,b4EndDrag:true,endDrag:true,drag:true,b4Drag:true,invalidDrop:true,b4DragOut:true,dragOut:true,dragEnter:true,b4DragOver:true,dragOver:true,b4DragDrop:true,dragDrop:true};if(this.config.events)for(var C in this.config.events)if(this.config.events[C]===
false)this.events[C]=false;this.padding=this.config.padding||[0,0,0,0];this.isTarget=this.config.isTarget!==false;this.maintainOffset=this.config.maintainOffset;this.primaryButtonOnly=this.config.primaryButtonOnly!==false;this.dragOnly=this.config.dragOnly===true?true:false},handleOnAvailable:function(){this.available=true;this.resetConstraints();this.onAvailable()},setPadding:function(E,C,F,D){if(!C&&0!==C)this.padding=[E,E,E,E];else if(!F&&0!==F)this.padding=[E,C,E,C];else this.padding=[E,C,F,D]},
setInitPosition:function(F,E){var G=this.getEl();if(!this.DDM.verifyEl(G)){if(G&&G.style&&G.style.display=="none");else;return}var D=F||0;var C=E||0;var H=B.getXY(G);this.initPageX=H[0]-D;this.initPageY=H[1]-C;this.lastPageX=H[0];this.lastPageY=H[1];this.setStartPosition(H)},setStartPosition:function(D){var C=D||B.getXY(this.getEl());this.deltaSetXY=null;this.startPageX=C[0];this.startPageY=C[1]},addToGroup:function(C){this.groups[C]=true;this.DDM.regDragDrop(this,C)},removeFromGroup:function(C){if(this.groups[C])delete this.groups[C];
this.DDM.removeDDFromGroup(this,C)},setDragElId:function(C){this.dragElId=C},setHandleElId:function(C){if(typeof C!=="string")C=B.generateId(C);this.handleElId=C;this.DDM.regHandle(this.id,C)},setOuterHandleElId:function(C){if(typeof C!=="string")C=B.generateId(C);A.on(C,"mousedown",this.handleMouseDown,this,true);this.setHandleElId(C);this.hasOuterHandles=true},unreg:function(){A.removeListener(this.id,"mousedown",this.handleMouseDown);this._domRef=null;this.DDM._remove(this)},isLocked:function(){return this.DDM.isLocked()||
this.locked},handleMouseDown:function(H,G){var D=H.which||H.button;if(this.primaryButtonOnly&&D>1)return;if(this.isLocked())return;var C=this.b4MouseDown(H);if(this.events.b4MouseDown)C=this.fireEvent("b4MouseDownEvent",H);var E=this.onMouseDown(H);if(this.events.mouseDown)E=this.fireEvent("mouseDownEvent",H);if(C===false||E===false)return;this.DDM.refreshCache(this.groups);var F=new YAHOO.util.Point(A.getPageX(H),A.getPageY(H));if(!this.hasOuterHandles&&!this.DDM.isOverTarget(F,this));else if(this.clickValidator(H)){this.setStartPosition();
this.DDM.handleMouseDown(H,this);this.DDM.stopEvent(H)}else;},clickValidator:function(D){var C=YAHOO.util.Event.getTarget(D);return this.isValidHandleChild(C)&&(this.id==this.handleElId||this.DDM.handleWasClicked(C,this.id))},getTargetCoord:function(E,D){var C=E-this.deltaX;var F=D-this.deltaY;if(this.constrainX){if(C<this.minX)C=this.minX;if(C>this.maxX)C=this.maxX}if(this.constrainY){if(F<this.minY)F=this.minY;if(F>this.maxY)F=this.maxY}C=this.getTick(C,this.xTicks);F=this.getTick(F,this.yTicks);
return{x:C,y:F}},addInvalidHandleType:function(C){var D=C.toUpperCase();this.invalidHandleTypes[D]=D},addInvalidHandleId:function(C){if(typeof C!=="string")C=B.generateId(C);this.invalidHandleIds[C]=C},addInvalidHandleClass:function(C){this.invalidHandleClasses.push(C)},removeInvalidHandleType:function(C){var D=C.toUpperCase();delete this.invalidHandleTypes[D]},removeInvalidHandleId:function(C){if(typeof C!=="string")C=B.generateId(C);delete this.invalidHandleIds[C]},removeInvalidHandleClass:function(D){for(var E=
0,C=this.invalidHandleClasses.length;E<C;++E)if(this.invalidHandleClasses[E]==D)delete this.invalidHandleClasses[E]},isValidHandleChild:function(F){var E=true;var H;try{H=F.nodeName.toUpperCase()}catch(G){H=F.nodeName}E=E&&!this.invalidHandleTypes[H];E=E&&!this.invalidHandleIds[F.id];for(var D=0,C=this.invalidHandleClasses.length;E&&D<C;++D)E=!B.hasClass(F,this.invalidHandleClasses[D]);return E},setXTicks:function(F,C){this.xTicks=[];this.xTickSize=C;var E={};for(var D=this.initPageX;D>=this.minX;D=
D-C)if(!E[D]){this.xTicks[this.xTicks.length]=D;E[D]=true}for(D=this.initPageX;D<=this.maxX;D=D+C)if(!E[D]){this.xTicks[this.xTicks.length]=D;E[D]=true}this.xTicks.sort(this.DDM.numericSort)},setYTicks:function(F,C){this.yTicks=[];this.yTickSize=C;var E={};for(var D=this.initPageY;D>=this.minY;D=D-C)if(!E[D]){this.yTicks[this.yTicks.length]=D;E[D]=true}for(D=this.initPageY;D<=this.maxY;D=D+C)if(!E[D]){this.yTicks[this.yTicks.length]=D;E[D]=true}this.yTicks.sort(this.DDM.numericSort)},setXConstraint:function(E,
D,C){this.leftConstraint=parseInt(E,10);this.rightConstraint=parseInt(D,10);this.minX=this.initPageX-this.leftConstraint;this.maxX=this.initPageX+this.rightConstraint;if(C)this.setXTicks(this.initPageX,C);this.constrainX=true},clearConstraints:function(){this.constrainX=false;this.constrainY=false;this.clearTicks()},clearTicks:function(){this.xTicks=null;this.yTicks=null;this.xTickSize=0;this.yTickSize=0},setYConstraint:function(C,E,D){this.topConstraint=parseInt(C,10);this.bottomConstraint=parseInt(E,
10);this.minY=this.initPageY-this.topConstraint;this.maxY=this.initPageY+this.bottomConstraint;if(D)this.setYTicks(this.initPageY,D);this.constrainY=true},resetConstraints:function(){if(this.initPageX||this.initPageX===0){var D=this.maintainOffset?this.lastPageX-this.initPageX:0;var C=this.maintainOffset?this.lastPageY-this.initPageY:0;this.setInitPosition(D,C)}else this.setInitPosition();if(this.constrainX)this.setXConstraint(this.leftConstraint,this.rightConstraint,this.xTickSize);if(this.constrainY)this.setYConstraint(this.topConstraint,
this.bottomConstraint,this.yTickSize)},getTick:function(I,F){if(!F)return I;else if(F[0]>=I)return F[0];else{for(var D=0,C=F.length;D<C;++D){var E=D+1;if(F[E]&&F[E]>=I){var H=I-F[D];var G=F[E]-I;return G>H?F[D]:F[E]}}return F[F.length-1]}},toString:function(){return"DragDrop "+this.id}};YAHOO.augment(YAHOO.util.DragDrop,YAHOO.util.EventProvider)})();YAHOO.util.DD=function(C,A,B){if(C)this.init(C,A,B)};YAHOO.extend(YAHOO.util.DD,YAHOO.util.DragDrop,{scroll:true,autoOffset:function(C,B){var A=C-this.startPageX;
var D=B-this.startPageY;this.setDelta(A,D)},setDelta:function(B,A){this.deltaX=B;this.deltaY=A},setDragElPos:function(C,B){var A=this.getDragEl();this.alignElWithMouse(A,C,B)},alignElWithMouse:function(C,G,F){var E=this.getTargetCoord(G,F);if(!this.deltaSetXY){var H=[E.x,E.y];YAHOO.util.Dom.setXY(C,H);var D=parseInt(YAHOO.util.Dom.getStyle(C,"left"),10);var B=parseInt(YAHOO.util.Dom.getStyle(C,"top"),10);this.deltaSetXY=[D-E.x,B-E.y]}else{YAHOO.util.Dom.setStyle(C,"left",E.x+this.deltaSetXY[0]+"px");
YAHOO.util.Dom.setStyle(C,"top",E.y+this.deltaSetXY[1]+"px")}this.cachePosition(E.x,E.y);var A=this;setTimeout(function(){A.autoScroll.call(A,E.x,E.y,C.offsetHeight,C.offsetWidth)},0)},cachePosition:function(B,A){if(B){this.lastPageX=B;this.lastPageY=A}else{var C=YAHOO.util.Dom.getXY(this.getEl());this.lastPageX=C[0];this.lastPageY=C[1]}},autoScroll:function(J,I,E,K){if(this.scroll){var L=this.DDM.getClientHeight();var B=this.DDM.getClientWidth();var N=this.DDM.getScrollTop();var D=this.DDM.getScrollLeft();
var H=E+I;var M=K+J;var G=L+N-I-this.deltaY;var F=B+D-J-this.deltaX;var C=40;var A=document.all?80:30;if(H>L&&G<C)window.scrollTo(D,N+A);if(I<N&&N>0&&I-N<C)window.scrollTo(D,N-A);if(M>B&&F<C)window.scrollTo(D+A,N);if(J<D&&D>0&&J-D<C)window.scrollTo(D-A,N)}},applyConfig:function(){YAHOO.util.DD.superclass.applyConfig.call(this);this.scroll=this.config.scroll!==false},b4MouseDown:function(A){this.setStartPosition();this.autoOffset(YAHOO.util.Event.getPageX(A),YAHOO.util.Event.getPageY(A))},b4Drag:function(A){this.setDragElPos(YAHOO.util.Event.getPageX(A),
YAHOO.util.Event.getPageY(A))},toString:function(){return"DD "+this.id}});YAHOO.util.DDProxy=function(C,A,B){if(C){this.init(C,A,B);this.initFrame()}};YAHOO.util.DDProxy.dragElId="ygddfdiv";YAHOO.extend(YAHOO.util.DDProxy,YAHOO.util.DD,{resizeFrame:true,centerFrame:false,createFrame:function(){var B=this,A=document.body;if(!A||!A.firstChild){setTimeout(function(){B.createFrame()},50);return}var G=this.getDragEl(),E=YAHOO.util.Dom;if(!G){G=document.createElement("div");G.id=this.dragElId;var D=G.style;
D.position="absolute";D.visibility="hidden";D.cursor="move";D.border="2px solid #aaa";D.zIndex=999;D.height="25px";D.width="25px";var C=document.createElement("div");E.setStyle(C,"height","100%");E.setStyle(C,"width","100%");E.setStyle(C,"background-color","#ccc");E.setStyle(C,"opacity","0");G.appendChild(C);if(YAHOO.env.ua.ie){var F=document.createElement("iframe");F.setAttribute("src","about:blank");F.setAttribute("scrolling","no");F.setAttribute("frameborder","0");G.insertBefore(F,G.firstChild);
E.setStyle(F,"height","100%");E.setStyle(F,"width","100%");E.setStyle(F,"position","absolute");E.setStyle(F,"top","0");E.setStyle(F,"left","0");E.setStyle(F,"opacity","0");E.setStyle(F,"zIndex","-1");E.setStyle(F.nextSibling,"zIndex","2")}A.insertBefore(G,A.firstChild)}},initFrame:function(){this.createFrame()},applyConfig:function(){YAHOO.util.DDProxy.superclass.applyConfig.call(this);this.resizeFrame=this.config.resizeFrame!==false;this.centerFrame=this.config.centerFrame;this.setDragElId(this.config.dragElId||
YAHOO.util.DDProxy.dragElId)},showFrame:function(E,D){var C=this.getEl();var A=this.getDragEl();var B=A.style;this._resizeProxy();if(this.centerFrame)this.setDelta(Math.round(parseInt(B.width,10)/2),Math.round(parseInt(B.height,10)/2));this.setDragElPos(E,D);YAHOO.util.Dom.setStyle(A,"visibility","visible")},_resizeProxy:function(){if(this.resizeFrame){var H=YAHOO.util.Dom;var B=this.getEl();var C=this.getDragEl();var G=parseInt(H.getStyle(C,"borderTopWidth"),10);var I=parseInt(H.getStyle(C,"borderRightWidth"),
10);var F=parseInt(H.getStyle(C,"borderBottomWidth"),10);var D=parseInt(H.getStyle(C,"borderLeftWidth"),10);if(isNaN(G))G=0;if(isNaN(I))I=0;if(isNaN(F))F=0;if(isNaN(D))D=0;var E=Math.max(0,B.offsetWidth-I-D);var A=Math.max(0,B.offsetHeight-G-F);H.setStyle(C,"width",E+"px");H.setStyle(C,"height",A+"px")}},b4MouseDown:function(B){this.setStartPosition();var A=YAHOO.util.Event.getPageX(B);var C=YAHOO.util.Event.getPageY(B);this.autoOffset(A,C)},b4StartDrag:function(A,B){this.showFrame(A,B)},b4EndDrag:function(A){YAHOO.util.Dom.setStyle(this.getDragEl(),
"visibility","hidden")},endDrag:function(D){var C=YAHOO.util.Dom;var B=this.getEl();var A=this.getDragEl();C.setStyle(A,"visibility","");C.setStyle(B,"visibility","hidden");YAHOO.util.DDM.moveToEl(B,A);C.setStyle(A,"visibility","hidden");C.setStyle(B,"visibility","")},toString:function(){return"DDProxy "+this.id}});YAHOO.util.DDTarget=function(C,A,B){if(C)this.initTarget(C,A,B)};YAHOO.extend(YAHOO.util.DDTarget,YAHOO.util.DragDrop,{toString:function(){return"DDTarget "+this.id}});YAHOO.register("dragdrop",
YAHOO.util.DragDropMgr,{version:"2.5.1",build:"984"});YAHOO.widget.TreeView=function(A,B){if(A)this.init(A,B)};YAHOO.widget.TreeView.prototype={id:null,_el:null,_nodes:null,locked:false,_expandAnim:null,_collapseAnim:null,_animCount:0,maxAnim:2,selectedNode:null,setExpandAnim:function(A){this._expandAnim=YAHOO.widget.TVAnim.isValid(A)?A:null},setCollapseAnim:function(A){this._collapseAnim=YAHOO.widget.TVAnim.isValid(A)?A:null},animateExpand:function(C,D){if(this._expandAnim&&this._animCount<this.maxAnim){var A=
this;var B=YAHOO.widget.TVAnim.getAnim(this._expandAnim,C,function(){A.expandComplete(D)});if(B){++this._animCount;this.fireEvent("animStart",{"node":D,"type":"expand"});B.animate()}return true}return false},animateCollapse:function(C,D){if(this._collapseAnim&&this._animCount<this.maxAnim){var A=this;var B=YAHOO.widget.TVAnim.getAnim(this._collapseAnim,C,function(){A.collapseComplete(D)});if(B){++this._animCount;this.fireEvent("animStart",{"node":D,"type":"collapse"});B.animate()}return true}return false},
expandComplete:function(A){--this._animCount;this.fireEvent("animComplete",{"node":A,"type":"expand"})},collapseComplete:function(A){--this._animCount;this.fireEvent("animComplete",{"node":A,"type":"collapse"})},init:function(B,C){this.id=B;this.cindex=C;if("string"!==typeof B){this._el=B;this.id=this.generateId(B)}this.createEvent("animStart",this);this.createEvent("animComplete",this);this.createEvent("collapse",this);this.createEvent("collapseComplete",this);this.createEvent("expand",this);this.createEvent("expandComplete",
this);this._nodes=[];YAHOO.widget.TreeView.trees[this.id]=this;this.root=new YAHOO.widget.RootNode(this);var A=YAHOO.widget.LogWriter},draw:function(){var A=this.root.getHtml();this.getEl().innerHTML=A;this.firstDraw=false},getEl:function(){if(!this._el)this._el=document.getElementById(this.id);return this._el},regNode:function(A){this._nodes[A.index]=A},getRoot:function(){return this.root},setDynamicLoad:function(A,B){this.root.setDynamicLoad(A,B)},expandAll:function(){if(!this.locked)this.root.expandAll()},
collapseAll:function(){if(!this.locked)this.root.collapseAll()},getNodeByIndex:function(B){var A=this._nodes[B];return A?A:null},getNodeByProperty:function(C,B){for(var A in this._nodes){var D=this._nodes[A];if(D.data&&String(B).toLowerCase()==String(D.data[C]).toLowerCase())return D}return null},getNodesByProperty:function(D,C){var A=[];for(var B in this._nodes){var E=this._nodes[B];if(E.data&&C==E.data[D])A.push(E)}return A.length?A:null},getNodeByElement:function(C){var D=C,A,B=/ygtv([^\d]*)(.*)/;
do{if(D&&D.id){A=D.id.match(B);if(A&&A[2])return this.getNodeByIndex(A[2])}D=D.parentNode;if(!D||!D.tagName)break}while(D.id!==this.id&&D.tagName.toLowerCase()!=="body");return null},getSelectedNode:function(){return this.selectedNode||null},selectNode:function(A,B){var N=this.getNodeByProperty(A,B);if(!N)return false;if(this.selectedNode)this.selectedNode.deselectNode();N.selectNode();this.selectedNode=N},removeNode:function(B,A){if(B.isRoot())return false;var C=B.parent;if(C.parent)C=C.parent;this._deleteNode(B);
if(A&&C&&C.childrenRendered)C.refresh();return true},_removeChildren_animComplete:function(A){this.unsubscribe(this._removeChildren_animComplete);this.removeChildren(A.node)},removeChildren:function(A){if(A.expanded){if(this._collapseAnim){this.subscribe("animComplete",this._removeChildren_animComplete,this,true);YAHOO.widget.Node.prototype.collapse.call(A);return}A.collapse()}while(A.children.length)this._deleteNode(A.children[0]);if(A.isRoot())YAHOO.widget.Node.prototype.expand.call(A);A.childrenRendered=
false;A.dynamicLoadComplete=false;A.updateIcon()},_deleteNode:function(A){this.removeChildren(A);this.popNode(A)},popNode:function(D){var E=D.parent;var B=[];for(var C=0,A=E.children.length;C<A;++C)if(E.children[C]!=D)B[B.length]=E.children[C];E.children=B;E.childrenRendered=false;if(D.previousSibling)D.previousSibling.nextSibling=D.nextSibling;if(D.nextSibling)D.nextSibling.previousSibling=D.previousSibling;D.parent=null;D.previousSibling=null;D.nextSibling=null;D.tree=null;delete this._nodes[D.index]},
toString:function(){return"TreeView "+this.id},generateId:function(A){var B=A.id;if(!B){B="yui-tv-auto-id-"+YAHOO.widget.TreeView.counter;++YAHOO.widget.TreeView.counter}return B},onExpand:function(A){},onCollapse:function(A){}};YAHOO.augment(YAHOO.widget.TreeView,YAHOO.util.EventProvider);YAHOO.widget.TreeView.nodeCount=0;YAHOO.widget.TreeView.trees=[];YAHOO.widget.TreeView.counter=0;YAHOO.widget.TreeView.getTree=function(B){var A=YAHOO.widget.TreeView.trees[B];return A?A:null};YAHOO.widget.TreeView.getNode=
function(B,C){var A=YAHOO.widget.TreeView.getTree(B);return A?A.getNodeByIndex(C):null};YAHOO.widget.TreeView.addHandler=function(B,C,A){if(B.addEventListener)B.addEventListener(C,A,false);else if(B.attachEvent)B.attachEvent("on"+C,A)};YAHOO.widget.TreeView.removeHandler=function(B,C,A){if(B.removeEventListener)B.removeEventListener(C,A,false);else if(B.detachEvent)B.detachEvent("on"+C,A)};YAHOO.widget.TreeView.preload=function(F,E){E=E||"ygtv";var C=["tn","tm","tmh","tp","tph","ln","lm","lmh","lp",
"lph","loading"];var G=[];for(var A=1;A<C.length;A=A+1)G[G.length]='<span class="'+E+C[A]+'">&#160;</span>';var D=document.createElement("div");var B=D.style;B.className=E+C[0];B.position="absolute";B.height="1px";B.width="1px";B.top="-1000px";B.left="-1000px";D.innerHTML=G.join("");document.body.appendChild(D);YAHOO.widget.TreeView.removeHandler(window,"load",YAHOO.widget.TreeView.preload)};YAHOO.widget.TreeView.addHandler(window,"load",YAHOO.widget.TreeView.preload);YAHOO.widget.Node=function(C,
B,A){if(C)this.init(C,B,A)};YAHOO.widget.Node.prototype={index:0,children:null,tree:null,data:null,parent:null,depth:-1,href:null,target:"_self",expanded:false,multiExpand:true,renderHidden:false,childrenRendered:false,dynamicLoadComplete:false,previousSibling:null,nextSibling:null,_dynLoad:false,dataLoader:null,isLoading:false,hasIcon:true,iconMode:0,nowrap:false,isLeaf:false,_type:"Node",init:function(C,B,A){this.data=C;this.children=[];this.index=YAHOO.widget.TreeView.nodeCount;++YAHOO.widget.TreeView.nodeCount;
this.expanded=A;this.createEvent("parentChange",this);if(B)B.appendChild(this)},selectNode:function(){var A=this.setLabelStyle("ygtvsel");var B=this.getLabelEl();if(B)B.className=A},deselectNode:function(){var A=this.removeLabelStyle("ygtvsel");var B=this.getLabelEl();if(B)B.className=A},applyParent:function(B){if(!B)return false;this.tree=B.tree;this.parent=B;this.depth=B.depth+1;if(!this.href)this.href="javascript:"+this.getToggleLink();this.tree.regNode(this);B.childrenRendered=false;for(var C=
0,A=this.children.length;C<A;++C)this.children[C].applyParent(this);this.fireEvent("parentChange");return true},appendChild:function(B){if(this.hasChildren()){var A=this.children[this.children.length-1];A.nextSibling=B;B.previousSibling=A}this.children[this.children.length]=B;B.applyParent(this);if(this.childrenRendered&&this.expanded)this.getChildrenEl().style.display="";return B},appendTo:function(A){return A.appendChild(this)},insertBefore:function(A){var C=A.parent;if(C){if(this.tree)this.tree.popNode(this);
var B=A.isChildOf(C);C.children.splice(B,0,this);if(A.previousSibling)A.previousSibling.nextSibling=this;this.previousSibling=A.previousSibling;this.nextSibling=A;A.previousSibling=this;this.applyParent(C)}return this},insertAfter:function(A){var C=A.parent;if(C){if(this.tree)this.tree.popNode(this);var B=A.isChildOf(C);if(!A.nextSibling){this.nextSibling=null;return this.appendTo(C)}C.children.splice(B+1,0,this);A.nextSibling.previousSibling=this;this.previousSibling=A;this.nextSibling=A.nextSibling;
A.nextSibling=this;this.applyParent(C)}return this},isChildOf:function(B){if(B&&B.children)for(var C=0,A=B.children.length;C<A;++C)if(B.children[C]===this)return C;return-1},getSiblings:function(){return this.parent.children},showChildren:function(){if(!this.tree.animateExpand(this.getChildrenEl(),this))if(this.hasChildren())this.getChildrenEl().style.display=""},hideChildren:function(){if(!this.tree.animateCollapse(this.getChildrenEl(),this))this.getChildrenEl().style.display="none"},getElId:function(){return"ygtv"+
this.index},getChildrenElId:function(){return"ygtvc"+this.index},getToggleElId:function(){return"ygtvt"+this.index},getEl:function(){return document.getElementById(this.getElId())},getChildrenEl:function(){return document.getElementById(this.getChildrenElId())},getToggleEl:function(){return document.getElementById(this.getToggleElId())},getToggleLink:function(){return"ITHit.Components.YAHOO.widget.TreeView.getNode('"+this.tree.id+"',"+this.index+").toggle()"},collapse:function(){if(!this.expanded)return;
var A=this.tree.onCollapse(this);if(false===A)return;A=this.tree.fireEvent("collapse",this);if(false===A)return;if(!this.getEl())this.expanded=false;else{this.hideChildren();this.expanded=false;this.updateIcon()}A=this.tree.fireEvent("collapseComplete",this)},expand:function(C){if(this.expanded&&!C)return;var A=true;if(!C){A=this.tree.onExpand(this);if(false===A)return;A=this.tree.fireEvent("expand",this)}if(false===A)return;if(!this.getEl()){this.expanded=true;return}if(!this.childrenRendered)this.getChildrenEl().innerHTML=
this.renderChildren();else;this.expanded=true;this.updateIcon();if(this.isLoading){this.expanded=false;return}if(!this.multiExpand){var D=this.getSiblings();for(var B=0;B<D.length;++B)if(D[B]!=this&&D[B].expanded)D[B].collapse()}this.showChildren();A=this.tree.fireEvent("expandComplete",this)},updateIcon:function(){if(this.hasIcon){var A=this.getToggleEl();if(A)A.className=this.getStyle()}},getStyle:function(){if(this.isLoading)return"ygtvloading";else{var B=this.nextSibling?"t":"l";var A="n";if(this.hasChildren(true)||
this.isDynamic()&&!this.getIconMode())A=this.expanded?"m":"p";return"ygtv"+B+A}},getHoverStyle:function(){var A=this.getStyle();if(true)A+="h";return A},expandAll:function(){for(var A=0;A<this.children.length;++A){var B=this.children[A];if(B.isDynamic()){alert("Not supported (lazy load + expand all)");break}else if(!B.multiExpand){alert("Not supported (no multi-expand + expand all)");break}else{B.expand();B.expandAll()}}},collapseAll:function(){for(var A=0;A<this.children.length;++A){this.children[A].collapse();
this.children[A].collapseAll()}},setDynamicLoad:function(A,B){if(A){this.dataLoader=A;this._dynLoad=true}else{this.dataLoader=null;this._dynLoad=false}if(B)this.iconMode=B},isRoot:function(){return this==this.tree.root},isDynamic:function(){if(this.isLeaf)return false;else return!this.isRoot()&&(this._dynLoad||this.tree.root._dynLoad)},getIconMode:function(){return this.iconMode||this.tree.root.iconMode},hasChildren:function(A){if(this.isLeaf)return false;else return this.children.length>0||A&&this.isDynamic()&&
!this.dynamicLoadComplete},toggle:function(){if(!this.tree.locked&&(this.hasChildren(true)||this.isDynamic()))if(this.expanded)this.collapse();else this.expand()},getHtml:function(){this.childrenRendered=false;var A=[];A[A.length]='<div class="ygtvitem" id="'+this.getElId()+'">';A[A.length]=this.getNodeHtml();A[A.length]=this.getChildrenHtml();A[A.length]="</div>";return A.join("")},getChildrenHtml:function(){var A=[];A[A.length]='<div class="ygtvchildren"';A[A.length]=' id="'+this.getChildrenElId()+
'"';if(!this.expanded||!this.hasChildren())A[A.length]=' style="display:none;"';A[A.length]=">";if(this.hasChildren(true)&&this.expanded||this.renderHidden&&!this.isDynamic())A[A.length]=this.renderChildren();A[A.length]="</div>";return A.join("")},renderChildren:function(){var A=this;if(this.isDynamic()&&!this.dynamicLoadComplete){this.isLoading=true;this.tree.locked=true;if(this.dataLoader)setTimeout(function(){A.dataLoader(A,function(){A.loadComplete()})},10);else if(this.tree.root.dataLoader)setTimeout(function(){A.tree.root.dataLoader(A,
function(){A.loadComplete()})},10);else return"Error: data loader not found or not specified.";return""}else return this.completeRender()},completeRender:function(){var B=[];for(var A=0;A<this.children.length;++A)B[B.length]=this.children[A].getHtml();this.childrenRendered=true;return B.join("")},loadComplete:function(){this.getChildrenEl().innerHTML=this.completeRender();this.dynamicLoadComplete=true;this.isLoading=false;this.expand(true);this.tree.locked=false},getAncestor:function(B){if(B>=this.depth||
B<0)return null;var A=this.parent;while(A.depth>B)A=A.parent;return A},getDepthStyle:function(A){return this.getAncestor(A).nextSibling?"ygtvdepthcell":"ygtvblankdepthcell"},getNodeHtml:function(){return""},refresh:function(){var oEl=this.getChildrenEl();if(!oEl)return;oEl.innerHTML=this.completeRender();if(this.hasIcon){var A=this.getToggleEl();if(A)A.className=this.getStyle()}},toString:function(){return"Node ("+this.index+")"}};YAHOO.augment(YAHOO.widget.Node,YAHOO.util.EventProvider);YAHOO.widget.TextNode=
function(C,B,A){if(C){this.init(C,B,A);this.setUpLabel(C)}};YAHOO.extend(YAHOO.widget.TextNode,YAHOO.widget.Node,{labelStyle:"ygtvlabel dnd_target",labelElId:null,label:null,textNodeParentChange:function(){if(this.tree&&!this.tree.hasEvent("labelClick"))this.tree.createEvent("labelClick",this.tree)},setUpLabel:function(A){this.textNodeParentChange();this.subscribe("parentChange",this.textNodeParentChange);if(typeof A=="string")A={label:A};this.label=A.label;this.data.label=A.label;if(A.href)this.href=
encodeURI(A.href);if(A.target)this.target=A.target;if(A.style)this.labelStyle=A.style;if(A.title)this.title=A.title;this.labelElId="ygtvlabelel"+this.index},setLabelStyle:function(A){if(-1===this.labelStyle.indexOf(A))this.labelStyle+=" "+A;return this.labelStyle},removeLabelStyle:function(A){var B=new RegExp("(?: )?"+A);return this.labelStyle=this.labelStyle.replace(B,"")},getLabelEl:function(){return document.getElementById(this.labelElId)},getNodeHtml:function(){var C=[];C[C.length]='<table border="0" cellpadding="0" cellspacing="0" width="100%">';
C[C.length]="<tr>";for(var A=0;A<this.depth;++A)C[C.length]='<td class="'+this.getDepthStyle(A)+'"><div class="ygtvspacer"></div></td>';var B="ITHit.Components.YAHOO.widget.TreeView.getNode('"+this.tree.id+"',"+this.index+")";C[C.length]="<td";C[C.length]=' id="'+this.getToggleElId()+'"';C[C.length]=' class="'+this.getStyle()+'"';if(this.hasChildren(true)){C[C.length]=' onmouseover="this.className=';C[C.length]=B+'.getHoverStyle()"';C[C.length]=' onmouseout="this.className=';C[C.length]=B+'.getStyle()"'}C[C.length]=
' onclick="javascript:'+this.getToggleLink()+'">';C[C.length]='<div class="ygtvspacer">';C[C.length]="</div>";C[C.length]="</td>";C[C.length]="<td ";C[C.length]=' oncontextmenu="ITHit.WebDAV.Client.AjaxFileBrowser.Controller.ShowTreeContextMenu(ITHit.Components.dojo.fixEvent(event),'+this.tree.cindex+');return false;"';C[C.length]=this.nowrap?' nowrap="nowrap" ':"";C[C.length]=" >";C[C.length]="<a";C[C.length]=' id="'+this.labelElId+'"';if(this.title)C[C.length]=' title="'+this.title+'"';C[C.length]=
' class="'+this.labelStyle+'"';C[C.length]=' href="javascript:{}"';C[C.length]=' target="'+this.target+'"';C[C.length]=' onmousedown="ITHit.WebDAV.Client.AjaxFileBrowser.Controller.TreeMouseDown(event,'+this.tree.cindex+');"';C[C.length]=' onclick="if('+B+".onLabelClick("+B+")){ITHit.WebDAV.Client.AjaxFileBrowser.Controller.OpenTreeFolder(event,"+this.tree.cindex+');}return false;"';C[C.length]=" >";C[C.length]=this.label;C[C.length]="</a>";C[C.length]="</td>";C[C.length]="</tr>";C[C.length]="</table>";
return C.join("")},onLabelClick:function(A){return A.tree.fireEvent("labelClick",A)},toString:function(){return"TextNode ("+this.index+") "+this.label}});YAHOO.widget.RootNode=function(A){this.init(null,null,true);this.tree=A};YAHOO.extend(YAHOO.widget.RootNode,YAHOO.widget.Node,{getNodeHtml:function(){return""},toString:function(){return"RootNode"},loadComplete:function(){this.tree.draw()},collapse:function(){},expand:function(){}});YAHOO.widget.HTMLNode=function(D,C,B,A){if(D){this.init(D,C,B);
this.initContent(D,A)}};YAHOO.extend(YAHOO.widget.HTMLNode,YAHOO.widget.Node,{contentStyle:"ygtvhtml",contentElId:null,html:null,initContent:function(B,A){this.setHtml(B);this.contentElId="ygtvcontentel"+this.index;this.hasIcon=A},setHtml:function(B){this.data=B;this.html=typeof B==="string"?B:B.html;var A=this.getContentEl();if(A)A.innerHTML=this.html},getContentEl:function(){return document.getElementById(this.contentElId)},getNodeHtml:function(){var B=[];B[B.length]='<table border="0" cellpadding="0" cellspacing="0">';
B[B.length]="<tr>";for(var A=0;A<this.depth;++A)B[B.length]='<td class="'+this.getDepthStyle(A)+'"><div class="ygtvspacer"></div></td>';if(this.hasIcon){B[B.length]="<td";B[B.length]=' id="'+this.getToggleElId()+'"';B[B.length]=' class="'+this.getStyle()+'"';B[B.length]=' onclick="javascript:'+this.getToggleLink()+'"';if(this.hasChildren(true)){B[B.length]=' onmouseover="this.className=';B[B.length]="ITHit.Components.YAHOO.widget.TreeView.getNode('";B[B.length]=this.tree.id+"',"+this.index+').getHoverStyle()"';
B[B.length]=' onmouseout="this.className=';B[B.length]="ITHit.Components.YAHOO.widget.TreeView.getNode('";B[B.length]=this.tree.id+"',"+this.index+').getStyle()"'}B[B.length]='><div class="ygtvspacer"></div></td>'}B[B.length]="<td";B[B.length]=' id="'+this.contentElId+'"';B[B.length]=' class="'+this.contentStyle+'"';B[B.length]=this.nowrap?' nowrap="nowrap" ':"";B[B.length]=" >";B[B.length]=this.html;B[B.length]="</td>";B[B.length]="</tr>";B[B.length]="</table>";return B.join("")},toString:function(){return"HTMLNode ("+
this.index+")"}});YAHOO.widget.MenuNode=function(C,B,A){if(C){this.init(C,B,A);this.setUpLabel(C)}this.multiExpand=false};YAHOO.extend(YAHOO.widget.MenuNode,YAHOO.widget.TextNode,{toString:function(){return"MenuNode ("+this.index+") "+this.label}});YAHOO.widget.TVAnim=function(){return{FADE_IN:"TVFadeIn",FADE_OUT:"TVFadeOut",getAnim:function(B,A,C){if(YAHOO.widget[B])return new YAHOO.widget[B](A,C);else return null},isValid:function(A){return YAHOO.widget[A]}}}();YAHOO.widget.TVFadeIn=function(A,
B){this.el=A;this.callback=B};YAHOO.widget.TVFadeIn.prototype={animate:function(){var D=this;var C=this.el.style;C.opacity=.1;C.filter="alpha(opacity=10)";C.display="";var B=.4;var A=new YAHOO.util.Anim(this.el,{opacity:{from:.1,to:1,unit:""}},B);A.onComplete.subscribe(function(){D.onComplete()});A.animate()},onComplete:function(){this.callback()},toString:function(){return"TVFadeIn"}};YAHOO.widget.TVFadeOut=function(A,B){this.el=A;this.callback=B};YAHOO.widget.TVFadeOut.prototype={animate:function(){var C=
this;var B=.4;var A=new YAHOO.util.Anim(this.el,{opacity:{from:1,to:.1,unit:""}},B);A.onComplete.subscribe(function(){C.onComplete()});A.animate()},onComplete:function(){var A=this.el.style;A.display="none";A.filter="alpha(opacity=100)";this.callback()},toString:function(){return"TVFadeOut"}};YAHOO.register("treeview",YAHOO.widget.TreeView,{version:"2.5.1",build:"984"})})();var dojo,dijit,dojox;var ihDojo,ihDijit,ihDojox;
(function(){dojo,dijit,dojox;ihDojo,ihDijit,ihDojox;var sMap=[["dojo","ihDojo"],["dijit","ihDijit"],["dojox","ihDojox"]];if((sMap||typeof djConfig!="undefined"&&djConfig.scopeMap)&&typeof window!="undefined"){var scopeDef="",scopePrefix="",scopeSuffix="",scopeMap={},scopeMapRev={};sMap=sMap||djConfig.scopeMap;for(var i=0;i<sMap.length;i++){var newScope=sMap[i];scopeDef+="var "+newScope[0]+" = {}; "+newScope[1]+" = "+newScope[0]+";"+newScope[1]+"._scopeName = '"+newScope[1]+"';";scopePrefix+=(i==0?
"":",")+newScope[0];scopeSuffix+=(i==0?"":",")+newScope[1];scopeMap[newScope[0]]=newScope[1];scopeMapRev[newScope[1]]=newScope[0]}eval(scopeDef+"dojo._scopeArgs = ["+scopeSuffix+"];");dojo._scopePrefixArgs=scopePrefix;dojo._scopePrefix="(function("+scopePrefix+"){";dojo._scopeSuffix="})("+scopeSuffix+")";dojo._scopeMap=scopeMap;dojo._scopeMapRev=scopeMapRev}(function(){if(typeof this["loadFirebugConsole"]=="function")this["loadFirebugConsole"]();else{this.console=this.console||{};var cn=["assert",
"count","debug","dir","dirxml","error","group","groupEnd","info","profile","profileEnd","time","timeEnd","trace","warn","log"];var i=0,tn;while(tn=cn[i++])if(!console[tn])(function(){var tcn=tn+"";console[tcn]="log"in console?function(){var a=Array.apply({},arguments);a.unshift(tcn+":");console["log"](a.join(" "))}:function(){};console[tcn]._fake=true})()}if(typeof dojo=="undefined")dojo={_scopeName:"dojo",_scopePrefix:"",_scopePrefixArgs:"",_scopeSuffix:"",_scopeMap:{},_scopeMapRev:{}};if(typeof dijit==
"undefined")dijit={_scopeName:"dijit"};if(typeof dojox=="undefined")dojox={_scopeName:"dojox"};var d=dojo,dj=dijit,dx=dojox;if(!d._scopeArgs)d._scopeArgs=[dojo,dijit,dojox];ITHit.Components.dojo=dojo;ITHit.Components.dijit=dijit;ITHit.Components.dojox=dojox;ITHit.Components.ihDojo=ihDojo;ITHit.Components.ihDijit=ihDijit;ITHit.Components.ihDojox=ihDojox;d.global=this;d.globalScope=ITHit.Components;d.config={isDebug:false,debugAtAllCosts:false};var cfg=typeof djConfig!="undefined"?djConfig:typeof dojoConfig!=
"undefined"?dojoConfig:null;if(cfg)for(var c in cfg)d.config[c]=cfg[c];dojo.setBlankGif=function(url){dojo.config.blankGif=url};dojo.locale=d.config.locale;var rev="$Rev: 23917 $".match(/\d+/);dojo.version={major:0,minor:0,patch:0,flag:"dev",revision:rev?+rev[0]:NaN,toString:function(){with(d.version)return major+"."+minor+"."+patch+flag+" ("+revision+")"}};if(typeof OpenAjax!="undefined")OpenAjax.hub.registerLibrary(dojo._scopeName,"http://dojotoolkit.org",d.version.toString());var extraNames,extraLen,
empty={};for(var i in{toString:1}){extraNames=[];break}dojo._extraNames=extraNames=extraNames||["hasOwnProperty","valueOf","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","constructor"];extraLen=extraNames.length;dojo._mixin=function(target,source){var name,s,i;for(name in source){s=source[name];if(!(name in target)||target[name]!==s&&(!(name in empty)||empty[name]!==s))target[name]=s}if(extraLen&&source)for(i=0;i<extraLen;++i){name=extraNames[i];s=source[name];if(!(name in target)||
target[name]!==s&&(!(name in empty)||empty[name]!==s))target[name]=s}return target};dojo.mixin=function(obj,props){if(!obj)obj={};for(var i=1,l=arguments.length;i<l;i++)d._mixin(obj,arguments[i]);return obj};dojo._getProp=function(parts,create,context){var obj=context||d.globalScope;for(var i=0,p;obj&&(p=parts[i]);i++){if(i==0&&d._scopeMap[p])p=d._scopeMap[p];obj=p in obj?obj[p]:create?obj[p]={}:undefined}return obj};dojo.setObject=function(name,value,context){var parts=name.split("."),p=parts.pop(),
obj=d._getProp(parts,true,context);return obj&&p?obj[p]=value:undefined};dojo.getObject=function(name,create,context){return d._getProp(name.split("."),create,context)};dojo.exists=function(name,obj){return d.getObject(name,false,obj)!==undefined};dojo["eval"]=function(scriptFragment){return d.global.eval?d.global.eval(scriptFragment):eval(scriptFragment)};d.deprecated=d.experimental=function(){}})();(function(){var d=dojo,currentModule;d.mixin(d,{_loadedModules:{},_inFlightCount:0,_hasResource:{},
_modulePrefixes:{dojo:{name:"dojo",value:"."},doh:{name:"doh",value:"../util/doh"},tests:{name:"tests",value:"tests"}},_moduleHasPrefix:function(module){var mp=d._modulePrefixes;return!!(mp[module]&&mp[module].value)},_getModulePrefix:function(module){var mp=d._modulePrefixes;if(d._moduleHasPrefix(module))return mp[module].value;return module},_loadedUrls:[],_postLoad:false,_loaders:[],_unloaders:[],_loadNotifying:false});dojo._loadPath=function(relpath,module,cb){var uri=(relpath.charAt(0)=="/"||
relpath.match(/^\w+:/)?"":d.baseUrl)+relpath;try{currentModule=module;return!module?d._loadUri(uri,cb):d._loadUriAndCheck(uri,module,cb)}catch(e){console.error(e);return false}finally{currentModule=null}};dojo._loadUri=function(uri,cb){if(d._loadedUrls[uri])return true;d._inFlightCount++;var contents=d._getText(uri,true);if(contents){d._loadedUrls[uri]=true;d._loadedUrls.push(uri);if(cb)contents=/^define\(/.test(contents)?contents:"("+contents+")";else contents=d._scopePrefix+contents+d._scopeSuffix;
if(!d.isIE)contents+="\r\n//@ sourceURL="+uri;var value=d["eval"](contents);if(cb)cb(value)}if(--d._inFlightCount==0&&d._postLoad&&d._loaders.length)setTimeout(function(){if(d._inFlightCount==0)d._callLoaded()},0);return!!contents};dojo._loadUriAndCheck=function(uri,moduleName,cb){var ok=false;try{ok=d._loadUri(uri,cb)}catch(e){console.error("failed loading "+uri+" with error: "+e)}return!!(ok&&d._loadedModules[moduleName])};dojo.loaded=function(){d._loadNotifying=true;d._postLoad=true;var mll=d._loaders;
d._loaders=[];for(var x=0;x<mll.length;x++)mll[x]();d._loadNotifying=false;if(d._postLoad&&d._inFlightCount==0&&mll.length)d._callLoaded()};dojo.unloaded=function(){var mll=d._unloaders;while(mll.length)mll.pop()()};d._onto=function(arr,obj,fn){if(!fn)arr.push(obj);else if(fn){var func=typeof fn=="string"?obj[fn]:fn;arr.push(function(){func.call(obj)})}};dojo.ready=dojo.addOnLoad=function(obj,functionName){d._onto(d._loaders,obj,functionName);if(d._postLoad&&d._inFlightCount==0&&!d._loadNotifying)d._callLoaded()};
var dca=d.config.addOnLoad;if(dca)d.addOnLoad[dca instanceof Array?"apply":"call"](d,dca);dojo._modulesLoaded=function(){if(d._postLoad)return;if(d._inFlightCount>0){console.warn("files still in flight!");return}d._callLoaded()};dojo._callLoaded=function(){if(typeof setTimeout=="object"||d.config.useXDomain&&d.isOpera)setTimeout(d.isAIR?function(){d.loaded()}:"ITHit.Components."+d._scopeName+".loaded();",0);else d.loaded()};dojo._getModuleSymbols=function(modulename){var syms=modulename.split(".");
for(var i=syms.length;i>0;i--){var parentModule=syms.slice(0,i).join(".");if(i==1&&!d._moduleHasPrefix(parentModule))syms[0]="../"+syms[0];else{var parentModulePath=d._getModulePrefix(parentModule);if(parentModulePath!=parentModule){syms.splice(0,i,parentModulePath);break}}}return syms};dojo._global_omit_module_check=false;dojo.loadInit=function(init){init()};dojo._loadModule=dojo.require=function(moduleName,omitModuleCheck){omitModuleCheck=d._global_omit_module_check||omitModuleCheck;var module=
d._loadedModules[moduleName];if(module)return module;var relpath=d._getModuleSymbols(moduleName).join("/")+".js";var modArg=!omitModuleCheck?moduleName:null;var ok=d._loadPath(relpath,modArg);if(!ok&&!omitModuleCheck)throw new Error("Could not load '"+moduleName+"'; last tried '"+relpath+"'");if(!omitModuleCheck&&!d._isXDomain){module=d._loadedModules[moduleName];if(!module)throw new Error("symbol '"+moduleName+"' is not defined after loading '"+relpath+"'");}return module};dojo.provide=function(resourceName){resourceName=
resourceName+"";return d._loadedModules[resourceName]=d.getObject(resourceName,true)};dojo.platformRequire=function(modMap){var common=modMap.common||[];var result=common.concat(modMap[d._name]||modMap["default"]||[]);for(var x=0;x<result.length;x++){var curr=result[x];if(curr.constructor==Array)d._loadModule.apply(d,curr);else d._loadModule(curr)}};dojo.requireIf=function(condition,resourceName){if(condition===true){var args=[];for(var i=1;i<arguments.length;i++)args.push(arguments[i]);d.require.apply(d,
args)}};dojo.requireAfterIf=d.requireIf;dojo.registerModulePath=function(module,prefix){d._modulePrefixes[module]={name:module,value:prefix}};dojo.requireLocalization=function(moduleName,bundleName,locale,availableFlatLocales){d.require("dojo.i18n");d.i18n._requireLocalization.apply(d.hostenv,arguments)};var ore=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),ire=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$");dojo._Url=function(){var n=
null,_a=arguments,uri=[_a[0]];for(var i=1;i<_a.length;i++){if(!_a[i])continue;var relobj=new d._Url(_a[i]+""),uriobj=new d._Url(uri[0]+"");if(relobj.path==""&&!relobj.scheme&&!relobj.authority&&!relobj.query){if(relobj.fragment!=n)uriobj.fragment=relobj.fragment;relobj=uriobj}else if(!relobj.scheme){relobj.scheme=uriobj.scheme;if(!relobj.authority){relobj.authority=uriobj.authority;if(relobj.path.charAt(0)!="/"){var path=uriobj.path.substring(0,uriobj.path.lastIndexOf("/")+1)+relobj.path;var segs=
path.split("/");for(var j=0;j<segs.length;j++)if(segs[j]==".")if(j==segs.length-1)segs[j]="";else{segs.splice(j,1);j--}else if(j>0&&!(j==1&&segs[0]=="")&&segs[j]==".."&&segs[j-1]!="..")if(j==segs.length-1){segs.splice(j,1);segs[j-1]=""}else{segs.splice(j-1,2);j-=2}relobj.path=segs.join("/")}}}uri=[];if(relobj.scheme)uri.push(relobj.scheme,":");if(relobj.authority)uri.push("//",relobj.authority);uri.push(relobj.path);if(relobj.query)uri.push("?",relobj.query);if(relobj.fragment)uri.push("#",relobj.fragment)}this.uri=
uri.join("");var r=this.uri.match(ore);this.scheme=r[2]||(r[1]?"":n);this.authority=r[4]||(r[3]?"":n);this.path=r[5];this.query=r[7]||(r[6]?"":n);this.fragment=r[9]||(r[8]?"":n);if(this.authority!=n){r=this.authority.match(ire);this.user=r[3]||n;this.password=r[4]||n;this.host=r[6]||r[7];this.port=r[9]||n}};dojo._Url.prototype.toString=function(){return this.uri};dojo.moduleUrl=function(module,url){var loc=d._getModuleSymbols(module).join("/");if(!loc)return null;if(loc.lastIndexOf("/")!=loc.length-
1)loc+="/";var colonIndex=loc.indexOf(":");if(loc.charAt(0)!="/"&&(colonIndex==-1||colonIndex>loc.indexOf("/")))loc=d.baseUrl+loc;return new d._Url(loc,url)}})();if(typeof window!="undefined"){dojo.isBrowser=true;dojo._name="browser";(function(){var d=dojo;if(document&&document.getElementsByTagName){var scripts=document.getElementsByTagName("script");var rePkg=/dojo(\.xd)?\.js(\W|$)/i;for(var i=0;i<scripts.length;i++){var src=scripts[i].getAttribute("src");if(!src)continue;var m=src.match(rePkg);
if(m){if(!d.config.baseUrl)d.config.baseUrl=src.substring(0,m.index);var cfg=scripts[i].getAttribute("djConfig")||scripts[i].getAttribute("data-dojo-config");if(cfg){var cfgo=eval("({ "+cfg+" })");for(var x in cfgo)dojo.config[x]=cfgo[x]}break}}}d.baseUrl=d.config.baseUrl;var n=navigator;var dua=n.userAgent,dav=n.appVersion,tv=parseFloat(dav);if(dua.indexOf("Opera")>=0)d.isOpera=tv;if(dua.indexOf("AdobeAIR")>=0)d.isAIR=1;d.isKhtml=dav.indexOf("Konqueror")>=0?tv:0;d.isWebKit=parseFloat(dua.split("WebKit/")[1])||
undefined;d.isChrome=parseFloat(dua.split("Chrome/")[1])||undefined;d.isMac=dav.indexOf("Macintosh")>=0;var index=Math.max(dav.indexOf("WebKit"),dav.indexOf("Safari"),0);if(index&&!dojo.isChrome){d.isSafari=parseFloat(dav.split("Version/")[1]);if(!d.isSafari||parseFloat(dav.substr(index+7))<=419.3)d.isSafari=2}if(dua.indexOf("Gecko")>=0&&!d.isKhtml&&!d.isWebKit)d.isMozilla=d.isMoz=tv;if(d.isMoz)d.isFF=parseFloat(dua.split("Firefox/")[1]||dua.split("Minefield/")[1])||undefined;if(document.all&&!d.isOpera){d.isIE=
parseFloat(dav.split("MSIE ")[1])||undefined;var mode=document.documentMode;if(mode&&mode!=5&&Math.floor(d.isIE)!=mode)d.isIE=mode}if(dojo.isIE&&window.location.protocol==="file:")dojo.config.ieForceActiveXXhr=true;d.isQuirks=document.compatMode=="BackCompat";d.locale=dojo.config.locale||(d.isIE?n.userLanguage:n.language).toLowerCase();d._XMLHTTP_PROGIDS=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"];d._xhrObj=function(){var http,last_e;if(!dojo.isIE||!dojo.config.ieForceActiveXXhr)try{http=
new XMLHttpRequest}catch(e){}if(!http)for(var i=0;i<3;++i){var progid=d._XMLHTTP_PROGIDS[i];try{http=new ActiveXObject(progid)}catch(e){last_e=e}if(http){d._XMLHTTP_PROGIDS=[progid];break}}if(!http)throw new Error("XMLHTTP not available: "+last_e);return http};d._isDocumentOk=function(http){var stat=http.status||0;return stat>=200&&stat<300||stat==304||stat==1223||!stat};var owloc=window.location+"";var base=document.getElementsByTagName("base");var hasBase=base&&base.length>0;d._getText=function(uri,
fail_ok){var http=d._xhrObj();if(!hasBase&&dojo._Url)uri=(new dojo._Url(owloc,uri)).toString();if(d.config.cacheBust){uri+="";uri+=(uri.indexOf("?")==-1?"?":"&")+String(d.config.cacheBust).replace(/\W+/g,"")}http.open("GET",uri,false);try{http.send(null);if(!d._isDocumentOk(http)){var err=Error("Unable to load "+uri+" status:"+http.status);err.status=http.status;err.responseText=http.responseText;throw err;}}catch(e){if(fail_ok)return null;throw e;}return http.responseText};var _w=window;var _handleNodeEvent=
function(evtName,fp){var _a=_w.attachEvent||_w.addEventListener;evtName=_w.attachEvent?evtName:evtName.substring(2);_a(evtName,function(){fp.apply(_w,arguments)},false)};d._windowUnloaders=[];d.windowUnloaded=function(){var mll=d._windowUnloaders;while(mll.length)mll.pop()();d=null};var _onWindowUnloadAttached=0;d.addOnWindowUnload=function(obj,functionName){d._onto(d._windowUnloaders,obj,functionName);if(!_onWindowUnloadAttached){_onWindowUnloadAttached=1;_handleNodeEvent("onunload",d.windowUnloaded)}};
var _onUnloadAttached=0;d.addOnUnload=function(obj,functionName){d._onto(d._unloaders,obj,functionName);if(!_onUnloadAttached){_onUnloadAttached=1;_handleNodeEvent("onbeforeunload",dojo.unloaded)}}})();dojo._initFired=false;dojo._loadInit=function(e){if(dojo._scrollIntervalId){clearInterval(dojo._scrollIntervalId);dojo._scrollIntervalId=0}if(!dojo._initFired){dojo._initFired=true;if(!dojo.config.afterOnLoad&&window.detachEvent)window.detachEvent("onload",dojo._loadInit);if(dojo._inFlightCount==0)dojo._modulesLoaded()}};
if(!dojo.config.afterOnLoad)if(document.addEventListener){document.addEventListener("DOMContentLoaded",dojo._loadInit,false);window.addEventListener("load",dojo._loadInit,false)}else if(window.attachEvent){window.attachEvent("onload",dojo._loadInit);if(!dojo.config.skipIeDomLoaded&&self===self.top)dojo._scrollIntervalId=setInterval(function(){try{if(document.body){document.documentElement.doScroll("left");dojo._loadInit()}}catch(e){}},30)}if(dojo.isIE)try{(function(){document.namespaces.add("v","urn:schemas-microsoft-com:vml");
var vmlElems=["*","group","roundrect","oval","shape","rect","imagedata","path","textpath","text"],i=0,l=1,s=document.createStyleSheet();if(dojo.isIE>=8){i=1;l=vmlElems.length}for(;i<l;++i)s.addRule("v\\:"+vmlElems[i],"behavior:url(#default#VML); display:inline-block")})()}catch(e){}}(function(){var mp=dojo.config["modulePaths"];if(mp)for(var param in mp)dojo.registerModulePath(param,mp[param])})();if(dojo.config.isDebug)dojo.require("dojo._firebug.firebug");if(dojo.config.debugAtAllCosts)dojo.require("dojo._base._loader.loader_debug");
if(!dojo._hasResource["dojo._base.lang"]){dojo._hasResource["dojo._base.lang"]=true;dojo.provide("dojo._base.lang");(function(){var d=dojo,opts=Object.prototype.toString;dojo.isString=function(it){return typeof it=="string"||it instanceof String};dojo.isArray=function(it){return it&&(it instanceof Array||typeof it=="array")};dojo.isFunction=function(it){return opts.call(it)==="[object Function]"};dojo.isObject=function(it){return it!==undefined&&(it===null||typeof it=="object"||d.isArray(it)||d.isFunction(it))};
dojo.isArrayLike=function(it){return it&&it!==undefined&&!d.isString(it)&&!d.isFunction(it)&&!(it.tagName&&it.tagName.toLowerCase()=="form")&&(d.isArray(it)||isFinite(it.length))};dojo.isAlien=function(it){return it&&!d.isFunction(it)&&/\{\s*\[native code\]\s*\}/.test(String(it))};dojo.extend=function(constructor,props){for(var i=1,l=arguments.length;i<l;i++)d._mixin(constructor.prototype,arguments[i]);return constructor};dojo._hitchArgs=function(scope,method){var pre=d._toArray(arguments,2);var named=
d.isString(method);return function(){var args=d._toArray(arguments);var f=named?(scope||d.globalScope)[method]:method;return f&&f.apply(scope||this,pre.concat(args))}};dojo.hitch=function(scope,method){if(arguments.length>2)return d._hitchArgs.apply(d,arguments);if(!method){method=scope;scope=null}if(d.isString(method)){scope=scope||d.globalScope;if(!scope[method])throw['dojo.hitch: scope["',method,'"] is null (scope="',scope,'")'].join("");return function(){return scope[method].apply(scope,arguments||
[])}}return!scope?method:function(){return method.apply(scope,arguments||[])}};dojo.delegate=dojo._delegate=function(){function TMP(){}return function(obj,props){TMP.prototype=obj;var tmp=new TMP;TMP.prototype=null;if(props)d._mixin(tmp,props);return tmp}}();var efficient=function(obj,offset,startWith){return(startWith||[]).concat(Array.prototype.slice.call(obj,offset||0))};var slow=function(obj,offset,startWith){var arr=startWith||[];for(var x=offset||0;x<obj.length;x++)arr.push(obj[x]);return arr};
dojo._toArray=d.isIE?function(obj){return(obj.item?slow:efficient).apply(this,arguments)}:efficient;dojo.partial=function(method){var arr=[null];return d.hitch.apply(d,arr.concat(d._toArray(arguments)))};var extraNames=d._extraNames,extraLen=extraNames.length,empty={};dojo.clone=function(o){if(!o||typeof o!="object"||d.isFunction(o))return o;if(o.nodeType&&"cloneNode"in o)return o.cloneNode(true);if(o instanceof Date)return new Date(o.getTime());if(o instanceof RegExp)return new RegExp(o);var r,i,
l,s,name;if(d.isArray(o)){r=[];for(i=0,l=o.length;i<l;++i)if(i in o)r.push(d.clone(o[i]))}else r=o.constructor?new o.constructor:{};for(name in o){s=o[name];if(!(name in r)||r[name]!==s&&(!(name in empty)||empty[name]!==s))r[name]=d.clone(s)}if(extraLen)for(i=0;i<extraLen;++i){name=extraNames[i];s=o[name];if(!(name in r)||r[name]!==s&&(!(name in empty)||empty[name]!==s))r[name]=s}return r};dojo.trim=String.prototype.trim?function(str){return str.trim()}:function(str){return str.replace(/^\s\s*/,"").replace(/\s\s*$/,
"")};var _pattern=/\{([^\}]+)\}/g;dojo.replace=function(tmpl,map,pattern){return tmpl.replace(pattern||_pattern,d.isFunction(map)?map:function(_,k){return d.getObject(k,false,map)})}})()}if(!dojo._hasResource["dojo._base.array"]){dojo._hasResource["dojo._base.array"]=true;dojo.provide("dojo._base.array");(function(){var _getParts=function(arr,obj,cb){return[typeof arr=="string"?arr.split(""):arr,obj||dojo.global,typeof cb=="string"?new Function("item","index","array",cb):cb]};var everyOrSome=function(every,
arr,callback,thisObject){var _p=_getParts(arr,thisObject,callback);arr=_p[0];for(var i=0,l=arr.length;i<l;++i){var result=!!_p[2].call(_p[1],arr[i],i,arr);if(every^result)return result}return every};dojo.mixin(dojo,{indexOf:function(array,value,fromIndex,findLast){var step=1,end=array.length||0,i=0;if(findLast){i=end-1;step=end=-1}if(fromIndex!=undefined)i=fromIndex;if(findLast&&i>end||i<end)for(;i!=end;i+=step)if(array[i]==value)return i;return-1},lastIndexOf:function(array,value,fromIndex){return dojo.indexOf(array,
value,fromIndex,true)},forEach:function(arr,callback,thisObject){if(!arr||!arr.length)return;var _p=_getParts(arr,thisObject,callback);arr=_p[0];for(var i=0,l=arr.length;i<l;++i)_p[2].call(_p[1],arr[i],i,arr)},every:function(arr,callback,thisObject){return everyOrSome(true,arr,callback,thisObject)},some:function(arr,callback,thisObject){return everyOrSome(false,arr,callback,thisObject)},map:function(arr,callback,thisObject){var _p=_getParts(arr,thisObject,callback);arr=_p[0];var outArr=arguments[3]?
new arguments[3]:[];for(var i=0,l=arr.length;i<l;++i)outArr.push(_p[2].call(_p[1],arr[i],i,arr));return outArr},filter:function(arr,callback,thisObject){var _p=_getParts(arr,thisObject,callback);arr=_p[0];var outArr=[];for(var i=0,l=arr.length;i<l;++i)if(_p[2].call(_p[1],arr[i],i,arr))outArr.push(arr[i]);return outArr}})})()}if(!dojo._hasResource["dojo._base.declare"]){dojo._hasResource["dojo._base.declare"]=true;dojo.provide("dojo._base.declare");(function(){var d=dojo,mix=d._mixin,op=Object.prototype,
opts=op.toString,xtor=new Function,counter=0,cname="constructor";function err(msg,cls){throw new Error("declare"+(cls?" "+cls:"")+": "+msg);}function c3mro(bases,className){var result=[],roots=[{cls:0,refs:[]}],nameMap={},clsCount=1,l=bases.length,i=0,j,lin,base,top,proto,rec,name,refs;for(;i<l;++i){base=bases[i];if(!base)err("mixin #"+i+" is unknown. Did you use dojo.require to pull it in?",className);else if(opts.call(base)!="[object Function]")err("mixin #"+i+" is not a callable constructor.",
className);lin=base._meta?base._meta.bases:[base];top=0;for(j=lin.length-1;j>=0;--j){proto=lin[j].prototype;if(!proto.hasOwnProperty("declaredClass"))proto.declaredClass="uniqName_"+counter++;name=proto.declaredClass;if(!nameMap.hasOwnProperty(name)){nameMap[name]={count:0,refs:[],cls:lin[j]};++clsCount}rec=nameMap[name];if(top&&top!==rec){rec.refs.push(top);++top.count}top=rec}++top.count;roots[0].refs.push(top)}while(roots.length){top=roots.pop();result.push(top.cls);--clsCount;while(refs=top.refs,
refs.length==1){top=refs[0];if(!top||--top.count){top=0;break}result.push(top.cls);--clsCount}if(top)for(i=0,l=refs.length;i<l;++i){top=refs[i];if(!--top.count)roots.push(top)}}if(clsCount)err("can't build consistent linearization",className);base=bases[0];result[0]=base?base._meta&&base===result[result.length-base._meta.bases.length]?base._meta.bases.length:1:0;return result}function inherited(args,a,f){var name,chains,bases,caller,meta,base,proto,opf,pos,cache=this._inherited=this._inherited||{};
if(typeof args=="string"){name=args;args=a;a=f}f=0;caller=args.callee;name=name||caller.nom;if(!name)err("can't deduce a name to call inherited()",this.declaredClass);meta=this.constructor._meta;bases=meta.bases;pos=cache.p;if(name!=cname){if(cache.c!==caller){pos=0;base=bases[0];meta=base._meta;if(meta.hidden[name]!==caller){chains=meta.chains;if(chains&&typeof chains[name]=="string")err("calling chained method with inherited: "+name,this.declaredClass);do{meta=base._meta;proto=base.prototype;if(meta&&
(proto[name]===caller&&proto.hasOwnProperty(name)||meta.hidden[name]===caller))break}while(base=bases[++pos]);pos=base?pos:-1}}base=bases[++pos];if(base){proto=base.prototype;if(base._meta&&proto.hasOwnProperty(name))f=proto[name];else{opf=op[name];do{proto=base.prototype;f=proto[name];if(f&&(base._meta?proto.hasOwnProperty(name):f!==opf))break}while(base=bases[++pos])}}f=base&&f||op[name]}else{if(cache.c!==caller){pos=0;meta=bases[0]._meta;if(meta&&meta.ctor!==caller){chains=meta.chains;if(!chains||
chains.constructor!=="manual")err("calling chained constructor with inherited",this.declaredClass);while(base=bases[++pos]){meta=base._meta;if(meta&&meta.ctor===caller)break}pos=base?pos:-1}}while(base=bases[++pos]){meta=base._meta;f=meta?meta.ctor:base;if(f)break}f=base&&f}cache.c=f;cache.p=pos;if(f)return a===true?f:f.apply(this,a||args)}function getInherited(name,args){if(typeof name=="string")return this.inherited(name,args,true);return this.inherited(name,true)}function isInstanceOf(cls){var bases=
this.constructor._meta.bases;for(var i=0,l=bases.length;i<l;++i)if(bases[i]===cls)return true;return this instanceof cls}function mixOwn(target,source){var name,i=0,l=d._extraNames.length;for(name in source)if(name!=cname&&source.hasOwnProperty(name))target[name]=source[name];for(;i<l;++i){name=d._extraNames[i];if(name!=cname&&source.hasOwnProperty(name))target[name]=source[name]}}function safeMixin(target,source){var name,t,i=0,l=d._extraNames.length;for(name in source){t=source[name];if((t!==op[name]||
!(name in op))&&name!=cname){if(opts.call(t)=="[object Function]")t.nom=name;target[name]=t}}for(;i<l;++i){name=d._extraNames[i];t=source[name];if((t!==op[name]||!(name in op))&&name!=cname){if(opts.call(t)=="[object Function]")t.nom=name;target[name]=t}}return target}function extend(source){safeMixin(this.prototype,source);return this}function chainedConstructor(bases,ctorSpecial){return function(){var a=arguments,args=a,a0=a[0],f,i,m,l=bases.length,preArgs;if(!(this instanceof a.callee))return applyNew(a);
if(ctorSpecial&&(a0&&a0.preamble||this.preamble)){preArgs=new Array(bases.length);preArgs[0]=a;for(i=0;;){a0=a[0];if(a0){f=a0.preamble;if(f)a=f.apply(this,a)||a}f=bases[i].prototype;f=f.hasOwnProperty("preamble")&&f.preamble;if(f)a=f.apply(this,a)||a;if(++i==l)break;preArgs[i]=a}}for(i=l-1;i>=0;--i){f=bases[i];m=f._meta;f=m?m.ctor:f;if(f)f.apply(this,preArgs?preArgs[i]:a)}f=this.postscript;if(f)f.apply(this,args)}}function singleConstructor(ctor,ctorSpecial){return function(){var a=arguments,t=a,
a0=a[0],f;if(!(this instanceof a.callee))return applyNew(a);if(ctorSpecial){if(a0){f=a0.preamble;if(f)t=f.apply(this,t)||t}f=this.preamble;if(f)f.apply(this,t)}if(ctor)ctor.apply(this,a);f=this.postscript;if(f)f.apply(this,a)}}function simpleConstructor(bases){return function(){var a=arguments,i=0,f,m;if(!(this instanceof a.callee))return applyNew(a);for(;f=bases[i];++i){m=f._meta;f=m?m.ctor:f;if(f){f.apply(this,a);break}}f=this.postscript;if(f)f.apply(this,a)}}function chain(name,bases,reversed){return function(){var b,
m,f,i=0,step=1;if(reversed){i=bases.length-1;step=-1}for(;b=bases[i];i+=step){m=b._meta;f=(m?m.hidden:b.prototype)[name];if(f)f.apply(this,arguments)}}}function forceNew(ctor){xtor.prototype=ctor.prototype;var t=new xtor;xtor.prototype=null;return t}function applyNew(args){var ctor=args.callee,t=forceNew(ctor);ctor.apply(t,args);return t}d.declare=function(className,superclass,props){if(typeof className!="string"){props=superclass;superclass=className;className=""}props=props||{};var proto,i,t,ctor,
name,bases,chains,mixins=1,parents=superclass;if(opts.call(superclass)=="[object Array]"){bases=c3mro(superclass,className);t=bases[0];mixins=bases.length-t;superclass=bases[mixins]}else{bases=[0];if(superclass)if(opts.call(superclass)=="[object Function]"){t=superclass._meta;bases=bases.concat(t?t.bases:superclass)}else err("base class is not a callable constructor.",className);else if(superclass!==null)err("unknown base class. Did you use dojo.require to pull it in?",className)}if(superclass)for(i=
mixins-1;;--i){proto=forceNew(superclass);if(!i)break;t=bases[i];(t._meta?mixOwn:mix)(proto,t.prototype);ctor=new Function;ctor.superclass=superclass;ctor.prototype=proto;superclass=proto.constructor=ctor}else proto={};safeMixin(proto,props);t=props.constructor;if(t!==op.constructor){t.nom=cname;proto.constructor=t}for(i=mixins-1;i;--i){t=bases[i]._meta;if(t&&t.chains)chains=mix(chains||{},t.chains)}if(proto["-chains-"])chains=mix(chains||{},proto["-chains-"]);t=!chains||!chains.hasOwnProperty(cname);
bases[0]=ctor=chains&&chains.constructor==="manual"?simpleConstructor(bases):bases.length==1?singleConstructor(props.constructor,t):chainedConstructor(bases,t);ctor._meta={bases:bases,hidden:props,chains:chains,parents:parents,ctor:props.constructor};ctor.superclass=superclass&&superclass.prototype;ctor.extend=extend;ctor.prototype=proto;proto.constructor=ctor;proto.getInherited=getInherited;proto.inherited=inherited;proto.isInstanceOf=isInstanceOf;if(className){proto.declaredClass=className;d.setObject(className,
ctor)}if(chains)for(name in chains)if(proto[name]&&typeof chains[name]=="string"&&name!=cname){t=proto[name]=chain(name,bases,chains[name]==="after");t.nom=name}return ctor};d.safeMixin=safeMixin})()}if(!dojo._hasResource["dojo._base.connect"]){dojo._hasResource["dojo._base.connect"]=true;dojo.provide("dojo._base.connect");dojo._listener={getDispatcher:function(){return function(){var ap=Array.prototype,c=arguments.callee,ls=c._listeners,t=c.target,r=t&&t.apply(this,arguments),i,lls=[].concat(ls);
for(i in lls)if(!(i in ap))lls[i].apply(this,arguments);return r}},add:function(source,method,listener){source=source||dojo.global;var f=source[method];if(!f||!f._listeners){var d=dojo._listener.getDispatcher();d.target=f;d._listeners=[];f=source[method]=d}return f._listeners.push(listener)},remove:function(source,method,handle){var f=(source||dojo.global)[method];if(f&&f._listeners&&handle--)delete f._listeners[handle]}};dojo.connect=function(obj,event,context,method,dontFix){var a=arguments,args=
[],i=0;args.push(dojo.isString(a[0])?null:a[i++],a[i++]);var a1=a[i+1];args.push(dojo.isString(a1)||dojo.isFunction(a1)?a[i++]:null,a[i++]);for(var l=a.length;i<l;i++)args.push(a[i]);return dojo._connect.apply(this,args)};dojo._connect=function(obj,event,context,method){var l=dojo._listener,h=l.add(obj,event,dojo.hitch(context,method));return[obj,event,h,l]};dojo.disconnect=function(handle){if(handle&&handle[0]!==undefined){dojo._disconnect.apply(this,handle);delete handle[0]}};dojo._disconnect=function(obj,
event,handle,listener){listener.remove(obj,event,handle)};dojo._topics={};dojo.subscribe=function(topic,context,method){return[topic,dojo._listener.add(dojo._topics,topic,dojo.hitch(context,method))]};dojo.unsubscribe=function(handle){if(handle)dojo._listener.remove(dojo._topics,handle[0],handle[1])};dojo.publish=function(topic,args){var f=dojo._topics[topic];if(f)f.apply(this,args||[])};dojo.connectPublisher=function(topic,obj,event){var pf=function(){dojo.publish(topic,arguments)};return event?
dojo.connect(obj,event,pf):dojo.connect(obj,pf)}}if(!dojo._hasResource["dojo._base.Deferred"]){dojo._hasResource["dojo._base.Deferred"]=true;dojo.provide("dojo._base.Deferred");(function(){var mutator=function(){};var freeze=Object.freeze||function(){};dojo.Deferred=function(canceller){var result,finished,isError,head,nextListener;var promise=this.promise={};function complete(value){if(finished)throw new Error("This deferred has already been resolved");result=value;finished=true;notify()}function notify(){var mutated;
while(!mutated&&nextListener){var listener=nextListener;nextListener=nextListener.next;if(mutated=listener.progress==mutator)finished=false;var func=isError?listener.error:listener.resolved;if(func)try{var newResult=func(result);if(newResult&&typeof newResult.then==="function"){newResult.then(dojo.hitch(listener.deferred,"resolve"),dojo.hitch(listener.deferred,"reject"));continue}var unchanged=mutated&&newResult===undefined;if(mutated&&!unchanged)isError=newResult instanceof Error;listener.deferred[unchanged&&
isError?"reject":"resolve"](unchanged?result:newResult)}catch(e){listener.deferred.reject(e)}else if(isError)listener.deferred.reject(result);else listener.deferred.resolve(result)}}this.resolve=this.callback=function(value){this.fired=0;this.results=[value,null];complete(value)};this.reject=this.errback=function(error){isError=true;this.fired=1;complete(error);this.results=[null,error];if(!error||error.log!==false)(dojo.config.deferredOnError||function(x){console.error(x)})(error)};this.progress=
function(update){var listener=nextListener;while(listener){var progress=listener.progress;progress&&progress(update);listener=listener.next}};this.addCallbacks=function(callback,errback){this.then(callback,errback,mutator);return this};this.then=promise.then=function(resolvedCallback,errorCallback,progressCallback){var returnDeferred=progressCallback==mutator?this:new dojo.Deferred(promise.cancel);var listener={resolved:resolvedCallback,error:errorCallback,progress:progressCallback,deferred:returnDeferred};
if(nextListener)head=head.next=listener;else nextListener=head=listener;if(finished)notify();return returnDeferred.promise};var deferred=this;this.cancel=promise.cancel=function(){if(!finished){var error=canceller&&canceller(deferred);if(!finished){if(!(error instanceof Error))error=new Error(error);error.log=false;deferred.reject(error)}}};freeze(promise)};dojo.extend(dojo.Deferred,{addCallback:function(callback){return this.addCallbacks(dojo.hitch.apply(dojo,arguments))},addErrback:function(errback){return this.addCallbacks(null,
dojo.hitch.apply(dojo,arguments))},addBoth:function(callback){var enclosed=dojo.hitch.apply(dojo,arguments);return this.addCallbacks(enclosed,enclosed)},fired:-1})})();dojo.when=function(promiseOrValue,callback,errback,progressHandler){if(promiseOrValue&&typeof promiseOrValue.then==="function")return promiseOrValue.then(callback,errback,progressHandler);return callback(promiseOrValue)}}if(!dojo._hasResource["dojo._base.json"]){dojo._hasResource["dojo._base.json"]=true;dojo.provide("dojo._base.json");
dojo.fromJson=function(json){return eval("("+json+")")};dojo._escapeString=function(str){return('"'+str.replace(/(["\\])/g,"\\$1")+'"').replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")};dojo.toJsonIndentStr="\t";dojo.toJson=function(it,prettyPrint,_indentStr){if(it===undefined)return"undefined";var objtype=typeof it;if(objtype=="number"||objtype=="boolean")return it+"";if(it===null)return"null";if(dojo.isString(it))return dojo._escapeString(it);
var recurse=arguments.callee;var newObj;_indentStr=_indentStr||"";var nextIndent=prettyPrint?_indentStr+dojo.toJsonIndentStr:"";var tf=it.__json__||it.json;if(dojo.isFunction(tf)){newObj=tf.call(it);if(it!==newObj)return recurse(newObj,prettyPrint,nextIndent)}if(it.nodeType&&it.cloneNode)throw new Error("Can't serialize DOM nodes");var sep=prettyPrint?" ":"";var newLine=prettyPrint?"\n":"";if(dojo.isArray(it)){var res=dojo.map(it,function(obj){var val=recurse(obj,prettyPrint,nextIndent);if(typeof val!=
"string")val="undefined";return newLine+nextIndent+val});return"["+res.join(","+sep)+newLine+_indentStr+"]"}if(objtype=="function")return null;var output=[],key;for(key in it){var keyStr,val;if(typeof key=="number")keyStr='"'+key+'"';else if(typeof key=="string")keyStr=dojo._escapeString(key);else continue;val=recurse(it[key],prettyPrint,nextIndent);if(typeof val!="string")continue;output.push(newLine+nextIndent+keyStr+":"+sep+val)}return"{"+output.join(","+sep)+newLine+_indentStr+"}"}}if(!dojo._hasResource["dojo._base.Color"]){dojo._hasResource["dojo._base.Color"]=
true;dojo.provide("dojo._base.Color");(function(){var d=dojo;dojo.Color=function(color){if(color)this.setColor(color)};dojo.Color.named={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],transparent:d.config.transparentColor||[255,255,255]};dojo.extend(dojo.Color,{r:255,g:255,
b:255,a:1,_set:function(r,g,b,a){var t=this;t.r=r;t.g=g;t.b=b;t.a=a},setColor:function(color){if(d.isString(color))d.colorFromString(color,this);else if(d.isArray(color))d.colorFromArray(color,this);else{this._set(color.r,color.g,color.b,color.a);if(!(color instanceof d.Color))this.sanitize()}return this},sanitize:function(){return this},toRgb:function(){var t=this;return[t.r,t.g,t.b]},toRgba:function(){var t=this;return[t.r,t.g,t.b,t.a]},toHex:function(){var arr=d.map(["r","g","b"],function(x){var s=
this[x].toString(16);return s.length<2?"0"+s:s},this);return"#"+arr.join("")},toCss:function(includeAlpha){var t=this,rgb=t.r+", "+t.g+", "+t.b;return(includeAlpha?"rgba("+rgb+", "+t.a:"rgb("+rgb)+")"},toString:function(){return this.toCss(true)}});dojo.blendColors=function(start,end,weight,obj){var t=obj||new d.Color;d.forEach(["r","g","b","a"],function(x){t[x]=start[x]+(end[x]-start[x])*weight;if(x!="a")t[x]=Math.round(t[x])});return t.sanitize()};dojo.colorFromRgb=function(color,obj){var m=color.toLowerCase().match(/^rgba?\(([\s\.,0-9]+)\)/);
return m&&dojo.colorFromArray(m[1].split(/\s*,\s*/),obj)};dojo.colorFromHex=function(color,obj){var t=obj||new d.Color,bits=color.length==4?4:8,mask=(1<<bits)-1;color=Number("0x"+color.substr(1));if(isNaN(color))return null;d.forEach(["b","g","r"],function(x){var c=color&mask;color>>=bits;t[x]=bits==4?17*c:c});t.a=1;return t};dojo.colorFromArray=function(a,obj){var t=obj||new d.Color;t._set(Number(a[0]),Number(a[1]),Number(a[2]),Number(a[3]));if(isNaN(t.a))t.a=1;return t.sanitize()};dojo.colorFromString=
function(str,obj){var a=d.Color.named[str];return a&&d.colorFromArray(a,obj)||d.colorFromRgb(str,obj)||d.colorFromHex(str,obj)}})()}if(!dojo._hasResource["dojo._base.window"]){dojo._hasResource["dojo._base.window"]=true;dojo.provide("dojo._base.window");dojo.doc=window["document"]||null;dojo.body=function(inNode){if(inNode)return inNode;return dojo.doc.body||dojo.doc.getElementsByTagName("body")[0]};dojo.setContext=function(globalObject,globalDocument){dojo.global=globalObject;dojo.doc=globalDocument};
dojo.withGlobal=function(globalObject,callback,thisObject,cbArguments){var oldGlob=dojo.global;try{dojo.global=globalObject;return dojo.withDoc.call(null,globalObject.document,callback,thisObject,cbArguments)}finally{dojo.global=oldGlob}};dojo.withDoc=function(documentObject,callback,thisObject,cbArguments){var oldDoc=dojo.doc,oldLtr=dojo._bodyLtr,oldQ=dojo.isQuirks;try{dojo.doc=documentObject;delete dojo._bodyLtr;dojo.isQuirks=dojo.doc.compatMode=="BackCompat";if(thisObject&&typeof callback=="string")callback=
thisObject[callback];return callback.apply(thisObject,cbArguments||[])}finally{dojo.doc=oldDoc;delete dojo._bodyLtr;if(oldLtr!==undefined)dojo._bodyLtr=oldLtr;dojo.isQuirks=oldQ}}}if(!dojo._hasResource["dojo._base.event"]){dojo._hasResource["dojo._base.event"]=true;dojo.provide("dojo._base.event");(function(){var del=dojo._event_listener={add:function(node,name,fp){if(!node)return;name=del._normalizeEventName(name);fp=del._fixCallback(name,fp);var oname=name;if(!dojo.isIE&&(name=="mouseenter"||name==
"mouseleave")){var ofp=fp;name=name=="mouseenter"?"mouseover":"mouseout";fp=function(e){if(!dojo.isDescendant(e.relatedTarget,node))return ofp.call(this,e)}}node.addEventListener(name,fp,false);return fp},remove:function(node,event,handle){if(node){event=del._normalizeEventName(event);if(!dojo.isIE&&(event=="mouseenter"||event=="mouseleave"))event=event=="mouseenter"?"mouseover":"mouseout";node.removeEventListener(event,handle,false)}},_normalizeEventName:function(name){return name.slice(0,2)=="on"?
name.slice(2):name},_fixCallback:function(name,fp){return name!="keypress"?fp:function(e){return fp.call(this,del._fixEvent(e,this))}},_fixEvent:function(evt,sender){switch(evt.type){case "keypress":del._setKeyChar(evt);break}return evt},_setKeyChar:function(evt){evt.keyChar=evt.charCode&&evt.charCode>32?String.fromCharCode(evt.charCode):"";evt.charOrCode=evt.keyChar||evt.keyCode},_punctMap:{106:42,111:47,186:59,187:43,188:44,189:45,190:46,191:47,192:96,219:91,220:92,221:93,222:39}};dojo.fixEvent=
function(evt,sender){return del._fixEvent(evt,sender)};dojo.stopEvent=function(evt){if(evt.preventDefault)evt.preventDefault();else evt.returnValue=false;if(evt.stopPropagation)evt.stopPropagation()};var node_listener=dojo._listener;dojo._connect=function(obj,event,context,method,dontFix){var isNode=obj&&(obj.nodeType||obj.attachEvent||obj.addEventListener);var lid=isNode?dontFix?2:1:0,l=[dojo._listener,del,node_listener][lid];var h=l.add(obj,event,dojo.hitch(context,method));return[obj,event,h,lid]};
dojo._disconnect=function(obj,event,handle,listener){[dojo._listener,del,node_listener][listener].remove(obj,event,handle)};dojo.keys={BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:dojo.isSafari?91:224,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,HELP:47,LEFT_WINDOW:91,RIGHT_WINDOW:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,
NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_PLUS:107,NUMPAD_ENTER:108,NUMPAD_MINUS:109,NUMPAD_PERIOD:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,copyKey:dojo.isMac&&!dojo.isAIR?dojo.isSafari?91:224:17};var evtCopyKey=dojo.isMac?"metaKey":"ctrlKey";dojo.isCopyKey=function(e){return e[evtCopyKey]};if(dojo.isIE<9||dojo.isIE&&dojo.isQuirks)dojo.mouseButtons={LEFT:1,
MIDDLE:4,RIGHT:2,isButton:function(e,button){return e.button&button},isLeft:function(e){return e.button&1},isMiddle:function(e){return e.button&4},isRight:function(e){return e.button&2}};else dojo.mouseButtons={LEFT:0,MIDDLE:1,RIGHT:2,isButton:function(e,button){return e.button==button},isLeft:function(e){return e.button==0},isMiddle:function(e){return e.button==1},isRight:function(e){return e.button==2}};if(dojo.isIE){var _trySetKeyCode=function(e,code){try{return e.keyCode=code}catch(e){return 0}};
var iel=dojo._listener;var listenersName=dojo._ieListenersName="_"+dojo._scopeName+"_listeners";if(!dojo.config._allow_leaks){node_listener=iel=dojo._ie_listener={handlers:[],add:function(source,method,listener){source=source||dojo.global;var f=source[method];if(!f||!f[listenersName]){var d=dojo._getIeDispatcher();d.target=f&&ieh.push(f)-1;d[listenersName]=[];f=source[method]=d}return f[listenersName].push(ieh.push(listener)-1)},remove:function(source,method,handle){var f=(source||dojo.global)[method],
l=f&&f[listenersName];if(f&&l&&handle--){delete ieh[l[handle]];delete l[handle]}}};var ieh=iel.handlers}dojo.mixin(del,{add:function(node,event,fp){if(!node)return;event=del._normalizeEventName(event);if(event=="onkeypress"){var kd=node.onkeydown;if(!kd||!kd[listenersName]||!kd._stealthKeydownHandle){var h=del.add(node,"onkeydown",del._stealthKeyDown);kd=node.onkeydown;kd._stealthKeydownHandle=h;kd._stealthKeydownRefs=1}else kd._stealthKeydownRefs++}return iel.add(node,event,del._fixCallback(fp))},
remove:function(node,event,handle){event=del._normalizeEventName(event);iel.remove(node,event,handle);if(event=="onkeypress"){var kd=node.onkeydown;if(--kd._stealthKeydownRefs<=0){iel.remove(node,"onkeydown",kd._stealthKeydownHandle);delete kd._stealthKeydownHandle}}},_normalizeEventName:function(eventName){return eventName.slice(0,2)!="on"?"on"+eventName:eventName},_nop:function(){},_fixEvent:function(evt,sender){if(!evt){var w=sender&&(sender.ownerDocument||sender.document||sender).parentWindow||
window;evt=w.event}if(!evt)return evt;evt.target=evt.srcElement;evt.currentTarget=sender||evt.srcElement;evt.layerX=evt.offsetX;evt.layerY=evt.offsetY;var se=evt.srcElement,doc=se&&se.ownerDocument||document;var docBody=dojo.isIE<6||doc["compatMode"]=="BackCompat"?doc.body:doc.documentElement;var offset=dojo._getIeDocumentElementOffset();evt.pageX=evt.clientX+dojo._fixIeBiDiScrollLeft(docBody.scrollLeft||0)-offset.x;evt.pageY=evt.clientY+(docBody.scrollTop||0)-offset.y;if(evt.type=="mouseover")evt.relatedTarget=
evt.fromElement;if(evt.type=="mouseout")evt.relatedTarget=evt.toElement;if(dojo.isIE<9||dojo.isQuirks){evt.stopPropagation=del._stopPropagation;evt.preventDefault=del._preventDefault}return del._fixKeys(evt)},_fixKeys:function(evt){switch(evt.type){case "keypress":var c="charCode"in evt?evt.charCode:evt.keyCode;if(c==10){c=0;evt.keyCode=13}else if(c==13||c==27)c=0;else if(c==3)c=99;evt.charCode=c;del._setKeyChar(evt);break}return evt},_stealthKeyDown:function(evt){var kp=evt.currentTarget.onkeypress;
if(!kp||!kp[listenersName])return;var k=evt.keyCode;var unprintable=k!=13&&k!=32&&k!=27&&(k<48||k>90)&&(k<96||k>111)&&(k<186||k>192)&&(k<219||k>222);if(unprintable||evt.ctrlKey){var c=unprintable?0:k;if(evt.ctrlKey)if(k==3||k==13)return;else if(c>95&&c<106)c-=48;else if(!evt.shiftKey&&(c>=65&&c<=90))c+=32;else c=del._punctMap[c]||c;var faux=del._synthesizeEvent(evt,{type:"keypress",faux:true,charCode:c});kp.call(evt.currentTarget,faux);evt.cancelBubble=faux.cancelBubble;evt.returnValue=faux.returnValue;
_trySetKeyCode(evt,faux.keyCode)}},_stopPropagation:function(){this.cancelBubble=true},_preventDefault:function(){this.bubbledKeyCode=this.keyCode;if(this.ctrlKey)_trySetKeyCode(this,0);this.returnValue=false}});dojo.stopEvent=dojo.isIE<9||dojo.isQuirks?function(evt){evt=evt||window.event;del._stopPropagation.call(evt);del._preventDefault.call(evt)}:dojo.stopEvent;dojo.stopEvent=dojo.isIE==9?function(evt){evt=evt||window.event;if(evt.stopPropagation)evt.stopPropagation();else evt.cancelBubble=true;
if(evt.preventDefault)evt.preventDefault();else evt.returnValue=false}:dojo.stopEvent}del._synthesizeEvent=function(evt,props){var faux=dojo.mixin({},evt,props);del._setKeyChar(faux);faux.preventDefault=function(){evt.preventDefault()};faux.stopPropagation=function(){evt.stopPropagation()};return faux};if(dojo.isOpera)dojo.mixin(del,{_fixEvent:function(evt,sender){switch(evt.type){case "keypress":var c=evt.which;if(c==3)c=99;c=c<41&&!evt.shiftKey?0:c;if(evt.ctrlKey&&!evt.shiftKey&&c>=65&&c<=90)c+=
32;return del._synthesizeEvent(evt,{charCode:c})}return evt}});if(dojo.isWebKit){del._add=del.add;del._remove=del.remove;dojo.mixin(del,{add:function(node,event,fp){if(!node)return;var handle=del._add(node,event,fp);if(del._normalizeEventName(event)=="keypress")handle._stealthKeyDownHandle=del._add(node,"keydown",function(evt){var k=evt.keyCode;var unprintable=k!=13&&k!=32&&(k<48||k>90)&&(k<96||k>111)&&(k<186||k>192)&&(k<219||k>222);if(unprintable||evt.ctrlKey){var c=unprintable?0:k;if(evt.ctrlKey)if(k==
3||k==13)return;else if(c>95&&c<106)c-=48;else if(!evt.shiftKey&&c>=65&&c<=90)c+=32;else c=del._punctMap[c]||c;var faux=del._synthesizeEvent(evt,{type:"keypress",faux:true,charCode:c});fp.call(evt.currentTarget,faux)}});return handle},remove:function(node,event,handle){if(node){if(handle._stealthKeyDownHandle)del._remove(node,"keydown",handle._stealthKeyDownHandle);del._remove(node,event,handle)}},_fixEvent:function(evt,sender){switch(evt.type){case "keypress":if(evt.faux)return evt;var c=evt.charCode;
c=c>=32?c:0;return del._synthesizeEvent(evt,{charCode:c,faux:true})}return evt}})}})();if(dojo.isIE){dojo._ieDispatcher=function(args,sender){var ap=Array.prototype,h=dojo._ie_listener.handlers,c=args.callee,ls=c[dojo._ieListenersName],t=h[c.target];var r=t&&t.apply(sender,args);var lls=[].concat(ls);for(var i in lls){var f=h[lls[i]];if(!(i in ap)&&f)f.apply(sender,args)}return r};dojo._getIeDispatcher=function(){return new Function("ITHit.Components."+dojo._scopeName+"._ieDispatcher(arguments, this)")};
dojo._event_listener._fixCallback=function(fp){var f=dojo._event_listener._fixEvent;return function(e){return fp.call(this,f(e,this))}}}}if(!dojo._hasResource["dojo._base.html"]){dojo._hasResource["dojo._base.html"]=true;dojo.provide("dojo._base.html");try{document.execCommand("BackgroundImageCache",false,true)}catch(e){}if(dojo.isIE)dojo.byId=function(id,doc){if(typeof id!="string")return id;var _d=doc||dojo.doc,te=_d.getElementById(id);if(te&&(te.attributes.id.value==id||te.id==id))return te;else{var eles=
_d.all[id];if(!eles||eles.nodeName)eles=[eles];var i=0;while(te=eles[i++])if(te.attributes&&te.attributes.id&&te.attributes.id.value==id||te.id==id)return te}};else dojo.byId=function(id,doc){return(typeof id=="string"?(doc||dojo.doc).getElementById(id):id)||null};(function(){var d=dojo;var byId=d.byId;var _destroyContainer=null,_destroyDoc;d.addOnWindowUnload(function(){_destroyContainer=null});dojo._destroyElement=dojo.destroy=function(node){node=byId(node);try{var doc=node.ownerDocument;if(!_destroyContainer||
_destroyDoc!=doc){_destroyContainer=doc.createElement("div");_destroyDoc=doc}_destroyContainer.appendChild(node.parentNode?node.parentNode.removeChild(node):node);_destroyContainer.innerHTML=""}catch(e){}};dojo.isDescendant=function(node,ancestor){try{node=byId(node);ancestor=byId(ancestor);while(node){if(node==ancestor)return true;node=node.parentNode}}catch(e){}return false};dojo.setSelectable=function(node,selectable){node=byId(node);if(d.isMozilla)node.style.MozUserSelect=selectable?"":"none";
else if(d.isKhtml||d.isWebKit)node.style.KhtmlUserSelect=selectable?"auto":"none";else if(d.isIE){var v=node.unselectable=selectable?"":"on";d.query("*",node).forEach("item.unselectable = '"+v+"'")}};var _insertBefore=function(node,ref){var parent=ref.parentNode;if(parent)parent.insertBefore(node,ref)};var _insertAfter=function(node,ref){var parent=ref.parentNode;if(parent)if(parent.lastChild==ref)parent.appendChild(node);else parent.insertBefore(node,ref.nextSibling)};dojo.place=function(node,refNode,
position){refNode=byId(refNode);if(typeof node=="string")node=/^\s*</.test(node)?d._toDom(node,refNode.ownerDocument):byId(node);if(typeof position=="number"){var cn=refNode.childNodes;if(!cn.length||cn.length<=position)refNode.appendChild(node);else _insertBefore(node,cn[position<0?0:position])}else switch(position){case "before":_insertBefore(node,refNode);break;case "after":_insertAfter(node,refNode);break;case "replace":refNode.parentNode.replaceChild(node,refNode);break;case "only":d.empty(refNode);
refNode.appendChild(node);break;case "first":if(refNode.firstChild){_insertBefore(node,refNode.firstChild);break}default:refNode.appendChild(node)}return node};dojo.boxModel="content-box";if(d.isIE)d.boxModel=document.compatMode=="BackCompat"?"border-box":"content-box";var gcs;if(d.isWebKit)gcs=function(node){var s;if(node.nodeType==1){var dv=node.ownerDocument.defaultView;s=dv.getComputedStyle(node,null);if(!s&&node.style){node.style.display="";s=dv.getComputedStyle(node,null)}}return s||{}};else if(d.isIE)gcs=
function(node){return node.nodeType==1?node.currentStyle:{}};else gcs=function(node){return node.nodeType==1?node.ownerDocument.defaultView.getComputedStyle(node,null):{}};dojo.getComputedStyle=gcs;if(!d.isIE)d._toPixelValue=function(element,value){return parseFloat(value)||0};else d._toPixelValue=function(element,avalue){if(!avalue)return 0;if(avalue=="medium")return 4;if(avalue.slice&&avalue.slice(-2)=="px")return parseFloat(avalue);with(element){var sLeft=style.left;var rsLeft=runtimeStyle.left;
runtimeStyle.left=currentStyle.left;try{style.left=avalue;avalue=style.pixelLeft}catch(e){avalue=0}style.left=sLeft;runtimeStyle.left=rsLeft}return avalue};var px=d._toPixelValue;var astr="DXImageTransform.Microsoft.Alpha";var af=function(n,f){try{return n.filters.item(astr)}catch(e){return f?{}:null}};dojo._getOpacity=d.isIE?function(node){try{return af(node).Opacity/100}catch(e){return 1}}:function(node){return gcs(node).opacity};dojo._setOpacity=d.isIE?function(node,opacity){var ov=opacity*100,
opaque=opacity==1;node.style.zoom=opaque?"":1;if(!af(node)){if(opaque)return opacity;node.style.filter+=" progid:"+astr+"(Opacity="+ov+")"}else af(node,1).Opacity=ov;af(node,1).Enabled=!opaque;if(node.nodeName.toLowerCase()=="tr")d.query("> td",node).forEach(function(i){d._setOpacity(i,opacity)});return opacity}:function(node,opacity){return node.style.opacity=opacity};var _pixelNamesCache={left:true,top:true};var _pixelRegExp=/margin|padding|width|height|max|min|offset/;var _toStyleValue=function(node,
type,value){type=type.toLowerCase();if(d.isIE){if(value=="auto"){if(type=="height")return node.offsetHeight;if(type=="width")return node.offsetWidth}if(type=="fontweight")switch(value){case 700:return"bold";case 400:default:return"normal"}}if(!(type in _pixelNamesCache))_pixelNamesCache[type]=_pixelRegExp.test(type);return _pixelNamesCache[type]?px(node,value):value};var _floatStyle=d.isIE?"styleFloat":"cssFloat",_floatAliases={"cssFloat":_floatStyle,"styleFloat":_floatStyle,"float":_floatStyle};
dojo.style=function(node,style,value){var n=byId(node),args=arguments.length,op=style=="opacity";style=_floatAliases[style]||style;if(args==3)return op?d._setOpacity(n,value):n.style[style]=value;if(args==2&&op)return d._getOpacity(n);var s=gcs(n);if(args==2&&typeof style!="string"){for(var x in style)d.style(node,x,style[x]);return s}return args==1?s:_toStyleValue(n,style,s[style]||n.style[style])};dojo._getPadExtents=function(n,computedStyle){var s=computedStyle||gcs(n),l=px(n,s.paddingLeft),t=
px(n,s.paddingTop);return{l:l,t:t,w:l+px(n,s.paddingRight),h:t+px(n,s.paddingBottom)}};dojo._getBorderExtents=function(n,computedStyle){var ne="none",s=computedStyle||gcs(n),bl=s.borderLeftStyle!=ne?px(n,s.borderLeftWidth):0,bt=s.borderTopStyle!=ne?px(n,s.borderTopWidth):0;return{l:bl,t:bt,w:bl+(s.borderRightStyle!=ne?px(n,s.borderRightWidth):0),h:bt+(s.borderBottomStyle!=ne?px(n,s.borderBottomWidth):0)}};dojo._getPadBorderExtents=function(n,computedStyle){var s=computedStyle||gcs(n),p=d._getPadExtents(n,
s),b=d._getBorderExtents(n,s);return{l:p.l+b.l,t:p.t+b.t,w:p.w+b.w,h:p.h+b.h}};dojo._getMarginExtents=function(n,computedStyle){var s=computedStyle||gcs(n),l=px(n,s.marginLeft),t=px(n,s.marginTop),r=px(n,s.marginRight),b=px(n,s.marginBottom);if(d.isWebKit&&s.position!="absolute")r=l;return{l:l,t:t,w:l+r,h:t+b}};dojo._getMarginBox=function(node,computedStyle){var s=computedStyle||gcs(node),me=d._getMarginExtents(node,s);var l=node.offsetLeft-me.l,t=node.offsetTop-me.t,p=node.parentNode;if(d.isMoz){var sl=
parseFloat(s.left),st=parseFloat(s.top);if(!isNaN(sl)&&!isNaN(st))l=sl,t=st;else if(p&&p.style){var pcs=gcs(p);if(pcs.overflow!="visible"){var be=d._getBorderExtents(p,pcs);l+=be.l,t+=be.t}}}else if(d.isOpera||d.isIE>7&&!d.isQuirks)if(p){be=d._getBorderExtents(p);l-=be.l;t-=be.t}return{l:l,t:t,w:node.offsetWidth+me.w,h:node.offsetHeight+me.h}};dojo._getMarginSize=function(node,computedStyle){node=byId(node);var me=d._getMarginExtents(node,computedStyle||gcs(node));var size=node.getBoundingClientRect();
return{w:size.right-size.left+me.w,h:size.bottom-size.top+me.h}};dojo._getContentBox=function(node,computedStyle){var s=computedStyle||gcs(node),pe=d._getPadExtents(node,s),be=d._getBorderExtents(node,s),w=node.clientWidth,h;if(!w)w=node.offsetWidth,h=node.offsetHeight;else h=node.clientHeight,be.w=be.h=0;if(d.isOpera){pe.l+=be.l;pe.t+=be.t}return{l:pe.l,t:pe.t,w:w-pe.w-be.w,h:h-pe.h-be.h}};dojo._getBorderBox=function(node,computedStyle){var s=computedStyle||gcs(node),pe=d._getPadExtents(node,s),
cb=d._getContentBox(node,s);return{l:cb.l-pe.l,t:cb.t-pe.t,w:cb.w+pe.w,h:cb.h+pe.h}};dojo._getAbsolutePositionedElementsOffset=function(node){var body=dojo.body(),offsetX=0,offsetY=0;while(node&&node!==body){var elementStyle=dojo.getComputedStyle(node);offsetX+=parseInt(elementStyle.left)||0;offsetY+=parseInt(elementStyle.top)||0;node=node.parentNode}return{x:offsetX,y:offsetY}};dojo._setBox=function(node,l,t,w,h,u){u=u||"px";var s=node.style;if(!isNaN(l))s.left=l+u;if(!isNaN(t))s.top=t+u;if(w>=0)s.width=
w+u;if(h>=0)s.height=h+u};dojo._isButtonTag=function(node){return node.tagName=="BUTTON"||node.tagName=="INPUT"&&(node.getAttribute("type")||"").toUpperCase()=="BUTTON"};dojo._usesBorderBox=function(node){var n=node.tagName;return d.boxModel=="border-box"||n=="TABLE"||d._isButtonTag(node)};dojo._setContentSize=function(node,widthPx,heightPx,computedStyle){if(d._usesBorderBox(node)){var pb=d._getPadBorderExtents(node,computedStyle);if(widthPx>=0)widthPx+=pb.w;if(heightPx>=0)heightPx+=pb.h}d._setBox(node,
NaN,NaN,widthPx,heightPx)};dojo._setMarginBox=function(node,leftPx,topPx,widthPx,heightPx,computedStyle){var s=computedStyle||gcs(node),bb=d._usesBorderBox(node),pb=bb?_nilExtents:d._getPadBorderExtents(node,s);if(d.isWebKit)if(d._isButtonTag(node)){var ns=node.style;if(widthPx>=0&&!ns.width)ns.width="4px";if(heightPx>=0&&!ns.height)ns.height="4px"}var mb=d._getMarginExtents(node,s);if(widthPx>=0)widthPx=Math.max(widthPx-pb.w-mb.w,0);if(heightPx>=0)heightPx=Math.max(heightPx-pb.h-mb.h,0);d._setBox(node,
leftPx,topPx,widthPx,heightPx)};var _nilExtents={l:0,t:0,w:0,h:0};dojo.marginBox=function(node,box){var n=byId(node),s=gcs(n),b=box;if(d.isIE>8&&b){if(b.w==undefined){var bw=_computeNewWidth(s);if(bw)b.w=bw}if(b.h==undefined){var bh=_computeNewHeight(s);if(bh)b.h=bh}}return!b?d._getMarginBox(n,s):d._setMarginBox(n,b.l,b.t,b.w,b.h,s)};_computeNewHeight=function(s){try{var d=_computeDistance(s.height);d+=_computeDistance(s.borderTopWidth);d+=_computeDistance(s.borderBottomWidth);d+=_computeDistance(s.paddingTop);
d+=_computeDistance(s.paddingBottom);d+=_computeDistance(s.marginLeft);d+=_computeDistance(s.marginRight);return isNaN(d)?undefined:d}catch(e){console.warn("[_getNewHeight] "+e);return undefined}};_computeNewWidth=function(s){try{var d=_computeDistance(s.width);d+=_computeDistance(s.borderRightWidth);d+=_computeDistance(s.borderLeftWidth);d+=_computeDistance(s.paddingLeft);d+=_computeDistance(s.paddingRight);d+=_computeDistance(s.marginTop);d+=_computeDistance(s.marginBottom);return d}catch(e){console.warn("[_getNewWidth] "+
e);return undefined}};_computeDistance=function(avalue){if(avalue&&avalue.slice&&avalue.slice(-2)=="px"){var val=parseFloat(avalue);if(!isNaN(val))return val}return undefined};dojo.contentBox=function(node,box){var n=byId(node),s=gcs(n),b=box;return!b?d._getContentBox(n,s):d._setContentSize(n,b.w,b.h,s)};var _sumAncestorProperties=function(node,prop){if(!(node=(node||0).parentNode))return 0;var val,retVal=0,_b=d.body();while(node&&node.style){if(gcs(node).position=="fixed")return 0;val=node[prop];
if(val){retVal+=val-0;if(node==_b)break}node=node.parentNode}return retVal};dojo._docScroll=function(){var n=d.global;return"pageXOffset"in n?{x:n.pageXOffset,y:n.pageYOffset}:(n=d.isQuirks?d.doc.body:d.doc.documentElement,{x:d._fixIeBiDiScrollLeft(n.scrollLeft||0),y:n.scrollTop||0})};dojo._isBodyLtr=function(){return"_bodyLtr"in d?d._bodyLtr:d._bodyLtr=(d.body().dir||d.doc.documentElement.dir||"ltr").toLowerCase()=="ltr"};dojo._getIeDocumentElementOffset=function(){var de=d.doc.documentElement;if(d.isIE<
8){var r=de.getBoundingClientRect();var l=r.left,t=r.top;if(d.isIE<7){l+=de.clientLeft;t+=de.clientTop}return{x:l<0?0:l,y:t<0?0:t}}else return{x:0,y:0}};dojo._fixIeBiDiScrollLeft=function(scrollLeft){var ie=d.isIE;if(ie&&!d._isBodyLtr()){var qk=d.isQuirks,de=qk?d.doc.body:d.doc.documentElement;if(ie==6&&!qk&&d.global.frameElement&&de.scrollHeight>de.clientHeight)scrollLeft+=de.clientLeft;return ie<8||qk?scrollLeft+de.clientWidth-de.scrollWidth:-scrollLeft}return scrollLeft};dojo._abs=dojo.position=
function(node,includeScroll){node=byId(node);var db=d.body(),dh=db.parentNode,ret=node.getBoundingClientRect();ret={x:ret.left,y:ret.top,w:ret.right-ret.left,h:ret.bottom-ret.top};if(d.isIE){var offset=d._getIeDocumentElementOffset();ret.x-=offset.x+(d.isQuirks?db.clientLeft+db.offsetLeft:0);ret.y-=offset.y+(d.isQuirks?db.clientTop+db.offsetTop:0)}else if(d.isFF==3){var cs=gcs(dh);ret.x-=px(dh,cs.marginLeft)+px(dh,cs.borderLeftWidth);ret.y-=px(dh,cs.marginTop)+px(dh,cs.borderTopWidth)}if(includeScroll){var scroll=
d._docScroll();ret.x+=scroll.x;ret.y+=scroll.y}return ret};dojo.coords=function(node,includeScroll){var n=byId(node),s=gcs(n),mb=d._getMarginBox(n,s);var abs=d.position(n,includeScroll);mb.x=abs.x;mb.y=abs.y;return mb};var _propNames={"class":"className","for":"htmlFor",tabindex:"tabIndex",readonly:"readOnly",colspan:"colSpan",frameborder:"frameBorder",rowspan:"rowSpan",valuetype:"valueType"},_attrNames={classname:"class",htmlfor:"for",tabindex:"tabIndex",readonly:"readOnly"},_forcePropNames={innerHTML:1,
className:1,htmlFor:d.isIE,value:1};var _fixAttrName=function(name){return _attrNames[name.toLowerCase()]||name};var _hasAttr=function(node,name){var attr=node.getAttributeNode&&node.getAttributeNode(name);return attr&&attr.specified};dojo.hasAttr=function(node,name){var lc=name.toLowerCase();return _forcePropNames[_propNames[lc]||name]||_hasAttr(byId(node),_attrNames[lc]||name)};var _evtHdlrMap={},_ctr=0,_attrId=dojo._scopeName+"attrid",_roInnerHtml={col:1,colgroup:1,table:1,tbody:1,tfoot:1,thead:1,
tr:1,title:1};dojo.attr=function(node,name,value){node=byId(node);var args=arguments.length,prop;if(args==2&&typeof name!="string"){for(var x in name)d.attr(node,x,name[x]);return node}var lc=name.toLowerCase(),propName=_propNames[lc]||name,forceProp=_forcePropNames[propName],attrName=_attrNames[lc]||name;if(args==3){do{if(propName=="style"&&typeof value!="string"){d.style(node,value);break}if(propName=="innerHTML"){if(d.isIE&&node.tagName.toLowerCase()in _roInnerHtml){d.empty(node);node.appendChild(d._toDom(value,
node.ownerDocument))}else node[propName]=value;break}if(d.isFunction(value)){var attrId=d.attr(node,_attrId);if(!attrId){attrId=_ctr++;d.attr(node,_attrId,attrId)}if(!_evtHdlrMap[attrId])_evtHdlrMap[attrId]={};var h=_evtHdlrMap[attrId][propName];if(h)d.disconnect(h);else try{delete node[propName]}catch(e){}_evtHdlrMap[attrId][propName]=d.connect(node,propName,value);break}if(forceProp||typeof value=="boolean"){node[propName]=value;break}node.setAttribute(attrName,value)}while(false);return node}value=
node[propName];if(forceProp&&typeof value!="undefined")return value;if(propName!="href"&&(typeof value=="boolean"||d.isFunction(value)))return value;return _hasAttr(node,attrName)?node.getAttribute(attrName):null};dojo.removeAttr=function(node,name){byId(node).removeAttribute(_fixAttrName(name))};dojo.getNodeProp=function(node,name){node=byId(node);var lc=name.toLowerCase(),propName=_propNames[lc]||name;if(propName in node&&propName!="href")return node[propName];var attrName=_attrNames[lc]||name;
return _hasAttr(node,attrName)?node.getAttribute(attrName):null};dojo.create=function(tag,attrs,refNode,pos){var doc=d.doc;if(refNode){refNode=byId(refNode);doc=refNode.ownerDocument}if(typeof tag=="string")tag=doc.createElement(tag);if(attrs)d.attr(tag,attrs);if(refNode)d.place(tag,refNode,pos);return tag};d.empty=d.isIE?function(node){node=byId(node);for(var c;c=node.lastChild;)d.destroy(c)}:function(node){byId(node).innerHTML=""};var tagWrap={option:["select"],tbody:["table"],thead:["table"],tfoot:["table"],
tr:["table","tbody"],td:["table","tbody","tr"],th:["table","thead","tr"],legend:["fieldset"],caption:["table"],colgroup:["table"],col:["table","colgroup"],li:["ul"]},reTag=/<\s*([\w:]+)/,masterNode={},masterNum=0,masterName="__"+d._scopeName+"ToDomId";for(var param in tagWrap)if(tagWrap.hasOwnProperty(param)){var tw=tagWrap[param];tw.pre=param=="option"?'<select multiple="multiple">':"<"+tw.join("><")+">";tw.post="</"+tw.reverse().join("></")+">"}d._toDom=function(frag,doc){doc=doc||d.doc;var masterId=
doc[masterName];if(!masterId){doc[masterName]=masterId=++masterNum+"";masterNode[masterId]=doc.createElement("div")}frag+="";var match=frag.match(reTag),tag=match?match[1].toLowerCase():"",master=masterNode[masterId],wrap,i,fc,df;if(match&&tagWrap[tag]){wrap=tagWrap[tag];master.innerHTML=wrap.pre+frag+wrap.post;for(i=wrap.length;i;--i)master=master.firstChild}else master.innerHTML=frag;if(master.childNodes.length==1)return master.removeChild(master.firstChild);df=doc.createDocumentFragment();while(fc=
master.firstChild)df.appendChild(fc);return df};var _className="className";dojo.hasClass=function(node,classStr){return(" "+byId(node)[_className]+" ").indexOf(" "+classStr+" ")>=0};var spaces=/\s+/,a1=[""],fakeNode={},str2array=function(s){if(typeof s=="string"||s instanceof String)if(s.indexOf(" ")<0){a1[0]=s;return a1}else return s.split(spaces);return s||""};dojo.addClass=function(node,classStr){if(!node)return;node=byId(node);classStr=str2array(classStr);var cls=node[_className],oldLen;cls=cls?
" "+cls+" ":" ";oldLen=cls.length;for(var i=0,len=classStr.length,c;i<len;++i){c=classStr[i];if(c&&cls.indexOf(" "+c+" ")<0)cls+=c+" "}if(oldLen<cls.length)node[_className]=cls.substr(1,cls.length-2)};dojo.removeClass=function(node,classStr){if(!node)return;node=byId(node);var cls;if(classStr!==undefined){classStr=str2array(classStr);cls=" "+node[_className]+" ";for(var i=0,len=classStr.length;i<len;++i)cls=cls.replace(" "+classStr[i]+" "," ");cls=d.trim(cls)}else cls="";if(node[_className]!=cls)node[_className]=
cls};dojo.replaceClass=function(node,addClassStr,removeClassStr){node=byId(node);fakeNode.className=node.className;dojo.removeClass(fakeNode,removeClassStr);dojo.addClass(fakeNode,addClassStr);if(node.className!==fakeNode.className)node.className=fakeNode.className};dojo.toggleClass=function(node,classStr,condition){if(condition===undefined)condition=!d.hasClass(node,classStr);d[condition?"addClass":"removeClass"](node,classStr)}})()}if(!dojo._hasResource["dojo._base.NodeList"]){dojo._hasResource["dojo._base.NodeList"]=
true;dojo.provide("dojo._base.NodeList");(function(){var d=dojo;var ap=Array.prototype,aps=ap.slice,apc=ap.concat;var tnl=function(a,parent,NodeListCtor){if(!a.sort)a=aps.call(a,0);var ctor=NodeListCtor||this._NodeListCtor||d._NodeListCtor;a.constructor=ctor;dojo._mixin(a,ctor.prototype);a._NodeListCtor=ctor;return parent?a._stash(parent):a};var loopBody=function(f,a,o){a=[0].concat(aps.call(a,0));o=o||d.global;return function(node){a[0]=node;return f.apply(o,a)}};var adaptAsForEach=function(f,o){return function(){this.forEach(loopBody(f,
arguments,o));return this}};var adaptAsMap=function(f,o){return function(){return this.map(loopBody(f,arguments,o))}};var adaptAsFilter=function(f,o){return function(){return this.filter(loopBody(f,arguments,o))}};var adaptWithCondition=function(f,g,o){return function(){var a=arguments,body=loopBody(f,a,o);if(g.call(o||d.global,a))return this.map(body);this.forEach(body);return this}};var magicGuard=function(a){return a.length==1&&typeof a[0]=="string"};var orphan=function(node){var p=node.parentNode;
if(p)p.removeChild(node)};dojo.NodeList=function(){return tnl(Array.apply(null,arguments))};d._NodeListCtor=d.NodeList;var nl=d.NodeList,nlp=nl.prototype;nl._wrap=nlp._wrap=tnl;nl._adaptAsMap=adaptAsMap;nl._adaptAsForEach=adaptAsForEach;nl._adaptAsFilter=adaptAsFilter;nl._adaptWithCondition=adaptWithCondition;d.forEach(["slice","splice"],function(name){var f=ap[name];nlp[name]=function(){return this._wrap(f.apply(this,arguments),name=="slice"?this:null)}});d.forEach(["indexOf","lastIndexOf","every",
"some"],function(name){var f=d[name];nlp[name]=function(){return f.apply(d,[this].concat(aps.call(arguments,0)))}});d.forEach(["attr","style"],function(name){nlp[name]=adaptWithCondition(d[name],magicGuard)});d.forEach(["connect","addClass","removeClass","replaceClass","toggleClass","empty","removeAttr"],function(name){nlp[name]=adaptAsForEach(d[name])});dojo.extend(dojo.NodeList,{_normalize:function(content,refNode){var parse=content.parse===true?true:false;if(typeof content.template=="string"){var templateFunc=
content.templateFunc||dojo.string&&dojo.string.substitute;content=templateFunc?templateFunc(content.template,content):content}var type=typeof content;if(type=="string"||type=="number"){content=dojo._toDom(content,refNode&&refNode.ownerDocument);if(content.nodeType==11)content=dojo._toArray(content.childNodes);else content=[content]}else if(!dojo.isArrayLike(content))content=[content];else if(!dojo.isArray(content))content=dojo._toArray(content);if(parse)content._runParse=true;return content},_cloneNode:function(node){return node.cloneNode(true)},
_place:function(ary,refNode,position,useClone){if(refNode.nodeType!=1&&position=="only")return;var rNode=refNode,tempNode;var length=ary.length;for(var i=length-1;i>=0;i--){var node=useClone?this._cloneNode(ary[i]):ary[i];if(ary._runParse&&dojo.parser&&dojo.parser.parse){if(!tempNode)tempNode=rNode.ownerDocument.createElement("div");tempNode.appendChild(node);dojo.parser.parse(tempNode);node=tempNode.firstChild;while(tempNode.firstChild)tempNode.removeChild(tempNode.firstChild)}if(i==length-1)dojo.place(node,
rNode,position);else rNode.parentNode.insertBefore(node,rNode);rNode=node}},_stash:function(parent){this._parent=parent;return this},end:function(){if(this._parent)return this._parent;else return new this._NodeListCtor},concat:function(item){var t=d.isArray(this)?this:aps.call(this,0),m=d.map(arguments,function(a){return a&&!d.isArray(a)&&(typeof NodeList!="undefined"&&a.constructor===NodeList||a.constructor===this._NodeListCtor)?aps.call(a,0):a});return this._wrap(apc.apply(t,m),this)},map:function(func,
obj){return this._wrap(d.map(this,func,obj),this)},forEach:function(callback,thisObj){d.forEach(this,callback,thisObj);return this},coords:adaptAsMap(d.coords),position:adaptAsMap(d.position),place:function(queryOrNode,position){var item=d.query(queryOrNode)[0];return this.forEach(function(node){d.place(node,item,position)})},orphan:function(filter){return(filter?d._filterQueryResult(this,filter):this).forEach(orphan)},adopt:function(queryOrListOrNode,position){return d.query(queryOrListOrNode).place(this[0],
position)._stash(this)},query:function(queryStr){if(!queryStr)return this;var ret=this.map(function(node){return d.query(queryStr,node).filter(function(subNode){return subNode!==undefined})});return this._wrap(apc.apply([],ret),this)},filter:function(filter){var a=arguments,items=this,start=0;if(typeof filter=="string"){items=d._filterQueryResult(this,a[0]);if(a.length==1)return items._stash(this);start=1}return this._wrap(d.filter(items,a[start],a[start+1]),this)},addContent:function(content,position){content=
this._normalize(content,this[0]);for(var i=0,node;node=this[i];i++)this._place(content,node,position,i>0);return this},instantiate:function(declaredClass,properties){var c=d.isFunction(declaredClass)?declaredClass:d.getObject(declaredClass);properties=properties||{};return this.forEach(function(node){new c(properties,node)})},at:function(){var t=new this._NodeListCtor;d.forEach(arguments,function(i){if(i<0)i=this.length+i;if(this[i])t.push(this[i])},this);return t._stash(this)}});nl.events=["blur",
"focus","change","click","error","keydown","keypress","keyup","load","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","submit"];d.forEach(nl.events,function(evt){var _oe="on"+evt;nlp[_oe]=function(a,b){return this.connect(_oe,a,b)}})})()}if(!dojo._hasResource["dojo._base.query"]){dojo._hasResource["dojo._base.query"]=true;(function(){var defineQuery=function(d){var trim=d.trim;var each=d.forEach;var qlc=d._NodeListCtor=d.NodeList;var getDoc=function(){return d.doc};
var cssCaseBug=(d.isWebKit||d.isMozilla)&&getDoc().compatMode=="BackCompat";var childNodesName=!!getDoc().firstChild["children"]?"children":"childNodes";var specials=">~+";var caseSensitive=false;var yesman=function(){return true};var getQueryParts=function(query){if(specials.indexOf(query.slice(-1))>=0)query+=" * ";else query+=" ";var ts=function(s,e){return trim(query.slice(s,e))};var queryParts=[];var inBrackets=-1,inParens=-1,inMatchFor=-1,inPseudo=-1,inClass=-1,inId=-1,inTag=-1,lc="",cc="",pStart;
var x=0,ql=query.length,currentPart=null,_cp=null;var endTag=function(){if(inTag>=0){var tv=inTag==x?null:ts(inTag,x);currentPart[specials.indexOf(tv)<0?"tag":"oper"]=tv;inTag=-1}};var endId=function(){if(inId>=0){currentPart.id=ts(inId,x).replace(/\\/g,"");inId=-1}};var endClass=function(){if(inClass>=0){currentPart.classes.push(ts(inClass+1,x).replace(/\\/g,""));inClass=-1}};var endAll=function(){endId();endTag();endClass()};var endPart=function(){endAll();if(inPseudo>=0)currentPart.pseudos.push({name:ts(inPseudo+
1,x)});currentPart.loops=currentPart.pseudos.length||currentPart.attrs.length||currentPart.classes.length;currentPart.oquery=currentPart.query=ts(pStart,x);currentPart.otag=currentPart.tag=currentPart["oper"]?null:currentPart.tag||"*";if(currentPart.tag)currentPart.tag=currentPart.tag.toUpperCase();if(queryParts.length&&queryParts[queryParts.length-1].oper){currentPart.infixOper=queryParts.pop();currentPart.query=currentPart.infixOper.query+" "+currentPart.query}queryParts.push(currentPart);currentPart=
null};for(;lc=cc,cc=query.charAt(x),x<ql;x++){if(lc=="\\")continue;if(!currentPart){pStart=x;currentPart={query:null,pseudos:[],attrs:[],classes:[],tag:null,oper:null,id:null,getTag:function(){return caseSensitive?this.otag:this.tag}};inTag=x}if(inBrackets>=0)if(cc=="]"){if(!_cp.attr)_cp.attr=ts(inBrackets+1,x);else _cp.matchFor=ts(inMatchFor||inBrackets+1,x);var cmf=_cp.matchFor;if(cmf)if(cmf.charAt(0)=='"'||cmf.charAt(0)=="'")_cp.matchFor=cmf.slice(1,-1);currentPart.attrs.push(_cp);_cp=null;inBrackets=
inMatchFor=-1}else{if(cc=="="){var addToCc="|~^$*".indexOf(lc)>=0?lc:"";_cp.type=addToCc+cc;_cp.attr=ts(inBrackets+1,x-addToCc.length);inMatchFor=x+1}}else if(inParens>=0){if(cc==")"){if(inPseudo>=0)_cp.value=ts(inParens+1,x);inPseudo=inParens=-1}}else if(cc=="#"){endAll();inId=x+1}else if(cc=="."){endAll();inClass=x}else if(cc==":"){endAll();inPseudo=x}else if(cc=="["){endAll();inBrackets=x;_cp={}}else if(cc=="("){if(inPseudo>=0){_cp={name:ts(inPseudo+1,x),value:null};currentPart.pseudos.push(_cp)}inParens=
x}else if(cc==" "&&lc!=cc)endPart()}return queryParts};var agree=function(first,second){if(!first)return second;if(!second)return first;return function(){return first.apply(window,arguments)&&second.apply(window,arguments)}};var getArr=function(i,arr){var r=arr||[];if(i)r.push(i);return r};var _isElement=function(n){return 1==n.nodeType};var blank="";var _getAttr=function(elem,attr){if(!elem)return blank;if(attr=="class")return elem.className||blank;if(attr=="for")return elem.htmlFor||blank;if(attr==
"style")return elem.style.cssText||blank;return(caseSensitive?elem.getAttribute(attr):elem.getAttribute(attr,2))||blank};var attrs={"*=":function(attr,value){return function(elem){return _getAttr(elem,attr).indexOf(value)>=0}},"^=":function(attr,value){return function(elem){return _getAttr(elem,attr).indexOf(value)==0}},"$=":function(attr,value){var tval=" "+value;return function(elem){var ea=" "+_getAttr(elem,attr);return ea.lastIndexOf(value)==ea.length-value.length}},"~=":function(attr,value){var tval=
" "+value+" ";return function(elem){var ea=" "+_getAttr(elem,attr)+" ";return ea.indexOf(tval)>=0}},"|=":function(attr,value){var valueDash=" "+value+"-";return function(elem){var ea=" "+_getAttr(elem,attr);return ea==value||ea.indexOf(valueDash)==0}},"=":function(attr,value){return function(elem){return _getAttr(elem,attr)==value}}};var _noNES=typeof getDoc().firstChild.nextElementSibling=="undefined";var _ns=!_noNES?"nextElementSibling":"nextSibling";var _ps=!_noNES?"previousElementSibling":"previousSibling";
var _simpleNodeTest=_noNES?_isElement:yesman;var _lookLeft=function(node){while(node=node[_ps])if(_simpleNodeTest(node))return false;return true};var _lookRight=function(node){while(node=node[_ns])if(_simpleNodeTest(node))return false;return true};var getNodeIndex=function(node){var root=node.parentNode;var i=0,tret=root[childNodesName],ci=node["_i"]||-1,cl=root["_l"]||-1;if(!tret)return-1;var l=tret.length;if(cl==l&&ci>=0&&cl>=0)return ci;root["_l"]=l;ci=-1;for(var te=root["firstElementChild"]||
root["firstChild"];te;te=te[_ns])if(_simpleNodeTest(te)){te["_i"]=++i;if(node===te)ci=i}return ci};var isEven=function(elem){return!(getNodeIndex(elem)%2)};var isOdd=function(elem){return getNodeIndex(elem)%2};var pseudos={"checked":function(name,condition){return function(elem){return!!("checked"in elem?elem.checked:elem.selected)}},"first-child":function(){return _lookLeft},"last-child":function(){return _lookRight},"only-child":function(name,condition){return function(node){if(!_lookLeft(node))return false;
if(!_lookRight(node))return false;return true}},"empty":function(name,condition){return function(elem){var cn=elem.childNodes;var cnl=elem.childNodes.length;for(var x=cnl-1;x>=0;x--){var nt=cn[x].nodeType;if(nt===1||nt==3)return false}return true}},"contains":function(name,condition){var cz=condition.charAt(0);if(cz=='"'||cz=="'")condition=condition.slice(1,-1);return function(elem){return elem.innerHTML.indexOf(condition)>=0}},"not":function(name,condition){var p=getQueryParts(condition)[0];var ignores=
{el:1};if(p.tag!="*")ignores.tag=1;if(!p.classes.length)ignores.classes=1;var ntf=getSimpleFilterFunc(p,ignores);return function(elem){return!ntf(elem)}},"nth-child":function(name,condition){var pi=parseInt;if(condition=="odd")return isOdd;else if(condition=="even")return isEven;if(condition.indexOf("n")!=-1){var tparts=condition.split("n",2);var pred=tparts[0]?tparts[0]=="-"?-1:pi(tparts[0]):1;var idx=tparts[1]?pi(tparts[1]):0;var lb=0,ub=-1;if(pred>0)if(idx<0)idx=idx%pred&&pred+idx%pred;else{if(idx>
0){if(idx>=pred)lb=idx-idx%pred;idx=idx%pred}}else if(pred<0){pred*=-1;if(idx>0){ub=idx;idx=idx%pred}}if(pred>0)return function(elem){var i=getNodeIndex(elem);return i>=lb&&(ub<0||i<=ub)&&i%pred==idx};else condition=idx}var ncount=pi(condition);return function(elem){return getNodeIndex(elem)==ncount}}};var defaultGetter=d.isIE<9||dojo.isIE&&dojo.isQuirks?function(cond){var clc=cond.toLowerCase();if(clc=="class")cond="className";return function(elem){return caseSensitive?elem.getAttribute(cond):elem[cond]||
elem[clc]}}:function(cond){return function(elem){return elem&&elem.getAttribute&&elem.hasAttribute(cond)}};var getSimpleFilterFunc=function(query,ignores){if(!query)return yesman;ignores=ignores||{};var ff=null;if(!("el"in ignores))ff=agree(ff,_isElement);if(!("tag"in ignores))if(query.tag!="*")ff=agree(ff,function(elem){return elem&&elem.tagName==query.getTag()});if(!("classes"in ignores))each(query.classes,function(cname,idx,arr){var re=new RegExp("(?:^|\\s)"+cname+"(?:\\s|$)");ff=agree(ff,function(elem){return re.test(elem.className)});
ff.count=idx});if(!("pseudos"in ignores))each(query.pseudos,function(pseudo){var pn=pseudo.name;if(pseudos[pn])ff=agree(ff,pseudos[pn](pn,pseudo.value))});if(!("attrs"in ignores))each(query.attrs,function(attr){var matcher;var a=attr.attr;if(attr.type&&attrs[attr.type])matcher=attrs[attr.type](a,attr.matchFor);else if(a.length)matcher=defaultGetter(a);if(matcher)ff=agree(ff,matcher)});if(!("id"in ignores))if(query.id)ff=agree(ff,function(elem){return!!elem&&elem.id==query.id});if(!ff)if(!("default"in
ignores))ff=yesman;return ff};var _nextSibling=function(filterFunc){return function(node,ret,bag){while(node=node[_ns]){if(_noNES&&!_isElement(node))continue;if((!bag||_isUnique(node,bag))&&filterFunc(node))ret.push(node);break}return ret}};var _nextSiblings=function(filterFunc){return function(root,ret,bag){var te=root[_ns];while(te){if(_simpleNodeTest(te)){if(bag&&!_isUnique(te,bag))break;if(filterFunc(te))ret.push(te)}te=te[_ns]}return ret}};var _childElements=function(filterFunc){filterFunc=filterFunc||
yesman;return function(root,ret,bag){var te,x=0,tret=root[childNodesName];while(te=tret[x++])if(_simpleNodeTest(te)&&(!bag||_isUnique(te,bag))&&filterFunc(te,x))ret.push(te);return ret}};var _isDescendant=function(node,root){var pn=node.parentNode;while(pn){if(pn==root)break;pn=pn.parentNode}return!!pn};var _getElementsFuncCache={};var getElementsFunc=function(query){var retFunc=_getElementsFuncCache[query.query];if(retFunc)return retFunc;var io=query.infixOper;var oper=io?io.oper:"";var filterFunc=
getSimpleFilterFunc(query,{el:1});var qt=query.tag;var wildcardTag="*"==qt;var ecs=getDoc()["getElementsByClassName"];if(!oper)if(query.id){filterFunc=!query.loops&&wildcardTag?yesman:getSimpleFilterFunc(query,{el:1,id:1});retFunc=function(root,arr){var te=d.byId(query.id,root.ownerDocument||root);if(!te||!filterFunc(te))return;if(9==root.nodeType)return getArr(te,arr);else if(_isDescendant(te,root))return getArr(te,arr)}}else if(ecs&&/\{\s*\[native code\]\s*\}/.test(String(ecs))&&query.classes.length&&
!cssCaseBug){filterFunc=getSimpleFilterFunc(query,{el:1,classes:1,id:1});var classesString=query.classes.join(" ");retFunc=function(root,arr,bag){var ret=getArr(0,arr),te,x=0;var tret=root.getElementsByClassName(classesString);while(te=tret[x++])if(filterFunc(te,root)&&_isUnique(te,bag))ret.push(te);return ret}}else if(!wildcardTag&&!query.loops)retFunc=function(root,arr,bag){var ret=getArr(0,arr),te,x=0;var tret=root.getElementsByTagName(query.getTag());while(te=tret[x++])if(_isUnique(te,bag))ret.push(te);
return ret};else{filterFunc=getSimpleFilterFunc(query,{el:1,tag:1,id:1});retFunc=function(root,arr,bag){var ret=getArr(0,arr),te,x=0;var tret=root.getElementsByTagName(query.getTag());while(te=tret[x++])if(filterFunc(te,root)&&_isUnique(te,bag))ret.push(te);return ret}}else{var skipFilters={el:1};if(wildcardTag)skipFilters.tag=1;filterFunc=getSimpleFilterFunc(query,skipFilters);if("+"==oper)retFunc=_nextSibling(filterFunc);else if("~"==oper)retFunc=_nextSiblings(filterFunc);else if(">"==oper)retFunc=
_childElements(filterFunc)}return _getElementsFuncCache[query.query]=retFunc};var filterDown=function(root,queryParts){var candidates=getArr(root),qp,x,te,qpl=queryParts.length,bag,ret;for(var i=0;i<qpl;i++){ret=[];qp=queryParts[i];x=candidates.length-1;if(x>0){bag={};ret.nozip=true}var gef=getElementsFunc(qp);for(var j=0;te=candidates[j];j++)gef(te,ret,bag);if(!ret.length)break;candidates=ret}return ret};var _queryFuncCacheDOM={},_queryFuncCacheQSA={};var getStepQueryFunc=function(query){var qparts=
getQueryParts(trim(query));if(qparts.length==1){var tef=getElementsFunc(qparts[0]);return function(root){var r=tef(root,new qlc);if(r)r.nozip=true;return r}}return function(root){return filterDown(root,qparts)}};var nua=navigator.userAgent;var wk="WebKit/";var is525=d.isWebKit&&nua.indexOf(wk)>0&&parseFloat(nua.split(wk)[1])>528;var noZip=d.isIE?"commentStrip":"nozip";var qsa="querySelectorAll";var qsaAvail=!!getDoc()[qsa]&&(!d.isSafari||d.isSafari>3.1||is525);var infixSpaceRe=/n\+\d|([^ ])?([>~+])([^ =])?/g;
var infixSpaceFunc=function(match,pre,ch,post){return ch?(pre?pre+" ":"")+ch+(post?" "+post:""):match};var getQueryFunc=function(query,forceDOM){query=query.replace(infixSpaceRe,infixSpaceFunc);if(qsaAvail){var qsaCached=_queryFuncCacheQSA[query];if(qsaCached&&!forceDOM)return qsaCached}var domCached=_queryFuncCacheDOM[query];if(domCached)return domCached;var qcz=query.charAt(0);var nospace=-1==query.indexOf(" ");if(query.indexOf("#")>=0&&nospace)forceDOM=true;var useQSA=qsaAvail&&!forceDOM&&specials.indexOf(qcz)==
-1&&(!d.isIE||query.indexOf(":")==-1)&&!(cssCaseBug&&query.indexOf(".")>=0)&&query.indexOf(":contains")==-1&&query.indexOf(":checked")==-1&&query.indexOf("|=")==-1;if(useQSA){var tq=specials.indexOf(query.charAt(query.length-1))>=0?query+" *":query;return _queryFuncCacheQSA[query]=function(root){try{if(!(9==root.nodeType||nospace))throw"";var r=root[qsa](tq);r[noZip]=true;return r}catch(e){return getQueryFunc(query,true)(root)}}}else{var parts=query.split(/\s*,\s*/);return _queryFuncCacheDOM[query]=
parts.length<2?getStepQueryFunc(query):function(root){var pindex=0,ret=[],tp;while(tp=parts[pindex++])ret=ret.concat(getStepQueryFunc(tp)(root));return ret}}};var _zipIdx=0;var _nodeUID=d.isIE?function(node){if(caseSensitive)return node.getAttribute("_uid")||node.setAttribute("_uid",++_zipIdx)||_zipIdx;else return node.uniqueID}:function(node){return node._uid||(node._uid=++_zipIdx)};var _isUnique=function(node,bag){if(!bag)return 1;var id=_nodeUID(node);if(!bag[id])return bag[id]=1;return 0};var _zipIdxName=
"_zipIdx";var _zip=function(arr){if(arr&&arr.nozip)return qlc._wrap?qlc._wrap(arr):arr;var ret=new qlc;if(!arr||!arr.length)return ret;if(arr[0])ret.push(arr[0]);if(arr.length<2)return ret;_zipIdx++;if(d.isIE&&caseSensitive){var szidx=_zipIdx+"";arr[0].setAttribute(_zipIdxName,szidx);for(var x=1,te;te=arr[x];x++){if(arr[x].getAttribute(_zipIdxName)!=szidx)ret.push(te);te.setAttribute(_zipIdxName,szidx)}}else if(d.isIE&&arr.commentStrip)try{for(var x=1,te;te=arr[x];x++)if(_isElement(te))ret.push(te)}catch(e){}else{if(arr[0])arr[0][_zipIdxName]=
_zipIdx;for(var x=1,te;te=arr[x];x++){if(arr[x][_zipIdxName]!=_zipIdx)ret.push(te);te[_zipIdxName]=_zipIdx}}return ret};d.query=function(query,root){qlc=d._NodeListCtor;if(!query)return new qlc;if(query.constructor==qlc)return query;if(typeof query!="string")return new qlc(query);if(typeof root=="string"){root=d.byId(root);if(!root)return new qlc}root=root||getDoc();var od=root.ownerDocument||root.documentElement;caseSensitive=root.contentType&&root.contentType=="application/xml"||d.isOpera&&(root.doctype||
od.toString()=="[object XMLDocument]")||!!od&&(d.isIE?od.xml:root.xmlVersion||od.xmlVersion);var r=getQueryFunc(query)(root);if(r&&r.nozip&&!qlc._wrap)return r;return _zip(r)};d.query.pseudos=pseudos;d._filterQueryResult=function(nodeList,filter,root){var tmpNodeList=new d._NodeListCtor,parts=getQueryParts(filter),filterFunc=parts.length==1&&!/[^\w#\.]/.test(filter)?getSimpleFilterFunc(parts[0]):function(node){return dojo.query(filter,root).indexOf(node)!=-1};for(var x=0,te;te=nodeList[x];x++)if(filterFunc(te))tmpNodeList.push(te);
return tmpNodeList}};var defineAcme=function(){acme={trim:function(str){str=str.replace(/^\s+/,"");for(var i=str.length-1;i>=0;i--)if(/\S/.test(str.charAt(i))){str=str.substring(0,i+1);break}return str},forEach:function(arr,callback,thisObject){if(!arr||!arr.length)return;for(var i=0,l=arr.length;i<l;++i)callback.call(thisObject||window,arr[i],i,arr)},byId:function(id,doc){if(typeof id=="string")return(doc||document).getElementById(id);else return id},doc:document,NodeList:Array};var n=navigator;
var dua=n.userAgent;var dav=n.appVersion;var tv=parseFloat(dav);acme.isOpera=dua.indexOf("Opera")>=0?tv:undefined;acme.isKhtml=dav.indexOf("Konqueror")>=0?tv:undefined;acme.isWebKit=parseFloat(dua.split("WebKit/")[1])||undefined;acme.isChrome=parseFloat(dua.split("Chrome/")[1])||undefined;var index=Math.max(dav.indexOf("WebKit"),dav.indexOf("Safari"),0);if(index&&!acme.isChrome){acme.isSafari=parseFloat(dav.split("Version/")[1]);if(!acme.isSafari||parseFloat(dav.substr(index+7))<=419.3)acme.isSafari=
2}if(document.all&&!acme.isOpera)acme.isIE=parseFloat(dav.split("MSIE ")[1])||undefined;Array._wrap=function(arr){return arr};return acme};if(dojo){dojo.provide("dojo._base.query");defineQuery(this["queryPortability"]||this["acme"]||dojo)}else defineQuery(this["queryPortability"]||this["acme"]||defineAcme())})()}if(!dojo._hasResource["dojo._base.xhr"]){dojo._hasResource["dojo._base.xhr"]=true;dojo.provide("dojo._base.xhr");(function(){var _d=dojo,cfg=_d.config;function setValue(obj,name,value){if(value===
null)return;var val=obj[name];if(typeof val=="string")obj[name]=[val,value];else if(_d.isArray(val))val.push(value);else obj[name]=value}dojo.fieldToObject=function(inputNode){var ret=null;var item=_d.byId(inputNode);if(item){var _in=item.name;var type=(item.type||"").toLowerCase();if(_in&&type&&!item.disabled)if(type=="radio"||type=="checkbox"){if(item.checked)ret=item.value}else if(item.multiple){ret=[];_d.query("option",item).forEach(function(opt){if(opt.selected)ret.push(opt.value)})}else ret=
item.value}return ret};dojo.formToObject=function(formNode){var ret={};var exclude="file|submit|image|reset|button|";_d.forEach(dojo.byId(formNode).elements,function(item){var _in=item.name;var type=(item.type||"").toLowerCase();if(_in&&type&&exclude.indexOf(type)==-1&&!item.disabled){setValue(ret,_in,_d.fieldToObject(item));if(type=="image")ret[_in+".x"]=ret[_in+".y"]=ret[_in].x=ret[_in].y=0}});return ret};dojo.objectToQuery=function(map){var enc=encodeURIComponent;var pairs=[];var backstop={};for(var name in map){var value=
map[name];if(value!=backstop[name]){var assign=enc(name)+"=";if(_d.isArray(value))for(var i=0;i<value.length;i++)pairs.push(assign+enc(value[i]));else pairs.push(assign+enc(value))}}return pairs.join("&")};dojo.formToQuery=function(formNode){return _d.objectToQuery(_d.formToObject(formNode))};dojo.formToJson=function(formNode,prettyPrint){return _d.toJson(_d.formToObject(formNode),prettyPrint)};dojo.queryToObject=function(str){var ret={};var qp=str.split("&");var dec=decodeURIComponent;_d.forEach(qp,
function(item){if(item.length){var parts=item.split("=");var name=dec(parts.shift());var val=dec(parts.join("="));if(typeof ret[name]=="string")ret[name]=[ret[name]];if(_d.isArray(ret[name]))ret[name].push(val);else ret[name]=val}});return ret};dojo._blockAsync=false;var handlers=_d._contentHandlers=dojo.contentHandlers={text:function(xhr){return xhr.responseText},json:function(xhr){return _d.fromJson(xhr.responseText||null)},"json-comment-filtered":function(xhr){if(!dojo.config.useCommentedJson)console.warn("Consider using the standard mimetype:application/json."+
" json-commenting can introduce security issues. To"+" decrease the chances of hijacking, use the standard the 'json' handler and"+" prefix your json with: {}&&\n"+"Use djConfig.useCommentedJson=true to turn off this message.");var value=xhr.responseText;var cStartIdx=value.indexOf("/*");var cEndIdx=value.lastIndexOf("*/");if(cStartIdx==-1||cEndIdx==-1)throw new Error("JSON was not comment filtered");return _d.fromJson(value.substring(cStartIdx+2,cEndIdx))},javascript:function(xhr){return _d.eval(xhr.responseText)},
xml:function(xhr){var result=xhr.responseXML;if(_d.isIE&&(!result||!result.documentElement)){var ms=function(n){return"MSXML"+n+".DOMDocument"};var dp=["Microsoft.XMLDOM",ms(6),ms(4),ms(3),ms(2)];_d.some(dp,function(p){try{var dom=new ActiveXObject(p);dom.async=false;dom.loadXML(xhr.responseText);result=dom}catch(e){return false}return true})}return result},"json-comment-optional":function(xhr){if(xhr.responseText&&/^[^{\[]*\/\*/.test(xhr.responseText))return handlers["json-comment-filtered"](xhr);
else return handlers["json"](xhr)}};dojo._ioSetArgs=function(args,canceller,okHandler,errHandler){var ioArgs={args:args,url:args.url};var formObject=null;if(args.form){var form=_d.byId(args.form);var actnNode=form.getAttributeNode("action");ioArgs.url=ioArgs.url||(actnNode?actnNode.value:null);formObject=_d.formToObject(form)}var miArgs=[{}];if(formObject)miArgs.push(formObject);if(args.content)miArgs.push(args.content);if(args.preventCache)miArgs.push({"dojo.preventCache":(new Date).valueOf()});
ioArgs.query=_d.objectToQuery(_d.mixin.apply(null,miArgs));ioArgs.handleAs=args.handleAs||"text";var d=new _d.Deferred(canceller);d.addCallbacks(okHandler,function(error){return errHandler(error,d)});var ld=args.load;if(ld&&_d.isFunction(ld))d.addCallback(function(value){return ld.call(args,value,ioArgs)});var err=args.error;if(err&&_d.isFunction(err))d.addErrback(function(value){return err.call(args,value,ioArgs)});var handle=args.handle;if(handle&&_d.isFunction(handle))d.addBoth(function(value){return handle.call(args,
value,ioArgs)});if(cfg.ioPublish&&_d.publish&&ioArgs.args.ioPublish!==false){d.addCallbacks(function(res){_d.publish("/dojo/io/load",[d,res]);return res},function(res){_d.publish("/dojo/io/error",[d,res]);return res});d.addBoth(function(res){_d.publish("/dojo/io/done",[d,res]);return res})}d.ioArgs=ioArgs;return d};var _deferredCancel=function(dfd){dfd.canceled=true;var xhr=dfd.ioArgs.xhr;var _at=typeof xhr.abort;if(_at=="function"||_at=="object"||_at=="unknown")xhr.abort();var err=dfd.ioArgs.error;
if(!err){err=new Error("xhr cancelled");err.dojoType="cancel"}return err};var _deferredOk=function(dfd){var ret=handlers[dfd.ioArgs.handleAs](dfd.ioArgs.xhr);return ret===undefined?null:ret};var _deferError=function(error,dfd){if(!dfd.ioArgs.args.failOk)console.error(error);return error};var _inFlightIntvl=null;var _inFlight=[];var _pubCount=0;var _checkPubCount=function(dfd){if(_pubCount<=0){_pubCount=0;if(cfg.ioPublish&&_d.publish&&(!dfd||dfd&&dfd.ioArgs.args.ioPublish!==false))_d.publish("/dojo/io/stop")}};
var _watchInFlight=function(){var now=(new Date).getTime();if(!_d._blockAsync)for(var i=0,tif;i<_inFlight.length&&(tif=_inFlight[i]);i++){var dfd=tif.dfd;var func=function(){if(!dfd||dfd.canceled||!tif.validCheck(dfd)){_inFlight.splice(i--,1);_pubCount-=1}else if(tif.ioCheck(dfd)){_inFlight.splice(i--,1);tif.resHandle(dfd);_pubCount-=1}else if(dfd.startTime)if(dfd.startTime+(dfd.ioArgs.args.timeout||0)<now){_inFlight.splice(i--,1);var err=new Error("timeout exceeded");err.dojoType="timeout";dfd.errback(err);
dfd.cancel();_pubCount-=1}};if(dojo.config.debugAtAllCosts)func.call(this);else try{func.call(this)}catch(e){dfd.errback(e)}}_checkPubCount(dfd);if(!_inFlight.length){clearInterval(_inFlightIntvl);_inFlightIntvl=null;return}};dojo._ioCancelAll=function(){try{_d.forEach(_inFlight,function(i){try{i.dfd.cancel()}catch(e){}})}catch(e){}};if(_d.isIE)_d.addOnWindowUnload(_d._ioCancelAll);_d._ioNotifyStart=function(dfd){if(cfg.ioPublish&&_d.publish&&dfd.ioArgs.args.ioPublish!==false){if(!_pubCount)_d.publish("/dojo/io/start");
_pubCount+=1;_d.publish("/dojo/io/send",[dfd])}};_d._ioWatch=function(dfd,validCheck,ioCheck,resHandle){var args=dfd.ioArgs.args;if(args.timeout)dfd.startTime=(new Date).getTime();_inFlight.push({dfd:dfd,validCheck:validCheck,ioCheck:ioCheck,resHandle:resHandle});if(!_inFlightIntvl)_inFlightIntvl=setInterval(_watchInFlight,50);if(args.sync)_watchInFlight()};var _defaultContentType="application/x-www-form-urlencoded";var _validCheck=function(dfd){return dfd.ioArgs.xhr.readyState};var _ioCheck=function(dfd){return 4==
dfd.ioArgs.xhr.readyState};var _resHandle=function(dfd){var xhr=dfd.ioArgs.xhr;if(_d._isDocumentOk(xhr))dfd.callback(dfd);else{var err=new Error("Unable to load "+dfd.ioArgs.url+" status:"+xhr.status);err.status=xhr.status;err.responseText=xhr.responseText;dfd.errback(err)}};dojo._ioAddQueryToUrl=function(ioArgs){if(ioArgs.query.length){ioArgs.url+=(ioArgs.url.indexOf("?")==-1?"?":"&")+ioArgs.query;ioArgs.query=null}};dojo.xhr=function(method,args,hasBody){var dfd=_d._ioSetArgs(args,_deferredCancel,
_deferredOk,_deferError);var ioArgs=dfd.ioArgs;var xhr=ioArgs.xhr=_d._xhrObj(ioArgs.args);if(!xhr){dfd.cancel();return dfd}if("postData"in args)ioArgs.query=args.postData;else if("putData"in args)ioArgs.query=args.putData;else if("rawBody"in args)ioArgs.query=args.rawBody;else if(arguments.length>2&&!hasBody||"POST|PUT".indexOf(method.toUpperCase())==-1)_d._ioAddQueryToUrl(ioArgs);xhr.open(method,ioArgs.url,args.sync!==true,args.user||undefined,args.password||undefined);if(args.headers)for(var hdr in args.headers)if(hdr.toLowerCase()===
"content-type"&&!args.contentType)args.contentType=args.headers[hdr];else if(args.headers[hdr])xhr.setRequestHeader(hdr,args.headers[hdr]);xhr.setRequestHeader("Content-Type",args.contentType||_defaultContentType);if(!args.headers||!("X-Requested-With"in args.headers))xhr.setRequestHeader("X-Requested-With","XMLHttpRequest");_d._ioNotifyStart(dfd);if(dojo.config.debugAtAllCosts)xhr.send(ioArgs.query);else try{xhr.send(ioArgs.query)}catch(e){ioArgs.error=e;dfd.cancel()}_d._ioWatch(dfd,_validCheck,
_ioCheck,_resHandle);xhr=null;return dfd};dojo.xhrGet=function(args){return _d.xhr("GET",args)};dojo.rawXhrPost=dojo.xhrPost=function(args){return _d.xhr("POST",args,true)};dojo.rawXhrPut=dojo.xhrPut=function(args){return _d.xhr("PUT",args,true)};dojo.xhrDelete=function(args){return _d.xhr("DELETE",args)}})()}if(!dojo._hasResource["dojo._base.fx"]){dojo._hasResource["dojo._base.fx"]=true;dojo.provide("dojo._base.fx");(function(){var d=dojo;var _mixin=d._mixin;dojo._Line=function(start,end){this.start=
start;this.end=end};dojo._Line.prototype.getValue=function(n){return(this.end-this.start)*n+this.start};dojo.Animation=function(args){_mixin(this,args);if(d.isArray(this.curve))this.curve=new d._Line(this.curve[0],this.curve[1])};d._Animation=d.Animation;d.extend(dojo.Animation,{duration:350,repeat:0,rate:20,_percent:0,_startRepeatCount:0,_getStep:function(){var _p=this._percent,_e=this.easing;return _e?_e(_p):_p},_fire:function(evt,args){var a=args||[];if(this[evt])if(d.config.debugAtAllCosts)this[evt].apply(this,
a);else try{this[evt].apply(this,a)}catch(e){console.error("exception in animation handler for:",evt);console.error(e)}return this},play:function(delay,gotoStart){var _t=this;if(_t._delayTimer)_t._clearTimer();if(gotoStart){_t._stopTimer();_t._active=_t._paused=false;_t._percent=0}else if(_t._active&&!_t._paused)return _t;_t._fire("beforeBegin",[_t.node]);var de=delay||_t.delay,_p=dojo.hitch(_t,"_play",gotoStart);if(de>0){_t._delayTimer=setTimeout(_p,de);return _t}_p();return _t},_play:function(gotoStart){var _t=
this;if(_t._delayTimer)_t._clearTimer();_t._startTime=(new Date).valueOf();if(_t._paused)_t._startTime-=_t.duration*_t._percent;_t._active=true;_t._paused=false;var value=_t.curve.getValue(_t._getStep());if(!_t._percent){if(!_t._startRepeatCount)_t._startRepeatCount=_t.repeat;_t._fire("onBegin",[value])}_t._fire("onPlay",[value]);_t._cycle();return _t},pause:function(){var _t=this;if(_t._delayTimer)_t._clearTimer();_t._stopTimer();if(!_t._active)return _t;_t._paused=true;_t._fire("onPause",[_t.curve.getValue(_t._getStep())]);
return _t},gotoPercent:function(percent,andPlay){var _t=this;_t._stopTimer();_t._active=_t._paused=true;_t._percent=percent;if(andPlay)_t.play();return _t},stop:function(gotoEnd){var _t=this;if(_t._delayTimer)_t._clearTimer();if(!_t._timer)return _t;_t._stopTimer();if(gotoEnd)_t._percent=1;_t._fire("onStop",[_t.curve.getValue(_t._getStep())]);_t._active=_t._paused=false;return _t},status:function(){if(this._active)return this._paused?"paused":"playing";return"stopped"},_cycle:function(){var _t=this;
if(_t._active){var curr=(new Date).valueOf();var step=(curr-_t._startTime)/_t.duration;if(step>=1)step=1;_t._percent=step;if(_t.easing)step=_t.easing(step);_t._fire("onAnimate",[_t.curve.getValue(step)]);if(_t._percent<1)_t._startTimer();else{_t._active=false;if(_t.repeat>0){_t.repeat--;_t.play(null,true)}else if(_t.repeat==-1)_t.play(null,true);else if(_t._startRepeatCount){_t.repeat=_t._startRepeatCount;_t._startRepeatCount=0}_t._percent=0;_t._fire("onEnd",[_t.node]);!_t.repeat&&_t._stopTimer()}}return _t},
_clearTimer:function(){clearTimeout(this._delayTimer);delete this._delayTimer}});var ctr=0,timer=null,runner={run:function(){}};d.extend(d.Animation,{_startTimer:function(){if(!this._timer){this._timer=d.connect(runner,"run",this,"_cycle");ctr++}if(!timer)timer=setInterval(d.hitch(runner,"run"),this.rate)},_stopTimer:function(){if(this._timer){d.disconnect(this._timer);this._timer=null;ctr--}if(ctr<=0){clearInterval(timer);timer=null;ctr=0}}});var _makeFadeable=d.isIE?function(node){var ns=node.style;
if(!ns.width.length&&d.style(node,"width")=="auto")ns.width="auto"}:function(){};dojo._fade=function(args){args.node=d.byId(args.node);var fArgs=_mixin({properties:{}},args),props=fArgs.properties.opacity={};props.start=!("start"in fArgs)?function(){return+d.style(fArgs.node,"opacity")||0}:fArgs.start;props.end=fArgs.end;var anim=d.animateProperty(fArgs);d.connect(anim,"beforeBegin",d.partial(_makeFadeable,fArgs.node));return anim};dojo.fadeIn=function(args){return d._fade(_mixin({end:1},args))};
dojo.fadeOut=function(args){return d._fade(_mixin({end:0},args))};dojo._defaultEasing=function(n){return.5+Math.sin((n+1.5)*Math.PI)/2};var PropLine=function(properties){this._properties=properties;for(var p in properties){var prop=properties[p];if(prop.start instanceof d.Color)prop.tempColor=new d.Color}};PropLine.prototype.getValue=function(r){var ret={};for(var p in this._properties){var prop=this._properties[p],start=prop.start;if(start instanceof d.Color)ret[p]=d.blendColors(start,prop.end,r,
prop.tempColor).toCss();else if(!d.isArray(start))ret[p]=(prop.end-start)*r+start+(p!="opacity"?prop.units||"px":0)}return ret};dojo.animateProperty=function(args){var n=args.node=d.byId(args.node);if(!args.easing)args.easing=d._defaultEasing;var anim=new d.Animation(args);d.connect(anim,"beforeBegin",anim,function(){var pm={};for(var p in this.properties){if(p=="width"||p=="height")this.node.display="block";var prop=this.properties[p];if(d.isFunction(prop))prop=prop(n);prop=pm[p]=_mixin({},d.isObject(prop)?
prop:{end:prop});if(d.isFunction(prop.start))prop.start=prop.start(n);if(d.isFunction(prop.end))prop.end=prop.end(n);var isColor=p.toLowerCase().indexOf("color")>=0;function getStyle(node,p){var v={height:node.offsetHeight,width:node.offsetWidth}[p];if(v!==undefined)return v;v=d.style(node,p);return p=="opacity"?+v:isColor?v:parseFloat(v)}if(!("end"in prop))prop.end=getStyle(n,p);else if(!("start"in prop))prop.start=getStyle(n,p);if(isColor){prop.start=new d.Color(prop.start);prop.end=new d.Color(prop.end)}else prop.start=
p=="opacity"?+prop.start:parseFloat(prop.start)}this.curve=new PropLine(pm)});d.connect(anim,"onAnimate",d.hitch(d,"style",anim.node));return anim};dojo.anim=function(node,properties,duration,easing,onEnd,delay){return d.animateProperty({node:node,duration:duration||d.Animation.prototype.duration,properties:properties,easing:easing,onEnd:onEnd}).play(delay||0)}})()}if(!dojo._hasResource["dojo._base.browser"]){dojo._hasResource["dojo._base.browser"]=true;dojo.provide("dojo._base.browser");dojo.forEach(dojo.config.require,
function(i){dojo["require"](i)})}if(!dojo._hasResource["dojo._base"]){dojo._hasResource["dojo._base"]=true;dojo.provide("dojo._base")}if(!dojo._hasResource["dijit._base.manager"]){dojo._hasResource["dijit._base.manager"]=true;dojo.provide("dijit._base.manager");dojo.declare("dijit.WidgetSet",null,{constructor:function(){this._hash={};this.length=0},add:function(widget){if(this._hash[widget.id])throw new Error("Tried to register widget with id=="+widget.id+" but that id is already registered");this._hash[widget.id]=
widget;this.length++},remove:function(id){if(this._hash[id]){delete this._hash[id];this.length--}},forEach:function(func,thisObj){thisObj=thisObj||dojo.global;var i=0,id;for(id in this._hash)func.call(thisObj,this._hash[id],i++,this._hash);return this},filter:function(filter,thisObj){thisObj=thisObj||dojo.global;var res=new dijit.WidgetSet,i=0,id;for(id in this._hash){var w=this._hash[id];if(filter.call(thisObj,w,i++,this._hash))res.add(w)}return res},byId:function(id){return this._hash[id]},byClass:function(cls){var res=
new dijit.WidgetSet,id,widget;for(id in this._hash){widget=this._hash[id];if(widget.declaredClass==cls)res.add(widget)}return res},toArray:function(){var ar=[];for(var id in this._hash)ar.push(this._hash[id]);return ar},map:function(func,thisObj){return dojo.map(this.toArray(),func,thisObj)},every:function(func,thisObj){thisObj=thisObj||dojo.global;var x=0,i;for(i in this._hash)if(!func.call(thisObj,this._hash[i],x++,this._hash))return false;return true},some:function(func,thisObj){thisObj=thisObj||
dojo.global;var x=0,i;for(i in this._hash)if(func.call(thisObj,this._hash[i],x++,this._hash))return true;return false}});(function(){dijit.registry=new dijit.WidgetSet;var hash=dijit.registry._hash,attr=dojo.attr,hasAttr=dojo.hasAttr,style=dojo.style;dijit.byId=function(id){return typeof id=="string"?hash[id]:id};var _widgetTypeCtr={};dijit.getUniqueId=function(widgetType){var id;do id=widgetType+"_"+(widgetType in _widgetTypeCtr?++_widgetTypeCtr[widgetType]:_widgetTypeCtr[widgetType]=0);while(hash[id]);
return dijit._scopeName=="dijit"?id:dijit._scopeName+"_"+id};dijit.findWidgets=function(root){var outAry=[];function getChildrenHelper(root){for(var node=root.firstChild;node;node=node.nextSibling)if(node.nodeType==1){var widgetId=node.getAttribute("widgetId");if(widgetId){var widget=hash[widgetId];if(widget)outAry.push(widget)}else getChildrenHelper(node)}}getChildrenHelper(root);return outAry};dijit._destroyAll=function(){dijit._curFocus=null;dijit._prevFocus=null;dijit._activeStack=[];dojo.forEach(dijit.findWidgets(dojo.body()),
function(widget){if(!widget._destroyed)if(widget.destroyRecursive)widget.destroyRecursive();else if(widget.destroy)widget.destroy()})};if(dojo.isIE)dojo.addOnWindowUnload(function(){dijit._destroyAll()});dijit.byNode=function(node){return hash[node.getAttribute("widgetId")]};dijit.getEnclosingWidget=function(node){while(node){var id=node.getAttribute&&node.getAttribute("widgetId");if(id)return hash[id];node=node.parentNode}return null};var shown=dijit._isElementShown=function(elem){var s=style(elem);
return s.visibility!="hidden"&&s.visibility!="collapsed"&&s.display!="none"&&attr(elem,"type")!="hidden"};dijit.hasDefaultTabStop=function(elem){switch(elem.nodeName.toLowerCase()){case "a":return hasAttr(elem,"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return true;case "iframe":var body;try{var contentDocument=elem.contentDocument;if("designMode"in contentDocument&&contentDocument.designMode=="on")return true;body=contentDocument.body}catch(e1){try{body=
elem.contentWindow.document.body}catch(e2){return false}}return body.contentEditable=="true"||body.firstChild&&body.firstChild.contentEditable=="true";default:return elem.contentEditable=="true"}};var isTabNavigable=dijit.isTabNavigable=function(elem){if(attr(elem,"disabled"))return false;else if(hasAttr(elem,"tabIndex"))return attr(elem,"tabIndex")>=0;else return dijit.hasDefaultTabStop(elem)};dijit._getTabNavigable=function(root){var first,last,lowest,lowestTabindex,highest,highestTabindex,radioSelected=
{};function radioName(node){return node&&node.tagName.toLowerCase()=="input"&&node.type&&node.type.toLowerCase()=="radio"&&node.name&&node.name.toLowerCase()}var walkTree=function(parent){dojo.query("> *",parent).forEach(function(child){if(!shown(child))return;if(isTabNavigable(child)){var tabindex=attr(child,"tabIndex");if(!hasAttr(child,"tabIndex")||tabindex==0){if(!first)first=child;last=child}else if(tabindex>0){if(!lowest||tabindex<lowestTabindex){lowestTabindex=tabindex;lowest=child}if(!highest||
tabindex>=highestTabindex){highestTabindex=tabindex;highest=child}}var rn=radioName(child);if(dojo.attr(child,"checked")&&rn)radioSelected[rn]=child}if(child.nodeName.toUpperCase()!="SELECT")walkTree(child)})};if(shown(root))walkTree(root);function rs(node){return radioSelected[radioName(node)]||node}return{first:rs(first),last:rs(last),lowest:rs(lowest),highest:rs(highest)}};dijit.getFirstInTabbingOrder=function(root){var elems=dijit._getTabNavigable(dojo.byId(root));return elems.lowest?elems.lowest:
elems.first};dijit.getLastInTabbingOrder=function(root){var elems=dijit._getTabNavigable(dojo.byId(root));return elems.last?elems.last:elems.highest};dijit.defaultDuration=dojo.config["defaultDuration"]||200})()}if(!dojo._hasResource["dojo.Stateful"]){dojo._hasResource["dojo.Stateful"]=true;dojo.provide("dojo.Stateful");dojo.declare("dojo.Stateful",null,{postscript:function(mixin){if(mixin)dojo.mixin(this,mixin)},get:function(name){return this[name]},set:function(name,value){if(typeof name==="object"){for(var x in name)this.set(x,
name[x]);return this}var oldValue=this[name];this[name]=value;if(this._watchCallbacks)this._watchCallbacks(name,oldValue,value);return this},watch:function(name,callback){var callbacks=this._watchCallbacks;if(!callbacks){var self=this;callbacks=this._watchCallbacks=function(name,oldValue,value,ignoreCatchall){var notify=function(propertyCallbacks){if(propertyCallbacks){propertyCallbacks=propertyCallbacks.slice();for(var i=0,l=propertyCallbacks.length;i<l;i++)try{propertyCallbacks[i].call(self,name,
oldValue,value)}catch(e){console.error(e)}}};notify(callbacks["_"+name]);if(!ignoreCatchall)notify(callbacks["*"])}}if(!callback&&typeof name==="function"){callback=name;name="*"}else name="_"+name;var propertyCallbacks=callbacks[name];if(typeof propertyCallbacks!=="object")propertyCallbacks=callbacks[name]=[];propertyCallbacks.push(callback);return{unwatch:function(){propertyCallbacks.splice(dojo.indexOf(propertyCallbacks,callback),1)}}}})}if(!dojo._hasResource["dijit._WidgetBase"]){dojo._hasResource["dijit._WidgetBase"]=
true;dojo.provide("dijit._WidgetBase");(function(){dojo.declare("dijit._WidgetBase",dojo.Stateful,{id:"",lang:"",dir:"","class":"",style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,attributeMap:{id:"",dir:"",lang:"","class":"",style:"",title:""},_blankGif:function(){return(dojo.config.blankGif||dojo.moduleUrl("dojo","resources/blank.gif")).toString()},postscript:function(params,srcNodeRef){this.create(params,srcNodeRef)},create:function(params,srcNodeRef){this.srcNodeRef=
dojo.byId(srcNodeRef);this._connects=[];this._subscribes=[];if(this.srcNodeRef&&typeof this.srcNodeRef.id=="string")this.id=this.srcNodeRef.id;if(params){this.params=params;dojo._mixin(this,params)}this.postMixInProperties();if(!this.id)this.id=dijit.getUniqueId(this.declaredClass.replace(/\./g,"_"));dijit.registry.add(this);this.buildRendering();if(this.domNode){this._applyAttributes();var source=this.srcNodeRef;if(source&&source.parentNode&&this.domNode!==source)source.parentNode.replaceChild(this.domNode,
source)}if(this.domNode)this.domNode.setAttribute("widgetId",this.id);this.postCreate();if(this.srcNodeRef&&!this.srcNodeRef.parentNode)delete this.srcNodeRef;this._created=true},_applyAttributes:function(){var condAttrApply=function(attr,scope){if(scope.params&&attr in scope.params||scope[attr])scope.set(attr,scope[attr])};for(var attr in this.attributeMap)condAttrApply(attr,this);dojo.forEach(this._getSetterAttributes(),function(a){if(!(a in this.attributeMap))condAttrApply(a,this)},this)},_getSetterAttributes:function(){var ctor=
this.constructor;if(!ctor._setterAttrs){var r=ctor._setterAttrs=[],attrs,proto=ctor.prototype;for(var fxName in proto)if(dojo.isFunction(proto[fxName])&&(attrs=fxName.match(/^_set([a-zA-Z]*)Attr$/))&&attrs[1])r.push(attrs[1].charAt(0).toLowerCase()+attrs[1].substr(1))}return ctor._setterAttrs},postMixInProperties:function(){},buildRendering:function(){if(!this.domNode)this.domNode=this.srcNodeRef||dojo.create("div");if(this.baseClass){var classes=this.baseClass.split(" ");if(!this.isLeftToRight())classes=
classes.concat(dojo.map(classes,function(name){return name+"Rtl"}));dojo.addClass(this.domNode,classes)}},postCreate:function(){},startup:function(){this._started=true},destroyRecursive:function(preserveDom){this._beingDestroyed=true;this.destroyDescendants(preserveDom);this.destroy(preserveDom)},destroy:function(preserveDom){this._beingDestroyed=true;this.uninitialize();var d=dojo,dfe=d.forEach,dun=d.unsubscribe;dfe(this._connects,function(array){dfe(array,d.disconnect)});dfe(this._subscribes,function(handle){dun(handle)});
dfe(this._supportingWidgets||[],function(w){if(w.destroyRecursive)w.destroyRecursive();else if(w.destroy)w.destroy()});this.destroyRendering(preserveDom);dijit.registry.remove(this.id);this._destroyed=true},destroyRendering:function(preserveDom){if(this.bgIframe){this.bgIframe.destroy(preserveDom);delete this.bgIframe}if(this.domNode){if(preserveDom)dojo.removeAttr(this.domNode,"widgetId");else dojo.destroy(this.domNode);delete this.domNode}if(this.srcNodeRef){if(!preserveDom)dojo.destroy(this.srcNodeRef);
delete this.srcNodeRef}},destroyDescendants:function(preserveDom){dojo.forEach(this.getChildren(),function(widget){if(widget.destroyRecursive)widget.destroyRecursive(preserveDom)})},uninitialize:function(){return false},_setClassAttr:function(value){var mapNode=this[this.attributeMap["class"]||"domNode"];dojo.replaceClass(mapNode,value,this["class"]);this._set("class",value)},_setStyleAttr:function(value){var mapNode=this[this.attributeMap.style||"domNode"];if(dojo.isObject(value))dojo.style(mapNode,
value);else if(mapNode.style.cssText)mapNode.style.cssText+="; "+value;else mapNode.style.cssText=value;this._set("style",value)},_attrToDom:function(attr,value){var commands=this.attributeMap[attr];dojo.forEach(dojo.isArray(commands)?commands:[commands],function(command){var mapNode=this[command.node||command||"domNode"];var type=command.type||"attribute";switch(type){case "attribute":if(dojo.isFunction(value))value=dojo.hitch(this,value);var attrName=command.attribute?command.attribute:/^on[A-Z][a-zA-Z]*$/.test(attr)?
attr.toLowerCase():attr;dojo.attr(mapNode,attrName,value);break;case "innerText":mapNode.innerHTML="";mapNode.appendChild(dojo.doc.createTextNode(value));break;case "innerHTML":mapNode.innerHTML=value;break;case "class":dojo.replaceClass(mapNode,value,this[attr]);break}},this)},get:function(name){var names=this._getAttrNames(name);return this[names.g]?this[names.g]():this[name]},set:function(name,value){if(typeof name==="object"){for(var x in name)this.set(x,name[x]);return this}var names=this._getAttrNames(name);
if(this[names.s])var result=this[names.s].apply(this,Array.prototype.slice.call(arguments,1));else{if(name in this.attributeMap)this._attrToDom(name,value);this._set(name,value)}return result||this},_attrPairNames:{},_getAttrNames:function(name){var apn=this._attrPairNames;if(apn[name])return apn[name];var uc=name.charAt(0).toUpperCase()+name.substr(1);return apn[name]={n:name+"Node",s:"_set"+uc+"Attr",g:"_get"+uc+"Attr"}},_set:function(name,value){var oldValue=this[name];this[name]=value;if(this._watchCallbacks&&
this._created&&value!==oldValue)this._watchCallbacks(name,oldValue,value)},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},getDescendants:function(){return this.containerNode?dojo.query("[widgetId]",this.containerNode).map(dijit.byNode):[]},getChildren:function(){return this.containerNode?dijit.findWidgets(this.containerNode):[]},connect:function(obj,event,method){var handles=[dojo._connect(obj,event,this,method)];this._connects.push(handles);return handles},disconnect:function(handles){for(var i=
0;i<this._connects.length;i++)if(this._connects[i]==handles){dojo.forEach(handles,dojo.disconnect);this._connects.splice(i,1);return}},subscribe:function(topic,method){var handle=dojo.subscribe(topic,this,method);this._subscribes.push(handle);return handle},unsubscribe:function(handle){for(var i=0;i<this._subscribes.length;i++)if(this._subscribes[i]==handle){dojo.unsubscribe(handle);this._subscribes.splice(i,1);return}},isLeftToRight:function(){return this.dir?this.dir=="ltr":dojo._isBodyLtr()},placeAt:function(reference,
position){if(reference.declaredClass&&reference.addChild)reference.addChild(this,position);else dojo.place(this.domNode,reference,position);return this}})})()}if(!dojo._hasResource["dojo.window"]){dojo._hasResource["dojo.window"]=true;dojo.provide("dojo.window");dojo.getObject("window",true,dojo);dojo.window.getBox=function(){var scrollRoot=dojo.doc.compatMode=="BackCompat"?dojo.body():dojo.doc.documentElement;var scroll=dojo._docScroll();return{w:scrollRoot.clientWidth,h:scrollRoot.clientHeight,
l:scroll.x,t:scroll.y}};dojo.window.get=function(doc){if(dojo.isIE&&window!==document.parentWindow){doc.parentWindow.execScript("document._parentWindow = window;","Javascript");var win=doc._parentWindow;doc._parentWindow=null;return win}return doc.parentWindow||doc.defaultView};dojo.window.scrollIntoView=function(node,pos){try{node=dojo.byId(node);var doc=node.ownerDocument||dojo.doc,body=doc.body||dojo.body(),html=doc.documentElement||body.parentNode,isIE=dojo.isIE,isWK=dojo.isWebKit;if((!(dojo.isMoz||
isIE||isWK||dojo.isOpera)||node==body||node==html)&&typeof node.scrollIntoView!="undefined"){node.scrollIntoView(false);return}var backCompat=doc.compatMode=="BackCompat",clientAreaRoot=backCompat?body:html,scrollRoot=isWK?body:clientAreaRoot,rootWidth=clientAreaRoot.clientWidth,rootHeight=clientAreaRoot.clientHeight,rtl=!dojo._isBodyLtr(),nodePos=pos||dojo.position(node),el=node.parentNode,isFixed=function(el){return isIE<=6||isIE&&backCompat?false:dojo.style(el,"position").toLowerCase()=="fixed"};
if(isFixed(node))return;while(el){if(el==body)el=scrollRoot;var elPos=dojo.position(el),fixedPos=isFixed(el);if(el==scrollRoot){elPos.w=rootWidth;elPos.h=rootHeight;if(scrollRoot==html&&isIE&&rtl)elPos.x+=scrollRoot.offsetWidth-elPos.w;if(elPos.x<0||!isIE)elPos.x=0;if(elPos.y<0||!isIE)elPos.y=0}else{var pb=dojo._getPadBorderExtents(el);elPos.w-=pb.w;elPos.h-=pb.h;elPos.x+=pb.l;elPos.y+=pb.t}if(el!=scrollRoot){var clientSize=el.clientWidth,scrollBarSize=elPos.w-clientSize;if(clientSize>0&&scrollBarSize>
0){elPos.w=clientSize;if(isIE&&rtl)elPos.x+=scrollBarSize}clientSize=el.clientHeight;scrollBarSize=elPos.h-clientSize;if(clientSize>0&&scrollBarSize>0)elPos.h=clientSize}if(fixedPos){if(elPos.y<0){elPos.h+=elPos.y;elPos.y=0}if(elPos.x<0){elPos.w+=elPos.x;elPos.x=0}if(elPos.y+elPos.h>rootHeight)elPos.h=rootHeight-elPos.y;if(elPos.x+elPos.w>rootWidth)elPos.w=rootWidth-elPos.x}var l=nodePos.x-elPos.x,t=nodePos.y-Math.max(elPos.y,0),r=l+nodePos.w-elPos.w,bot=t+nodePos.h-elPos.h;if(r*l>0){var s=Math[l<
0?"max":"min"](l,r);nodePos.x+=el.scrollLeft;el.scrollLeft+=isIE>=8&&!backCompat&&rtl?-s:s;nodePos.x-=el.scrollLeft}if(bot*t>0){nodePos.y+=el.scrollTop;el.scrollTop+=Math[t<0?"max":"min"](t,bot);nodePos.y-=el.scrollTop}el=el!=scrollRoot&&!fixedPos&&el.parentNode}}catch(error){console.error("scrollIntoView: "+error);node.scrollIntoView(false)}}}if(!dojo._hasResource["dijit._base.focus"]){dojo._hasResource["dijit._base.focus"]=true;dojo.provide("dijit._base.focus");dojo.mixin(dijit,{_curFocus:null,
_prevFocus:null,isCollapsed:function(){return dijit.getBookmark().isCollapsed},getBookmark:function(){var bm,rg,tg,sel=dojo.doc.selection,cf=dijit._curFocus;if(dojo.global.getSelection){sel=dojo.global.getSelection();if(sel)if(sel.isCollapsed){tg=cf?cf.tagName:"";if(tg){tg=tg.toLowerCase();if(tg=="textarea"||tg=="input"&&(!cf.type||cf.type.toLowerCase()=="text")){sel={start:cf.selectionStart,end:cf.selectionEnd,node:cf,pRange:true};return{isCollapsed:sel.end<=sel.start,mark:sel}}}bm={isCollapsed:true}}else{rg=
sel.getRangeAt(0);bm={isCollapsed:false,mark:rg.cloneRange()}}}else if(sel){tg=cf?cf.tagName:"";tg=tg.toLowerCase();if(cf&&tg&&(tg=="button"||tg=="textarea"||tg=="input"))if(sel.type&&sel.type.toLowerCase()=="none")return{isCollapsed:true,mark:null};else{rg=sel.createRange();return{isCollapsed:rg.text&&rg.text.length?false:true,mark:{range:rg,pRange:true}}}bm={};try{rg=sel.createRange();bm.isCollapsed=!(sel.type=="Text"?rg.htmlText.length:rg.length)}catch(e){bm.isCollapsed=true;return bm}if(sel.type.toUpperCase()==
"CONTROL")if(rg.length){bm.mark=[];var i=0,len=rg.length;while(i<len)bm.mark.push(rg.item(i++))}else{bm.isCollapsed=true;bm.mark=null}else bm.mark=rg.getBookmark()}else console.warn("No idea how to store the current selection for this browser!");return bm},moveToBookmark:function(bookmark){var _doc=dojo.doc,mark=bookmark.mark;if(mark)if(dojo.global.getSelection){var sel=dojo.global.getSelection();if(sel&&sel.removeAllRanges)if(mark.pRange){var r=mark;var n=r.node;n.selectionStart=r.start;n.selectionEnd=
r.end}else{sel.removeAllRanges();sel.addRange(mark)}else console.warn("No idea how to restore selection for this browser!")}else if(_doc.selection&&mark){var rg;if(mark.pRange)rg=mark.range;else if(dojo.isArray(mark)){rg=_doc.body.createControlRange();dojo.forEach(mark,function(n){rg.addElement(n)})}else{rg=_doc.body.createTextRange();rg.moveToBookmark(mark)}rg.select()}},getFocus:function(menu,openedForWindow){var node=!dijit._curFocus||menu&&dojo.isDescendant(dijit._curFocus,menu.domNode)?dijit._prevFocus:
dijit._curFocus;return{node:node,bookmark:node==dijit._curFocus&&dojo.withGlobal(openedForWindow||dojo.global,dijit.getBookmark),openedForWindow:openedForWindow}},focus:function(handle){if(!handle)return;var node="node"in handle?handle.node:handle,bookmark=handle.bookmark,openedForWindow=handle.openedForWindow,collapsed=bookmark?bookmark.isCollapsed:false;if(node){var focusNode=node.tagName.toLowerCase()=="iframe"?node.contentWindow:node;if(focusNode&&focusNode.focus)try{focusNode.focus()}catch(e){}dijit._onFocusNode(node)}if(bookmark&&
dojo.withGlobal(openedForWindow||dojo.global,dijit.isCollapsed)&&!collapsed){if(openedForWindow)openedForWindow.focus();try{dojo.withGlobal(openedForWindow||dojo.global,dijit.moveToBookmark,null,[bookmark])}catch(e2){}}},_activeStack:[],registerIframe:function(iframe){return dijit.registerWin(iframe.contentWindow,iframe)},unregisterIframe:function(handle){dijit.unregisterWin(handle)},registerWin:function(targetWindow,effectiveNode){var mousedownListener=function(evt){dijit._justMouseDowned=true;setTimeout(function(){dijit._justMouseDowned=
false},0);if(dojo.isIE&&evt&&evt.srcElement&&evt.srcElement.parentNode==null)return;dijit._onTouchNode(effectiveNode||evt.target||evt.srcElement,"mouse")};var doc=dojo.isIE?targetWindow.document.documentElement:targetWindow.document;if(doc)if(dojo.isIE){targetWindow.document.body.attachEvent("onmousedown",mousedownListener);var activateListener=function(evt){if(evt.srcElement.tagName.toLowerCase()!="#document"&&dijit.isTabNavigable(evt.srcElement))dijit._onFocusNode(effectiveNode||evt.srcElement);
else dijit._onTouchNode(effectiveNode||evt.srcElement)};doc.attachEvent("onactivate",activateListener);var deactivateListener=function(evt){dijit._onBlurNode(effectiveNode||evt.srcElement)};doc.attachEvent("ondeactivate",deactivateListener);return function(){targetWindow.document.detachEvent("onmousedown",mousedownListener);doc.detachEvent("onactivate",activateListener);doc.detachEvent("ondeactivate",deactivateListener);doc=null}}else{doc.body.addEventListener("mousedown",mousedownListener,true);
var focusListener=function(evt){dijit._onFocusNode(effectiveNode||evt.target)};doc.addEventListener("focus",focusListener,true);var blurListener=function(evt){dijit._onBlurNode(effectiveNode||evt.target)};doc.addEventListener("blur",blurListener,true);return function(){doc.body.removeEventListener("mousedown",mousedownListener,true);doc.removeEventListener("focus",focusListener,true);doc.removeEventListener("blur",blurListener,true);doc=null}}},unregisterWin:function(handle){handle&&handle()},_onBlurNode:function(node){dijit._prevFocus=
dijit._curFocus;dijit._curFocus=null;if(dijit._justMouseDowned)return;if(dijit._clearActiveWidgetsTimer)clearTimeout(dijit._clearActiveWidgetsTimer);dijit._clearActiveWidgetsTimer=setTimeout(function(){delete dijit._clearActiveWidgetsTimer;dijit._setStack([]);dijit._prevFocus=null},100)},_onTouchNode:function(node,by){if(dijit._clearActiveWidgetsTimer){clearTimeout(dijit._clearActiveWidgetsTimer);delete dijit._clearActiveWidgetsTimer}var newStack=[];try{while(node){var popupParent=dojo.attr(node,
"dijitPopupParent");if(popupParent)node=dijit.byId(popupParent).domNode;else if(node.tagName&&node.tagName.toLowerCase()=="body"){if(node===dojo.body())break;node=dojo.window.get(node.ownerDocument).frameElement}else{var id=node.getAttribute&&node.getAttribute("widgetId"),widget=id&&dijit.byId(id);if(widget&&!(by=="mouse"&&widget.get("disabled")))newStack.unshift(id);node=node.parentNode}}}catch(e){}dijit._setStack(newStack,by)},_onFocusNode:function(node){if(!node)return;if(node.nodeType==9)return;
dijit._onTouchNode(node);if(node==dijit._curFocus)return;if(dijit._curFocus)dijit._prevFocus=dijit._curFocus;dijit._curFocus=node;dojo.publish("focusNode",[node])},_setStack:function(newStack,by){var oldStack=dijit._activeStack;dijit._activeStack=newStack;for(var nCommon=0;nCommon<Math.min(oldStack.length,newStack.length);nCommon++)if(oldStack[nCommon]!=newStack[nCommon])break;var widget;for(var i=oldStack.length-1;i>=nCommon;i--){widget=dijit.byId(oldStack[i]);if(widget){widget._focused=false;widget.set("focused",
false);widget._hasBeenBlurred=true;if(widget._onBlur)widget._onBlur(by);dojo.publish("widgetBlur",[widget,by])}}for(i=nCommon;i<newStack.length;i++){widget=dijit.byId(newStack[i]);if(widget){widget._focused=true;widget.set("focused",true);if(widget._onFocus)widget._onFocus(by);dojo.publish("widgetFocus",[widget,by])}}}});dojo.addOnLoad(function(){var handle=dijit.registerWin(window);if(dojo.isIE)dojo.addOnWindowUnload(function(){dijit.unregisterWin(handle);handle=null})})}if(!dojo._hasResource["dojo.AdapterRegistry"]){dojo._hasResource["dojo.AdapterRegistry"]=
true;dojo.provide("dojo.AdapterRegistry");dojo.AdapterRegistry=function(returnWrappers){this.pairs=[];this.returnWrappers=returnWrappers||false};dojo.extend(dojo.AdapterRegistry,{register:function(name,check,wrap,directReturn,override){this.pairs[override?"unshift":"push"]([name,check,wrap,directReturn])},match:function(){for(var i=0;i<this.pairs.length;i++){var pair=this.pairs[i];if(pair[1].apply(this,arguments))if(pair[3]||this.returnWrappers)return pair[2];else return pair[2].apply(this,arguments)}throw new Error("No match found");
},unregister:function(name){for(var i=0;i<this.pairs.length;i++){var pair=this.pairs[i];if(pair[0]==name){this.pairs.splice(i,1);return true}}return false}})}if(!dojo._hasResource["dijit._base.place"]){dojo._hasResource["dijit._base.place"]=true;dojo.provide("dijit._base.place");dijit.getViewport=function(){return dojo.window.getBox()};dijit.placeOnScreen=function(node,pos,corners,padding,appendToNode){var choices=dojo.map(corners,function(corner){var c={corner:corner,pos:{x:pos.x,y:pos.y}};if(padding){c.pos.x+=
corner.charAt(1)=="L"?padding.x:-padding.x;c.pos.y+=corner.charAt(0)=="T"?padding.y:-padding.y}return c});return dijit._place(node,choices,null,null,appendToNode)};dijit._place=function(node,choices,layoutNode,aroundNodeCoords,appendToNode){var view=dojo.window.getBox();if(!node.parentNode||String(node.parentNode.tagName).toLowerCase()!="body")dojo.body(appendToNode).appendChild(node);var best=null;dojo.some(choices,function(choice){var corner=choice.corner;var pos=choice.pos;var overflow=0;var spaceAvailable=
{w:corner.charAt(1)=="L"?view.l+view.w-pos.x:pos.x-view.l,h:corner.charAt(1)=="T"?view.t+view.h-pos.y:pos.y-view.t};if(layoutNode){var res=layoutNode(node,choice.aroundCorner,corner,spaceAvailable,aroundNodeCoords);overflow=typeof res=="undefined"?0:res}var style=node.style;var oldDisplay=style.display;var oldVis=style.visibility;style.visibility="hidden";style.display="";var mb=dojo.marginBox(node);style.display=oldDisplay;style.visibility=oldVis;var startX=Math.max(view.l,corner.charAt(1)=="L"?
pos.x:pos.x-mb.w),startY=Math.max(view.t,corner.charAt(0)=="T"?pos.y:pos.y-mb.h),endX=Math.min(view.l+view.w,corner.charAt(1)=="L"?startX+mb.w:pos.x),endY=Math.min(view.t+view.h,corner.charAt(0)=="T"?startY+mb.h:pos.y),width=endX-startX,height=endY-startY;overflow+=mb.w-width+(mb.h-height);if(best==null||overflow<best.overflow)best={corner:corner,aroundCorner:choice.aroundCorner,x:startX,y:startY,w:width,h:height,overflow:overflow,spaceAvailable:spaceAvailable};return!overflow});if(best.overflow&&
layoutNode)layoutNode(node,best.aroundCorner,best.corner,best.spaceAvailable,aroundNodeCoords);var l=dojo._isBodyLtr(),s=node.style;s.top=best.y+"px";s[l?"left":"right"]=(l?best.x:view.w-best.x-best.w)+"px";return best};dijit.placeOnScreenAroundNode=function(node,aroundNode,aroundCorners,layoutNode,appendToNode){aroundNode=dojo.byId(aroundNode);var aroundNodePos=dojo.position(aroundNode,true);return dijit._placeOnScreenAroundRect(node,aroundNodePos.x,aroundNodePos.y,aroundNodePos.w,aroundNodePos.h,
aroundCorners,layoutNode,appendToNode)};dijit.placeOnScreenAroundRectangle=function(node,aroundRect,aroundCorners,layoutNode,appendToNode){return dijit._placeOnScreenAroundRect(node,aroundRect.x,aroundRect.y,aroundRect.width,aroundRect.height,aroundCorners,layoutNode,appendToNode)};dijit._placeOnScreenAroundRect=function(node,x,y,width,height,aroundCorners,layoutNode,appendToNode){var offset=dojo._getAbsolutePositionedElementsOffset(appendToNode);x-=offset.x;y-=offset.y;var choices=[];for(var nodeCorner in aroundCorners)choices.push({aroundCorner:nodeCorner,
corner:aroundCorners[nodeCorner],pos:{x:x+(nodeCorner.charAt(1)=="L"?0:width),y:y+(nodeCorner.charAt(0)=="T"?0:height)}});return dijit._place(node,choices,layoutNode,{w:width,h:height},appendToNode)};dijit.placementRegistry=new dojo.AdapterRegistry;dijit.placementRegistry.register("node",function(n,x){return typeof x=="object"&&typeof x.offsetWidth!="undefined"&&typeof x.offsetHeight!="undefined"},dijit.placeOnScreenAroundNode);dijit.placementRegistry.register("rect",function(n,x){return typeof x==
"object"&&"x"in x&&"y"in x&&"width"in x&&"height"in x},dijit.placeOnScreenAroundRectangle);dijit.placeOnScreenAroundElement=function(node,aroundElement,aroundCorners,layoutNode,appendToNode){return dijit.placementRegistry.match.apply(dijit.placementRegistry,arguments)};dijit.getPopupAroundAlignment=function(position,leftToRight){var align={};dojo.forEach(position,function(pos){switch(pos){case "after":align[leftToRight?"BR":"BL"]=leftToRight?"BL":"BR";break;case "before":align[leftToRight?"BL":"BR"]=
leftToRight?"BR":"BL";break;case "below-alt":leftToRight=!leftToRight;case "below":align[leftToRight?"BL":"BR"]=leftToRight?"TL":"TR";align[leftToRight?"BR":"BL"]=leftToRight?"TR":"TL";break;case "above-alt":leftToRight=!leftToRight;case "above":default:align[leftToRight?"TL":"TR"]=leftToRight?"BL":"BR";align[leftToRight?"TR":"TL"]=leftToRight?"BR":"BL";break}});return align}}if(!dojo._hasResource["dijit._base.window"]){dojo._hasResource["dijit._base.window"]=true;dojo.provide("dijit._base.window");
dijit.getDocumentWindow=function(doc){return dojo.window.get(doc)}}if(!dojo._hasResource["dijit._base.popup"]){dojo._hasResource["dijit._base.popup"]=true;dojo.provide("dijit._base.popup");dijit.popup={_stack:[],_beginZIndex:1E3,_idGen:1,_createWrapper:function(widget,appendToNode){var wrapper=widget.declaredClass?widget._popupWrapper:dojo.hasClass(widget.parentNode,"dijitPopup")&&widget.parentNode,node=widget.domNode||widget;if(!wrapper){wrapper=dojo.create("div",{"class":"dijitPopup",style:{display:"none"},
role:"presentation"},dojo.body(appendToNode));wrapper.appendChild(node);dojo.connect(wrapper,"oncontextmenu",function(event){dojo.stopEvent(event)});var s=node.style;s.display="";s.visibility="";s.position="";s.top="0px";if(widget.declaredClass){widget._popupWrapper=wrapper;dojo.connect(widget,"destroy",function(){dojo.destroy(wrapper);delete widget._popupWrapper})}}return wrapper},moveOffScreen:function(widget,appendToNode){var wrapper=this._createWrapper(widget,appendToNode);dojo.style(wrapper,
{visibility:"hidden",top:"-9999px",display:""})},hide:function(widget,appendToNode){var wrapper=this._createWrapper(widget,appendToNode);dojo.style(wrapper,"display","none")},getTopPopup:function(){var stack=this._stack;for(var pi=stack.length-1;pi>0&&stack[pi].parent===stack[pi-1].widget;pi--);return stack[pi]},open:function(args){var stack=this._stack,widget=args.popup,orient=args.orient||((args.parent?args.parent.isLeftToRight():dojo._isBodyLtr())?{"BL":"TL","BR":"TR","TL":"BL","TR":"BR"}:{"BR":"TR",
"BL":"TL","TR":"BR","TL":"BL"}),around=args.around,id=args.around&&args.around.id?args.around.id+"_dropdown":"popup_"+this._idGen++;while(stack.length&&(!args.parent||!dojo.isDescendant(args.parent.domNode,stack[stack.length-1].widget.domNode)))dijit.popup.close(stack[stack.length-1].widget);var wrapper=this._createWrapper(widget,args.appendToNode);dojo.attr(wrapper,{id:id,style:{zIndex:this._beginZIndex+stack.length},"class":"dijitPopup "+(widget.baseClass||widget["class"]||"").split(" ")[0]+"Popup",
dijitPopupParent:args.parent?args.parent.id:""});if(dojo.isIE||dojo.isMoz)if(!widget.bgIframe)widget.bgIframe=new dijit.BackgroundIframe(wrapper);var best=around?dijit.placeOnScreenAroundElement(wrapper,around,orient,widget.orient?dojo.hitch(widget,"orient"):null,args.appendToNode):dijit.placeOnScreen(wrapper,args,orient=="R"?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],args.padding,args.appendToNode);wrapper.style.display="";wrapper.style.visibility="visible";widget.domNode.style.visibility="visible";
var handlers=[];handlers.push(dojo.connect(wrapper,"onkeypress",this,function(evt){if(evt.charOrCode==dojo.keys.ESCAPE&&args.onCancel){dojo.stopEvent(evt);args.onCancel()}else if(evt.charOrCode===dojo.keys.TAB){dojo.stopEvent(evt);var topPopup=this.getTopPopup();if(topPopup&&topPopup.onCancel)topPopup.onCancel()}}));if(widget.onCancel)handlers.push(dojo.connect(widget,"onCancel",args.onCancel));handlers.push(dojo.connect(widget,widget.onExecute?"onExecute":"onChange",this,function(){var topPopup=
this.getTopPopup();if(topPopup&&topPopup.onExecute)topPopup.onExecute()}));stack.push({widget:widget,parent:args.parent,onExecute:args.onExecute,onCancel:args.onCancel,onClose:args.onClose,handlers:handlers});if(widget.onOpen)widget.onOpen(best);return best},close:function(popup){var stack=this._stack;while(popup&&dojo.some(stack,function(elem){return elem.widget==popup})||!popup&&stack.length){var top=stack.pop(),widget=top.widget,onClose=top.onClose;if(widget.onClose)widget.onClose();dojo.forEach(top.handlers,
dojo.disconnect);if(widget&&widget.domNode)this.hide(widget);if(onClose)onClose()}}};dijit._frames=new function(){var queue=[];this.pop=function(){var iframe;if(queue.length){iframe=queue.pop();iframe.style.display=""}else{if(dojo.isIE<9){var html="<iframe src=''"+" style='position: absolute; left: 0px; top: 0px;"+'z-index: -1; filter:Alpha(Opacity="0");\'>';iframe=dojo.doc.createElement(html)}else{iframe=dojo.create("iframe");iframe.src='javascript:""';iframe.className="dijitBackgroundIframe";dojo.style(iframe,
"opacity",.1)}iframe.tabIndex=-1;dijit.setWaiRole(iframe,"presentation")}return iframe};this.push=function(iframe){iframe.style.display="none";queue.push(iframe)}};dijit.BackgroundIframe=function(node){if(!node.id)throw new Error("no id");if(dojo.isIE||dojo.isMoz){var iframe=this.iframe=dijit._frames.pop();node.appendChild(iframe);if(dojo.isIE<7||dojo.isQuirks){this.resize(node);this._conn=dojo.connect(node,"onresize",this,function(){this.resize(node)})}else dojo.style(iframe,{width:"100%",height:"100%"})}};
dojo.extend(dijit.BackgroundIframe,{resize:function(node){if(this.iframe)dojo.style(this.iframe,{width:node.offsetWidth+"px",height:node.offsetHeight+"px"})},destroy:function(){if(this._conn){dojo.disconnect(this._conn);this._conn=null}if(this.iframe){dijit._frames.push(this.iframe);delete this.iframe}}})}if(!dojo._hasResource["dijit._base.scroll"]){dojo._hasResource["dijit._base.scroll"]=true;dojo.provide("dijit._base.scroll");dijit.scrollIntoView=function(node,pos){dojo.window.scrollIntoView(node,
pos)}}if(!dojo._hasResource["dojo.uacss"]){dojo._hasResource["dojo.uacss"]=true;dojo.provide("dojo.uacss");(function(){var d=dojo,html=d.doc.documentElement,ie=d.isIE,opera=d.isOpera,maj=Math.floor,ff=d.isFF,boxModel=d.boxModel.replace(/-/,""),classes={dj_ie:ie,dj_ie6:maj(ie)==6,dj_ie7:maj(ie)==7,dj_ie8:maj(ie)==8,dj_ie9:maj(ie)==9,dj_quirks:d.isQuirks,dj_iequirks:ie&&d.isQuirks,dj_opera:opera,dj_khtml:d.isKhtml,dj_webkit:d.isWebKit,dj_safari:d.isSafari,dj_chrome:d.isChrome,dj_gecko:d.isMozilla,dj_ff3:maj(ff)==
3};classes["dj_"+boxModel]=true;var classStr="";for(var clz in classes)if(classes[clz])classStr+=clz+" ";html.className=d.trim(html.className+" "+classStr);dojo._loaders.unshift(function(){if(!dojo._isBodyLtr()){var rtlClassStr="dj_rtl dijitRtl "+classStr.replace(/ /g,"-rtl ");html.className=d.trim(html.className+" "+rtlClassStr)}})})()}if(!dojo._hasResource["dijit._base.sniff"]){dojo._hasResource["dijit._base.sniff"]=true;dojo.provide("dijit._base.sniff")}if(!dojo._hasResource["dijit._base.typematic"]){dojo._hasResource["dijit._base.typematic"]=
true;dojo.provide("dijit._base.typematic");dijit.typematic={_fireEventAndReload:function(){this._timer=null;this._callback(++this._count,this._node,this._evt);this._currentTimeout=Math.max(this._currentTimeout<0?this._initialDelay:this._subsequentDelay>1?this._subsequentDelay:Math.round(this._currentTimeout*this._subsequentDelay),this._minDelay);this._timer=setTimeout(dojo.hitch(this,"_fireEventAndReload"),this._currentTimeout)},trigger:function(evt,_this,node,callback,obj,subsequentDelay,initialDelay,
minDelay){if(obj!=this._obj){this.stop();this._initialDelay=initialDelay||500;this._subsequentDelay=subsequentDelay||.9;this._minDelay=minDelay||10;this._obj=obj;this._evt=evt;this._node=node;this._currentTimeout=-1;this._count=-1;this._callback=dojo.hitch(_this,callback);this._fireEventAndReload();this._evt=dojo.mixin({faux:true},evt)}},stop:function(){if(this._timer){clearTimeout(this._timer);this._timer=null}if(this._obj){this._callback(-1,this._node,this._evt);this._obj=null}},addKeyListener:function(node,
keyObject,_this,callback,subsequentDelay,initialDelay,minDelay){if(keyObject.keyCode){keyObject.charOrCode=keyObject.keyCode;dojo.deprecated("keyCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0")}else if(keyObject.charCode){keyObject.charOrCode=String.fromCharCode(keyObject.charCode);dojo.deprecated("charCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0")}return[dojo.connect(node,"onkeypress",
this,function(evt){if(evt.charOrCode==keyObject.charOrCode&&(keyObject.ctrlKey===undefined||keyObject.ctrlKey==evt.ctrlKey)&&(keyObject.altKey===undefined||keyObject.altKey==evt.altKey)&&(keyObject.metaKey===undefined||keyObject.metaKey==(evt.metaKey||false))&&(keyObject.shiftKey===undefined||keyObject.shiftKey==evt.shiftKey)){dojo.stopEvent(evt);dijit.typematic.trigger(evt,_this,node,callback,keyObject,subsequentDelay,initialDelay,minDelay)}else if(dijit.typematic._obj==keyObject)dijit.typematic.stop()}),
dojo.connect(node,"onkeyup",this,function(evt){if(dijit.typematic._obj==keyObject)dijit.typematic.stop()})]},addMouseListener:function(node,_this,callback,subsequentDelay,initialDelay,minDelay){var dc=dojo.connect;return[dc(node,"mousedown",this,function(evt){dojo.stopEvent(evt);dijit.typematic.trigger(evt,_this,node,callback,node,subsequentDelay,initialDelay,minDelay)}),dc(node,"mouseup",this,function(evt){dojo.stopEvent(evt);dijit.typematic.stop()}),dc(node,"mouseout",this,function(evt){dojo.stopEvent(evt);
dijit.typematic.stop()}),dc(node,"mousemove",this,function(evt){evt.preventDefault()}),dc(node,"dblclick",this,function(evt){dojo.stopEvent(evt);if(dojo.isIE){dijit.typematic.trigger(evt,_this,node,callback,node,subsequentDelay,initialDelay,minDelay);setTimeout(dojo.hitch(this,dijit.typematic.stop),50)}})]},addListener:function(mouseNode,keyNode,keyObject,_this,callback,subsequentDelay,initialDelay,minDelay){return this.addKeyListener(keyNode,keyObject,_this,callback,subsequentDelay,initialDelay,
minDelay).concat(this.addMouseListener(mouseNode,_this,callback,subsequentDelay,initialDelay,minDelay))}}}if(!dojo._hasResource["dijit._base.wai"]){dojo._hasResource["dijit._base.wai"]=true;dojo.provide("dijit._base.wai");dijit.wai={onload:function(){}};if(dojo.isIE||dojo.isMoz)dojo._loaders.unshift(dijit.wai.onload);dojo.mixin(dijit,{hasWaiRole:function(elem,role){var waiRole=this.getWaiRole(elem);return role?waiRole.indexOf(role)>-1:waiRole.length>0},getWaiRole:function(elem){return dojo.trim((dojo.attr(elem,
"role")||"").replace("wairole:",""))},setWaiRole:function(elem,role){dojo.attr(elem,"role",role)},removeWaiRole:function(elem,role){var roleValue=dojo.attr(elem,"role");if(!roleValue)return;if(role){var t=dojo.trim((" "+roleValue+" ").replace(" "+role+" "," "));dojo.attr(elem,"role",t)}else elem.removeAttribute("role")},hasWaiState:function(elem,state){return elem.hasAttribute?elem.hasAttribute("aria-"+state):!!elem.getAttribute("aria-"+state)},getWaiState:function(elem,state){return elem.getAttribute("aria-"+
state)||""},setWaiState:function(elem,state,value){elem.setAttribute("aria-"+state,value)},removeWaiState:function(elem,state){elem.removeAttribute("aria-"+state)}})}if(!dojo._hasResource["dijit._base"]){dojo._hasResource["dijit._base"]=true;dojo.provide("dijit._base")}if(!dojo._hasResource["dijit._Widget"]){dojo._hasResource["dijit._Widget"]=true;dojo.provide("dijit._Widget");dojo.connect(dojo,"_connect",function(widget,event){if(widget&&dojo.isFunction(widget._onConnect))widget._onConnect(event)});
dijit._connectOnUseEventHandler=function(event){};dijit._lastKeyDownNode=null;if(dojo.isIE)(function(){var keydownCallback=function(evt){dijit._lastKeyDownNode=evt.srcElement};dojo.doc.attachEvent("onkeydown",keydownCallback);dojo.addOnWindowUnload(function(){dojo.doc.detachEvent("onkeydown",keydownCallback)})})();else dojo.doc.addEventListener("keydown",function(evt){dijit._lastKeyDownNode=evt.target},true);(function(){dojo.declare("dijit._Widget",dijit._WidgetBase,{_deferredConnects:{onClick:"",
onDblClick:"",onKeyDown:"",onKeyPress:"",onKeyUp:"",onMouseMove:"",onMouseDown:"",onMouseOut:"",onMouseOver:"",onMouseLeave:"",onMouseEnter:"",onMouseUp:""},onClick:dijit._connectOnUseEventHandler,onDblClick:dijit._connectOnUseEventHandler,onKeyDown:dijit._connectOnUseEventHandler,onKeyPress:dijit._connectOnUseEventHandler,onKeyUp:dijit._connectOnUseEventHandler,onMouseDown:dijit._connectOnUseEventHandler,onMouseMove:dijit._connectOnUseEventHandler,onMouseOut:dijit._connectOnUseEventHandler,onMouseOver:dijit._connectOnUseEventHandler,
onMouseLeave:dijit._connectOnUseEventHandler,onMouseEnter:dijit._connectOnUseEventHandler,onMouseUp:dijit._connectOnUseEventHandler,create:function(params,srcNodeRef){this._deferredConnects=dojo.clone(this._deferredConnects);for(var attr in this.attributeMap)delete this._deferredConnects[attr];for(attr in this._deferredConnects)if(this[attr]!==dijit._connectOnUseEventHandler)delete this._deferredConnects[attr];this.inherited(arguments);if(this.domNode)for(attr in this.params)this._onConnect(attr)},
_onConnect:function(event){if(event in this._deferredConnects){var mapNode=this[this._deferredConnects[event]||"domNode"];this.connect(mapNode,event.toLowerCase(),event);delete this._deferredConnects[event]}},focused:false,isFocusable:function(){return this.focus&&dojo.style(this.domNode,"display")!="none"},onFocus:function(){},onBlur:function(){},_onFocus:function(e){this.onFocus()},_onBlur:function(){this.onBlur()},setAttribute:function(attr,value){dojo.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.",
"","2.0");this.set(attr,value)},attr:function(name,value){if(dojo.config.isDebug){var alreadyCalledHash=arguments.callee._ach||(arguments.callee._ach={}),caller=(arguments.callee.caller||"unknown caller").toString();if(!alreadyCalledHash[caller]){dojo.deprecated(this.declaredClass+"::attr() is deprecated. Use get() or set() instead, called from "+caller,"","2.0");alreadyCalledHash[caller]=true}}var args=arguments.length;if(args>=2||typeof name==="object")return this.set.apply(this,arguments);else return this.get(name)},
nodesWithKeyClick:["input","button"],connect:function(obj,event,method){var d=dojo,dc=d._connect,handles=this.inherited(arguments,[obj,event=="ondijitclick"?"onclick":event,method]);if(event=="ondijitclick")if(d.indexOf(this.nodesWithKeyClick,obj.nodeName.toLowerCase())==-1){var m=d.hitch(this,method);handles.push(dc(obj,"onkeydown",this,function(e){if((e.keyCode==d.keys.ENTER||e.keyCode==d.keys.SPACE)&&!e.ctrlKey&&!e.shiftKey&&!e.altKey&&!e.metaKey){dijit._lastKeyDownNode=e.target;if(!("openDropDown"in
this&&obj==this._buttonNode))e.preventDefault()}}),dc(obj,"onkeyup",this,function(e){if((e.keyCode==d.keys.ENTER||e.keyCode==d.keys.SPACE)&&e.target==dijit._lastKeyDownNode&&!e.ctrlKey&&!e.shiftKey&&!e.altKey&&!e.metaKey){dijit._lastKeyDownNode=null;return m(e)}}))}return handles},_onShow:function(){this.onShow()},onShow:function(){},onHide:function(){},onClose:function(){return true}})})()}if(!dojo._hasResource["dojo.string"]){dojo._hasResource["dojo.string"]=true;dojo.provide("dojo.string");dojo.getObject("string",
true,dojo);dojo.string.rep=function(str,num){if(num<=0||!str)return"";var buf=[];for(;;){if(num&1)buf.push(str);if(!(num>>=1))break;str+=str}return buf.join("")};dojo.string.pad=function(text,size,ch,end){if(!ch)ch="0";var out=String(text),pad=dojo.string.rep(ch,Math.ceil((size-out.length)/ch.length));return end?out+pad:pad+out};dojo.string.substitute=function(template,map,transform,thisObject){thisObject=thisObject||dojo.global;transform=transform?dojo.hitch(thisObject,transform):function(v){return v};
return template.replace(/\$\{([^\s:\}]+)(?::([^\s:\}]+))?\}/g,function(match,key,format){var value=dojo.getObject(key,false,map);if(format)value=dojo.getObject(format,false,thisObject).call(thisObject,value,key);return transform(value,key).toString()})};dojo.string.trim=String.prototype.trim?dojo.trim:function(str){str=str.replace(/^\s+/,"");for(var i=str.length-1;i>=0;i--)if(/\S/.test(str.charAt(i))){str=str.substring(0,i+1);break}return str}}if(!dojo._hasResource["dojo.date.stamp"]){dojo._hasResource["dojo.date.stamp"]=
true;dojo.provide("dojo.date.stamp");dojo.getObject("date.stamp",true,dojo);dojo.date.stamp.fromISOString=function(formattedString,defaultTime){if(!dojo.date.stamp._isoRegExp)dojo.date.stamp._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/;var match=dojo.date.stamp._isoRegExp.exec(formattedString),result=null;if(match){match.shift();if(match[1])match[1]--;if(match[6])match[6]*=1E3;if(defaultTime){defaultTime=new Date(defaultTime);
dojo.forEach(dojo.map(["FullYear","Month","Date","Hours","Minutes","Seconds","Milliseconds"],function(prop){return defaultTime["get"+prop]()}),function(value,index){match[index]=match[index]||value})}result=new Date(match[0]||1970,match[1]||0,match[2]||1,match[3]||0,match[4]||0,match[5]||0,match[6]||0);if(match[0]<100)result.setFullYear(match[0]||1970);var offset=0,zoneSign=match[7]&&match[7].charAt(0);if(zoneSign!="Z"){offset=(match[8]||0)*60+(Number(match[9])||0);if(zoneSign!="-")offset*=-1}if(zoneSign)offset-=
result.getTimezoneOffset();if(offset)result.setTime(result.getTime()+offset*6E4)}return result};dojo.date.stamp.toISOString=function(dateObject,options){var _=function(n){return n<10?"0"+n:n};options=options||{};var formattedDate=[],getter=options.zulu?"getUTC":"get",date="";if(options.selector!="time"){var year=dateObject[getter+"FullYear"]();date=["0000".substr((year+"").length)+year,_(dateObject[getter+"Month"]()+1),_(dateObject[getter+"Date"]())].join("-")}formattedDate.push(date);if(options.selector!=
"date"){var time=[_(dateObject[getter+"Hours"]()),_(dateObject[getter+"Minutes"]()),_(dateObject[getter+"Seconds"]())].join(":");var millis=dateObject[getter+"Milliseconds"]();if(options.milliseconds)time+="."+(millis<100?"0":"")+_(millis);if(options.zulu)time+="Z";else if(options.selector!="time"){var timezoneOffset=dateObject.getTimezoneOffset();var absOffset=Math.abs(timezoneOffset);time+=(timezoneOffset>0?"-":"+")+_(Math.floor(absOffset/60))+":"+_(absOffset%60)}formattedDate.push(time)}return formattedDate.join("T")}}if(!dojo._hasResource["dojo.parser"]){dojo._hasResource["dojo.parser"]=
true;dojo.provide("dojo.parser");new Date("X");dojo.parser=new function(){var d=dojo;function val2type(value){if(d.isString(value))return"string";if(typeof value=="number")return"number";if(typeof value=="boolean")return"boolean";if(d.isFunction(value))return"function";if(d.isArray(value))return"array";if(value instanceof Date)return"date";if(value instanceof d._Url)return"url";return"object"}function str2obj(value,type){switch(type){case "string":return value;case "number":return value.length?Number(value):
NaN;case "boolean":return typeof value=="boolean"?value:!(value.toLowerCase()=="false");case "function":if(d.isFunction(value)){value=value.toString();value=d.trim(value.substring(value.indexOf("{")+1,value.length-1))}try{if(value===""||value.search(/[^\w\.]+/i)!=-1)return new Function(value);else return d.getObject(value,false)||new Function(value)}catch(e){return new Function}case "array":return value?value.split(/\s*,\s*/):[];case "date":switch(value){case "":return new Date("");case "now":return new Date;
default:return d.date.stamp.fromISOString(value)}case "url":return d.baseUrl+value;default:return d.fromJson(value)}}var dummyClass={},instanceClasses={};d.connect(d,"extend",function(){instanceClasses={}});function getProtoInfo(cls,params){for(var name in cls){if(name.charAt(0)=="_")continue;if(name in dummyClass)continue;params[name]=val2type(cls[name])}return params}function getClassInfo(className,skipParamsLookup){var c=instanceClasses[className];if(!c){var cls=d.getObject(className),params=null;
if(!cls)return null;if(!skipParamsLookup)params=getProtoInfo(cls.prototype,{});c={cls:cls,params:params}}else if(!skipParamsLookup&&!c.params)c.params=getProtoInfo(c.cls.prototype,{});return c}this._functionFromScript=function(script,attrData){var preamble="";var suffix="";var argsStr=script.getAttribute(attrData+"args")||script.getAttribute("args");if(argsStr)d.forEach(argsStr.split(/\s*,\s*/),function(part,idx){preamble+="var "+part+" = arguments["+idx+"]; "});var withStr=script.getAttribute("with");
if(withStr&&withStr.length)d.forEach(withStr.split(/\s*,\s*/),function(part){preamble+="with("+part+"){";suffix+="}"});return new Function(preamble+script.innerHTML+suffix)};this.instantiate=function(nodes,mixin,args){var thelist=[],mixin=mixin||{};args=args||{};var attrName=(args.scope||d._scopeName)+"Type",attrData="data-"+(args.scope||d._scopeName)+"-";d.forEach(nodes,function(obj){if(!obj)return;var node,type,clsInfo,clazz,scripts,fastpath;if(obj.node){node=obj.node;type=obj.type;fastpath=obj.fastpath;
clsInfo=obj.clsInfo||type&&getClassInfo(type,fastpath);clazz=clsInfo&&clsInfo.cls;scripts=obj.scripts}else{node=obj;type=attrName in mixin?mixin[attrName]:node.getAttribute(attrName);clsInfo=type&&getClassInfo(type);clazz=clsInfo&&clsInfo.cls;scripts=clazz&&(clazz._noScript||clazz.prototype._noScript)?[]:d.query("> script[type^='dojo/']",node)}if(!clsInfo)throw new Error("Could not load class '"+type);var params={};if(args.defaults)d._mixin(params,args.defaults);if(obj.inherited)d._mixin(params,obj.inherited);
if(fastpath){var extra=node.getAttribute(attrData+"props");if(extra&&extra.length)try{extra=d.fromJson.call(args.propsThis,"{"+extra+"}");d._mixin(params,extra)}catch(e){throw new Error(e.toString()+" in data-dojo-props='"+extra+"'");}var attachPoint=node.getAttribute(attrData+"attach-point");if(attachPoint)params.dojoAttachPoint=attachPoint;var attachEvent=node.getAttribute(attrData+"attach-event");if(attachEvent)params.dojoAttachEvent=attachEvent;dojo.mixin(params,mixin)}else{var attributes=node.attributes;
for(var name in clsInfo.params){var item=name in mixin?{value:mixin[name],specified:true}:attributes.getNamedItem(name);if(!item||!item.specified&&(!dojo.isIE||name.toLowerCase()!="value"))continue;var value=item.value;switch(name){case "class":value="className"in mixin?mixin.className:node.className;break;case "style":value="style"in mixin?mixin.style:node.style&&node.style.cssText}var _type=clsInfo.params[name];if(typeof value=="string")params[name]=str2obj(value,_type);else params[name]=value}}params["appendToNode"]=
args["appendToNode"]||null;var connects=[],calls=[];d.forEach(scripts,function(script){node.removeChild(script);var event=script.getAttribute(attrData+"event")||script.getAttribute("event"),type=script.getAttribute("type"),nf=d.parser._functionFromScript(script,attrData);if(event)if(type=="dojo/connect")connects.push({event:event,func:nf});else params[event]=nf;else calls.push(nf)});var markupFactory=clazz.markupFactory||clazz.prototype&&clazz.prototype.markupFactory;var instance=markupFactory?markupFactory(params,
node,clazz):new clazz(params,node);thelist.push(instance);var jsname=node.getAttribute(attrData+"id")||node.getAttribute("jsId");if(jsname)d.setObject(jsname,instance);d.forEach(connects,function(connect){d.connect(instance,connect.event,null,connect.func)});d.forEach(calls,function(func){func.call(instance)})});if(!mixin._started)d.forEach(thelist,function(instance){if(!args.noStart&&instance&&dojo.isFunction(instance.startup)&&!instance._started&&(!instance.getParent||!instance.getParent()))instance.startup()});
return thelist};this.parse=function(rootNode,args){var root;if(!args&&rootNode&&rootNode.rootNode){args=rootNode;root=args.rootNode}else root=rootNode;args=args||{};var attrName=(args.scope||d._scopeName)+"Type",attrData="data-"+(args.scope||d._scopeName)+"-";function scan(parent,list){var inherited=dojo.clone(parent.inherited);dojo.forEach(["dir","lang"],function(name){var val=parent.node.getAttribute(name);if(val)inherited[name]=val});var scripts=parent.clsInfo&&!parent.clsInfo.cls.prototype._noScript?
parent.scripts:null;var recurse=!parent.clsInfo||!parent.clsInfo.cls.prototype.stopParser||args&&args.template;for(var child=parent.node.firstChild;child;child=child.nextSibling)if(child.nodeType==1){var type,html5=recurse&&child.getAttribute(attrData+"type");if(html5)type=html5;else type=recurse&&child.getAttribute(attrName);var fastpath=html5==type;if(type){var params={"type":type,fastpath:fastpath,clsInfo:getClassInfo(type,fastpath),node:child,scripts:[],inherited:inherited};list.push(params);
scan(params,list)}else if(scripts&&child.nodeName.toLowerCase()=="script"){type=child.getAttribute("type");if(type&&/^dojo\/\w/i.test(type))scripts.push(child)}else if(recurse)scan({node:child,inherited:inherited},list)}}var list=[];scan({node:root?dojo.byId(root):dojo.body(),inherited:args&&args.inherited||{dir:dojo._isBodyLtr()?"ltr":"rtl"}},list);var mixin=args&&args.template?{template:true}:null;return this.instantiate(list,mixin,args)}};(function(){var parseRunner=function(){if(dojo.config.parseOnLoad)dojo.parser.parse()};
if(dojo.getObject("dijit.wai.onload")===dojo._loaders[0])dojo._loaders.splice(1,0,parseRunner);else dojo._loaders.unshift(parseRunner)})()}if(!dojo._hasResource["dojo.cache"]){dojo._hasResource["dojo.cache"]=true;dojo.provide("dojo.cache");var cache={};dojo.cache=function(module,url,value){if(typeof module=="string")var pathObj=dojo.moduleUrl(module,url);else{pathObj=module;value=url}var key=pathObj.toString();var val=value;if(value!=undefined&&!dojo.isString(value))val="value"in value?value.value:
undefined;var sanitize=value&&value.sanitize?true:false;if(typeof val=="string")val=cache[key]=sanitize?dojo.cache._sanitize(val):val;else if(val===null)delete cache[key];else{if(!(key in cache)){val=dojo._getText(key);cache[key]=sanitize?dojo.cache._sanitize(val):val}val=cache[key]}return val};dojo.cache._sanitize=function(val){if(val){val=val.replace(/^\s*<\?xml(\s)+version=['"](\d)*.(\d)*['"](\s)*\?>/im,"");var matches=val.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);if(matches)val=matches[1]}else val=
"";return val}}if(!dojo._hasResource["dijit._Templated"]){dojo._hasResource["dijit._Templated"]=true;dojo.provide("dijit._Templated");dojo.declare("dijit._Templated",null,{templateString:null,templatePath:null,widgetsInTemplate:false,_skipNodeCache:false,_earlyTemplatedStartup:false,appendToNode:null,constructor:function(){this._attachPoints=[];this._attachEvents=[]},_stringRepl:function(tmpl){var className=this.declaredClass,_this=this;return dojo.string.substitute(tmpl,this,function(value,key){if(-1==
key.indexOf("()")){if(key.charAt(0)=="!")value=dojo.getObject(key.substr(1),false,_this)}else value=_this[key.replace("()","")]();if(typeof value=="undefined")throw new Error(className+" template:"+key);if(value==null)return"";return key.charAt(0)=="!"?value:value.toString().replace(/"/g,"&quot;")},this)},buildRendering:function(){var cached=dijit._Templated.getCachedTemplate(this.templatePath,this.templateString,this._skipNodeCache);var node;if(dojo.isString(cached)){node=dojo._toDom(this._stringRepl(cached));
if(node.nodeType!=1)throw new Error("Invalid template: "+cached);}else node=cached.cloneNode(true);this.domNode=node;this.inherited(arguments);this._attachTemplateNodes(node);if(this.widgetsInTemplate){var cw=this._startupWidgets=dojo.parser.parse(node,{noStart:!this._earlyTemplatedStartup,template:true,inherited:{dir:this.dir,lang:this.lang},propsThis:this,scope:"dojo"});this._supportingWidgets=dijit.findWidgets(node);this._attachTemplateNodes(cw,function(n,p){return n[p]})}this._fillContent(this.srcNodeRef)},
_fillContent:function(source){var dest=this.containerNode;if(source&&dest)while(source.hasChildNodes())dest.appendChild(source.firstChild)},_attachTemplateNodes:function(rootNode,getAttrFunc){getAttrFunc=getAttrFunc||function(n,p){return n.getAttribute(p)};var nodes=dojo.isArray(rootNode)?rootNode:rootNode.all||rootNode.getElementsByTagName("*");var x=dojo.isArray(rootNode)?0:-1;for(;x<nodes.length;x++){var baseNode=x==-1?rootNode:nodes[x];if(this.widgetsInTemplate&&(getAttrFunc(baseNode,"dojoType")||
getAttrFunc(baseNode,"data-dojo-type")))continue;var attachPoint=getAttrFunc(baseNode,"dojoAttachPoint")||getAttrFunc(baseNode,"data-dojo-attach-point");if(attachPoint){var point,points=attachPoint.split(/\s*,\s*/);while(point=points.shift()){if(dojo.isArray(this[point]))this[point].push(baseNode);else this[point]=baseNode;this._attachPoints.push(point)}}var attachEvent=getAttrFunc(baseNode,"dojoAttachEvent")||getAttrFunc(baseNode,"data-dojo-attach-event");if(attachEvent){var event,events=attachEvent.split(/\s*,\s*/);
var trim=dojo.trim;while(event=events.shift())if(event){var thisFunc=null;if(event.indexOf(":")!=-1){var funcNameArr=event.split(":");event=trim(funcNameArr[0]);thisFunc=trim(funcNameArr[1])}else event=trim(event);if(!thisFunc)thisFunc=event;this._attachEvents.push(this.connect(baseNode,event,thisFunc))}}var role=getAttrFunc(baseNode,"waiRole");if(role)dijit.setWaiRole(baseNode,role);var values=getAttrFunc(baseNode,"waiState");if(values)dojo.forEach(values.split(/\s*,\s*/),function(stateValue){if(stateValue.indexOf("-")!=
-1){var pair=stateValue.split("-");dijit.setWaiState(baseNode,pair[0],pair[1])}})}},startup:function(){dojo.forEach(this._startupWidgets,function(w){if(w&&!w._started&&w.startup)w.startup()});this.inherited(arguments)},destroyRendering:function(){dojo.forEach(this._attachPoints,function(point){delete this[point]},this);this._attachPoints=[];dojo.forEach(this._attachEvents,this.disconnect,this);this._attachEvents=[];this.inherited(arguments)}});dijit._Templated._templateCache={};dijit._Templated.getCachedTemplate=
function(templatePath,templateString,alwaysUseString){var tmplts=dijit._Templated._templateCache;var key=templateString||templatePath;var cached=tmplts[key];if(cached){try{if(!cached.ownerDocument||cached.ownerDocument==dojo.doc)return cached}catch(e){}dojo.destroy(cached)}if(!templateString)templateString=dojo.cache(templatePath,{sanitize:true});templateString=dojo.string.trim(templateString);if(alwaysUseString||templateString.match(/\$\{([^\}]+)\}/g))return tmplts[key]=templateString;else{var node=
dojo._toDom(templateString);if(node.nodeType!=1)throw new Error("Invalid template: "+templateString);return tmplts[key]=node}};if(dojo.isIE)dojo.addOnWindowUnload(function(){var cache=dijit._Templated._templateCache;for(var key in cache){var value=cache[key];if(typeof value=="object")dojo.destroy(value);delete cache[key]}});dojo.extend(dijit._Widget,{dojoAttachEvent:"",dojoAttachPoint:"",waiRole:"",waiState:""})}if(!dojo._hasResource["dijit.Tooltip"]){dojo._hasResource["dijit.Tooltip"]=true;dojo.provide("dijit.Tooltip");
dojo.declare("dijit._MasterTooltip",[dijit._Widget,dijit._Templated],{duration:dijit.defaultDuration,templateString:dojo.cache("dijit","templates/Tooltip.html",'<div class="dijitTooltip dijitTooltipLeft" id="dojoTooltip"\r\n\t><div class="dijitTooltipContainer dijitTooltipContents" dojoAttachPoint="containerNode" role=\'alert\'></div\r\n\t><div class="dijitTooltipConnector" dojoAttachPoint="connectorNode"></div\r\n></div>\r\n'),postCreate:function(){dojo.body(this.appendToNode).appendChild(this.domNode);
this.bgIframe=new dijit.BackgroundIframe(this.domNode);this.fadeIn=dojo.fadeIn({node:this.domNode,duration:this.duration,onEnd:dojo.hitch(this,"_onShow")});this.fadeOut=dojo.fadeOut({node:this.domNode,duration:this.duration,onEnd:dojo.hitch(this,"_onHide")})},show:function(innerHTML,aroundNode,position,rtl){if(this.aroundNode&&this.aroundNode===aroundNode)return;this.domNode.width="auto";if(this.fadeOut.status()=="playing"){this._onDeck=arguments;return}this.containerNode.innerHTML=innerHTML;var pos=
dijit.placeOnScreenAroundElement(this.domNode,aroundNode,dijit.getPopupAroundAlignment(position&&position.length?position:dijit.Tooltip.defaultPosition,!rtl),dojo.hitch(this,"orient"));dojo.style(this.domNode,"opacity",0);this.fadeIn.play();this.isShowingNow=true;this.aroundNode=aroundNode},orient:function(node,aroundCorner,tooltipCorner,spaceAvailable,aroundNodeCoords){this.connectorNode.style.top="";var tooltipSpaceAvaliableWidth=spaceAvailable.w-this.connectorNode.offsetWidth;node.className="dijitTooltip "+
{"BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[aroundCorner+"-"+tooltipCorner];this.domNode.style.width="auto";var size=dojo.contentBox(this.domNode);var width=Math.min(Math.max(tooltipSpaceAvaliableWidth,1),size.w);var widthWasReduced=width<size.w;this.domNode.style.width=width+"px";if(widthWasReduced){this.containerNode.style.overflow=
"auto";var scrollWidth=this.containerNode.scrollWidth;this.containerNode.style.overflow="visible";if(scrollWidth>width){scrollWidth=scrollWidth+dojo.style(this.domNode,"paddingLeft")+dojo.style(this.domNode,"paddingRight");this.domNode.style.width=scrollWidth+"px"}}if(tooltipCorner.charAt(0)=="B"&&aroundCorner.charAt(0)=="B"){var mb=dojo.marginBox(node);var tooltipConnectorHeight=this.connectorNode.offsetHeight;if(mb.h>spaceAvailable.h){var aroundNodePlacement=spaceAvailable.h-aroundNodeCoords.h/
2-tooltipConnectorHeight/2;this.connectorNode.style.top=aroundNodePlacement+"px";this.connectorNode.style.bottom=""}else{this.connectorNode.style.bottom=Math.min(Math.max(aroundNodeCoords.h/2-tooltipConnectorHeight/2,0),mb.h-tooltipConnectorHeight)+"px";this.connectorNode.style.top=""}}else{this.connectorNode.style.top="";this.connectorNode.style.bottom=""}return Math.max(0,size.w-tooltipSpaceAvaliableWidth)},_onShow:function(){if(dojo.isIE)this.domNode.style.filter=""},hide:function(aroundNode){if(this._onDeck&&
this._onDeck[1]==aroundNode)this._onDeck=null;else if(this.aroundNode===aroundNode){this.fadeIn.stop();this.isShowingNow=false;this.aroundNode=null;this.fadeOut.play()}else;},_onHide:function(){this.domNode.style.cssText="";this.containerNode.innerHTML="";if(this._onDeck){this.show.apply(this,this._onDeck);this._onDeck=null}}});dijit.showTooltip=function(innerHTML,aroundNode,position,rtl){if(!dijit._masterTT)dijit._masterTT=new dijit._MasterTooltip;return dijit._masterTT.show(innerHTML,aroundNode,
position,rtl)};dijit.hideTooltip=function(aroundNode){if(!dijit._masterTT)dijit._masterTT=new dijit._MasterTooltip;return dijit._masterTT.hide(aroundNode)};dojo.declare("dijit.Tooltip",dijit._Widget,{label:"",showDelay:400,connectId:[],position:[],_setConnectIdAttr:function(newId){dojo.forEach(this._connections||[],function(nested){dojo.forEach(nested,dojo.hitch(this,"disconnect"))},this);var ary=dojo.isArrayLike(newId)?newId:newId?[newId]:[];this._connections=dojo.map(ary,function(id){var node=dojo.byId(id);
return node?[this.connect(node,"onmouseenter","_onTargetMouseEnter"),this.connect(node,"onmouseleave","_onTargetMouseLeave"),this.connect(node,"onfocus","_onTargetFocus"),this.connect(node,"onblur","_onTargetBlur")]:[]},this);this._set("connectId",newId);this._connectIds=ary},addTarget:function(node){var id=node.id||node;if(dojo.indexOf(this._connectIds,id)==-1)this.set("connectId",this._connectIds.concat(id))},removeTarget:function(node){var id=node.id||node,idx=dojo.indexOf(this._connectIds,id);
if(idx>=0){this._connectIds.splice(idx,1);this.set("connectId",this._connectIds)}},buildRendering:function(){this.inherited(arguments);dojo.addClass(this.domNode,"dijitTooltipData")},startup:function(){this.inherited(arguments);var ids=this.connectId;dojo.forEach(dojo.isArrayLike(ids)?ids:[ids],this.addTarget,this)},_onTargetMouseEnter:function(e){this._onHover(e)},_onTargetMouseLeave:function(e){this._onUnHover(e)},_onTargetFocus:function(e){this._focus=true;this._onHover(e)},_onTargetBlur:function(e){this._focus=
false;this._onUnHover(e)},_onHover:function(e){if(!this._showTimer){var target=e.target;this._showTimer=setTimeout(dojo.hitch(this,function(){this.open(target)}),this.showDelay)}},_onUnHover:function(e){if(this._focus)return;if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer}this.close()},open:function(target){if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer}dijit.showTooltip(this.label||this.domNode.innerHTML,target,this.position,!this.isLeftToRight());
this._connectNode=target;this.onShow(target,this.position)},close:function(){if(this._connectNode){dijit.hideTooltip(this._connectNode);delete this._connectNode;this.onHide()}if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer}},onShow:function(target,position){},onHide:function(){},uninitialize:function(){this.close();this.inherited(arguments)}});dijit.Tooltip.defaultPosition=["after","before"]}if(!dojo._hasResource["dijit._CssStateMixin"]){dojo._hasResource["dijit._CssStateMixin"]=
true;dojo.provide("dijit._CssStateMixin");dojo.declare("dijit._CssStateMixin",[],{cssStateNodes:{},hovering:false,active:false,_applyAttributes:function(){this.inherited(arguments);dojo.forEach(["onmouseenter","onmouseleave","onmousedown"],function(e){this.connect(this.domNode,e,"_cssMouseEvent")},this);dojo.forEach(["disabled","readOnly","checked","selected","focused","state","hovering","active"],function(attr){this.watch(attr,dojo.hitch(this,"_setStateClass"))},this);for(var ap in this.cssStateNodes)this._trackMouseState(this[ap],
this.cssStateNodes[ap]);this._setStateClass()},_cssMouseEvent:function(event){if(!this.disabled)switch(event.type){case "mouseenter":case "mouseover":this._set("hovering",true);this._set("active",this._mouseDown);break;case "mouseleave":case "mouseout":this._set("hovering",false);this._set("active",false);break;case "mousedown":this._set("active",true);this._mouseDown=true;var mouseUpConnector=this.connect(dojo.body(),"onmouseup",function(){this._mouseDown=false;this._set("active",false);this.disconnect(mouseUpConnector)});
break}},_setStateClass:function(){var newStateClasses=this.baseClass.split(" ");function multiply(modifier){newStateClasses=newStateClasses.concat(dojo.map(newStateClasses,function(c){return c+modifier}),"dijit"+modifier)}if(!this.isLeftToRight())multiply("Rtl");if(this.checked)multiply("Checked");if(this.state)multiply(this.state);if(this.selected)multiply("Selected");if(this.disabled)multiply("Disabled");else if(this.readOnly)multiply("ReadOnly");else if(this.active)multiply("Active");else if(this.hovering)multiply("Hover");
if(this._focused)multiply("Focused");var tn=this.stateNode||this.domNode,classHash={};dojo.forEach(tn.className.split(" "),function(c){classHash[c]=true});if("_stateClasses"in this)dojo.forEach(this._stateClasses,function(c){delete classHash[c]});dojo.forEach(newStateClasses,function(c){classHash[c]=true});var newClasses=[];for(var c in classHash)newClasses.push(c);tn.className=newClasses.join(" ");this._stateClasses=newStateClasses},_trackMouseState:function(node,clazz){var hovering=false,active=
false,focused=false;var self=this,cn=dojo.hitch(this,"connect",node);function setClass(){var disabled="disabled"in self&&self.disabled||"readonly"in self&&self.readonly;dojo.toggleClass(node,clazz+"Hover",hovering&&!active&&!disabled);dojo.toggleClass(node,clazz+"Active",active&&!disabled);dojo.toggleClass(node,clazz+"Focused",focused&&!disabled)}cn("onmouseenter",function(){hovering=true;setClass()});cn("onmouseleave",function(){hovering=false;active=false;setClass()});cn("onmousedown",function(){active=
true;setClass()});cn("onmouseup",function(){active=false;setClass()});cn("onfocus",function(){focused=true;setClass()});cn("onblur",function(){focused=false;setClass()});this.watch("disabled",setClass);this.watch("readOnly",setClass)}})}if(!dojo._hasResource["dijit.form._FormWidget"]){dojo._hasResource["dijit.form._FormWidget"]=true;dojo.provide("dijit.form._FormWidget");dojo.declare("dijit.form._FormWidget",[dijit._Widget,dijit._Templated,dijit._CssStateMixin],{name:"",alt:"",value:"",type:"text",
tabIndex:"0",disabled:false,intermediateChanges:false,scrollOnFocus:true,attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{value:"focusNode",id:"focusNode",tabIndex:"focusNode",alt:"focusNode",title:"focusNode"}),postMixInProperties:function(){this.nameAttrSetting=this.name?'name="'+this.name.replace(/'/g,"&quot;")+'"':"";this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,"onmousedown","_onMouseDown")},_setDisabledAttr:function(value){this._set("disabled",
value);dojo.attr(this.focusNode,"disabled",value);if(this.valueNode)dojo.attr(this.valueNode,"disabled",value);dijit.setWaiState(this.focusNode,"disabled",value);if(value){this._set("hovering",false);this._set("active",false);var attachPointNames="tabIndex"in this.attributeMap?this.attributeMap.tabIndex:"focusNode";dojo.forEach(dojo.isArray(attachPointNames)?attachPointNames:[attachPointNames],function(attachPointName){var node=this[attachPointName];if(dojo.isWebKit||dijit.hasDefaultTabStop(node))node.setAttribute("tabIndex",
"-1");else node.removeAttribute("tabIndex")},this)}else if(this.tabIndex!="")this.focusNode.setAttribute("tabIndex",this.tabIndex)},setDisabled:function(disabled){dojo.deprecated("setDisabled("+disabled+") is deprecated. Use set('disabled',"+disabled+") instead.","","2.0");this.set("disabled",disabled)},_onFocus:function(e){if(this.scrollOnFocus)dojo.window.scrollIntoView(this.domNode);this.inherited(arguments)},isFocusable:function(){return!this.disabled&&this.focusNode&&dojo.style(this.domNode,
"display")!="none"},focus:function(){if(!this.disabled)dijit.focus(this.focusNode)},compare:function(val1,val2){if(typeof val1=="number"&&typeof val2=="number")return isNaN(val1)&&isNaN(val2)?0:val1-val2;else if(val1>val2)return 1;else if(val1<val2)return-1;else return 0},onChange:function(newValue){},_onChangeActive:false,_handleOnChange:function(newValue,priorityChange){if(this._lastValueReported==undefined&&(priorityChange===null||!this._onChangeActive))this._resetValue=this._lastValueReported=
newValue;this._pendingOnChange=this._pendingOnChange||typeof newValue!=typeof this._lastValueReported||this.compare(newValue,this._lastValueReported)!=0;if((this.intermediateChanges||priorityChange||priorityChange===undefined)&&this._pendingOnChange){this._lastValueReported=newValue;this._pendingOnChange=false;if(this._onChangeActive){if(this._onChangeHandle)clearTimeout(this._onChangeHandle);this._onChangeHandle=setTimeout(dojo.hitch(this,function(){this._onChangeHandle=null;this.onChange(newValue)}),
0)}}},create:function(){this.inherited(arguments);this._onChangeActive=true},destroy:function(){if(this._onChangeHandle){clearTimeout(this._onChangeHandle);this.onChange(this._lastValueReported)}this.inherited(arguments)},setValue:function(value){dojo.deprecated("dijit.form._FormWidget:setValue("+value+") is deprecated.  Use set('value',"+value+") instead.","","2.0");this.set("value",value)},getValue:function(){dojo.deprecated(this.declaredClass+"::getValue() is deprecated. Use get('value') instead.",
"","2.0");return this.get("value")},_onMouseDown:function(e){if(!e.ctrlKey&&dojo.mouseButtons.isLeft(e)&&this.isFocusable())var mouseUpConnector=this.connect(dojo.body(),"onmouseup",function(){if(this.isFocusable())this.focus();this.disconnect(mouseUpConnector)})}});dojo.declare("dijit.form._FormValueWidget",dijit.form._FormWidget,{readOnly:false,attributeMap:dojo.delegate(dijit.form._FormWidget.prototype.attributeMap,{value:"",readOnly:"focusNode"}),_setReadOnlyAttr:function(value){dojo.attr(this.focusNode,
"readOnly",value);dijit.setWaiState(this.focusNode,"readonly",value);this._set("readOnly",value)},postCreate:function(){this.inherited(arguments);if(dojo.isIE)this.connect(this.focusNode||this.domNode,"onkeydown",this._onKeyDown);if(this._resetValue===undefined)this._lastValueReported=this._resetValue=this.value},_setValueAttr:function(newValue,priorityChange){this._handleOnChange(newValue,priorityChange)},_handleOnChange:function(newValue,priorityChange){this._set("value",newValue);this.inherited(arguments)},
undo:function(){this._setValueAttr(this._lastValueReported,false)},reset:function(){this._hasBeenBlurred=false;this._setValueAttr(this._resetValue,true)},_onKeyDown:function(e){if(e.keyCode==dojo.keys.ESCAPE&&!(e.ctrlKey||e.altKey||e.metaKey)){var te;if(dojo.isIE){e.preventDefault();te=document.createEventObject();te.keyCode=dojo.keys.ESCAPE;te.shiftKey=e.shiftKey;e.srcElement.fireEvent("onkeypress",te)}}},_layoutHackIE7:function(){if(dojo.isIE==7){var domNode=this.domNode;var parent=domNode.parentNode;
var pingNode=domNode.firstChild||domNode;var origFilter=pingNode.style.filter;var _this=this;while(parent&&parent.clientHeight==0){(function ping(){var disconnectHandle=_this.connect(parent,"onscroll",function(e){_this.disconnect(disconnectHandle);pingNode.style.filter=(new Date).getMilliseconds();setTimeout(function(){pingNode.style.filter=origFilter},0)})})();parent=parent.parentNode}}}})}if(!dojo._hasResource["dijit._Container"]){dojo._hasResource["dijit._Container"]=true;dojo.provide("dijit._Container");
dojo.declare("dijit._Container",null,{isContainer:true,buildRendering:function(){this.inherited(arguments);if(!this.containerNode)this.containerNode=this.domNode},addChild:function(widget,insertIndex){var refNode=this.containerNode;if(insertIndex&&typeof insertIndex=="number"){var children=this.getChildren();if(children&&children.length>=insertIndex){refNode=children[insertIndex-1].domNode;insertIndex="after"}}dojo.place(widget.domNode,refNode,insertIndex);if(this._started&&!widget._started)widget.startup()},
removeChild:function(widget){if(typeof widget=="number")widget=this.getChildren()[widget];if(widget){var node=widget.domNode;if(node&&node.parentNode)node.parentNode.removeChild(node)}},hasChildren:function(){return this.getChildren().length>0},destroyDescendants:function(preserveDom){dojo.forEach(this.getChildren(),function(child){child.destroyRecursive(preserveDom)})},_getSiblingOfChild:function(child,dir){var node=child.domNode,which=dir>0?"nextSibling":"previousSibling";do node=node[which];while(node&&
(node.nodeType!=1||!dijit.byNode(node)));return node&&dijit.byNode(node)},getIndexOfChild:function(child){return dojo.indexOf(this.getChildren(),child)},startup:function(){if(this._started)return;dojo.forEach(this.getChildren(),function(child){child.startup()});this.inherited(arguments)}})}if(!dojo._hasResource["dijit._HasDropDown"]){dojo._hasResource["dijit._HasDropDown"]=true;dojo.provide("dijit._HasDropDown");dojo.declare("dijit._HasDropDown",null,{_buttonNode:null,_arrowWrapperNode:null,_popupStateNode:null,
_aroundNode:null,dropDown:null,autoWidth:true,forceWidth:false,maxHeight:0,dropDownPosition:["below","above"],_stopClickEvents:true,_onDropDownMouseDown:function(e){if(this.disabled||this.readOnly)return;this._docHandler=this.connect(dojo.doc,"onmouseup","_onDropDownMouseUp");this.toggleDropDown()},_onDropDownMouseUp:function(e){if(e&&this._docHandler)this.disconnect(this._docHandler);var dropDown=this.dropDown,overMenu=false;if(e&&this._opened){var c=dojo.position(this._buttonNode,true);if(!(e.pageX>=
c.x&&e.pageX<=c.x+c.w)||!(e.pageY>=c.y&&e.pageY<=c.y+c.h)){var t=e.target;while(t&&!overMenu)if(dojo.hasClass(t,"dijitPopup"))overMenu=true;else t=t.parentNode;if(overMenu){t=e.target;if(dropDown.onItemClick){var menuItem;while(t&&!(menuItem=dijit.byNode(t)))t=t.parentNode;if(menuItem&&menuItem.onClick&&menuItem.getParent)menuItem.getParent().onItemClick(menuItem,e)}return}}}if(this._opened&&dropDown.focus&&dropDown.autoFocus!==false)window.setTimeout(dojo.hitch(dropDown,"focus"),1)},_onDropDownClick:function(e){if(this._stopClickEvents)dojo.stopEvent(e)},
buildRendering:function(){this.inherited(arguments);this._buttonNode=this._buttonNode||this.focusNode||this.domNode;this._popupStateNode=this._popupStateNode||this.focusNode||this._buttonNode;var defaultPos={"after":this.isLeftToRight()?"Right":"Left","before":this.isLeftToRight()?"Left":"Right","above":"Up","below":"Down","left":"Left","right":"Right"}[this.dropDownPosition[0]]||this.dropDownPosition[0]||"Down";dojo.addClass(this._arrowWrapperNode||this._buttonNode,"dijit"+defaultPos+"ArrowButton")},
postCreate:function(){this.inherited(arguments);this.connect(this._buttonNode,"onmousedown","_onDropDownMouseDown");this.connect(this._buttonNode,"onclick","_onDropDownClick");this.connect(this.focusNode,"onkeypress","_onKey")},destroy:function(){if(this.dropDown){if(!this.dropDown._destroyed)this.dropDown.destroyRecursive();delete this.dropDown}this.inherited(arguments)},_onKey:function(e){if(this.disabled||this.readOnly)return;var d=this.dropDown,target=e.target;if(d&&this._opened&&d.handleKey)if(d.handleKey(e)===
false){dojo.stopEvent(e);return}if(d&&this._opened&&e.charOrCode==dojo.keys.ESCAPE){this.closeDropDown();dojo.stopEvent(e)}else if(!this._opened&&(e.charOrCode==dojo.keys.DOWN_ARROW||(e.charOrCode==dojo.keys.ENTER||e.charOrCode==" ")&&((target.tagName||"").toLowerCase()!=="input"||target.type&&target.type.toLowerCase()!=="text"))){this.toggleDropDown();d=this.dropDown;if(d&&d.focus)setTimeout(dojo.hitch(d,"focus"),1);dojo.stopEvent(e)}},_onBlur:function(){var focusMe=dijit._curFocus&&this.dropDown&&
dojo.isDescendant(dijit._curFocus,this.dropDown.domNode);this.closeDropDown(focusMe);this.inherited(arguments)},isLoaded:function(){return true},loadDropDown:function(loadCallback){loadCallback()},toggleDropDown:function(){if(this.disabled||this.readOnly)return;if(!this._opened)if(!this.isLoaded()){this.loadDropDown(dojo.hitch(this,"openDropDown"));return}else this.openDropDown();else this.closeDropDown()},openDropDown:function(){var dropDown=this.dropDown,ddNode=dropDown.domNode,aroundNode=this._aroundNode||
this.domNode,self=this;if(!this._preparedNode){this._preparedNode=true;if(ddNode.style.width)this._explicitDDWidth=true;if(ddNode.style.height)this._explicitDDHeight=true}if(this.maxHeight||this.forceWidth||this.autoWidth){var myStyle={display:"",visibility:"hidden"};if(!this._explicitDDWidth)myStyle.width="";if(!this._explicitDDHeight)myStyle.height="";dojo.style(ddNode,myStyle);var maxHeight=this.maxHeight;if(maxHeight==-1){var viewport=dojo.window.getBox(),position=dojo.position(aroundNode,false);
maxHeight=Math.floor(Math.max(position.y,viewport.h-(position.y+position.h)))}if(dropDown.startup&&!dropDown._started)dropDown.startup();dijit.popup.moveOffScreen(dropDown,this.appendToNode);var mb=dojo._getMarginSize(ddNode);var overHeight=maxHeight&&mb.h>maxHeight;dojo.style(ddNode,{overflowX:"hidden",overflowY:overHeight?"auto":"hidden"});if(overHeight){mb.h=maxHeight;if("w"in mb)mb.w+=16}else delete mb.h;if(this.forceWidth)mb.w=aroundNode.offsetWidth;else if(this.autoWidth)mb.w=Math.max(mb.w,
aroundNode.offsetWidth);else delete mb.w;if(dojo.isFunction(dropDown.resize))dropDown.resize(mb);else dojo.marginBox(ddNode,mb)}var retVal=dijit.popup.open({parent:this,popup:dropDown,around:aroundNode,orient:dijit.getPopupAroundAlignment(this.dropDownPosition&&this.dropDownPosition.length?this.dropDownPosition:["below"],this.isLeftToRight()),appendToNode:this.appendToNode,onExecute:function(){self.closeDropDown(true)},onCancel:function(){self.closeDropDown(true)},onClose:function(){dojo.attr(self._popupStateNode,
"popupActive",false);dojo.removeClass(self._popupStateNode,"dijitHasDropDownOpen");self._opened=false}});dojo.attr(this._popupStateNode,"popupActive","true");dojo.addClass(self._popupStateNode,"dijitHasDropDownOpen");this._opened=true;return retVal},closeDropDown:function(focus){if(this._opened){if(focus)this.focus();dijit.popup.close(this.dropDown);this._opened=false}}})}if(!dojo._hasResource["dijit.form.Button"]){dojo._hasResource["dijit.form.Button"]=true;dojo.provide("dijit.form.Button");dojo.declare("dijit.form.Button",
dijit.form._FormWidget,{label:"",showLabel:true,iconClass:"",type:"button",baseClass:"dijitButton",templateString:dojo.cache("dijit.form","templates/Button.html",'<span class="dijit dijitReset dijitInline"\r\n\t><span class="dijitReset dijitInline dijitButtonNode"\r\n\t\tdojoAttachEvent="ondijitclick:_onButtonClick"\r\n\t\t><div class="dijitReset dijitStretch dijitButtonContents"\r\n\t\t\tdojoAttachPoint="titleNode,focusNode"\r\n\t\t\trole="button" aria-labelledby="${id}_label"\r\n\t\t\t><span class="dijitReset dijitInline dijitIcon" dojoAttachPoint="iconNode"></span\r\n\t\t\t><span class="dijitReset dijitToggleButtonIconChar">&#x25CF;</span\r\n\t\t\t><span class="dijitReset dijitInline dijitButtonText"\r\n\t\t\t\tid="${id}_label"\r\n\t\t\t\tdojoAttachPoint="containerNode"\r\n\t\t\t></span\r\n\t\t></div\r\n\t></span\r\n\t><input ${!nameAttrSetting} type="${type}" value="${value}" class="dijitOffScreen"\r\n\t\tdojoAttachPoint="valueNode"\r\n/></span>\r\n'),
attributeMap:dojo.delegate(dijit.form._FormWidget.prototype.attributeMap,{value:"valueNode"}),_onClick:function(e){if(this.disabled)return false;this._clicked();return this.onClick(e)},_onButtonClick:function(e){if(this._onClick(e)===false)e.preventDefault();else if(this.type=="submit"&&!(this.valueNode||this.focusNode).form||this.type=="button")for(var node=this.domNode;node.parentNode;node=node.parentNode){var widget=dijit.byNode(node);if(widget&&typeof widget._onSubmit=="function"){widget._onSubmit(e);
break}}else if(this.valueNode){this.valueNode.click();e.preventDefault()}},buildRendering:function(){this.inherited(arguments);dojo.setSelectable(this.focusNode,false)},_fillContent:function(source){if(source&&(!this.params||!("label"in this.params)))this.set("label",source.innerHTML)},_setShowLabelAttr:function(val){if(this.containerNode)dojo.toggleClass(this.containerNode,"dijitDisplayNone",!val);this._set("showLabel",val)},onClick:function(e){return true},_clicked:function(e){},setLabel:function(content){dojo.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.",
"","2.0");this.set("label",content)},_setLabelAttr:function(content){this._set("label",content);this.containerNode.innerHTML=content;if(this.showLabel==false&&!this.params.title)this.titleNode.title=dojo.trim(this.containerNode.innerText||this.containerNode.textContent||"")},_setIconClassAttr:function(val){var oldVal=this.iconClass||"dijitNoIcon",newVal=val||"dijitNoIcon";dojo.replaceClass(this.iconNode,newVal,oldVal);this._set("iconClass",val)}});dojo.declare("dijit.form.DropDownButton",[dijit.form.Button,
dijit._Container,dijit._HasDropDown],{baseClass:"dijitDropDownButton",templateString:dojo.cache("dijit.form","templates/DropDownButton.html",'<span class="dijit dijitReset dijitInline"\r\n\tdojoAttachEvent="ondijitclick:_onButtonClick"><span class=\'dijitReset dijitInline dijitButtonNode\'\r\n\t\t dojoAttachPoint="_buttonNode"\r\n\t\t><span class="dijitReset dijitStretch dijitButtonContents"\r\n\t\t\tdojoAttachPoint="focusNode,titleNode,_arrowWrapperNode"\r\n\t\t\trole="button" aria-haspopup="true" aria-labelledby="${id}_label"\r\n\t\t\t><span class="dijitReset dijitInline dijitIcon"\r\n\t\t\t\tdojoAttachPoint="iconNode"\r\n\t\t\t></span\r\n\t\t\t><span class="dijitReset dijitInline dijitButtonText"\r\n\t\t\t\tdojoAttachPoint="containerNode,_popupStateNode"\r\n\t\t\t\tid="${id}_label"\r\n\t\t\t></span\r\n\t\t\t><span class="dijitReset dijitInline dijitArrowButtonInner"></span\r\n\t\t\t><span class="dijitReset dijitInline dijitArrowButtonChar">&#9660;</span\r\n\t\t></span\r\n\t></span\r\n\t><input ${!nameAttrSetting} type="${type}" value="${value}" class="dijitOffScreen"\r\n\t\tdojoAttachPoint="valueNode"\r\n/></span>\r\n'),
_fillContent:function(){if(this.srcNodeRef){var nodes=dojo.query("*",this.srcNodeRef);dijit.form.DropDownButton.superclass._fillContent.call(this,nodes[0]);this.dropDownContainer=this.srcNodeRef}},startup:function(){if(this._started)return;if(!this.dropDown&&this.dropDownContainer){var dropDownNode=dojo.query("[widgetId]",this.dropDownContainer)[0];this.dropDown=dijit.byNode(dropDownNode);delete this.dropDownContainer}if(this.dropDown)dijit.popup.hide(this.dropDown,this.appendToNode);this.inherited(arguments)},
isLoaded:function(){var dropDown=this.dropDown;return!!dropDown&&(!dropDown.href||dropDown.isLoaded)},loadDropDown:function(){var dropDown=this.dropDown;if(!dropDown)return;if(!this.isLoaded()){var handler=dojo.connect(dropDown,"onLoad",this,function(){dojo.disconnect(handler);this.openDropDown()});dropDown.refresh()}else this.openDropDown()},isFocusable:function(){return this.inherited(arguments)&&!this._mouseDown}});dojo.declare("dijit.form.ComboButton",dijit.form.DropDownButton,{templateString:dojo.cache("dijit.form",
"templates/ComboButton.html",'<table class="dijit dijitReset dijitInline dijitLeft"\r\n\tcellspacing=\'0\' cellpadding=\'0\' role="presentation"\r\n\t><tbody role="presentation"><tr role="presentation"\r\n\t\t><td class="dijitReset dijitStretch dijitButtonNode" dojoAttachPoint="buttonNode" dojoAttachEvent="ondijitclick:_onButtonClick,onkeypress:_onButtonKeyPress"\r\n\t\t><div id="${id}_button" class="dijitReset dijitButtonContents"\r\n\t\t\tdojoAttachPoint="titleNode"\r\n\t\t\trole="button" aria-labelledby="${id}_label"\r\n\t\t\t><div class="dijitReset dijitInline dijitIcon" dojoAttachPoint="iconNode" role="presentation"></div\r\n\t\t\t><div class="dijitReset dijitInline dijitButtonText" id="${id}_label" dojoAttachPoint="containerNode" role="presentation"></div\r\n\t\t></div\r\n\t\t></td\r\n\t\t><td id="${id}_arrow" class=\'dijitReset dijitRight dijitButtonNode dijitArrowButton\'\r\n\t\t\tdojoAttachPoint="_popupStateNode,focusNode,_buttonNode"\r\n\t\t\tdojoAttachEvent="onkeypress:_onArrowKeyPress"\r\n\t\t\ttitle="${optionsTitle}"\r\n\t\t\trole="button" aria-haspopup="true"\r\n\t\t\t><div class="dijitReset dijitArrowButtonInner" role="presentation"></div\r\n\t\t\t><div class="dijitReset dijitArrowButtonChar" role="presentation">&#9660;</div\r\n\t\t></td\r\n\t\t><td style="display:none !important;"\r\n\t\t\t><input ${!nameAttrSetting} type="${type}" value="${value}" dojoAttachPoint="valueNode"\r\n\t\t/></td></tr></tbody\r\n></table>\r\n'),
attributeMap:dojo.mixin(dojo.clone(dijit.form.Button.prototype.attributeMap),{id:"",tabIndex:["focusNode","titleNode"],title:"titleNode"}),optionsTitle:"",baseClass:"dijitComboButton",cssStateNodes:{"buttonNode":"dijitButtonNode","titleNode":"dijitButtonContents","_popupStateNode":"dijitDownArrowButton"},_focusedNode:null,_onButtonKeyPress:function(evt){if(evt.charOrCode==dojo.keys[this.isLeftToRight()?"RIGHT_ARROW":"LEFT_ARROW"]){dijit.focus(this._popupStateNode);dojo.stopEvent(evt)}},_onArrowKeyPress:function(evt){if(evt.charOrCode==
dojo.keys[this.isLeftToRight()?"LEFT_ARROW":"RIGHT_ARROW"]){dijit.focus(this.titleNode);dojo.stopEvent(evt)}},focus:function(position){if(!this.disabled)dijit.focus(position=="start"?this.titleNode:this._popupStateNode)}});dojo.declare("dijit.form.ToggleButton",dijit.form.Button,{baseClass:"dijitButton",checked:false,attributeMap:dojo.mixin(dojo.clone(dijit.form.Button.prototype.attributeMap),{checked:"focusNode"}),_clicked:function(evt){this.set("checked",!this.checked)},_setCheckedAttr:function(value,
priorityChange){this._set("checked",value);dojo.attr(this.focusNode||this.domNode,"checked",value);dijit.setWaiState(this.focusNode||this.domNode,"pressed",value);this._handleOnChange(value,priorityChange)},setChecked:function(checked){dojo.deprecated("setChecked("+checked+") is deprecated. Use set('checked',"+checked+") instead.","","2.0");this.set("checked",checked)},reset:function(){this._hasBeenBlurred=false;this.set("checked",this.params.checked||false)}})}if(!dojo._hasResource["dijit.form.TextBox"]){dojo._hasResource["dijit.form.TextBox"]=
true;dojo.provide("dijit.form.TextBox");dojo.declare("dijit.form.TextBox",dijit.form._FormValueWidget,{trim:false,uppercase:false,lowercase:false,propercase:false,maxLength:"",selectOnClick:false,placeHolder:"",templateString:dojo.cache("dijit.form","templates/TextBox.html",'<div class="dijit dijitReset dijitInline dijitLeft" id="widget_${id}" role="presentation"\r\n\t><div class="dijitReset dijitInputField dijitInputContainer"\r\n\t\t><input class="dijitReset dijitInputInner" dojoAttachPoint=\'textbox,focusNode\' autocomplete="off"\r\n\t\t\t${!nameAttrSetting} type=\'${type}\'\r\n\t/></div\r\n></div>\r\n'),
_singleNodeTemplate:'<input class="dijit dijitReset dijitLeft dijitInputField" dojoAttachPoint="textbox,focusNode" autocomplete="off" type="${type}" ${!nameAttrSetting} />',_buttonInputDisabled:dojo.isIE?"disabled":"",baseClass:"dijitTextBox",attributeMap:dojo.delegate(dijit.form._FormValueWidget.prototype.attributeMap,{maxLength:"focusNode"}),postMixInProperties:function(){var type=this.type.toLowerCase();if(this.templateString&&this.templateString.toLowerCase()=="input"||(type=="hidden"||type==
"file")&&this.templateString==dijit.form.TextBox.prototype.templateString)this.templateString=this._singleNodeTemplate;this.inherited(arguments)},_setPlaceHolderAttr:function(v){this._set("placeHolder",v);if(!this._phspan){this._attachPoints.push("_phspan");this._phspan=dojo.create("span",{className:"dijitPlaceHolder dijitInputField"},this.textbox,"after")}this._phspan.innerHTML="";this._phspan.appendChild(document.createTextNode(v));this._updatePlaceHolder()},_updatePlaceHolder:function(){if(this._phspan)this._phspan.style.display=
this.placeHolder&&!this._focused&&!this.textbox.value?"":"none"},_getValueAttr:function(){return this.parse(this.get("displayedValue"),this.constraints)},_setValueAttr:function(value,priorityChange,formattedValue){var filteredValue;if(value!==undefined){filteredValue=this.filter(value);if(typeof formattedValue!="string")if(filteredValue!==null&&(typeof filteredValue!="number"||!isNaN(filteredValue)))formattedValue=this.filter(this.format(filteredValue,this.constraints));else formattedValue=""}if(formattedValue!=
null&&formattedValue!=undefined&&(typeof formattedValue!="number"||!isNaN(formattedValue))&&this.textbox.value!=formattedValue){this.textbox.value=formattedValue;this._set("displayedValue",this.get("displayedValue"))}this._updatePlaceHolder();this.inherited(arguments,[filteredValue,priorityChange])},displayedValue:"",getDisplayedValue:function(){dojo.deprecated(this.declaredClass+"::getDisplayedValue() is deprecated. Use set('displayedValue') instead.","","2.0");return this.get("displayedValue")},
_getDisplayedValueAttr:function(){return this.filter(this.textbox.value)},setDisplayedValue:function(value){dojo.deprecated(this.declaredClass+"::setDisplayedValue() is deprecated. Use set('displayedValue', ...) instead.","","2.0");this.set("displayedValue",value)},_setDisplayedValueAttr:function(value){if(value===null||value===undefined)value="";else if(typeof value!="string")value=String(value);this.textbox.value=value;this._setValueAttr(this.get("value"),undefined);this._set("displayedValue",this.get("displayedValue"))},
format:function(value,constraints){return value==null||value==undefined?"":value.toString?value.toString():value},parse:function(value,constraints){return value},_refreshState:function(){},_onInput:function(e){if(e&&e.type&&/key/i.test(e.type)&&e.keyCode)switch(e.keyCode){case dojo.keys.SHIFT:case dojo.keys.ALT:case dojo.keys.CTRL:case dojo.keys.TAB:return}if(this.intermediateChanges){var _this=this;setTimeout(function(){_this._handleOnChange(_this.get("value"),false)},0)}this._refreshState();this._set("displayedValue",
this.get("displayedValue"))},postCreate:function(){if(dojo.isIE)setTimeout(dojo.hitch(this,function(){var s=dojo.getComputedStyle(this.domNode);if(s){var ff=s.fontFamily;if(ff){var inputs=this.domNode.getElementsByTagName("INPUT");if(inputs)for(var i=0;i<inputs.length;i++)inputs[i].style.fontFamily=ff}}}),0);this.textbox.setAttribute("value",this.textbox.value);this.inherited(arguments);if(dojo.isMoz||dojo.isOpera)this.connect(this.textbox,"oninput","_onInput");else{this.connect(this.textbox,"onkeydown",
"_onInput");this.connect(this.textbox,"onkeyup","_onInput");this.connect(this.textbox,"onpaste","_onInput");this.connect(this.textbox,"oncut","_onInput")}},_blankValue:"",filter:function(val){if(val===null)return this._blankValue;if(typeof val!="string")return val;if(this.trim)val=dojo.trim(val);if(this.uppercase)val=val.toUpperCase();if(this.lowercase)val=val.toLowerCase();if(this.propercase)val=val.replace(/[^\s]+/g,function(word){return word.substring(0,1).toUpperCase()+word.substring(1)});return val},
_setBlurValue:function(){this._setValueAttr(this.get("value"),true)},_onBlur:function(e){if(this.disabled)return;this._setBlurValue();this.inherited(arguments);if(this._selectOnClickHandle)this.disconnect(this._selectOnClickHandle);if(this.selectOnClick&&dojo.isMoz)this.textbox.selectionStart=this.textbox.selectionEnd=undefined;this._updatePlaceHolder()},_onFocus:function(by){if(this.disabled||this.readOnly)return;if(this.selectOnClick&&by=="mouse")this._selectOnClickHandle=this.connect(this.domNode,
"onmouseup",function(){this.disconnect(this._selectOnClickHandle);var textIsNotSelected;if(dojo.isIE){var range=dojo.doc.selection.createRange();var parent=range.parentElement();textIsNotSelected=parent==this.textbox&&range.text.length==0}else textIsNotSelected=this.textbox.selectionStart==this.textbox.selectionEnd;if(textIsNotSelected)dijit.selectInputText(this.textbox)});this._updatePlaceHolder();this.inherited(arguments);this._refreshState()},reset:function(){this.textbox.value="";this.inherited(arguments)}});
dijit.selectInputText=function(element,start,stop){var _window=dojo.global;var _document=dojo.doc;element=dojo.byId(element);if(isNaN(start))start=0;if(isNaN(stop))stop=element.value?element.value.length:0;dijit.focus(element);if(_document["selection"]&&dojo.body()["createTextRange"]){if(element.createTextRange){var r=element.createTextRange();r.collapse(true);r.moveStart("character",-99999);r.moveStart("character",start);r.moveEnd("character",stop-start);r.select()}}else if(_window["getSelection"])if(element.setSelectionRange)element.setSelectionRange(start,
stop)}}if(!dojo._hasResource["dijit._KeyNavContainer"]){dojo._hasResource["dijit._KeyNavContainer"]=true;dojo.provide("dijit._KeyNavContainer");dojo.declare("dijit._KeyNavContainer",dijit._Container,{tabIndex:"0",_keyNavCodes:{},connectKeyNavHandlers:function(prevKeyCodes,nextKeyCodes){var keyCodes=this._keyNavCodes={};var prev=dojo.hitch(this,this.focusPrev);var next=dojo.hitch(this,this.focusNext);dojo.forEach(prevKeyCodes,function(code){keyCodes[code]=prev});dojo.forEach(nextKeyCodes,function(code){keyCodes[code]=
next});keyCodes[dojo.keys.HOME]=dojo.hitch(this,"focusFirstChild");keyCodes[dojo.keys.END]=dojo.hitch(this,"focusLastChild");this.connect(this.domNode,"onkeypress","_onContainerKeypress");this.connect(this.domNode,"onfocus","_onContainerFocus")},startupKeyNavChildren:function(){dojo.forEach(this.getChildren(),dojo.hitch(this,"_startupChild"))},addChild:function(widget,insertIndex){dijit._KeyNavContainer.superclass.addChild.apply(this,arguments);this._startupChild(widget)},focus:function(){this.focusFirstChild()},
focusFirstChild:function(){var child=this._getFirstFocusableChild();if(child)this.focusChild(child)},focusLastChild:function(){var child=this._getLastFocusableChild();if(child)this.focusChild(child)},focusNext:function(){var child=this._getNextFocusableChild(this.focusedChild,1);this.focusChild(child)},focusPrev:function(){var child=this._getNextFocusableChild(this.focusedChild,-1);this.focusChild(child,true)},focusChild:function(widget,last){if(this.focusedChild&&widget!==this.focusedChild)this._onChildBlur(this.focusedChild);
widget.focus(last?"end":"start");this._set("focusedChild",widget)},_startupChild:function(widget){widget.set("tabIndex","-1");this.connect(widget,"_onFocus",function(){widget.set("tabIndex",this.tabIndex)});this.connect(widget,"_onBlur",function(){widget.set("tabIndex","-1")})},_onContainerFocus:function(evt){if(evt.target!==this.domNode)return;this.focusFirstChild();dojo.attr(this.domNode,"tabIndex","-1")},_onBlur:function(evt){if(this.tabIndex)dojo.attr(this.domNode,"tabIndex",this.tabIndex);this.inherited(arguments)},
_onContainerKeypress:function(evt){if(evt.ctrlKey||evt.altKey)return;var func=this._keyNavCodes[evt.charOrCode];if(func){func();dojo.stopEvent(evt)}},_onChildBlur:function(widget){},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1)},_getLastFocusableChild:function(){return this._getNextFocusableChild(null,-1)},_getNextFocusableChild:function(child,dir){if(child)child=this._getSiblingOfChild(child,dir);var children=this.getChildren();for(var i=0;i<children.length;i++){if(!child)child=
children[dir>0?0:children.length-1];if(child.isFocusable())return child;child=this._getSiblingOfChild(child,dir)}return null}})}if(!dojo._hasResource["dijit.ToolbarSeparator"]){dojo._hasResource["dijit.ToolbarSeparator"]=true;dojo.provide("dijit.ToolbarSeparator");dojo.declare("dijit.ToolbarSeparator",[dijit._Widget,dijit._Templated],{templateString:'<div class="dijitToolbarSeparator dijitInline" role="presentation"></div>',buildRendering:function(){this.inherited(arguments);dojo.setSelectable(this.domNode,
false)},isFocusable:function(){return false}})}if(!dojo._hasResource["dijit.Toolbar"]){dojo._hasResource["dijit.Toolbar"]=true;dojo.provide("dijit.Toolbar");dojo.declare("dijit.Toolbar",[dijit._Widget,dijit._Templated,dijit._KeyNavContainer],{templateString:'<div class="dijit" role="toolbar" tabIndex="${tabIndex}" dojoAttachPoint="containerNode">'+"</div>",baseClass:"dijitToolbar",postCreate:function(){this.inherited(arguments);this.connectKeyNavHandlers(this.isLeftToRight()?[dojo.keys.LEFT_ARROW]:
[dojo.keys.RIGHT_ARROW],this.isLeftToRight()?[dojo.keys.RIGHT_ARROW]:[dojo.keys.LEFT_ARROW])},startup:function(){if(this._started)return;this.startupKeyNavChildren();this.inherited(arguments)}})}if(!dojo._hasResource["dijit._Contained"]){dojo._hasResource["dijit._Contained"]=true;dojo.provide("dijit._Contained");dojo.declare("dijit._Contained",null,{getParent:function(){var parent=dijit.getEnclosingWidget(this.domNode.parentNode);return parent&&parent.isContainer?parent:null},_getSibling:function(which){var node=
this.domNode;do node=node[which+"Sibling"];while(node&&node.nodeType!=1);return node&&dijit.byNode(node)},getPreviousSibling:function(){return this._getSibling("previous")},getNextSibling:function(){return this._getSibling("next")},getIndexInParent:function(){var p=this.getParent();if(!p||!p.getIndexOfChild)return-1;return p.getIndexOfChild(this)}})}if(!dojo._hasResource["dijit.layout._LayoutWidget"]){dojo._hasResource["dijit.layout._LayoutWidget"]=true;dojo.provide("dijit.layout._LayoutWidget");
dojo.declare("dijit.layout._LayoutWidget",[dijit._Widget,dijit._Container,dijit._Contained],{baseClass:"dijitLayoutContainer",isLayoutContainer:true,buildRendering:function(){this.inherited(arguments);dojo.addClass(this.domNode,"dijitContainer")},startup:function(){if(this._started)return;this.inherited(arguments);var parent=this.getParent&&this.getParent();if(!(parent&&parent.isLayoutContainer)){this.resize();this.connect(dojo.isIE?this.domNode:dojo.global,"onresize",function(){this.resize()})}},
resize:function(changeSize,resultSize){var node=this.domNode;if(changeSize){dojo.marginBox(node,changeSize);if(changeSize.t)node.style.top=changeSize.t+"px";if(changeSize.l)node.style.left=changeSize.l+"px"}var mb=resultSize||{};dojo.mixin(mb,changeSize||{});if(!("h"in mb)||!("w"in mb))mb=dojo.mixin(dojo.marginBox(node),mb);var cs=dojo.getComputedStyle(node);var me=dojo._getMarginExtents(node,cs);var be=dojo._getBorderExtents(node,cs);var bb=this._borderBox={w:mb.w-(me.w+be.w),h:mb.h-(me.h+be.h)};
var pe=dojo._getPadExtents(node,cs);this._contentBox={l:dojo._toPixelValue(node,cs.paddingLeft),t:dojo._toPixelValue(node,cs.paddingTop),w:bb.w-pe.w,h:bb.h-pe.h};this.layout()},layout:function(){},_setupChild:function(child){var cls=this.baseClass+"-child "+(child.baseClass?this.baseClass+"-"+child.baseClass:"");dojo.addClass(child.domNode,cls)},addChild:function(child,insertIndex){this.inherited(arguments);if(this._started)this._setupChild(child)},removeChild:function(child){var cls=this.baseClass+
"-child"+(child.baseClass?" "+this.baseClass+"-"+child.baseClass:"");dojo.removeClass(child.domNode,cls);this.inherited(arguments)}});dijit.layout.marginBox2contentBox=function(node,mb){var cs=dojo.getComputedStyle(node);var me=dojo._getMarginExtents(node,cs);var pb=dojo._getPadBorderExtents(node,cs);return{l:dojo._toPixelValue(node,cs.paddingLeft),t:dojo._toPixelValue(node,cs.paddingTop),w:mb.w-(me.w+pb.w),h:mb.h-(me.h+pb.h)}};(function(){var capitalize=function(word){return word.substring(0,1).toUpperCase()+
word.substring(1)};var size=function(widget,dim){widget.resize?widget.resize(dim):dojo.marginBox(widget.domNode,dim);dojo.mixin(widget,dojo.marginBox(widget.domNode));dojo.mixin(widget,dim)};dijit.layout.layoutChildren=function(container,dim,children,changedRegionId,changedRegionSize){dim=dojo.mixin({},dim);dojo.addClass(container,"dijitLayoutContainer");children=dojo.filter(children,function(item){return item.region!="center"&&item.layoutAlign!="client"}).concat(dojo.filter(children,function(item){return item.region==
"center"||item.layoutAlign=="client"}));dojo.forEach(children,function(child){var elm=child.domNode,pos=child.region||child.layoutAlign;var elmStyle=elm.style;elmStyle.left=dim.l+"px";elmStyle.top=dim.t+"px";elmStyle.bottom=elmStyle.right="auto";dojo.addClass(elm,"dijitAlign"+capitalize(pos));var sizeSetting={};if(changedRegionId&&changedRegionId==child.id)sizeSetting[child.region=="top"||child.region=="bottom"?"h":"w"]=changedRegionSize;if(pos=="top"||pos=="bottom"){sizeSetting.w=dim.w;size(child,
sizeSetting);dim.h-=child.h;if(pos=="top")dim.t+=child.h;else elmStyle.top=dim.t+dim.h+"px"}else if(pos=="left"||pos=="right"){sizeSetting.h=dim.h;size(child,sizeSetting);dim.w-=child.w;if(pos=="left")dim.l+=child.w;else elmStyle.left=dim.l+dim.w+"px"}else if(pos=="client"||pos=="center")size(child,dim)})}})()}if(!dojo._hasResource["dijit.layout._ContentPaneResizeMixin"]){dojo._hasResource["dijit.layout._ContentPaneResizeMixin"]=true;dojo.provide("dijit.layout._ContentPaneResizeMixin");dojo.declare("dijit.layout._ContentPaneResizeMixin",
null,{doLayout:true,isContainer:true,isLayoutContainer:true,_startChildren:function(){dojo.forEach(this.getChildren(),function(child){child.startup();child._started=true})},startup:function(){if(this._started)return;var parent=dijit._Contained.prototype.getParent.call(this);this._childOfLayoutWidget=parent&&parent.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;this.inherited(arguments);this._startChildren()},_checkIfSingleChild:function(){var childNodes=dojo.query("> *",this.containerNode).filter(function(node){return node.tagName!==
"SCRIPT"}),childWidgetNodes=childNodes.filter(function(node){return dojo.hasAttr(node,"data-dojo-type")||dojo.hasAttr(node,"dojoType")||dojo.hasAttr(node,"widgetId")}),candidateWidgets=dojo.filter(childWidgetNodes.map(dijit.byNode),function(widget){return widget&&widget.domNode&&widget.resize});if(childNodes.length==childWidgetNodes.length&&candidateWidgets.length==1)this._singleChild=candidateWidgets[0];else delete this._singleChild;dojo.toggleClass(this.containerNode,this.baseClass+"SingleChild",
!!this._singleChild)},resize:function(changeSize,resultSize){this._layout(changeSize,resultSize)},_layout:function(changeSize,resultSize){if(changeSize)dojo.marginBox(this.domNode,changeSize);var cn=this.containerNode;if(cn===this.domNode){var mb=resultSize||{};dojo.mixin(mb,changeSize||{});if(!("h"in mb)||!("w"in mb))mb=dojo.mixin(dojo.marginBox(cn),mb);this._contentBox=dijit.layout.marginBox2contentBox(cn,mb)}else this._contentBox=dojo.contentBox(cn);this._layoutChildren();delete this._needLayout},
_layoutChildren:function(){if(this.doLayout)this._checkIfSingleChild();if(this._singleChild&&this._singleChild.resize){var cb=this._contentBox||dojo.contentBox(this.containerNode);this._singleChild.resize({w:cb.w,h:cb.h})}else dojo.forEach(this.getChildren(),function(widget){if(widget.resize)widget.resize()})}})}if(!dojo._hasResource["dojo.html"]){dojo._hasResource["dojo.html"]=true;dojo.provide("dojo.html");dojo.getObject("html",true,dojo);(function(){var idCounter=0,d=dojo;dojo.html._secureForInnerHtml=
function(cont){return cont.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,"")};dojo.html._emptyNode=dojo.empty;dojo.html._setNodeContent=function(node,cont){d.empty(node);if(cont){if(typeof cont=="string")cont=d._toDom(cont,node.ownerDocument);if(!cont.nodeType&&d.isArrayLike(cont))for(var startlen=cont.length,i=0;i<cont.length;i=startlen==cont.length?i+1:0)d.place(cont[i],node,"last");else d.place(cont,node,"last")}return node};dojo.declare("dojo.html._ContentSetter",null,{node:"",
content:"",id:"",cleanContent:false,extractContent:false,parseContent:false,parserScope:dojo._scopeName,startup:true,constructor:function(params,node){dojo.mixin(this,params||{});node=this.node=dojo.byId(this.node||node);if(!this.id)this.id=["Setter",node?node.id||node.tagName:"",idCounter++].join("_")},set:function(cont,params){if(undefined!==cont)this.content=cont;if(params)this._mixin(params);this.onBegin();this.setContent();this.onEnd();return this.node},setContent:function(){var node=this.node;
if(!node)throw new Error(this.declaredClass+": setContent given no node");try{node=dojo.html._setNodeContent(node,this.content)}catch(e){var errMess=this.onContentError(e);try{node.innerHTML=errMess}catch(e){console.error("Fatal "+this.declaredClass+".setContent could not change content due to "+e.message,e)}}this.node=node},empty:function(){if(this.parseResults&&this.parseResults.length){dojo.forEach(this.parseResults,function(w){if(w.destroy)w.destroy()});delete this.parseResults}dojo.html._emptyNode(this.node)},
onBegin:function(){var cont=this.content;if(dojo.isString(cont)){if(this.cleanContent)cont=dojo.html._secureForInnerHtml(cont);if(this.extractContent){var match=cont.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);if(match)cont=match[1]}}this.empty();this.content=cont;return this.node},onEnd:function(){if(this.parseContent)this._parse();return this.node},tearDown:function(){delete this.parseResults;delete this.node;delete this.content},onContentError:function(err){return"Error occurred setting content: "+
err},_mixin:function(params){var empty={},key;for(key in params){if(key in empty)continue;this[key]=params[key]}},_parse:function(){var rootNode=this.node;try{this.parseResults=dojo.parser.parse({rootNode:rootNode,noStart:!this.startup,inherited:{dir:this.dir,lang:this.lang},scope:this.parserScope})}catch(e){this._onError("Content",e,"Error parsing in _ContentSetter#"+this.id)}},_onError:function(type,err,consoleText){var errText=this["on"+type+"Error"].call(this,err);if(consoleText)console.error(consoleText,
err);else if(errText)dojo.html._setNodeContent(this.node,errText,true)}});dojo.html.set=function(node,cont,params){if(undefined==cont){console.warn("dojo.html.set: no cont argument provided, using empty string");cont=""}if(!params)return dojo.html._setNodeContent(node,cont,true);else{var op=new dojo.html._ContentSetter(dojo.mixin(params,{content:cont,node:node}));return op.set()}}})()}if(!dojo._hasResource["dojo.i18n"]){dojo._hasResource["dojo.i18n"]=true;dojo.provide("dojo.i18n");dojo.getObject("i18n",
true,dojo);dojo.i18n.getLocalization=dojo.i18n.getLocalization||function(packageName,bundleName,locale){locale=dojo.i18n.normalizeLocale(locale);var elements=locale.split("-");var module=[packageName,"nls",bundleName].join(".");var bundle=dojo._loadedModules[module];if(bundle){var localization;for(var i=elements.length;i>0;i--){var loc=elements.slice(0,i).join("_");if(bundle[loc]){localization=bundle[loc];break}}if(!localization)localization=bundle.ROOT;if(localization){var clazz=function(){};clazz.prototype=
localization;return new clazz}}throw new Error("Bundle not found: "+bundleName+" in "+packageName+" , locale="+locale);};dojo.i18n.normalizeLocale=function(locale){var result=locale?locale.toLowerCase():dojo.locale;if(result=="root")result="ROOT";return result};dojo.i18n._requireLocalization=function(moduleName,bundleName,locale,availableFlatLocales){var targetLocale=dojo.i18n.normalizeLocale(locale);var bundlePackage=[moduleName,"nls",bundleName].join(".");var bestLocale="";if(availableFlatLocales){var flatLocales=
availableFlatLocales.split(",");for(var i=0;i<flatLocales.length;i++)if(targetLocale["indexOf"](flatLocales[i])==0)if(flatLocales[i].length>bestLocale.length)bestLocale=flatLocales[i];if(!bestLocale)bestLocale="ROOT"}var tempLocale=availableFlatLocales?bestLocale:targetLocale;var bundle=dojo._loadedModules[bundlePackage];var localizedBundle=null;if(bundle){if(dojo.config.localizationComplete&&bundle._built)return;var jsLoc=tempLocale.replace(/-/g,"_");var translationPackage=bundlePackage+"."+jsLoc;
localizedBundle=dojo._loadedModules[translationPackage]}if(!localizedBundle){bundle=dojo["provide"](bundlePackage);var syms=dojo._getModuleSymbols(moduleName);var modpath=syms.concat("nls").join("/");var parent;dojo.i18n._searchLocalePath(tempLocale,availableFlatLocales,function(loc){var jsLoc=loc.replace(/-/g,"_");var translationPackage=bundlePackage+"."+jsLoc;var loaded=false;if(!dojo._loadedModules[translationPackage]){dojo["provide"](translationPackage);var module=[modpath];if(loc!="ROOT")module.push(loc);
module.push(bundleName);var filespec=module.join("/")+".js";loaded=dojo._loadPath(filespec,null,function(hash){hash=hash.root||hash;var clazz=function(){};clazz.prototype=parent;bundle[jsLoc]=new clazz;for(var j in hash)bundle[jsLoc][j]=hash[j]})}else loaded=true;if(loaded&&bundle[jsLoc])parent=bundle[jsLoc];else bundle[jsLoc]=parent;if(availableFlatLocales)return true})}if(availableFlatLocales&&targetLocale!=bestLocale)bundle[targetLocale.replace(/-/g,"_")]=bundle[bestLocale.replace(/-/g,"_")]};
(function(){var extra=dojo.config.extraLocale;if(extra){if(!extra instanceof Array)extra=[extra];var req=dojo.i18n._requireLocalization;dojo.i18n._requireLocalization=function(m,b,locale,availableFlatLocales){req(m,b,locale,availableFlatLocales);if(locale)return;for(var i=0;i<extra.length;i++)req(m,b,extra[i],availableFlatLocales)}}})();dojo.i18n._searchLocalePath=function(locale,down,searchFunc){locale=dojo.i18n.normalizeLocale(locale);var elements=locale.split("-");var searchlist=[];for(var i=elements.length;i>
0;i--)searchlist.push(elements.slice(0,i).join("-"));searchlist.push(false);if(down)searchlist.reverse();for(var j=searchlist.length-1;j>=0;j--){var loc=searchlist[j]||"ROOT";var stop=searchFunc(loc);if(stop)break}};dojo.i18n._preloadLocalizations=function(bundlePrefix,localesGenerated){function preload(locale){locale=dojo.i18n.normalizeLocale(locale);dojo.i18n._searchLocalePath(locale,true,function(loc){for(var i=0;i<localesGenerated.length;i++)if(localesGenerated[i]==loc){dojo["require"](bundlePrefix+
"_"+loc);return true}return false})}preload();var extra=dojo.config.extraLocale||[];for(var i=0;i<extra.length;i++)preload(extra[i])}}if(!dojo._hasResource["dijit.layout.ContentPane"]){dojo._hasResource["dijit.layout.ContentPane"]=true;dojo.provide("dijit.layout.ContentPane");dojo.declare("dijit.layout.ContentPane",[dijit._Widget,dijit.layout._ContentPaneResizeMixin],{href:"",extractContent:false,parseOnLoad:true,parserScope:dojo._scopeName,preventCache:false,preload:false,refreshOnShow:false,loadingMessage:"<span class='dijitContentPaneLoading'>${loadingState}</span>",
errorMessage:"<span class='dijitContentPaneError'>${errorState}</span>",isLoaded:false,baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{title:[]}),stopParser:true,template:false,create:function(params,srcNodeRef){if((!params||!params.template)&&srcNodeRef&&!("href"in params)&&!("content"in params)){var df=dojo.doc.createDocumentFragment();srcNodeRef=dojo.byId(srcNodeRef);while(srcNodeRef.firstChild)df.appendChild(srcNodeRef.firstChild);
params=dojo.delegate(params,{content:df})}this.inherited(arguments,[params,srcNodeRef])},postMixInProperties:function(){this.inherited(arguments);var messages=dojo.i18n.getLocalization("dijit","loading",this.lang);this.loadingMessage=dojo.string.substitute(this.loadingMessage,messages);this.errorMessage=dojo.string.substitute(this.errorMessage,messages)},buildRendering:function(){this.inherited(arguments);if(!this.containerNode)this.containerNode=this.domNode;this.domNode.title="";if(!dojo.attr(this.domNode,
"role"))dijit.setWaiRole(this.domNode,"group")},_startChildren:function(){this.inherited(arguments);if(this._contentSetter)dojo.forEach(this._contentSetter.parseResults,function(obj){if(!obj._started&&!obj._destroyed&&dojo.isFunction(obj.startup)){obj.startup();obj._started=true}},this)},startup:function(){if(this._started)return;this.inherited(arguments);if(this._isShown())this._onShow()},setHref:function(href){dojo.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.",
"","2.0");return this.set("href",href)},_setHrefAttr:function(href){this.cancel();this.onLoadDeferred=new dojo.Deferred(dojo.hitch(this,"cancel"));this.onLoadDeferred.addCallback(dojo.hitch(this,"onLoad"));this._set("href",href);if(this.preload||this._created&&this._isShown())this._load();else this._hrefChanged=true;return this.onLoadDeferred},setContent:function(data){dojo.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0");this.set("content",
data)},_setContentAttr:function(data){this._set("href","");this.cancel();this.onLoadDeferred=new dojo.Deferred(dojo.hitch(this,"cancel"));if(this._created)this.onLoadDeferred.addCallback(dojo.hitch(this,"onLoad"));this._setContent(data||"");this._isDownloaded=false;return this.onLoadDeferred},_getContentAttr:function(){return this.containerNode.innerHTML},cancel:function(){if(this._xhrDfd&&this._xhrDfd.fired==-1)this._xhrDfd.cancel();delete this._xhrDfd;this.onLoadDeferred=null},uninitialize:function(){if(this._beingDestroyed)this.cancel();
this.inherited(arguments)},destroyRecursive:function(preserveDom){if(this._beingDestroyed)return;this.inherited(arguments)},resize:function(changeSize,resultSize){if(!this._wasShown&&this.open!==false)this._onShow();this._resizeCalled=true;this._scheduleLayout(changeSize,resultSize)},_isShown:function(){if(this._childOfLayoutWidget){if(this._resizeCalled&&"open"in this)return this.open;return this._resizeCalled}else if("open"in this)return this.open;else{var node=this.domNode,parent=this.domNode.parentNode;
return node.style.display!="none"&&node.style.visibility!="hidden"&&!dojo.hasClass(node,"dijitHidden")&&parent&&parent.style&&parent.style.display!="none"}},_onShow:function(){if(this.href){if(!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow))var d=this.refresh()}else if(this._needLayout)this._layout(this._changeSize,this._resultSize);this.inherited(arguments);this._wasShown=true;return d},refresh:function(){this.cancel();this.onLoadDeferred=new dojo.Deferred(dojo.hitch(this,
"cancel"));this.onLoadDeferred.addCallback(dojo.hitch(this,"onLoad"));this._load();return this.onLoadDeferred},_load:function(){this._setContent(this.onDownloadStart(),true);var self=this;var getArgs={preventCache:this.preventCache||this.refreshOnShow,url:this.href,handleAs:"text"};if(dojo.isObject(this.ioArgs))dojo.mixin(getArgs,this.ioArgs);var hand=this._xhrDfd=(this.ioMethod||dojo.xhrGet)(getArgs);hand.addCallback(function(html){try{self._isDownloaded=true;self._setContent(html,false);self.onDownloadEnd()}catch(err){self._onError("Content",
err)}delete self._xhrDfd;return html});hand.addErrback(function(err){if(!hand.canceled)self._onError("Download",err);delete self._xhrDfd;return err});delete this._hrefChanged},_onLoadHandler:function(data){this._set("isLoaded",true);try{this.onLoadDeferred.callback(data)}catch(e){console.error("Error "+this.widgetId+" running custom onLoad code: "+e.message)}},_onUnloadHandler:function(){this._set("isLoaded",false);try{this.onUnload()}catch(e){console.error("Error "+this.widgetId+" running custom onUnload code: "+
e.message)}},destroyDescendants:function(){if(this.isLoaded)this._onUnloadHandler();var setter=this._contentSetter;dojo.forEach(this.getChildren(),function(widget){if(widget.destroyRecursive)widget.destroyRecursive()});if(setter){dojo.forEach(setter.parseResults,function(widget){if(widget.destroyRecursive&&widget.domNode&&widget.domNode.parentNode==dojo.body())widget.destroyRecursive()});delete setter.parseResults}dojo.html._emptyNode(this.containerNode);delete this._singleChild},_setContent:function(cont,
isFakeContent){this.destroyDescendants();var setter=this._contentSetter;if(!(setter&&setter instanceof dojo.html._ContentSetter))setter=this._contentSetter=new dojo.html._ContentSetter({node:this.containerNode,_onError:dojo.hitch(this,this._onError),onContentError:dojo.hitch(this,function(e){var errMess=this.onContentError(e);try{this.containerNode.innerHTML=errMess}catch(e){console.error("Fatal "+this.id+" could not change content due to "+e.message,e)}})});var setterParams=dojo.mixin({cleanContent:this.cleanContent,
extractContent:this.extractContent,parseContent:this.parseOnLoad,parserScope:this.parserScope,startup:false,dir:this.dir,lang:this.lang},this._contentSetterParams||{});setter.set(dojo.isObject(cont)&&cont.domNode?cont.domNode:cont,setterParams);delete this._contentSetterParams;if(this.doLayout)this._checkIfSingleChild();if(!isFakeContent){if(this._started){this._startChildren();this._scheduleLayout()}this._onLoadHandler(cont)}},_onError:function(type,err,consoleText){this.onLoadDeferred.errback(err);
var errText=this["on"+type+"Error"].call(this,err);if(consoleText)console.error(consoleText,err);else if(errText)this._setContent(errText,true)},_scheduleLayout:function(changeSize,resultSize){if(this._isShown())this._layout(changeSize,resultSize);else{this._needLayout=true;this._changeSize=changeSize;this._resultSize=resultSize}},onLoad:function(data){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},onContentError:function(error){},onDownloadError:function(error){return this.errorMessage},
onDownloadEnd:function(){}})}if(!dojo._hasResource["dojo.regexp"]){dojo._hasResource["dojo.regexp"]=true;dojo.provide("dojo.regexp");dojo.getObject("regexp",true,dojo);dojo.regexp.escapeString=function(str,except){return str.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(ch){if(except&&except.indexOf(ch)!=-1)return ch;return"\\"+ch})};dojo.regexp.buildGroupRE=function(arr,re,nonCapture){if(!(arr instanceof Array))return re(arr);var b=[];for(var i=0;i<arr.length;i++)b.push(re(arr[i]));return dojo.regexp.group(b.join("|"),
nonCapture)};dojo.regexp.group=function(expression,nonCapture){return"("+(nonCapture?"?:":"")+expression+")"}}if(!dojo._hasResource["dojo.cookie"]){dojo._hasResource["dojo.cookie"]=true;dojo.provide("dojo.cookie");dojo.cookie=function(name,value,props){var c=document.cookie;if(arguments.length==1){var matches=c.match(new RegExp("(?:^|; )"+dojo.regexp.escapeString(name)+"=([^;]*)"));return matches?decodeURIComponent(matches[1]):undefined}else{props=props||{};var exp=props.expires;if(typeof exp=="number"){var d=
new Date;d.setTime(d.getTime()+exp*24*60*60*1E3);exp=props.expires=d}if(exp&&exp.toUTCString)props.expires=exp.toUTCString();value=encodeURIComponent(value);var updatedCookie=name+"="+value,propName;for(propName in props){updatedCookie+="; "+propName;var propValue=props[propName];if(propValue!==true)updatedCookie+="="+propValue}document.cookie=updatedCookie}};dojo.cookie.isSupported=function(){if(!("cookieEnabled"in navigator)){this("__djCookieTest__","CookiesAllowed");navigator.cookieEnabled=this("__djCookieTest__")==
"CookiesAllowed";if(navigator.cookieEnabled)this("__djCookieTest__","",{expires:-1})}return navigator.cookieEnabled}}if(!dojo._hasResource["dijit.layout.BorderContainer"]){dojo._hasResource["dijit.layout.BorderContainer"]=true;dojo.provide("dijit.layout.BorderContainer");dojo.declare("dijit.layout.BorderContainer",dijit.layout._LayoutWidget,{design:"headline",gutters:true,liveSplitters:true,persist:false,baseClass:"dijitBorderContainer",_splitterClass:"dijit.layout._Splitter",postMixInProperties:function(){if(!this.gutters)this.baseClass+=
"NoGutter";this.inherited(arguments)},startup:function(){if(this._started)return;dojo.forEach(this.getChildren(),this._setupChild,this);this.inherited(arguments)},_setupChild:function(child){var region=child.region;if(region){this.inherited(arguments);dojo.addClass(child.domNode,this.baseClass+"Pane");var ltr=this.isLeftToRight();if(region=="leading")region=ltr?"left":"right";if(region=="trailing")region=ltr?"right":"left";if(region!="center"&&(child.splitter||this.gutters)&&!child._splitterWidget){var _Splitter=
dojo.getObject(child.splitter?this._splitterClass:"dijit.layout._Gutter");var splitter=new _Splitter({id:child.id+"_splitter",container:this,child:child,region:region,live:this.liveSplitters});splitter.isSplitter=true;child._splitterWidget=splitter;dojo.place(splitter.domNode,child.domNode,"after");splitter.startup()}child.region=region}},layout:function(){this._layoutChildren()},addChild:function(child,insertIndex){this.inherited(arguments);if(this._started)this.layout()},removeChild:function(child){var region=
child.region;var splitter=child._splitterWidget;if(splitter){splitter.destroy();delete child._splitterWidget}this.inherited(arguments);if(this._started)this._layoutChildren();dojo.removeClass(child.domNode,this.baseClass+"Pane");dojo.style(child.domNode,{top:"auto",bottom:"auto",left:"auto",right:"auto",position:"static"});dojo.style(child.domNode,region=="top"||region=="bottom"?"width":"height","auto")},getChildren:function(){return dojo.filter(this.inherited(arguments),function(widget){return!widget.isSplitter})},
getSplitter:function(region){return dojo.filter(this.getChildren(),function(child){return child.region==region})[0]._splitterWidget},resize:function(newSize,currentSize){if(!this.cs||!this.pe){var node=this.domNode;this.cs=dojo.getComputedStyle(node);this.pe=dojo._getPadExtents(node,this.cs);this.pe.r=dojo._toPixelValue(node,this.cs.paddingRight);this.pe.b=dojo._toPixelValue(node,this.cs.paddingBottom);dojo.style(node,"padding","0px")}this.inherited(arguments)},_layoutChildren:function(changedChildId,
changedChildSize){if(!this._borderBox||!this._borderBox.h)return;var wrappers=dojo.map(this.getChildren(),function(child,idx){return{pane:child,weight:[child.region=="center"?Infinity:0,child.layoutPriority,(this.design=="sidebar"?1:-1)*(/top|bottom/.test(child.region)?1:-1),idx]}},this);wrappers.sort(function(a,b){var aw=a.weight,bw=b.weight;for(var i=0;i<aw.length;i++)if(aw[i]!=bw[i])return aw[i]-bw[i];return 0});var childrenAndSplitters=[];dojo.forEach(wrappers,function(wrapper){var pane=wrapper.pane;
childrenAndSplitters.push(pane);if(pane._splitterWidget)childrenAndSplitters.push(pane._splitterWidget)});var dim={l:this.pe.l,t:this.pe.t,w:this._borderBox.w-this.pe.w,h:this._borderBox.h-this.pe.h};dijit.layout.layoutChildren(this.domNode,dim,childrenAndSplitters,changedChildId,changedChildSize)},destroyRecursive:function(){dojo.forEach(this.getChildren(),function(child){var splitter=child._splitterWidget;if(splitter)splitter.destroy();delete child._splitterWidget});this.inherited(arguments)}});
dojo.extend(dijit._Widget,{region:"",layoutPriority:0,splitter:false,minSize:0,maxSize:Infinity});dojo.declare("dijit.layout._Splitter",[dijit._Widget,dijit._Templated],{live:true,templateString:'<div class="dijitSplitter" dojoAttachEvent="onkeypress:_onKeyPress,onmousedown:_startDrag,onmouseenter:_onMouse,onmouseleave:_onMouse" tabIndex="0" role="separator"><div class="dijitSplitterThumb"></div></div>',postMixInProperties:function(){this.inherited(arguments);this.horizontal=/top|bottom/.test(this.region);
this._factor=/top|left/.test(this.region)?1:-1;this._cookieName=this.container.id+"_"+this.region},buildRendering:function(){this.inherited(arguments);dojo.addClass(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V"));if(this.container.persist){var persistSize=dojo.cookie(this._cookieName);if(persistSize)this.child.domNode.style[this.horizontal?"height":"width"]=persistSize}},_computeMaxSize:function(){var dim=this.horizontal?"h":"w",childSize=dojo.marginBox(this.child.domNode)[dim],center=dojo.filter(this.container.getChildren(),
function(child){return child.region=="center"})[0],spaceAvailable=dojo.marginBox(center.domNode)[dim];return Math.min(this.child.maxSize,childSize+spaceAvailable)},_startDrag:function(e){if(!this.cover){this.cover=dojo.doc.createElement("div");dojo.addClass(this.cover,"dijitSplitterCover");dojo.place(this.cover,this.child.domNode,"after")}dojo.addClass(this.cover,"dijitSplitterCoverActive");if(this.fake)dojo.destroy(this.fake);if(!(this._resize=this.live)){(this.fake=this.domNode.cloneNode(true)).removeAttribute("id");
dojo.addClass(this.domNode,"dijitSplitterShadow");dojo.place(this.fake,this.domNode,"after")}dojo.addClass(this.domNode,"dijitSplitterActive dijitSplitter"+(this.horizontal?"H":"V")+"Active");if(this.fake)dojo.removeClass(this.fake,"dijitSplitterHover dijitSplitter"+(this.horizontal?"H":"V")+"Hover");var factor=this._factor,isHorizontal=this.horizontal,axis=isHorizontal?"pageY":"pageX",pageStart=e[axis],splitterStyle=this.domNode.style,dim=isHorizontal?"h":"w",childStart=dojo.marginBox(this.child.domNode)[dim],
max=this._computeMaxSize(),min=this.child.minSize||20,region=this.region,splitterAttr=region=="top"||region=="bottom"?"top":"left",splitterStart=parseInt(splitterStyle[splitterAttr],10),resize=this._resize,layoutFunc=dojo.hitch(this.container,"_layoutChildren",this.child.id),de=dojo.doc;this._handlers=(this._handlers||[]).concat([dojo.connect(de,"onmousemove",this._drag=function(e,forceResize){var delta=e[axis]-pageStart,childSize=factor*delta+childStart,boundChildSize=Math.max(Math.min(childSize,
max),min);if(resize||forceResize)layoutFunc(boundChildSize);splitterStyle[splitterAttr]=delta+splitterStart+factor*(boundChildSize-childSize)+"px"}),dojo.connect(de,"ondragstart",dojo.stopEvent),dojo.connect(dojo.body(),"onselectstart",dojo.stopEvent),dojo.connect(de,"onmouseup",this,"_stopDrag")]);dojo.stopEvent(e)},_onMouse:function(e){var o=e.type=="mouseover"||e.type=="mouseenter";dojo.toggleClass(this.domNode,"dijitSplitterHover",o);dojo.toggleClass(this.domNode,"dijitSplitter"+(this.horizontal?
"H":"V")+"Hover",o)},_stopDrag:function(e){try{if(this.cover)dojo.removeClass(this.cover,"dijitSplitterCoverActive");if(this.fake)dojo.destroy(this.fake);dojo.removeClass(this.domNode,"dijitSplitterActive dijitSplitter"+(this.horizontal?"H":"V")+"Active dijitSplitterShadow");this._drag(e);this._drag(e,true)}finally{this._cleanupHandlers();delete this._drag}if(this.container.persist)dojo.cookie(this._cookieName,this.child.domNode.style[this.horizontal?"height":"width"],{expires:365})},_cleanupHandlers:function(){dojo.forEach(this._handlers,
dojo.disconnect);delete this._handlers},_onKeyPress:function(e){this._resize=true;var horizontal=this.horizontal;var tick=1;var dk=dojo.keys;switch(e.charOrCode){case horizontal?dk.UP_ARROW:dk.LEFT_ARROW:tick*=-1;case horizontal?dk.DOWN_ARROW:dk.RIGHT_ARROW:break;default:return}var childSize=dojo._getMarginSize(this.child.domNode)[horizontal?"h":"w"]+this._factor*tick;this.container._layoutChildren(this.child.id,Math.max(Math.min(childSize,this._computeMaxSize()),this.child.minSize));dojo.stopEvent(e)},
destroy:function(){this._cleanupHandlers();delete this.child;delete this.container;delete this.cover;delete this.fake;this.inherited(arguments)}});dojo.declare("dijit.layout._Gutter",[dijit._Widget,dijit._Templated],{templateString:'<div class="dijitGutter" role="presentation"></div>',postMixInProperties:function(){this.inherited(arguments);this.horizontal=/top|bottom/.test(this.region)},buildRendering:function(){this.inherited(arguments);dojo.addClass(this.domNode,"dijitGutter"+(this.horizontal?
"H":"V"))}})}if(!dojo._hasResource["dojo.dnd.common"]){dojo._hasResource["dojo.dnd.common"]=true;dojo.provide("dojo.dnd.common");dojo.getObject("dnd",true,dojo);dojo.dnd.getCopyKeyState=dojo.isCopyKey;dojo.dnd._uniqueId=0;dojo.dnd.getUniqueId=function(){var id;do id=dojo._scopeName+"Unique"+ ++dojo.dnd._uniqueId;while(dojo.byId(id));return id};dojo.dnd._empty={};dojo.dnd.isFormElement=function(e){var t=e.target;if(t.nodeType==3)t=t.parentNode;return" button textarea input select option ".indexOf(" "+
t.tagName.toLowerCase()+" ")>=0}}if(!dojo._hasResource["dojo.dnd.autoscroll"]){dojo._hasResource["dojo.dnd.autoscroll"]=true;dojo.provide("dojo.dnd.autoscroll");dojo.getObject("dnd",true,dojo);dojo.dnd.getViewport=dojo.window.getBox;dojo.dnd.V_TRIGGER_AUTOSCROLL=32;dojo.dnd.H_TRIGGER_AUTOSCROLL=32;dojo.dnd.V_AUTOSCROLL_VALUE=16;dojo.dnd.H_AUTOSCROLL_VALUE=16;dojo.dnd.autoScroll=function(e){var v=dojo.window.getBox(),dx=0,dy=0;if(e.clientX<dojo.dnd.H_TRIGGER_AUTOSCROLL)dx=-dojo.dnd.H_AUTOSCROLL_VALUE;
else if(e.clientX>v.w-dojo.dnd.H_TRIGGER_AUTOSCROLL)dx=dojo.dnd.H_AUTOSCROLL_VALUE;if(e.clientY<dojo.dnd.V_TRIGGER_AUTOSCROLL)dy=-dojo.dnd.V_AUTOSCROLL_VALUE;else if(e.clientY>v.h-dojo.dnd.V_TRIGGER_AUTOSCROLL)dy=dojo.dnd.V_AUTOSCROLL_VALUE;window.scrollBy(dx,dy)};dojo.dnd._validNodes={"div":1,"p":1,"td":1};dojo.dnd._validOverflow={"auto":1,"scroll":1};dojo.dnd.autoScrollNodes=function(e){for(var n=e.target;n;){if(n.nodeType==1&&n.tagName.toLowerCase()in dojo.dnd._validNodes){var s=dojo.getComputedStyle(n);
if(s.overflow.toLowerCase()in dojo.dnd._validOverflow){var b=dojo._getContentBox(n,s),t=dojo.position(n,true);var w=Math.min(dojo.dnd.H_TRIGGER_AUTOSCROLL,b.w/2),h=Math.min(dojo.dnd.V_TRIGGER_AUTOSCROLL,b.h/2),rx=e.pageX-t.x,ry=e.pageY-t.y,dx=0,dy=0;if(dojo.isWebKit||dojo.isOpera){rx+=dojo.body().scrollLeft;ry+=dojo.body().scrollTop}if(rx>0&&rx<b.w)if(rx<w)dx=-w;else if(rx>b.w-w)dx=w;if(ry>0&&ry<b.h)if(ry<h)dy=-h;else if(ry>b.h-h)dy=h;var oldLeft=n.scrollLeft,oldTop=n.scrollTop;n.scrollLeft=n.scrollLeft+
dx;n.scrollTop=n.scrollTop+dy;if(oldLeft!=n.scrollLeft||oldTop!=n.scrollTop)return}}try{n=n.parentNode}catch(x){n=null}}dojo.dnd.autoScroll(e)}}if(!dojo._hasResource["dojo.dnd.Mover"]){dojo._hasResource["dojo.dnd.Mover"]=true;dojo.provide("dojo.dnd.Mover");dojo.declare("dojo.dnd.Mover",null,{constructor:function(node,e,host){this.node=dojo.byId(node);var pos=e.touches?e.touches[0]:e;this.marginBox={l:pos.pageX,t:pos.pageY};this.mouseButton=e.button;var h=this.host=host,d=node.ownerDocument;this.events=
[dojo.connect(d,"onmousemove",this,"onFirstMove"),dojo.connect(d,"ontouchmove",this,"onFirstMove"),dojo.connect(d,"onmousemove",this,"onMouseMove"),dojo.connect(d,"ontouchmove",this,"onMouseMove"),dojo.connect(d,"onmouseup",this,"onMouseUp"),dojo.connect(d,"ontouchend",this,"onMouseUp"),dojo.connect(d,"ondragstart",dojo.stopEvent),dojo.connect(d.body,"onselectstart",dojo.stopEvent)];if(h&&h.onMoveStart)h.onMoveStart(this)},onMouseMove:function(e){dojo.dnd.autoScroll(e);var m=this.marginBox,pos=e.touches?
e.touches[0]:e;this.host.onMove(this,{l:m.l+pos.pageX,t:m.t+pos.pageY},e);dojo.stopEvent(e)},onMouseUp:function(e){if(dojo.isWebKit&&dojo.isMac&&this.mouseButton==2?e.button==0:this.mouseButton==e.button)this.destroy();dojo.stopEvent(e)},onFirstMove:function(e){var s=this.node.style,l,t,h=this.host;switch(s.position){case "relative":case "absolute":l=Math.round(parseFloat(s.left))||0;t=Math.round(parseFloat(s.top))||0;break;default:s.position="absolute";var m=dojo.marginBox(this.node);var b=dojo.doc.body;
var bs=dojo.getComputedStyle(b);var bm=dojo._getMarginBox(b,bs);var bc=dojo._getContentBox(b,bs);l=m.l-(bc.l-bm.l);t=m.t-(bc.t-bm.t);break}this.marginBox.l=l-this.marginBox.l;this.marginBox.t=t-this.marginBox.t;if(h&&h.onFirstMove)h.onFirstMove(this,e);dojo.disconnect(this.events.shift());dojo.disconnect(this.events.shift())},destroy:function(){dojo.forEach(this.events,dojo.disconnect);var h=this.host;if(h&&h.onMoveStop)h.onMoveStop(this);this.events=this.node=this.host=null}})}if(!dojo._hasResource["dojo.dnd.Moveable"]){dojo._hasResource["dojo.dnd.Moveable"]=
true;dojo.provide("dojo.dnd.Moveable");dojo.declare("dojo.dnd.Moveable",null,{handle:"",delay:0,skip:false,constructor:function(node,params){this.node=dojo.byId(node);if(!params)params={};this.handle=params.handle?dojo.byId(params.handle):null;if(!this.handle)this.handle=this.node;this.delay=params.delay>0?params.delay:0;this.skip=params.skip;this.mover=params.mover?params.mover:dojo.dnd.Mover;this.events=[dojo.connect(this.handle,"onmousedown",this,"onMouseDown"),dojo.connect(this.handle,"ontouchstart",
this,"onMouseDown"),dojo.connect(this.handle,"ondragstart",this,"onSelectStart"),dojo.connect(this.handle,"onselectstart",this,"onSelectStart")]},markupFactory:function(params,node){return new dojo.dnd.Moveable(node,params)},destroy:function(){dojo.forEach(this.events,dojo.disconnect);this.events=this.node=this.handle=null},onMouseDown:function(e){if(this.skip&&dojo.dnd.isFormElement(e))return;if(this.delay){this.events.push(dojo.connect(this.handle,"onmousemove",this,"onMouseMove"),dojo.connect(this.handle,
"ontouchmove",this,"onMouseMove"),dojo.connect(this.handle,"onmouseup",this,"onMouseUp"),dojo.connect(this.handle,"ontouchend",this,"onMouseUp"));var pos=e.touches?e.touches[0]:e;this._lastX=pos.pageX;this._lastY=pos.pageY}else this.onDragDetected(e);dojo.stopEvent(e)},onMouseMove:function(e){var pos=e.touches?e.touches[0]:e;if(Math.abs(pos.pageX-this._lastX)>this.delay||Math.abs(pos.pageY-this._lastY)>this.delay){this.onMouseUp(e);this.onDragDetected(e)}dojo.stopEvent(e)},onMouseUp:function(e){for(var i=
0;i<2;++i)dojo.disconnect(this.events.pop());dojo.stopEvent(e)},onSelectStart:function(e){if(!this.skip||!dojo.dnd.isFormElement(e))dojo.stopEvent(e)},onDragDetected:function(e){new this.mover(this.node,e,this)},onMoveStart:function(mover){dojo.publish("/dnd/move/start",[mover]);dojo.addClass(dojo.body(),"dojoMove");dojo.addClass(this.node,"dojoMoveItem")},onMoveStop:function(mover){dojo.publish("/dnd/move/stop",[mover]);dojo.removeClass(dojo.body(),"dojoMove");dojo.removeClass(this.node,"dojoMoveItem")},
onFirstMove:function(mover,e){},onMove:function(mover,leftTop,e){this.onMoving(mover,leftTop);var s=mover.node.style;s.left=leftTop.l+"px";s.top=leftTop.t+"px";this.onMoved(mover,leftTop)},onMoving:function(mover,leftTop){},onMoved:function(mover,leftTop){}})}if(!dojo._hasResource["dojo.dnd.move"]){dojo._hasResource["dojo.dnd.move"]=true;dojo.provide("dojo.dnd.move");dojo.declare("dojo.dnd.move.constrainedMoveable",dojo.dnd.Moveable,{constraints:function(){},within:false,markupFactory:function(params,
node){return new dojo.dnd.move.constrainedMoveable(node,params)},constructor:function(node,params){if(!params)params={};this.constraints=params.constraints;this.within=params.within},onFirstMove:function(mover){var c=this.constraintBox=this.constraints.call(this,mover);c.r=c.l+c.w;c.b=c.t+c.h;if(this.within){var mb=dojo._getMarginSize(mover.node);c.r-=mb.w;c.b-=mb.h}},onMove:function(mover,leftTop){var c=this.constraintBox,s=mover.node.style;this.onMoving(mover,leftTop);leftTop.l=leftTop.l<c.l?c.l:
c.r<leftTop.l?c.r:leftTop.l;leftTop.t=leftTop.t<c.t?c.t:c.b<leftTop.t?c.b:leftTop.t;s.left=leftTop.l+"px";s.top=leftTop.t+"px";this.onMoved(mover,leftTop)}});dojo.declare("dojo.dnd.move.boxConstrainedMoveable",dojo.dnd.move.constrainedMoveable,{box:{},markupFactory:function(params,node){return new dojo.dnd.move.boxConstrainedMoveable(node,params)},constructor:function(node,params){var box=params&&params.box;this.constraints=function(){return box}}});dojo.declare("dojo.dnd.move.parentConstrainedMoveable",
dojo.dnd.move.constrainedMoveable,{area:"content",markupFactory:function(params,node){return new dojo.dnd.move.parentConstrainedMoveable(node,params)},constructor:function(node,params){var area=params&&params.area;this.constraints=function(){var n=this.node.parentNode,s=dojo.getComputedStyle(n),mb=dojo._getMarginBox(n,s);if(area=="margin")return mb;var t=dojo._getMarginExtents(n,s);mb.l+=t.l,mb.t+=t.t,mb.w-=t.w,mb.h-=t.h;if(area=="border")return mb;t=dojo._getBorderExtents(n,s);mb.l+=t.l,mb.t+=t.t,
mb.w-=t.w,mb.h-=t.h;if(area=="padding")return mb;t=dojo._getPadExtents(n,s);mb.l+=t.l,mb.t+=t.t,mb.w-=t.w,mb.h-=t.h;return mb}}});dojo.dnd.constrainedMover=dojo.dnd.move.constrainedMover;dojo.dnd.boxConstrainedMover=dojo.dnd.move.boxConstrainedMover;dojo.dnd.parentConstrainedMover=dojo.dnd.move.parentConstrainedMover}if(!dojo._hasResource["dojo.dnd.TimedMoveable"]){dojo._hasResource["dojo.dnd.TimedMoveable"]=true;dojo.provide("dojo.dnd.TimedMoveable");(function(){var oldOnMove=dojo.dnd.Moveable.prototype.onMove;
dojo.declare("dojo.dnd.TimedMoveable",dojo.dnd.Moveable,{timeout:40,constructor:function(node,params){if(!params)params={};if(params.timeout&&typeof params.timeout=="number"&&params.timeout>=0)this.timeout=params.timeout},markupFactory:function(params,node){return new dojo.dnd.TimedMoveable(node,params)},onMoveStop:function(mover){if(mover._timer){clearTimeout(mover._timer);oldOnMove.call(this,mover,mover._leftTop)}dojo.dnd.Moveable.prototype.onMoveStop.apply(this,arguments)},onMove:function(mover,
leftTop){mover._leftTop=leftTop;if(!mover._timer){var _t=this;mover._timer=setTimeout(function(){mover._timer=null;oldOnMove.call(_t,mover,mover._leftTop)},this.timeout)}}})})()}if(!dojo._hasResource["dojo.fx.Toggler"]){dojo._hasResource["dojo.fx.Toggler"]=true;dojo.provide("dojo.fx.Toggler");dojo.declare("dojo.fx.Toggler",null,{node:null,showFunc:dojo.fadeIn,hideFunc:dojo.fadeOut,showDuration:200,hideDuration:200,constructor:function(args){var _t=this;dojo.mixin(_t,args);_t.node=args.node;_t._showArgs=
dojo.mixin({},args);_t._showArgs.node=_t.node;_t._showArgs.duration=_t.showDuration;_t.showAnim=_t.showFunc(_t._showArgs);_t._hideArgs=dojo.mixin({},args);_t._hideArgs.node=_t.node;_t._hideArgs.duration=_t.hideDuration;_t.hideAnim=_t.hideFunc(_t._hideArgs);dojo.connect(_t.showAnim,"beforeBegin",dojo.hitch(_t.hideAnim,"stop",true));dojo.connect(_t.hideAnim,"beforeBegin",dojo.hitch(_t.showAnim,"stop",true))},show:function(delay){return this.showAnim.play(delay||0)},hide:function(delay){return this.hideAnim.play(delay||
0)}})}if(!dojo._hasResource["dojo.fx"]){dojo._hasResource["dojo.fx"]=true;dojo.provide("dojo.fx");(function(){var d=dojo,_baseObj={_fire:function(evt,args){if(this[evt])this[evt].apply(this,args||[]);return this}};var _chain=function(animations){this._index=-1;this._animations=animations||[];this._current=this._onAnimateCtx=this._onEndCtx=null;this.duration=0;d.forEach(this._animations,function(a){this.duration+=a.duration;if(a.delay)this.duration+=a.delay},this)};d.extend(_chain,{_onAnimate:function(){this._fire("onAnimate",
arguments)},_onEnd:function(){d.disconnect(this._onAnimateCtx);d.disconnect(this._onEndCtx);this._onAnimateCtx=this._onEndCtx=null;if(this._index+1==this._animations.length)this._fire("onEnd");else{this._current=this._animations[++this._index];this._onAnimateCtx=d.connect(this._current,"onAnimate",this,"_onAnimate");this._onEndCtx=d.connect(this._current,"onEnd",this,"_onEnd");this._current.play(0,true)}},play:function(delay,gotoStart){if(!this._current)this._current=this._animations[this._index=
0];if(!gotoStart&&this._current.status()=="playing")return this;var beforeBegin=d.connect(this._current,"beforeBegin",this,function(){this._fire("beforeBegin")}),onBegin=d.connect(this._current,"onBegin",this,function(arg){this._fire("onBegin",arguments)}),onPlay=d.connect(this._current,"onPlay",this,function(arg){this._fire("onPlay",arguments);d.disconnect(beforeBegin);d.disconnect(onBegin);d.disconnect(onPlay)});if(this._onAnimateCtx)d.disconnect(this._onAnimateCtx);this._onAnimateCtx=d.connect(this._current,
"onAnimate",this,"_onAnimate");if(this._onEndCtx)d.disconnect(this._onEndCtx);this._onEndCtx=d.connect(this._current,"onEnd",this,"_onEnd");this._current.play.apply(this._current,arguments);return this},pause:function(){if(this._current){var e=d.connect(this._current,"onPause",this,function(arg){this._fire("onPause",arguments);d.disconnect(e)});this._current.pause()}return this},gotoPercent:function(percent,andPlay){this.pause();var offset=this.duration*percent;this._current=null;d.some(this._animations,
function(a){if(a.duration<=offset){this._current=a;return true}offset-=a.duration;return false});if(this._current)this._current.gotoPercent(offset/this._current.duration,andPlay);return this},stop:function(gotoEnd){if(this._current){if(gotoEnd){for(;this._index+1<this._animations.length;++this._index)this._animations[this._index].stop(true);this._current=this._animations[this._index]}var e=d.connect(this._current,"onStop",this,function(arg){this._fire("onStop",arguments);d.disconnect(e)});this._current.stop()}return this},
status:function(){return this._current?this._current.status():"stopped"},destroy:function(){if(this._onAnimateCtx)d.disconnect(this._onAnimateCtx);if(this._onEndCtx)d.disconnect(this._onEndCtx)}});d.extend(_chain,_baseObj);dojo.fx.chain=function(animations){return new _chain(animations)};var _combine=function(animations){this._animations=animations||[];this._connects=[];this._finished=0;this.duration=0;d.forEach(animations,function(a){var duration=a.duration;if(a.delay)duration+=a.delay;if(this.duration<
duration)this.duration=duration;this._connects.push(d.connect(a,"onEnd",this,"_onEnd"))},this);this._pseudoAnimation=new d.Animation({curve:[0,1],duration:this.duration});var self=this;d.forEach(["beforeBegin","onBegin","onPlay","onAnimate","onPause","onStop","onEnd"],function(evt){self._connects.push(d.connect(self._pseudoAnimation,evt,function(){self._fire(evt,arguments)}))})};d.extend(_combine,{_doAction:function(action,args){d.forEach(this._animations,function(a){a[action].apply(a,args)});return this},
_onEnd:function(){if(++this._finished>this._animations.length)this._fire("onEnd")},_call:function(action,args){var t=this._pseudoAnimation;t[action].apply(t,args)},play:function(delay,gotoStart){this._finished=0;this._doAction("play",arguments);this._call("play",arguments);return this},pause:function(){this._doAction("pause",arguments);this._call("pause",arguments);return this},gotoPercent:function(percent,andPlay){var ms=this.duration*percent;d.forEach(this._animations,function(a){a.gotoPercent(a.duration<
ms?1:ms/a.duration,andPlay)});this._call("gotoPercent",arguments);return this},stop:function(gotoEnd){this._doAction("stop",arguments);this._call("stop",arguments);return this},status:function(){return this._pseudoAnimation.status()},destroy:function(){d.forEach(this._connects,dojo.disconnect)}});d.extend(_combine,_baseObj);dojo.fx.combine=function(animations){return new _combine(animations)};dojo.fx.wipeIn=function(args){var node=args.node=d.byId(args.node),s=node.style,o;var anim=d.animateProperty(d.mixin({properties:{height:{start:function(){o=
s.overflow;s.overflow="hidden";if(s.visibility=="hidden"||s.display=="none"){s.height="1px";s.display="";s.visibility="";return 1}else{var height=d.style(node,"height");return Math.max(height,1)}},end:function(){return node.scrollHeight}}}},args));d.connect(anim,"onEnd",function(){s.height="auto";s.overflow=o});return anim};dojo.fx.wipeOut=function(args){var node=args.node=d.byId(args.node),s=node.style,o;var anim=d.animateProperty(d.mixin({properties:{height:{end:1}}},args));d.connect(anim,"beforeBegin",
function(){o=s.overflow;s.overflow="hidden";s.display=""});d.connect(anim,"onEnd",function(){s.overflow=o;s.height="auto";s.display="none"});return anim};dojo.fx.slideTo=function(args){var node=args.node=d.byId(args.node),top=null,left=null;var init=function(n){return function(){var cs=d.getComputedStyle(n);var pos=cs.position;top=pos=="absolute"?n.offsetTop:parseInt(cs.top)||0;left=pos=="absolute"?n.offsetLeft:parseInt(cs.left)||0;if(pos!="absolute"&&pos!="relative"){var ret=d.position(n,true);top=
ret.y;left=ret.x;n.style.position="absolute";n.style.top=top+"px";n.style.left=left+"px"}}}(node);init();var anim=d.animateProperty(d.mixin({properties:{top:args.top||0,left:args.left||0}},args));d.connect(anim,"beforeBegin",anim,init);return anim}})()}if(!dojo._hasResource["dijit.form._FormMixin"]){dojo._hasResource["dijit.form._FormMixin"]=true;dojo.provide("dijit.form._FormMixin");dojo.declare("dijit.form._FormMixin",null,{state:"",reset:function(){dojo.forEach(this.getDescendants(),function(widget){if(widget.reset)widget.reset()})},
validate:function(){var didFocus=false;return dojo.every(dojo.map(this.getDescendants(),function(widget){widget._hasBeenBlurred=true;var valid=widget.disabled||!widget.validate||widget.validate();if(!valid&&!didFocus){dojo.window.scrollIntoView(widget.containerNode||widget.domNode);widget.focus();didFocus=true}return valid}),function(item){return item})},setValues:function(val){dojo.deprecated(this.declaredClass+"::setValues() is deprecated. Use set('value', val) instead.","","2.0");return this.set("value",
val)},_setValueAttr:function(obj){var map={};dojo.forEach(this.getDescendants(),function(widget){if(!widget.name)return;var entry=map[widget.name]||(map[widget.name]=[]);entry.push(widget)});for(var name in map){if(!map.hasOwnProperty(name))continue;var widgets=map[name],values=dojo.getObject(name,false,obj);if(values===undefined)continue;if(!dojo.isArray(values))values=[values];if(typeof widgets[0].checked=="boolean")dojo.forEach(widgets,function(w,i){w.set("value",dojo.indexOf(values,w.value)!=
-1)});else if(widgets[0].multiple)widgets[0].set("value",values);else dojo.forEach(widgets,function(w,i){w.set("value",values[i])})}},getValues:function(){dojo.deprecated(this.declaredClass+"::getValues() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},_getValueAttr:function(){var obj={};dojo.forEach(this.getDescendants(),function(widget){var name=widget.name;if(!name||widget.disabled)return;var value=widget.get("value");if(typeof widget.checked=="boolean")if(/Radio/.test(widget.declaredClass))if(value!==
false)dojo.setObject(name,value,obj);else{value=dojo.getObject(name,false,obj);if(value===undefined)dojo.setObject(name,null,obj)}else{var ary=dojo.getObject(name,false,obj);if(!ary){ary=[];dojo.setObject(name,ary,obj)}if(value!==false)ary.push(value)}else{var prev=dojo.getObject(name,false,obj);if(typeof prev!="undefined")if(dojo.isArray(prev))prev.push(value);else dojo.setObject(name,[prev,value],obj);else dojo.setObject(name,value,obj)}});return obj},isValid:function(){return this.state==""},onValidStateChange:function(isValid){},
_getState:function(){var states=dojo.map(this._descendants,function(w){return w.get("state")||""});return dojo.indexOf(states,"Error")>=0?"Error":dojo.indexOf(states,"Incomplete")>=0?"Incomplete":""},disconnectChildren:function(){dojo.forEach(this._childConnections||[],dojo.hitch(this,"disconnect"));dojo.forEach(this._childWatches||[],function(w){w.unwatch()})},connectChildren:function(inStartup){var _this=this;this.disconnectChildren();this._descendants=this.getDescendants();var set=inStartup?function(name,
val){_this[name]=val}:dojo.hitch(this,"_set");set("value",this.get("value"));set("state",this._getState());var conns=this._childConnections=[],watches=this._childWatches=[];dojo.forEach(dojo.filter(this._descendants,function(item){return item.validate}),function(widget){dojo.forEach(["state","disabled"],function(attr){watches.push(widget.watch(attr,function(attr,oldVal,newVal){_this.set("state",_this._getState())}))})});var onChange=function(){if(_this._onChangeDelayTimer)clearTimeout(_this._onChangeDelayTimer);
_this._onChangeDelayTimer=setTimeout(function(){delete _this._onChangeDelayTimer;_this._set("value",_this.get("value"))},10)};dojo.forEach(dojo.filter(this._descendants,function(item){return item.onChange}),function(widget){conns.push(_this.connect(widget,"onChange",onChange));watches.push(widget.watch("disabled",onChange))})},startup:function(){this.inherited(arguments);this.connectChildren(true);this.watch("state",function(attr,oldVal,newVal){this.onValidStateChange(newVal=="")})},destroy:function(){this.disconnectChildren();
this.inherited(arguments)}})}if(!dojo._hasResource["dijit._DialogMixin"]){dojo._hasResource["dijit._DialogMixin"]=true;dojo.provide("dijit._DialogMixin");dojo.declare("dijit._DialogMixin",null,{attributeMap:dijit._Widget.prototype.attributeMap,execute:function(formContents){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute();this.execute(this.get("value"))},_getFocusItems:function(){var elems=dijit._getTabNavigable(this.containerNode);this._firstFocusItem=elems.lowest||
elems.first||this.closeButtonNode||this.domNode;this._lastFocusItem=elems.last||elems.highest||this._firstFocusItem}})}if(!dojo._hasResource["dijit.DialogUnderlay"]){dojo._hasResource["dijit.DialogUnderlay"]=true;dojo.provide("dijit.DialogUnderlay");dojo.declare("dijit.DialogUnderlay",[dijit._Widget,dijit._Templated],{templateString:"<div class='dijitDialogUnderlayWrapper'><div class='dijitDialogUnderlay' dojoAttachPoint='node'></div></div>",dialogId:"","class":"",positionOffset:null,attributeMap:{id:"domNode"},
_setDialogIdAttr:function(id){dojo.attr(this.node,"id",id+"_underlay");this._set("dialogId",id)},_setClassAttr:function(clazz){this.node.className="dijitDialogUnderlay "+clazz;this._set("class",clazz)},postCreate:function(){dojo.body(this.appendToNode).appendChild(this.domNode);this.positionOffset=dojo._getAbsolutePositionedElementsOffset(this.appendToNode)},layout:function(){var is=this.node.style,os=this.domNode.style,po=this.positionOffset;os.display="none";var viewport=dojo.window.getBox();os.top=
viewport.t-po.y+"px";os.left=viewport.l-po.x+"px";is.width=viewport.w+"px";is.height=viewport.h+"px";os.width=viewport.w+"px";os.height=viewport.h+"px";os.display="block"},show:function(){this.domNode.style.display="block";this.layout();this.bgIframe=new dijit.BackgroundIframe(this.domNode)},hide:function(){this.bgIframe.destroy();delete this.bgIframe;this.domNode.style.display="none"}})}if(!dojo._hasResource["dijit.TooltipDialog"]){dojo._hasResource["dijit.TooltipDialog"]=true;dojo.provide("dijit.TooltipDialog");
dojo.declare("dijit.TooltipDialog",[dijit.layout.ContentPane,dijit._Templated,dijit.form._FormMixin,dijit._DialogMixin],{title:"",doLayout:false,autofocus:true,baseClass:"dijitTooltipDialog",_firstFocusItem:null,_lastFocusItem:null,templateString:dojo.cache("dijit","templates/TooltipDialog.html",'<div role="presentation" tabIndex="-1">\r\n\t<div class="dijitTooltipContainer" role="presentation">\r\n\t\t<div class ="dijitTooltipContents dijitTooltipFocusNode" dojoAttachPoint="containerNode" role="dialog"></div>\r\n\t</div>\r\n\t<div class="dijitTooltipConnector" role="presentation"></div>\r\n</div>\r\n'),
_setTitleAttr:function(title){this.containerNode.title=title;this._set("title",title)},postCreate:function(){this.inherited(arguments);this.connect(this.containerNode,"onkeypress","_onKey")},orient:function(node,aroundCorner,corner){var newC="dijitTooltipAB"+(corner.charAt(1)=="L"?"Left":"Right")+" dijitTooltip"+(corner.charAt(0)=="T"?"Below":"Above");dojo.replaceClass(this.domNode,newC,this._currentOrientClass||"");this._currentOrientClass=newC},focus:function(){this._getFocusItems(this.containerNode);
dijit.focus(this._firstFocusItem)},onOpen:function(pos){this.orient(this.domNode,pos.aroundCorner,pos.corner);this._onShow()},onClose:function(){this.onHide()},_onKey:function(evt){var node=evt.target;var dk=dojo.keys;if(evt.charOrCode===dk.TAB)this._getFocusItems(this.containerNode);var singleFocusItem=this._firstFocusItem==this._lastFocusItem;if(evt.charOrCode==dk.ESCAPE){setTimeout(dojo.hitch(this,"onCancel"),0);dojo.stopEvent(evt)}else if(node==this._firstFocusItem&&evt.shiftKey&&evt.charOrCode===
dk.TAB){if(!singleFocusItem)dijit.focus(this._lastFocusItem);dojo.stopEvent(evt)}else if(node==this._lastFocusItem&&evt.charOrCode===dk.TAB&&!evt.shiftKey){if(!singleFocusItem)dijit.focus(this._firstFocusItem);dojo.stopEvent(evt)}else if(evt.charOrCode===dk.TAB)evt.stopPropagation()}})}if(!dojo._hasResource["dijit.Dialog"]){dojo._hasResource["dijit.Dialog"]=true;dojo.provide("dijit.Dialog");dojo.declare("dijit._DialogBase",[dijit._Templated,dijit.form._FormMixin,dijit._DialogMixin,dijit._CssStateMixin],
{templateString:dojo.cache("dijit","templates/Dialog.html",'<div class="dijitDialog" role="dialog" aria-labelledby="${id}_title">\r\n\t<div dojoAttachPoint="titleBar" class="dijitDialogTitleBar">\r\n\t<span dojoAttachPoint="titleNode" class="dijitDialogTitle" id="${id}_title"></span>\r\n\t<span dojoAttachPoint="closeButtonNode" class="dijitDialogCloseIcon" dojoAttachEvent="ondijitclick: onCancel" title="${buttonCancel}" role="button" tabIndex="-1">\r\n\t\t<span dojoAttachPoint="closeText" class="closeText" title="${buttonCancel}">x</span>\r\n\t</span>\r\n\t</div>\r\n\t\t<div dojoAttachPoint="containerNode" class="dijitDialogPaneContent"></div>\r\n</div>\r\n'),
baseClass:"dijitDialog",cssStateNodes:{closeButtonNode:"dijitDialogCloseIcon"},attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{title:[{node:"titleNode",type:"innerHTML"},{node:"titleBar",type:"attribute"}],"aria-describedby":""}),open:false,duration:dijit.defaultDuration,refocus:true,autofocus:true,_firstFocusItem:null,_lastFocusItem:null,doLayout:false,draggable:true,"aria-describedby":"",postMixInProperties:function(){var _nlsResources=dojo.i18n.getLocalization("dijit","common");
dojo.mixin(this,_nlsResources);this.inherited(arguments)},postCreate:function(){dojo.style(this.domNode,{display:"none",position:"absolute"});dojo.body(this.appendToNode).appendChild(this.domNode);this.inherited(arguments);this.connect(this,"onExecute","hide");this.connect(this,"onCancel","hide");this._modalconnects=[]},onLoad:function(){this._position();if(this.autofocus&&dijit._DialogLevelManager.isTop(this)){this._getFocusItems(this.domNode);dijit.focus(this._firstFocusItem)}this.inherited(arguments)},
_endDrag:function(e){if(e&&e.node&&e.node===this.domNode)this._relativePosition=dojo.position(e.node)},_setup:function(){var node=this.domNode;if(this.titleBar&&this.draggable){this._moveable=dojo.isIE==6?new dojo.dnd.TimedMoveable(node,{handle:this.titleBar}):new dojo.dnd.Moveable(node,{handle:this.titleBar,timeout:0});this._dndListener=dojo.subscribe("/dnd/move/stop",this,"_endDrag")}else dojo.addClass(node,"dijitDialogFixed");this.underlayAttrs={dialogId:this.id,"class":dojo.map(this["class"].split(/\s/),
function(s){return s+"_underlay"}).join(" "),appendToNode:this.appendToNode}},_size:function(){this._checkIfSingleChild();if(this._singleChild){if(this._singleChildOriginalStyle)this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle;delete this._singleChildOriginalStyle}else dojo.style(this.containerNode,{width:"auto",height:"auto"});var mb=dojo._getMarginSize(this.domNode);var viewport=dojo.window.getBox();if(mb.w>=viewport.w||mb.h>=viewport.h){var w=Math.min(mb.w,Math.floor(viewport.w*
.75)),h=Math.min(mb.h,Math.floor(viewport.h*.75));if(this._singleChild&&this._singleChild.resize){this._singleChildOriginalStyle=this._singleChild.domNode.style.cssText;this._singleChild.resize({w:w,h:h})}else dojo.style(this.containerNode,{width:w+"px",height:h+"px",overflow:"auto",position:"relative"})}else if(this._singleChild&&this._singleChild.resize)this._singleChild.resize()},_position:function(){if(!dojo.hasClass(dojo.body(),"dojoMove")){var node=this.domNode,viewport=dojo.window.getBox(),
p=this._relativePosition,bb=p?null:dojo._getBorderBox(node),l=Math.floor(viewport.l+(p?p.x:(viewport.w-bb.w)/2)),t=Math.floor(viewport.t+(p?p.y:(viewport.h-bb.h)/2));dojo.style(node,{left:l+"px",top:t+"px"})}},_onKey:function(evt){if(evt.charOrCode){var dk=dojo.keys;var node=evt.target;var isTextArea=node.tagName.toLowerCase()==="textarea";if(evt.charOrCode===dk.TAB)this._getFocusItems(this.domNode);var singleFocusItem=this._firstFocusItem==this._lastFocusItem;if(node==this._firstFocusItem&&evt.shiftKey&&
evt.charOrCode===dk.TAB){if(!singleFocusItem)dijit.focus(this._lastFocusItem);dojo.stopEvent(evt)}else if(node==this._lastFocusItem&&evt.charOrCode===dk.TAB&&!evt.shiftKey){if(!singleFocusItem)dijit.focus(this._firstFocusItem);dojo.stopEvent(evt)}else{while(node){if(node==this.domNode||dojo.hasClass(node,"dijitPopup"))if(evt.charOrCode==dk.ESCAPE)this.onCancel();else if(evt.charOrCode==dk.ENTER&&!isTextArea){if("submit"!=this._firstFocusItem.type&&document.activeElement!==node)dojo.query(".iconOk",
node).forEach(function(node){var nodeId=node.id||node.getAttribute("widgetid")||node.parentNode.id||node.parentNode.getAttribute("widgetid");dijit.byId(nodeId)._onButtonClick(evt)});dojo.stopEvent(evt);break}else return;node=node.parentNode}if(evt.charOrCode!==dk.TAB)dojo.stopEvent(evt);else if(!dojo.isOpera)try{this._firstFocusItem.focus()}catch(e){}}}},show:function(){if(this.open)return;if(!this._started)this.startup();if(!this._alreadyInitialized){this._setup();this._alreadyInitialized=true}if(this._fadeOutDeferred)this._fadeOutDeferred.cancel();
this._modalconnects.push(dojo.connect(window,"onscroll",this,"layout"));this._modalconnects.push(dojo.connect(window,"onresize",this,function(){var viewport=dojo.window.getBox();if(!this._oldViewport||viewport.h!=this._oldViewport.h||viewport.w!=this._oldViewport.w){this.layout();this._oldViewport=viewport}}));this._modalconnects.push(dojo.connect(this.domNode,"onkeypress",this,"_onKey"));dojo.style(this.domNode,{opacity:0,display:""});this._set("open",true);this._onShow();this._size();this._position();
var fadeIn;this._fadeInDeferred=new dojo.Deferred(dojo.hitch(this,function(){fadeIn.stop();delete this._fadeInDeferred}));fadeIn=dojo.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:dojo.hitch(this,function(){dijit._DialogLevelManager.show(this,this.underlayAttrs)}),onEnd:dojo.hitch(this,function(){this.domNode.style.display="block";if(this.autofocus&&dijit._DialogLevelManager.isTop(this)){this._getFocusItems(this.domNode);dijit.focus(this._firstFocusItem)}this._fadeInDeferred.callback(true);
delete this._fadeInDeferred})}).play();return this._fadeInDeferred},hide:function(){if(!this._alreadyInitialized)return;if(this._fadeInDeferred)this._fadeInDeferred.cancel();var fadeOut;this._fadeOutDeferred=new dojo.Deferred(dojo.hitch(this,function(){fadeOut.stop();delete this._fadeOutDeferred}));fadeOut=dojo.fadeOut({node:this.domNode,duration:this.duration,onEnd:dojo.hitch(this,function(){this.domNode.style.display="none";dijit._DialogLevelManager.hide(this);this.onHide();if(this._fadeOutDeferred)this._fadeOutDeferred.callback(true);
delete this._fadeOutDeferred})}).play();if(this._scrollConnected)this._scrollConnected=false;dojo.forEach(this._modalconnects,dojo.disconnect);this._modalconnects=[];if(this._relativePosition)delete this._relativePosition;this._set("open",false);return this._fadeOutDeferred},layout:function(){if(this.domNode.style.display!="none"){if(dijit._underlay)dijit._underlay.layout();this._position()}},destroy:function(){if(this._fadeInDeferred)this._fadeInDeferred.cancel();if(this._fadeOutDeferred)this._fadeOutDeferred.cancel();
if(this._moveable)this._moveable.destroy();if(this._dndListener)dojo.unsubscribe(this._dndListener);dojo.forEach(this._modalconnects,dojo.disconnect);dijit._DialogLevelManager.hide(this);this.inherited(arguments)}});dojo.declare("dijit.Dialog",[dijit.layout.ContentPane,dijit._DialogBase],{});dijit._DialogLevelManager={show:function(dialog,underlayAttrs){var ds=dijit._dialogStack;ds[ds.length-1].focus=dijit.getFocus(dialog);var underlay=dijit._underlay;if(!underlay||underlay._destroyed)underlay=dijit._underlay=
new dijit.DialogUnderlay(underlayAttrs);else underlay.set(dialog.underlayAttrs);var zIndex=ds[ds.length-1].dialog?ds[ds.length-1].zIndex+2:950;if(ds.length==1)underlay.show();dojo.style(dijit._underlay.domNode,"zIndex",zIndex-1);dojo.style(dialog.domNode,"zIndex",zIndex);ds.push({dialog:dialog,underlayAttrs:underlayAttrs,zIndex:zIndex})},hide:function(dialog){var ds=dijit._dialogStack;if(ds[ds.length-1].dialog==dialog){ds.pop();var pd=ds[ds.length-1];if(ds.length==1){if(!dijit._underlay._destroyed)dijit._underlay.hide()}else{dojo.style(dijit._underlay.domNode,
"zIndex",pd.zIndex-1);dijit._underlay.set(pd.underlayAttrs)}if(dialog.refocus){var focus=pd.focus;if(!focus||pd.dialog&&!dojo.isDescendant(focus.node,pd.dialog.domNode)){pd.dialog._getFocusItems(pd.dialog.domNode);focus=pd.dialog._firstFocusItem}try{dijit.focus(focus)}catch(e){}}}else{var idx=dojo.indexOf(dojo.map(ds,function(elem){return elem.dialog}),dialog);if(idx!=-1)ds.splice(idx,1)}},isTop:function(dialog){var ds=dijit._dialogStack;return ds[ds.length-1].dialog==dialog}};dijit._dialogStack=
[{dialog:null,focus:null,underlayAttrs:null}]}if(!dojo._hasResource["dojo.data.util.filter"]){dojo._hasResource["dojo.data.util.filter"]=true;dojo.provide("dojo.data.util.filter");dojo.getObject("data.util.filter",true,dojo);dojo.data.util.filter.patternToRegExp=function(pattern,ignoreCase){var rxp="^";var c=null;for(var i=0;i<pattern.length;i++){c=pattern.charAt(i);switch(c){case "\\":rxp+=c;i++;rxp+=pattern.charAt(i);break;case "*":rxp+=".*";break;case "?":rxp+=".";break;case "$":case "^":case "/":case "+":case ".":case "|":case "(":case ")":case "{":case "}":case "[":case "]":rxp+=
"\\";default:rxp+=c}}rxp+="$";if(ignoreCase)return new RegExp(rxp,"mi");else return new RegExp(rxp,"m")}}if(!dojo._hasResource["dojo.data.util.sorter"]){dojo._hasResource["dojo.data.util.sorter"]=true;dojo.provide("dojo.data.util.sorter");dojo.getObject("data.util.sorter",true,dojo);dojo.data.util.sorter.basicComparator=function(a,b){var r=-1;if(a===null)a=undefined;if(b===null)b=undefined;if(a==b)r=0;else if(a>b||a==null)r=1;return r};dojo.data.util.sorter.createSortFunction=function(sortSpec,store){var sortFunctions=
[];function createSortFunction(attr,dir,comp,s){return function(itemA,itemB){var a=s.getValue(itemA,attr);var b=s.getValue(itemB,attr);return dir*comp(a,b)}}var sortAttribute;var map=store.comparatorMap;var bc=dojo.data.util.sorter.basicComparator;for(var i=0;i<sortSpec.length;i++){sortAttribute=sortSpec[i];var attr=sortAttribute.attribute;if(attr){var dir=sortAttribute.descending?-1:1;var comp=bc;if(map){if(typeof attr!=="string"&&"toString"in attr)attr=attr.toString();comp=map[attr]||bc}sortFunctions.push(createSortFunction(attr,
dir,comp,store))}}return function(rowA,rowB){var i=0;while(i<sortFunctions.length){var ret=sortFunctions[i++](rowA,rowB);if(ret!==0)return ret}return 0}}}if(!dojo._hasResource["dojo.data.util.simpleFetch"]){dojo._hasResource["dojo.data.util.simpleFetch"]=true;dojo.provide("dojo.data.util.simpleFetch");dojo.getObject("data.util.simpleFetch",true,dojo);dojo.data.util.simpleFetch.fetch=function(request){request=request||{};if(!request.store)request.store=this;var self=this;var _errorHandler=function(errorData,
requestObject){if(requestObject.onError){var scope=requestObject.scope||dojo.global;requestObject.onError.call(scope,errorData,requestObject)}};var _fetchHandler=function(items,requestObject){var oldAbortFunction=requestObject.abort||null;var aborted=false;var startIndex=requestObject.start?requestObject.start:0;var endIndex=requestObject.count&&requestObject.count!==Infinity?startIndex+requestObject.count:items.length;requestObject.abort=function(){aborted=true;if(oldAbortFunction)oldAbortFunction.call(requestObject)};
var scope=requestObject.scope||dojo.global;if(!requestObject.store)requestObject.store=self;if(requestObject.onBegin)requestObject.onBegin.call(scope,items.length,requestObject);if(requestObject.sort)items.sort(dojo.data.util.sorter.createSortFunction(requestObject.sort,self));if(requestObject.onItem)for(var i=startIndex;i<items.length&&i<endIndex;++i){var item=items[i];if(!aborted)requestObject.onItem.call(scope,item,requestObject)}if(requestObject.onComplete&&!aborted){var subset=null;if(!requestObject.onItem)subset=
items.slice(startIndex,endIndex);requestObject.onComplete.call(scope,subset,requestObject)}};this._fetchItems(request,_fetchHandler,_errorHandler);return request}}if(!dojo._hasResource["dojo.data.ItemFileReadStore"]){dojo._hasResource["dojo.data.ItemFileReadStore"]=true;dojo.provide("dojo.data.ItemFileReadStore");dojo.declare("dojo.data.ItemFileReadStore",null,{constructor:function(keywordParameters){this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=false;this._jsonFileUrl=
keywordParameters.url;this._ccUrl=keywordParameters.url;this.url=keywordParameters.url;this._jsonData=keywordParameters.data;this.data=null;this._datatypeMap=keywordParameters.typeMap||{};if(!this._datatypeMap["Date"])this._datatypeMap["Date"]={type:Date,deserialize:function(value){return dojo.date.stamp.fromISOString(value)}};this._features={"dojo.data.api.Read":true,"dojo.data.api.Identity":true};this._itemsByIdentity=null;this._storeRefPropName="_S";this._itemNumPropName="_0";this._rootItemPropName=
"_RI";this._reverseRefMap="_RRM";this._loadInProgress=false;this._queuedFetches=[];if(keywordParameters.urlPreventCache!==undefined)this.urlPreventCache=keywordParameters.urlPreventCache?true:false;if(keywordParameters.hierarchical!==undefined)this.hierarchical=keywordParameters.hierarchical?true:false;if(keywordParameters.clearOnClose)this.clearOnClose=true;if("failOk"in keywordParameters)this.failOk=keywordParameters.failOk?true:false},url:"",_ccUrl:"",data:null,typeMap:null,clearOnClose:false,
urlPreventCache:false,failOk:false,hierarchical:true,_assertIsItem:function(item){if(!this.isItem(item))throw new Error("dojo.data.ItemFileReadStore: Invalid item argument.");},_assertIsAttribute:function(attribute){if(typeof attribute!=="string")throw new Error("dojo.data.ItemFileReadStore: Invalid attribute argument.");},getValue:function(item,attribute,defaultValue){var values=this.getValues(item,attribute);return values.length>0?values[0]:defaultValue},getValues:function(item,attribute){this._assertIsItem(item);
this._assertIsAttribute(attribute);return(item[attribute]||[]).slice(0)},getAttributes:function(item){this._assertIsItem(item);var attributes=[];for(var key in item)if(key!==this._storeRefPropName&&key!==this._itemNumPropName&&key!==this._rootItemPropName&&key!==this._reverseRefMap)attributes.push(key);return attributes},hasAttribute:function(item,attribute){this._assertIsItem(item);this._assertIsAttribute(attribute);return attribute in item},containsValue:function(item,attribute,value){var regexp=
undefined;if(typeof value==="string")regexp=dojo.data.util.filter.patternToRegExp(value,false);return this._containsValue(item,attribute,value,regexp)},getItem:function(idx){return this._arrayOfTopLevelItems[idx]||null},_containsValue:function(item,attribute,value,regexp){return dojo.some(this.getValues(item,attribute),function(possibleValue){if(possibleValue!==null&&!dojo.isObject(possibleValue)&&regexp){if(possibleValue.toString().match(regexp))return true}else if(value===possibleValue)return true})},
isItem:function(something){if(something&&something[this._storeRefPropName]===this)if(this._arrayOfAllItems[something[this._itemNumPropName]]===something)return true;return false},isItemLoaded:function(something){return this.isItem(something)},loadItem:function(keywordArgs){this._assertIsItem(keywordArgs.item)},getFeatures:function(){return this._features},getLabel:function(item){if(this._labelAttr&&this.isItem(item))return this.getValue(item,this._labelAttr);return undefined},getLabelAttributes:function(item){if(this._labelAttr)return[this._labelAttr];
return null},_fetchItems:function(keywordArgs,findCallback,errorCallback){var self=this,filter=function(requestArgs,arrayOfItems){var items=[],i,key;if(requestArgs.query){var value,ignoreCase=requestArgs.queryOptions?requestArgs.queryOptions.ignoreCase:false;var regexpList={};for(key in requestArgs.query){value=requestArgs.query[key];if(typeof value==="string")regexpList[key]=dojo.data.util.filter.patternToRegExp(value,ignoreCase);else if(value instanceof RegExp)regexpList[key]=value}for(i=0;i<arrayOfItems.length;++i){var match=
true;var candidateItem=arrayOfItems[i];if(candidateItem===null)match=false;else for(key in requestArgs.query){value=requestArgs.query[key];if(!self._containsValue(candidateItem,key,value,regexpList[key]))match=false}if(match)items.push(candidateItem)}findCallback(items,requestArgs)}else{for(i=0;i<arrayOfItems.length;++i){var item=arrayOfItems[i];if(item!==null)items.push(item)}findCallback(items,requestArgs)}};if(this._loadFinished)filter(keywordArgs,this._getItemsArray(keywordArgs.queryOptions));
else{if(this._jsonFileUrl!==this._ccUrl){dojo.deprecated("dojo.data.ItemFileReadStore: ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl}else if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url}if(this.data!=null){this._jsonData=this.data;this.data=null}if(this._jsonFileUrl)if(this._loadInProgress)this._queuedFetches.push({args:keywordArgs,filter:filter});
else{this._loadInProgress=true;var getArgs={url:self._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk};var getHandler=dojo.xhrGet(getArgs);getHandler.addCallback(function(data){try{self._getItemsFromLoadedData(data);self._loadFinished=true;self._loadInProgress=false;filter(keywordArgs,self._getItemsArray(keywordArgs.queryOptions));self._handleQueuedFetches()}catch(e){self._loadFinished=true;self._loadInProgress=false;errorCallback(e,keywordArgs)}});
getHandler.addErrback(function(error){self._loadInProgress=false;errorCallback(error,keywordArgs)});var oldAbort=null;if(keywordArgs.abort)oldAbort=keywordArgs.abort;keywordArgs.abort=function(){var df=getHandler;if(df&&df.fired===-1){df.cancel();df=null}if(oldAbort)oldAbort.call(keywordArgs)}}else if(this._jsonData)try{this._loadFinished=true;this._getItemsFromLoadedData(this._jsonData);this._jsonData=null;filter(keywordArgs,this._getItemsArray(keywordArgs.queryOptions))}catch(e){errorCallback(e,
keywordArgs)}else errorCallback(new Error("dojo.data.ItemFileReadStore: No JSON source data was provided as either URL or a nested Javascript object."),keywordArgs)}},_handleQueuedFetches:function(){if(this._queuedFetches.length>0){for(var i=0;i<this._queuedFetches.length;i++){var fData=this._queuedFetches[i],delayedQuery=fData.args,delayedFilter=fData.filter;if(delayedFilter)delayedFilter(delayedQuery,this._getItemsArray(delayedQuery.queryOptions));else this.fetchItemByIdentity(delayedQuery)}this._queuedFetches=
[]}},_getItemsArray:function(queryOptions){if(queryOptions&&queryOptions.deep)return this._arrayOfAllItems;return this._arrayOfTopLevelItems},close:function(request){if(this.clearOnClose&&this._loadFinished&&!this._loadInProgress){if((this._jsonFileUrl==""||this._jsonFileUrl==null)&&(this.url==""||this.url==null)&&this.data==null)console.debug("dojo.data.ItemFileReadStore: WARNING!  Data reload "+" information has not been provided."+"  Please set 'url' or 'data' to the appropriate value before"+
" the next fetch");this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=false;this._itemsByIdentity=null;this._loadInProgress=false;this._queuedFetches=[]}},_getItemsFromLoadedData:function(dataObject){var addingArrays=false,self=this;function valueIsAnItem(aValue){var isItem=aValue!==null&&typeof aValue==="object"&&(!dojo.isArray(aValue)||addingArrays)&&!dojo.isFunction(aValue)&&(aValue.constructor==Object||dojo.isArray(aValue))&&typeof aValue._reference==="undefined"&&typeof aValue._type===
"undefined"&&typeof aValue._value==="undefined"&&self.hierarchical;return isItem}function addItemAndSubItemsToArrayOfAllItems(anItem){self._arrayOfAllItems.push(anItem);for(var attribute in anItem){var valueForAttribute=anItem[attribute];if(valueForAttribute)if(dojo.isArray(valueForAttribute)){var valueArray=valueForAttribute;for(var k=0;k<valueArray.length;++k){var singleValue=valueArray[k];if(valueIsAnItem(singleValue))addItemAndSubItemsToArrayOfAllItems(singleValue)}}else if(valueIsAnItem(valueForAttribute))addItemAndSubItemsToArrayOfAllItems(valueForAttribute)}}
this._labelAttr=dataObject.label;var i,item;this._arrayOfAllItems=[];this._arrayOfTopLevelItems=dataObject.items;for(i=0;i<this._arrayOfTopLevelItems.length;++i){item=this._arrayOfTopLevelItems[i];if(dojo.isArray(item))addingArrays=true;addItemAndSubItemsToArrayOfAllItems(item);item[this._rootItemPropName]=true}var allAttributeNames={},key;for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];for(key in item){if(key!==this._rootItemPropName){var value=item[key];if(value!==null){if(!dojo.isArray(value))item[key]=
[value]}else item[key]=[null]}allAttributeNames[key]=key}}while(allAttributeNames[this._storeRefPropName])this._storeRefPropName+="_";while(allAttributeNames[this._itemNumPropName])this._itemNumPropName+="_";while(allAttributeNames[this._reverseRefMap])this._reverseRefMap+="_";var arrayOfValues;var identifier=dataObject.identifier;if(identifier){this._itemsByIdentity={};this._features["dojo.data.api.Identity"]=identifier;for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];arrayOfValues=
item[identifier];var identity=arrayOfValues[0];if(!Object.hasOwnProperty.call(this._itemsByIdentity,identity))this._itemsByIdentity[identity]=item;else if(this._jsonFileUrl)throw new Error("dojo.data.ItemFileReadStore:  The json data as specified by: ["+this._jsonFileUrl+"] is malformed.  Items within the list have identifier: ["+identifier+"].  Value collided: ["+identity+"]");else if(this._jsonData)throw new Error("dojo.data.ItemFileReadStore:  The json data provided by the creation arguments is malformed.  Items within the list have identifier: ["+
identifier+"].  Value collided: ["+identity+"]");}}else this._features["dojo.data.api.Identity"]=Number;for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];item[this._storeRefPropName]=this;item[this._itemNumPropName]=i}for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];for(key in item){arrayOfValues=item[key];for(var j=0;j<arrayOfValues.length;++j){value=arrayOfValues[j];if(value!==null&&typeof value=="object"){if("_type"in value&&"_value"in value){var type=
value._type;var mappingObj=this._datatypeMap[type];if(!mappingObj)throw new Error("dojo.data.ItemFileReadStore: in the typeMap constructor arg, no object class was specified for the datatype '"+type+"'");else if(dojo.isFunction(mappingObj))arrayOfValues[j]=new mappingObj(value._value);else if(dojo.isFunction(mappingObj.deserialize))arrayOfValues[j]=mappingObj.deserialize(value._value);else throw new Error("dojo.data.ItemFileReadStore: Value provided in typeMap was neither a constructor, nor a an object with a deserialize function");
}if(value._reference){var referenceDescription=value._reference;if(!dojo.isObject(referenceDescription))arrayOfValues[j]=this._getItemByIdentity(referenceDescription);else for(var k=0;k<this._arrayOfAllItems.length;++k){var candidateItem=this._arrayOfAllItems[k],found=true;for(var refKey in referenceDescription)if(candidateItem[refKey]!=referenceDescription[refKey])found=false;if(found)arrayOfValues[j]=candidateItem}if(this.referenceIntegrity){var refItem=arrayOfValues[j];if(this.isItem(refItem))this._addReferenceToMap(refItem,
item,key)}}else if(this.isItem(value))if(this.referenceIntegrity)this._addReferenceToMap(value,item,key)}}}}},_addReferenceToMap:function(refItem,parentItem,attribute){},getIdentity:function(item){var identifier=this._features["dojo.data.api.Identity"];if(identifier===Number)return item[this._itemNumPropName];else{var arrayOfValues=item[identifier];if(arrayOfValues)return arrayOfValues[0]}return null},fetchItemByIdentity:function(keywordArgs){var item,scope;if(!this._loadFinished){var self=this;if(this._jsonFileUrl!==
this._ccUrl){dojo.deprecated("dojo.data.ItemFileReadStore: ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl}else if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url}if(this.data!=null&&this._jsonData==null){this._jsonData=this.data;this.data=null}if(this._jsonFileUrl)if(this._loadInProgress)this._queuedFetches.push({args:keywordArgs});else{this._loadInProgress=
true;var getArgs={url:self._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk};var getHandler=dojo.xhrGet(getArgs);getHandler.addCallback(function(data){var scope=keywordArgs.scope?keywordArgs.scope:dojo.global;try{self._getItemsFromLoadedData(data);self._loadFinished=true;self._loadInProgress=false;item=self._getItemByIdentity(keywordArgs.identity);if(keywordArgs.onItem)keywordArgs.onItem.call(scope,item);self._handleQueuedFetches()}catch(error){self._loadInProgress=
false;if(keywordArgs.onError)keywordArgs.onError.call(scope,error)}});getHandler.addErrback(function(error){self._loadInProgress=false;if(keywordArgs.onError){var scope=keywordArgs.scope?keywordArgs.scope:dojo.global;keywordArgs.onError.call(scope,error)}})}else if(this._jsonData){self._getItemsFromLoadedData(self._jsonData);self._jsonData=null;self._loadFinished=true;item=self._getItemByIdentity(keywordArgs.identity);if(keywordArgs.onItem){scope=keywordArgs.scope?keywordArgs.scope:dojo.global;keywordArgs.onItem.call(scope,
item)}}}else{item=this._getItemByIdentity(keywordArgs.identity);if(keywordArgs.onItem){scope=keywordArgs.scope?keywordArgs.scope:dojo.global;keywordArgs.onItem.call(scope,item)}}},_getItemByIdentity:function(identity){var item=null;if(this._itemsByIdentity&&Object.hasOwnProperty.call(this._itemsByIdentity,identity))item=this._itemsByIdentity[identity];else if(Object.hasOwnProperty.call(this._arrayOfAllItems,identity))item=this._arrayOfAllItems[identity];if(item===undefined)item=null;return item},
getIdentityAttributes:function(item){var identifier=this._features["dojo.data.api.Identity"];if(identifier===Number)return null;else return[identifier]},getItemsByAttribute:function(key,value,caseInsensitive,bFirst){var data=this._itemsByIdentity||this._arrayOfAllItems,isArrayVal=dojo.isArray(value),transform=caseInsensitive;if(!data)return null;if(transform)if(isArrayVal)for(var j=0,jl=value.length;j<jl;j++){var transform=dojo.isString(value[j]);if(transform)value[j]=value[j].toLowerCase()}else{transform=
dojo.isString(value);if(transform)value=value.toLowerCase()}var items=[],found;for(var i in data){if(!data[i]||undefined===data[i][key])continue;found=false;var itemValue=transform?String(data[i][key][0]).toLowerCase():data[i][key][0];if(isArrayVal)for(var j=0,jl=value.length;j<jl;j++){if(itemValue===value[j]){found=true;break}}else if(itemValue===value)found=true;if(found){items.push(data[i]);if(bFirst)break;continue}}return items},getIndexesByAttribute:function(key,value,caseInsensitive,bFirst){var data=
this._itemsByIdentity||this._arrayOfAllItems,isArrayVal=dojo.isArray(value),transform=caseInsensitive;if(!data)return null;if(transform)if(isArrayVal)for(var j=0,jl=value.length;j<jl;j++){var transform=dojo.isString(value[j]);if(transform)value[j]=value[j].toLowerCase()}else{transform=dojo.isString(value);if(transform)value=value.toLowerCase()}var indexes=[],found,indexCorrection=0;for(var i in data){if(!data[i]||undefined===data[i][key]){indexCorrection++;continue}found=false;var itemValue=transform?
String(data[i][key][0]).toLowerCase():data[i][key][0];if(isArrayVal)for(var j=0,jl=value.length;j<jl;j++){if(itemValue===value[j]){found=true;break}}else if(itemValue===value)found=true;if(found){indexes.push(i-indexCorrection);if(bFirst)break;continue}}return indexes},_forceLoad:function(){var self=this;if(this._jsonFileUrl!==this._ccUrl){dojo.deprecated("dojo.data.ItemFileReadStore: ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");
this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl}else if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url}if(this.data!=null){this._jsonData=this.data;this.data=null}if(this._jsonFileUrl){var getArgs={url:this._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk,sync:true};var getHandler=dojo.xhrGet(getArgs);getHandler.addCallback(function(data){try{if(self._loadInProgress!==true&&!self._loadFinished){self._getItemsFromLoadedData(data);
self._loadFinished=true}else if(self._loadInProgress)throw new Error("dojo.data.ItemFileReadStore:  Unable to perform a synchronous load, an async load is in progress.");}catch(e){console.log(e);throw e;}});getHandler.addErrback(function(error){throw error;})}else if(this._jsonData){self._getItemsFromLoadedData(self._jsonData);self._jsonData=null;self._loadFinished=true}}});dojo.extend(dojo.data.ItemFileReadStore,dojo.data.util.simpleFetch)}if(!dojo._hasResource["dojo.data.ItemFileWriteStore"]){dojo._hasResource["dojo.data.ItemFileWriteStore"]=
true;dojo.provide("dojo.data.ItemFileWriteStore");dojo.declare("dojo.data.ItemFileWriteStore",dojo.data.ItemFileReadStore,{constructor:function(keywordParameters){this._features["dojo.data.api.Write"]=true;this._features["dojo.data.api.Notification"]=true;this._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};if(!this._datatypeMap["Date"].serialize)this._datatypeMap["Date"].serialize=function(obj){return dojo.date.stamp.toISOString(obj,{zulu:true})};if(keywordParameters&&keywordParameters.referenceIntegrity===
false)this.referenceIntegrity=false;this._saveInProgress=false},referenceIntegrity:true,_assert:function(condition){if(!condition)throw new Error("assertion failed in ItemFileWriteStore");},_getIdentifierAttribute:function(){var identifierAttribute=this.getFeatures()["dojo.data.api.Identity"];return identifierAttribute},newItem:function(keywordArgs,parentInfo){this._assert(!this._saveInProgress);if(!this._loadFinished)this._forceLoad();if(typeof keywordArgs!="object"&&typeof keywordArgs!="undefined")throw new Error("newItem() was passed something other than an object");
var newIdentity=null;var identifierAttribute=this._getIdentifierAttribute();if(identifierAttribute===Number)newIdentity=this._arrayOfAllItems.length;else{newIdentity=keywordArgs[identifierAttribute];if(typeof newIdentity==="undefined")throw new Error("newItem() was not passed an identity for the new item");if(dojo.isArray(newIdentity))throw new Error("newItem() was not passed an single-valued identity");}if(this._itemsByIdentity)this._assert(typeof this._itemsByIdentity[newIdentity]==="undefined");
this._assert(typeof this._pending._newItems[newIdentity]==="undefined");this._assert(typeof this._pending._deletedItems[newIdentity]==="undefined");var newItem={};newItem[this._storeRefPropName]=this;newItem[this._itemNumPropName]=this._arrayOfAllItems.length;if(this._itemsByIdentity){this._itemsByIdentity[newIdentity]=newItem;newItem[identifierAttribute]=[newIdentity]}this._arrayOfAllItems.push(newItem);var pInfo=null;if(parentInfo&&parentInfo.parent&&parentInfo.attribute){pInfo={item:parentInfo.parent,
attribute:parentInfo.attribute,oldValue:undefined};var values=this.getValues(parentInfo.parent,parentInfo.attribute);if(values&&values.length>0){var tempValues=values.slice(0,values.length);if(values.length===1)pInfo.oldValue=values[0];else pInfo.oldValue=values.slice(0,values.length);tempValues.push(newItem);this._setValueOrValues(parentInfo.parent,parentInfo.attribute,tempValues,false);pInfo.newValue=this.getValues(parentInfo.parent,parentInfo.attribute)}else{this._setValueOrValues(parentInfo.parent,
parentInfo.attribute,newItem,false);pInfo.newValue=newItem}}else{newItem[this._rootItemPropName]=true;this._arrayOfTopLevelItems.push(newItem)}this._pending._newItems[newIdentity]=newItem;for(var key in keywordArgs){if(key===this._storeRefPropName||key===this._itemNumPropName)throw new Error("encountered bug in ItemFileWriteStore.newItem");var value=keywordArgs[key];if(!dojo.isArray(value))value=[value];newItem[key]=value;if(this.referenceIntegrity)for(var i=0;i<value.length;i++){var val=value[i];
if(this.isItem(val))this._addReferenceToMap(val,newItem,key)}}this.onNew(newItem,pInfo);return newItem},_removeArrayElement:function(array,element){var index=dojo.indexOf(array,element);if(index!=-1){array.splice(index,1);return true}return false},deleteItem:function(item){this._assert(!this._saveInProgress);this._assertIsItem(item);var indexInArrayOfAllItems=item[this._itemNumPropName];var identity=this.getIdentity(item);if(this.referenceIntegrity){var attributes=this.getAttributes(item);if(item[this._reverseRefMap])item["backup_"+
this._reverseRefMap]=dojo.clone(item[this._reverseRefMap]);dojo.forEach(attributes,function(attribute){dojo.forEach(this.getValues(item,attribute),function(value){if(this.isItem(value)){if(!item["backupRefs_"+this._reverseRefMap])item["backupRefs_"+this._reverseRefMap]=[];item["backupRefs_"+this._reverseRefMap].push({id:this.getIdentity(value),attr:attribute});this._removeReferenceFromMap(value,item,attribute)}},this)},this);var references=item[this._reverseRefMap];if(references)for(var itemId in references){var containingItem=
null;if(this._itemsByIdentity)containingItem=this._itemsByIdentity[itemId];else containingItem=this._arrayOfAllItems[itemId];if(containingItem)for(var attribute in references[itemId]){var oldValues=this.getValues(containingItem,attribute)||[];var newValues=dojo.filter(oldValues,function(possibleItem){return!(this.isItem(possibleItem)&&this.getIdentity(possibleItem)==identity)},this);this._removeReferenceFromMap(item,containingItem,attribute);if(newValues.length<oldValues.length)this._setValueOrValues(containingItem,
attribute,newValues,true)}}}this._arrayOfAllItems[indexInArrayOfAllItems]=null;item[this._storeRefPropName]=null;if(this._itemsByIdentity)delete this._itemsByIdentity[identity];this._pending._deletedItems[identity]=item;if(item[this._rootItemPropName])this._removeArrayElement(this._arrayOfTopLevelItems,item);this.onDelete(item);return true},setValue:function(item,attribute,value){return this._setValueOrValues(item,attribute,value,true)},setValues:function(item,attribute,values){return this._setValueOrValues(item,
attribute,values,true)},unsetAttribute:function(item,attribute){return this._setValueOrValues(item,attribute,[],true)},_setValueOrValues:function(item,attribute,newValueOrValues,callOnSet){this._assert(!this._saveInProgress);this._assertIsItem(item);this._assert(dojo.isString(attribute));this._assert(typeof newValueOrValues!=="undefined");var identifierAttribute=this._getIdentifierAttribute();if(attribute==identifierAttribute)throw new Error("ItemFileWriteStore does not have support for changing the value of an item's identifier.");
var oldValueOrValues=this._getValueOrValues(item,attribute);var identity=this.getIdentity(item);if(!this._pending._modifiedItems[identity]){var copyOfItemState={};for(var key in item)if(key===this._storeRefPropName||key===this._itemNumPropName||key===this._rootItemPropName)copyOfItemState[key]=item[key];else if(key===this._reverseRefMap)copyOfItemState[key]=dojo.clone(item[key]);else copyOfItemState[key]=item[key].slice(0,item[key].length);this._pending._modifiedItems[identity]=copyOfItemState}var success=
false;if(dojo.isArray(newValueOrValues)&&newValueOrValues.length===0){success=delete item[attribute];newValueOrValues=undefined;if(this.referenceIntegrity&&oldValueOrValues){var oldValues=oldValueOrValues;if(!dojo.isArray(oldValues))oldValues=[oldValues];for(var i=0;i<oldValues.length;i++){var value=oldValues[i];if(this.isItem(value))this._removeReferenceFromMap(value,item,attribute)}}}else{var newValueArray;if(dojo.isArray(newValueOrValues)){var newValues=newValueOrValues;newValueArray=newValueOrValues.slice(0,
newValueOrValues.length)}else newValueArray=[newValueOrValues];if(this.referenceIntegrity)if(oldValueOrValues){var oldValues=oldValueOrValues;if(!dojo.isArray(oldValues))oldValues=[oldValues];var map={};dojo.forEach(oldValues,function(possibleItem){if(this.isItem(possibleItem)){var id=this.getIdentity(possibleItem);map[id.toString()]=true}},this);dojo.forEach(newValueArray,function(possibleItem){if(this.isItem(possibleItem)){var id=this.getIdentity(possibleItem);if(map[id.toString()])delete map[id.toString()];
else this._addReferenceToMap(possibleItem,item,attribute)}},this);for(var rId in map){var removedItem;if(this._itemsByIdentity)removedItem=this._itemsByIdentity[rId];else removedItem=this._arrayOfAllItems[rId];this._removeReferenceFromMap(removedItem,item,attribute)}}else for(var i=0;i<newValueArray.length;i++){var value=newValueArray[i];if(this.isItem(value))this._addReferenceToMap(value,item,attribute)}item[attribute]=newValueArray;success=true}if(callOnSet)this.onSet(item,attribute,oldValueOrValues,
newValueOrValues);return success},_addReferenceToMap:function(refItem,parentItem,attribute){var parentId=this.getIdentity(parentItem);var references=refItem[this._reverseRefMap];if(!references)references=refItem[this._reverseRefMap]={};var itemRef=references[parentId];if(!itemRef)itemRef=references[parentId]={};itemRef[attribute]=true},_removeReferenceFromMap:function(refItem,parentItem,attribute){var identity=this.getIdentity(parentItem);var references=refItem[this._reverseRefMap];var itemId;if(references){for(itemId in references)if(itemId==
identity){delete references[itemId][attribute];if(this._isEmpty(references[itemId]))delete references[itemId]}if(this._isEmpty(references))delete refItem[this._reverseRefMap]}},_dumpReferenceMap:function(){var i;for(i=0;i<this._arrayOfAllItems.length;i++){var item=this._arrayOfAllItems[i];if(item&&item[this._reverseRefMap])console.log("Item: ["+this.getIdentity(item)+"] is referenced by: "+dojo.toJson(item[this._reverseRefMap]))}},_getValueOrValues:function(item,attribute){var valueOrValues=undefined;
if(this.hasAttribute(item,attribute)){var valueArray=this.getValues(item,attribute);if(valueArray.length==1)valueOrValues=valueArray[0];else valueOrValues=valueArray}return valueOrValues},_flatten:function(value){if(this.isItem(value)){var item=value;var identity=this.getIdentity(item);var referenceObject={_reference:identity};return referenceObject}else{if(typeof value==="object")for(var type in this._datatypeMap){var typeMap=this._datatypeMap[type];if(dojo.isObject(typeMap)&&!dojo.isFunction(typeMap)){if(value instanceof
typeMap.type){if(!typeMap.serialize)throw new Error("ItemFileWriteStore:  No serializer defined for type mapping: ["+type+"]");return{_type:type,_value:typeMap.serialize(value)}}}else if(value instanceof typeMap)return{_type:type,_value:value.toString()}}return value}},_getNewFileContentString:function(){var serializableStructure={};var identifierAttribute=this._getIdentifierAttribute();if(identifierAttribute!==Number)serializableStructure.identifier=identifierAttribute;if(this._labelAttr)serializableStructure.label=
this._labelAttr;serializableStructure.items=[];for(var i=0;i<this._arrayOfAllItems.length;++i){var item=this._arrayOfAllItems[i];if(item!==null){var serializableItem={};for(var key in item)if(key!==this._storeRefPropName&&key!==this._itemNumPropName&&key!==this._reverseRefMap&&key!==this._rootItemPropName){var attribute=key;var valueArray=this.getValues(item,attribute);if(valueArray.length==1)serializableItem[attribute]=this._flatten(valueArray[0]);else{var serializableArray=[];for(var j=0;j<valueArray.length;++j){serializableArray.push(this._flatten(valueArray[j]));
serializableItem[attribute]=serializableArray}}}serializableStructure.items.push(serializableItem)}}var prettyPrint=true;return dojo.toJson(serializableStructure,prettyPrint)},_isEmpty:function(something){var empty=true;if(dojo.isObject(something)){var i;for(i in something){empty=false;break}}else if(dojo.isArray(something))if(something.length>0)empty=false;return empty},save:function(keywordArgs){this._assert(!this._saveInProgress);this._saveInProgress=true;var self=this;var saveCompleteCallback=
function(){self._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};self._saveInProgress=false;if(keywordArgs&&keywordArgs.onComplete){var scope=keywordArgs.scope||dojo.global;keywordArgs.onComplete.call(scope)}};var saveFailedCallback=function(err){self._saveInProgress=false;if(keywordArgs&&keywordArgs.onError){var scope=keywordArgs.scope||dojo.global;keywordArgs.onError.call(scope,err)}};if(this._saveEverything){var newFileContentString=this._getNewFileContentString();this._saveEverything(saveCompleteCallback,
saveFailedCallback,newFileContentString)}if(this._saveCustom)this._saveCustom(saveCompleteCallback,saveFailedCallback);if(!this._saveEverything&&!this._saveCustom)saveCompleteCallback()},revert:function(){this._assert(!this._saveInProgress);var identity;for(identity in this._pending._modifiedItems){var copyOfItemState=this._pending._modifiedItems[identity];var modifiedItem=null;if(this._itemsByIdentity)modifiedItem=this._itemsByIdentity[identity];else modifiedItem=this._arrayOfAllItems[identity];
copyOfItemState[this._storeRefPropName]=this;for(key in modifiedItem)delete modifiedItem[key];dojo.mixin(modifiedItem,copyOfItemState)}var deletedItem;for(identity in this._pending._deletedItems){deletedItem=this._pending._deletedItems[identity];deletedItem[this._storeRefPropName]=this;var index=deletedItem[this._itemNumPropName];if(deletedItem["backup_"+this._reverseRefMap]){deletedItem[this._reverseRefMap]=deletedItem["backup_"+this._reverseRefMap];delete deletedItem["backup_"+this._reverseRefMap]}this._arrayOfAllItems[index]=
deletedItem;if(this._itemsByIdentity)this._itemsByIdentity[identity]=deletedItem;if(deletedItem[this._rootItemPropName])this._arrayOfTopLevelItems.push(deletedItem)}for(identity in this._pending._deletedItems){deletedItem=this._pending._deletedItems[identity];if(deletedItem["backupRefs_"+this._reverseRefMap]){dojo.forEach(deletedItem["backupRefs_"+this._reverseRefMap],function(reference){var refItem;if(this._itemsByIdentity)refItem=this._itemsByIdentity[reference.id];else refItem=this._arrayOfAllItems[reference.id];
this._addReferenceToMap(refItem,deletedItem,reference.attr)},this);delete deletedItem["backupRefs_"+this._reverseRefMap]}}for(identity in this._pending._newItems){var newItem=this._pending._newItems[identity];newItem[this._storeRefPropName]=null;this._arrayOfAllItems[newItem[this._itemNumPropName]]=null;if(newItem[this._rootItemPropName])this._removeArrayElement(this._arrayOfTopLevelItems,newItem);if(this._itemsByIdentity)delete this._itemsByIdentity[identity]}this._pending={_newItems:{},_modifiedItems:{},
_deletedItems:{}};return true},isDirty:function(item){if(item){var identity=this.getIdentity(item);return(new Boolean(this._pending._newItems[identity]||this._pending._modifiedItems[identity]||this._pending._deletedItems[identity])).valueOf()}else{if(!this._isEmpty(this._pending._newItems)||!this._isEmpty(this._pending._modifiedItems)||!this._isEmpty(this._pending._deletedItems))return true;return false}},onSet:function(item,attribute,oldValue,newValue){},onNew:function(newItem,parentInfo){},onDelete:function(deletedItem){},
close:function(request){if(this.clearOnClose)if(!this.isDirty())this.inherited(arguments);else throw new Error("dojo.data.ItemFileWriteStore: There are unsaved changes present in the store.  Please save or revert the changes before invoking close.");}})}if(!dojo._hasResource["dijit.dijit"]){dojo._hasResource["dijit.dijit"]=true;dojo.provide("dijit.dijit")}if(!dojo._hasResource["dijit.MenuItem"]){dojo._hasResource["dijit.MenuItem"]=true;dojo.provide("dijit.MenuItem");dojo.declare("dijit.MenuItem",
[dijit._Widget,dijit._Templated,dijit._Contained,dijit._CssStateMixin],{templateString:dojo.cache("dijit","templates/MenuItem.html",'<tr class="dijitReset dijitMenuItem" dojoAttachPoint="focusNode" role="menuitem" tabIndex="-1"\r\n\t\tdojoAttachEvent="onmouseenter:_onHover,onmouseleave:_onUnhover,ondijitclick:_onClick">\r\n\t<td class="dijitReset dijitMenuItemIconCell dijitMenuFirstChild" role="presentation">\r\n\t\t<div class="dijitMenuItemIconSpacer"><img src="${_blankGif()}" alt="" class="dijitIcon dijitMenuItemIcon" dojoAttachPoint="iconNode"/></div>\r\n\t</td>\r\n\t<td class="dijitReset dijitMenuItemLabel" colspan="2" dojoAttachPoint="containerNode"></td>\r\n\t<td class="dijitReset dijitMenuItemAccelKey" style="display: none" dojoAttachPoint="accelKeyNode"></td>\r\n\t<td class="dijitReset dijitMenuArrowCell dijitMenuLastChild" role="presentation">\r\n\t\t<div class="dijitMenuExpand" dojoAttachPoint="arrowWrapper" style="visibility: hidden">\r\n\t\t\t<span class="dijitMenuExpandA11y">+</span>\r\n\t\t</div>\r\n\t</td>\r\n</tr>\r\n'),
attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{label:{node:"containerNode",type:"innerHTML"},iconClass:{node:"iconNode",type:"class"}}),baseClass:"dijitMenuItem",label:"",iconClass:"",accelKey:"",disabled:false,_fillContent:function(source){if(source&&!("label"in this.params))this.set("label",source.innerHTML)},buildRendering:function(){this.inherited(arguments);var label=this.id+"_text";dojo.attr(this.containerNode,"id",label);if(this.accelKeyNode){dojo.attr(this.accelKeyNode,"id",
this.id+"_accel");label+=" "+this.id+"_accel"}dijit.setWaiState(this.domNode,"labelledby",label);dojo.setSelectable(this.domNode,false)},_onHover:function(){this.getParent().onItemHover(this)},_onUnhover:function(){this.getParent().onItemUnhover(this);this._set("hovering",false)},_onClick:function(evt){this.getParent().onItemClick(this,evt);dojo.stopEvent(evt)},onClick:function(evt){},focus:function(){try{if(dojo.isIE==8)this.containerNode.focus();dijit.focus(this.focusNode)}catch(e){}},_onFocus:function(){this._setSelected(true);
this.getParent()._onItemFocus(this);this.inherited(arguments)},_setSelected:function(selected){dojo.toggleClass(this.domNode,"dijitMenuItemSelected",selected)},setLabel:function(content){dojo.deprecated("dijit.MenuItem.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",content)},setDisabled:function(disabled){dojo.deprecated("dijit.Menu.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0");this.set("disabled",disabled)},_setDisabledAttr:function(value){dijit.setWaiState(this.focusNode,
"disabled",value?"true":"false");this._set("disabled",value)},_setAccelKeyAttr:function(value){this.accelKeyNode.style.display=value?"":"none";this.accelKeyNode.innerHTML=value;dojo.attr(this.containerNode,"colSpan",value?"1":"2");this._set("accelKey",value)}})}if(!dojo._hasResource["dijit.PopupMenuItem"]){dojo._hasResource["dijit.PopupMenuItem"]=true;dojo.provide("dijit.PopupMenuItem");dojo.declare("dijit.PopupMenuItem",dijit.MenuItem,{_fillContent:function(){if(this.srcNodeRef){var nodes=dojo.query("*",
this.srcNodeRef);dijit.PopupMenuItem.superclass._fillContent.call(this,nodes[0]);this.dropDownContainer=this.srcNodeRef}},startup:function(){if(this._started)return;this.inherited(arguments);if(!this.popup){var node=dojo.query("[widgetId]",this.dropDownContainer)[0];this.popup=dijit.byNode(node)}dojo.body(this.appendToNode).appendChild(this.popup.domNode);this.popup.startup();this.popup.domNode.style.display="none";if(this.arrowWrapper)dojo.style(this.arrowWrapper,"visibility","");dijit.setWaiState(this.focusNode,
"haspopup","true")},destroyDescendants:function(){if(this.popup){if(!this.popup._destroyed)this.popup.destroyRecursive();delete this.popup}this.inherited(arguments)}})}if(!dojo._hasResource["dijit.CheckedMenuItem"]){dojo._hasResource["dijit.CheckedMenuItem"]=true;dojo.provide("dijit.CheckedMenuItem");dojo.declare("dijit.CheckedMenuItem",dijit.MenuItem,{templateString:dojo.cache("dijit","templates/CheckedMenuItem.html",'<tr class="dijitReset dijitMenuItem" dojoAttachPoint="focusNode" role="menuitemcheckbox" tabIndex="-1"\r\n\t\tdojoAttachEvent="onmouseenter:_onHover,onmouseleave:_onUnhover,ondijitclick:_onClick">\r\n\t<td class="dijitReset dijitMenuItemIconCell" role="presentation">\r\n\t\t<img src="${_blankGif()}" alt="" class="dijitMenuItemIcon dijitCheckedMenuItemIcon" dojoAttachPoint="iconNode"/>\r\n\t\t<span class="dijitCheckedMenuItemIconChar">&#10003;</span>\r\n\t</td>\r\n\t<td class="dijitReset dijitMenuItemLabel" colspan="2" dojoAttachPoint="containerNode,labelNode"></td>\r\n\t<td class="dijitReset dijitMenuItemAccelKey" style="display: none" dojoAttachPoint="accelKeyNode"></td>\r\n\t<td class="dijitReset dijitMenuArrowCell" role="presentation">&nbsp;</td>\r\n</tr>\r\n'),
checked:false,_setCheckedAttr:function(checked){dojo.toggleClass(this.domNode,"dijitCheckedMenuItemChecked",checked);dijit.setWaiState(this.domNode,"checked",checked);this._set("checked",checked)},onChange:function(checked){},_onClick:function(e){if(!this.disabled){this.set("checked",!this.checked);this.onChange(this.checked)}this.inherited(arguments)}})}if(!dojo._hasResource["dijit.MenuSeparator"]){dojo._hasResource["dijit.MenuSeparator"]=true;dojo.provide("dijit.MenuSeparator");dojo.declare("dijit.MenuSeparator",
[dijit._Widget,dijit._Templated,dijit._Contained],{templateString:dojo.cache("dijit","templates/MenuSeparator.html",'<tr class="dijitMenuSeparator">\r\n\t<td class="dijitMenuSeparatorIconCell"></td>\r\n\t<td colspan="3">\r\n\t\t<div class="dijitMenuSeparatorTop"></div>\r\n\t\t<div class="dijitMenuSeparatorBottom"></div>\r\n\t</td>\r\n</tr>\r\n'),buildRendering:function(){this.inherited(arguments);dojo.setSelectable(this.domNode,false)},isFocusable:function(){return false}})}if(!dojo._hasResource["dijit.Menu"]){dojo._hasResource["dijit.Menu"]=
true;dojo.provide("dijit.Menu");dojo.declare("dijit._MenuBase",[dijit._Widget,dijit._Templated,dijit._KeyNavContainer],{parentMenu:null,popupDelay:500,startup:function(){if(this._started)return;dojo.forEach(this.getChildren(),function(child){child.startup()});this.startupKeyNavChildren();this.inherited(arguments)},onExecute:function(){},onCancel:function(closeAll){},_moveToPopup:function(evt){if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled)this.focusedChild._onClick(evt);
else{var topMenu=this._getTopMenu();if(topMenu&&topMenu._isMenuBar)topMenu.focusNext()}},_onPopupHover:function(evt){if(this.currentPopup&&this.currentPopup._pendingClose_timer){var parentMenu=this.currentPopup.parentMenu;if(parentMenu.focusedChild)parentMenu.focusedChild._setSelected(false);parentMenu.focusedChild=this.currentPopup.from_item;parentMenu.focusedChild._setSelected(true);this._stopPendingCloseTimer(this.currentPopup)}},onItemHover:function(item){if(this.isActive){this.focusChild(item);
if(this.focusedChild.popup&&!this.focusedChild.disabled&&!this.hover_timer)this.hover_timer=setTimeout(dojo.hitch(this,"_openPopup"),this.popupDelay)}if(this.focusedChild)this.focusChild(item);this._hoveredChild=item},_onChildBlur:function(item){this._stopPopupTimer();item._setSelected(false);var itemPopup=item.popup;if(itemPopup){this._stopPendingCloseTimer(itemPopup);itemPopup._pendingClose_timer=setTimeout(function(){itemPopup._pendingClose_timer=null;if(itemPopup.parentMenu)itemPopup.parentMenu.currentPopup=
null;dijit.popup.close(itemPopup)},this.popupDelay)}},onItemUnhover:function(item){if(this.isActive)this._stopPopupTimer();if(this._hoveredChild==item)this._hoveredChild=null},_stopPopupTimer:function(){if(this.hover_timer){clearTimeout(this.hover_timer);this.hover_timer=null}},_stopPendingCloseTimer:function(popup){if(popup._pendingClose_timer){clearTimeout(popup._pendingClose_timer);popup._pendingClose_timer=null}},_stopFocusTimer:function(){if(this._focus_timer){clearTimeout(this._focus_timer);
this._focus_timer=null}},_getTopMenu:function(){for(var top=this;top.parentMenu;top=top.parentMenu);return top},onItemClick:function(item,evt){if(typeof this.isShowingNow=="undefined")this._markActive();this.focusChild(item);if(item.disabled)return false;if(item.popup)this._openPopup();else{this.onExecute();item.onClick(evt)}},_openPopup:function(){this._stopPopupTimer();var from_item=this.focusedChild;if(!from_item)return;var popup=from_item.popup;if(popup.isShowingNow)return;if(this.currentPopup){this._stopPendingCloseTimer(this.currentPopup);
dijit.popup.close(this.currentPopup)}popup.parentMenu=this;popup.from_item=from_item;var self=this;dijit.popup.open({parent:this,popup:popup,around:from_item.domNode,orient:this._orient||(this.isLeftToRight()?{"TR":"TL","TL":"TR","BR":"BL","BL":"BR"}:{"TL":"TR","TR":"TL","BL":"BR","BR":"BL"}),appendToNode:this.appendToNode,onCancel:function(){self.focusChild(from_item);self._cleanUp();from_item._setSelected(true);self.focusedChild=from_item},onExecute:dojo.hitch(this,"_cleanUp")});this.currentPopup=
popup;popup.connect(popup.domNode,"onmouseenter",dojo.hitch(self,"_onPopupHover"));if(popup.focus)popup._focus_timer=setTimeout(dojo.hitch(popup,function(){this._focus_timer=null;this.focus()}),0)},_markActive:function(){this.isActive=true;dojo.replaceClass(this.domNode,"dijitMenuActive","dijitMenuPassive")},onOpen:function(e){this.isShowingNow=true;this._markActive()},_markInactive:function(){this.isActive=false;dojo.replaceClass(this.domNode,"dijitMenuPassive","dijitMenuActive")},onClose:function(){this._stopFocusTimer();
this._markInactive();this.isShowingNow=false;this.parentMenu=null;if(this.first)this.destroyRecursive(false);else this._closeChild()},_closeChild:function(){this._stopPopupTimer();var fromItem=this.focusedChild&&this.focusedChild.from_item;if(this.currentPopup){if(dijit._curFocus&&dojo.isDescendant(dijit._curFocus,this.currentPopup.domNode))this.focusedChild.focusNode.focus();dijit.popup.close(this.currentPopup);this.currentPopup=null}if(this.focusedChild){this.focusedChild._setSelected(false);this.focusedChild._onUnhover();
this.focusedChild=null}},_onItemFocus:function(item){if(this._hoveredChild&&this._hoveredChild!=item)this._hoveredChild._onUnhover()},_onBlur:function(){this._cleanUp();this.inherited(arguments)},_cleanUp:function(){this._closeChild();if(typeof this.isShowingNow=="undefined")this._markInactive()}});dojo.declare("dijit.Menu",dijit._MenuBase,{constructor:function(){this._bindings=[]},templateString:dojo.cache("dijit","templates/Menu.html",'<div class="dijitReset"><span class="dijitReset dijitMenuBorder"><table class="dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable" role="menu" tabIndex="${tabIndex}" dojoAttachEvent="onkeypress:_onKeyPress" cellspacing="0">\r\n\t<tbody class="dijitReset" dojoAttachPoint="containerNode"></tbody>\r\n</table></span></div>\r\n'),
targetNodeIds:[],contextMenuForWindow:false,leftClickToOpen:false,refocus:true,postCreate:function(){if(this.contextMenuForWindow)this.bindDomNode(dojo.body(this.appendToNode));else dojo.forEach(this.targetNodeIds,this.bindDomNode,this);var k=dojo.keys,l=this.isLeftToRight();this._openSubMenuKey=l?k.RIGHT_ARROW:k.LEFT_ARROW;this._closeSubMenuKey=l?k.LEFT_ARROW:k.RIGHT_ARROW;this.connectKeyNavHandlers([k.UP_ARROW],[k.DOWN_ARROW])},_onKeyPress:function(evt){if(evt.ctrlKey||evt.altKey)return;switch(evt.charOrCode){case this._openSubMenuKey:this._moveToPopup(evt);
dojo.stopEvent(evt);break;case this._closeSubMenuKey:if(this.parentMenu)if(this.parentMenu._isMenuBar)this.parentMenu.focusPrev();else this.onCancel(false);else dojo.stopEvent(evt);break}},_iframeContentWindow:function(iframe_el){var win=dojo.window.get(this._iframeContentDocument(iframe_el))||this._iframeContentDocument(iframe_el)["__parent__"]||iframe_el.name&&dojo.doc.frames[iframe_el.name]||null;return win},_iframeContentDocument:function(iframe_el){var doc=iframe_el.contentDocument||iframe_el.contentWindow&&
iframe_el.contentWindow.document||iframe_el.name&&dojo.doc.frames[iframe_el.name]&&dojo.doc.frames[iframe_el.name].document||null;return doc},bindDomNode:function(node){node=dojo.byId(node);var cn;if(node.tagName.toLowerCase()=="iframe"){var iframe=node,win=this._iframeContentWindow(iframe);cn=dojo.withGlobal(win,dojo.body)}else cn=node==dojo.body()?dojo.doc.documentElement:node;var binding={node:node,iframe:iframe};dojo.attr(node,"_dijitMenu"+this.id,this._bindings.push(binding));var doConnects=
dojo.hitch(this,function(cn){return[dojo.connect(cn,this.leftClickToOpen?"onclick":"oncontextmenu",this,function(evt){dojo.stopEvent(evt);this._scheduleOpen(evt.target,iframe,{x:evt.pageX,y:evt.pageY})}),dojo.connect(cn,"onkeydown",this,function(evt){if(evt.shiftKey&&evt.keyCode==dojo.keys.F10){dojo.stopEvent(evt);this._scheduleOpen(evt.target,iframe)}})]});binding.connects=cn?doConnects(cn):[];if(iframe){binding.onloadHandler=dojo.hitch(this,function(){var win=this._iframeContentWindow(iframe);cn=
dojo.withGlobal(win,dojo.body);binding.connects=doConnects(cn)});if(iframe.addEventListener)iframe.addEventListener("load",binding.onloadHandler,false);else iframe.attachEvent("onload",binding.onloadHandler)}},unBindDomNode:function(nodeName){var node;try{node=dojo.byId(nodeName)}catch(e){return}var attrName="_dijitMenu"+this.id;if(node&&dojo.hasAttr(node,attrName)){var bid=dojo.attr(node,attrName)-1,b=this._bindings[bid];dojo.forEach(b.connects,dojo.disconnect);var iframe=b.iframe;if(iframe)if(iframe.removeEventListener)iframe.removeEventListener("load",
b.onloadHandler,false);else iframe.detachEvent("onload",b.onloadHandler);dojo.removeAttr(node,attrName);delete this._bindings[bid]}},_scheduleOpen:function(target,iframe,coords){if(!this._openTimer)this._openTimer=setTimeout(dojo.hitch(this,function(){delete this._openTimer;this._openMyself({target:target,iframe:iframe,coords:coords})}),1)},_openMyself:function(args){var target=args.target,iframe=args.iframe,coords=args.coords;if(coords){if(iframe){var od=target.ownerDocument,ifc=dojo.position(iframe,
true),win=this._iframeContentWindow(iframe),scroll=dojo.withGlobal(win,"_docScroll",dojo);var cs=dojo.getComputedStyle(iframe),tp=dojo._toPixelValue,left=(dojo.isIE&&dojo.isQuirks?0:tp(iframe,cs.paddingLeft))+(dojo.isIE&&dojo.isQuirks?tp(iframe,cs.borderLeftWidth):0),top=(dojo.isIE&&dojo.isQuirks?0:tp(iframe,cs.paddingTop))+(dojo.isIE&&dojo.isQuirks?tp(iframe,cs.borderTopWidth):0);coords.x+=ifc.x+left-scroll.x;coords.y+=ifc.y+top-scroll.y}}else{coords=dojo.position(target,true);coords.x+=10;coords.y+=
10}var offset=dojo._getAbsolutePositionedElementsOffset(this.appendToNode);coords.x-=offset.x;coords.y-=offset.y;var self=this;var savedFocus=dijit.getFocus(this);function closeAndRestoreFocus(){if(self.refocus)dijit.focus(savedFocus);dijit.popup.close(self)}dijit.popup.open({popup:this,x:coords.x,y:coords.y,appendToNode:this.appendToNode,onExecute:closeAndRestoreFocus,onCancel:closeAndRestoreFocus,orient:this.isLeftToRight()?"L":"R"});this.focus();this._onBlur=function(){this.inherited("_onBlur",
arguments);dijit.popup.close(this)}},uninitialize:function(){dojo.forEach(this._bindings,function(b){if(b)this.unBindDomNode(b.node)},this);this.inherited(arguments)}})}if(!dojo._hasResource["dojox.html.metrics"]){dojo._hasResource["dojox.html.metrics"]=true;dojo.provide("dojox.html.metrics");(function(){var dhm=dojox.html.metrics;dhm.getFontMeasurements=function(){var heights={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,"small":0,"medium":0,"large":0,"x-large":0,"xx-large":0};
if(dojo.isIE)dojo.doc.documentElement.style.fontSize="100%";var div=dojo.doc.createElement("div");var ds=div.style;ds.position="absolute";ds.left="-100px";ds.top="0";ds.width="30px";ds.height="1000em";ds.borderWidth="0";ds.margin="0";ds.padding="0";ds.outline="0";ds.lineHeight="1";ds.overflow="hidden";dojo.body().appendChild(div);for(var p in heights){ds.fontSize=p;heights[p]=Math.round(div.offsetHeight*12/16)*16/12/1E3}dojo.body().removeChild(div);div=null;return heights};var fontMeasurements=null;
dhm.getCachedFontMeasurements=function(recalculate){if(recalculate||!fontMeasurements)fontMeasurements=dhm.getFontMeasurements();return fontMeasurements};var measuringNode=null,empty={};dhm.getTextBox=function(text,style,className){var m,s;if(!measuringNode){m=measuringNode=dojo.doc.createElement("div");var c=dojo.doc.createElement("div");c.appendChild(m);s=c.style;s.overflow="scroll";s.position="absolute";s.left="0px";s.top="-10000px";s.width="1px";s.height="1px";s.visibility="hidden";s.borderWidth=
"0";s.margin="0";s.padding="0";s.outline="0";dojo.body().appendChild(c)}else m=measuringNode;m.className="";s=m.style;s.borderWidth="0";s.margin="0";s.padding="0";s.outline="0";if(arguments.length>1&&style)for(var i in style){if(i in empty)continue;s[i]=style[i]}if(arguments.length>2&&className)m.className=className;m.innerHTML=text;var box=dojo.position(m);box.w=m.parentNode.scrollWidth;return box};var scroll={w:16,h:16};dhm.getScrollbar=function(){return{w:scroll.w,h:scroll.h}};dhm._fontResizeNode=
null;dhm.initOnFontResize=function(interval){var f=dhm._fontResizeNode=dojo.doc.createElement("iframe");var fs=f.style;fs.position="absolute";fs.width="5em";fs.height="10em";fs.top="-10000px";if(dojo.isIE)f.onreadystatechange=function(){if(f.contentWindow.document.readyState=="complete")f.onresize=dojo.getObject(dojox._scopeName+".html.metrics._fontresize")};else f.onload=function(){f.contentWindow.onresize=dojo.getObject(dojox._scopeName+".html.metrics._fontresize")};f.setAttribute("src","javascript:'<html><head><script>if(\"loadFirebugConsole\" in window){window.loadFirebugConsole();}\x3c/script></head><body></body></html>'");
dojo.body().appendChild(f);dhm.initOnFontResize=function(){}};dhm.onFontResize=function(){};dhm._fontresize=function(){dhm.onFontResize()};dojo.addOnUnload(function(){var f=dhm._fontResizeNode;if(f){if(dojo.isIE&&f.onresize)f.onresize=null;else if(f.contentWindow&&f.contentWindow.onresize)f.contentWindow.onresize=null;dhm._fontResizeNode=null}});dojo.addOnLoad(function(){try{var n=dojo.doc.createElement("div");n.style.cssText="top:0;left:0;width:100px;height:100px;overflow:scroll;position:absolute;visibility:hidden;";
dojo.body().appendChild(n);scroll.w=n.offsetWidth-n.clientWidth;scroll.h=n.offsetHeight-n.clientHeight;dojo.body().removeChild(n);delete n}catch(e){}if("fontSizeWatch"in dojo.config&&!!dojo.config.fontSizeWatch)dhm.initOnFontResize()})})()}if(!dojo._hasResource["dojox.grid.util"]){dojo._hasResource["dojox.grid.util"]=true;dojo.provide("dojox.grid.util");(function(){var dgu=dojox.grid.util;dgu.na="...";dgu.rowIndexTag="gridRowIndex";dgu.gridViewTag="gridView";dgu.fire=function(ob,ev,args){var fn=ob&&
ev&&ob[ev];return fn&&(args?fn.apply(ob,args):ob[ev]())};dgu.setStyleHeightPx=function(inElement,inHeight){if(inHeight>=0){var s=inElement.style;var v=inHeight+"px";if(inElement&&s["height"]!=v)s["height"]=v}};dgu.mouseEvents=["mouseover","mouseout","mousedown","mouseup","click","dblclick","contextmenu"];dgu.keyEvents=["keyup","keydown","keypress"];dgu.funnelEvents=function(inNode,inObject,inMethod,inEvents){var evts=inEvents?inEvents:dgu.mouseEvents.concat(dgu.keyEvents);for(var i=0,l=evts.length;i<
l;i++)inObject.connect(inNode,"on"+evts[i],inMethod)};dgu.removeNode=function(inNode){inNode=dojo.byId(inNode);inNode&&inNode.parentNode&&inNode.parentNode.removeChild(inNode);return inNode};dgu.arrayCompare=function(inA,inB){for(var i=0,l=inA.length;i<l;i++)if(inA[i]!=inB[i])return false;return inA.length==inB.length};dgu.arrayInsert=function(inArray,inIndex,inValue){if(inArray.length<=inIndex)inArray[inIndex]=inValue;else inArray.splice(inIndex,0,inValue)};dgu.arrayRemove=function(inArray,inIndex){inArray.splice(inIndex,
1)};dgu.arraySwap=function(inArray,inI,inJ){var cache=inArray[inI];inArray[inI]=inArray[inJ];inArray[inJ]=cache}})()}if(!dojo._hasResource["dojox.grid._Scroller"]){dojo._hasResource["dojox.grid._Scroller"]=true;dojo.provide("dojox.grid._Scroller");(function(){var indexInParent=function(inNode){var i=0,n,p=inNode.parentNode;while(n=p.childNodes[i++])if(n==inNode)return i-1;return-1};var cleanNode=function(inNode){if(!inNode)return;var filter=function(inW){return inW.domNode&&dojo.isDescendant(inW.domNode,
inNode,true)};var ws=dijit.registry.filter(filter);for(var i=0,w;w=ws[i];i++)w.destroy();delete ws};var getTagName=function(inNodeOrId){var node=dojo.byId(inNodeOrId);return node&&node.tagName?node.tagName.toLowerCase():""};var nodeKids=function(inNode,inTag){var result=[];var i=0,n;while(n=inNode.childNodes[i]){i++;if(getTagName(n)==inTag)result.push(n)}return result};var divkids=function(inNode){return nodeKids(inNode,"div")};dojo.declare("dojox.grid._Scroller",null,{constructor:function(inContentNodes){this.setContentNodes(inContentNodes);
this.pageHeights=[];this.pageNodes=[];this.stack=[]},rowCount:0,defaultRowHeight:21,keepRows:100,contentNode:null,scrollboxNode:null,defaultPageHeight:0,keepPages:10,pageCount:0,windowHeight:0,firstVisibleRow:0,lastVisibleRow:0,averageRowHeight:0,page:0,pageTop:0,init:function(inRowCount,inKeepRows,inRowsPerPage){switch(arguments.length){case 3:this.rowsPerPage=inRowsPerPage;case 2:this.keepRows=inKeepRows;case 1:this.rowCount=inRowCount;default:break}this.defaultPageHeight=this.defaultRowHeight*
this.rowsPerPage;this.pageCount=this._getPageCount(this.rowCount,this.rowsPerPage);this.setKeepInfo(this.keepRows);this.invalidate();if(this.scrollboxNode){this.scrollboxNode.scrollTop=0;this.scroll(0);this.scrollboxNode.onscroll=dojo.hitch(this,"onscroll")}},_getPageCount:function(rowCount,rowsPerPage){return rowCount?Math.ceil(rowCount/rowsPerPage)||1:0},destroy:function(){this.invalidateNodes();delete this.contentNodes;delete this.contentNode;delete this.scrollboxNode},setKeepInfo:function(inKeepRows){this.keepRows=
inKeepRows;this.keepPages=!this.keepRows?this.keepPages:Math.max(Math.ceil(this.keepRows/this.rowsPerPage),2)},setContentNodes:function(inNodes){this.contentNodes=inNodes;this.colCount=this.contentNodes?this.contentNodes.length:0;this.pageNodes=[];for(var i=0;i<this.colCount;i++)this.pageNodes[i]=[]},getDefaultNodes:function(){return this.pageNodes[0]||[]},invalidate:function(){this._invalidating=true;this.invalidateNodes();this.pageHeights=[];this.height=this.pageCount?(this.pageCount-1)*this.defaultPageHeight+
this.calcLastPageHeight():0;this.resize();this._invalidating=false},updateRowCount:function(inRowCount){this.invalidateNodes();this.rowCount=inRowCount;var oldPageCount=this.pageCount;if(oldPageCount===0)this.height=1;this.pageCount=this._getPageCount(this.rowCount,this.rowsPerPage);if(this.pageCount<oldPageCount)for(var i=oldPageCount-1;i>=this.pageCount;i--){this.height-=this.getPageHeight(i);delete this.pageHeights[i]}else if(this.pageCount>oldPageCount)this.height+=this.defaultPageHeight*(this.pageCount-
oldPageCount-1)+this.calcLastPageHeight();this.resize()},pageExists:function(inPageIndex){return Boolean(this.getDefaultPageNode(inPageIndex))},measurePage:function(inPageIndex){if(this.grid.rowHeight){var height=this.grid.rowHeight+1;return((inPageIndex+1)*this.rowsPerPage>this.rowCount?this.rowCount-inPageIndex*this.rowsPerPage:this.rowsPerPage)*height}var n=this.getDefaultPageNode(inPageIndex);return n&&n.innerHTML?n.offsetHeight:undefined},positionPage:function(inPageIndex,inPos){for(var i=0;i<
this.colCount;i++)this.pageNodes[i][inPageIndex].style.top=inPos+"px"},repositionPages:function(inPageIndex){var nodes=this.getDefaultNodes();var last=0;for(var i=0;i<this.stack.length;i++)last=Math.max(this.stack[i],last);var n=nodes[inPageIndex];var y=n?this.getPageNodePosition(n)+this.getPageHeight(inPageIndex):0;for(var p=inPageIndex+1;p<=last;p++){n=nodes[p];if(n){if(this.getPageNodePosition(n)==y)return;this.positionPage(p,y)}y+=this.getPageHeight(p)}},installPage:function(inPageIndex){for(var i=
0;i<this.colCount;i++)this.contentNodes[i].appendChild(this.pageNodes[i][inPageIndex])},preparePage:function(inPageIndex,inReuseNode){var p=inReuseNode?this.popPage():null;for(var i=0;i<this.colCount;i++){var nodes=this.pageNodes[i];var new_p=p===null?this.createPageNode():this.invalidatePageNode(p,nodes);new_p.pageIndex=inPageIndex;nodes[inPageIndex]=new_p}},renderPage:function(inPageIndex){var nodes=[];var i,j;for(i=0;i<this.colCount;i++)nodes[i]=this.pageNodes[i][inPageIndex];for(i=0,j=inPageIndex*
this.rowsPerPage;i<this.rowsPerPage&&j<this.rowCount;i++,j++)this.renderRow(j,nodes)},removePage:function(inPageIndex){for(var i=0,j=inPageIndex*this.rowsPerPage;i<this.rowsPerPage;i++,j++)this.removeRow(j)},destroyPage:function(inPageIndex){for(var i=0;i<this.colCount;i++){var n=this.invalidatePageNode(inPageIndex,this.pageNodes[i]);if(n)dojo.destroy(n)}},pacify:function(inShouldPacify){},pacifying:false,pacifyTicks:200,setPacifying:function(inPacifying){if(this.pacifying!=inPacifying){this.pacifying=
inPacifying;this.pacify(this.pacifying)}},startPacify:function(){this.startPacifyTicks=(new Date).getTime()},doPacify:function(){var result=(new Date).getTime()-this.startPacifyTicks>this.pacifyTicks;this.setPacifying(true);this.startPacify();return result},endPacify:function(){this.setPacifying(false)},resize:function(){if(this.scrollboxNode)this.windowHeight=this.scrollboxNode.clientHeight;for(var i=0;i<this.colCount;i++)dojox.grid.util.setStyleHeightPx(this.contentNodes[i],Math.max(1,this.height));
var needPage=!this._invalidating;if(!needPage){var ah=this.grid.get("autoHeight");if(typeof ah=="number"&&ah<=Math.min(this.rowsPerPage,this.rowCount))needPage=true}if(needPage)this.needPage(this.page,this.pageTop);var rowsOnPage=this.page<this.pageCount-1?this.rowsPerPage:this.rowCount%this.rowsPerPage||this.rowsPerPage;var pageHeight=this.getPageHeight(this.page);this.averageRowHeight=pageHeight>0&&rowsOnPage>0?pageHeight/rowsOnPage:0},calcLastPageHeight:function(){if(!this.pageCount)return 0;var lastPage=
this.pageCount-1;var lastPageHeight=(this.rowCount%this.rowsPerPage||this.rowsPerPage)*this.defaultRowHeight;this.pageHeights[lastPage]=lastPageHeight;return lastPageHeight},updateContentHeight:function(inDh){this.height+=inDh;this.resize()},updatePageHeight:function(inPageIndex,fromBuild,fromAsynRendering){if(this.pageExists(inPageIndex)){var oh=this.getPageHeight(inPageIndex);var h=this.measurePage(inPageIndex);if(h===undefined)h=oh;this.pageHeights[inPageIndex]=h;if(oh!=h){this.updateContentHeight(h-
oh);var ah=this.grid.get("autoHeight");if(typeof ah=="number"&&ah>this.rowCount||ah===true&&!fromBuild)if(!fromAsynRendering)this.grid.sizeChange();else{var ns=this.grid.viewsNode.style;ns.height=parseInt(ns.height)+h-oh+"px";this.repositionPages(inPageIndex)}else this.repositionPages(inPageIndex)}return h}return 0},rowHeightChanged:function(inRowIndex,fromAsynRendering){this.updatePageHeight(Math.floor(inRowIndex/this.rowsPerPage),false,fromAsynRendering)},invalidateNodes:function(){while(this.stack.length)this.destroyPage(this.popPage())},
createPageNode:function(){var p=document.createElement("div");dojo.attr(p,"role","presentation");p.style.position="absolute";p.style[dojo._isBodyLtr()?"left":"right"]="0";return p},getPageHeight:function(inPageIndex){var ph=this.pageHeights[inPageIndex];return ph!==undefined?ph:this.defaultPageHeight},pushPage:function(inPageIndex){return this.stack.push(inPageIndex)},popPage:function(){return this.stack.shift()},findPage:function(inTop){var i=0,h=0;for(var ph=0;i<this.pageCount;i++,h+=ph){ph=this.getPageHeight(i);
if(h+ph>=inTop)break}this.page=i;this.pageTop=h},buildPage:function(inPageIndex,inReuseNode,inPos){this.preparePage(inPageIndex,inReuseNode);this.positionPage(inPageIndex,inPos);this.installPage(inPageIndex);this.renderPage(inPageIndex);this.pushPage(inPageIndex)},needPage:function(inPageIndex,inPos){var h=this.getPageHeight(inPageIndex),oh=h;if(!this.pageExists(inPageIndex)){this.buildPage(inPageIndex,!this.grid._autoHeight&&this.keepPages&&this.stack.length>=this.keepPages,inPos);h=this.updatePageHeight(inPageIndex,
true)}else this.positionPage(inPageIndex,inPos);return h},onscroll:function(){this.scroll(this.scrollboxNode.scrollTop)},scroll:function(inTop){this.grid.scrollTop=inTop;if(this.colCount){this.startPacify();this.findPage(inTop);var h=this.height;var b=this.getScrollBottom(inTop);for(var p=this.page,y=this.pageTop;p<this.pageCount&&(b<0||y<b);p++)y+=this.needPage(p,y);this.firstVisibleRow=this.getFirstVisibleRow(this.page,this.pageTop,inTop);this.lastVisibleRow=this.getLastVisibleRow(p-1,y,b);if(h!=
this.height)this.repositionPages(p-1);this.endPacify()}},getScrollBottom:function(inTop){return this.windowHeight>=0?inTop+this.windowHeight:-1},processNodeEvent:function(e,inNode){var t=e.target;while(t&&t!=inNode&&t.parentNode&&t.parentNode.parentNode!=inNode)t=t.parentNode;if(!t||!t.parentNode||t.parentNode.parentNode!=inNode)return false;var page=t.parentNode;e.topRowIndex=page.pageIndex*this.rowsPerPage;e.rowIndex=e.topRowIndex+indexInParent(t);e.rowTarget=t;return true},processEvent:function(e){return this.processNodeEvent(e,
this.contentNode)},renderRow:function(inRowIndex,inPageNode){},removeRow:function(inRowIndex){},getDefaultPageNode:function(inPageIndex){return this.getDefaultNodes()[inPageIndex]},positionPageNode:function(inNode,inPos){},getPageNodePosition:function(inNode){return inNode.offsetTop},invalidatePageNode:function(inPageIndex,inNodes){var p=inNodes[inPageIndex];if(p){delete inNodes[inPageIndex];this.removePage(inPageIndex,p);cleanNode(p);p.innerHTML=""}return p},getPageRow:function(inPage){return inPage*
this.rowsPerPage},getLastPageRow:function(inPage){return Math.min(this.rowCount,this.getPageRow(inPage+1))-1},getFirstVisibleRow:function(inPage,inPageTop,inScrollTop){if(!this.pageExists(inPage))return 0;var row=this.getPageRow(inPage);var nodes=this.getDefaultNodes();var rows=divkids(nodes[inPage]);for(var i=0,l=rows.length;i<l&&inPageTop<inScrollTop;i++,row++)inPageTop+=rows[i].offsetHeight;return row?row-1:row},getLastVisibleRow:function(inPage,inBottom,inScrollBottom){if(!this.pageExists(inPage))return 0;
var nodes=this.getDefaultNodes();var row=this.getLastPageRow(inPage);var rows=divkids(nodes[inPage]);for(var i=rows.length-1;i>=0&&inBottom>inScrollBottom;i--,row--)inBottom-=rows[i].offsetHeight;return row+1},findTopRow:function(inScrollTop){var nodes=this.getDefaultNodes();var rows=divkids(nodes[this.page]);for(var i=0,l=rows.length,t=this.pageTop,h;i<l;i++){h=rows[i].offsetHeight;t+=h;if(t>=inScrollTop){this.offset=h-(t-inScrollTop);return i+this.page*this.rowsPerPage}}return-1},findScrollTop:function(inRow){var rowPage=
Math.floor(inRow/this.rowsPerPage);var t=0;var i,l;for(i=0;i<rowPage;i++)t+=this.getPageHeight(i);this.pageTop=t;this.page=rowPage;this.needPage(rowPage,this.pageTop);var nodes=this.getDefaultNodes();var rows=divkids(nodes[rowPage]);var r=inRow-this.rowsPerPage*rowPage;for(i=0,l=rows.length;i<l&&i<r;i++)t+=rows[i].offsetHeight;return t},dummy:0})})()}if(!dojo._hasResource["dojox.grid.cells._base"]){dojo._hasResource["dojox.grid.cells._base"]=true;dojo.provide("dojox.grid.cells._base");dojo.declare("dojox.grid._DeferredTextWidget",
dijit._Widget,{deferred:null,_destroyOnRemove:true,postCreate:function(){if(this.deferred)this.deferred.addBoth(dojo.hitch(this,function(text){if(this.domNode)this.domNode.innerHTML=text}))}});(function(){var focusSelectNode=function(inNode){try{dojox.grid.util.fire(inNode,"focus");dojox.grid.util.fire(inNode,"select")}catch(e){}};var whenIdle=function(){setTimeout(dojo.hitch.apply(dojo,arguments),0)};var dgc=dojox.grid.cells;dojo.declare("dojox.grid.cells._Base",null,{styles:"",classes:"",editable:false,
alwaysEditing:false,formatter:null,defaultValue:"...",value:null,hidden:false,noresize:false,draggable:true,_valueProp:"value",_formatPending:false,constructor:function(inProps){this._props=inProps||{};dojo.mixin(this,inProps);if(this.draggable===undefined)this.draggable=true},_defaultFormat:function(inValue,callArgs){var s=this.grid.formatterScope||this;var f=this.formatter;if(f&&s&&typeof f=="string")f=this.formatter=s[f];var v=inValue!=this.defaultValue&&f?f.apply(s,callArgs):inValue;if(typeof v==
"undefined")return this.defaultValue;if(v&&v.addBoth)v=new dojox.grid._DeferredTextWidget({deferred:v},dojo.create("span",{innerHTML:this.defaultValue}));if(v&&v.declaredClass&&v.startup)return"<div class='dojoxGridStubNode' linkWidget='"+v.id+"' cellIdx='"+this.index+"'>"+this.defaultValue+"</div>";return v},format:function(inRowIndex,inItem){var f,i=this.grid.edit.info,d=this.get?this.get(inRowIndex,inItem):this.value||this.defaultValue;d=d&&d.replace&&this.grid.escapeHTMLInData?d.replace(/&/g,
"&amp;").replace(/</g,"&lt;"):d;if(this.editable&&(this.alwaysEditing||i.rowIndex==inRowIndex&&i.cell==this))return this.formatEditing(d,inRowIndex);else return this._defaultFormat(d,[d,inRowIndex,this])},formatEditing:function(inDatum,inRowIndex){},getNode:function(inRowIndex){return this.view.getCellNode(inRowIndex,this.index)},getHeaderNode:function(){return this.view.getHeaderCellNode(this.index)},getEditNode:function(inRowIndex){return(this.getNode(inRowIndex)||0).firstChild||0},canResize:function(){var uw=
this.unitWidth;return uw&&uw!=="auto"},isFlex:function(){var uw=this.unitWidth;return uw&&dojo.isString(uw)&&(uw=="auto"||uw.slice(-1)=="%")},applyEdit:function(inValue,inRowIndex){this.grid.edit.applyCellEdit(inValue,this,inRowIndex)},cancelEdit:function(inRowIndex){this.grid.doCancelEdit(inRowIndex)},_onEditBlur:function(inRowIndex){if(this.grid.edit.isEditCell(inRowIndex,this.index))this.grid.edit.apply()},registerOnBlur:function(inNode,inRowIndex){if(this.commitOnBlur)dojo.connect(inNode,"onblur",
function(e){setTimeout(dojo.hitch(this,"_onEditBlur",inRowIndex),250)})},needFormatNode:function(inDatum,inRowIndex){this._formatPending=true;whenIdle(this,"_formatNode",inDatum,inRowIndex)},cancelFormatNode:function(){this._formatPending=false},_formatNode:function(inDatum,inRowIndex){if(this._formatPending){this._formatPending=false;dojo.setSelectable(this.grid.domNode,true);this.formatNode(this.getEditNode(inRowIndex),inDatum,inRowIndex)}},formatNode:function(inNode,inDatum,inRowIndex){if(dojo.isIE)whenIdle(this,
"focus",inRowIndex,inNode);else this.focus(inRowIndex,inNode)},dispatchEvent:function(m,e){if(m in this)return this[m](e)},getValue:function(inRowIndex){return this.getEditNode(inRowIndex)[this._valueProp]},setValue:function(inRowIndex,inValue){var n=this.getEditNode(inRowIndex);if(n)n[this._valueProp]=inValue},focus:function(inRowIndex,inNode){focusSelectNode(inNode||this.getEditNode(inRowIndex))},save:function(inRowIndex){this.value=this.value||this.getValue(inRowIndex)},restore:function(inRowIndex){this.setValue(inRowIndex,
this.value)},_finish:function(inRowIndex){dojo.setSelectable(this.grid.domNode,false);this.cancelFormatNode()},apply:function(inRowIndex){this.applyEdit(this.getValue(inRowIndex),inRowIndex);this._finish(inRowIndex)},cancel:function(inRowIndex){this.cancelEdit(inRowIndex);this._finish(inRowIndex)}});dgc._Base.markupFactory=function(node,cellDef){var d=dojo;var formatter=d.trim(d.attr(node,"formatter")||"");if(formatter)cellDef.formatter=dojo.getObject(formatter)||formatter;var get=d.trim(d.attr(node,
"get")||"");if(get)cellDef.get=dojo.getObject(get);var getBoolAttr=function(attr,cell,cellAttr){var value=d.trim(d.attr(node,attr)||"");if(value)cell[cellAttr||attr]=!(value.toLowerCase()=="false")};getBoolAttr("sortDesc",cellDef);getBoolAttr("editable",cellDef);getBoolAttr("alwaysEditing",cellDef);getBoolAttr("noresize",cellDef);getBoolAttr("draggable",cellDef);var value=d.trim(d.attr(node,"loadingText")||d.attr(node,"defaultValue")||"");if(value)cellDef.defaultValue=value;var getStrAttr=function(attr,
cell,cellAttr){var value=d.trim(d.attr(node,attr)||"")||undefined;if(value)cell[cellAttr||attr]=value};getStrAttr("styles",cellDef);getStrAttr("headerStyles",cellDef);getStrAttr("cellStyles",cellDef);getStrAttr("classes",cellDef);getStrAttr("headerClasses",cellDef);getStrAttr("cellClasses",cellDef)};dojo.declare("dojox.grid.cells.Cell",dgc._Base,{constructor:function(){this.keyFilter=this.keyFilter},keyFilter:null,formatEditing:function(inDatum,inRowIndex){this.needFormatNode(inDatum,inRowIndex);
return'<input class="dojoxGridInput" type="text" value="'+inDatum+'">'},formatNode:function(inNode,inDatum,inRowIndex){this.inherited(arguments);this.registerOnBlur(inNode,inRowIndex)},doKey:function(e){if(this.keyFilter){var key=String.fromCharCode(e.charCode);if(key.search(this.keyFilter)==-1)dojo.stopEvent(e)}},_finish:function(inRowIndex){this.inherited(arguments);var n=this.getEditNode(inRowIndex);try{dojox.grid.util.fire(n,"blur")}catch(e){}}});dgc.Cell.markupFactory=function(node,cellDef){dgc._Base.markupFactory(node,
cellDef);var d=dojo;var keyFilter=d.trim(d.attr(node,"keyFilter")||"");if(keyFilter)cellDef.keyFilter=new RegExp(keyFilter)};dojo.declare("dojox.grid.cells.RowIndex",dgc.Cell,{name:"Row",postscript:function(){this.editable=false},get:function(inRowIndex){return inRowIndex+1}});dgc.RowIndex.markupFactory=function(node,cellDef){dgc.Cell.markupFactory(node,cellDef)};dojo.declare("dojox.grid.cells.Select",dgc.Cell,{options:null,values:null,returnIndex:-1,constructor:function(inCell){this.values=this.values||
this.options},formatEditing:function(inDatum,inRowIndex){this.needFormatNode(inDatum,inRowIndex);var h=['<select class="dojoxGridSelect">'];for(var i=0,o,v;(o=this.options[i])!==undefined&&(v=this.values[i])!==undefined;i++)h.push("<option",inDatum==v?" selected":"",' value="'+v+'"',">",o,"</option>");h.push("</select>");return h.join("")},getValue:function(inRowIndex){var n=this.getEditNode(inRowIndex);if(n){var i=n.selectedIndex,o=n.options[i];return this.returnIndex>-1?i:o.value||o.innerHTML}}});
dgc.Select.markupFactory=function(node,cell){dgc.Cell.markupFactory(node,cell);var d=dojo;var options=d.trim(d.attr(node,"options")||"");if(options){var o=options.split(",");if(o[0]!=options)cell.options=o}var values=d.trim(d.attr(node,"values")||"");if(values){var v=values.split(",");if(v[0]!=values)cell.values=v}};dojo.declare("dojox.grid.cells.AlwaysEdit",dgc.Cell,{alwaysEditing:true,_formatNode:function(inDatum,inRowIndex){this.formatNode(this.getEditNode(inRowIndex),inDatum,inRowIndex)},applyStaticValue:function(inRowIndex){var e=
this.grid.edit;e.applyCellEdit(this.getValue(inRowIndex),this,inRowIndex);e.start(this,inRowIndex,true)}});dgc.AlwaysEdit.markupFactory=function(node,cell){dgc.Cell.markupFactory(node,cell)};dojo.declare("dojox.grid.cells.Bool",dgc.AlwaysEdit,{_valueProp:"checked",formatEditing:function(inDatum,inRowIndex){return'<input class="dojoxGridInput" type="checkbox"'+(inDatum?' checked="checked"':"")+' style="width: auto" />'},doclick:function(e){if(e.target.tagName=="INPUT")this.applyStaticValue(e.rowIndex)}});
dgc.Bool.markupFactory=function(node,cell){dgc.AlwaysEdit.markupFactory(node,cell)}})()}if(!dojo._hasResource["dojox.grid.cells"]){dojo._hasResource["dojox.grid.cells"]=true;dojo.provide("dojox.grid.cells")}if(!dojo._hasResource["dojox.grid._Builder"]){dojo._hasResource["dojox.grid._Builder"]=true;dojo.provide("dojox.grid._Builder");(function(){var dg=dojox.grid;var getTdIndex=function(td){return td.cellIndex>=0?td.cellIndex:dojo.indexOf(td.parentNode.cells,td)};var getTrIndex=function(tr){return tr.rowIndex>=
0?tr.rowIndex:dojo.indexOf(tr.parentNode.childNodes,tr)};var getTr=function(rowOwner,index){return rowOwner&&((rowOwner.rows||0)[index]||rowOwner.childNodes[index])};var findTable=function(node){for(var n=node;n&&n.tagName!="TABLE";n=n.parentNode);return n};var ascendDom=function(inNode,inWhile){for(var n=inNode;n&&inWhile(n);n=n.parentNode);return n};var makeNotTagName=function(inTagName){var name=inTagName.toUpperCase();return function(node){return node.tagName!=name}};var rowIndexTag=dojox.grid.util.rowIndexTag;
var gridViewTag=dojox.grid.util.gridViewTag;dg._Builder=dojo.extend(function(view){if(view){this.view=view;this.grid=view.grid}},{view:null,_table:'<table class="dojoxGridRowTable" border="0" cellspacing="0" cellpadding="0" role="presentation"',getTableArray:function(){var html=[this._table];if(this.view.viewWidth)html.push([' style="width:',this.view.viewWidth,';"'].join(""));html.push(">");return html},generateCellMarkup:function(inCell,inMoreStyles,inMoreClasses,isHeader,isLast){var result=[],
html;if(isHeader){var sortInfo=inCell.index!=inCell.grid.getSortIndex()?"":inCell.grid.sortInfo>0?'aria-sort="ascending"':'aria-sort="descending"';if(!inCell.id)inCell.id=this.grid.id+"Hdr"+inCell.index;html=['<th tabIndex="-1" aria-readonly="true" role="columnheader"',sortInfo,'id="',inCell.id,'"']}else{var editInfo=this.grid.editable&&!inCell.editable?'aria-readonly="true"':"";html=['<td tabIndex="-1" role="gridcell"',editInfo]}if(inCell.colSpan)html.push(' colspan="',inCell.colSpan,'"');if(inCell.rowSpan)html.push(' rowspan="',
inCell.rowSpan,'"');html.push(' class="dojoxGridCell ');if(inCell.classes)html.push(inCell.classes," ");if(inMoreClasses)html.push(inMoreClasses," ");if(isLast)html.push("last-child ");result.push(html.join(""));result.push("");html=['" idx="',inCell.index,'" style="'];if(inMoreStyles&&inMoreStyles[inMoreStyles.length-1]!=";")inMoreStyles+=";";html.push(inCell.styles,inMoreStyles||"",inCell.hidden?"display:none;":"");if(inCell.unitWidth)html.push("width:",inCell.unitWidth,";");result.push(html.join(""));
result.push("");html=['"'];if(inCell.attrs)html.push(" ",inCell.attrs);html.push('><div class="dojoxGridCellSpacer"><span class="dojoxGridCellData">');result.push(html.join(""));result.push("");result.push(isHeader?"</span></div></th>":"</span></div></td>");return result},isCellNode:function(inNode){return Boolean(inNode&&inNode!=dojo.doc&&dojo.attr(inNode,"idx"))},getCellNodeIndex:function(inCellNode){return inCellNode?Number(dojo.attr(inCellNode,"idx")):-1},getCellNode:function(inRowNode,inCellIndex){for(var i=
0,row;row=getTr(inRowNode.firstChild,i);i++)for(var j=0,cell;cell=row.cells[j];j++)if(this.getCellNodeIndex(cell)==inCellIndex)return cell;return null},findCellTarget:function(inSourceNode,inTopNode){var n=inSourceNode;while(n&&(!this.isCellNode(n)||n.offsetParent&&gridViewTag in n.offsetParent.parentNode&&n.offsetParent.parentNode[gridViewTag]!=this.view.id)&&n!=inTopNode)n=n.parentNode;return n!=inTopNode?n:null},baseDecorateEvent:function(e){e.dispatch="do"+e.type;e.grid=this.grid;e.sourceView=
this.view;e.cellNode=this.findCellTarget(e.target,e.rowNode);e.cellIndex=this.getCellNodeIndex(e.cellNode);e.cell=e.cellIndex>=0?this.grid.getCell(e.cellIndex):null},findTarget:function(inSource,inTag){var n=inSource;while(n&&n!=this.domNode&&(!(inTag in n)||gridViewTag in n&&n[gridViewTag]!=this.view.id))n=n.parentNode;return n!=this.domNode?n:null},findRowTarget:function(inSource){return this.findTarget(inSource,rowIndexTag)},isIntraNodeEvent:function(e){try{return e.cellNode&&e.relatedTarget&&
dojo.isDescendant(e.relatedTarget,e.cellNode)}catch(x){return false}},isIntraRowEvent:function(e){try{var row=e.relatedTarget&&this.findRowTarget(e.relatedTarget);return!row&&e.rowIndex==-1||row&&e.rowIndex==row.gridRowIndex}catch(x){return false}},dispatchEvent:function(e){if(e.dispatch in this)return this[e.dispatch](e);return false},domouseover:function(e){if(e.cellNode&&e.cellNode!=this.lastOverCellNode){this.lastOverCellNode=e.cellNode;this.grid.onMouseOver(e)}this.grid.onMouseOverRow(e)},domouseout:function(e){if(e.cellNode&&
e.cellNode==this.lastOverCellNode&&!this.isIntraNodeEvent(e,this.lastOverCellNode)){this.lastOverCellNode=null;this.grid.onMouseOut(e);if(!this.isIntraRowEvent(e))this.grid.onMouseOutRow(e)}},domousedown:function(e){if(e.cellNode)this.grid.onMouseDown(e);this.grid.onMouseDownRow(e)}});dg._ContentBuilder=dojo.extend(function(view){dg._Builder.call(this,view)},dg._Builder.prototype,{update:function(){this.prepareHtml()},prepareHtml:function(){var defaultGet=this.grid.get,cells=this.view.structure.cells;
for(var j=0,row;row=cells[j];j++)for(var i=0,cell,lastIndex=row.length-1;cell=row[i];i++){cell.get=cell.get||cell.value==undefined&&defaultGet;cell.markup=this.generateCellMarkup(cell,cell.cellStyles,cell.cellClasses,false,lastIndex==i);if(!this.grid.editable&&cell.editable)this.grid.editable=true}},generateHtml:function(inDataIndex,inRowIndex){var html=this.getTableArray(),v=this.view,cells=v.structure.cells,item=this.grid.getItem(inRowIndex);dojox.grid.util.fire(this.view,"onBeforeRow",[inRowIndex,
cells]);for(var j=0,row;row=cells[j];j++){if(row.hidden||row.header)continue;html.push(!row.invisible?"<tr>":'<tr class="dojoxGridInvisible">');for(var i=0,cell,m,cc,cs;cell=row[i];i++){m=cell.markup;cc=cell.customClasses=[];cs=cell.customStyles=[];m[5]=cell.format(inRowIndex,item);m[1]=cc.join(" ");m[3]=cs.join(";");html.push.apply(html,m)}html.push("</tr>")}html.push("</table>");return html.join("")},decorateEvent:function(e){e.rowNode=this.findRowTarget(e.target);if(!e.rowNode)return false;e.rowIndex=
e.rowNode[rowIndexTag];this.baseDecorateEvent(e);e.cell=this.grid.getCell(e.cellIndex);return true}});dg._HeaderBuilder=dojo.extend(function(view){this.moveable=null;dg._Builder.call(this,view)},dg._Builder.prototype,{_skipBogusClicks:false,overResizeWidth:4,minColWidth:1,update:function(){if(this.tableMap)this.tableMap.mapRows(this.view.structure.cells);else this.tableMap=new dg._TableMap(this.view.structure.cells)},generateHtml:function(inGetValue,inValue){var html=this.getTableArray(),cells=this.view.structure.cells;
dojox.grid.util.fire(this.view,"onBeforeRow",[-1,cells]);for(var j=0,row;row=cells[j];j++){if(row.hidden)continue;html.push(!row.invisible?"<tr>":'<tr class="dojoxGridInvisible">');for(var i=0,cell,markup,lastIndex=row.length;cell=row[i];i++){cell.customClasses=[];cell.customStyles=[];if(this.view.simpleStructure){if(cell.draggable)if(cell.headerClasses){if(cell.headerClasses.indexOf("dojoDndItem")==-1)cell.headerClasses+=" dojoDndItem"}else cell.headerClasses="dojoDndItem";if(cell.attrs){if(cell.attrs.indexOf("dndType='gridColumn_")==
-1)cell.attrs+=" dndType='gridColumn_"+this.grid.id+"'"}else cell.attrs="dndType='gridColumn_"+this.grid.id+"'"}markup=this.generateCellMarkup(cell,cell.headerStyles,cell.headerClasses,true,lastIndex==i);markup[5]=inValue!=undefined?inValue:inGetValue(cell);markup[3]=cell.customStyles.join(";");markup[1]=cell.customClasses.join(" ");html.push(markup.join(""))}html.push("</tr>")}html.push("</table>");return html.join("")},getCellX:function(e){var n,x=e.layerX;if(dojo.isMoz||dojo.isIE>=9){n=ascendDom(e.target,
makeNotTagName("th"));x-=n&&n.offsetLeft||0;var t=e.sourceView.getScrollbarWidth();if(!dojo._isBodyLtr()){table=ascendDom(n,makeNotTagName("table"));x-=table&&table.offsetLeft||0}}n=ascendDom(e.target,function(){if(!n||n==e.cellNode)return false;x+=n.offsetLeft<0?0:n.offsetLeft;return true});return x},decorateEvent:function(e){this.baseDecorateEvent(e);e.rowIndex=-1;e.cellX=this.getCellX(e);return true},prepareResize:function(e,mod){do{var i=getTdIndex(e.cellNode);e.cellNode=i?e.cellNode.parentNode.cells[i+
mod]:null;e.cellIndex=e.cellNode?this.getCellNodeIndex(e.cellNode):-1}while(e.cellNode&&e.cellNode.style.display=="none");return Boolean(e.cellNode)},canResize:function(e){if(!e.cellNode||e.cellNode.colSpan>1)return false;var cell=this.grid.getCell(e.cellIndex);return!cell.noresize&&cell.canResize()},overLeftResizeArea:function(e){if(dojo.hasClass(dojo.body(),"dojoDndMove"))return false;if(dojo.isIE){var tN=e.target;if(dojo.hasClass(tN,"dojoxGridArrowButtonNode")||dojo.hasClass(tN,"dojoxGridArrowButtonChar"))return false}if(dojo._isBodyLtr())return e.cellIndex>
0&&(e.cellX>0&&e.cellX<this.overResizeWidth)&&this.prepareResize(e,-1);var t=e.cellNode&&(e.cellX>0&&e.cellX<this.overResizeWidth);return t},overRightResizeArea:function(e){if(dojo.hasClass(dojo.body(),"dojoDndMove"))return false;if(dojo.isIE){var tN=e.target;if(dojo.hasClass(tN,"dojoxGridArrowButtonNode")||dojo.hasClass(tN,"dojoxGridArrowButtonChar"))return false}if(dojo._isBodyLtr())return e.cellNode&&e.cellX>=e.cellNode.offsetWidth-this.overResizeWidth;return e.cellIndex>0&&e.cellX>=e.cellNode.offsetWidth-
this.overResizeWidth&&this.prepareResize(e,-1)},domousemove:function(e){if(!this.moveable){var c=this.overRightResizeArea(e)?"dojoxGridColResize":this.overLeftResizeArea(e)?"dojoxGridColResize":"";if(c&&!this.canResize(e))c="dojoxGridColNoResize";dojo.toggleClass(e.sourceView.headerNode,"dojoxGridColNoResize",c=="dojoxGridColNoResize");dojo.toggleClass(e.sourceView.headerNode,"dojoxGridColResize",c=="dojoxGridColResize");if(dojo.isIE){var t=e.sourceView.headerNode.scrollLeft;e.sourceView.headerNode.scrollLeft=
t}if(c)dojo.stopEvent(e)}},domousedown:function(e){if(!this.moveable)if((this.overRightResizeArea(e)||this.overLeftResizeArea(e))&&this.canResize(e))this.beginColumnResize(e);else{this.grid.onMouseDown(e);this.grid.onMouseOverRow(e)}},doclick:function(e){if(this._skipBogusClicks){dojo.stopEvent(e);return true}return false},colResizeSetup:function(e,isMouse){var headContentBox=dojo.contentBox(e.sourceView.headerNode);if(isMouse){this.lineDiv=document.createElement("div");var vw=(dojo.position||dojo._abs)(e.sourceView.headerNode,
true);var bodyContentBox=dojo.contentBox(e.sourceView.domNode);var l=e.pageX;if(!dojo._isBodyLtr()&&dojo.isIE<8)l-=dojox.html.metrics.getScrollbar().w;dojo.style(this.lineDiv,{top:vw.y+"px",left:l+"px",height:bodyContentBox.h+headContentBox.h+"px"});dojo.addClass(this.lineDiv,"dojoxGridResizeColLine");this.lineDiv._origLeft=l;dojo.body(this.grid.appendToNode).appendChild(this.lineDiv)}var spanners=[],nodes=this.tableMap.findOverlappingNodes(e.cellNode);for(var i=0,cell;cell=nodes[i];i++)spanners.push({node:cell,
index:this.getCellNodeIndex(cell),width:cell.offsetWidth});var view=e.sourceView;var adj=dojo._isBodyLtr()?1:-1;var views=e.grid.views.views;var followers=[];for(var j=view.idx+adj,cView;cView=views[j];j=j+adj)followers.push({node:cView.headerNode,left:window.parseInt(cView.headerNode.style.left)});var table=view.headerContentNode.firstChild;var drag={scrollLeft:e.sourceView.headerNode.scrollLeft,view:view,node:e.cellNode,index:e.cellIndex,w:dojo.contentBox(e.cellNode).w,vw:headContentBox.w,table:table,
tw:dojo.contentBox(table).w,spanners:spanners,followers:followers};return drag},beginColumnResize:function(e){this.moverDiv=document.createElement("div");dojo.style(this.moverDiv,{position:"absolute",left:0});dojo.body().appendChild(this.moverDiv);dojo.addClass(this.grid.domNode,"dojoxGridColumnResizing");var m=this.moveable=new dojo.dnd.Moveable(this.moverDiv);var drag=this.colResizeSetup(e,true);m.onMove=dojo.hitch(this,"doResizeColumn",drag);dojo.connect(m,"onMoveStop",dojo.hitch(this,function(){this.endResizeColumn(drag);
if(drag.node.releaseCapture)drag.node.releaseCapture();this.moveable.destroy();delete this.moveable;this.moveable=null;dojo.removeClass(this.grid.domNode,"dojoxGridColumnResizing")}));if(e.cellNode.setCapture)e.cellNode.setCapture();m.onMouseDown(e)},doResizeColumn:function(inDrag,mover,leftTop){var changeX=leftTop.l;var data={deltaX:changeX,w:inDrag.w+(dojo._isBodyLtr()?changeX:-changeX),vw:inDrag.vw+changeX,tw:inDrag.tw+changeX};this.dragRecord={inDrag:inDrag,mover:mover,leftTop:leftTop};if(data.w>=
this.minColWidth)if(!mover)this.doResizeNow(inDrag,data);else dojo.style(this.lineDiv,"left",this.lineDiv._origLeft+data.deltaX+"px")},endResizeColumn:function(inDrag){if(this.dragRecord){var leftTop=this.dragRecord.leftTop;var changeX=dojo._isBodyLtr()?leftTop.l:-leftTop.l;changeX+=Math.max(inDrag.w+changeX,this.minColWidth)-(inDrag.w+changeX);if(dojo.isWebKit&&inDrag.spanners.length)changeX+=dojo._getPadBorderExtents(inDrag.spanners[0].node).w;var data={deltaX:changeX,w:inDrag.w+changeX,vw:inDrag.vw+
changeX,tw:inDrag.tw+changeX};this.doResizeNow(inDrag,data);delete this.dragRecord}dojo.destroy(this.lineDiv);dojo.destroy(this.moverDiv);dojo.destroy(this.moverDiv);delete this.moverDiv;this._skipBogusClicks=true;inDrag.view.update();this._skipBogusClicks=false;this.grid.onResizeColumn(inDrag.index)},doResizeNow:function(inDrag,data){inDrag.view.convertColPctToFixed();if(inDrag.view.flexCells&&!inDrag.view.testFlexCells()){var t=findTable(inDrag.node);if(t)t.style.width=""}var i,s,sw,f,fl;for(i=
0;s=inDrag.spanners[i];i++){sw=s.width+data.deltaX;s.node.style.width=sw+"px";inDrag.view.setColWidth(s.index,sw)}if(dojo._isBodyLtr()||!dojo.isIE)for(i=0;f=inDrag.followers[i];i++){fl=f.left+data.deltaX;f.node.style.left=fl+"px"}inDrag.node.style.width=data.w+"px";inDrag.view.setColWidth(inDrag.index,data.w);inDrag.view.headerNode.style.width=data.vw+"px";inDrag.view.setColumnsWidth(data.tw);if(!dojo._isBodyLtr())inDrag.view.headerNode.scrollLeft=inDrag.scrollLeft+data.deltaX}});dg._TableMap=dojo.extend(function(rows){this.mapRows(rows)},
{map:null,mapRows:function(inRows){var rowCount=inRows.length;if(!rowCount)return;this.map=[];var row;for(var k=0;row=inRows[k];k++)this.map[k]=[];for(var j=0;row=inRows[j];j++)for(var i=0,x=0,cell,colSpan,rowSpan;cell=row[i];i++){while(this.map[j][x])x++;this.map[j][x]={c:i,r:j};rowSpan=cell.rowSpan||1;colSpan=cell.colSpan||1;for(var y=0;y<rowSpan;y++)for(var s=0;s<colSpan;s++)this.map[j+y][x+s]=this.map[j][x];x+=colSpan}},dumpMap:function(){for(var j=0,row,h="";row=this.map[j];j++,h="")for(var i=
0,cell;cell=row[i];i++)h+=cell.r+","+cell.c+"   "},getMapCoords:function(inRow,inCol){for(var j=0,row;row=this.map[j];j++)for(var i=0,cell;cell=row[i];i++)if(cell.c==inCol&&cell.r==inRow)return{j:j,i:i};return{j:-1,i:-1}},getNode:function(inTable,inRow,inCol){var row=inTable&&inTable.rows[inRow];return row&&row.cells[inCol]},_findOverlappingNodes:function(inTable,inRow,inCol){var nodes=[];var m=this.getMapCoords(inRow,inCol);for(var j=0,row;row=this.map[j];j++){if(j==m.j)continue;var rw=row[m.i];
var n=rw?this.getNode(inTable,rw.r,rw.c):null;if(n)nodes.push(n)}return nodes},findOverlappingNodes:function(inNode){return this._findOverlappingNodes(findTable(inNode),getTrIndex(inNode.parentNode),getTdIndex(inNode))}})})()}if(!dojo._hasResource["dojo.dnd.Container"]){dojo._hasResource["dojo.dnd.Container"]=true;dojo.provide("dojo.dnd.Container");dojo.declare("dojo.dnd.Container",null,{skipForm:false,constructor:function(node,params){this.node=dojo.byId(node);if(!params)params={};this.creator=params.creator||
null;this.skipForm=params.skipForm;this.parent=params.dropParent&&dojo.byId(params.dropParent);this.map={};this.current=null;this.containerState="";dojo.addClass(this.node,"dojoDndContainer");if(!(params&&params._skipStartup))this.startup();this.events=[dojo.connect(this.node,"onmouseover",this,"onMouseOver"),dojo.connect(this.node,"onmouseout",this,"onMouseOut"),dojo.connect(this.node,"ondragstart",this,"onSelectStart"),dojo.connect(this.node,"onselectstart",this,"onSelectStart")]},creator:function(){},
getItem:function(key){return this.map[key]},setItem:function(key,data){this.map[key]=data},delItem:function(key){delete this.map[key]},forInItems:function(f,o){o=o||dojo.global;var m=this.map,e=dojo.dnd._empty;for(var i in m){if(i in e)continue;f.call(o,m[i],i,this)}return o},clearItems:function(){this.map={}},getAllNodes:function(){return dojo.query("> .dojoDndItem",this.parent)},sync:function(){var map={};this.getAllNodes().forEach(function(node){if(node.id){var item=this.getItem(node.id);if(item){map[node.id]=
item;return}}else node.id=dojo.dnd.getUniqueId();var type=node.getAttribute("dndType"),data=node.getAttribute("dndData");map[node.id]={data:data||node.innerHTML,type:type?type.split(/\s*,\s*/):["text"]}},this);this.map=map;return this},insertNodes:function(data,before,anchor){if(!this.parent.firstChild)anchor=null;else if(before){if(!anchor)anchor=this.parent.firstChild}else if(anchor)anchor=anchor.nextSibling;if(anchor)for(var i=0;i<data.length;++i){var t=this._normalizedCreator(data[i]);this.setItem(t.node.id,
{data:t.data,type:t.type});this.parent.insertBefore(t.node,anchor)}else for(var i=0;i<data.length;++i){var t=this._normalizedCreator(data[i]);this.setItem(t.node.id,{data:t.data,type:t.type});this.parent.appendChild(t.node)}return this},destroy:function(){dojo.forEach(this.events,dojo.disconnect);this.clearItems();this.node=this.parent=this.current=null},markupFactory:function(params,node){params._skipStartup=true;return new dojo.dnd.Container(node,params)},startup:function(){if(!this.parent){this.parent=
this.node;if(this.parent.tagName.toLowerCase()=="table"){var c=this.parent.getElementsByTagName("tbody");if(c&&c.length)this.parent=c[0]}}this.defaultCreator=dojo.dnd._defaultCreator(this.parent);this.sync()},onMouseOver:function(e){var n=e.relatedTarget;while(n){if(n==this.node)break;try{n=n.parentNode}catch(x){n=null}}if(!n){this._changeState("Container","Over");this.onOverEvent()}n=this._getChildByEvent(e);if(this.current==n)return;if(this.current)this._removeItemClass(this.current,"Over");if(n)this._addItemClass(n,
"Over");this.current=n},onMouseOut:function(e){for(var n=e.relatedTarget;n;){if(n==this.node)return;try{n=n.parentNode}catch(x){n=null}}if(this.current){this._removeItemClass(this.current,"Over");this.current=null}this._changeState("Container","");this.onOutEvent()},onSelectStart:function(e){if(!this.skipForm||!dojo.dnd.isFormElement(e))dojo.stopEvent(e)},onOverEvent:function(){},onOutEvent:function(){},_changeState:function(type,newState){var prefix="dojoDnd"+type;var state=type.toLowerCase()+"State";
dojo.replaceClass(this.node,prefix+newState,prefix+this[state]);this[state]=newState},_addItemClass:function(node,type){dojo.addClass(node,"dojoDndItem"+type)},_removeItemClass:function(node,type){dojo.removeClass(node,"dojoDndItem"+type)},_getChildByEvent:function(e){var node=e.target;if(node)for(var parent=node.parentNode;parent;node=parent,parent=node.parentNode)if(parent==this.parent&&dojo.hasClass(node,"dojoDndItem"))return node;return null},_normalizedCreator:function(item,hint){var t=(this.creator||
this.defaultCreator).call(this,item,hint);if(!dojo.isArray(t.type))t.type=["text"];if(!t.node.id)t.node.id=dojo.dnd.getUniqueId();dojo.addClass(t.node,"dojoDndItem");return t}});dojo.dnd._createNode=function(tag){if(!tag)return dojo.dnd._createSpan;return function(text){return dojo.create(tag,{innerHTML:text})}};dojo.dnd._createTrTd=function(text){var tr=dojo.create("tr");dojo.create("td",{innerHTML:text},tr);return tr};dojo.dnd._createSpan=function(text){return dojo.create("span",{innerHTML:text})};
dojo.dnd._defaultCreatorNodes={ul:"li",ol:"li",div:"div",p:"div"};dojo.dnd._defaultCreator=function(node){var tag=node.tagName.toLowerCase();var c=tag=="tbody"||tag=="thead"?dojo.dnd._createTrTd:dojo.dnd._createNode(dojo.dnd._defaultCreatorNodes[tag]);return function(item,hint){var isObj=item&&dojo.isObject(item),data,type,n;if(isObj&&item.tagName&&item.nodeType&&item.getAttribute){data=item.getAttribute("dndData")||item.innerHTML;type=item.getAttribute("dndType");type=type?type.split(/\s*,\s*/):
["text"];n=item}else{data=isObj&&item.data?item.data:item;type=isObj&&item.type?item.type:["text"];n=(hint=="avatar"?dojo.dnd._createSpan:c)(String(data))}if(!n.id)n.id=dojo.dnd.getUniqueId();return{node:n,data:data,type:type}}}}if(!dojo._hasResource["dojo.dnd.Selector"]){dojo._hasResource["dojo.dnd.Selector"]=true;dojo.provide("dojo.dnd.Selector");dojo.declare("dojo.dnd.Selector",dojo.dnd.Container,{constructor:function(node,params){if(!params)params={};this.singular=params.singular;this.autoSync=
params.autoSync;this.selection={};this.anchor=null;this.simpleSelection=false;this.events.push(dojo.connect(this.node,"onmousedown",this,"onMouseDown"),dojo.connect(this.node,"onmouseup",this,"onMouseUp"))},singular:false,getSelectedNodes:function(){var t=new dojo.NodeList;var e=dojo.dnd._empty;for(var i in this.selection){if(i in e)continue;t.push(dojo.byId(i))}return t},selectNone:function(){return this._removeSelection()._removeAnchor()},selectAll:function(){this.forInItems(function(data,id){this._addItemClass(dojo.byId(id),
"Selected");this.selection[id]=1},this);return this._removeAnchor()},deleteSelectedNodes:function(){var e=dojo.dnd._empty;for(var i in this.selection){if(i in e)continue;var n=dojo.byId(i);this.delItem(i);dojo.destroy(n)}this.anchor=null;this.selection={};return this},forInSelectedItems:function(f,o){o=o||dojo.global;var s=this.selection,e=dojo.dnd._empty;for(var i in s){if(i in e)continue;f.call(o,this.getItem(i),i,this)}},sync:function(){dojo.dnd.Selector.superclass.sync.call(this);if(this.anchor)if(!this.getItem(this.anchor.id))this.anchor=
null;var t=[],e=dojo.dnd._empty;for(var i in this.selection){if(i in e)continue;if(!this.getItem(i))t.push(i)}dojo.forEach(t,function(i){delete this.selection[i]},this);return this},insertNodes:function(addSelected,data,before,anchor){var oldCreator=this._normalizedCreator;this._normalizedCreator=function(item,hint){var t=oldCreator.call(this,item,hint);if(addSelected){if(!this.anchor){this.anchor=t.node;this._removeItemClass(t.node,"Selected");this._addItemClass(this.anchor,"Anchor")}else if(this.anchor!=
t.node){this._removeItemClass(t.node,"Anchor");this._addItemClass(t.node,"Selected")}this.selection[t.node.id]=1}else{this._removeItemClass(t.node,"Selected");this._removeItemClass(t.node,"Anchor")}return t};dojo.dnd.Selector.superclass.insertNodes.call(this,data,before,anchor);this._normalizedCreator=oldCreator;return this},destroy:function(){dojo.dnd.Selector.superclass.destroy.call(this);this.selection=this.anchor=null},markupFactory:function(params,node){params._skipStartup=true;return new dojo.dnd.Selector(node,
params)},onMouseDown:function(e){if(this.autoSync)this.sync();if(!this.current)return;if(!this.singular&&!dojo.isCopyKey(e)&&!e.shiftKey&&this.current.id in this.selection){this.simpleSelection=true;if(e.button===dojo.mouseButtons.LEFT)dojo.stopEvent(e);return}if(!this.singular&&e.shiftKey){if(!dojo.isCopyKey(e))this._removeSelection();var c=this.getAllNodes();if(c.length){if(!this.anchor){this.anchor=c[0];this._addItemClass(this.anchor,"Anchor")}this.selection[this.anchor.id]=1;if(this.anchor!=this.current){var i=
0;for(;i<c.length;++i){var node=c[i];if(node==this.anchor||node==this.current)break}for(++i;i<c.length;++i){var node=c[i];if(node==this.anchor||node==this.current)break;this._addItemClass(node,"Selected");this.selection[node.id]=1}this._addItemClass(this.current,"Selected");this.selection[this.current.id]=1}}}else if(this.singular)if(this.anchor==this.current){if(dojo.isCopyKey(e))this.selectNone()}else{this.selectNone();this.anchor=this.current;this._addItemClass(this.anchor,"Anchor");this.selection[this.current.id]=
1}else if(dojo.isCopyKey(e))if(this.anchor==this.current){delete this.selection[this.anchor.id];this._removeAnchor()}else if(this.current.id in this.selection){this._removeItemClass(this.current,"Selected");delete this.selection[this.current.id]}else{if(this.anchor){this._removeItemClass(this.anchor,"Anchor");this._addItemClass(this.anchor,"Selected")}this.anchor=this.current;this._addItemClass(this.current,"Anchor");this.selection[this.current.id]=1}else if(!(this.current.id in this.selection)){this.selectNone();
this.anchor=this.current;this._addItemClass(this.current,"Anchor");this.selection[this.current.id]=1}dojo.stopEvent(e)},onMouseUp:function(e){if(!this.simpleSelection)return;this.simpleSelection=false;this.selectNone();if(this.current){this.anchor=this.current;this._addItemClass(this.anchor,"Anchor");this.selection[this.current.id]=1}},onMouseMove:function(e){this.simpleSelection=false},onOverEvent:function(){this.onmousemoveEvent=dojo.connect(this.node,"onmousemove",this,"onMouseMove")},onOutEvent:function(){dojo.disconnect(this.onmousemoveEvent);
delete this.onmousemoveEvent},_removeSelection:function(){var e=dojo.dnd._empty;for(var i in this.selection){if(i in e)continue;var node=dojo.byId(i);if(node)this._removeItemClass(node,"Selected")}this.selection={};return this},_removeAnchor:function(){if(this.anchor){this._removeItemClass(this.anchor,"Anchor");this.anchor=null}return this}})}if(!dojo._hasResource["dojo.dnd.Avatar"]){dojo._hasResource["dojo.dnd.Avatar"]=true;dojo.provide("dojo.dnd.Avatar");dojo.declare("dojo.dnd.Avatar",null,{constructor:function(manager){this.manager=
manager;this.construct()},construct:function(){this.isA11y=dojo.hasClass(dojo.body(),"dijit_a11y");var a=dojo.create("table",{"class":"dojoDndAvatar",style:{position:"absolute",zIndex:"1999",margin:"0px"}}),source=this.manager.source,node,b=dojo.create("tbody",null,a),tr=dojo.create("tr",null,b),td=dojo.create("td",null,tr),icon=this.isA11y?dojo.create("span",{id:"a11yIcon",innerHTML:this.manager.copy?"+":"<"},td):null,span=dojo.create("span",{innerHTML:source.generateText?this._generateText():""},
td),k=Math.min(5,this.manager.nodes.length),i=0;dojo.attr(tr,{"class":"dojoDndAvatarHeader",style:{opacity:.9}});for(;i<k;++i){if(source.creator)node=source._normalizedCreator(source.getItem(this.manager.nodes[i].id).data,"avatar").node;else{node=this.manager.nodes[i].cloneNode(true);if(node.tagName.toLowerCase()=="tr"){var table=dojo.create("table"),tbody=dojo.create("tbody",null,table);tbody.appendChild(node);node=table}}node.id="";tr=dojo.create("tr",null,b);td=dojo.create("td",null,tr);td.appendChild(node);
dojo.attr(tr,{"class":"dojoDndAvatarItem",style:{opacity:(9-i)/10}})}this.node=a},destroy:function(){dojo.destroy(this.node);this.node=false},update:function(){dojo[(this.manager.canDropFlag?"add":"remove")+"Class"](this.node,"dojoDndAvatarCanDrop");if(this.isA11y){var icon=dojo.byId("a11yIcon");var text="+";if(this.manager.canDropFlag&&!this.manager.copy)text="< ";else if(!this.manager.canDropFlag&&!this.manager.copy)text="o";else if(!this.manager.canDropFlag)text="x";icon.innerHTML=text}dojo.query("tr.dojoDndAvatarHeader td span"+
(this.isA11y?" span":""),this.node).forEach(function(node){node.innerHTML=this._generateText()},this)},_generateText:function(){return this.manager.nodes.length.toString()}})}if(!dojo._hasResource["dojo.dnd.Manager"]){dojo._hasResource["dojo.dnd.Manager"]=true;dojo.provide("dojo.dnd.Manager");dojo.declare("dojo.dnd.Manager",null,{constructor:function(){this.avatar=null;this.source=null;this.nodes=[];this.copy=true;this.target=null;this.canDropFlag=false;this.events=[]},OFFSET_X:16,OFFSET_Y:16,overSource:function(source){if(this.avatar){this.target=
source&&source.targetState!="Disabled"?source:null;this.canDropFlag=Boolean(this.target);this.avatar.update()}dojo.publish("/dnd/source/over",[source])},outSource:function(source){if(this.avatar){if(this.target==source){this.target=null;this.canDropFlag=false;this.avatar.update();dojo.publish("/dnd/source/over",[null])}}else dojo.publish("/dnd/source/over",[null])},startDrag:function(source,nodes,copy){this.source=source;this.nodes=nodes;this.copy=Boolean(copy);this.avatar=this.makeAvatar();dojo.body().appendChild(this.avatar.node);
dojo.publish("/dnd/start",[source,nodes,this.copy]);this.events=[dojo.connect(dojo.doc,"onmousemove",this,"onMouseMove"),dojo.connect(dojo.doc,"onmouseup",this,"onMouseUp"),dojo.connect(dojo.doc,"onkeydown",this,"onKeyDown"),dojo.connect(dojo.doc,"onkeyup",this,"onKeyUp"),dojo.connect(dojo.doc,"ondragstart",dojo.stopEvent),dojo.connect(dojo.body(),"onselectstart",dojo.stopEvent)];var c="dojoDnd"+(copy?"Copy":"Move");dojo.addClass(dojo.body(),c)},canDrop:function(flag){var canDropFlag=Boolean(this.target&&
flag);if(this.canDropFlag!=canDropFlag){this.canDropFlag=canDropFlag;this.avatar.update()}},stopDrag:function(){dojo.removeClass(dojo.body(),["dojoDndCopy","dojoDndMove"]);dojo.forEach(this.events,dojo.disconnect);this.events=[];this.avatar.destroy();this.avatar=null;this.source=this.target=null;this.nodes=[]},makeAvatar:function(){return new dojo.dnd.Avatar(this)},updateAvatar:function(){this.avatar.update()},onMouseMove:function(e){var a=this.avatar;if(a){dojo.dnd.autoScrollNodes(e);var s=a.node.style;
s.left=e.pageX+this.OFFSET_X+"px";s.top=e.pageY+this.OFFSET_Y+"px";var copy=Boolean(this.source.copyState(dojo.isCopyKey(e)));if(this.copy!=copy)this._setCopyStatus(copy)}},onMouseUp:function(e){if(this.avatar){if(this.target&&this.canDropFlag){var copy=Boolean(this.source.copyState(dojo.isCopyKey(e))),params=[this.source,this.nodes,copy,this.target,e];dojo.publish("/dnd/drop/before",params);dojo.publish("/dnd/drop",params)}else dojo.publish("/dnd/cancel");this.stopDrag()}},onKeyDown:function(e){if(this.avatar)switch(e.keyCode){case dojo.keys.CTRL:var copy=
Boolean(this.source.copyState(true));if(this.copy!=copy)this._setCopyStatus(copy);break;case dojo.keys.ESCAPE:dojo.publish("/dnd/cancel");this.stopDrag();break}},onKeyUp:function(e){if(this.avatar&&e.keyCode==dojo.keys.CTRL){var copy=Boolean(this.source.copyState(false));if(this.copy!=copy)this._setCopyStatus(copy)}},_setCopyStatus:function(copy){this.copy=copy;this.source._markDndStatus(this.copy);this.updateAvatar();dojo.replaceClass(dojo.body(),"dojoDnd"+(this.copy?"Copy":"Move"),"dojoDnd"+(this.copy?
"Move":"Copy"))}});dojo.dnd._manager=null;dojo.dnd.manager=function(){if(!dojo.dnd._manager)dojo.dnd._manager=new dojo.dnd.Manager;return dojo.dnd._manager}}if(!dojo._hasResource["dojo.dnd.Source"]){dojo._hasResource["dojo.dnd.Source"]=true;dojo.provide("dojo.dnd.Source");dojo.declare("dojo.dnd.Source",dojo.dnd.Selector,{isSource:true,horizontal:false,copyOnly:false,selfCopy:false,selfAccept:true,skipForm:false,withHandles:false,autoSync:false,delay:0,accept:["text"],generateText:true,constructor:function(node,
params){dojo.mixin(this,dojo.mixin({},params));var type=this.accept;if(type.length){this.accept={};for(var i=0;i<type.length;++i)this.accept[type[i]]=1}this.isDragging=false;this.mouseDown=false;this.targetAnchor=null;this.targetBox=null;this.before=true;this._lastX=0;this._lastY=0;this.sourceState="";if(this.isSource)dojo.addClass(this.node,"dojoDndSource");this.targetState="";if(this.accept)dojo.addClass(this.node,"dojoDndTarget");if(this.horizontal)dojo.addClass(this.node,"dojoDndHorizontal");
this.topics=[dojo.subscribe("/dnd/source/over",this,"onDndSourceOver"),dojo.subscribe("/dnd/start",this,"onDndStart"),dojo.subscribe("/dnd/drop",this,"onDndDrop"),dojo.subscribe("/dnd/cancel",this,"onDndCancel")]},checkAcceptance:function(source,nodes){if(this==source)return!this.copyOnly||this.selfAccept;for(var i=0;i<nodes.length;++i){var type=source.getItem(nodes[i].id).type;var flag=false;for(var j=0;j<type.length;++j)if(type[j]in this.accept){flag=true;break}if(!flag)return false}return true},
copyState:function(keyPressed,self){if(keyPressed)return true;if(arguments.length<2)self=this==dojo.dnd.manager().target;if(self){if(this.copyOnly)return this.selfCopy}else return this.copyOnly;return false},destroy:function(){dojo.dnd.Source.superclass.destroy.call(this);dojo.forEach(this.topics,dojo.unsubscribe);this.targetAnchor=null},markupFactory:function(params,node){params._skipStartup=true;return new dojo.dnd.Source(node,params)},onMouseMove:function(e){if(this.isDragging&&this.targetState==
"Disabled")return;dojo.dnd.Source.superclass.onMouseMove.call(this,e);var m=dojo.dnd.manager();if(!this.isDragging)if(this.mouseDown&&this.isSource&&(Math.abs(e.pageX-this._lastX)>this.delay||Math.abs(e.pageY-this._lastY)>this.delay)){var nodes=this.getSelectedNodes();if(nodes.length)m.startDrag(this,nodes,this.copyState(dojo.isCopyKey(e),true))}if(this.isDragging){var before=false;if(this.current){if(!this.targetBox||this.targetAnchor!=this.current)this.targetBox=dojo.position(this.current,true);
if(this.horizontal)before=e.pageX-this.targetBox.x<this.targetBox.w/2;else before=e.pageY-this.targetBox.y<this.targetBox.h/2}if(this.current!=this.targetAnchor||before!=this.before){this._markTargetAnchor(before);m.canDrop(!this.current||m.source!=this||!(this.current.id in this.selection))}}},onMouseDown:function(e){if(!this.mouseDown&&this._legalMouseDown(e)&&(!this.skipForm||!dojo.dnd.isFormElement(e))){this.mouseDown=true;this._lastX=e.pageX;this._lastY=e.pageY;dojo.dnd.Source.superclass.onMouseDown.call(this,
e)}},onMouseUp:function(e){if(this.mouseDown){this.mouseDown=false;dojo.dnd.Source.superclass.onMouseUp.call(this,e)}},onDndSourceOver:function(source){if(this!=source){this.mouseDown=false;if(this.targetAnchor)this._unmarkTargetAnchor()}else if(this.isDragging){var m=dojo.dnd.manager();m.canDrop(this.targetState!="Disabled"&&(!this.current||m.source!=this||!(this.current.id in this.selection)))}},onDndStart:function(source,nodes,copy){if(this.autoSync)this.sync();if(this.isSource)this._changeState("Source",
this==source?copy?"Copied":"Moved":"");var accepted=this.accept&&this.checkAcceptance(source,nodes);this._changeState("Target",accepted?"":"Disabled");if(this==source)dojo.dnd.manager().overSource(this);this.isDragging=true},onDndDrop:function(source,nodes,copy,target){if(this==target)this.onDrop(source,nodes,copy);this.onDndCancel()},onDndCancel:function(){if(this.targetAnchor){this._unmarkTargetAnchor();this.targetAnchor=null}this.before=true;this.isDragging=false;this.mouseDown=false;this._changeState("Source",
"");this._changeState("Target","")},onDrop:function(source,nodes,copy){if(this!=source)this.onDropExternal(source,nodes,copy);else this.onDropInternal(nodes,copy)},onDropExternal:function(source,nodes,copy){var oldCreator=this._normalizedCreator;if(this.creator)this._normalizedCreator=function(node,hint){return oldCreator.call(this,source.getItem(node.id).data,hint)};else if(copy)this._normalizedCreator=function(node,hint){var t=source.getItem(node.id);var n=node.cloneNode(true);n.id=dojo.dnd.getUniqueId();
return{node:n,data:t.data,type:t.type}};else this._normalizedCreator=function(node,hint){var t=source.getItem(node.id);source.delItem(node.id);return{node:node,data:t.data,type:t.type}};this.selectNone();if(!copy&&!this.creator)source.selectNone();this.insertNodes(true,nodes,this.before,this.current);if(!copy&&this.creator)source.deleteSelectedNodes();this._normalizedCreator=oldCreator},onDropInternal:function(nodes,copy){var oldCreator=this._normalizedCreator;if(this.current&&this.current.id in this.selection)return;
if(copy)if(this.creator)this._normalizedCreator=function(node,hint){return oldCreator.call(this,this.getItem(node.id).data,hint)};else this._normalizedCreator=function(node,hint){var t=this.getItem(node.id);var n=node.cloneNode(true);n.id=dojo.dnd.getUniqueId();return{node:n,data:t.data,type:t.type}};else{if(!this.current)return;this._normalizedCreator=function(node,hint){var t=this.getItem(node.id);return{node:node,data:t.data,type:t.type}}}this._removeSelection();this.insertNodes(true,nodes,this.before,
this.current);this._normalizedCreator=oldCreator},onDraggingOver:function(){},onDraggingOut:function(){},onOverEvent:function(){dojo.dnd.Source.superclass.onOverEvent.call(this);dojo.dnd.manager().overSource(this);if(this.isDragging&&this.targetState!="Disabled")this.onDraggingOver()},onOutEvent:function(){dojo.dnd.Source.superclass.onOutEvent.call(this);dojo.dnd.manager().outSource(this);if(this.isDragging&&this.targetState!="Disabled")this.onDraggingOut()},_markTargetAnchor:function(before){if(this.current==
this.targetAnchor&&this.before==before)return;if(this.targetAnchor)this._removeItemClass(this.targetAnchor,this.before?"Before":"After");this.targetAnchor=this.current;this.targetBox=null;this.before=before;if(this.targetAnchor)this._addItemClass(this.targetAnchor,this.before?"Before":"After")},_unmarkTargetAnchor:function(){if(!this.targetAnchor)return;this._removeItemClass(this.targetAnchor,this.before?"Before":"After");this.targetAnchor=null;this.targetBox=null;this.before=true},_markDndStatus:function(copy){this._changeState("Source",
copy?"Copied":"Moved")},_legalMouseDown:function(e){if(!dojo.mouseButtons.isLeft(e))return false;if(!this.withHandles)return true;for(var node=e.target;node&&node!==this.node;node=node.parentNode){if(dojo.hasClass(node,"dojoDndHandle"))return true;if(dojo.hasClass(node,"dojoDndItem")||dojo.hasClass(node,"dojoDndIgnore"))break}return false}});dojo.declare("dojo.dnd.Target",dojo.dnd.Source,{constructor:function(node,params){this.isSource=false;dojo.removeClass(this.node,"dojoDndSource")},markupFactory:function(params,
node){params._skipStartup=true;return new dojo.dnd.Target(node,params)}});dojo.declare("dojo.dnd.AutoSource",dojo.dnd.Source,{constructor:function(node,params){this.autoSync=true},markupFactory:function(params,node){params._skipStartup=true;return new dojo.dnd.AutoSource(node,params)}})}if(!dojo._hasResource["dojox.grid._View"]){dojo._hasResource["dojox.grid._View"]=true;dojo.provide("dojox.grid._View");(function(){var getStyleText=function(inNode,inStyleText){return inNode.style.cssText==undefined?
inNode.getAttribute("style"):inNode.style.cssText};dojo.declare("dojox.grid._View",[dijit._Widget,dijit._Templated],{defaultWidth:"18em",viewWidth:"",templateString:'<div class="dojoxGridView" role="presentation">\r\n\t<div class="dojoxGridHeader" dojoAttachPoint="headerNode" role="presentation">\r\n\t\t<div dojoAttachPoint="headerNodeContainer" style="width:9000em" role="presentation">\r\n\t\t\t<div dojoAttachPoint="headerContentNode" role="row"></div>\r\n\t\t</div>\r\n\t</div>\r\n\t<input type="checkbox" class="dojoxGridHiddenFocus" dojoAttachPoint="hiddenFocusNode" role="presentation" />\r\n\t<input type="checkbox" class="dojoxGridHiddenFocus" role="presentation" />\r\n\t<div class="dojoxGridScrollbox" dojoAttachPoint="scrollboxNode" role="presentation">\r\n\t\t<div class="dojoxGridContent" dojoAttachPoint="contentNode" hidefocus="hidefocus" role="presentation"></div>\r\n\t</div>\r\n</div>\r\n',
themeable:false,classTag:"dojoxGrid",marginBottom:0,rowPad:2,_togglingColumn:-1,_headerBuilderClass:dojox.grid._HeaderBuilder,_contentBuilderClass:dojox.grid._ContentBuilder,postMixInProperties:function(){this.rowNodes={}},postCreate:function(){this.connect(this.scrollboxNode,"onscroll","doscroll");dojox.grid.util.funnelEvents(this.contentNode,this,"doContentEvent",["mouseover","mouseout","click","dblclick","contextmenu","mousedown"]);dojox.grid.util.funnelEvents(this.headerNode,this,"doHeaderEvent",
["dblclick","mouseover","mouseout","mousemove","mousedown","click","contextmenu"]);this.content=new this._contentBuilderClass(this);this.header=new this._headerBuilderClass(this);if(!dojo._isBodyLtr())this.headerNodeContainer.style.width=""},destroy:function(){dojo.destroy(this.headerNode);delete this.headerNode;for(var i in this.rowNodes)dojo.destroy(this.rowNodes[i]);this.rowNodes={};if(this.source)this.source.destroy();this.inherited(arguments)},focus:function(){if(dojo.isIE||dojo.isWebKit||dojo.isOpera)this.hiddenFocusNode.focus();
else this.scrollboxNode.focus()},setStructure:function(inStructure){var vs=this.structure=inStructure;if(vs.width&&!isNaN(vs.width))this.viewWidth=vs.width+"em";else this.viewWidth=vs.width||(vs.noscroll?"auto":this.viewWidth);this._onBeforeRow=vs.onBeforeRow||function(){};this._onAfterRow=vs.onAfterRow||function(){};this.noscroll=vs.noscroll;if(this.noscroll)this.scrollboxNode.style.overflow="hidden";this.simpleStructure=Boolean(vs.cells.length==1);this.testFlexCells();this.updateStructure()},_cleanupRowWidgets:function(inRowNode){if(inRowNode)dojo.forEach(dojo.query("[widgetId]",
inRowNode).map(dijit.byNode),function(w){if(w._destroyOnRemove){w.destroy();delete w}else if(w.domNode&&w.domNode.parentNode)w.domNode.parentNode.removeChild(w.domNode)})},onBeforeRow:function(inRowIndex,cells){this._onBeforeRow(inRowIndex,cells);if(inRowIndex>=0)this._cleanupRowWidgets(this.getRowNode(inRowIndex))},onAfterRow:function(inRowIndex,cells,inRowNode){this._onAfterRow(inRowIndex,cells,inRowNode);var g=this.grid;dojo.forEach(dojo.query(".dojoxGridStubNode",inRowNode),function(n){if(n&&
n.parentNode){var lw=n.getAttribute("linkWidget");var cellIdx=window.parseInt(dojo.attr(n,"cellIdx"),10);var cellDef=g.getCell(cellIdx);var w=dijit.byId(lw);if(w){n.parentNode.replaceChild(w.domNode,n);if(!w._started)w.startup()}else n.innerHTML=""}},this)},testFlexCells:function(){this.flexCells=false;for(var j=0,row;row=this.structure.cells[j];j++)for(var i=0,cell;cell=row[i];i++){cell.view=this;this.flexCells=this.flexCells||cell.isFlex()}return this.flexCells},updateStructure:function(){this.header.update();
this.content.update()},getScrollbarWidth:function(){var hasScrollSpace=this.hasVScrollbar();var overflow=dojo.style(this.scrollboxNode,"overflow");if(this.noscroll||!overflow||overflow=="hidden")hasScrollSpace=false;else if(overflow=="scroll")hasScrollSpace=true;return hasScrollSpace?dojox.html.metrics.getScrollbar().w:0},getColumnsWidth:function(){var h=this.headerContentNode;return h&&h.firstChild?h.firstChild.offsetWidth:0},setColumnsWidth:function(width){this.headerContentNode.firstChild.style.width=
width+"px";if(this.viewWidth)this.viewWidth=width+"px"},getWidth:function(){return this.viewWidth||this.getColumnsWidth()+this.getScrollbarWidth()+"px"},getContentWidth:function(){return Math.max(0,dojo._getContentBox(this.domNode).w-this.getScrollbarWidth())+"px"},render:function(){this.scrollboxNode.style.height="";this.renderHeader();if(this._togglingColumn>=0){this.setColumnsWidth(this.getColumnsWidth()-this._togglingColumn);this._togglingColumn=-1}var cells=this.grid.layout.cells;var getSibling=
dojo.hitch(this,function(node,before){!dojo._isBodyLtr()&&(before=!before);var inc=before?-1:1;var idx=this.header.getCellNodeIndex(node)+inc;var cell=cells[idx];while(cell&&cell.getHeaderNode()&&cell.getHeaderNode().style.display=="none"){idx+=inc;cell=cells[idx]}if(cell)return cell.getHeaderNode();return null});if(this.grid.columnReordering&&this.simpleStructure){if(this.source)this.source.destroy();var bottomMarkerId="dojoxGrid_bottomMarker";var topMarkerId="dojoxGrid_topMarker";if(this.bottomMarker)dojo.destroy(this.bottomMarker);
this.bottomMarker=dojo.byId(bottomMarkerId);if(this.topMarker)dojo.destroy(this.topMarker);this.topMarker=dojo.byId(topMarkerId);if(!this.bottomMarker){this.bottomMarker=dojo.create("div",{"id":bottomMarkerId,"class":"dojoxGridColPlaceBottom"},dojo.body());this._hide(this.bottomMarker);this.topMarker=dojo.create("div",{"id":topMarkerId,"class":"dojoxGridColPlaceTop"},dojo.body());this._hide(this.topMarker)}this.arrowDim=dojo.contentBox(this.bottomMarker);var headerHeight=dojo.contentBox(this.headerContentNode.firstChild.rows[0]).h;
this.source=new dojo.dnd.Source(this.headerContentNode.firstChild.rows[0],{horizontal:true,accept:["gridColumn_"+this.grid.id],viewIndex:this.index,generateText:false,onMouseDown:dojo.hitch(this,function(e){this.header.decorateEvent(e);if((this.header.overRightResizeArea(e)||this.header.overLeftResizeArea(e))&&this.header.canResize(e)&&!this.header.moveable)this.header.beginColumnResize(e);else{if(this.grid.headerMenu)this.grid.headerMenu.onCancel(true);if(e.button===(dojo.isIE?1:0))dojo.dnd.Source.prototype.onMouseDown.call(this.source,
e)}}),onMouseOver:dojo.hitch(this,function(e){var src=this.source;if(src._getChildByEvent(e))dojo.dnd.Source.prototype.onMouseOver.apply(src,arguments)}),_markTargetAnchor:dojo.hitch(this,function(before){var src=this.source;if(src.current==src.targetAnchor&&src.before==before)return;if(src.targetAnchor&&getSibling(src.targetAnchor,src.before))src._removeItemClass(getSibling(src.targetAnchor,src.before),src.before?"After":"Before");dojo.dnd.Source.prototype._markTargetAnchor.call(src,before);var target=
before?src.targetAnchor:getSibling(src.targetAnchor,src.before);var endAdd=0;if(!target){target=src.targetAnchor;endAdd=dojo.contentBox(target).w+this.arrowDim.w/2+2}var pos=(dojo.position||dojo._abs)(target,true);var left=Math.floor(pos.x-this.arrowDim.w/2+endAdd);dojo.style(this.bottomMarker,"visibility","visible");dojo.style(this.topMarker,"visibility","visible");dojo.style(this.bottomMarker,{"left":left+"px","top":headerHeight+pos.y+"px"});dojo.style(this.topMarker,{"left":left+"px","top":pos.y-
this.arrowDim.h+"px"});if(src.targetAnchor&&getSibling(src.targetAnchor,src.before))src._addItemClass(getSibling(src.targetAnchor,src.before),src.before?"After":"Before")}),_unmarkTargetAnchor:dojo.hitch(this,function(){var src=this.source;if(!src.targetAnchor)return;if(src.targetAnchor&&getSibling(src.targetAnchor,src.before))src._removeItemClass(getSibling(src.targetAnchor,src.before),src.before?"After":"Before");this._hide(this.bottomMarker);this._hide(this.topMarker);dojo.dnd.Source.prototype._unmarkTargetAnchor.call(src)}),
destroy:dojo.hitch(this,function(){dojo.disconnect(this._source_conn);dojo.unsubscribe(this._source_sub);dojo.dnd.Source.prototype.destroy.call(this.source);if(this.bottomMarker){dojo.destroy(this.bottomMarker);delete this.bottomMarker}if(this.topMarker){dojo.destroy(this.topMarker);delete this.topMarker}}),onDndCancel:dojo.hitch(this,function(){dojo.dnd.Source.prototype.onDndCancel.call(this.source);this._hide(this.bottomMarker);this._hide(this.topMarker)})});this._source_conn=dojo.connect(this.source,
"onDndDrop",this,"_onDndDrop");this._source_sub=dojo.subscribe("/dnd/drop/before",this,"_onDndDropBefore");this.source.startup()}},_hide:function(node){dojo.style(node,{left:"-10000px",top:"-10000px","visibility":"hidden"})},_onDndDropBefore:function(source,nodes,copy){if(dojo.dnd.manager().target!==this.source)return;this.source._targetNode=this.source.targetAnchor;this.source._beforeTarget=this.source.before;var views=this.grid.views.views;var srcView=views[source.viewIndex];var tgtView=views[this.index];
if(tgtView!=srcView){srcView.convertColPctToFixed();tgtView.convertColPctToFixed()}},_onDndDrop:function(source,nodes,copy){if(dojo.dnd.manager().target!==this.source){if(dojo.dnd.manager().source===this.source)this._removingColumn=true;return}this._hide(this.bottomMarker);this._hide(this.topMarker);var getIdx=function(n){return n?dojo.attr(n,"idx"):null};var w=dojo.marginBox(nodes[0]).w;if(source.viewIndex!==this.index){var views=this.grid.views.views;var srcView=views[source.viewIndex];var tgtView=
views[this.index];if(srcView.viewWidth&&srcView.viewWidth!="auto")srcView.setColumnsWidth(srcView.getColumnsWidth()-w);if(tgtView.viewWidth&&tgtView.viewWidth!="auto")tgtView.setColumnsWidth(tgtView.getColumnsWidth())}var stn=this.source._targetNode;var stb=this.source._beforeTarget;!dojo._isBodyLtr()&&(stb=!stb);var layout=this.grid.layout;var idx=this.index;delete this.source._targetNode;delete this.source._beforeTarget;layout.moveColumn(source.viewIndex,idx,getIdx(nodes[0]),getIdx(stn),stb)},renderHeader:function(){this.headerContentNode.innerHTML=
this.header.generateHtml(this._getHeaderContent);if(this.flexCells){this.contentWidth=this.getContentWidth();this.headerContentNode.firstChild.style.width=this.contentWidth}dojox.grid.util.fire(this,"onAfterRow",[-1,this.structure.cells,this.headerContentNode])},_getHeaderContent:function(inCell){var n=inCell.name||inCell.grid.getCellName(inCell);var ret=['<div class="dojoxGridSortNode'];if(inCell.index!=inCell.grid.getSortIndex())ret.push('">');else ret=ret.concat([" ",inCell.grid.sortInfo>0?"dojoxGridSortUp":
"dojoxGridSortDown",'"><div class="dojoxGridArrowButtonChar">',inCell.grid.sortInfo>0?"&#9650;":"&#9660;",'</div><div class="dojoxGridArrowButtonNode" role="presentation"></div>','<div class="dojoxGridColCaption">']);ret=ret.concat([n,"</div></div>"]);return ret.join("")},resize:function(){this.adaptHeight();this.adaptWidth()},hasHScrollbar:function(reset){var hadScroll=this._hasHScroll||false;if(this._hasHScroll==undefined||reset)if(this.noscroll)this._hasHScroll=false;else{var style=dojo.style(this.scrollboxNode,
"overflow");if(style=="hidden")this._hasHScroll=false;else if(style=="scroll")this._hasHScroll=true;else this._hasHScroll=this.scrollboxNode.offsetWidth-this.getScrollbarWidth()<this.contentNode.offsetWidth}if(hadScroll!==this._hasHScroll)this.grid.update();return this._hasHScroll},hasVScrollbar:function(reset){var hadScroll=this._hasVScroll||false;if(this._hasVScroll==undefined||reset)if(this.noscroll)this._hasVScroll=false;else{var style=dojo.style(this.scrollboxNode,"overflow");if(style=="hidden")this._hasVScroll=
false;else if(style=="scroll")this._hasVScroll=true;else this._hasVScroll=this.scrollboxNode.scrollHeight>this.scrollboxNode.clientHeight}if(hadScroll!==this._hasVScroll)this.grid.update();return this._hasVScroll},convertColPctToFixed:function(){var hasPct=false;this.grid.initialWidth="";var cellNodes=dojo.query("th",this.headerContentNode);var fixedWidths=dojo.map(cellNodes,function(c,vIdx){var w=c.style.width;dojo.attr(c,"vIdx",vIdx);if(w&&w.slice(-1)=="%")hasPct=true;else if(w&&w.slice(-2)=="px")return window.parseInt(w,
10);return dojo.contentBox(c).w});if(hasPct){dojo.forEach(this.grid.layout.cells,function(cell,idx){if(cell.view==this){var cellNode=cell.view.getHeaderCellNode(cell.index);if(cellNode&&dojo.hasAttr(cellNode,"vIdx")){var vIdx=window.parseInt(dojo.attr(cellNode,"vIdx"));this.setColWidth(idx,fixedWidths[vIdx]);dojo.removeAttr(cellNode,"vIdx")}}},this);return true}return false},adaptHeight:function(minusScroll){if(!this.grid._autoHeight){var h=this.domNode.style.height&&parseInt(this.domNode.style.height.replace(/px/,
""),10)||this.domNode.clientHeight;var self=this;var checkOtherViewScrollers=function(){var v;for(var i in self.grid.views.views){v=self.grid.views.views[i];if(v!==self&&v.hasHScrollbar())return true}return false};if(minusScroll||this.noscroll&&checkOtherViewScrollers())h-=dojox.html.metrics.getScrollbar().h;dojox.grid.util.setStyleHeightPx(this.scrollboxNode,h)}this.hasVScrollbar(true)},adaptWidth:function(){if(this.flexCells){this.contentWidth=this.getContentWidth();this.headerContentNode.firstChild.style.width=
this.contentWidth}var w=this.scrollboxNode.offsetWidth-this.getScrollbarWidth();if(!this._removingColumn)w=Math.max(w,this.getColumnsWidth())+"px";else{w=Math.min(w,this.getColumnsWidth())+"px";this._removingColumn=false}var cn=this.contentNode;cn.style.width=w;this.hasHScrollbar(true)},setSize:function(w,h){var ds=this.domNode.style;var hs=this.headerNode.style;if(w){ds.width=w;hs.width=w}ds.height=h>=0?h+"px":""},renderRow:function(inRowIndex){var rowNode=this.createRowNode(inRowIndex);this.buildRow(inRowIndex,
rowNode);this.grid.edit.restore(this,inRowIndex);return rowNode},createRowNode:function(inRowIndex){var node=document.createElement("div");node.className=this.classTag+"Row";if(this instanceof dojox.grid._RowSelector)dojo.attr(node,"role","presentation");else{dojo.attr(node,"role","row");if(this.grid.selectionMode!="none")dojo.attr(node,"aria-selected","false")}node[dojox.grid.util.gridViewTag]=this.id;node[dojox.grid.util.rowIndexTag]=inRowIndex;this.rowNodes[inRowIndex]=node;return node},buildRow:function(inRowIndex,
inRowNode){this.buildRowContent(inRowIndex,inRowNode);this.styleRow(inRowIndex,inRowNode)},buildRowContent:function(inRowIndex,inRowNode){inRowNode.innerHTML=this.content.generateHtml(inRowIndex,inRowIndex);if(this.flexCells&&this.contentWidth)inRowNode.firstChild.style.width=this.contentWidth;dojox.grid.util.fire(this,"onAfterRow",[inRowIndex,this.structure.cells,inRowNode])},rowRemoved:function(inRowIndex){if(inRowIndex>=0)this._cleanupRowWidgets(this.getRowNode(inRowIndex));this.grid.edit.save(this,
inRowIndex);delete this.rowNodes[inRowIndex]},getRowNode:function(inRowIndex){return this.rowNodes[inRowIndex]},getCellNode:function(inRowIndex,inCellIndex){var row=this.getRowNode(inRowIndex);if(row)return this.content.getCellNode(row,inCellIndex)},getHeaderCellNode:function(inCellIndex){if(this.headerContentNode)return this.header.getCellNode(this.headerContentNode,inCellIndex)},styleRow:function(inRowIndex,inRowNode){inRowNode._style=getStyleText(inRowNode);this.styleRowNode(inRowIndex,inRowNode)},
styleRowNode:function(inRowIndex,inRowNode){if(inRowNode)this.doStyleRowNode(inRowIndex,inRowNode)},doStyleRowNode:function(inRowIndex,inRowNode){this.grid.styleRowNode(inRowIndex,inRowNode)},updateRow:function(inRowIndex){var rowNode=this.getRowNode(inRowIndex);if(rowNode){rowNode.style.height="";this.buildRow(inRowIndex,rowNode)}return rowNode},updateRowStyles:function(inRowIndex){this.styleRowNode(inRowIndex,this.getRowNode(inRowIndex))},lastTop:0,firstScroll:0,doscroll:function(inEvent){var isLtr=
dojo._isBodyLtr();if(this.firstScroll<2){if(!isLtr&&this.firstScroll==1||isLtr&&this.firstScroll===0){var s=dojo.marginBox(this.headerNodeContainer);if(dojo.isIE)this.headerNodeContainer.style.width=s.w+this.getScrollbarWidth()+"px";else if(dojo.isMoz){this.headerNodeContainer.style.width=s.w-this.getScrollbarWidth()+"px";this.scrollboxNode.scrollLeft=isLtr?this.scrollboxNode.clientWidth-this.scrollboxNode.scrollWidth:this.scrollboxNode.scrollWidth-this.scrollboxNode.clientWidth}}this.firstScroll++}this.headerNode.scrollLeft=
this.scrollboxNode.scrollLeft;var top=this.scrollboxNode.scrollTop;if(top!==this.lastTop)this.grid.scrollTo(top)},setScrollTop:function(inTop){this.lastTop=inTop;this.scrollboxNode.scrollTop=inTop;return this.scrollboxNode.scrollTop},setScrollLeft:function(inLeft){this.scrollboxNode.scrollLeft=inLeft;return this.scrollboxNode.scrollLeft},doContentEvent:function(e){if(this.content.decorateEvent(e))this.grid.onContentEvent(e)},doHeaderEvent:function(e){if(this.header.decorateEvent(e))this.grid.onHeaderEvent(e)},
dispatchContentEvent:function(e){return this.content.dispatchEvent(e)},dispatchHeaderEvent:function(e){return this.header.dispatchEvent(e)},setColWidth:function(inIndex,inWidth){this.grid.setCellWidth(inIndex,inWidth+"px")},update:function(){if(!this.domNode)return;this.content.update();this.grid.update();var left=this.scrollboxNode.scrollLeft;this.scrollboxNode.scrollLeft=left;this.headerNode.scrollLeft=left}});dojo.declare("dojox.grid._GridAvatar",dojo.dnd.Avatar,{construct:function(){var dd=dojo.doc;
var a=dd.createElement("table");a.cellPadding=a.cellSpacing="0";a.className="dojoxGridDndAvatar";a.style.position="absolute";a.style.zIndex=1999;a.style.margin="0px";var b=dd.createElement("tbody");var tr=dd.createElement("tr");var td=dd.createElement("td");var img=dd.createElement("td");tr.className="dojoxGridDndAvatarItem";img.className="dojoxGridDndAvatarItemImage";img.style.width="16px";var source=this.manager.source,node;if(source.creator)node=source._normalizedCreator(source.getItem(this.manager.nodes[0].id).data,
"avatar").node;else{node=this.manager.nodes[0].cloneNode(true);var table,tbody;if(node.tagName.toLowerCase()=="tr"){table=dd.createElement("table");tbody=dd.createElement("tbody");tbody.appendChild(node);table.appendChild(tbody);node=table}else if(node.tagName.toLowerCase()=="th"){table=dd.createElement("table");tbody=dd.createElement("tbody");var r=dd.createElement("tr");table.cellPadding=table.cellSpacing="0";r.appendChild(node);tbody.appendChild(r);table.appendChild(tbody);node=table}}node.id=
"";td.appendChild(node);tr.appendChild(img);tr.appendChild(td);dojo.style(tr,"opacity",.9);b.appendChild(tr);a.appendChild(b);this.node=a;var m=dojo.dnd.manager();this.oldOffsetY=m.OFFSET_Y;m.OFFSET_Y=1},destroy:function(){dojo.dnd.manager().OFFSET_Y=this.oldOffsetY;this.inherited(arguments)}});var oldMakeAvatar=dojo.dnd.manager().makeAvatar;dojo.dnd.manager().makeAvatar=function(){var src=this.source;if(src.viewIndex!==undefined&&!dojo.hasClass(dojo.body(),"dijit_a11y"))return new dojox.grid._GridAvatar(this);
return oldMakeAvatar.call(dojo.dnd.manager())}})()}if(!dojo._hasResource["dojox.grid._RowSelector"]){dojo._hasResource["dojox.grid._RowSelector"]=true;dojo.provide("dojox.grid._RowSelector");dojo.declare("dojox.grid._RowSelector",dojox.grid._View,{defaultWidth:"2em",noscroll:true,padBorderWidth:2,buildRendering:function(){this.inherited("buildRendering",arguments);this.scrollboxNode.style.overflow="hidden";this.headerNode.style.visibility="hidden"},getWidth:function(){return this.viewWidth||this.defaultWidth},
buildRowContent:function(inRowIndex,inRowNode){var w=this.contentWidth||0;inRowNode.innerHTML='<table class="dojoxGridRowbarTable" style="width:'+w+'px;height:1px;" border="0" cellspacing="0" cellpadding="0" role="presentation"><tr><td class="dojoxGridRowbarInner">&nbsp;</td></tr></table>'},renderHeader:function(){},updateRow:function(){},resize:function(){this.adaptHeight()},adaptWidth:function(){if(!("contentWidth"in this)&&this.contentNode)this.contentWidth=this.contentNode.offsetWidth-this.padBorderWidth},
doStyleRowNode:function(inRowIndex,inRowNode){var n=["dojoxGridRowbar dojoxGridNonNormalizedCell"];if(this.grid.rows.isOver(inRowIndex))n.push("dojoxGridRowbarOver");if(this.grid.selection.isSelected(inRowIndex))n.push("dojoxGridRowbarSelected");inRowNode.className=n.join(" ")},domouseover:function(e){this.grid.onMouseOverRow(e)},domouseout:function(e){if(!this.isIntraRowEvent(e))this.grid.onMouseOutRow(e)}})}if(!dojo._hasResource["dojox.grid._Layout"]){dojo._hasResource["dojox.grid._Layout"]=true;
dojo.provide("dojox.grid._Layout");dojo.declare("dojox.grid._Layout",null,{constructor:function(inGrid){this.grid=inGrid},cells:[],structure:null,defaultWidth:"6em",moveColumn:function(sourceViewIndex,destViewIndex,cellIndex,targetIndex,before){var source_cells=this.structure[sourceViewIndex].cells[0];var dest_cells=this.structure[destViewIndex].cells[0];var cell=null;var cell_ri=0;var target_ri=0;for(var i=0,c;c=source_cells[i];i++)if(c.index==cellIndex){cell_ri=i;break}cell=source_cells.splice(cell_ri,
1)[0];cell.view=this.grid.views.views[destViewIndex];for(i=0,c=null;c=dest_cells[i];i++)if(c.index==targetIndex){target_ri=i;break}if(!before)target_ri+=1;dest_cells.splice(target_ri,0,cell);var sortedCell=this.grid.getCell(this.grid.getSortIndex());if(sortedCell)sortedCell._currentlySorted=this.grid.getSortAsc();this.cells=[];cellIndex=0;var v;for(i=0;v=this.structure[i];i++)for(var j=0,cs;cs=v.cells[j];j++)for(var k=0;c=cs[k];k++){c.index=cellIndex;this.cells.push(c);if("_currentlySorted"in c){var si=
cellIndex+1;si*=c._currentlySorted?1:-1;this.grid.sortInfo=si;delete c._currentlySorted}cellIndex++}dojo.forEach(this.cells,function(c){var marks=c.markup[2].split(" ");var oldIdx=parseInt(marks[1].substring(5));if(oldIdx!=c.index){marks[1]='idx="'+c.index+'"';c.markup[2]=marks.join(" ")}});this.grid.setupHeaderMenu()},setColumnVisibility:function(columnIndex,visible){var cell=this.cells[columnIndex];if(cell.hidden==visible){cell.hidden=!visible;var v=cell.view,w=v.viewWidth;if(w&&w!="auto")v._togglingColumn=
dojo.marginBox(cell.getHeaderNode()).w||0;v.update();return true}else return false},addCellDef:function(inRowIndex,inCellIndex,inDef){var self=this;var getCellWidth=function(inDef){var w=0;if(inDef.colSpan>1)w=0;else{w=inDef.width||self._defaultCellProps.width||self.defaultWidth;if(!isNaN(w))w=w+"em"}return w};var props={grid:this.grid,subrow:inRowIndex,layoutIndex:inCellIndex,index:this.cells.length};if(inDef&&inDef instanceof dojox.grid.cells._Base){var new_cell=dojo.clone(inDef);props.unitWidth=
getCellWidth(new_cell._props);new_cell=dojo.mixin(new_cell,this._defaultCellProps,inDef._props,props);return new_cell}var cell_type=inDef.type||inDef.cellType||this._defaultCellProps.type||this._defaultCellProps.cellType||dojox.grid.cells.Cell;props.unitWidth=getCellWidth(inDef);return new cell_type(dojo.mixin({},this._defaultCellProps,inDef,props))},addRowDef:function(inRowIndex,inDef){var result=[];var relSum=0,pctSum=0,doRel=true;for(var i=0,def,cell;def=inDef[i];i++){cell=this.addCellDef(inRowIndex,
i,def);result.push(cell);this.cells.push(cell);if(doRel&&cell.relWidth)relSum+=cell.relWidth;else if(cell.width){var w=cell.width;if(typeof w=="string"&&w.slice(-1)=="%")pctSum+=window.parseInt(w,10);else if(w=="auto")doRel=false}}if(relSum&&doRel)dojo.forEach(result,function(cell){if(cell.relWidth)cell.width=cell.unitWidth=cell.relWidth/relSum*(100-pctSum)+"%"});return result},addRowsDef:function(inDef){var result=[];if(dojo.isArray(inDef))if(dojo.isArray(inDef[0]))for(var i=0,row;inDef&&(row=inDef[i]);i++)result.push(this.addRowDef(i,
row));else result.push(this.addRowDef(0,inDef));return result},addViewDef:function(inDef){this._defaultCellProps=inDef.defaultCell||{};if(inDef.width&&inDef.width=="auto")delete inDef.width;return dojo.mixin({},inDef,{cells:this.addRowsDef(inDef.rows||inDef.cells)})},setStructure:function(inStructure){this.fieldIndex=0;this.cells=[];var s=this.structure=[];if(this.grid.rowSelector){var sel={type:dojox._scopeName+".grid._RowSelector"};if(dojo.isString(this.grid.rowSelector)){var width=this.grid.rowSelector;
if(width=="false")sel=null;else if(width!="true")sel["width"]=width}else if(!this.grid.rowSelector)sel=null;if(sel)s.push(this.addViewDef(sel))}var isCell=function(def){return"name"in def||"field"in def||"get"in def};var isRowDef=function(def){if(dojo.isArray(def))if(dojo.isArray(def[0])||isCell(def[0]))return true;return false};var isView=function(def){return def!==null&&dojo.isObject(def)&&("cells"in def||"rows"in def||"type"in def&&!isCell(def))};if(dojo.isArray(inStructure)){var hasViews=false;
for(var i=0,st;st=inStructure[i];i++)if(isView(st)){hasViews=true;break}if(!hasViews)s.push(this.addViewDef({cells:inStructure}));else for(i=0;st=inStructure[i];i++)if(isRowDef(st))s.push(this.addViewDef({cells:st}));else if(isView(st))s.push(this.addViewDef(st))}else if(isView(inStructure))s.push(this.addViewDef(inStructure));this.cellCount=this.cells.length;this.grid.setupHeaderMenu()}})}if(!dojo._hasResource["dojox.grid._ViewManager"]){dojo._hasResource["dojox.grid._ViewManager"]=true;dojo.provide("dojox.grid._ViewManager");
dojo.declare("dojox.grid._ViewManager",null,{constructor:function(inGrid){this.grid=inGrid},defaultWidth:200,views:[],resize:function(){this.onEach("resize")},render:function(){this.onEach("render")},addView:function(inView){inView.idx=this.views.length;this.views.push(inView)},destroyViews:function(){for(var i=0,v;v=this.views[i];i++)v.destroy();this.views=[]},getContentNodes:function(){var nodes=[];for(var i=0,v;v=this.views[i];i++)nodes.push(v.contentNode);return nodes},forEach:function(inCallback){for(var i=
0,v;v=this.views[i];i++)inCallback(v,i)},onEach:function(inMethod,inArgs){inArgs=inArgs||[];for(var i=0,v;v=this.views[i];i++)if(inMethod in v)v[inMethod].apply(v,inArgs)},normalizeHeaderNodeHeight:function(){var rowNodes=[];for(var i=0,v;v=this.views[i];i++)if(v.headerContentNode.firstChild)rowNodes.push(v.headerContentNode);this.normalizeRowNodeHeights(rowNodes)},normalizeRowNodeHeights:function(inRowNodes){var h=0;var currHeights=[];if(this.grid.rowHeight)h=this.grid.rowHeight;else{if(inRowNodes.length<=
1)return;for(var i=0,n;n=inRowNodes[i];i++)if(!dojo.hasClass(n,"dojoxGridNonNormalizedCell")){currHeights[i]=n.firstChild.offsetHeight;h=Math.max(h,currHeights[i])}h=h>=0?h:0;if(dojo.isMoz&&h)h++}for(i=0;n=inRowNodes[i];i++)if(currHeights[i]!=h)n.firstChild.style.height=h+"px"},resetHeaderNodeHeight:function(){for(var i=0,v,n;v=this.views[i];i++){n=v.headerContentNode.firstChild;if(n)n.style.height=""}},renormalizeRow:function(inRowIndex){var rowNodes=[];for(var i=0,v,n;(v=this.views[i])&&(n=v.getRowNode(inRowIndex));i++){n.firstChild.style.height=
"";rowNodes.push(n)}this.normalizeRowNodeHeights(rowNodes)},getViewContentRowWidth:function(inRowIndex){var iWidth=0;for(var i=0,v,n;(v=this.views[i])&&(n=v.getRowNode(inRowIndex));i++)iWidth+=dojo._getMarginBox(n).w||0;return iWidth+"px"},getViewContentRowHeight:function(inRowIndex){var iHeight=0;for(var i=0,v,n;(v=this.views[i])&&(n=v.getRowNode(inRowIndex));i++){iHeight=dojo._getMarginBox(n).h||0;if(iHeight)break}return iHeight+"px"},getViewContentRowMargins:function(inRowIndex){var marginsOut=
{top:0,right:0,bottom:0,left:0},margins;for(var i=0,v,n;(v=this.views[i])&&(n=v.getRowNode(inRowIndex));i++){margins=dojo._getMarginExtents(n);if(margins)break}if(margins){marginsOut.top=margins.t;marginsOut.right=margins.w-margins.l;marginsOut.bottom=margins.h-margins.t;marginsOut.left=margins.l}return marginsOut},getViewWidth:function(inIndex){return this.views[inIndex].getWidth()||this.defaultWidth},getTotalViewsWidth:function(){var iWidth=0;for(var i=0,v,n;v=this.views[i];i++)iWidth+=parseInt(v.getContentWidth());
return iWidth+"px"},measureHeader:function(){this.resetHeaderNodeHeight();this.forEach(function(inView){inView.headerContentNode.style.height=""});var h=0;this.forEach(function(inView){h=Math.max(inView.headerNode.offsetHeight,h)});return h},measureContent:function(){var h=0;this.forEach(function(inView){h=Math.max(inView.domNode.offsetHeight,h)});return h},findClient:function(inAutoWidth){var c=this.grid.elasticView||-1;if(c<0)for(var i=1,v;v=this.views[i];i++)if(v.viewWidth){for(i=1;v=this.views[i];i++)if(!v.viewWidth){c=
i;break}break}if(c<0)c=Math.floor(this.views.length/2);return c},arrange:function(l,w){var i,v,vw,len=this.views.length;var c=w<=0?len:this.findClient();var setPosition=function(v,l){var ds=v.domNode.style;var hs=v.headerNode.style;if(!dojo._isBodyLtr()){ds.right=l+"px";if(dojo.isMoz){hs.right=l+v.getScrollbarWidth()+"px";hs.width=parseInt(hs.width,10)-v.getScrollbarWidth()+"px"}else hs.right=l+"px"}else{ds.left=l+"px";hs.left=l+"px"}ds.top=0+"px";hs.top=0};for(i=0;(v=this.views[i])&&i<c;i++){vw=
this.getViewWidth(i);v.setSize(vw,0);setPosition(v,l);if(v.headerContentNode&&v.headerContentNode.firstChild)vw=v.getColumnsWidth()+v.getScrollbarWidth();else vw=v.domNode.offsetWidth;l+=vw}i++;var r=w;for(var j=len-1;(v=this.views[j])&&i<=j;j--){vw=this.getViewWidth(j);v.setSize(vw,0);vw=v.domNode.offsetWidth;r-=vw;setPosition(v,r)}if(c<len){v=this.views[c];vw=Math.max(1,r-l);v.setSize(vw+"px",0);setPosition(v,l)}return l},renderRow:function(inRowIndex,inNodes,skipRenorm){var rowNodes=[];for(var i=
0,v,n,rowNode;(v=this.views[i])&&(n=inNodes[i]);i++){rowNode=v.renderRow(inRowIndex);n.appendChild(rowNode);rowNodes.push(rowNode)}if(!skipRenorm)this.normalizeRowNodeHeights(rowNodes)},rowRemoved:function(inRowIndex){this.onEach("rowRemoved",[inRowIndex])},updateRow:function(inRowIndex,skipRenorm){for(var i=0,v;v=this.views[i];i++)v.updateRow(inRowIndex);if(!skipRenorm)this.renormalizeRow(inRowIndex)},updateRowStyles:function(inRowIndex){this.onEach("updateRowStyles",[inRowIndex])},setScrollTop:function(inTop){var top=
inTop;for(var i=0,v;v=this.views[i];i++){top=v.setScrollTop(inTop);if(dojo.isIE&&v.headerNode&&v.scrollboxNode)v.headerNode.scrollLeft=v.scrollboxNode.scrollLeft}return top},setScrollLeft:function(inLeft){var left=inLeft;for(var i=0,v;v=this.views[i];i++){left=v.setScrollLeft(inLeft);if(dojo.isIE&&v.headerNode&&v.scrollboxNode)v.headerNode.scrollLeft=v.scrollboxNode.scrollLeft}return left},getFirstScrollingView:function(){for(var i=0,v;v=this.views[i];i++)if(v.hasHScrollbar()||v.hasVScrollbar())return v;
return null}})}if(!dojo._hasResource["dojox.grid._RowManager"]){dojo._hasResource["dojox.grid._RowManager"]=true;dojo.provide("dojox.grid._RowManager");(function(){var setStyleText=function(inNode,inStyleText){if(inNode.style.cssText==undefined)inNode.setAttribute("style",inStyleText);else inNode.style.cssText=inStyleText};dojo.declare("dojox.grid._RowManager",null,{constructor:function(inGrid){this.grid=inGrid},linesToEms:2,overRow:-2,prepareStylingRow:function(inRowIndex,inRowNode){return{index:inRowIndex,
node:inRowNode,odd:Boolean(inRowIndex&1),selected:!!this.grid.selection.isSelected(inRowIndex),over:this.isOver(inRowIndex),customStyles:"",customClasses:"dojoxGridRow dnd_target selection_target"}},styleRowNode:function(inRowIndex,inRowNode){var row=this.prepareStylingRow(inRowIndex,inRowNode);this.grid.onStyleRow(row);this.applyStyles(row)},applyStyles:function(inRow){var i=inRow;i.node.className=i.customClasses;var h=i.node.style.height;setStyleText(i.node,i.customStyles+";"+(i.node._style||""));
i.node.style.height=h},updateStyles:function(inRowIndex){this.grid.updateRowStyles(inRowIndex)},setOverRow:function(inRowIndex){var last=this.overRow;this.overRow=inRowIndex;if(last!=this.overRow&&(dojo.isString(last)||last>=0))this.updateStyles(last);this.updateStyles(this.overRow)},isOver:function(inRowIndex){return this.overRow==inRowIndex&&!dojo.hasClass(this.grid.domNode,"dojoxGridColumnResizing")}})})()}if(!dojo._hasResource["dojox.grid._FocusManager"]){dojo._hasResource["dojox.grid._FocusManager"]=
true;dojo.provide("dojox.grid._FocusManager");dojo.declare("dojox.grid._FocusManager",null,{constructor:function(inGrid){this.grid=inGrid;this.cell=null;this.rowIndex=-1;this._connects=[];this._headerConnects=[];this.headerMenu=this.grid.headerMenu;this._connects.push(dojo.connect(this.grid.domNode,"onfocus",this,"doFocus"));this._connects.push(dojo.connect(this.grid.domNode,"onblur",this,"doBlur"));this._connects.push(dojo.connect(this.grid.lastFocusNode,"onfocus",this,"doLastNodeFocus"));this._connects.push(dojo.connect(this.grid.lastFocusNode,
"onblur",this,"doLastNodeBlur"));this._connects.push(dojo.connect(this.grid,"_onFetchComplete",this,"_delayedCellFocus"));this._connects.push(dojo.connect(this.grid,"postrender",this,"_delayedHeaderFocus"))},destroy:function(){dojo.forEach(this._connects,dojo.disconnect);dojo.forEach(this._headerConnects,dojo.disconnect);delete this.grid;delete this.cell},_colHeadNode:null,_colHeadFocusIdx:null,_contextMenuBindNode:null,tabbingOut:false,focusClass:"dojoxGridCellFocus",focusView:null,initFocusView:function(){this.focusView=
this.grid.views.getFirstScrollingView()||this.focusView||this.grid.views.views[0];this._initColumnHeaders()},isFocusCell:function(inCell,inRowIndex){return this.cell==inCell&&this.rowIndex==inRowIndex},isLastFocusCell:function(){if(this.cell)return this.rowIndex==this.grid.rowCount-1&&this.cell.index==this.grid.layout.cellCount-1;return false},isFirstFocusCell:function(){if(this.cell)return this.rowIndex===0&&this.cell.index===0;return false},isNoFocusCell:function(){return this.rowIndex<0||!this.cell},
isNavHeader:function(){return!!this._colHeadNode},getHeaderIndex:function(){if(this._colHeadNode)return dojo.indexOf(this._findHeaderCells(),this._colHeadNode);else return-1},_focusifyCellNode:function(inBork){var n=this.cell&&this.cell.getNode(this.rowIndex);if(n){dojo.toggleClass(n,this.focusClass,inBork);if(inBork){var sl=this.scrollIntoView();try{if(!this.grid.edit.isEditing()){dojox.grid.util.fire(n,"focus");if(sl)this.cell.view.scrollboxNode.scrollLeft=sl}}catch(e){}}}},_delayedCellFocus:function(){if(this.isNavHeader()||
!this.grid._focused)return;var n=this.cell&&this.cell.getNode(this.rowIndex);if(n)try{if(!this.grid.edit.isEditing()){dojo.toggleClass(n,this.focusClass,true);this.blurHeader();dojox.grid.util.fire(n,"focus")}}catch(e){}},_delayedHeaderFocus:function(){if(this.isNavHeader()){this.focusHeader();this.grid.domNode.focus()}},_initColumnHeaders:function(){dojo.forEach(this._headerConnects,dojo.disconnect);this._headerConnects=[];var headers=this._findHeaderCells();for(var i=0;i<headers.length;i++){this._headerConnects.push(dojo.connect(headers[i],
"onfocus",this,"doColHeaderFocus"));this._headerConnects.push(dojo.connect(headers[i],"onblur",this,"doColHeaderBlur"))}},_findHeaderCells:function(){var allHeads=dojo.query("th",this.grid.viewsHeaderNode);var headers=[];for(var i=0;i<allHeads.length;i++){var aHead=allHeads[i];var hasTabIdx=dojo.hasAttr(aHead,"tabIndex");var tabindex=dojo.attr(aHead,"tabIndex");if(hasTabIdx&&tabindex<0)headers.push(aHead)}return headers},_setActiveColHeader:function(colHeaderNode,colFocusIdx,prevColFocusIdx){dojo.attr(this.grid.domNode,
"aria-activedescendant",colHeaderNode.id);if(prevColFocusIdx!=null&&prevColFocusIdx>=0&&prevColFocusIdx!=colFocusIdx)dojo.toggleClass(this._findHeaderCells()[prevColFocusIdx],this.focusClass,false);dojo.toggleClass(colHeaderNode,this.focusClass,true);this._colHeadNode=colHeaderNode;this._colHeadFocusIdx=colFocusIdx;this._scrollHeader(this._colHeadFocusIdx)},scrollIntoView:function(){var info=this.cell?this._scrollInfo(this.cell):null;if(!info||!info.s)return null;var rt=this.grid.scroller.findScrollTop(this.rowIndex);
if(info.n&&info.sr)if(info.n.offsetLeft+info.n.offsetWidth>info.sr.l+info.sr.w)info.s.scrollLeft=info.n.offsetLeft+info.n.offsetWidth-info.sr.w;else if(info.n.offsetLeft<info.sr.l)info.s.scrollLeft=info.n.offsetLeft;if(info.r&&info.sr)if(rt+info.r.offsetHeight>info.sr.t+info.sr.h)this.grid.setScrollTop(rt+info.r.offsetHeight-info.sr.h);else if(rt<info.sr.t)this.grid.setScrollTop(rt);return info.s.scrollLeft},_scrollInfo:function(cell,domNode){if(cell){var cl=cell,sbn=cl.view.scrollboxNode,sbnr={w:sbn.clientWidth,
l:sbn.scrollLeft,t:sbn.scrollTop,h:sbn.clientHeight},rn=cl.view.getRowNode(this.rowIndex);return{c:cl,s:sbn,sr:sbnr,n:domNode?domNode:cell.getNode(this.rowIndex),r:rn}}return null},_scrollHeader:function(currentIdx){var info=null;if(this._colHeadNode){var cell=this.grid.getCell(currentIdx);info=this._scrollInfo(cell,cell.getNode(0))}if(info&&info.s&&info.sr&&info.n){var scroll=info.sr.l+info.sr.w;if(info.n.offsetLeft+info.n.offsetWidth>scroll)info.s.scrollLeft=info.n.offsetLeft+info.n.offsetWidth-
info.sr.w;else if(info.n.offsetLeft<info.sr.l)info.s.scrollLeft=info.n.offsetLeft;else if(dojo.isIE<=7&&cell&&cell.view.headerNode)cell.view.headerNode.scrollLeft=info.s.scrollLeft}},_isHeaderHidden:function(){var curView=this.focusView;if(!curView)for(var i=0,cView;cView=this.grid.views.views[i];i++)if(cView.headerNode){curView=cView;break}return curView&&dojo.getComputedStyle(curView.headerNode).display=="none"},colSizeAdjust:function(e,colIdx,delta){var headers=this._findHeaderCells();var view=
this.focusView;if(!view)for(var i=0,cView;cView=this.grid.views.views[i];i++)if(cView.header.tableMap.map){view=cView;break}var curHeader=headers[colIdx];if(!view||colIdx==headers.length-1&&colIdx===0)return;view.content.baseDecorateEvent(e);e.cellNode=curHeader;e.cellIndex=view.content.getCellNodeIndex(e.cellNode);e.cell=e.cellIndex>=0?this.grid.getCell(e.cellIndex):null;if(view.header.canResize(e)){var deltaObj={l:delta};var drag=view.header.colResizeSetup(e,false);view.header.doResizeColumn(drag,
null,deltaObj);view.update()}},styleRow:function(inRow){return},setFocusIndex:function(inRowIndex,inCellIndex){this.setFocusCell(this.grid.getCell(inCellIndex),inRowIndex)},setFocusCell:function(inCell,inRowIndex){if(inCell&&!this.isFocusCell(inCell,inRowIndex)){this.tabbingOut=false;if(this._colHeadNode)this.blurHeader();this._colHeadNode=this._colHeadFocusIdx=null;this.focusGridView();this._focusifyCellNode(false);this.cell=inCell;this.rowIndex=inRowIndex;this._focusifyCellNode(true)}if(dojo.isOpera)setTimeout(dojo.hitch(this.grid,
"onCellFocus",this.cell,this.rowIndex),1);else this.grid.onCellFocus(this.cell,this.rowIndex)},next:function(){if(this.cell){var row=this.rowIndex,col=this.cell.index+1,cc=this.grid.layout.cellCount-1,rc=this.grid.rowCount-1;if(col>cc){col=0;row++}if(row>rc){col=cc;row=rc}if(this.grid.edit.isEditing()){var nextCell=this.grid.getCell(col);if(!this.isLastFocusCell()&&(!nextCell.editable||this.grid.canEdit&&!this.grid.canEdit(nextCell,row))){this.cell=nextCell;this.rowIndex=row;this.next();return}}this.setFocusIndex(row,
col)}},previous:function(){if(this.cell){var row=this.rowIndex||0,col=(this.cell.index||0)-1;if(col<0){col=this.grid.layout.cellCount-1;row--}if(row<0){row=0;col=0}if(this.grid.edit.isEditing()){var prevCell=this.grid.getCell(col);if(!this.isFirstFocusCell()&&!prevCell.editable){this.cell=prevCell;this.rowIndex=row;this.previous();return}}this.setFocusIndex(row,col)}},move:function(inRowDelta,inColDelta){var colDir=inColDelta<0?-1:1;if(this.isNavHeader()){var headers=this._findHeaderCells();var savedIdx=
currentIdx=dojo.indexOf(headers,this._colHeadNode);currentIdx+=inColDelta;while(currentIdx>=0&&currentIdx<headers.length&&headers[currentIdx].style.display=="none")currentIdx+=colDir;if(currentIdx>=0&&currentIdx<headers.length)this._setActiveColHeader(headers[currentIdx],currentIdx,savedIdx)}else if(this.cell){var sc=this.grid.scroller,r=this.rowIndex,rc=this.grid.rowCount-1,row=Math.min(rc,Math.max(0,r+inRowDelta));if(inRowDelta)if(inRowDelta>0){if(row>sc.getLastPageRow(sc.page))this.grid.setScrollTop(this.grid.scrollTop+
sc.findScrollTop(row)-sc.findScrollTop(r))}else if(inRowDelta<0)if(row<=sc.getPageRow(sc.page))this.grid.setScrollTop(this.grid.scrollTop-sc.findScrollTop(r)-sc.findScrollTop(row));var cc=this.grid.layout.cellCount-1,i=this.cell.index,col=Math.min(cc,Math.max(0,i+inColDelta));var cell=this.grid.getCell(col);while(col>=0&&col<cc&&cell&&cell.hidden===true){col+=colDir;cell=this.grid.getCell(col)}if(!cell||cell.hidden===true)col=i;this.setFocusIndex(row,col);if(inRowDelta)this.grid.updateRow(r)}},previousKey:function(e){if(this.grid.edit.isEditing()){dojo.stopEvent(e);
this.previous()}else if(!this.isNavHeader()&&!this._isHeaderHidden()){this.grid.domNode.focus();dojo.stopEvent(e)}else{this.tabOut(this.grid.domNode);if(this._colHeadFocusIdx!=null){dojo.toggleClass(this._findHeaderCells()[this._colHeadFocusIdx],this.focusClass,false);this._colHeadFocusIdx=null}this._focusifyCellNode(false)}},nextKey:function(e){var isEmpty=this.grid.rowCount===0;if(e.target===this.grid.domNode&&this._colHeadFocusIdx==null){this.focusHeader();dojo.stopEvent(e)}else if(this.isNavHeader()){this.blurHeader();
if(!this.findAndFocusGridCell())this.tabOut(this.grid.lastFocusNode);this._colHeadNode=this._colHeadFocusIdx=null}else if(this.grid.edit.isEditing()){dojo.stopEvent(e);this.next()}else this.tabOut(this.grid.lastFocusNode)},tabOut:function(inFocusNode){this.tabbingOut=true;inFocusNode.focus()},focusGridView:function(){dojox.grid.util.fire(this.focusView,"focus")},focusGrid:function(inSkipFocusCell){this.focusGridView();this._focusifyCellNode(true)},findAndFocusGridCell:function(){var didFocus=true;
var isEmpty=this.grid.rowCount===0;if(this.isNoFocusCell()&&!isEmpty){var cellIdx=0;var cell=this.grid.getCell(cellIdx);if(cell.hidden)cellIdx=this.isNavHeader()?this._colHeadFocusIdx:0;this.setFocusIndex(0,cellIdx)}else if(this.cell&&!isEmpty){if(this.focusView&&!this.focusView.rowNodes[this.rowIndex])this.grid.scrollToRow(this.rowIndex);this.focusGrid()}else didFocus=false;this._colHeadNode=this._colHeadFocusIdx=null;return didFocus},focusHeader:function(){var headerNodes=this._findHeaderCells();
var saveColHeadFocusIdx=this._colHeadFocusIdx;if(this._isHeaderHidden())this.findAndFocusGridCell();else if(!this._colHeadFocusIdx)if(this.isNoFocusCell())this._colHeadFocusIdx=0;else this._colHeadFocusIdx=this.cell.index;this._colHeadNode=headerNodes[this._colHeadFocusIdx];while(this._colHeadNode&&this._colHeadFocusIdx>=0&&this._colHeadFocusIdx<headerNodes.length&&this._colHeadNode.style.display=="none"){this._colHeadFocusIdx++;this._colHeadNode=headerNodes[this._colHeadFocusIdx]}if(this._colHeadNode&&
this._colHeadNode.style.display!="none"){if(this.headerMenu&&this._contextMenuBindNode!=this.grid.domNode){this.headerMenu.unBindDomNode(this.grid.viewsHeaderNode);this.headerMenu.bindDomNode(this.grid.domNode);this._contextMenuBindNode=this.grid.domNode}this._setActiveColHeader(this._colHeadNode,this._colHeadFocusIdx,saveColHeadFocusIdx);this._scrollHeader(this._colHeadFocusIdx);this._focusifyCellNode(false)}else this.findAndFocusGridCell()},blurHeader:function(){dojo.removeClass(this._colHeadNode,
this.focusClass);dojo.removeAttr(this.grid.domNode,"aria-activedescendant");if(this.headerMenu&&this._contextMenuBindNode==this.grid.domNode){var viewsHeader=this.grid.viewsHeaderNode;this.headerMenu.unBindDomNode(this.grid.domNode);this.headerMenu.bindDomNode(viewsHeader);this._contextMenuBindNode=viewsHeader}},doFocus:function(e){if(e&&e.target!=e.currentTarget){dojo.stopEvent(e);return}if(!this.tabbingOut)this.focusHeader();this.tabbingOut=false;dojo.stopEvent(e)},doBlur:function(e){dojo.stopEvent(e)},
doContextMenu:function(e){if(!this.headerMenu)dojo.stopEvent(e)},doLastNodeFocus:function(e){if(this.tabbingOut)this._focusifyCellNode(false);else if(this.grid.rowCount>0){if(this.isNoFocusCell())this.setFocusIndex(0,0);this._focusifyCellNode(true)}else this.focusHeader();this.tabbingOut=false;dojo.stopEvent(e)},doLastNodeBlur:function(e){dojo.stopEvent(e)},doColHeaderFocus:function(e){this._setActiveColHeader(e.target,dojo.attr(e.target,"idx"),this._colHeadFocusIdx);this._scrollHeader(this.getHeaderIndex());
dojo.stopEvent(e)},doColHeaderBlur:function(e){dojo.toggleClass(e.target,this.focusClass,false)}})}if(!dojo._hasResource["dojox.grid._EditManager"]){dojo._hasResource["dojox.grid._EditManager"]=true;dojo.provide("dojox.grid._EditManager");dojo.declare("dojox.grid._EditManager",null,{constructor:function(inGrid){this.grid=inGrid;if(dojo.isIE)this.connections=[dojo.connect(document.body,"onfocus",dojo.hitch(this,"_boomerangFocus"))];else this.connections=[dojo.connect(this.grid,"onBlur",this,"apply")]},
info:{},destroy:function(){dojo.forEach(this.connections,dojo.disconnect)},cellFocus:function(inCell,inRowIndex){if(this.grid.singleClickEdit||this.isEditRow(inRowIndex))this.setEditCell(inCell,inRowIndex);else this.apply();if(this.isEditing()||inCell&&inCell.editable&&inCell.alwaysEditing)this._focusEditor(inCell,inRowIndex)},rowClick:function(e){if(this.isEditing()&&!this.isEditRow(e.rowIndex))this.apply()},styleRow:function(inRow){if(inRow.index==this.info.rowIndex)inRow.customClasses+=" dojoxGridRowEditing"},
dispatchEvent:function(e){var c=e.cell,ed=c&&c["editable"]?c:0;return ed&&ed.dispatchEvent(e.dispatch,e)},isEditing:function(){return this.info.rowIndex!==undefined},isEditCell:function(inRowIndex,inCellIndex){return this.info.rowIndex===inRowIndex&&this.info.cell.index==inCellIndex},isEditRow:function(inRowIndex){return this.info.rowIndex===inRowIndex},setEditCell:function(inCell,inRowIndex){if(!this.isEditCell(inRowIndex,inCell.index)&&this.grid.canEdit&&this.grid.canEdit(inCell,inRowIndex))this.start(inCell,
inRowIndex,this.isEditRow(inRowIndex)||inCell.editable)},_focusEditor:function(inCell,inRowIndex){dojox.grid.util.fire(inCell,"focus",[inRowIndex])},focusEditor:function(){if(this.isEditing())this._focusEditor(this.info.cell,this.info.rowIndex)},_boomerangWindow:500,_shouldCatchBoomerang:function(){return this._catchBoomerang>(new Date).getTime()},_boomerangFocus:function(){if(this._shouldCatchBoomerang()){this.grid.focus.focusGrid();this.focusEditor();this._catchBoomerang=0}},_doCatchBoomerang:function(){if(dojo.isIE)this._catchBoomerang=
(new Date).getTime()+this._boomerangWindow},start:function(inCell,inRowIndex,inEditing){this.grid.beginUpdate();this.editorApply();if(this.isEditing()&&!this.isEditRow(inRowIndex)){this.applyRowEdit();this.grid.updateRow(inRowIndex)}if(inEditing){this.info={cell:inCell,rowIndex:inRowIndex};this.grid.doStartEdit(inCell,inRowIndex);this.grid.updateRow(inRowIndex)}else this.info={};this.grid.endUpdate();this.grid.focus.focusGrid();this._focusEditor(inCell,inRowIndex);this._doCatchBoomerang()},_editorDo:function(inMethod){var c=
this.info.cell;if(c&&c.editable)c[inMethod](this.info.rowIndex)},editorApply:function(){this._editorDo("apply")},editorCancel:function(){this._editorDo("cancel")},applyCellEdit:function(inValue,inCell,inRowIndex){if(this.grid.canEdit(inCell,inRowIndex))this.grid.doApplyCellEdit(inValue,inRowIndex,inCell.field)},applyRowEdit:function(){this.grid.doApplyEdit(this.info.rowIndex,this.info.cell.field)},apply:function(){if(this.isEditing()){this.grid.beginUpdate();this.editorApply();this.applyRowEdit();
this.info={};this.grid.endUpdate();this.grid.focus.focusGrid();this._doCatchBoomerang()}},cancel:function(){if(this.isEditing()){this.grid.beginUpdate();this.editorCancel();this.info={};this.grid.endUpdate();this.grid.focus.focusGrid();this._doCatchBoomerang()}},save:function(inRowIndex,inView){var c=this.info.cell;if(this.isEditRow(inRowIndex)&&(!inView||c.view==inView)&&c.editable)c.save(c,this.info.rowIndex)},restore:function(inView,inRowIndex){var c=this.info.cell;if(this.isEditRow(inRowIndex)&&
c.view==inView&&c.editable)c.restore(c,this.info.rowIndex)}})}if(!dojo._hasResource["dojox.grid.Selection"]){dojo._hasResource["dojox.grid.Selection"]=true;dojo.provide("dojox.grid.Selection");dojo.declare("dojox.grid.Selection",null,{constructor:function(inGrid){this.grid=inGrid;this.selected=[];this.setMode(inGrid.selectionMode)},mode:"extended",selected:null,updating:0,selectedIndex:-1,firstSelected:-1,setMode:function(mode){if(this.selected.length)this.deselectAll();if(mode!="extended"&&mode!=
"multiple"&&mode!="single"&&mode!="none")this.mode="extended";else this.mode=mode},onCanSelect:function(inIndex){return this.grid.onCanSelect(inIndex)},onCanDeselect:function(inIndex){return this.grid.onCanDeselect(inIndex)},onSelected:function(inIndex){},onDeselected:function(inIndex){},onChanging:function(){},onChanged:function(){},isSelected:function(inIndex){if(this.mode=="none")return false;return this.selected[inIndex]},getFirstSelected:function(){if(!this.selected.length||this.mode=="none")return-1;
for(var i=0,l=this.selected.length;i<l;i++)if(this.selected[i])return i;return-1},getSelectedIndexes:function(){if(!this.selected.length||this.mode=="none")return[];var indexes=[];for(var i=0,l=this.selected.length;i<l;i++)if(this.selected[i])indexes.push(i);return indexes},setNextSelected:function(){if(this.mode=="none")return false},getNextSelected:function(inPrev){if(this.mode=="none")return-1;for(var i=inPrev+1,l=this.selected.length;i<l;i++)if(this.selected[i])return i;return-1},getSelected:function(){var result=
[];for(var i=0,l=this.selected.length;i<l;i++)if(this.selected[i])result.push(i);return result},getSelectedCount:function(){var c=0;for(var i=0;i<this.selected.length;i++)if(this.selected[i])c++;return c},_beginUpdate:function(){if(this.updating===0)this.onChanging();this.updating++},_endUpdate:function(){this.updating--;if(this.updating===0)this.onChanged()},select:function(inIndex){if(this.mode=="none")return;if(this.mode!="multiple"){this.deselectAll(inIndex);this.addToSelection(inIndex)}else this.toggleSelect(inIndex)},
addToSelection:function(inIndex){if(this.mode=="none")return;if(dojo.isArray(inIndex)){dojo.forEach(inIndex,this.addToSelection,this);return}inIndex=Number(inIndex);if(this.selected[inIndex]){this.selectedIndex=inIndex;if(-1==this.firstSelected)this.firstSelected=inIndex}else if(this.onCanSelect(inIndex)!==false){this.selectedIndex=inIndex;if(-1==this.firstSelected)this.firstSelected=inIndex;var rowNode=this.grid.getRowNode(inIndex);if(rowNode)dojo.attr(rowNode,"aria-selected","true");this._beginUpdate();
this.selected[inIndex]=true;this.onSelected(inIndex);this._endUpdate()}},deselect:function(inIndex){if(this.mode=="none")return;if(dojo.isArray(inIndex)){dojo.forEach(inIndex,this.deselect,this);return}inIndex=Number(inIndex);if(this.selectedIndex==inIndex)this.selectedIndex=-1;if(this.selected[inIndex]){if(this.onCanDeselect(inIndex)===false)return;var rowNode=this.grid.getRowNode(inIndex);if(rowNode)dojo.attr(rowNode,"aria-selected","false");this._beginUpdate();delete this.selected[inIndex];this.onDeselected(inIndex);
this._endUpdate()}},setSelected:function(inIndex,inSelect){this[inSelect?"addToSelection":"deselect"](inIndex)},toggleSelect:function(inIndex){if(dojo.isArray(inIndex)){dojo.forEach(inIndex,this.toggleSelect,this);return}this.setSelected(inIndex,!this.selected[inIndex])},_range:function(inFrom,inTo,func){var s=inFrom>=0?inFrom:inTo,e=inTo;if(s>e){e=s;s=inTo}for(var i=s;i<=e;i++)func(i)},selectRange:function(inFrom,inTo){this._range(inFrom,inTo,dojo.hitch(this,"addToSelection"))},deselectRange:function(inFrom,
inTo){this._range(inFrom,inTo,dojo.hitch(this,"deselect"))},insert:function(inIndex){this.selected.splice(inIndex,0,false);if(this.selectedIndex>=inIndex)this.selectedIndex++;if(this.firstSelected>=inIndex)this.firstSelected++},remove:function(inIndex){this.selected.splice(inIndex,1);if(this.selectedIndex>=inIndex)this.selectedIndex--;if(this.firstSelected>=inIndex)this.firstSelected--},deselectAll:function(inExcept){for(var i in this.selected)if(i!=inExcept&&this.selected[i]===true)this.deselect(i);
this.firstSelected=-1},selectAll:function(){if(this.mode!="extended")return;this._beginUpdate();var length=this.grid.get("rowCount");this.selectRange(0,length-1);this._endUpdate()},clickSelect:function(inIndex,inCtrlKey,inShiftKey){if(this.mode=="none")return;this._beginUpdate();if(this.mode!="extended"){this.select(inIndex);this.firstSelected=-1}else{var lastSelected=this.selectedIndex,firstSelected=this.firstSelected;if(!inCtrlKey){this.deselectAll(inIndex);this.firstSelected=firstSelected}if(inShiftKey){var firstSelectedRange=
firstSelected!=-1?firstSelected:lastSelected;this.selectRange(firstSelectedRange,inIndex)}else if(inCtrlKey)this.toggleSelect(inIndex);else{this.addToSelection(inIndex);this.firstSelected=inIndex}}this._endUpdate()},clickSelectEvent:function(e){this.clickSelect(e.rowIndex,dojo.isCopyKey(e),e.shiftKey)},clear:function(){this._beginUpdate();this.deselectAll();this._endUpdate()}})}if(!dojo._hasResource["dojox.grid._Events"]){dojo._hasResource["dojox.grid._Events"]=true;dojo.provide("dojox.grid._Events");
dojo.declare("dojox.grid._Events",null,{cellOverClass:"dojoxGridCellOver",onKeyEvent:function(e){this.dispatchKeyEvent(e)},onContentEvent:function(e){this.dispatchContentEvent(e)},onHeaderEvent:function(e){this.dispatchHeaderEvent(e)},onStyleRow:function(inRow){var i=inRow;i.customClasses+=(i.odd?" dojoxGridRowOdd":"")+(i.selected?" dojoxGridRowSelected":"")+(i.over?" dojoxGridRowOver":"");this.focus.styleRow(inRow);this.edit.styleRow(inRow)},onKeyDown:function(e){if(e.altKey||e.metaKey)return;var dk=
dojo.keys;var colIdx;switch(e.keyCode){case dk.ESCAPE:this.edit.cancel();break;case dk.ENTER:if(!this.edit.isEditing()){colIdx=this.focus.getHeaderIndex();if(colIdx>=0){this.setSortIndex(colIdx);break}else this.selection.clickSelect(this.focus.rowIndex,dojo.isCopyKey(e),e.shiftKey);dojo.stopEvent(e)}if(!e.shiftKey){var isEditing=this.edit.isEditing();this.edit.apply();if(!isEditing)this.edit.setEditCell(this.focus.cell,this.focus.rowIndex)}if(!this.edit.isEditing()){var curView=this.focus.focusView||
this.views.views[0];curView.content.decorateEvent(e);this.onRowClick(e)}break;case dk.SPACE:if(!this.edit.isEditing()){colIdx=this.focus.getHeaderIndex();if(colIdx>=0){this.setSortIndex(colIdx);break}else this.selection.clickSelect(this.focus.rowIndex,dojo.isCopyKey(e),e.shiftKey);dojo.stopEvent(e)}break;case dk.TAB:this.focus[e.shiftKey?"previousKey":"nextKey"](e);break;case dk.LEFT_ARROW:case dk.RIGHT_ARROW:if(!this.edit.isEditing()){var keyCode=e.keyCode;dojo.stopEvent(e);colIdx=this.focus.getHeaderIndex();
if(colIdx>=0&&(e.shiftKey&&e.ctrlKey))this.focus.colSizeAdjust(e,colIdx,(keyCode==dk.LEFT_ARROW?-1:1)*5);else{var offset=keyCode==dk.LEFT_ARROW?1:-1;if(dojo._isBodyLtr())offset*=-1;this.focus.move(0,offset)}}break;case dk.UP_ARROW:if(!this.edit.isEditing()&&this.focus.rowIndex!==0){dojo.stopEvent(e);this.focus.move(-1,0)}break;case dk.DOWN_ARROW:if(!this.edit.isEditing()&&this.focus.rowIndex+1!=this.rowCount){dojo.stopEvent(e);this.focus.move(1,0)}break;case dk.PAGE_UP:if(!this.edit.isEditing()&&
this.focus.rowIndex!==0){dojo.stopEvent(e);if(this.focus.rowIndex!=this.scroller.firstVisibleRow+1)this.focus.move(this.scroller.firstVisibleRow-this.focus.rowIndex,0);else{this.setScrollTop(this.scroller.findScrollTop(this.focus.rowIndex-1));this.focus.move(this.scroller.firstVisibleRow-this.scroller.lastVisibleRow+1,0)}}break;case dk.PAGE_DOWN:if(!this.edit.isEditing()&&this.focus.rowIndex+1!=this.rowCount){dojo.stopEvent(e);if(this.focus.rowIndex!=this.scroller.lastVisibleRow-1)this.focus.move(this.scroller.lastVisibleRow-
this.focus.rowIndex-1,0);else{this.setScrollTop(this.scroller.findScrollTop(this.focus.rowIndex+1));this.focus.move(this.scroller.lastVisibleRow-this.scroller.firstVisibleRow-1,0)}}break;default:break}},onMouseOver:function(e){e.rowIndex==-1?this.onHeaderCellMouseOver(e):this.onCellMouseOver(e)},onMouseOut:function(e){e.rowIndex==-1?this.onHeaderCellMouseOut(e):this.onCellMouseOut(e)},onMouseDown:function(e){e.rowIndex==-1?this.onHeaderCellMouseDown(e):this.onCellMouseDown(e)},onMouseOverRow:function(e){if(!this.rows.isOver(e.rowIndex)){this.rows.setOverRow(e.rowIndex);
e.rowIndex==-1?this.onHeaderMouseOver(e):this.onRowMouseOver(e)}},onMouseOutRow:function(e){if(this.rows.isOver(-1))this.onHeaderMouseOut(e);else if(!this.rows.isOver(-2)){this.rows.setOverRow(-2);this.onRowMouseOut(e)}},onMouseDownRow:function(e){if(e.rowIndex!=-1)this.onRowMouseDown(e)},onCellMouseOver:function(e){if(e.cellNode)dojo.addClass(e.cellNode,this.cellOverClass)},onCellMouseOut:function(e){if(e.cellNode)dojo.removeClass(e.cellNode,this.cellOverClass)},onCellMouseDown:function(e){},onCellClick:function(e){this._click[0]=
this._click[1];this._click[1]=e;if(!this.edit.isEditCell(e.rowIndex,e.cellIndex))this.focus.setFocusCell(e.cell,e.rowIndex);this.onRowClick(e)},onCellDblClick:function(e){if(this._click.length>1&&dojo.isIE)this.edit.setEditCell(this._click[1].cell,this._click[1].rowIndex);else if(this._click.length>1&&this._click[0].rowIndex!=this._click[1].rowIndex)this.edit.setEditCell(this._click[0].cell,this._click[0].rowIndex);else this.edit.setEditCell(e.cell,e.rowIndex);this.onRowDblClick(e)},onCellContextMenu:function(e){this.onRowContextMenu(e)},
onCellFocus:function(inCell,inRowIndex){this.edit.cellFocus(inCell,inRowIndex)},onRowClick:function(e){this.edit.rowClick(e);this.selection.clickSelectEvent(e)},onRowDblClick:function(e){},onRowMouseOver:function(e){},onRowMouseOut:function(e){},onRowMouseDown:function(e){},onRowContextMenu:function(e){dojo.stopEvent(e)},onHeaderMouseOver:function(e){},onHeaderMouseOut:function(e){},onHeaderCellMouseOver:function(e){if(e.cellNode)dojo.addClass(e.cellNode,this.cellOverClass)},onHeaderCellMouseOut:function(e){if(e.cellNode)dojo.removeClass(e.cellNode,
this.cellOverClass)},onHeaderCellMouseDown:function(e){},onHeaderClick:function(e){},onHeaderCellClick:function(e){this.setSortIndex(e.cell.index);this.onHeaderClick(e)},onHeaderDblClick:function(e){},onHeaderCellDblClick:function(e){this.onHeaderDblClick(e)},onHeaderCellContextMenu:function(e){this.onHeaderContextMenu(e)},onHeaderContextMenu:function(e){if(!this.headerMenu)dojo.stopEvent(e)},onStartEdit:function(inCell,inRowIndex){},onApplyCellEdit:function(inValue,inRowIndex,inFieldIndex){},onCancelEdit:function(inRowIndex){},
onApplyEdit:function(inRowIndex){},onCanSelect:function(inRowIndex){return true},onCanDeselect:function(inRowIndex){return true},onSelected:function(inRowIndex){this.updateRowStyles(inRowIndex)},onDeselected:function(inRowIndex){this.updateRowStyles(inRowIndex)},onSelectionChanged:function(){}})}if(!dojo._hasResource["dojox.grid._Grid"]){dojo._hasResource["dojox.grid._Grid"]=true;dojo.provide("dojox.grid._Grid");(function(){if(!dojo.isCopyKey)dojo.isCopyKey=dojo.dnd.getCopyKeyState;dojo.declare("dojox.grid._Grid",
[dijit._Widget,dijit._Templated,dojox.grid._Events],{templateString:'<div hidefocus="hidefocus" role="grid" dojoAttachEvent="onmouseout:_mouseOut" style="height:100%">\r\n\t<div class="dojoxGridMasterHeader" dojoAttachPoint="viewsHeaderNode" role="presentation"></div>\r\n\t<div class="dojoxGridMasterView" dojoAttachPoint="viewsNode" role="presentation" style="position: absolute;top: 23px;bottom: 0px;"></div>\r\n\t<div class="dojoxGridMasterMessages" style="display: none;" dojoAttachPoint="messagesNode"></div>\r\n\t<span dojoAttachPoint="lastFocusNode" tabindex="0"></span>\r\n</div>\r\n',
classTag:"dojoxGrid",rowCount:5,keepRows:75,rowsPerPage:25,autoWidth:false,initialWidth:"",autoHeight:"",rowHeight:0,autoRender:true,defaultHeight:"15em",height:"",structure:null,elasticView:-1,singleClickEdit:false,selectionMode:"extended",rowSelector:"",columnReordering:false,headerMenu:null,placeholderLabel:"GridColumns",selectable:false,_click:null,loadingMessage:"<span class='dojoxGridLoading'>${loadingState}</span>",errorMessage:"<span class='dojoxGridError'>${errorState}</span>",noDataMessage:"",
escapeHTMLInData:true,formatterScope:null,editable:false,sortInfo:0,themeable:true,_placeholders:null,_layoutClass:dojox.grid._Layout,buildRendering:function(){this.inherited(arguments);if(!this.domNode.getAttribute("tabIndex"))this.domNode.tabIndex="0";this.createScroller();this.createLayout();this.createViews();this.createManagers();this.createSelection();this.connect(this.selection,"onSelected","onSelected");this.connect(this.selection,"onDeselected","onDeselected");this.connect(this.selection,
"onChanged","onSelectionChanged");dojox.html.metrics.initOnFontResize();this.connect(dojox.html.metrics,"onFontResize","textSizeChanged");dojox.grid.util.funnelEvents(this.domNode,this,"doKeyEvent",dojox.grid.util.keyEvents);if(this.selectionMode!="none")dojo.attr(this.domNode,"aria-multiselectable",this.selectionMode=="single"?"false":"true");dojo.addClass(this.domNode,this.classTag);if(!this.isLeftToRight())dojo.addClass(this.domNode,this.classTag+"Rtl")},postMixInProperties:function(){this.inherited(arguments);
var messages=dojo.i18n.getLocalization("dijit","loading",this.lang);this.loadingMessage=dojo.string.substitute(this.loadingMessage,messages);this.errorMessage=dojo.string.substitute(this.errorMessage,messages);if(this.srcNodeRef&&this.srcNodeRef.style.height)this.height=this.srcNodeRef.style.height;this._setAutoHeightAttr(this.autoHeight,true);this.lastScrollTop=this.scrollTop=0},postCreate:function(){this._placeholders=[];this._setHeaderMenuAttr(this.headerMenu);this._setStructureAttr(this.structure);
this._click=[];this.inherited(arguments);if(this.domNode&&this.autoWidth&&this.initialWidth)this.domNode.style.width=this.initialWidth;if(this.domNode&&!this.editable)dojo.attr(this.domNode,"aria-readonly","true")},destroy:function(){this.domNode.onReveal=null;this.domNode.onSizeChange=null;delete this._click;this.edit.destroy();delete this.edit;this.views.destroyViews();if(this.scroller){this.scroller.destroy();delete this.scroller}if(this.focus){this.focus.destroy();delete this.focus}if(this.headerMenu&&
this._placeholders.length){dojo.forEach(this._placeholders,function(p){p.unReplace(true)});this.headerMenu.unBindDomNode(this.viewsHeaderNode)}this.inherited(arguments)},_setAutoHeightAttr:function(ah,skipRender){if(typeof ah=="string")if(!ah||ah=="false")ah=false;else if(ah=="true")ah=true;else ah=window.parseInt(ah,10);if(typeof ah=="number"){if(isNaN(ah))ah=false;if(ah<0)ah=true;else if(ah===0)ah=false}this.autoHeight=ah;if(typeof ah=="boolean")this._autoHeight=ah;else if(typeof ah=="number")this._autoHeight=
ah>=this.get("rowCount");else this._autoHeight=false;if(this._started&&!skipRender)this.render()},_getRowCountAttr:function(){return this.updating&&this.invalidated&&this.invalidated.rowCount!=undefined?this.invalidated.rowCount:this.rowCount},textSizeChanged:function(){this.render()},sizeChange:function(){this.update()},createManagers:function(){this.rows=new dojox.grid._RowManager(this);this.focus=new dojox.grid._FocusManager(this);this.edit=new dojox.grid._EditManager(this)},createSelection:function(){this.selection=
new dojox.grid.Selection(this)},createScroller:function(){this.scroller=new dojox.grid._Scroller;this.scroller.grid=this;this.scroller.renderRow=dojo.hitch(this,"renderRow");this.scroller.removeRow=dojo.hitch(this,"rowRemoved")},createLayout:function(){this.layout=new this._layoutClass(this);this.connect(this.layout,"moveColumn","onMoveColumn")},onMoveColumn:function(){this.render()},onResizeColumn:function(cellIdx){},createViews:function(){this.views=new dojox.grid._ViewManager(this);this.views.createView=
dojo.hitch(this,"createView")},createView:function(inClass,idx){var c=dojo.getObject(inClass);var view=new c({grid:this,index:idx});this.viewsNode.appendChild(view.domNode);this.viewsHeaderNode.appendChild(view.headerNode);this.views.addView(view);dojo.attr(this.domNode,"align",dojo._isBodyLtr()?"left":"right");return view},buildViews:function(){for(var i=0,vs;vs=this.layout.structure[i];i++)this.createView(vs.type||dojox._scopeName+".grid._View",i).setStructure(vs);this.scroller.setContentNodes(this.views.getContentNodes())},
_setStructureAttr:function(structure){var s=structure;if(s&&dojo.isString(s)){dojo.deprecated("dojox.grid._Grid.set('structure', 'objVar')","use dojox.grid._Grid.set('structure', objVar) instead","2.0");s=dojo.getObject(s)}if(s)this.domNode.className=this.domNode.className.replace(/ (?:thumb|table)/,"")+" table";this.structure=s;if(!s)if(this.layout.structure)s=this.layout.structure;else return;this.views.destroyViews();if(s!==this.layout.structure)this.layout.setStructure(s);this._structureChanged()},
setStructure:function(inStructure){dojo.deprecated("dojox.grid._Grid.setStructure(obj)","use dojox.grid._Grid.set('structure', obj) instead.","2.0");this._setStructureAttr(inStructure)},detectRowOrThumbDimentions:function(){return{w:this.views.getViewContentRowWidth(this.scroller.firstVisibleRow),h:this.views.getViewContentRowHeight(this.scroller.firstVisibleRow),margins:this.views.getViewContentRowMargins(this.scroller.firstVisibleRow)}},findIndexesInBoxCoords:function(beginX,beginY,endX,endY){var boxDimentions=
this.detectRowOrThumbDimentions(),boxWidth=parseInt(boxDimentions.w),boxHeight=parseInt(boxDimentions.h),boxMargins=boxDimentions.margins;if(!boxWidth||!boxHeight)return false;var countInRow=1;var beginRow=Math.ceil(beginY/boxHeight)-(beginY%boxHeight>boxMargins.bottom?1:0),endRow=Math.floor(endY/boxHeight)+(endY%boxHeight>boxMargins.top?1:0),beginI=Math.ceil(beginX/boxWidth)-(beginX%boxWidth>boxMargins.right?1:0),endI=Math.floor(endX/boxWidth)+(endX%boxWidth>boxMargins.left?1:0),endI=endI<=countInRow?
endI:countInRow,indexes=[];for(var i=beginRow;i<endRow;i++){var rowIndex=i*countInRow;for(var j=beginI;j<endI;j++)if(this._by_idx[rowIndex+j])indexes.push(rowIndex+j)}return indexes},getColumnTogglingItems:function(){return dojo.map(this.layout.cells,function(cell){if(!cell.menuItems)cell.menuItems=[];var self=this;var item=new dijit.CheckedMenuItem({label:cell.name,checked:!cell.hidden,_gridCell:cell,onChange:function(checked){if(self.layout.setColumnVisibility(this._gridCell.index,checked)){var items=
this._gridCell.menuItems;if(items.length>1)dojo.forEach(items,function(item){if(item!==this)item.setAttribute("checked",checked)},this);checked=dojo.filter(self.layout.cells,function(c){if(c.menuItems.length>1)dojo.forEach(c.menuItems,"item.set('disabled', false);");else c.menuItems[0].set("disabled",false);return!c.hidden});if(checked.length==1)dojo.forEach(checked[0].menuItems,"item.set('disabled', true);")}},destroy:function(){var index=dojo.indexOf(this._gridCell.menuItems,this);this._gridCell.menuItems.splice(index,
1);delete this._gridCell;dijit.CheckedMenuItem.prototype.destroy.apply(this,arguments)}});cell.menuItems.push(item);return item},this)},_setHeaderMenuAttr:function(menu){if(this._placeholders&&this._placeholders.length){dojo.forEach(this._placeholders,function(p){p.unReplace(true)});this._placeholders=[]}if(this.headerMenu)this.headerMenu.unBindDomNode(this.viewsHeaderNode);this.headerMenu=menu;if(!menu)return;this.headerMenu.bindDomNode(this.viewsHeaderNode);if(this.headerMenu.getPlaceholders)this._placeholders=
this.headerMenu.getPlaceholders(this.placeholderLabel)},setHeaderMenu:function(menu){dojo.deprecated("dojox.grid._Grid.setHeaderMenu(obj)","use dojox.grid._Grid.set('headerMenu', obj) instead.","2.0");this._setHeaderMenuAttr(menu)},setupHeaderMenu:function(){if(this._placeholders&&this._placeholders.length)dojo.forEach(this._placeholders,function(p){if(p._replaced)p.unReplace(true);p.replace(this.getColumnTogglingItems())},this)},_fetch:function(start){this.setScrollTop(0)},getItem:function(inRowIndex){return null},
showMessage:function(message){if(message){this.messagesNode.innerHTML=message;this.messagesNode.style.display=""}else{this.messagesNode.innerHTML="";this.messagesNode.style.display="none"}},_structureChanged:function(){this.buildViews();if(this.autoRender&&this._started)this.render()},hasLayout:function(){return this.layout.cells.length},resize:function(changeSize,resultSize){this._pendingChangeSize=changeSize;this._pendingResultSize=resultSize;this.sizeChange()},_getPadBorder:function(){this._padBorder=
this._padBorder||dojo._getPadBorderExtents(this.domNode);return this._padBorder},_getHeaderHeight:function(){var vns=this.viewsHeaderNode.style,t=vns.display=="none"?0:this.views.measureHeader();vns.height=t+"px";this.views.normalizeHeaderNodeHeight();return t},_resize:function(changeSize,resultSize){changeSize=changeSize||this._pendingChangeSize;resultSize=resultSize||this._pendingResultSize;delete this._pendingChangeSize;delete this._pendingResultSize;if(!this.domNode)return;var pn=this.domNode.parentNode;
if(!pn||pn.nodeType!=1||!this.hasLayout()||pn.style.visibility=="hidden"||pn.style.display=="none")return;var padBorder=this._getPadBorder();var hh=undefined;var h;if(this._autoHeight)this.domNode.style.height="auto";else if(typeof this.autoHeight=="number"){h=hh=this._getHeaderHeight();h+=this.scroller.averageRowHeight*this.autoHeight;this.domNode.style.height=h+"px"}else if(this.domNode.clientHeight<=padBorder.h)if(pn==document.body)this.domNode.style.height=this.defaultHeight;else if(this.height)this.domNode.style.height=
this.height;else this.fitTo="parent";if(resultSize)changeSize=resultSize;if(changeSize){dojo.marginBox(this.domNode,changeSize);this.height=this.domNode.style.height;delete this.fitTo}else if(this.fitTo=="parent"){h=this._parentContentBoxHeight=this._parentContentBoxHeight||dojo._getContentBox(pn).h;this.domNode.style.height=Math.max(0,h)+"px"}var hasFlex=dojo.some(this.views.views,function(v){return v.flexCells});if(!this._autoHeight&&(h||dojo._getContentBox(this.domNode).h)===0)this.viewsHeaderNode.style.display=
"none";else{this.viewsHeaderNode.style.display="block";if(!hasFlex&&hh===undefined)hh=this._getHeaderHeight()}if(hasFlex)hh=undefined;this.adaptWidth();this.adaptHeight(hh);this.postresize()},adaptWidth:function(){var doAutoWidth=!this.initialWidth&&this.autoWidth;var w=doAutoWidth?0:this.domNode.clientWidth||this.domNode.offsetWidth-this._getPadBorder().w,vw=this.views.arrange(1,w);this.views.onEach("adaptWidth");if(doAutoWidth)this.domNode.style.width=vw+"px"},adaptHeight:function(inHeaderHeight){var t=
inHeaderHeight===undefined?this._getHeaderHeight():inHeaderHeight;var h=this._autoHeight?-1:Math.max(this.domNode.clientHeight-t,0)||0;this.views.onEach("setSize",[0,h]);this.views.onEach("adaptHeight");if(!this._autoHeight){var numScroll=0,numNoScroll=0;var noScrolls=dojo.filter(this.views.views,function(v){var has=v.hasHScrollbar();if(has)numScroll++;else numNoScroll++;return!has});if(numScroll>0&&numNoScroll>0)dojo.forEach(noScrolls,function(v){v.adaptHeight(true)})}if(this.autoHeight===true||
h!=-1||typeof this.autoHeight=="number"&&this.autoHeight>=this.get("rowCount"))this.scroller.windowHeight=h;else this.scroller.windowHeight=Math.max(this.domNode.clientHeight-t,0)},startup:function(){if(this._started)return;this.inherited(arguments);if(this.autoRender)this.render()},render:function(){if(!this.domNode)return;if(!this._started)return;if(!this.hasLayout()){this.scroller.init(0,this.keepRows,this.rowsPerPage);return}this.update=this.defaultUpdate;this._render()},_render:function(){this.scroller.init(this.get("rowCount"),
this.keepRows,this.rowsPerPage);this.prerender();this.setScrollTop(0);this.postrender()},prerender:function(){this.keepRows=this._autoHeight?0:this.keepRows;this.scroller.setKeepInfo(this.keepRows);this.views.render();this._resize()},postrender:function(){this.postresize();this.focus.initFocusView();dojo.setSelectable(this.domNode,this.selectable)},postresize:function(){if(this._autoHeight){var size=Math.max(this.views.measureContent())+"px";this.viewsNode.style.height=size}},renderRow:function(inRowIndex,
inNodes){this.views.renderRow(inRowIndex,inNodes,this._skipRowRenormalize)},rowRemoved:function(inRowIndex){this.views.rowRemoved(inRowIndex)},invalidated:null,updating:false,beginUpdate:function(){this.invalidated=[];this.updating=true},endUpdate:function(){this.updating=false;var i=this.invalidated,r;if(i.all)this.update();else if(i.rowCount!=undefined)this.updateRowCount(i.rowCount);else for(r in i)this.updateRow(Number(r));this.invalidated=[]},defaultUpdate:function(){if(!this.domNode)return;
if(this.updating){this.invalidated.all=true;return}this.lastScrollTop=this.scrollTop;this.prerender();this.scroller.invalidateNodes();this.setScrollTop(this.lastScrollTop);this.postrender()},update:function(){this.render()},updateRow:function(inRowIndex){inRowIndex=Number(inRowIndex);if(this.updating)this.invalidated[inRowIndex]=true;else{this.views.updateRow(inRowIndex);this.scroller.rowHeightChanged(inRowIndex)}},updateRows:function(startIndex,howMany){startIndex=Number(startIndex);howMany=Number(howMany);
var i;if(this.updating)for(i=0;i<howMany;i++)this.invalidated[i+startIndex]=true;else{for(i=0;i<howMany;i++)this.views.updateRow(i+startIndex,this._skipRowRenormalize);this.scroller.rowHeightChanged(startIndex)}},updateRowCount:function(inRowCount){if(this.updating)this.invalidated.rowCount=inRowCount;else{this.rowCount=inRowCount;this._setAutoHeightAttr(this.autoHeight,true);if(this.layout.cells.length)this.scroller.updateRowCount(inRowCount);this._resize();if(this.layout.cells.length)this.setScrollTop(this.scrollTop)}},
updateRowStyles:function(inRowIndex){this.views.updateRowStyles(inRowIndex)},getRowNode:function(inRowIndex){if(this.focus.focusView&&!(this.focus.focusView instanceof dojox.grid._RowSelector))return this.focus.focusView.rowNodes[inRowIndex];else for(var i=0,cView;cView=this.views.views[i];i++)if(!(cView instanceof dojox.grid._RowSelector))return cView.rowNodes[inRowIndex];return null},rowHeightChanged:function(inRowIndex){this.views.renormalizeRow(inRowIndex);this.scroller.rowHeightChanged(inRowIndex)},
fastScroll:true,delayScroll:false,scrollRedrawThreshold:dojo.isIE?100:50,scrollTo:function(inTop){if(!this.fastScroll){this.setScrollTop(inTop);return}var delta=Math.abs(this.lastScrollTop-inTop);this.lastScrollTop=inTop;if(delta>this.scrollRedrawThreshold||this.delayScroll){this.delayScroll=true;this.scrollTop=inTop;this.views.setScrollTop(inTop);if(this._pendingScroll)window.clearTimeout(this._pendingScroll);var _this=this;this._pendingScroll=window.setTimeout(function(){delete _this._pendingScroll;
_this.finishScrollJob()},200)}else this.setScrollTop(inTop)},finishScrollJob:function(){this.delayScroll=false;this.setScrollTop(this.scrollTop)},setScrollTop:function(inTop){this.scroller.scroll(this.views.setScrollTop(inTop))},setScrollLeft:function(inLeft){this.views.setScrollLeft(inLeft)},scrollToRow:function(inRowIndex){this.setScrollTop(this.scroller.findScrollTop(inRowIndex)+1)},styleRowNode:function(inRowIndex,inRowNode){if(inRowNode)this.rows.styleRowNode(inRowIndex,inRowNode)},_mouseOut:function(e){this.rows.setOverRow(-2)},
getCell:function(inIndex){return this.layout.cells[inIndex]},setCellWidth:function(inIndex,inUnitWidth){this.getCell(inIndex).unitWidth=inUnitWidth},getCellName:function(inCell){return"Cell "+inCell.index},canSort:function(inSortInfo){},sort:function(){},getSortAsc:function(inSortInfo){inSortInfo=inSortInfo==undefined?this.sortInfo:inSortInfo;return Boolean(inSortInfo>0)},getSortIndex:function(inSortInfo){inSortInfo=inSortInfo==undefined?this.sortInfo:inSortInfo;return Math.abs(inSortInfo)-1},setSortIndex:function(inIndex,
inAsc){var si=inIndex+1;if(inAsc!=undefined)si*=inAsc?1:-1;else if(this.getSortIndex()==inIndex)si=-this.sortInfo;this.setSortInfo(si)},setSortInfo:function(inSortInfo){if(this.canSort(inSortInfo)){this.sortInfo=inSortInfo;this.sort();this.update()}},doKeyEvent:function(e){e.dispatch="do"+e.type;this.onKeyEvent(e)},_dispatch:function(m,e){if(m in this)return this[m](e);return false},dispatchKeyEvent:function(e){this._dispatch(e.dispatch,e)},dispatchContentEvent:function(e){this.edit.dispatchEvent(e)||
e.sourceView.dispatchContentEvent(e)||this._dispatch(e.dispatch,e)},dispatchHeaderEvent:function(e){e.sourceView.dispatchHeaderEvent(e)||this._dispatch("doheader"+e.type,e)},dokeydown:function(e){this.onKeyDown(e)},doclick:function(e){if(e.cellNode)this.onCellClick(e);else this.onRowClick(e)},dodblclick:function(e){if(e.cellNode)this.onCellDblClick(e);else this.onRowDblClick(e)},docontextmenu:function(e){if(e.cellNode)this.onCellContextMenu(e);else this.onRowContextMenu(e)},doheaderclick:function(e){if(e.cellNode)this.onHeaderCellClick(e);
else this.onHeaderClick(e)},doheaderdblclick:function(e){if(e.cellNode)this.onHeaderCellDblClick(e);else this.onHeaderDblClick(e)},doheadercontextmenu:function(e){if(e.cellNode)this.onHeaderCellContextMenu(e);else this.onHeaderContextMenu(e)},doStartEdit:function(inCell,inRowIndex){this.onStartEdit(inCell,inRowIndex)},doApplyCellEdit:function(inValue,inRowIndex,inFieldIndex){this.onApplyCellEdit(inValue,inRowIndex,inFieldIndex)},doCancelEdit:function(inRowIndex){this.onCancelEdit(inRowIndex)},doApplyEdit:function(inRowIndex){this.onApplyEdit(inRowIndex)},
addRow:function(){this.updateRowCount(this.get("rowCount")+1)},removeSelectedRows:function(){if(this.allItemsSelected)this.updateRowCount(0);else this.updateRowCount(Math.max(0,this.get("rowCount")-this.selection.getSelected().length));this.selection.clear()}});dojox.grid._Grid.markupFactory=function(props,node,ctor,cellFunc){var d=dojo;var widthFromAttr=function(n){var w=d.attr(n,"width")||"auto";if(w!="auto"&&w.slice(-2)!="em"&&w.slice(-1)!="%")w=parseInt(w,10)+"px";return w};if(!props.structure&&
node.nodeName.toLowerCase()=="table"){props.structure=d.query("> colgroup",node).map(function(cg){var sv=d.attr(cg,"span");var v={noscroll:d.attr(cg,"noscroll")=="true"?true:false,__span:!!sv?parseInt(sv,10):1,cells:[]};if(d.hasAttr(cg,"width"))v.width=widthFromAttr(cg);return v});if(!props.structure.length)props.structure.push({__span:Infinity,cells:[]});d.query("thead > tr",node).forEach(function(tr,tr_idx){var cellCount=0;var viewIdx=0;var lastViewIdx;var cView=null;d.query("> th",tr).map(function(th){if(!cView){lastViewIdx=
0;cView=props.structure[0]}else if(cellCount>=lastViewIdx+cView.__span){viewIdx++;lastViewIdx+=cView.__span;var lastView=cView;cView=props.structure[viewIdx]}var cell={name:d.trim(d.attr(th,"name")||th.innerHTML),colSpan:parseInt(d.attr(th,"colspan")||1,10),type:d.trim(d.attr(th,"cellType")||""),id:d.trim(d.attr(th,"id")||"")};cellCount+=cell.colSpan;var rowSpan=d.attr(th,"rowspan");if(rowSpan)cell.rowSpan=rowSpan;if(d.hasAttr(th,"width"))cell.width=widthFromAttr(th);if(d.hasAttr(th,"relWidth"))cell.relWidth=
window.parseInt(dojo.attr(th,"relWidth"),10);if(d.hasAttr(th,"hidden"))cell.hidden=d.attr(th,"hidden")=="true"||d.attr(th,"hidden")===true;if(cellFunc)cellFunc(th,cell);cell.type=cell.type?dojo.getObject(cell.type):dojox.grid.cells.Cell;if(cell.type&&cell.type.markupFactory)cell.type.markupFactory(th,cell);if(!cView.cells[tr_idx])cView.cells[tr_idx]=[];cView.cells[tr_idx].push(cell)})})}return new ctor(props,node)}})()}if(!dojo._hasResource["dojox.grid.DataSelection"]){dojo._hasResource["dojox.grid.DataSelection"]=
true;dojo.provide("dojox.grid.DataSelection");dojo.declare("dojox.grid.DataSelection",dojox.grid.Selection,{getFirstSelected:function(){var idx=dojox.grid.Selection.prototype.getFirstSelected.call(this);if(idx==-1)return null;return this.grid.getItem(idx)},getNextSelected:function(inPrev){var old_idx=this.grid.getItemIndex(inPrev);var idx=dojox.grid.Selection.prototype.getNextSelected.call(this,old_idx);if(idx==-1)return null;return this.grid.getItem(idx)},getSelected:function(){var result=[],selected=
this.selected,sortedItems=[];var fx=function(items){sortedItems=items};this.grid.store.fetch({query:this.query,queryOptions:this.queryOptions,sort:this.grid.getSortProps(),onComplete:fx});for(var i in selected){if(!selected.hasOwnProperty(i))continue;result.push(sortedItems[i])}return result},addToSelection:function(inItemOrIndex){if(this.mode=="none")return;var idx=null;if(typeof inItemOrIndex=="number"||typeof inItemOrIndex=="string")idx=inItemOrIndex;else idx=this.grid.getItemIndex(inItemOrIndex);
if(idx==-1)return null;dojox.grid.Selection.prototype.addToSelection.call(this,idx)},deselect:function(inItemOrIndex){if(this.mode=="none")return;var idx=null;if(typeof inItemOrIndex=="number"||typeof inItemOrIndex=="string")idx=inItemOrIndex;else idx=this.grid.getItemIndex(inItemOrIndex);dojox.grid.Selection.prototype.deselect.call(this,idx)},deselectAll:function(inItemOrIndex){var idx=null;if(inItemOrIndex||typeof inItemOrIndex=="number"){if(typeof inItemOrIndex=="number"||typeof inItemOrIndex==
"string")idx=inItemOrIndex;else idx=this.grid.getItemIndex(inItemOrIndex);dojox.grid.Selection.prototype.deselectAll.call(this,idx)}else this.inherited(arguments)}})}if(!dojo._hasResource["dojox.grid.DataGrid"]){dojo._hasResource["dojox.grid.DataGrid"]=true;dojo.provide("dojox.grid.DataGrid");dojo.declare("dojox.grid.DataGrid",dojox.grid._Grid,{store:null,query:null,queryOptions:null,fetchText:"...",sortFields:null,updateDelay:1,items:null,_store_connects:null,_by_idty:null,_by_idx:null,_cache:null,
_pages:null,_pending_requests:null,_bop:-1,_eop:-1,_requests:0,rowCount:0,_isLoaded:false,_isLoading:false,postCreate:function(){this._pages=[];this._store_connects=[];this._by_idty={};this._by_idx=[];this._cache=[];this._pending_requests={};this._setStore(this.store);this.inherited(arguments)},createSelection:function(){this.selection=new dojox.grid.DataSelection(this)},get:function(inRowIndex,inItem){if(inItem&&this.field=="_item"&&!this.fields)return inItem;else if(inItem&&this.fields){var ret=
[];var s=this.grid.store;dojo.forEach(this.fields,function(f){ret=ret.concat(s.getValues(inItem,f))});return ret}else if(!inItem&&typeof inRowIndex==="string")return this.inherited(arguments);return!inItem?this.defaultValue:!this.field?this.value:this.field=="_item"?inItem:this.grid.store.getValue(inItem,this.field)},_checkUpdateStatus:function(){if(this.updateDelay>0){var iStarted=false;if(this._endUpdateDelay){clearTimeout(this._endUpdateDelay);delete this._endUpdateDelay;iStarted=true}if(!this.updating){this.beginUpdate();
iStarted=true}if(iStarted){var _this=this;this._endUpdateDelay=setTimeout(function(){delete _this._endUpdateDelay;_this.endUpdate()},this.updateDelay)}}},_onSet:function(item,attribute,oldValue,newValue){this._checkUpdateStatus();var idx=this.getItemIndex(item);if(idx>-1)this.updateRow(idx)},_createItem:function(item,index){var idty=this._hasIdentity?this.store.getIdentity(item):dojo.toJson(this.query)+":idx:"+index+":sort:"+dojo.toJson(this.getSortProps());var o=this._by_idty[idty]={idty:idty,item:item};
return o},_addItem:function(item,index,noUpdate){this._by_idx[index]=this._createItem(item,index);if(!noUpdate)this.updateRow(index)},_onNew:function(item,parentInfo){this._checkUpdateStatus();var rowCount=this.get("rowCount");this._addingItem=true;this.updateRowCount(rowCount+1);this._addingItem=false;this._addItem(item,rowCount);this.showMessage()},_onDelete:function(item){this._checkUpdateStatus();var idx=this._getItemIndex(item,true);if(idx>=0){this._pages=[];this._bop=-1;this._eop=-1;var o=this._by_idx[idx];
this._by_idx.splice(idx,1);delete this._by_idty[o.idty];this.updateRowCount(this.get("rowCount")-1);if(this.get("rowCount")===0)this.showMessage(this.noDataMessage)}},_onRevert:function(){this._refresh()},setStore:function(store,query,queryOptions){this._setQuery(query,queryOptions);this._setStore(store);this._refresh(true)},setQuery:function(query,queryOptions){this._setQuery(query,queryOptions);this._refresh(true)},setItems:function(items){this.items=items;this._setStore(this.store);this._refresh(true)},
_setQuery:function(query,queryOptions){this.query=query;this.queryOptions=queryOptions||this.queryOptions},_setStore:function(store){if(this.store&&this._store_connects)dojo.forEach(this._store_connects,this.disconnect,this);this.store=store;if(this.store){var f=this.store.getFeatures();var h=[];this._canEdit=!!f["dojo.data.api.Write"]&&!!f["dojo.data.api.Identity"];this._hasIdentity=!!f["dojo.data.api.Identity"];if(!!f["dojo.data.api.Notification"]&&!this.items){h.push(this.connect(this.store,"onSet",
"_onSet"));h.push(this.connect(this.store,"onNew","_onNew"));h.push(this.connect(this.store,"onDelete","_onDelete"))}if(this._canEdit)h.push(this.connect(this.store,"revert","_onRevert"));this._store_connects=h}},_onFetchBegin:function(size,req){if(!this.scroller)return;if(this.rowCount!=size)if(req.isRender){this.scroller.init(size,this.keepRows,this.rowsPerPage);this.rowCount=size;this._setAutoHeightAttr(this.autoHeight,true);this._skipRowRenormalize=true;this.prerender();this._skipRowRenormalize=
false}else this.updateRowCount(size);if(!size){this.views.render();this._resize();this.showMessage(this.noDataMessage);this.focus.initFocusView()}else this.showMessage()},_onFetchComplete:function(items,req){if(!this.scroller)return;if(items&&items.length>0){dojo.forEach(items,function(item,idx){this._addItem(item,req.start+idx,true)},this);this.updateRows(req.start,items.length);if(req.isRender){this.setScrollTop(0);this.postrender()}else if(this._lastScrollTop)this.setScrollTop(this._lastScrollTop)}delete this._lastScrollTop;
if(!this._isLoaded){this._isLoading=false;this._isLoaded=true}this._pending_requests[req.start]=false},_onFetchError:function(err,req){console.log(err);delete this._lastScrollTop;if(!this._isLoaded){this._isLoading=false;this._isLoaded=true;this.showMessage(this.errorMessage)}this._pending_requests[req.start]=false;this.onFetchError(err,req)},onFetchError:function(err,req){},_fetch:function(start,isRender){start=start||0;if(this.store&&!this._pending_requests[start]){if(!this._isLoaded&&!this._isLoading){this._isLoading=
true;this.showMessage(this.loadingMessage)}this._pending_requests[start]=true;try{if(this.items){var items=this.items;var store=this.store;this.rowsPerPage=items.length;var req={start:start,count:this.rowsPerPage,isRender:isRender};this._onFetchBegin(items.length,req);var waitCount=0;dojo.forEach(items,function(i){if(!store.isItemLoaded(i))waitCount++});if(waitCount===0)this._onFetchComplete(items,req);else{var onItem=function(item){waitCount--;if(waitCount===0)this._onFetchComplete(items,req)};dojo.forEach(items,
function(i){if(!store.isItemLoaded(i))store.loadItem({item:i,onItem:onItem,scope:this})},this)}}else this.store.fetch({start:start,count:this.rowsPerPage,query:this.query,sort:this.getSortProps(),queryOptions:this.queryOptions,isRender:isRender,onBegin:dojo.hitch(this,"_onFetchBegin"),onComplete:dojo.hitch(this,"_onFetchComplete"),onError:dojo.hitch(this,"_onFetchError")})}catch(e){this._onFetchError(e,{start:start,count:this.rowsPerPage})}}},_clearData:function(){this.updateRowCount(0);this._by_idty=
{};this._by_idx=[];this._pages=[];this._bop=this._eop=-1;this._isLoaded=false;this._isLoading=false},getItem:function(idx){var data=this._by_idx[idx];if(!data||data&&!data.item){this._preparePage(idx);return null}return data.item},getStoreItem:function(idx){return this.store.getItem(idx)},getItemIndex:function(item){return this._getItemIndex(item,false)},_getItemIndex:function(item,isDeleted){if(!isDeleted&&!this.store.isItem(item))return-1;var idty=this._hasIdentity?this.store.getIdentity(item):
null;for(var i=0,l=this._by_idx.length;i<l;i++){var d=this._by_idx[i];if(d&&(idty&&d.idty==idty||d.item===item))return i}return-1},filter:function(query,reRender){this.query=query;if(reRender)this._clearData();this._fetch()},_getItemAttr:function(idx,attr){var item=this.getItem(idx);return!item?this.fetchText:this.store.getValue(item,attr)},_render:function(){if(this.domNode.parentNode){this.scroller.init(this.get("rowCount"),this.keepRows,this.rowsPerPage);this.prerender();this._fetch(0,true)}},
_requestsPending:function(inRowIndex){return this._pending_requests[inRowIndex]},_rowToPage:function(inRowIndex){return this.rowsPerPage?Math.floor(inRowIndex/this.rowsPerPage):inRowIndex},_pageToRow:function(inPageIndex){return this.rowsPerPage?this.rowsPerPage*inPageIndex:inPageIndex},_preparePage:function(inRowIndex){if((inRowIndex<this._bop||inRowIndex>=this._eop)&&!this._addingItem){var pageIndex=this._rowToPage(inRowIndex);this._needPage(pageIndex);this._bop=pageIndex*this.rowsPerPage;this._eop=
this._bop+(this.rowsPerPage||this.get("rowCount"))}},_needPage:function(inPageIndex){if(!this._pages[inPageIndex]){this._pages[inPageIndex]=true;this._requestPage(inPageIndex)}},_requestPage:function(inPageIndex){var row=this._pageToRow(inPageIndex);var count=Math.min(this.rowsPerPage,this.get("rowCount")-row);if(count>0){this._requests++;if(!this._requestsPending(row))setTimeout(dojo.hitch(this,"_fetch",row,false),1)}},getCellName:function(inCell){return inCell.field},_refresh:function(isRender){this._clearData();
this._fetch(0,isRender)},sort:function(){this.edit.apply();this._lastScrollTop=this.scrollTop;this._refresh()},canSort:function(){return!this._isLoading},getSortProps:function(){var c=this.getCell(this.getSortIndex());if(!c){if(this.sortFields)return this.sortFields;return null}else{var desc=c["sortDesc"];var si=!(this.sortInfo>0);if(typeof desc=="undefined")desc=si;else desc=si?!desc:desc;return[{attribute:c.field,descending:desc}]}},styleRowState:function(inRow){if(this.store&&this.store.getState){var states=
this.store.getState(inRow.index),c="";for(var i=0,ss=["inflight","error","inserting"],s;s=ss[i];i++)if(states[s]){c=" dojoxGridRow-"+s;break}inRow.customClasses+=c}},onStyleRow:function(inRow){this.styleRowState(inRow);this.inherited(arguments)},canEdit:function(inCell,inRowIndex){return this._canEdit},_copyAttr:function(idx,attr){var row={};var backstop={};var src=this.getItem(idx);return this.store.getValue(src,attr)},doStartEdit:function(inCell,inRowIndex){if(!this._cache[inRowIndex])this._cache[inRowIndex]=
this._copyAttr(inRowIndex,inCell.field);this.onStartEdit(inCell,inRowIndex)},doApplyCellEdit:function(inValue,inRowIndex,inAttrName){this.store.fetchItemByIdentity({identity:this._by_idx[inRowIndex].idty,onItem:dojo.hitch(this,function(item){var oldValue=this.store.getValue(item,inAttrName);if(typeof oldValue=="number")inValue=isNaN(inValue)?inValue:parseFloat(inValue);else if(typeof oldValue=="boolean")inValue=inValue=="true"?true:inValue=="false"?false:inValue;else if(oldValue instanceof Date){var asDate=
new Date(inValue);inValue=isNaN(asDate.getTime())?inValue:asDate}this.store.setValue(item,inAttrName,inValue);this.onApplyCellEdit(inValue,inRowIndex,inAttrName)})})},doCancelEdit:function(inRowIndex){var cache=this._cache[inRowIndex];if(cache){this.updateRow(inRowIndex);delete this._cache[inRowIndex]}this.onCancelEdit.apply(this,arguments)},doApplyEdit:function(inRowIndex,inDataAttr){var cache=this._cache[inRowIndex];this.onApplyEdit(inRowIndex)},removeSelectedRows:function(){if(this._canEdit){this.edit.apply();
var fx=dojo.hitch(this,function(items){if(items.length){dojo.forEach(items,this.store.deleteItem,this.store);this.selection.clear()}});if(this.allItemsSelected)this.store.fetch({query:this.query,queryOptions:this.queryOptions,onComplete:fx});else fx(this.selection.getSelected())}}});dojox.grid.DataGrid.cell_markupFactory=function(cellFunc,node,cellDef){var field=dojo.trim(dojo.attr(node,"field")||"");if(field)cellDef.field=field;cellDef.field=cellDef.field||cellDef.name;var fields=dojo.trim(dojo.attr(node,
"fields")||"");if(fields)cellDef.fields=fields.split(",");if(cellFunc)cellFunc(node,cellDef)};dojox.grid.DataGrid.markupFactory=function(props,node,ctor,cellFunc){return dojox.grid._Grid.markupFactory(props,node,ctor,dojo.partial(dojox.grid.DataGrid.cell_markupFactory,cellFunc))}}if(!dojo._hasResource["AjaxFileBrowser.Control"]){dojo._hasResource["AjaxFileBrowser.Control"]=true;dojo.provide("AjaxFileBrowser.Control");dojo.declare("AjaxFileBrowser.Control",[dijit._Widget],{constructor:function(oData,
oElement){var oEl=document.createElement("DIV");if(oData.id)oEl.setAttribute("id",oData.id);oElement.parentNode.replaceChild(oEl,oElement);this._skipNodeCache=true;new ITHit.WebDAV.Client.AjaxFileBrowser.Controller(oEl,oData.webdavserverpath,oData.style)}})}if(!dojo._hasResource["dijit.layout.SplitContainer"]){dojo._hasResource["dijit.layout.SplitContainer"]=true;dojo.provide("dijit.layout.SplitContainer");dojo.declare("dijit.layout.SplitContainer",dijit.layout._LayoutWidget,{constructor:function(){dojo.deprecated("dijit.layout.SplitContainer is deprecated",
"use BorderContainer with splitter instead",2)},activeSizing:false,sizerWidth:7,orientation:"horizontal",persist:true,baseClass:"dijitSplitContainer",postMixInProperties:function(){this.inherited("postMixInProperties",arguments);this.isHorizontal=this.orientation=="horizontal"},postCreate:function(){this.inherited(arguments);this.sizers=[];if(dojo.isMozilla)this.domNode.style.overflow="-moz-scrollbars-none";if(typeof this.sizerWidth=="object")try{this.sizerWidth=parseInt(this.sizerWidth.toString())}catch(e){this.sizerWidth=
7}var sizer=dojo.doc.createElement("div");this.virtualSizer=sizer;sizer.style.position="relative";sizer.style.zIndex=10;sizer.className=this.isHorizontal?"dijitSplitContainerVirtualSizerH":"dijitSplitContainerVirtualSizerV";this.domNode.appendChild(sizer);dojo.setSelectable(sizer,false)},destroy:function(){delete this.virtualSizer;dojo.forEach(this._ownconnects,dojo.disconnect);this.inherited(arguments)},startup:function(){if(this._started)return;dojo.forEach(this.getChildren(),function(child,i,children){this._setupChild(child);
if(i<children.length-1)this._addSizer()},this);if(this.persist)this._restoreState();this.inherited(arguments)},_setupChild:function(child){this.inherited(arguments);child.domNode.style.position="absolute";dojo.addClass(child.domNode,"dijitSplitPane")},_onSizerMouseDown:function(e){if(e.target.id){for(var i=0;i<this.sizers.length;i++)if(this.sizers[i].id==e.target.id)break;if(i<this.sizers.length)this.beginSizing(e,i)}},_addSizer:function(index){index=index===undefined?this.sizers.length:index;var sizer=
dojo.doc.createElement("div");sizer.id=dijit.getUniqueId("dijit_layout_SplitterContainer_Splitter");this.sizers.splice(index,0,sizer);this.domNode.appendChild(sizer);sizer.className=this.isHorizontal?"dijitSplitContainerSizerH":"dijitSplitContainerSizerV";var thumb=dojo.doc.createElement("div");thumb.className="thumb";sizer.appendChild(thumb);this.connect(sizer,"onmousedown","_onSizerMouseDown");dojo.setSelectable(sizer,false)},removeChild:function(widget){if(this.sizers.length){var i=dojo.indexOf(this.getChildren(),
widget);if(i!=-1){if(i==this.sizers.length)i--;dojo.destroy(this.sizers[i]);this.sizers.splice(i,1)}}this.inherited(arguments);if(this._started)this.layout()},addChild:function(child,insertIndex){this.inherited(arguments);if(this._started){var children=this.getChildren();if(children.length>1)this._addSizer(insertIndex);this.layout()}},layout:function(){this.paneWidth=this._contentBox.w;this.paneHeight=this._contentBox.h;var children=this.getChildren();if(!children.length)return;var space=this.isHorizontal?
this.paneWidth:this.paneHeight;if(children.length>1)space-=this.sizerWidth*(children.length-1);var outOf=0;dojo.forEach(children,function(child){outOf+=child.sizeShare});var pixPerUnit=space/outOf;var totalSize=0;dojo.forEach(children.slice(0,children.length-1),function(child){var size=Math.round(pixPerUnit*child.sizeShare);child.sizeActual=size;totalSize+=size});children[children.length-1].sizeActual=space-totalSize;this._checkSizes();var pos=0;var size=children[0].sizeActual;this._movePanel(children[0],
pos,size);children[0].position=pos;pos+=size;if(!this.sizers)return;dojo.some(children.slice(1),function(child,i){if(!this.sizers[i])return true;this._moveSlider(this.sizers[i],pos,this.sizerWidth);this.sizers[i].position=pos;pos+=this.sizerWidth;size=child.sizeActual;this._movePanel(child,pos,size);child.position=pos;pos+=size},this)},_movePanel:function(panel,pos,size){if(this.isHorizontal){panel.domNode.style.left=pos+"px";panel.domNode.style.top=0;var box={w:size,h:this.paneHeight};if(panel.resize)panel.resize(box);
else dojo.marginBox(panel.domNode,box)}else{panel.domNode.style.left=0;panel.domNode.style.top=pos+"px";var box={w:this.paneWidth,h:size};if(panel.resize)panel.resize(box);else dojo.marginBox(panel.domNode,box)}},_moveSlider:function(slider,pos,size){if(this.isHorizontal){slider.style.left=pos+"px";slider.style.top=0;dojo.marginBox(slider,{w:size,h:this.paneHeight})}else{slider.style.left=0;slider.style.top=pos+"px";dojo.marginBox(slider,{w:this.paneWidth,h:size})}},_growPane:function(growth,pane){if(growth>
0)if(pane.sizeActual>pane.sizeMin)if(pane.sizeActual-pane.sizeMin>growth){pane.sizeActual=pane.sizeActual-growth;growth=0}else{growth-=pane.sizeActual-pane.sizeMin;pane.sizeActual=pane.sizeMin}return growth},_checkSizes:function(){var totalMinSize=0;var totalSize=0;var children=this.getChildren();dojo.forEach(children,function(child){totalSize+=child.sizeActual;totalMinSize+=child.sizeMin});if(totalMinSize<=totalSize){var growth=0;dojo.forEach(children,function(child){if(child.sizeActual<child.sizeMin){growth+=
child.sizeMin-child.sizeActual;child.sizeActual=child.sizeMin}});if(growth>0){var list=this.isDraggingLeft?children.reverse():children;dojo.forEach(list,function(child){growth=this._growPane(growth,child)},this)}}else dojo.forEach(children,function(child){child.sizeActual=Math.round(totalSize*(child.sizeMin/totalMinSize))})},beginSizing:function(e,i){var children=this.getChildren();this.paneBefore=children[i];this.paneAfter=children[i+1];this.isSizing=true;this.sizingSplitter=this.sizers[i];if(!this.cover)this.cover=
dojo.create("div",{style:{position:"absolute",zIndex:5,top:0,left:0,width:"100%",height:"100%"}},this.domNode);else this.cover.style.zIndex=5;this.sizingSplitter.style.zIndex=6;this.originPos=dojo.position(children[0].domNode,true);var clickX=0,clickY=0;if((e.clientX||e.clientY)&&document.body&&document.body.scrollLeft!=null){clickX=e.clientX+document.body.scrollLeft;clickY=e.clientY+document.body.scrollTop}else if(e.pageX||e.pageY){clickX=e.pageX;clickY=e.pageY}var container=this.containerNode.parentNode.parentNode.parentNode;
var splittedArea=this.containerNode;if(!container)throw new Error("Ajax browser container is missing");if(this.isHorizontal){var pageCoordinate=clickX;this.originPos=this.originPos.x;this.containerOffset=container.offsetLeft;this.splittedAreaOffset=splittedArea.offsetLeft}else{var pageCoordinate=clickY;this.originPos=this.originPos.y;this.containerOffset=container.offsetTop;this.splittedAreaOffset=splittedArea.offsetTop}this.startPoint=this.lastPoint=pageCoordinate;this.dragOffset=this.lastPoint-
this.paneBefore.sizeActual-this.originPos-this.paneBefore.position;if(!this.activeSizing)this._showSizingLine();this._ownconnects=[];this._ownconnects.push(dojo.connect(dojo.doc.documentElement,"onmousemove",this,"changeSizing"));this._ownconnects.push(dojo.connect(dojo.doc.documentElement,"onmouseup",this,"endSizing"));dojo.stopEvent(e)},changeSizing:function(e){if(!this.isSizing)return;this.lastPoint=this.isHorizontal?e.pageX:e.pageY;this.movePoint();if(this.activeSizing)this._updateSize();else this._moveSizingLine();
dojo.stopEvent(e)},endSizing:function(e){if(!this.isSizing)return;if(this.cover)this.cover.style.zIndex=-1;if(!this.activeSizing)this._hideSizingLine();this._updateSize();this.isSizing=false;if(this.persist)this._saveState(this);dojo.forEach(this._ownconnects,dojo.disconnect)},movePoint:function(){var p=this.lastPoint-this.containerOffset;var a=p-this.dragOffset;a=this.legaliseSplitPoint(a);p=a+this.dragOffset;this.lastPoint=p+this.containerOffset},legaliseSplitPoint:function(a){this.isDraggingLeft=
!!(a>0);if(!this.activeSizing){var min=this.splittedAreaOffset+this.paneBefore.position+this.paneBefore.sizeMin;if(a<min)a=min;var max=this.splittedAreaOffset+this.paneAfter.position+this.paneAfter.sizeActual-(this.sizerWidth+this.paneAfter.sizeMin);if(a>max)a=max}this._checkSizes();return a},_updateSize:function(){var pos=this.lastPoint-this.dragOffset-this.originPos;var start_region=this.paneBefore.position;var end_region=this.paneAfter.position+this.paneAfter.sizeActual;this.paneBefore.sizeActual=
pos-start_region;this.paneAfter.position=pos+this.sizerWidth;this.paneAfter.sizeActual=end_region-this.paneAfter.position;dojo.forEach(this.getChildren(),function(child){child.sizeShare=child.sizeActual});if(this._started)this.layout()},_showSizingLine:function(){this._moveSizingLine();dojo.marginBox(this.virtualSizer,this.isHorizontal?{w:this.sizerWidth,h:this.paneHeight}:{w:this.paneWidth,h:this.sizerWidth});this.virtualSizer.style.display="block"},_hideSizingLine:function(){this.virtualSizer.style.display=
"none"},_moveSizingLine:function(){var pos=this.lastPoint-this.startPoint+this.sizingSplitter.position;dojo.style(this.virtualSizer,this.isHorizontal?"left":"top",pos+"px")},_getCookieName:function(i){return this.id+"_"+i},_restoreState:function(){dojo.forEach(this.getChildren(),function(child,i){var cookieName=this._getCookieName(i);var cookieValue=dojo.cookie(cookieName);if(cookieValue){var pos=parseInt(cookieValue);if(typeof pos=="number")child.sizeShare=pos}},this)},_saveState:function(){if(!this.persist)return;
dojo.forEach(this.getChildren(),function(child,i){dojo.cookie(this._getCookieName(i),child.sizeShare,{expires:365})},this)}});dojo.extend(dijit._Widget,{sizeMin:10,sizeShare:10})}if(!dojo._hasResource["dijit.layout.LayoutContainer"]){dojo._hasResource["dijit.layout.LayoutContainer"]=true;dojo.provide("dijit.layout.LayoutContainer");dojo.declare("dijit.layout.LayoutContainer",dijit.layout._LayoutWidget,{baseClass:"dijitLayoutContainer",constructor:function(){dojo.deprecated("dijit.layout.LayoutContainer is deprecated",
"use BorderContainer instead",2)},layout:function(){dijit.layout.layoutChildren(this.domNode,this._contentBox,this.getChildren())},addChild:function(child,insertIndex){this.inherited(arguments);if(this._started)dijit.layout.layoutChildren(this.domNode,this._contentBox,this.getChildren())},removeChild:function(widget){this.inherited(arguments);if(this._started)dijit.layout.layoutChildren(this.domNode,this._contentBox,this.getChildren())}});dojo.extend(dijit._Widget,{layoutAlign:"none"})}if(!dojo._hasResource["dijit.form.ValidationTextBox"]){dojo._hasResource["dijit.form.ValidationTextBox"]=
true;dojo.provide("dijit.form.ValidationTextBox");dojo.declare("dijit.form.ValidationTextBox",dijit.form.TextBox,{templateString:dojo.cache("dijit.form","templates/ValidationTextBox.html",'<div class="dijit dijitReset dijitInlineTable dijitLeft"\n\tid="widget_${id}" role="presentation"\n\t><div class=\'dijitReset dijitValidationContainer\'\n\t\t><input class="dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value="&#935; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t/></div\n\t><div class="dijitReset dijitInputField dijitInputContainer"\n\t\t><input class="dijitReset dijitInputInner" dojoAttachPoint=\'textbox,focusNode\' autocomplete="off"\n\t\t\t${!nameAttrSetting} type=\'${type}\'\n\t/></div\n></div>\n'),
baseClass:"dijitTextBox dijitValidationTextBox",required:false,promptMessage:"",invalidMessage:"$_unset_$",missingMessage:"$_unset_$",message:"",constraints:{},regExp:".*",regExpGen:function(constraints){return this.regExp},state:"",tooltipPosition:[],_setValueAttr:function(){this.inherited(arguments);this.validate(this._focused)},validator:function(value,constraints){return(new RegExp("^(?:"+this.regExpGen(constraints)+")"+(this.required?"":"?")+"$")).test(value)&&(!this.required||!this._isEmpty(value))&&
(this._isEmpty(value)||this.parse(value,constraints)!==undefined)},_isValidSubset:function(){return this.textbox.value.search(this._partialre)==0},isValid:function(isFocused){return this.validator(this.textbox.value,this.constraints)},_isEmpty:function(value){return(this.trim?/^\s*$/:/^$/).test(value)},getErrorMessage:function(isFocused){return this.required&&this._isEmpty(this.textbox.value)?this.missingMessage:this.invalidMessage},getPromptMessage:function(isFocused){return this.promptMessage},
_maskValidSubsetError:true,validate:function(isFocused){var message="";var isValid=this.disabled||this.isValid(isFocused);if(isValid)this._maskValidSubsetError=true;var isEmpty=this._isEmpty(this.textbox.value);var isValidSubset=!isValid&&isFocused&&this._isValidSubset();this._set("state",isValid?"":((!this._hasBeenBlurred||isFocused)&&isEmpty||isValidSubset)&&this._maskValidSubsetError?"Incomplete":"Error");dijit.setWaiState(this.focusNode,"invalid",isValid?"false":"true");if(this.state=="Error"){this._maskValidSubsetError=
isFocused&&isValidSubset;message=this.getErrorMessage(isFocused)}else if(this.state=="Incomplete"){message=this.getPromptMessage(isFocused);this._maskValidSubsetError=!this._hasBeenBlurred||isFocused}else if(isEmpty)message=this.getPromptMessage(isFocused);this.set("message",message);return isValid},displayMessage:function(message){dijit.hideTooltip(this.domNode);if(message&&this._focused)dijit.showTooltip(message,this.domNode,this.tooltipPosition,!this.isLeftToRight())},_refreshState:function(){this.validate(this._focused);
this.inherited(arguments)},constructor:function(){this.constraints={}},_setConstraintsAttr:function(constraints){if(!constraints.locale&&this.lang)constraints.locale=this.lang;this._set("constraints",constraints);this._computePartialRE()},_computePartialRE:function(){var p=this.regExpGen(this.constraints);this.regExp=p;var partialre="";if(p!=".*")this.regExp.replace(/\\.|\[\]|\[.*?[^\\]{1}\]|\{.*?\}|\(\?[=:!]|./g,function(re){switch(re.charAt(0)){case "{":case "+":case "?":case "*":case "^":case "$":case "|":case "(":partialre+=
re;break;case ")":partialre+="|$)";break;default:partialre+="(?:"+re+"|$)";break}});try{"".search(partialre)}catch(e){partialre=this.regExp;console.warn("RegExp error in "+this.declaredClass+": "+this.regExp)}this._partialre="^(?:"+partialre+")$"},postMixInProperties:function(){this.inherited(arguments);this.messages=dojo.i18n.getLocalization("dijit.form","validate",this.lang);if(this.invalidMessage=="$_unset_$")this.invalidMessage=this.messages.invalidMessage;if(!this.invalidMessage)this.invalidMessage=
this.promptMessage;if(this.missingMessage=="$_unset_$")this.missingMessage=this.messages.missingMessage;if(!this.missingMessage)this.missingMessage=this.invalidMessage;this._setConstraintsAttr(this.constraints)},_setDisabledAttr:function(value){this.inherited(arguments);this._refreshState()},_setRequiredAttr:function(value){this._set("required",value);dijit.setWaiState(this.focusNode,"required",value);this._refreshState()},_setMessageAttr:function(message){this._set("message",message);this.displayMessage(message)},
reset:function(){this._maskValidSubsetError=true;this.inherited(arguments)},_onBlur:function(){this.displayMessage("");this.inherited(arguments)}});dojo.declare("dijit.form.MappedTextBox",dijit.form.ValidationTextBox,{postMixInProperties:function(){this.inherited(arguments);this.nameAttrSetting=""},serialize:function(val,options){return val.toString?val.toString():""},toString:function(){var val=this.filter(this.get("value"));return val!=null?typeof val=="string"?val:this.serialize(val,this.constraints):
""},validate:function(){this.valueNode.value=this.toString();return this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);this.valueNode=dojo.place("<input type='hidden'"+(this.name?" name='"+this.name.replace(/'/g,"&quot;")+"'":"")+"/>",this.textbox,"after")},reset:function(){this.valueNode.value="";this.inherited(arguments)}});dojo.declare("dijit.form.RangeBoundTextBox",dijit.form.MappedTextBox,{rangeMessage:"",rangeCheck:function(primitive,constraints){return("min"in constraints?
this.compare(primitive,constraints.min)>=0:true)&&("max"in constraints?this.compare(primitive,constraints.max)<=0:true)},isInRange:function(isFocused){return this.rangeCheck(this.get("value"),this.constraints)},_isDefinitelyOutOfRange:function(){var val=this.get("value");var isTooLittle=false;var isTooMuch=false;if("min"in this.constraints){var min=this.constraints.min;min=this.compare(val,typeof min=="number"&&min>=0&&val!=0?0:min);isTooLittle=typeof min=="number"&&min<0}if("max"in this.constraints){var max=
this.constraints.max;max=this.compare(val,typeof max!="number"||max>0?max:0);isTooMuch=typeof max=="number"&&max>0}return isTooLittle||isTooMuch},_isValidSubset:function(){return this.inherited(arguments)&&!this._isDefinitelyOutOfRange()},isValid:function(isFocused){return this.inherited(arguments)&&(this._isEmpty(this.textbox.value)&&!this.required||this.isInRange(isFocused))},getErrorMessage:function(isFocused){var v=this.get("value");if(v!==null&&v!==""&&v!==undefined&&(typeof v!="number"||!isNaN(v))&&
!this.isInRange(isFocused))return this.rangeMessage;return this.inherited(arguments)},postMixInProperties:function(){this.inherited(arguments);if(!this.rangeMessage){this.messages=dojo.i18n.getLocalization("dijit.form","validate",this.lang);this.rangeMessage=this.messages.rangeMessage}},_setConstraintsAttr:function(constraints){this.inherited(arguments);if(this.focusNode){if(this.constraints.min!==undefined)dijit.setWaiState(this.focusNode,"valuemin",this.constraints.min);else dijit.removeWaiState(this.focusNode,
"valuemin");if(this.constraints.max!==undefined)dijit.setWaiState(this.focusNode,"valuemax",this.constraints.max);else dijit.removeWaiState(this.focusNode,"valuemax")}},_setValueAttr:function(value,priorityChange){dijit.setWaiState(this.focusNode,"valuenow",value);this.inherited(arguments)}})}if(!dojo._hasResource["dijit.form.ComboBox"]){dojo._hasResource["dijit.form.ComboBox"]=true;dojo.provide("dijit.form.ComboBox");dojo.declare("dijit.form.ComboBoxMixin",dijit._HasDropDown,{item:null,pageSize:Infinity,
store:null,fetchProperties:{},query:{},autoComplete:true,highlightMatch:"first",searchDelay:100,searchAttr:"name",labelAttr:"",labelType:"text",queryExpr:"${0}*",ignoreCase:true,hasDownArrow:true,templateString:dojo.cache("dijit.form","templates/DropDownBox.html",'<div class="dijit dijitReset dijitInlineTable dijitLeft"\n\tid="widget_${id}"\n\trole="combobox"\n\t><div class=\'dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer\'\n\t\tdojoAttachPoint="_buttonNode, _popupStateNode" role="presentation"\n\t\t><input class="dijitReset dijitInputField dijitArrowButtonInner" value="&#9660; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t\t\t${_buttonInputDisabled}\n\t/></div\n\t><div class=\'dijitReset dijitValidationContainer\'\n\t\t><input class="dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value="&#935; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t/></div\n\t><div class="dijitReset dijitInputField dijitInputContainer"\n\t\t><input class=\'dijitReset dijitInputInner\' ${!nameAttrSetting} type="text" autocomplete="off"\n\t\t\tdojoAttachPoint="textbox,focusNode" role="textbox" aria-haspopup="true"\n\t/></div\n></div>\n'),
baseClass:"dijitTextBox dijitComboBox",dropDownClass:"dijit.form._ComboBoxMenu",cssStateNodes:{"_buttonNode":"dijitDownArrowButton"},maxHeight:-1,_stopClickEvents:false,_getCaretPos:function(element){var pos=0;if(typeof element.selectionStart=="number")pos=element.selectionStart;else if(dojo.isIE){var tr=dojo.doc.selection.createRange().duplicate();var ntr=element.createTextRange();tr.move("character",0);ntr.move("character",0);try{ntr.setEndPoint("EndToEnd",tr);pos=String(ntr.text).replace(/\r/g,
"").length}catch(e){}}return pos},_setCaretPos:function(element,location){location=parseInt(location);dijit.selectInputText(element,location,location)},_setDisabledAttr:function(value){this.inherited(arguments);dijit.setWaiState(this.domNode,"disabled",value)},_abortQuery:function(){if(this.searchTimer){clearTimeout(this.searchTimer);this.searchTimer=null}if(this._fetchHandle){if(this._fetchHandle.abort)this._fetchHandle.abort();this._fetchHandle=null}},_onInput:function(evt){if(!this.searchTimer&&
(evt.type=="paste"||evt.type=="input")&&this._lastInput!=this.textbox.value)this.searchTimer=setTimeout(dojo.hitch(this,function(){this._onKey({charOrCode:229})}),100);this.inherited(arguments)},_onKey:function(evt){var key=evt.charOrCode;if(evt.altKey||(evt.ctrlKey||evt.metaKey)&&(key!="x"&&key!="v")||key==dojo.keys.SHIFT)return;var doSearch=false;var pw=this.dropDown;var dk=dojo.keys;var highlighted=null;this._prev_key_backspace=false;this._abortQuery();this.inherited(arguments);if(this._opened)highlighted=
pw.getHighlightedOption();switch(key){case dk.PAGE_DOWN:case dk.DOWN_ARROW:case dk.PAGE_UP:case dk.UP_ARROW:if(this._opened)this._announceOption(highlighted);dojo.stopEvent(evt);break;case dk.ENTER:if(highlighted)if(highlighted==pw.nextButton){this._nextSearch(1);dojo.stopEvent(evt);break}else{if(highlighted==pw.previousButton){this._nextSearch(-1);dojo.stopEvent(evt);break}}else{this._setBlurValue();this._setCaretPos(this.focusNode,this.focusNode.value.length)}if(this._opened||this._fetchHandle)evt.preventDefault();
case dk.TAB:var newvalue=this.get("displayedValue");if(pw&&(newvalue==pw._messages["previousMessage"]||newvalue==pw._messages["nextMessage"]))break;if(highlighted)this._selectOption();if(this._opened){this._lastQuery=null;this.closeDropDown()}break;case " ":if(highlighted){dojo.stopEvent(evt);this._selectOption();this.closeDropDown()}else doSearch=true;break;case dk.DELETE:case dk.BACKSPACE:this._prev_key_backspace=true;doSearch=true;break;default:doSearch=typeof key=="string"||key==229}if(doSearch){this.item=
undefined;this.searchTimer=setTimeout(dojo.hitch(this,"_startSearchFromInput"),1)}},_autoCompleteText:function(text){var fn=this.focusNode;dijit.selectInputText(fn,fn.value.length);var caseFilter=this.ignoreCase?"toLowerCase":"substr";if(text[caseFilter](0).indexOf(this.focusNode.value[caseFilter](0))==0){var cpos=this._getCaretPos(fn);if(cpos+1>fn.value.length){fn.value=text;dijit.selectInputText(fn,cpos)}}else{fn.value=text;dijit.selectInputText(fn)}},_openResultList:function(results,dataObject){this._fetchHandle=
null;if(this.disabled||this.readOnly||dataObject.query[this.searchAttr]!=this._lastQuery)return;var wasSelected=this.dropDown._highlighted_option&&dojo.hasClass(this.dropDown._highlighted_option,"dijitMenuItemSelected");this.dropDown.clearResultList();if(!results.length&&!this._maxOptions){this.closeDropDown();return}dataObject._maxOptions=this._maxOptions;var nodes=this.dropDown.createOptions(results,dataObject,dojo.hitch(this,"_getMenuLabelFromItem"));this._showResultList();if(dataObject.direction){if(1==
dataObject.direction)this.dropDown.highlightFirstOption();else if(-1==dataObject.direction)this.dropDown.highlightLastOption();if(wasSelected)this._announceOption(this.dropDown.getHighlightedOption())}else if(this.autoComplete&&!this._prev_key_backspace&&!/^[*]+$/.test(dataObject.query[this.searchAttr]))this._announceOption(nodes[1])},_showResultList:function(){this.closeDropDown(true);this.displayMessage("");this.openDropDown();dijit.setWaiState(this.domNode,"expanded","true")},loadDropDown:function(callback){this._startSearchAll()},
isLoaded:function(){return false},closeDropDown:function(){this._abortQuery();if(this._opened){this.inherited(arguments);dijit.setWaiState(this.domNode,"expanded","false");dijit.removeWaiState(this.focusNode,"activedescendant")}},_setBlurValue:function(){var newvalue=this.get("displayedValue");var pw=this.dropDown;if(pw&&(newvalue==pw._messages["previousMessage"]||newvalue==pw._messages["nextMessage"]))this._setValueAttr(this._lastValueReported,true);else if(typeof this.item=="undefined"){this.item=
null;this.set("displayedValue",newvalue)}else{if(this.value!=this._lastValueReported)dijit.form._FormValueWidget.prototype._setValueAttr.call(this,this.value,true);this._refreshState()}},_onBlur:function(){this.closeDropDown();this.inherited(arguments)},_setItemAttr:function(item,priorityChange,displayedValue){if(!displayedValue)displayedValue=this.store.getValue(item,this.searchAttr);var value=this._getValueField()!=this.searchAttr?this.store.getIdentity(item):displayedValue;this._set("item",item);
dijit.form.ComboBox.superclass._setValueAttr.call(this,value,priorityChange,displayedValue)},_announceOption:function(node){if(!node)return;var newValue;if(node==this.dropDown.nextButton||node==this.dropDown.previousButton){newValue=node.innerHTML;this.item=undefined;this.value=""}else{newValue=this.store.getValue(node.item,this.searchAttr).toString();this.set("item",node.item,false,newValue)}this.focusNode.value=this.focusNode.value.substring(0,this._lastInput.length);dijit.setWaiState(this.focusNode,
"activedescendant",dojo.attr(node,"id"));this._autoCompleteText(newValue)},_selectOption:function(evt){if(evt)this._announceOption(evt.target);this.closeDropDown();this._setCaretPos(this.focusNode,this.focusNode.value.length);dijit.form._FormValueWidget.prototype._setValueAttr.call(this,this.value,true)},_startSearchAll:function(){this._startSearch("")},_startSearchFromInput:function(){this._startSearch(this.focusNode.value.replace(/([\\\*\?])/g,"\\$1"))},_getQueryString:function(text){return dojo.string.substitute(this.queryExpr,
[text])},_startSearch:function(key){if(!this.dropDown){var popupId=this.id+"_popup",dropDownConstructor=dojo.getObject(this.dropDownClass,false);this.dropDown=new dropDownConstructor({onChange:dojo.hitch(this,this._selectOption),id:popupId,dir:this.dir});dijit.removeWaiState(this.focusNode,"activedescendant");dijit.setWaiState(this.textbox,"owns",popupId)}var query=dojo.clone(this.query);this._lastInput=key;this._lastQuery=query[this.searchAttr]=this._getQueryString(key);this.searchTimer=setTimeout(dojo.hitch(this,
function(query,_this){this.searchTimer=null;var fetch={queryOptions:{ignoreCase:this.ignoreCase,deep:true},query:query,onBegin:dojo.hitch(this,"_setMaxOptions"),onComplete:dojo.hitch(this,"_openResultList"),onError:function(errText){_this._fetchHandle=null;console.error("dijit.form.ComboBox: "+errText);_this.closeDropDown()},start:0,count:this.pageSize};dojo.mixin(fetch,_this.fetchProperties);this._fetchHandle=_this.store.fetch(fetch);var nextSearch=function(dataObject,direction){dataObject.start+=
dataObject.count*direction;dataObject.direction=direction;this._fetchHandle=this.store.fetch(dataObject);this.focus()};this._nextSearch=this.dropDown.onPage=dojo.hitch(this,nextSearch,this._fetchHandle)},query,this),this.searchDelay)},_setMaxOptions:function(size,request){this._maxOptions=size},_getValueField:function(){return this.searchAttr},constructor:function(){this.query={};this.fetchProperties={}},postMixInProperties:function(){if(!this.store){var srcNodeRef=this.srcNodeRef;this.store=new dijit.form._ComboBoxDataStore(srcNodeRef);
if(!("value"in this.params)){var item=this.item=this.store.fetchSelectedItem();if(item){var valueField=this._getValueField();this.value=this.store.getValue(item,valueField)}}}this.inherited(arguments)},postCreate:function(){var label=dojo.query('label[for="'+this.id+'"]');if(label.length){label[0].id=this.id+"_label";dijit.setWaiState(this.domNode,"labelledby",label[0].id)}this.inherited(arguments)},_setHasDownArrowAttr:function(val){this.hasDownArrow=val;this._buttonNode.style.display=val?"":"none"},
_getMenuLabelFromItem:function(item){var label=this.labelFunc(item,this.store),labelType=this.labelType;if(this.highlightMatch!="none"&&this.labelType=="text"&&this._lastInput){label=this.doHighlight(label,this._escapeHtml(this._lastInput));labelType="html"}return{html:labelType=="html",label:label}},doHighlight:function(label,find){var modifiers=(this.ignoreCase?"i":"")+(this.highlightMatch=="all"?"g":""),i=this.queryExpr.indexOf("${0}");find=dojo.regexp.escapeString(find);return this._escapeHtml(label).replace(new RegExp((i==
0?"^":"")+"("+find+")"+(i==this.queryExpr.length-4?"$":""),modifiers),'<span class="dijitComboBoxHighlightMatch">$1</span>')},_escapeHtml:function(str){str=String(str).replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;");return str},reset:function(){this.item=null;this.inherited(arguments)},labelFunc:function(item,store){return store.getValue(item,this.labelAttr||this.searchAttr).toString()}});dojo.declare("dijit.form._ComboBoxMenu",[dijit._Widget,dijit._Templated,
dijit._CssStateMixin],{templateString:"<ul class='dijitReset dijitMenu' dojoAttachEvent='onmousedown:_onMouseDown,onmouseup:_onMouseUp,onmouseover:_onMouseOver,onmouseout:_onMouseOut' style='overflow: \"auto\"; overflow-x: \"hidden\";'>"+"<li class='dijitMenuItem dijitMenuPreviousButton' dojoAttachPoint='previousButton' role='option'></li>"+"<li class='dijitMenuItem dijitMenuNextButton' dojoAttachPoint='nextButton' role='option'></li>"+"</ul>",_messages:null,baseClass:"dijitComboBoxMenu",postMixInProperties:function(){this.inherited(arguments);
this._messages=dojo.i18n.getLocalization("dijit.form","ComboBox",this.lang)},buildRendering:function(){this.inherited(arguments);this.previousButton.innerHTML=this._messages["previousMessage"];this.nextButton.innerHTML=this._messages["nextMessage"]},_setValueAttr:function(value){this.value=value;this.onChange(value)},onChange:function(value){},onPage:function(direction){},onClose:function(){this._blurOptionNode()},_createOption:function(item,labelFunc){var menuitem=dojo.create("li",{"class":"dijitReset dijitMenuItem"+
(this.isLeftToRight()?"":" dijitMenuItemRtl"),role:"option"});var labelObject=labelFunc(item);if(labelObject.html)menuitem.innerHTML=labelObject.label;else menuitem.appendChild(dojo.doc.createTextNode(labelObject.label));if(menuitem.innerHTML=="")menuitem.innerHTML="&nbsp;";menuitem.item=item;return menuitem},createOptions:function(results,dataObject,labelFunc){this.previousButton.style.display=dataObject.start==0?"none":"";dojo.attr(this.previousButton,"id",this.id+"_prev");dojo.forEach(results,
function(item,i){var menuitem=this._createOption(item,labelFunc);dojo.attr(menuitem,"id",this.id+i);this.domNode.insertBefore(menuitem,this.nextButton)},this);var displayMore=false;if(dataObject._maxOptions&&dataObject._maxOptions!=-1)if(dataObject.start+dataObject.count<dataObject._maxOptions)displayMore=true;else{if(dataObject.start+dataObject.count>dataObject._maxOptions&&dataObject.count==results.length)displayMore=true}else if(dataObject.count==results.length)displayMore=true;this.nextButton.style.display=
displayMore?"":"none";dojo.attr(this.nextButton,"id",this.id+"_next");return this.domNode.childNodes},clearResultList:function(){while(this.domNode.childNodes.length>2)this.domNode.removeChild(this.domNode.childNodes[this.domNode.childNodes.length-2]);this._blurOptionNode()},_onMouseDown:function(evt){dojo.stopEvent(evt)},_onMouseUp:function(evt){if(evt.target===this.domNode||!this._highlighted_option)return;else if(evt.target==this.previousButton){this._blurOptionNode();this.onPage(-1)}else if(evt.target==
this.nextButton){this._blurOptionNode();this.onPage(1)}else{var tgt=evt.target;while(!tgt.item)tgt=tgt.parentNode;this._setValueAttr({target:tgt},true)}},_onMouseOver:function(evt){if(evt.target===this.domNode)return;var tgt=evt.target;if(!(tgt==this.previousButton||tgt==this.nextButton))while(!tgt.item)tgt=tgt.parentNode;this._focusOptionNode(tgt)},_onMouseOut:function(evt){if(evt.target===this.domNode)return;this._blurOptionNode()},_focusOptionNode:function(node){if(this._highlighted_option!=node){this._blurOptionNode();
this._highlighted_option=node;dojo.addClass(this._highlighted_option,"dijitMenuItemSelected")}},_blurOptionNode:function(){if(this._highlighted_option){dojo.removeClass(this._highlighted_option,"dijitMenuItemSelected");this._highlighted_option=null}},_highlightNextOption:function(){if(!this.getHighlightedOption()){var fc=this.domNode.firstChild;this._focusOptionNode(fc.style.display=="none"?fc.nextSibling:fc)}else{var ns=this._highlighted_option.nextSibling;if(ns&&ns.style.display!="none")this._focusOptionNode(ns);
else this.highlightFirstOption()}dojo.window.scrollIntoView(this._highlighted_option)},highlightFirstOption:function(){var first=this.domNode.firstChild;var second=first.nextSibling;this._focusOptionNode(second.style.display=="none"?first:second);dojo.window.scrollIntoView(this._highlighted_option)},highlightLastOption:function(){this._focusOptionNode(this.domNode.lastChild.previousSibling);dojo.window.scrollIntoView(this._highlighted_option)},_highlightPrevOption:function(){if(!this.getHighlightedOption()){var lc=
this.domNode.lastChild;this._focusOptionNode(lc.style.display=="none"?lc.previousSibling:lc)}else{var ps=this._highlighted_option.previousSibling;if(ps&&ps.style.display!="none")this._focusOptionNode(ps);else this.highlightLastOption()}dojo.window.scrollIntoView(this._highlighted_option)},_page:function(up){var scrollamount=0;var oldscroll=this.domNode.scrollTop;var height=dojo.style(this.domNode,"height");if(!this.getHighlightedOption())this._highlightNextOption();while(scrollamount<height){if(up){if(!this.getHighlightedOption().previousSibling||
this._highlighted_option.previousSibling.style.display=="none")break;this._highlightPrevOption()}else{if(!this.getHighlightedOption().nextSibling||this._highlighted_option.nextSibling.style.display=="none")break;this._highlightNextOption()}var newscroll=this.domNode.scrollTop;scrollamount+=(newscroll-oldscroll)*(up?-1:1);oldscroll=newscroll}},pageUp:function(){this._page(true)},pageDown:function(){this._page(false)},getHighlightedOption:function(){var ho=this._highlighted_option;return ho&&ho.parentNode?
ho:null},handleKey:function(evt){switch(evt.charOrCode){case dojo.keys.DOWN_ARROW:this._highlightNextOption();return false;case dojo.keys.PAGE_DOWN:this.pageDown();return false;case dojo.keys.UP_ARROW:this._highlightPrevOption();return false;case dojo.keys.PAGE_UP:this.pageUp();return false;default:return true}}});dojo.declare("dijit.form.ComboBox",[dijit.form.ValidationTextBox,dijit.form.ComboBoxMixin],{_setValueAttr:function(value,priorityChange,displayedValue){this._set("item",null);if(!value)value=
"";dijit.form.ValidationTextBox.prototype._setValueAttr.call(this,value,priorityChange,displayedValue)}});dojo.declare("dijit.form._ComboBoxDataStore",null,{constructor:function(root){this.root=root;if(root.tagName!="SELECT"&&root.firstChild){root=dojo.query("select",root);if(root.length>0)root=root[0];else{this.root.innerHTML="<SELECT>"+this.root.innerHTML+"</SELECT>";root=this.root.firstChild}this.root=root}dojo.query("> option",root).forEach(function(node){node.innerHTML=dojo.trim(node.innerHTML)})},
getValue:function(item,attribute,defaultValue){return attribute=="value"?item.value:item.innerText||item.textContent||""},isItemLoaded:function(something){return true},getFeatures:function(){return{"dojo.data.api.Read":true,"dojo.data.api.Identity":true}},_fetchItems:function(args,findCallback,errorCallback){if(!args.query)args.query={};if(!args.query.name)args.query.name="";if(!args.queryOptions)args.queryOptions={};var matcher=dojo.data.util.filter.patternToRegExp(args.query.name,args.queryOptions.ignoreCase),
items=dojo.query("> option",this.root).filter(function(option){return(option.innerText||option.textContent||"").match(matcher)});if(args.sort)items.sort(dojo.data.util.sorter.createSortFunction(args.sort,this));findCallback(items,args)},close:function(request){return},getLabel:function(item){return item.innerHTML},getIdentity:function(item){return dojo.attr(item,"value")},fetchItemByIdentity:function(args){var item=dojo.query("> option[value='"+args.identity+"']",this.root)[0];args.onItem(item)},
fetchSelectedItem:function(){var root=this.root,si=root.selectedIndex;return typeof si=="number"?dojo.query("> option:nth-child("+(si!=-1?si+1:1)+")",root)[0]:null}});dojo.extend(dijit.form._ComboBoxDataStore,dojo.data.util.simpleFetch)}if(!dojo._hasResource["dojo.date"]){dojo._hasResource["dojo.date"]=true;dojo.provide("dojo.date");dojo.getObject("date",true,dojo);dojo.date.getDaysInMonth=function(dateObject){var month=dateObject.getMonth();var days=[31,28,31,30,31,30,31,31,30,31,30,31];if(month==
1&&dojo.date.isLeapYear(dateObject))return 29;return days[month]};dojo.date.isLeapYear=function(dateObject){var year=dateObject.getFullYear();return!(year%400)||!(year%4)&&!!(year%100)};dojo.date.getTimezoneName=function(dateObject){var str=dateObject.toString();var tz="";var match;var pos=str.indexOf("(");if(pos>-1)tz=str.substring(++pos,str.indexOf(")"));else{var pat=/([A-Z\/]+) \d{4}$/;if(match=str.match(pat))tz=match[1];else{str=dateObject.toLocaleString();pat=/ ([A-Z\/]+)$/;if(match=str.match(pat))tz=
match[1]}}return tz=="AM"||tz=="PM"?"":tz};dojo.date.compare=function(date1,date2,portion){date1=new Date(+date1);date2=new Date(+(date2||new Date));if(portion=="date"){date1.setHours(0,0,0,0);date2.setHours(0,0,0,0)}else if(portion=="time"){date1.setFullYear(0,0,0);date2.setFullYear(0,0,0)}if(date1>date2)return 1;if(date1<date2)return-1;return 0};dojo.date.add=function(date,interval,amount){var sum=new Date(+date);var fixOvershoot=false;var property="Date";switch(interval){case "day":break;case "weekday":var days,
weeks;var mod=amount%5;if(!mod){days=amount>0?5:-5;weeks=amount>0?(amount-5)/5:(amount+5)/5}else{days=mod;weeks=parseInt(amount/5)}var strt=date.getDay();var adj=0;if(strt==6&&amount>0)adj=1;else if(strt==0&&amount<0)adj=-1;var trgt=strt+days;if(trgt==0||trgt==6)adj=amount>0?2:-2;amount=7*weeks+days+adj;break;case "year":property="FullYear";fixOvershoot=true;break;case "week":amount*=7;break;case "quarter":amount*=3;case "month":fixOvershoot=true;property="Month";break;default:property="UTC"+interval.charAt(0).toUpperCase()+
interval.substring(1)+"s"}if(property)sum["set"+property](sum["get"+property]()+amount);if(fixOvershoot&&sum.getDate()<date.getDate())sum.setDate(0);return sum};dojo.date.difference=function(date1,date2,interval){date2=date2||new Date;interval=interval||"day";var yearDiff=date2.getFullYear()-date1.getFullYear();var delta=1;switch(interval){case "quarter":var m1=date1.getMonth();var m2=date2.getMonth();var q1=Math.floor(m1/3)+1;var q2=Math.floor(m2/3)+1;q2+=yearDiff*4;delta=q2-q1;break;case "weekday":var days=
Math.round(dojo.date.difference(date1,date2,"day"));var weeks=parseInt(dojo.date.difference(date1,date2,"week"));var mod=days%7;if(mod==0)days=weeks*5;else{var adj=0;var aDay=date1.getDay();var bDay=date2.getDay();weeks=parseInt(days/7);mod=days%7;var dtMark=new Date(date1);dtMark.setDate(dtMark.getDate()+weeks*7);var dayMark=dtMark.getDay();if(days>0)switch(true){case aDay==6:adj=-1;break;case aDay==0:adj=0;break;case bDay==6:adj=-1;break;case bDay==0:adj=-2;break;case dayMark+mod>5:adj=-2}else if(days<
0)switch(true){case aDay==6:adj=0;break;case aDay==0:adj=1;break;case bDay==6:adj=2;break;case bDay==0:adj=1;break;case dayMark+mod<0:adj=2}days+=adj;days-=weeks*2}delta=days;break;case "year":delta=yearDiff;break;case "month":delta=date2.getMonth()-date1.getMonth()+yearDiff*12;break;case "week":delta=parseInt(dojo.date.difference(date1,date2,"day")/7);break;case "day":delta/=24;case "hour":delta/=60;case "minute":delta/=60;case "second":delta/=1E3;case "millisecond":delta*=date2.getTime()-date1.getTime()}return Math.round(delta)}}if(!dojo._hasResource["dojo.cldr.supplemental"]){dojo._hasResource["dojo.cldr.supplemental"]=
true;dojo.provide("dojo.cldr.supplemental");dojo.getObject("cldr.supplemental",true,dojo);dojo.cldr.supplemental.getFirstDayOfWeek=function(locale){var firstDay={mv:5,ae:6,af:6,bh:6,dj:6,dz:6,eg:6,er:6,et:6,iq:6,ir:6,jo:6,ke:6,kw:6,ly:6,ma:6,om:6,qa:6,sa:6,sd:6,so:6,sy:6,tn:6,ye:6,ar:0,as:0,az:0,bw:0,ca:0,cn:0,fo:0,ge:0,gl:0,gu:0,hk:0,il:0,"in":0,jm:0,jp:0,kg:0,kr:0,la:0,mh:0,mn:0,mo:0,mp:0,mt:0,nz:0,ph:0,pk:0,sg:0,th:0,tt:0,tw:0,um:0,us:0,uz:0,vi:0,zw:0};var country=dojo.cldr.supplemental._region(locale);
var dow=firstDay[country];return dow===undefined?1:dow};dojo.cldr.supplemental._region=function(locale){locale=dojo.i18n.normalizeLocale(locale);var tags=locale.split("-");var region=tags[1];if(!region)region={de:"de",en:"us",es:"es",fi:"fi",fr:"fr",he:"il",hu:"hu",it:"it",ja:"jp",ko:"kr",nl:"nl",pt:"br",sv:"se",zh:"cn"}[tags[0]];else if(region.length==4)region=tags[2];return region};dojo.cldr.supplemental.getWeekend=function(locale){var weekendStart={"in":0,af:4,dz:4,ir:4,om:4,sa:4,ye:4,ae:5,bh:5,
eg:5,il:5,iq:5,jo:5,kw:5,ly:5,ma:5,qa:5,sd:5,sy:5,tn:5};var weekendEnd={af:5,dz:5,ir:5,om:5,sa:5,ye:5,ae:6,bh:5,eg:6,il:6,iq:6,jo:6,kw:6,ly:6,ma:6,qa:6,sd:6,sy:6,tn:6};var country=dojo.cldr.supplemental._region(locale);var start=weekendStart[country];var end=weekendEnd[country];if(start===undefined)start=6;if(end===undefined)end=0;return{start:start,end:end}}}if(!dojo._hasResource["dojo.date.locale"]){dojo._hasResource["dojo.date.locale"]=true;dojo.provide("dojo.date.locale");dojo.getObject("date.locale",
true,dojo);(function(){function formatPattern(dateObject,bundle,options,pattern){return pattern.replace(/([a-z])\1*/ig,function(match){var s,pad,c=match.charAt(0),l=match.length,widthList=["abbr","wide","narrow"];switch(c){case "G":s=bundle[l<4?"eraAbbr":"eraNames"][dateObject.getFullYear()<0?0:1];break;case "y":s=dateObject.getFullYear();switch(l){case 1:break;case 2:if(!options.fullYear){s=String(s);s=s.substr(s.length-2);break}default:pad=true}break;case "Q":case "q":s=Math.ceil((dateObject.getMonth()+
1)/3);pad=true;break;case "M":var m=dateObject.getMonth();if(l<3){s=m+1;pad=true}else{var propM=["months","format",widthList[l-3]].join("-");s=bundle[propM][m]}break;case "w":var firstDay=0;s=dojo.date.locale._getWeekOfYear(dateObject,firstDay);pad=true;break;case "d":s=dateObject.getDate();pad=true;break;case "D":s=dojo.date.locale._getDayOfYear(dateObject);pad=true;break;case "E":var d=dateObject.getDay();if(l<3){s=d+1;pad=true}else{var propD=["days","format",widthList[l-3]].join("-");s=bundle[propD][d]}break;
case "a":var timePeriod=dateObject.getHours()<12?"am":"pm";s=options[timePeriod]||bundle["dayPeriods-format-wide-"+timePeriod];break;case "h":case "H":case "K":case "k":var h=dateObject.getHours();switch(c){case "h":s=h%12||12;break;case "H":s=h;break;case "K":s=h%12;break;case "k":s=h||24;break}pad=true;break;case "m":s=dateObject.getMinutes();pad=true;break;case "s":s=dateObject.getSeconds();pad=true;break;case "S":s=Math.round(dateObject.getMilliseconds()*Math.pow(10,l-3));pad=true;break;case "v":case "z":s=
dojo.date.locale._getZone(dateObject,true,options);if(s)break;l=4;case "Z":var offset=dojo.date.locale._getZone(dateObject,false,options);var tz=[offset<=0?"+":"-",dojo.string.pad(Math.floor(Math.abs(offset)/60),2),dojo.string.pad(Math.abs(offset)%60,2)];if(l==4){tz.splice(0,0,"GMT");tz.splice(3,0,":")}s=tz.join("");break;default:throw new Error("dojo.date.locale.format: invalid pattern char: "+pattern);}if(pad)s=dojo.string.pad(s,l);return s})}dojo.date.locale._getZone=function(dateObject,getName,
options){if(getName)return dojo.date.getTimezoneName(dateObject);else return dateObject.getTimezoneOffset()};dojo.date.locale.format=function(dateObject,options){options=options||{};var locale=dojo.i18n.normalizeLocale(options.locale),formatLength=options.formatLength||"short",bundle=dojo.date.locale._getGregorianBundle(locale),str=[],sauce=dojo.hitch(this,formatPattern,dateObject,bundle,options);if(options.selector=="year")return _processPattern(bundle["dateFormatItem-yyyy"]||"yyyy",sauce);var pattern;
if(options.selector!="date"){pattern=options.timePattern||bundle["timeFormat-"+formatLength];if(pattern)str.push(_processPattern(pattern,sauce))}if(options.selector!="time"){pattern=options.datePattern||bundle["dateFormat-"+formatLength];if(pattern)str.push(_processPattern(pattern,sauce))}return str.length==1?str[0]:bundle["dateTimeFormat-"+formatLength].replace(/\{(\d+)\}/g,function(match,key){return str[key]})};dojo.date.locale.regexp=function(options){return dojo.date.locale._parseInfo(options).regexp};
dojo.date.locale._parseInfo=function(options){options=options||{};var locale=dojo.i18n.normalizeLocale(options.locale),bundle=dojo.date.locale._getGregorianBundle(locale),formatLength=options.formatLength||"short",datePattern=options.datePattern||bundle["dateFormat-"+formatLength],timePattern=options.timePattern||bundle["timeFormat-"+formatLength],pattern;if(options.selector=="date")pattern=datePattern;else if(options.selector=="time")pattern=timePattern;else pattern=bundle["dateTimeFormat-"+formatLength].replace(/\{(\d+)\}/g,
function(match,key){return[timePattern,datePattern][key]});var tokens=[],re=_processPattern(pattern,dojo.hitch(this,_buildDateTimeRE,tokens,bundle,options));return{regexp:re,tokens:tokens,bundle:bundle}};dojo.date.locale.parse=function(value,options){var controlChars=/[\u200E\u200F\u202A\u202E]/g,info=dojo.date.locale._parseInfo(options),tokens=info.tokens,bundle=info.bundle,re=new RegExp("^"+info.regexp.replace(controlChars,"")+"$",info.strict?"":"i"),match=re.exec(value&&value.replace(controlChars,
""));if(!match)return null;var widthList=["abbr","wide","narrow"],result=[1970,0,1,0,0,0,0],amPm="",valid=dojo.every(match,function(v,i){if(!i)return true;var token=tokens[i-1];var l=token.length;switch(token.charAt(0)){case "y":if(l!=2&&options.strict)result[0]=v;else if(v<100){v=Number(v);var year=""+(new Date).getFullYear(),century=year.substring(0,2)*100,cutoff=Math.min(Number(year.substring(2,4))+20,99),num=v<cutoff?century+v:century-100+v;result[0]=num}else{if(options.strict)return false;result[0]=
v}break;case "M":if(l>2){var months=bundle["months-format-"+widthList[l-3]].concat();if(!options.strict){v=v.replace(".","").toLowerCase();months=dojo.map(months,function(s){return s.replace(".","").toLowerCase()})}v=dojo.indexOf(months,v);if(v==-1)return false}else v--;result[1]=v;break;case "E":case "e":var days=bundle["days-format-"+widthList[l-3]].concat();if(!options.strict){v=v.toLowerCase();days=dojo.map(days,function(d){return d.toLowerCase()})}v=dojo.indexOf(days,v);if(v==-1)return false;
break;case "D":result[1]=0;case "d":result[2]=v;break;case "a":var am=options.am||bundle["dayPeriods-format-wide-am"],pm=options.pm||bundle["dayPeriods-format-wide-pm"];if(!options.strict){var period=/\./g;v=v.replace(period,"").toLowerCase();am=am.replace(period,"").toLowerCase();pm=pm.replace(period,"").toLowerCase()}if(options.strict&&v!=am&&v!=pm)return false;amPm=v==pm?"p":v==am?"a":"";break;case "K":if(v==24)v=0;case "h":case "H":case "k":if(v>23)return false;result[3]=v;break;case "m":result[4]=
v;break;case "s":result[5]=v;break;case "S":result[6]=v}return true});var hours=+result[3];if(amPm==="p"&&hours<12)result[3]=hours+12;else if(amPm==="a"&&hours==12)result[3]=0;var dateObject=new Date(result[0],result[1],result[2],result[3],result[4],result[5],result[6]);if(options.strict)dateObject.setFullYear(result[0]);var allTokens=tokens.join(""),dateToken=allTokens.indexOf("d")!=-1,monthToken=allTokens.indexOf("M")!=-1;if(!valid||monthToken&&dateObject.getMonth()>result[1]||dateToken&&dateObject.getDate()>
result[2])return null;if(monthToken&&dateObject.getMonth()<result[1]||dateToken&&dateObject.getDate()<result[2])dateObject=dojo.date.add(dateObject,"hour",1);return dateObject};function _processPattern(pattern,applyPattern,applyLiteral,applyAll){var identity=function(x){return x};applyPattern=applyPattern||identity;applyLiteral=applyLiteral||identity;applyAll=applyAll||identity;var chunks=pattern.match(/(''|[^'])+/g),literal=pattern.charAt(0)=="'";dojo.forEach(chunks,function(chunk,i){if(!chunk)chunks[i]=
"";else{chunks[i]=(literal?applyLiteral:applyPattern)(chunk.replace(/''/g,"'"));literal=!literal}});return applyAll(chunks.join(""))}function _buildDateTimeRE(tokens,bundle,options,pattern){pattern=dojo.regexp.escapeString(pattern);if(!options.strict)pattern=pattern.replace(" a"," ?a");return pattern.replace(/([a-z])\1*/ig,function(match){var s,c=match.charAt(0),l=match.length,p2="",p3="";if(options.strict){if(l>1)p2="0"+"{"+(l-1)+"}";if(l>2)p3="0"+"{"+(l-2)+"}"}else{p2="0?";p3="0{0,2}"}switch(c){case "y":s=
"\\d{2,4}";break;case "M":s=l>2?"\\S+?":p2+"[1-9]|1[0-2]";break;case "D":s=p2+"[1-9]|"+p3+"[1-9][0-9]|[12][0-9][0-9]|3[0-5][0-9]|36[0-6]";break;case "d":s="3[01]|[12]\\d|"+p2+"[1-9]";break;case "w":s=p2+"[1-9]|[1-4][0-9]|5[0-3]";break;case "E":s="\\S+";break;case "h":s=p2+"[1-9]|1[0-2]";break;case "k":s=p2+"\\d|1[01]";break;case "H":s=p2+"\\d|1\\d|2[0-3]";break;case "K":s=p2+"[1-9]|1\\d|2[0-4]";break;case "m":case "s":s="[0-5]\\d";break;case "S":s="\\d{"+l+"}";break;case "a":var am=options.am||bundle["dayPeriods-format-wide-am"],
pm=options.pm||bundle["dayPeriods-format-wide-pm"];if(options.strict)s=am+"|"+pm;else{s=am+"|"+pm;if(am!=am.toLowerCase())s+="|"+am.toLowerCase();if(pm!=pm.toLowerCase())s+="|"+pm.toLowerCase();if(s.indexOf(".")!=-1)s+="|"+s.replace(/\./g,"")}s=s.replace(/\./g,"\\.");break;default:s=".*"}if(tokens)tokens.push(match);return"("+s+")"}).replace(/[\xa0 ]/g,"[\\s\\xa0]")}})();(function(){var _customFormats=[];dojo.date.locale.addCustomFormats=function(packageName,bundleName){_customFormats.push({pkg:packageName,
name:bundleName})};dojo.date.locale._getGregorianBundle=function(locale){var gregorian={};dojo.forEach(_customFormats,function(desc){var bundle=dojo.i18n.getLocalization(desc.pkg,desc.name,locale);gregorian=dojo.mixin(gregorian,bundle)},this);return gregorian}})();dojo.date.locale.addCustomFormats("dojo.cldr","gregorian");dojo.date.locale.getNames=function(item,type,context,locale){var label,lookup=dojo.date.locale._getGregorianBundle(locale),props=[item,context,type];if(context=="standAlone"){var key=
props.join("-");label=lookup[key];if(label[0]==1)label=undefined}props[1]="format";return(label||lookup[props.join("-")]).concat()};dojo.date.locale.isWeekend=function(dateObject,locale){var weekend=dojo.cldr.supplemental.getWeekend(locale),day=(dateObject||new Date).getDay();if(weekend.end<weekend.start){weekend.end+=7;if(day<weekend.start)day+=7}return day>=weekend.start&&day<=weekend.end};dojo.date.locale._getDayOfYear=function(dateObject){return dojo.date.difference(new Date(dateObject.getFullYear(),
0,1,dateObject.getHours()),dateObject)+1};dojo.date.locale._getWeekOfYear=function(dateObject,firstDayOfWeek){if(arguments.length==1)firstDayOfWeek=0;var firstDayOfYear=(new Date(dateObject.getFullYear(),0,1)).getDay(),adj=(firstDayOfYear-firstDayOfWeek+7)%7,week=Math.floor((dojo.date.locale._getDayOfYear(dateObject)+adj-1)/7);if(firstDayOfYear==firstDayOfWeek)week++;return week}}dojo.provide("dojo.nls.dojo_ROOT");dojo.provide("dijit.nls.loading");dijit.nls.loading._built=true;dojo.provide("dijit.nls.loading.ROOT");
dijit.nls.loading.ROOT={"loadingState":"Loading...","errorState":"Sorry, an error occurred"};dojo.provide("dijit.nls.common");dijit.nls.common._built=true;dojo.provide("dijit.nls.common.ROOT");dijit.nls.common.ROOT={"buttonOk":"OK","buttonCancel":"Cancel","buttonSave":"Save","itemClose":"Close"};dojo.provide("dojo.cldr.nls.gregorian");dojo.cldr.nls.gregorian._built=true;dojo.provide("dojo.cldr.nls.gregorian.ROOT");dojo.cldr.nls.gregorian.ROOT={"months-format-narrow":["1","2","3","4","5","6","7","8",
"9","10","11","12"],"quarters-standAlone-narrow":["1","2","3","4"],"field-weekday":"Day of the Week","dateFormatItem-yQQQ":"y QQQ","dateFormatItem-yMEd":"EEE, y-M-d","dateFormatItem-MMMEd":"E MMM d","eraNarrow":["BCE","CE"],"dateTimeFormats-appendItem-Day-Of-Week":"{0} {1}","dateFormat-long":"y MMMM d","months-format-wide":["1","2","3","4","5","6","7","8","9","10","11","12"],"dateTimeFormat-medium":"{1} {0}","dateFormatItem-EEEd":"d EEE","dayPeriods-format-wide-pm":"PM","dateFormat-full":"EEEE, y MMMM dd",
"dateFormatItem-Md":"M-d","dayPeriods-format-abbr-am":"AM","dateTimeFormats-appendItem-Second":"{0} ({2}: {1})","field-era":"Era","dateFormatItem-yM":"y-M","months-standAlone-wide":["1","2","3","4","5","6","7","8","9","10","11","12"],"timeFormat-short":"HH:mm","quarters-format-wide":["Q1","Q2","Q3","Q4"],"timeFormat-long":"HH:mm:ss z","field-year":"Year","dateFormatItem-yMMM":"y MMM","dateFormatItem-yQ":"y Q","dateTimeFormats-appendItem-Era":"{0} {1}","field-hour":"Hour","months-format-abbr":["1",
"2","3","4","5","6","7","8","9","10","11","12"],"timeFormat-full":"HH:mm:ss zzzz","dateTimeFormats-appendItem-Week":"{0} ({2}: {1})","field-day-relative+0":"Today","field-day-relative+1":"Tomorrow","dateFormatItem-H":"HH","months-standAlone-abbr":["1","2","3","4","5","6","7","8","9","10","11","12"],"quarters-format-abbr":["Q1","Q2","Q3","Q4"],"quarters-standAlone-wide":["Q1","Q2","Q3","Q4"],"dateFormatItem-M":"L","days-standAlone-wide":["1","2","3","4","5","6","7"],"timeFormat-medium":"HH:mm:ss",
"dateFormatItem-Hm":"HH:mm","quarters-standAlone-abbr":["Q1","Q2","Q3","Q4"],"eraAbbr":["BCE","CE"],"field-minute":"Minute","field-dayperiod":"Dayperiod","days-standAlone-abbr":["1","2","3","4","5","6","7"],"dateFormatItem-d":"d","dateFormatItem-ms":"mm:ss","quarters-format-narrow":["1","2","3","4"],"field-day-relative+-1":"Yesterday","dateFormatItem-h":"h a","dateTimeFormat-long":"{1} {0}","dayPeriods-format-narrow-am":"AM","dateFormatItem-MMMd":"MMM d","dateFormatItem-MEd":"E, M-d","dateTimeFormat-full":"{1} {0}",
"field-day":"Day","days-format-wide":["1","2","3","4","5","6","7"],"field-zone":"Zone","dateTimeFormats-appendItem-Day":"{0} ({2}: {1})","dateFormatItem-y":"y","months-standAlone-narrow":["1","2","3","4","5","6","7","8","9","10","11","12"],"dateFormatItem-hm":"h:mm a","dateTimeFormats-appendItem-Year":"{0} {1}","dateTimeFormats-appendItem-Hour":"{0} ({2}: {1})","dayPeriods-format-abbr-pm":"PM","days-format-abbr":["1","2","3","4","5","6","7"],"eraNames":["BCE","CE"],"days-format-narrow":["1","2","3",
"4","5","6","7"],"days-standAlone-narrow":["1","2","3","4","5","6","7"],"dateFormatItem-MMM":"LLL","field-month":"Month","dateTimeFormats-appendItem-Quarter":"{0} ({2}: {1})","dayPeriods-format-wide-am":"AM","dateTimeFormats-appendItem-Month":"{0} ({2}: {1})","dateTimeFormats-appendItem-Minute":"{0} ({2}: {1})","dateFormat-short":"yyyy-MM-dd","field-second":"Second","dateFormatItem-yMMMEd":"EEE, y MMM d","dateTimeFormats-appendItem-Timezone":"{0} {1}","field-week":"Week","dateFormat-medium":"y MMM d",
"dayPeriods-format-narrow-pm":"PM","dateTimeFormat-short":"{1} {0}","dateFormatItem-Hms":"HH:mm:ss","dateFormatItem-hms":"h:mm:ss a"};dojo.provide("dijit.form.nls.validate");dijit.form.nls.validate._built=true;dojo.provide("dijit.form.nls.validate.ROOT");dijit.form.nls.validate.ROOT={"rangeMessage":"This value is out of range.","invalidMessage":"The value entered is not valid.","missingMessage":"This value is required."};dojo.provide("dijit.form.nls.ComboBox");dijit.form.nls.ComboBox._built=true;
dojo.provide("dijit.form.nls.ComboBox.ROOT");dijit.form.nls.ComboBox.ROOT={"previousMessage":"Previous choices","nextMessage":"More choices"};dojo.provide("dojo.nls.dojo_ar");dojo.provide("dijit.nls.common.ar");dijit.nls.common.ar={"buttonOk":"????","buttonCancel":"?????","buttonSave":"???","itemClose":"?????"};dojo.provide("dojo.cldr.nls.gregorian.ar");dojo.cldr.nls.gregorian.ar={"dateFormatItem-yM":"M?/yyyy","field-dayperiod":"?/?","dateFormatItem-yQ":"yyyy Q","dayPeriods-format-wide-pm":"?","field-minute":"???????",
"eraNames":["??? ???????","??????"],"dateFormatItem-MMMEd":"E d MMM","field-day-relative+-1":"???","field-weekday":"?????","dateFormatItem-yQQQ":"y QQQ","dateFormatItem-MMdd":"dd?/MM","days-standAlone-wide":["?????","???????","????????","????????","??????","??????","?????"],"dateFormatItem-MMM":"LLL","months-standAlone-narrow":["?","?","?","?","?","?","?","?","?","?","?","?"],"field-era":"?????","field-hour":"???????","dayPeriods-format-wide-am":"?","quarters-standAlone-abbr":["????? ?????","????? ??????",
"????? ??????","????? ??????"],"dateFormatItem-y":"y","timeFormat-full":"zzzz h:mm:ss a","months-standAlone-abbr":["?????","??????","????","?????","????","?????","?????","?????","??????","??????","??????","??????"],"dateFormatItem-yMMM":"MMM y","field-day-relative+0":"?????","field-day-relative+1":"????","days-standAlone-narrow":["?","?","?","?","?","?","?"],"eraAbbr":["?.?","?"],"field-day-relative+2":"??? ????","dateFormatItem-yyyyMM":"MM?/yyyy","dateFormatItem-yyyyMMMM":"MMMM? y","dateFormat-long":"d MMMM? y",
"timeFormat-medium":"h:mm:ss a","field-zone":"???????","dateFormatItem-Hm":"HH:mm","dateFormat-medium":"dd?/MM?/yyyy","quarters-standAlone-wide":["????? ?????","????? ??????","????? ??????","????? ??????"],"dateFormatItem-yMMMM":"MMMM y","dateFormatItem-ms":"mm:ss","field-year":"?????","quarters-standAlone-narrow":["?","?","?","?"],"field-week":"???????","months-standAlone-wide":["?????","??????","????","?????","????","?????","?????","?????","??????","??????","??????","??????"],"dateFormatItem-MMMMEd":"E d MMMM",
"dateFormatItem-MMMd":"d MMM","quarters-format-narrow":["?","?","?","?"],"dateFormatItem-yyQ":"Q yy","timeFormat-long":"z h:mm:ss a","months-format-abbr":["?????","??????","????","?????","????","?????","?????","?????","??????","??????","??????","??????"],"timeFormat-short":"h:mm a","field-month":"?????","dateFormatItem-MMMMd":"d MMMM","quarters-format-abbr":["????? ?????","????? ??????","????? ??????","????? ??????"],"days-format-abbr":["???","?????","??????","??????","????","????","???"],"dateFormatItem-M":"L",
"days-format-narrow":["?","?","?","?","?","?","?"],"field-second":"???????","field-day":"???","months-format-narrow":["?","?","?","?","?","?","?","?","?","?","?","?"],"days-standAlone-abbr":["???","?????","??????","??????","????","????","???"],"dateFormat-short":"d?/M?/yyyy","dateFormatItem-yMMMEd":"EEE? d MMMM y","dateFormat-full":"EEEE? d MMMM? y","dateFormatItem-Md":"d/?M","dateFormatItem-yMEd":"EEE? d/?M/?yyyy","months-format-wide":["?????","??????","????","?????","????","?????","?????","?????",
"??????","??????","??????","??????"],"dateFormatItem-d":"d","quarters-format-wide":["????? ?????","????? ??????","????? ??????","????? ??????"],"days-format-wide":["?????","???????","????????","????????","??????","??????","?????"],"eraNarrow":["?.?","?"],"dateTimeFormats-appendItem-Day-Of-Week":"{0} {1}","dateTimeFormat-medium":"{1} {0}","dateFormatItem-EEEd":"d EEE","dayPeriods-format-abbr-am":"AM","dateTimeFormats-appendItem-Second":"{0} ({2}: {1})","dateTimeFormats-appendItem-Era":"{0} {1}","dateTimeFormats-appendItem-Week":"{0} ({2}: {1})",
"dateFormatItem-H":"HH","dateFormatItem-h":"h a","dateTimeFormat-long":"{1} {0}","dayPeriods-format-narrow-am":"AM","dateFormatItem-MEd":"E, M-d","dateTimeFormat-full":"{1} {0}","dateTimeFormats-appendItem-Day":"{0} ({2}: {1})","dateFormatItem-hm":"h:mm a","dateTimeFormats-appendItem-Year":"{0} {1}","dateTimeFormats-appendItem-Hour":"{0} ({2}: {1})","dayPeriods-format-abbr-pm":"PM","dateTimeFormats-appendItem-Quarter":"{0} ({2}: {1})","dateTimeFormats-appendItem-Month":"{0} ({2}: {1})","dateTimeFormats-appendItem-Minute":"{0} ({2}: {1})",
"dateTimeFormats-appendItem-Timezone":"{0} {1}","dayPeriods-format-narrow-pm":"PM","dateTimeFormat-short":"{1} {0}","dateFormatItem-Hms":"HH:mm:ss","dateFormatItem-hms":"h:mm:ss a"};dojo.provide("dojo.nls.dojo_ca");dojo.provide("dijit.nls.common.ca");dijit.nls.common.ca={"buttonOk":"D'acord","buttonCancel":"Cancel?la","buttonSave":"Desa","itemClose":"Tanca"};dojo.provide("dojo.cldr.nls.gregorian.ca");dojo.cldr.nls.gregorian.ca={"months-format-narrow":["g","f","m","a","m","j","j","a","s","o","n","d"],
"field-weekday":"dia de la setmana","dateFormatItem-yQQQ":"QQQ y","dateFormatItem-yMEd":"E d/M/yyyy","dateFormatItem-MMMEd":"E d MMM","eraNarrow":["aC","dC"],"dateFormat-long":"d MMMM 'de' y","months-format-wide":["de gener","de febrer","de marc","d?abril","de maig","de juny","de juliol","d?agost","de setembre","d?octubre","de novembre","de desembre"],"dateFormatItem-EEEd":"EEE d","dayPeriods-format-wide-pm":"p.m.","dateFormat-full":"EEEE d MMMM 'de' y","dateFormatItem-Md":"d/M","field-era":"era",
"dateFormatItem-yM":"M/yyyy","months-standAlone-wide":["gener","febrer","marc","abril","maig","juny","juliol","agost","setembre","octubre","novembre","desembre"],"timeFormat-short":"H:mm","quarters-format-wide":["1r trimestre","2n trimestre","3r trimestre","4t trimestre"],"timeFormat-long":"H:mm:ss z","field-year":"any","dateFormatItem-yMMM":"LLL y","dateFormatItem-yQ":"Q yyyy","field-hour":"hora","months-format-abbr":["de gen.","de febr.","de marc","d?abr.","de maig","de juny","de jul.","d?ag.",
"de set.","d?oct.","de nov.","de des."],"dateFormatItem-yyQ":"Q yy","timeFormat-full":"H:mm:ss zzzz","field-day-relative+0":"avui","field-day-relative+1":"dema","field-day-relative+2":"dema passat","dateFormatItem-H":"H","field-day-relative+3":"d'aqui a tres dies","months-standAlone-abbr":["gen.","febr.","marc","abr.","maig","juny","jul.","ag.","set.","oct.","nov.","des."],"quarters-format-abbr":["1T","2T","3T","4T"],"quarters-standAlone-wide":["1r trimestre","2n trimestre","3r trimestre","4t trimestre"],
"dateFormatItem-M":"L","days-standAlone-wide":["diumenge","dilluns","dimarts","dimecres","dijous","divendres","dissabte"],"dateFormatItem-MMMMd":"d MMMM","timeFormat-medium":"H:mm:ss","dateFormatItem-Hm":"H:mm","quarters-standAlone-abbr":["1T","2T","3T","4T"],"eraAbbr":["aC","dC"],"field-minute":"minut","field-dayperiod":"a.m./p.m.","days-standAlone-abbr":["dg","dl","dt","dc","dj","dv","ds"],"dateFormatItem-d":"d","dateFormatItem-ms":"mm:ss","field-day-relative+-1":"ahir","field-day-relative+-2":"abans d'ahir",
"field-day-relative+-3":"fa tres dies","dateFormatItem-MMMd":"d MMM","dateFormatItem-MEd":"E d/M","dateFormatItem-yMMMM":"LLLL 'del' y","field-day":"dia","days-format-wide":["diumenge","dilluns","dimarts","dimecres","dijous","divendres","dissabte"],"field-zone":"zona","dateFormatItem-yyyyMM":"MM/yyyy","dateFormatItem-y":"y","months-standAlone-narrow":["g","f","m","a","m","j","j","a","s","o","n","d"],"dateFormatItem-hm":"h:mm a","days-format-abbr":["dg.","dl.","dt.","dc.","dj.","dv.","ds."],"eraNames":["aC",
"dC"],"days-format-narrow":["g","l","t","c","j","v","s"],"field-month":"mes","days-standAlone-narrow":["g","l","t","c","j","v","s"],"dateFormatItem-MMM":"LLL","dayPeriods-format-wide-am":"a.m.","dateFormatItem-MMMMEd":"E d MMMM","dateFormat-short":"dd/MM/yy","field-second":"segon","dateFormatItem-yMMMEd":"EEE d MMM y","field-week":"setmana","dateFormat-medium":"dd/MM/yyyy","dateFormatItem-mmss":"mm:ss","dateFormatItem-Hms":"H:mm:ss","dateFormatItem-hms":"h:mm:ss a","quarters-standAlone-narrow":["1",
"2","3","4"],"dateTimeFormats-appendItem-Day-Of-Week":"{0} {1}","dateTimeFormat-medium":"{1} {0}","dayPeriods-format-abbr-am":"AM","dateTimeFormats-appendItem-Second":"{0} ({2}: {1})","dateTimeFormats-appendItem-Era":"{0} {1}","dateTimeFormats-appendItem-Week":"{0} ({2}: {1})","quarters-format-narrow":["1","2","3","4"],"dateFormatItem-h":"h a","dateTimeFormat-long":"{1} {0}","dayPeriods-format-narrow-am":"AM","dateTimeFormat-full":"{1} {0}","dateTimeFormats-appendItem-Day":"{0} ({2}: {1})","dateTimeFormats-appendItem-Year":"{0} {1}",
"dateTimeFormats-appendItem-Hour":"{0} ({2}: {1})","dayPeriods-format-abbr-pm":"PM","dateTimeFormats-appendItem-Quarter":"{0} ({2}: {1})","dateTimeFormats-appendItem-Month":"{0} ({2}: {1})","dateTimeFormats-appendItem-Minute":"{0} ({2}: {1})","dateTimeFormats-appendItem-Timezone":"{0} {1}","dayPeriods-format-narrow-pm":"PM","dateTimeFormat-short":"{1} {0}"};dojo.provide("dojo.nls.dojo_cs");dojo.provide("dijit.nls.common.cs");dijit.nls.common.cs={"buttonOk":"OK","buttonCancel":"Storno","buttonSave":"Ulozit",
"itemClose":"Zavrit"};dojo.provide("dojo.cldr.nls.gregorian.cs");dojo.cldr.nls.gregorian.cs={"dayPeriods-format-wide-pm":"odp.","eraNames":["pr.Kr.","po Kr."],"field-day-relative+-1":"Vcera","field-day-relative+-2":"Predevcirem","days-standAlone-wide":["nedele","pondeli","utery","streda","ctvrtek","patek","sobota"],"months-standAlone-narrow":["l","u","b","d","k","c","c","s","z","r","l","p"],"dayPeriods-format-wide-am":"dop.","quarters-standAlone-abbr":["1. ctvrtleti","2. ctvrtleti","3. ctvrtleti",
"4. ctvrtleti"],"timeFormat-full":"H:mm:ss zzzz","months-standAlone-abbr":["1.","2.","3.","4.","5.","6.","7.","8.","9.","10.","11.","12."],"field-day-relative+0":"Dnes","field-day-relative+1":"Zitra","days-standAlone-narrow":["N","P","U","S","C","P","S"],"eraAbbr":["pr.Kr.","po Kr."],"field-day-relative+2":"Pozitri","dateFormat-long":"d. MMMM y","timeFormat-medium":"H:mm:ss","dateFormatItem-Hm":"H:mm","dateFormat-medium":"d.M.yyyy","dateFormatItem-Hms":"H:mm:ss","quarters-standAlone-wide":["1. ctvrtleti",
"2. ctvrtleti","3. ctvrtleti","4. ctvrtleti"],"months-standAlone-wide":["leden","unor","brezen","duben","kveten","cerven","cervenec","srpen","zari","rijen","listopad","prosinec"],"timeFormat-long":"H:mm:ss z","months-format-abbr":["ledna","unora","brezna","dubna","kvetna","cervna","cervence","srpna","zari","rijna","listopadu","prosince"],"timeFormat-short":"H:mm","dateFormatItem-H":"H","quarters-format-abbr":["1. ctvrtleti","2. ctvrtleti","3. ctvrtleti","4. ctvrtleti"],"days-format-abbr":["ne","po",
"ut","st","ct","pa","so"],"days-format-narrow":["N","P","U","S","C","P","S"],"months-format-narrow":["l","u","b","d","k","c","c","s","z","r","l","p"],"days-standAlone-abbr":["ne","po","ut","st","ct","pa","so"],"dateFormat-short":"d.M.yy","dateFormat-full":"EEEE, d. MMMM y","months-format-wide":["ledna","unora","brezna","dubna","kvetna","cervna","cervence","srpna","zari","rijna","listopadu","prosince"],"quarters-format-wide":["1. ctvrtleti","2. ctvrtleti","3. ctvrtleti","4. ctvrtleti"],"days-format-wide":["nedele",
"pondeli","utery","streda","ctvrtek","patek","sobota"],"eraNarrow":["pr.Kr.","po Kr."],"quarters-standAlone-narrow":["1","2","3","4"],"field-weekday":"Day of the Week","dateFormatItem-yQQQ":"y QQQ","dateFormatItem-yMEd":"EEE, y-M-d","dateFormatItem-MMMEd":"E MMM d","dateTimeFormats-appendItem-Day-Of-Week":"{0} {1}","dateTimeFormat-medium":"{1} {0}","dateFormatItem-EEEd":"d EEE","dateFormatItem-Md":"M-d","dayPeriods-format-abbr-am":"AM","dateTimeFormats-appendItem-Second":"{0} ({2}: {1})","field-era":"Era",
"dateFormatItem-yM":"y-M","field-year":"Year","dateFormatItem-yMMM":"y MMM","dateFormatItem-yQ":"y Q","dateTimeFormats-appendItem-Era":"{0} {1}","field-hour":"Hour","dateTimeFormats-appendItem-Week":"{0} ({2}: {1})","dateFormatItem-M":"L","field-minute":"Minute","field-dayperiod":"Dayperiod","dateFormatItem-d":"d","dateFormatItem-ms":"mm:ss","quarters-format-narrow":["1","2","3","4"],"dateFormatItem-h":"h a","dateTimeFormat-long":"{1} {0}","dayPeriods-format-narrow-am":"AM","dateFormatItem-MMMd":"MMM d",
"dateFormatItem-MEd":"E, M-d","dateTimeFormat-full":"{1} {0}","field-day":"Day","field-zone":"Zone","dateTimeFormats-appendItem-Day":"{0} ({2}: {1})","dateFormatItem-y":"y","dateFormatItem-hm":"h:mm a","dateTimeFormats-appendItem-Year":"{0} {1}","dateTimeFormats-appendItem-Hour":"{0} ({2}: {1})","dayPeriods-format-abbr-pm":"PM","dateFormatItem-MMM":"LLL","field-month":"Month","dateTimeFormats-appendItem-Quarter":"{0} ({2}: {1})","dateTimeFormats-appendItem-Month":"{0} ({2}: {1})","dateTimeFormats-appendItem-Minute":"{0} ({2}: {1})",
"field-second":"Second","dateFormatItem-yMMMEd":"EEE, y MMM d","dateTimeFormats-appendItem-Timezone":"{0} {1}","field-week":"Week","dayPeriods-format-narrow-pm":"PM","dateTimeFormat-short":"{1} {0}","dateFormatItem-hms":"h:mm:ss a"};dojo.provide("dojo.nls.dojo_da");dojo.provide("dijit.nls.common.da");dijit.nls.common.da={"buttonOk":"OK","buttonCancel":"Annuller","buttonSave":"Gem","itemClose":"Luk"};dojo.provide("dojo.cldr.nls.gregorian.da");dojo.cldr.nls.gregorian.da={"months-format-narrow":["J",
"F","M","A","M","J","J","A","S","O","N","D"],"field-weekday":"ugedag","dateFormatItem-yQQQ":"QQQ y","dateFormatItem-yMEd":"EEE. d/M/y","dateFormatItem-MMMEd":"E d MMM","eraNarrow":["f.Kr.","e.Kr."],"dateFormat-long":"d. MMM y","months-format-wide":["januar","februar","marts","april","maj","juni","juli","august","september","oktober","november","december"],"dayPeriods-format-wide-pm":"e.m.","dateFormat-full":"EEEE 'den' d. MMMM y","dateFormatItem-Md":"d/M","field-era":"?ra","dateFormatItem-yM":"M/y",
"months-standAlone-wide":["januar","februar","marts","april","maj","juni","juli","august","september","oktober","november","december"],"timeFormat-short":"HH.mm","quarters-format-wide":["1. kvartal","2. kvartal","3. kvartal","4. kvartal"],"timeFormat-long":"HH.mm.ss z","field-year":"ar","dateFormatItem-yMMM":"MMM y","dateFormatItem-yQ":"Q yyyy","field-hour":"time","dateFormatItem-MMdd":"dd/MM","months-format-abbr":["jan.","feb.","mar.","apr.","maj","jun.","jul.","aug.","sep.","okt.","nov.","dec."],
"dateFormatItem-yyQ":"Q. 'kvartal' yy","timeFormat-full":"HH.mm.ss zzzz","field-day-relative+0":"i dag","field-day-relative+1":"i morgen","field-day-relative+2":"i overmorgen","dateFormatItem-H":"HH","field-day-relative+3":"i overovermorgen","months-standAlone-abbr":["jan","feb","mar","apr","maj","jun","jul","aug","sep","okt","nov","dec"],"quarters-format-abbr":["K1","K2","K3","K4"],"quarters-standAlone-wide":["1. kvartal","2. kvartal","3. kvartal","4. kvartal"],"dateFormatItem-M":"M","days-standAlone-wide":["sondag",
"mandag","tirsdag","onsdag","torsdag","fredag","lordag"],"dateFormatItem-yyyyMMM":"MMM y","dateFormatItem-yyMMM":"MMM yy","timeFormat-medium":"HH.mm.ss","dateFormatItem-Hm":"HH.mm","quarters-standAlone-abbr":["K1","K2","K3","K4"],"eraAbbr":["f.Kr.","e.Kr."],"field-minute":"minut","field-dayperiod":"dagtid","days-standAlone-abbr":["son","man","tir","ons","tor","fre","lor"],"dateFormatItem-d":"d.","dateFormatItem-ms":"mm.ss","field-day-relative+-1":"i gar","field-day-relative+-2":"i forgars","field-day-relative+-3":"i forforgars",
"dateFormatItem-MMMd":"d. MMM","dateFormatItem-MEd":"E. d/M","field-day":"dag","days-format-wide":["sondag","mandag","tirsdag","onsdag","torsdag","fredag","lordag"],"field-zone":"zone","dateFormatItem-yyyyMM":"MM/yyyy","dateFormatItem-y":"y","months-standAlone-narrow":["J","F","M","A","M","J","J","A","S","O","N","D"],"dateFormatItem-yyMM":"MM/yy","dateFormatItem-hm":"h.mm a","days-format-abbr":["son","man","tir","ons","tor","fre","lor"],"eraNames":["f.Kr.","e.Kr."],"days-format-narrow":["S","M","T",
"O","T","F","L"],"field-month":"maned","days-standAlone-narrow":["S","M","T","O","T","F","L"],"dateFormatItem-MMM":"MMM","dayPeriods-format-wide-am":"f.m.","dateFormatItem-MMMMEd":"E, d. MMMM","dateFormat-short":"dd/MM/yy","field-second":"sekund","dateFormatItem-yMMMEd":"EEE. d. MMM y","field-week":"uge","dateFormat-medium":"dd/MM/yyyy","dateFormatItem-Hms":"HH.mm.ss","dateFormatItem-hms":"h.mm.ss a","dateFormatItem-yyyy":"y","quarters-standAlone-narrow":["1","2","3","4"],"dateTimeFormats-appendItem-Day-Of-Week":"{0} {1}",
"dateTimeFormat-medium":"{1} {0}","dateFormatItem-EEEd":"d EEE","dayPeriods-format-abbr-am":"AM","dateTimeFormats-appendItem-Second":"{0} ({2}: {1})","dateTimeFormats-appendItem-Era":"{0} {1}","dateTimeFormats-appendItem-Week":"{0} ({2}: {1})","quarters-format-narrow":["1","2","3","4"],"dateFormatItem-h":"h a","dateTimeFormat-long":"{1} {0}","dayPeriods-format-narrow-am":"AM","dateTimeFormat-full":"{1} {0}","dateTimeFormats-appendItem-Day":"{0} ({2}: {1})","dateTimeFormats-appendItem-Year":"{0} {1}",
"dateTimeFormats-appendItem-Hour":"{0} ({2}: {1})","dayPeriods-format-abbr-pm":"PM","dateTimeFormats-appendItem-Quarter":"{0} ({2}: {1})","dateTimeFormats-appendItem-Month":"{0} ({2}: {1})","dateTimeFormats-appendItem-Minute":"{0} ({2}: {1})","dateTimeFormats-appendItem-Timezone":"{0} {1}","dayPeriods-format-narrow-pm":"PM","dateTimeFormat-short":"{1} {0}"};dojo.provide("dojo.nls.dojo_de");dojo.provide("dijit.nls.common.de");dijit.nls.common.de={"buttonOk":"OK","buttonCancel":"Abbrechen","buttonSave":"Speichern",
"itemClose":"Schlie?en"};dojo.provide("dojo.cldr.nls.gregorian.de");dojo.cldr.nls.gregorian.de={"months-format-narrow":["J","F","M","A","M","J","J","A","S","O","N","D"],"field-weekday":"Wochentag","dateFormatItem-yyQQQQ":"QQQQ yy","dateFormatItem-yQQQ":"QQQ y","dateFormatItem-yMEd":"EEE, d.M.y","dateFormatItem-MMMEd":"E d. MMM","eraNarrow":["v. Chr.","n. Chr."],"dayPeriods-format-wide-earlyMorning":"morgens","dayPeriods-format-wide-morning":"vormittags","dateFormat-long":"d. MMMM y","months-format-wide":["Januar",
"Februar","Marz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],"dayPeriods-format-wide-evening":"abends","dateFormatItem-EEEd":"d. EEE","dayPeriods-format-wide-pm":"nachm.","dateFormat-full":"EEEE, d. MMMM y","dateFormatItem-Md":"d.M.","dateFormatItem-yyMMdd":"dd.MM.yy","dayPeriods-format-wide-noon":"Mittag","field-era":"Epoche","dateFormatItem-yM":"M.y","months-standAlone-wide":["Januar","Februar","Marz","April","Mai","Juni","Juli","August","September","Oktober",
"November","Dezember"],"timeFormat-short":"HH:mm","quarters-format-wide":["1. Quartal","2. Quartal","3. Quartal","4. Quartal"],"timeFormat-long":"HH:mm:ss z","field-year":"Jahr","dateFormatItem-yMMM":"MMM y","dateFormatItem-yQ":"Q y","dateFormatItem-yyyyMMMM":"MMMM y","field-hour":"Stunde","dateFormatItem-MMdd":"dd.MM.","months-format-abbr":["Jan","Feb","Mar","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],"dateFormatItem-yyQ":"Q yy","timeFormat-full":"HH:mm:ss zzzz","field-day-relative+0":"heute",
"field-day-relative+1":"morgen","field-day-relative+2":"ubermorgen","dateFormatItem-H":"HH","field-day-relative+3":"uberubermorgen","months-standAlone-abbr":["Jan","Feb","Mar","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],"quarters-format-abbr":["Q1","Q2","Q3","Q4"],"quarters-standAlone-wide":["1. Quartal","2. Quartal","3. Quartal","4. Quartal"],"dateFormatItem-M":"L","days-standAlone-wide":["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],"dateFormatItem-yyMMM":"MMM yy",
"timeFormat-medium":"HH:mm:ss","dateFormatItem-Hm":"HH:mm","eraAbbr":["v. Chr.","n. Chr."],"field-minute":"Minute","field-dayperiod":"Tageshalfte","days-standAlone-abbr":["So.","Mo.","Di.","Mi.","Do.","Fr.","Sa."],"dayPeriods-format-wide-night":"nachts","dateFormatItem-d":"d","dateFormatItem-ms":"mm:ss","field-day-relative+-1":"gestern","field-day-relative+-2":"vorgestern","field-day-relative+-3":"vorvorgestern","dateFormatItem-MMMd":"d. MMM","dateFormatItem-MEd":"E, d.M.","field-day":"Tag","days-format-wide":["Sonntag",
"Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],"field-zone":"Zone","dateFormatItem-y":"y","months-standAlone-narrow":["J","F","M","A","M","J","J","A","S","O","N","D"],"dateFormatItem-yyMM":"MM.yy","days-format-abbr":["So.","Mo.","Di.","Mi.","Do.","Fr.","Sa."],"eraNames":["v. Chr.","n. Chr."],"days-format-narrow":["S","M","D","M","D","F","S"],"field-month":"Monat","days-standAlone-narrow":["S","M","D","M","D","F","S"],"dateFormatItem-MMM":"LLL","dayPeriods-format-wide-am":"vorm.",
"dateFormatItem-MMMMdd":"dd. MMMM","dateFormat-short":"dd.MM.yy","dateFormatItem-MMd":"d.MM.","dayPeriods-format-wide-afternoon":"nachmittags","field-second":"Sekunde","dateFormatItem-yMMMEd":"EEE, d. MMM y","dateFormatItem-Ed":"E d.","field-week":"Woche","dateFormat-medium":"dd.MM.yyyy","dateFormatItem-Hms":"HH:mm:ss","dateFormatItem-yyyy":"y","quarters-standAlone-narrow":["1","2","3","4"],"dateTimeFormats-appendItem-Day-Of-Week":"{0} {1}","dateTimeFormat-medium":"{1} {0}","dayPeriods-format-abbr-am":"AM",
"dateTimeFormats-appendItem-Second":"{0} ({2}: {1})","dateTimeFormats-appendItem-Era":"{0} {1}","dateTimeFormats-appendItem-Week":"{0} ({2}: {1})","quarters-standAlone-abbr":["Q1","Q2","Q3","Q4"],"quarters-format-narrow":["1","2","3","4"],"dateFormatItem-h":"h a","dateTimeFormat-long":"{1} {0}","dayPeriods-format-narrow-am":"AM","dateTimeFormat-full":"{1} {0}","dateTimeFormats-appendItem-Day":"{0} ({2}: {1})","dateFormatItem-hm":"h:mm a","dateTimeFormats-appendItem-Year":"{0} {1}","dateTimeFormats-appendItem-Hour":"{0} ({2}: {1})",
"dayPeriods-format-abbr-pm":"PM","dateTimeFormats-appendItem-Quarter":"{0} ({2}: {1})","dateTimeFormats-appendItem-Month":"{0} ({2}: {1})","dateTimeFormats-appendItem-Minute":"{0} ({2}: {1})","dateTimeFormats-appendItem-Timezone":"{0} {1}","dayPeriods-format-narrow-pm":"PM","dateTimeFormat-short":"{1} {0}","dateFormatItem-hms":"h:mm:ss a"};dojo.provide("dojo.nls.dojo_de-de");dojo.provide("dijit.nls.common.de_de");dijit.nls.common.de_de={"buttonOk":"OK","buttonCancel":"Abbrechen","buttonSave":"Speichern",
"itemClose":"Schlie?en"};dojo.provide("dojo.cldr.nls.gregorian.de_de");dojo.cldr.nls.gregorian.de_de={"months-format-narrow":["J","F","M","A","M","J","J","A","S","O","N","D"],"field-weekday":"Wochentag","dateFormatItem-yyQQQQ":"QQQQ yy","dateFormatItem-yQQQ":"QQQ y","dateFormatItem-yMEd":"EEE, d.M.y","dateFormatItem-MMMEd":"E d. MMM","eraNarrow":["v. Chr.","n. Chr."],"dayPeriods-format-wide-earlyMorning":"morgens","dayPeriods-format-wide-morning":"vormittags","dateFormat-long":"d. MMMM y","months-format-wide":["Januar",
"Februar","Marz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],"dayPeriods-format-wide-evening":"abends","dateFormatItem-EEEd":"d. EEE","dayPeriods-format-wide-pm":"nachm.","dateFormat-full":"EEEE, d. MMMM y","dateFormatItem-Md":"d.M.","dateFormatItem-yyMMdd":"dd.MM.yy","dayPeriods-format-wide-noon":"Mittag","field-era":"Epoche","dateFormatItem-yM":"M.y","months-standAlone-wide":["Januar","Februar","Marz","April","Mai","Juni","Juli","August","September","Oktober",
"November","Dezember"],"timeFormat-short":"HH:mm","quarters-format-wide":["1. Quartal","2. Quartal","3. Quartal","4. Quartal"],"timeFormat-long":"HH:mm:ss z","field-year":"Jahr","dateFormatItem-yMMM":"MMM y","dateFormatItem-yQ":"Q y","dateFormatItem-yyyyMMMM":"MMMM y","field-hour":"Stunde","dateFormatItem-MMdd":"dd.MM.","months-format-abbr":["Jan","Feb","Mar","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],"dateFormatItem-yyQ":"Q yy","timeFormat-full":"HH:mm:ss zzzz","field-day-relative+0":"heute",
"field-day-relative+1":"morgen","field-day-relative+2":"ubermorgen","dateFormatItem-H":"HH","field-day-relative+3":"uberubermorgen","months-standAlone-abbr":["Jan","Feb","Mar","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],"quarters-format-abbr":["Q1","Q2","Q3","Q4"],"quarters-standAlone-wide":["1. Quartal","2. Quartal","3. Quartal","4. Quartal"],"dateFormatItem-M":"L","days-standAlone-wide":["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],"dateFormatItem-yyMMM":"MMM yy",
"timeFormat-medium":"HH:mm:ss","dateFormatItem-Hm":"HH:mm","eraAbbr":["v. Chr.","n. Chr."],"field-minute":"Minute","field-dayperiod":"Tageshalfte","days-standAlone-abbr":["So.","Mo.","Di.","Mi.","Do.","Fr.","Sa."],"dayPeriods-format-wide-night":"nachts","dateFormatItem-d":"d","dateFormatItem-ms":"mm:ss","field-day-relative+-1":"gestern","field-day-relative+-2":"vorgestern","field-day-relative+-3":"vorvorgestern","dateFormatItem-MMMd":"d. MMM","dateFormatItem-MEd":"E, d.M.","field-day":"Tag","days-format-wide":["Sonntag",
"Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],"field-zone":"Zone","dateFormatItem-y":"y","months-standAlone-narrow":["J","F","M","A","M","J","J","A","S","O","N","D"],"dateFormatItem-yyMM":"MM.yy","days-format-abbr":["So.","Mo.","Di.","Mi.","Do.","Fr.","Sa."],"eraNames":["v. Chr.","n. Chr."],"days-format-narrow":["S","M","D","M","D","F","S"],"field-month":"Monat","days-standAlone-narrow":["S","M","D","M","D","F","S"],"dateFormatItem-MMM":"LLL","dayPeriods-format-wide-am":"vorm.",
"dateFormatItem-MMMMdd":"dd. MMMM","dateFormat-short":"dd.MM.yy","dateFormatItem-MMd":"d.MM.","dayPeriods-format-wide-afternoon":"nachmittags","field-second":"Sekunde","dateFormatItem-yMMMEd":"EEE, d. MMM y","dateFormatItem-Ed":"E d.","field-week":"Woche","dateFormat-medium":"dd.MM.yyyy","dateFormatItem-Hms":"HH:mm:ss","dateFormatItem-yyyy":"y","quarters-standAlone-narrow":["1","2","3","4"],"dateTimeFormats-appendItem-Day-Of-Week":"{0} {1}","dateTimeFormat-medium":"{1} {0}","dayPeriods-format-abbr-am":"AM",
"dateTimeFormats-appendItem-Second":"{0} ({2}: {1})","dateTimeFormats-appendItem-Era":"{0} {1}","dateTimeFormats-appendItem-Week":"{0} ({2}: {1})","quarters-standAlone-abbr":["Q1","Q2","Q3","Q4"],"quarters-format-narrow":["1","2","3","4"],"dateFormatItem-h":"h a","dateTimeFormat-long":"{1} {0}","dayPeriods-format-narrow-am":"AM","dateTimeFormat-full":"{1} {0}","dateTimeFormats-appendItem-Day":"{0} ({2}: {1})","dateFormatItem-hm":"h:mm a","dateTimeFormats-appendItem-Year":"{0} {1}","dateTimeFormats-appendItem-Hour":"{0} ({2}: {1})",
"dayPeriods-format-abbr-pm":"PM","dateTimeFormats-appendItem-Quarter":"{0} ({2}: {1})","dateTimeFormats-appendItem-Month":"{0} ({2}: {1})","dateTimeFormats-appendItem-Minute":"{0} ({2}: {1})","dateTimeFormats-appendItem-Timezone":"{0} {1}","dayPeriods-format-narrow-pm":"PM","dateTimeFormat-short":"{1} {0}","dateFormatItem-hms":"h:mm:ss a"};dojo.provide("dojo.nls.dojo_el");dojo.provide("dijit.nls.common.el");dijit.nls.common.el={"buttonOk":"??","buttonCancel":"???????","buttonSave":"??????????","itemClose":"????????"};
dojo.provide("dojo.cldr.nls.gregorian.el");dojo.cldr.nls.gregorian.el={"months-format-narrow":["?","?","?","?","?","?","?","?","?","?","?","?"],"field-weekday":"????? ?????????","dateFormatItem-yyQQQQ":"QQQQ yy","dateFormatItem-yQQQ":"y QQQ","dateFormatItem-yMEd":"EEE, d/M/yyyy","dateFormatItem-MMMEd":"E, d MMM","eraNarrow":["?.?.","?.?."],"dateFormat-long":"d MMMM y","months-format-wide":["??????????","???????????","???????","????????","?????","???????","???????","?????????","???????????","?????????",
"?????????","??????????"],"dateFormatItem-EEEd":"EEE d","dayPeriods-format-wide-pm":"?.?.","dateFormat-full":"EEEE, d MMMM y","dateFormatItem-Md":"d/M","field-era":"????????","dateFormatItem-yM":"M/yyyy","months-standAlone-wide":["??????????","???????????","???????","????????","?????","???????","???????","?????????","???????????","?????????","?????????","??????????"],"timeFormat-short":"h:mm a","quarters-format-wide":["1? ???????","2? ???????","3? ???????","4? ???????"],"timeFormat-long":"h:mm:ss a z",
"field-year":"????","dateFormatItem-yMMM":"MMM y","dateFormatItem-yQ":"y Q","dateFormatItem-yyyyMMMM":"MMMM y","field-hour":"???","dateFormatItem-MMdd":"dd/MM","months-format-abbr":["???","???","???","???","???","????","????","???","???","???","???","???"],"dateFormatItem-yyQ":"Q yy","timeFormat-full":"h:mm:ss a zzzz","field-day-relative+0":"??????","field-day-relative+1":"?????","field-day-relative+2":"????????","dateFormatItem-H":"HH","field-day-relative+3":"?? ????? ?????? ??? ????","months-standAlone-abbr":["???",
"???","???","???","???","????","????","???","???","???","???","???"],"quarters-format-abbr":["?1","?2","?3","?4"],"quarters-standAlone-wide":["1? ???????","2? ???????","3? ???????","4? ???????"],"dateFormatItem-HHmmss":"HH:mm:ss","dateFormatItem-M":"L","days-standAlone-wide":["???????","???????","?????","???????","??????","?????????","???????"],"dateFormatItem-MMMMd":"d MMMM","dateFormatItem-yyMMM":"MMM yy","timeFormat-medium":"h:mm:ss a","dateFormatItem-Hm":"HH:mm","quarters-standAlone-abbr":["?1",
"?2","?3","?4"],"eraAbbr":["?.?.","?.?."],"field-minute":"?????","field-dayperiod":"?.?./?.?.","days-standAlone-abbr":["???","???","???","???","???","???","???"],"dateFormatItem-d":"d","dateFormatItem-ms":"mm:ss","field-day-relative+-1":"????","field-day-relative+-2":"???????","field-day-relative+-3":"???? ??? ????? ??????","dateFormatItem-MMMd":"d MMM","dateFormatItem-MEd":"E, d/M","dateFormatItem-yMMMM":"LLLL y","field-day":"?????","days-format-wide":["???????","???????","?????","???????","??????",
"?????????","???????"],"field-zone":"????","dateFormatItem-yyyyMM":"MM/yyyy","dateFormatItem-y":"y","months-standAlone-narrow":["?","?","?","?","?","?","?","?","?","?","?","?"],"dateFormatItem-yyMM":"MM/yy","days-format-abbr":["???","???","???","???","???","???","???"],"eraNames":["?.?.","?.?."],"days-format-narrow":["?","?","?","?","?","?","?"],"field-month":"?????","days-standAlone-narrow":["?","?","?","?","?","?","?"],"dateFormatItem-MMM":"LLL","dateFormatItem-HHmm":"HH:mm","dayPeriods-format-wide-am":"?.?.",
"dateFormatItem-MMMMEd":"E, d MMMM","dateFormatItem-MMMMdd":"dd MMMM","dateFormat-short":"d/M/yy","field-second":"????????????","dateFormatItem-yMMMEd":"EEE, d MMM y","dateFormatItem-Ed":"E d","field-week":"????????","dateFormat-medium":"d MMM y","dateFormatItem-mmss":"mm:ss","dateFormatItem-yyyy":"y","quarters-standAlone-narrow":["1","2","3","4"],"dateTimeFormats-appendItem-Day-Of-Week":"{0} {1}","dateTimeFormat-medium":"{1} {0}","dayPeriods-format-abbr-am":"AM","dateTimeFormats-appendItem-Second":"{0} ({2}: {1})",
"dateTimeFormats-appendItem-Era":"{0} {1}","dateTimeFormats-appendItem-Week":"{0} ({2}: {1})","quarters-format-narrow":["1","2","3","4"],"dateFormatItem-h":"h a","dateTimeFormat-long":"{1} {0}","dayPeriods-format-narrow-am":"AM","dateTimeFormat-full":"{1} {0}","dateTimeFormats-appendItem-Day":"{0} ({2}: {1})","dateFormatItem-hm":"h:mm a","dateTimeFormats-appendItem-Year":"{0} {1}","dateTimeFormats-appendItem-Hour":"{0} ({2}: {1})","dayPeriods-format-abbr-pm":"PM","dateTimeFormats-appendItem-Quarter":"{0} ({2}: {1})",
"dateTimeFormats-appendItem-Month":"{0} ({2}: {1})","dateTimeFormats-appendItem-Minute":"{0} ({2}: {1})","dateTimeFormats-appendItem-Timezone":"{0} {1}","dayPeriods-format-narrow-pm":"PM","dateTimeFormat-short":"{1} {0}","dateFormatItem-Hms":"HH:mm:ss","dateFormatItem-hms":"h:mm:ss a"};dojo.provide("dojo.nls.dojo_en");dojo.provide("dijit.nls.common.en");dijit.nls.common.en={"buttonOk":"OK","buttonCancel":"Cancel","buttonSave":"Save","itemClose":"Close"};dojo.provide("dojo.cldr.nls.gregorian.en");
dojo.cldr.nls.gregorian.en={"dateFormatItem-yM":"M/y","field-dayperiod":"AM/PM","dateFormatItem-yQ":"Q y","dayPeriods-format-wide-pm":"PM","field-minute":"Minute","eraNames":["Before Christ","Anno Domini"],"dateFormatItem-MMMEd":"E, MMM d","dateTimeFormat-full":"{1} {0}","field-day-relative+-1":"Yesterday","field-weekday":"Day of the Week","dateFormatItem-hms":"h:mm:ss a","dateFormatItem-yQQQ":"QQQ y","days-standAlone-wide":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],
"dateFormatItem-MMM":"LLL","months-standAlone-narrow":["J","F","M","A","M","J","J","A","S","O","N","D"],"dateTimeFormat-short":"{1} {0}","field-era":"Era","field-hour":"Hour","dayPeriods-format-wide-am":"AM","dateTimeFormat-medium":"{1} {0}","dateFormatItem-y":"y","timeFormat-full":"h:mm:ss a zzzz","months-standAlone-abbr":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"dateFormatItem-yMMM":"MMM y","field-day-relative+0":"Today","field-day-relative+1":"Tomorrow","days-standAlone-narrow":["S",
"M","T","W","T","F","S"],"eraAbbr":["BC","AD"],"dateFormat-long":"MMMM d, y","timeFormat-medium":"h:mm:ss a","dateFormatItem-EEEd":"d EEE","field-zone":"Zone","dateFormatItem-Hm":"HH:mm","dateFormat-medium":"MMM d, y","dateFormatItem-Hms":"HH:mm:ss","quarters-standAlone-wide":["1st quarter","2nd quarter","3rd quarter","4th quarter"],"dateFormatItem-ms":"mm:ss","field-year":"Year","quarters-standAlone-narrow":["1","2","3","4"],"dateTimeFormat-long":"{1} {0}","field-week":"Week","months-standAlone-wide":["January",
"February","March","April","May","June","July","August","September","October","November","December"],"dateFormatItem-MMMd":"MMM d","timeFormat-long":"h:mm:ss a z","months-format-abbr":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"dayPeriods-format-wide-noon":"noon","timeFormat-short":"h:mm a","field-month":"Month","quarters-format-abbr":["Q1","Q2","Q3","Q4"],"days-format-abbr":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"dateFormatItem-M":"L","days-format-narrow":["S",
"M","T","W","T","F","S"],"field-second":"Second","field-day":"Day","dateFormatItem-MEd":"E, M/d","months-format-narrow":["J","F","M","A","M","J","J","A","S","O","N","D"],"dateFormatItem-hm":"h:mm a","days-standAlone-abbr":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"dateFormat-short":"M/d/yy","dateFormatItem-yMMMEd":"EEE, MMM d, y","dateFormat-full":"EEEE, MMMM d, y","dateFormatItem-Md":"M/d","dateFormatItem-yMEd":"EEE, M/d/y","months-format-wide":["January","February","March","April","May","June",
"July","August","September","October","November","December"],"dateFormatItem-d":"d","quarters-format-wide":["1st quarter","2nd quarter","3rd quarter","4th quarter"],"days-format-wide":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"eraNarrow":["B","A"],"dateTimeFormats-appendItem-Day-Of-Week":"{0} {1}","dayPeriods-format-abbr-am":"AM","dateTimeFormats-appendItem-Second":"{0} ({2}: {1})","dateTimeFormats-appendItem-Era":"{0} {1}","dateTimeFormats-appendItem-Week":"{0} ({2}: {1})",
"dateFormatItem-H":"HH","quarters-standAlone-abbr":["Q1","Q2","Q3","Q4"],"quarters-format-narrow":["1","2","3","4"],"dateFormatItem-h":"h a","dayPeriods-format-narrow-am":"AM","dateTimeFormats-appendItem-Day":"{0} ({2}: {1})","dateTimeFormats-appendItem-Year":"{0} {1}","dateTimeFormats-appendItem-Hour":"{0} ({2}: {1})","dayPeriods-format-abbr-pm":"PM","dateTimeFormats-appendItem-Quarter":"{0} ({2}: {1})","dateTimeFormats-appendItem-Month":"{0} ({2}: {1})","dateTimeFormats-appendItem-Minute":"{0} ({2}: {1})",
"dateTimeFormats-appendItem-Timezone":"{0} {1}","dayPeriods-format-narrow-pm":"PM"};dojo.provide("dojo.nls.dojo_en-gb");dojo.provide("dijit.nls.common.en_gb");dijit.nls.common.en_gb={"buttonOk":"OK","buttonCancel":"Cancel","buttonSave":"Save","itemClose":"Close"};dojo.provide("dojo.cldr.nls.gregorian.en_gb");dojo.cldr.nls.gregorian.en_gb={"dateFormatItem-yyMMM":"MMM yy","dateFormatItem-Md":"d/M","dateFormatItem-yMEd":"EEE, d/M/yyyy","dateFormatItem-yyyyMMMM":"MMMM y","timeFormat-full":"HH:mm:ss zzzz",
"timeFormat-medium":"HH:mm:ss","dateFormatItem-MEd":"E, d/M","dateFormat-medium":"d MMM y","dateFormatItem-MMdd":"dd/MM","dateFormatItem-yyyyMM":"MM/yyyy","dateFormat-full":"EEEE, d MMMM y","timeFormat-long":"HH:mm:ss z","timeFormat-short":"HH:mm","dateFormat-short":"dd/MM/yyyy","dateFormatItem-MMMMd":"d MMMM","dateFormat-long":"d MMMM y","dateFormatItem-MMMEd":"E d MMM","dateFormatItem-yM":"M/y","field-dayperiod":"AM/PM","dateFormatItem-yQ":"Q y","dayPeriods-format-wide-pm":"PM","field-minute":"Minute",
"eraNames":["Before Christ","Anno Domini"],"dateTimeFormat-full":"{1} {0}","field-day-relative+-1":"Yesterday","field-weekday":"Day of the Week","dateFormatItem-hms":"h:mm:ss a","dateFormatItem-yQQQ":"QQQ y","days-standAlone-wide":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"dateFormatItem-MMM":"LLL","months-standAlone-narrow":["J","F","M","A","M","J","J","A","S","O","N","D"],"dateTimeFormat-short":"{1} {0}","field-era":"Era","field-hour":"Hour","dayPeriods-format-wide-am":"AM",
"dateTimeFormat-medium":"{1} {0}","dateFormatItem-y":"y","months-standAlone-abbr":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"dateFormatItem-yMMM":"MMM y","field-day-relative+0":"Today","field-day-relative+1":"Tomorrow","days-standAlone-narrow":["S","M","T","W","T","F","S"],"eraAbbr":["BC","AD"],"dateFormatItem-EEEd":"d EEE","field-zone":"Zone","dateFormatItem-Hm":"HH:mm","dateFormatItem-Hms":"HH:mm:ss","quarters-standAlone-wide":["1st quarter","2nd quarter","3rd quarter",
"4th quarter"],"dateFormatItem-ms":"mm:ss","field-year":"Year","quarters-standAlone-narrow":["1","2","3","4"],"dateTimeFormat-long":"{1} {0}","field-week":"Week","months-standAlone-wide":["January","February","March","April","May","June","July","August","September","October","November","December"],"dateFormatItem-MMMd":"MMM d","months-format-abbr":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"dayPeriods-format-wide-noon":"noon","field-month":"Month","quarters-format-abbr":["Q1",
"Q2","Q3","Q4"],"days-format-abbr":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"dateFormatItem-M":"L","days-format-narrow":["S","M","T","W","T","F","S"],"field-second":"Second","field-day":"Day","months-format-narrow":["J","F","M","A","M","J","J","A","S","O","N","D"],"dateFormatItem-hm":"h:mm a","days-standAlone-abbr":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"dateFormatItem-yMMMEd":"EEE, MMM d, y","months-format-wide":["January","February","March","April","May","June","July","August","September",
"October","November","December"],"dateFormatItem-d":"d","quarters-format-wide":["1st quarter","2nd quarter","3rd quarter","4th quarter"],"days-format-wide":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"eraNarrow":["B","A"],"dateTimeFormats-appendItem-Day-Of-Week":"{0} {1}","dayPeriods-format-abbr-am":"AM","dateTimeFormats-appendItem-Second":"{0} ({2}: {1})","dateTimeFormats-appendItem-Era":"{0} {1}","dateTimeFormats-appendItem-Week":"{0} ({2}: {1})","dateFormatItem-H":"HH",
"quarters-standAlone-abbr":["Q1","Q2","Q3","Q4"],"quarters-format-narrow":["1","2","3","4"],"dateFormatItem-h":"h a","dayPeriods-format-narrow-am":"AM","dateTimeFormats-appendItem-Day":"{0} ({2}: {1})","dateTimeFormats-appendItem-Year":"{0} {1}","dateTimeFormats-appendItem-Hour":"{0} ({2}: {1})","dayPeriods-format-abbr-pm":"PM","dateTimeFormats-appendItem-Quarter":"{0} ({2}: {1})","dateTimeFormats-appendItem-Month":"{0} ({2}: {1})","dateTimeFormats-appendItem-Minute":"{0} ({2}: {1})","dateTimeFormats-appendItem-Timezone":"{0} {1}",
"dayPeriods-format-narrow-pm":"PM"};dojo.provide("dojo.nls.dojo_en-us");dojo.provide("dijit.nls.common.en_us");dijit.nls.common.en_us={"buttonOk":"OK","buttonCancel":"Cancel","buttonSave":"Save","itemClose":"Close"};dojo.provide("dojo.cldr.nls.gregorian.en_us");dojo.cldr.nls.gregorian.en_us={"dateFormatItem-yM":"M/y","field-dayperiod":"AM/PM","dateFormatItem-yQ":"Q y","dayPeriods-format-wide-pm":"PM","field-minute":"Minute","eraNames":["Before Christ","Anno Domini"],"dateFormatItem-MMMEd":"E, MMM d",
"dateTimeFormat-full":"{1} {0}","field-day-relative+-1":"Yesterday","field-weekday":"Day of the Week","dateFormatItem-hms":"h:mm:ss a","dateFormatItem-yQQQ":"QQQ y","days-standAlone-wide":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"dateFormatItem-MMM":"LLL","months-standAlone-narrow":["J","F","M","A","M","J","J","A","S","O","N","D"],"dateTimeFormat-short":"{1} {0}","field-era":"Era","field-hour":"Hour","dayPeriods-format-wide-am":"AM","dateTimeFormat-medium":"{1} {0}",
"dateFormatItem-y":"y","timeFormat-full":"h:mm:ss a zzzz","months-standAlone-abbr":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"dateFormatItem-yMMM":"MMM y","field-day-relative+0":"Today","field-day-relative+1":"Tomorrow","days-standAlone-narrow":["S","M","T","W","T","F","S"],"eraAbbr":["BC","AD"],"dateFormat-long":"MMMM d, y","timeFormat-medium":"h:mm:ss a","dateFormatItem-EEEd":"d EEE","field-zone":"Zone","dateFormatItem-Hm":"HH:mm","dateFormat-medium":"MMM d, y","dateFormatItem-Hms":"HH:mm:ss",
"quarters-standAlone-wide":["1st quarter","2nd quarter","3rd quarter","4th quarter"],"dateFormatItem-ms":"mm:ss","field-year":"Year","quarters-standAlone-narrow":["1","2","3","4"],"dateTimeFormat-long":"{1} {0}","field-week":"Week","months-standAlone-wide":["January","February","March","April","May","June","July","August","September","October","November","December"],"dateFormatItem-MMMd":"MMM d","timeFormat-long":"h:mm:ss a z","months-format-abbr":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug",
"Sep","Oct","Nov","Dec"],"dayPeriods-format-wide-noon":"noon","timeFormat-short":"h:mm a","field-month":"Month","quarters-format-abbr":["Q1","Q2","Q3","Q4"],"days-format-abbr":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"dateFormatItem-M":"L","days-format-narrow":["S","M","T","W","T","F","S"],"field-second":"Second","field-day":"Day","dateFormatItem-MEd":"E, M/d","months-format-narrow":["J","F","M","A","M","J","J","A","S","O","N","D"],"dateFormatItem-hm":"h:mm a","days-standAlone-abbr":["Sun","Mon",
"Tue","Wed","Thu","Fri","Sat"],"dateFormat-short":"M/d/yy","dateFormatItem-yMMMEd":"EEE, MMM d, y","dateFormat-full":"EEEE, MMMM d, y","dateFormatItem-Md":"M/d","dateFormatItem-yMEd":"EEE, M/d/y","months-format-wide":["January","February","March","April","May","June","July","August","September","October","November","December"],"dateFormatItem-d":"d","quarters-format-wide":["1st quarter","2nd quarter","3rd quarter","4th quarter"],"days-format-wide":["Sunday","Monday","Tuesday","Wednesday","Thursday",
"Friday","Saturday"],"eraNarrow":["B","A"],"dateTimeFormats-appendItem-Day-Of-Week":"{0} {1}","dayPeriods-format-abbr-am":"AM","dateTimeFormats-appendItem-Second":"{0} ({2}: {1})","dateTimeFormats-appendItem-Era":"{0} {1}","dateTimeFormats-appendItem-Week":"{0} ({2}: {1})","dateFormatItem-H":"HH","quarters-standAlone-abbr":["Q1","Q2","Q3","Q4"],"quarters-format-narrow":["1","2","3","4"],"dateFormatItem-h":"h a","dayPeriods-format-narrow-am":"AM","dateTimeFormats-appendItem-Day":"{0} ({2}: {1})","dateTimeFormats-appendItem-Year":"{0} {1}",
"dateTimeFormats-appendItem-Hour":"{0} ({2}: {1})","dayPeriods-format-abbr-pm":"PM","dateTimeFormats-appendItem-Quarter":"{0} ({2}: {1})","dateTimeFormats-appendItem-Month":"{0} ({2}: {1})","dateTimeFormats-appendItem-Minute":"{0} ({2}: {1})","dateTimeFormats-appendItem-Timezone":"{0} {1}","dayPeriods-format-narrow-pm":"PM"};dojo.provide("dojo.nls.dojo_es");dojo.provide("dijit.nls.common.es");dijit.nls.common.es={"buttonOk":"Aceptar","buttonCancel":"Cancelar","buttonSave":"Guardar","itemClose":"Cerrar"};
dojo.provide("dojo.cldr.nls.gregorian.es");dojo.cldr.nls.gregorian.es={"months-format-narrow":["E","F","M","A","M","J","J","A","S","O","N","D"],"field-weekday":"dia de la semana","dateFormatItem-yyQQQQ":"QQQQ 'de' yy","dateFormatItem-yQQQ":"QQQ y","dateFormatItem-yMEd":"EEE d/M/y","dateFormatItem-MMMEd":"E d MMM","eraNarrow":["a.C.","d.C."],"dateFormatItem-MMMdd":"dd-MMM","dateFormat-long":"d 'de' MMMM 'de' y","months-format-wide":["enero","febrero","marzo","abril","mayo","junio","julio","agosto",
"septiembre","octubre","noviembre","diciembre"],"dateFormatItem-EEEd":"EEE d","dayPeriods-format-wide-pm":"p.m.","dateFormat-full":"EEEE d 'de' MMMM 'de' y","dateFormatItem-Md":"d/M","field-era":"era","dateFormatItem-yM":"M/y","months-standAlone-wide":["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],"timeFormat-short":"HH:mm","quarters-format-wide":["1er trimestre","2? trimestre","3er trimestre","4? trimestre"],"timeFormat-long":"HH:mm:ss z",
"field-year":"ano","dateFormatItem-yMMM":"MMM y","dateFormatItem-yQ":"Q y","field-hour":"hora","months-format-abbr":["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],"dateFormatItem-yyQ":"Q yy","timeFormat-full":"HH:mm:ss zzzz","field-day-relative+0":"hoy","field-day-relative+1":"manana","field-day-relative+2":"pasado manana","field-day-relative+3":"Dentro de tres dias","months-standAlone-abbr":["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],"quarters-format-abbr":["T1",
"T2","T3","T4"],"quarters-standAlone-wide":["1er trimestre","2? trimestre","3er trimestre","4? trimestre"],"dateFormatItem-M":"L","days-standAlone-wide":["domingo","lunes","martes","miercoles","jueves","viernes","sabado"],"dateFormatItem-MMMMd":"d 'de' MMMM","dateFormatItem-yyMMM":"MMM-yy","timeFormat-medium":"HH:mm:ss","dateFormatItem-Hm":"HH:mm","quarters-standAlone-abbr":["T1","T2","T3","T4"],"eraAbbr":["a.C.","d.C."],"field-minute":"minuto","field-dayperiod":"periodo del dia","days-standAlone-abbr":["dom",
"lun","mar","mie","jue","vie","sab"],"dateFormatItem-d":"d","dateFormatItem-ms":"mm:ss","field-day-relative+-1":"ayer","dateFormatItem-h":"hh a","field-day-relative+-2":"antes de ayer","field-day-relative+-3":"Hace tres dias","dateFormatItem-MMMd":"d MMM","dateFormatItem-MEd":"E, d/M","dateFormatItem-yMMMM":"MMMM 'de' y","field-day":"dia","days-format-wide":["domingo","lunes","martes","miercoles","jueves","viernes","sabado"],"field-zone":"zona","dateFormatItem-yyyyMM":"MM/yyyy","dateFormatItem-y":"y",
"months-standAlone-narrow":["E","F","M","A","M","J","J","A","S","O","N","D"],"dateFormatItem-yyMM":"MM/yy","dateFormatItem-hm":"hh:mm a","days-format-abbr":["dom","lun","mar","mie","jue","vie","sab"],"eraNames":["antes de Cristo","anno Domini"],"days-format-narrow":["D","L","M","M","J","V","S"],"field-month":"mes","days-standAlone-narrow":["D","L","M","M","J","V","S"],"dateFormatItem-MMM":"LLL","dayPeriods-format-wide-am":"a.m.","dateFormat-short":"dd/MM/yy","dateFormatItem-MMd":"d/MM","field-second":"segundo",
"dateFormatItem-yMMMEd":"EEE, d MMM y","field-week":"semana","dateFormat-medium":"dd/MM/yyyy","dateFormatItem-Hms":"HH:mm:ss","dateFormatItem-hms":"hh:mm:ss a","quarters-standAlone-narrow":["1","2","3","4"],"dateTimeFormats-appendItem-Day-Of-Week":"{0} {1}","dateTimeFormat-medium":"{1} {0}","dayPeriods-format-abbr-am":"AM","dateTimeFormats-appendItem-Second":"{0} ({2}: {1})","dateTimeFormats-appendItem-Era":"{0} {1}","dateTimeFormats-appendItem-Week":"{0} ({2}: {1})","dateFormatItem-H":"HH","quarters-format-narrow":["1",
"2","3","4"],"dateTimeFormat-long":"{1} {0}","dayPeriods-format-narrow-am":"AM","dateTimeFormat-full":"{1} {0}","dateTimeFormats-appendItem-Day":"{0} ({2}: {1})","dateTimeFormats-appendItem-Year":"{0} {1}","dateTimeFormats-appendItem-Hour":"{0} ({2}: {1})","dayPeriods-format-abbr-pm":"PM","dateTimeFormats-appendItem-Quarter":"{0} ({2}: {1})","dateTimeFormats-appendItem-Month":"{0} ({2}: {1})","dateTimeFormats-appendItem-Minute":"{0} ({2}: {1})","dateTimeFormats-appendItem-Timezone":"{0} {1}","dayPeriods-format-narrow-pm":"PM",
"dateTimeFormat-short":"{1} {0}"};dojo.provide("dojo.nls.dojo_es-es");dojo.provide("dijit.nls.common.es_es");dijit.nls.common.es_es={"buttonOk":"Aceptar","buttonCancel":"Cancelar","buttonSave":"Guardar","itemClose":"Cerrar"};dojo.provide("dojo.cldr.nls.gregorian.es_es");dojo.cldr.nls.gregorian.es_es={"months-format-narrow":["E","F","M","A","M","J","J","A","S","O","N","D"],"field-weekday":"dia de la semana","dateFormatItem-yyQQQQ":"QQQQ 'de' yy","dateFormatItem-yQQQ":"QQQ y","dateFormatItem-yMEd":"EEE d/M/y",
"dateFormatItem-MMMEd":"E d MMM","eraNarrow":["a.C.","d.C."],"dateFormatItem-MMMdd":"dd-MMM","dateFormat-long":"d 'de' MMMM 'de' y","months-format-wide":["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],"dateFormatItem-EEEd":"EEE d","dayPeriods-format-wide-pm":"p.m.","dateFormat-full":"EEEE d 'de' MMMM 'de' y","dateFormatItem-Md":"d/M","field-era":"era","dateFormatItem-yM":"M/y","months-standAlone-wide":["enero","febrero","marzo","abril",
"mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],"timeFormat-short":"HH:mm","quarters-format-wide":["1er trimestre","2? trimestre","3er trimestre","4? trimestre"],"timeFormat-long":"HH:mm:ss z","field-year":"ano","dateFormatItem-yMMM":"MMM y","dateFormatItem-yQ":"Q y","field-hour":"hora","months-format-abbr":["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],"dateFormatItem-yyQ":"Q yy","timeFormat-full":"HH:mm:ss zzzz","field-day-relative+0":"hoy",
"field-day-relative+1":"manana","field-day-relative+2":"pasado manana","field-day-relative+3":"Dentro de tres dias","months-standAlone-abbr":["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],"quarters-format-abbr":["T1","T2","T3","T4"],"quarters-standAlone-wide":["1er trimestre","2? trimestre","3er trimestre","4? trimestre"],"dateFormatItem-M":"L","days-standAlone-wide":["domingo","lunes","martes","miercoles","jueves","viernes","sabado"],"dateFormatItem-MMMMd":"d 'de' MMMM",
"dateFormatItem-yyMMM":"MMM-yy","timeFormat-medium":"HH:mm:ss","dateFormatItem-Hm":"HH:mm","quarters-standAlone-abbr":["T1","T2","T3","T4"],"eraAbbr":["a.C.","d.C."],"field-minute":"minuto","field-dayperiod":"periodo del dia","days-standAlone-abbr":["dom","lun","mar","mie","jue","vie","sab"],"dateFormatItem-d":"d","dateFormatItem-ms":"mm:ss","field-day-relative+-1":"ayer","dateFormatItem-h":"hh a","field-day-relative+-2":"antes de ayer","field-day-relative+-3":"Hace tres dias","dateFormatItem-MMMd":"d MMM",
"dateFormatItem-MEd":"E, d/M","dateFormatItem-yMMMM":"MMMM 'de' y","field-day":"dia","days-format-wide":["domingo","lunes","martes","miercoles","jueves","viernes","sabado"],"field-zone":"zona","dateFormatItem-yyyyMM":"MM/yyyy","dateFormatItem-y":"y","months-standAlone-narrow":["E","F","M","A","M","J","J","A","S","O","N","D"],"dateFormatItem-yyMM":"MM/yy","dateFormatItem-hm":"hh:mm a","days-format-abbr":["dom","lun","mar","mie","jue","vie","sab"],"eraNames":["antes de Cristo","anno Domini"],"days-format-narrow":["D",
"L","M","M","J","V","S"],"field-month":"mes","days-standAlone-narrow":["D","L","M","M","J","V","S"],"dateFormatItem-MMM":"LLL","dayPeriods-format-wide-am":"a.m.","dateFormat-short":"dd/MM/yy","dateFormatItem-MMd":"d/MM","field-second":"segundo","dateFormatItem-yMMMEd":"EEE, d MMM y","field-week":"semana","dateFormat-medium":"dd/MM/yyyy","dateFormatItem-Hms":"HH:mm:ss","dateFormatItem-hms":"hh:mm:ss a","quarters-standAlone-narrow":["1","2","3","4"],"dateTimeFormats-appendItem-Day-Of-Week":"{0} {1}",
"dateTimeFormat-medium":"{1} {0}","dayPeriods-format-abbr-am":"AM","dateTimeFormats-appendItem-Second":"{0} ({2}: {1})","dateTimeFormats-appendItem-Era":"{0} {1}","dateTimeFormats-appendItem-Week":"{0} ({2}: {1})","dateFormatItem-H":"HH","quarters-format-narrow":["1","2","3","4"],"dateTimeFormat-long":"{1} {0}","dayPeriods-format-narrow-am":"AM","dateTimeFormat-full":"{1} {0}","dateTimeFormats-appendItem-Day":"{0} ({2}: {1})","dateTimeFormats-appendItem-Year":"{0} {1}","dateTimeFormats-appendItem-Hour":"{0} ({2}: {1})",
"dayPeriods-format-abbr-pm":"PM","dateTimeFormats-appendItem-Quarter":"{0} ({2}: {1})","dateTimeFormats-appendItem-Month":"{0} ({2}: {1})","dateTimeFormats-appendItem-Minute":"{0} ({2}: {1})","dateTimeFormats-appendItem-Timezone":"{0} {1}","dayPeriods-format-narrow-pm":"PM","dateTimeFormat-short":"{1} {0}"};dojo.provide("dojo.nls.dojo_fi");dojo.provide("dijit.nls.common.fi");dijit.nls.common.fi={"buttonOk":"OK","buttonCancel":"Peruuta","buttonSave":"Tallenna","itemClose":"Sulje"};dojo.provide("dojo.cldr.nls.gregorian.fi");
dojo.cldr.nls.gregorian.fi={"months-format-narrow":["T","H","M","H","T","K","H","E","S","L","M","J"],"field-weekday":"viikonpaiva","dateFormatItem-yQQQ":"QQQ y","dateFormatItem-yMEd":"EEE d.M.yyyy","dateFormatItem-MMMEd":"E d. MMM","eraNarrow":["eKr.","jKr."],"dateFormat-long":"d. MMMM y","months-format-wide":["tammikuuta","helmikuuta","maaliskuuta","huhtikuuta","toukokuuta","kesakuuta","heinakuuta","elokuuta","syyskuuta","lokakuuta","marraskuuta","joulukuuta"],"dateFormatItem-EEEd":"EEE d.","dayPeriods-format-wide-pm":"ip.",
"dateFormat-full":"EEEE d. MMMM y","dateFormatItem-Md":"d.M.","dayPeriods-standAlone-wide-pm":"ip.","dayPeriods-format-abbr-am":"ap.","field-era":"aikakausi","dateFormatItem-yM":"L.yyyy","months-standAlone-wide":["tammikuu","helmikuu","maaliskuu","huhtikuu","toukokuu","kesakuu","heinakuu","elokuu","syyskuu","lokakuu","marraskuu","joulukuu"],"timeFormat-short":"H.mm","quarters-format-wide":["1. neljannes","2. neljannes","3. neljannes","4. neljannes"],"timeFormat-long":"H.mm.ss z","field-year":"vuosi",
"dateFormatItem-yMMM":"LLL y","dateFormatItem-yQ":"Q/yyyy","dateFormatItem-yyyyMMMM":"LLLL y","field-hour":"tunti","months-format-abbr":["tammikuuta","helmikuuta","maaliskuuta","huhtikuuta","toukokuuta","kesakuuta","heinakuuta","elokuuta","syyskuuta","lokakuuta","marraskuuta","joulukuuta"],"dateFormatItem-yyQ":"Q/yy","timeFormat-full":"H.mm.ss zzzz","dateFormatItem-yyyyMEEEd":"EEE d.M.yyyy","field-day-relative+0":"tanaan","field-day-relative+1":"huomenna","field-day-relative+2":"ylihuomenna","dateFormatItem-H":"H",
"months-standAlone-abbr":["tammi","helmi","maalis","huhti","touko","kesa","heina","elo","syys","loka","marras","joulu"],"quarters-format-abbr":["1. nelj.","2. nelj.","3. nelj.","4. nelj."],"quarters-standAlone-wide":["1. neljannes","2. neljannes","3. neljannes","4. neljannes"],"dateFormatItem-M":"L","days-standAlone-wide":["sunnuntai","maanantai","tiistai","keskiviikko","torstai","perjantai","lauantai"],"dateFormatItem-yyMMM":"LLLL yy","timeFormat-medium":"H.mm.ss","dateFormatItem-Hm":"H.mm","quarters-standAlone-abbr":["1. nelj.",
"2. nelj.","3. nelj.","4. nelj."],"eraAbbr":["eKr.","jKr."],"field-minute":"minuutti","field-dayperiod":"ap./ip.","days-standAlone-abbr":["su","ma","ti","ke","to","pe","la"],"dateFormatItem-d":"d","dateFormatItem-ms":"mm.ss","field-day-relative+-1":"eilen","field-day-relative+-2":"toissapaivana","dateFormatItem-MMMd":"d. MMM","dateFormatItem-MEd":"E d.M.","field-day":"paiva","dateFormatItem-yMMMMccccd":"cccc, d. MMMM y","days-format-wide":["sunnuntaina","maanantaina","tiistaina","keskiviikkona","torstaina",
"perjantaina","lauantaina"],"field-zone":"aikavyohyke","dateFormatItem-y":"y","months-standAlone-narrow":["T","H","M","H","T","K","H","E","S","L","M","J"],"dateFormatItem-yyMM":"M/yy","dateFormatItem-hm":"h.mm a","dayPeriods-format-abbr-pm":"ip.","days-format-abbr":["su","ma","ti","ke","to","pe","la"],"eraNames":["ennen Kristuksen syntymaa","jalkeen Kristuksen syntyman"],"days-format-narrow":["S","M","T","K","T","P","L"],"field-month":"kuukausi","days-standAlone-narrow":["S","M","T","K","T","P","L"],
"dateFormatItem-MMM":"LLL","dayPeriods-format-wide-am":"ap.","dayPeriods-standAlone-wide-am":"ap.","dateFormat-short":"d.M.yyyy","field-second":"sekunti","dateFormatItem-yMMMEd":"EEE d. MMM y","field-week":"viikko","dateFormat-medium":"d.M.yyyy","dateFormatItem-yyyyM":"M/yyyy","dateFormatItem-yyyyQQQQ":"QQQQ y","dateFormatItem-Hms":"H.mm.ss","dateFormatItem-hms":"h.mm.ss a","quarters-standAlone-narrow":["1","2","3","4"],"dateTimeFormats-appendItem-Day-Of-Week":"{0} {1}","dateTimeFormat-medium":"{1} {0}",
"dateTimeFormats-appendItem-Second":"{0} ({2}: {1})","dateTimeFormats-appendItem-Era":"{0} {1}","dateTimeFormats-appendItem-Week":"{0} ({2}: {1})","quarters-format-narrow":["1","2","3","4"],"dateFormatItem-h":"h a","dateTimeFormat-long":"{1} {0}","dayPeriods-format-narrow-am":"AM","dateTimeFormat-full":"{1} {0}","dateTimeFormats-appendItem-Day":"{0} ({2}: {1})","dateTimeFormats-appendItem-Year":"{0} {1}","dateTimeFormats-appendItem-Hour":"{0} ({2}: {1})","dateTimeFormats-appendItem-Quarter":"{0} ({2}: {1})",
"dateTimeFormats-appendItem-Month":"{0} ({2}: {1})","dateTimeFormats-appendItem-Minute":"{0} ({2}: {1})","dateTimeFormats-appendItem-Timezone":"{0} {1}","dayPeriods-format-narrow-pm":"PM","dateTimeFormat-short":"{1} {0}"};dojo.provide("dojo.nls.dojo_fi-fi");dojo.provide("dijit.nls.common.fi_fi");dijit.nls.common.fi_fi={"buttonOk":"OK","buttonCancel":"Peruuta","buttonSave":"Tallenna","itemClose":"Sulje"};dojo.provide("dojo.cldr.nls.gregorian.fi_fi");dojo.cldr.nls.gregorian.fi_fi={"months-format-narrow":["T",
"H","M","H","T","K","H","E","S","L","M","J"],"field-weekday":"viikonpaiva","dateFormatItem-yQQQ":"QQQ y","dateFormatItem-yMEd":"EEE d.M.yyyy","dateFormatItem-MMMEd":"E d. MMM","eraNarrow":["eKr.","jKr."],"dateFormat-long":"d. MMMM y","months-format-wide":["tammikuuta","helmikuuta","maaliskuuta","huhtikuuta","toukokuuta","kesakuuta","heinakuuta","elokuuta","syyskuuta","lokakuuta","marraskuuta","joulukuuta"],"dateFormatItem-EEEd":"EEE d.","dayPeriods-format-wide-pm":"ip.","dateFormat-full":"EEEE d. MMMM y",
"dateFormatItem-Md":"d.M.","dayPeriods-standAlone-wide-pm":"ip.","dayPeriods-format-abbr-am":"ap.","field-era":"aikakausi","dateFormatItem-yM":"L.yyyy","months-standAlone-wide":["tammikuu","helmikuu","maaliskuu","huhtikuu","toukokuu","kesakuu","heinakuu","elokuu","syyskuu","lokakuu","marraskuu","joulukuu"],"timeFormat-short":"H.mm","quarters-format-wide":["1. neljannes","2. neljannes","3. neljannes","4. neljannes"],"timeFormat-long":"H.mm.ss z","field-year":"vuosi","dateFormatItem-yMMM":"LLL y","dateFormatItem-yQ":"Q/yyyy",
"dateFormatItem-yyyyMMMM":"LLLL y","field-hour":"tunti","months-format-abbr":["tammikuuta","helmikuuta","maaliskuuta","huhtikuuta","toukokuuta","kesakuuta","heinakuuta","elokuuta","syyskuuta","lokakuuta","marraskuuta","joulukuuta"],"dateFormatItem-yyQ":"Q/yy","timeFormat-full":"H.mm.ss zzzz","dateFormatItem-yyyyMEEEd":"EEE d.M.yyyy","field-day-relative+0":"tanaan","field-day-relative+1":"huomenna","field-day-relative+2":"ylihuomenna","dateFormatItem-H":"H","months-standAlone-abbr":["tammi","helmi",
"maalis","huhti","touko","kesa","heina","elo","syys","loka","marras","joulu"],"quarters-format-abbr":["1. nelj.","2. nelj.","3. nelj.","4. nelj."],"quarters-standAlone-wide":["1. neljannes","2. neljannes","3. neljannes","4. neljannes"],"dateFormatItem-M":"L","days-standAlone-wide":["sunnuntai","maanantai","tiistai","keskiviikko","torstai","perjantai","lauantai"],"dateFormatItem-yyMMM":"LLLL yy","timeFormat-medium":"H.mm.ss","dateFormatItem-Hm":"H.mm","quarters-standAlone-abbr":["1. nelj.","2. nelj.",
"3. nelj.","4. nelj."],"eraAbbr":["eKr.","jKr."],"field-minute":"minuutti","field-dayperiod":"ap./ip.","days-standAlone-abbr":["su","ma","ti","ke","to","pe","la"],"dateFormatItem-d":"d","dateFormatItem-ms":"mm.ss","field-day-relative+-1":"eilen","field-day-relative+-2":"toissapaivana","dateFormatItem-MMMd":"d. MMM","dateFormatItem-MEd":"E d.M.","field-day":"paiva","dateFormatItem-yMMMMccccd":"cccc, d. MMMM y","days-format-wide":["sunnuntaina","maanantaina","tiistaina","keskiviikkona","torstaina",
"perjantaina","lauantaina"],"field-zone":"aikavyohyke","dateFormatItem-y":"y","months-standAlone-narrow":["T","H","M","H","T","K","H","E","S","L","M","J"],"dateFormatItem-yyMM":"M/yy","dateFormatItem-hm":"h.mm a","dayPeriods-format-abbr-pm":"ip.","days-format-abbr":["su","ma","ti","ke","to","pe","la"],"eraNames":["ennen Kristuksen syntymaa","jalkeen Kristuksen syntyman"],"days-format-narrow":["S","M","T","K","T","P","L"],"field-month":"kuukausi","days-standAlone-narrow":["S","M","T","K","T","P","L"],
"dateFormatItem-MMM":"LLL","dayPeriods-format-wide-am":"ap.","dayPeriods-standAlone-wide-am":"ap.","dateFormat-short":"d.M.yyyy","field-second":"sekunti","dateFormatItem-yMMMEd":"EEE d. MMM y","field-week":"viikko","dateFormat-medium":"d.M.yyyy","dateFormatItem-yyyyM":"M/yyyy","dateFormatItem-yyyyQQQQ":"QQQQ y","dateFormatItem-Hms":"H.mm.ss","dateFormatItem-hms":"h.mm.ss a","quarters-standAlone-narrow":["1","2","3","4"],"dateTimeFormats-appendItem-Day-Of-Week":"{0} {1}","dateTimeFormat-medium":"{1} {0}",
"dateTimeFormats-appendItem-Second":"{0} ({2}: {1})","dateTimeFormats-appendItem-Era":"{0} {1}","dateTimeFormats-appendItem-Week":"{0} ({2}: {1})","quarters-format-narrow":["1","2","3","4"],"dateFormatItem-h":"h a","dateTimeFormat-long":"{1} {0}","dayPeriods-format-narrow-am":"AM","dateTimeFormat-full":"{1} {0}","dateTimeFormats-appendItem-Day":"{0} ({2}: {1})","dateTimeFormats-appendItem-Year":"{0} {1}","dateTimeFormats-appendItem-Hour":"{0} ({2}: {1})","dateTimeFormats-appendItem-Quarter":"{0} ({2}: {1})",
"dateTimeFormats-appendItem-Month":"{0} ({2}: {1})","dateTimeFormats-appendItem-Minute":"{0} ({2}: {1})","dateTimeFormats-appendItem-Timezone":"{0} {1}","dayPeriods-format-narrow-pm":"PM","dateTimeFormat-short":"{1} {0}"};dojo.provide("dojo.nls.dojo_fr");dojo.provide("dijit.nls.common.fr");dijit.nls.common.fr={"buttonOk":"OK","buttonCancel":"Annuler","buttonSave":"Sauvegarder","itemClose":"Fermer"};dojo.provide("dojo.cldr.nls.gregorian.fr");dojo.cldr.nls.gregorian.fr={"months-format-narrow":["J",
"F","M","A","M","J","J","A","S","O","N","D"],"field-weekday":"jour de la semaine","dateFormatItem-yyQQQQ":"QQQQ yy","dateFormatItem-yQQQ":"QQQ y","dateFormatItem-yMEd":"EEE d/M/yyyy","dateFormatItem-MMMEd":"E d MMM","eraNarrow":["av. J.-C.","ap. J.-C."],"dayPeriods-format-wide-morning":"matin","dateFormatItem-MMMdd":"dd MMM","dateFormat-long":"d MMMM y","months-format-wide":["janvier","fevrier","mars","avril","mai","juin","juillet","aout","septembre","octobre","novembre","decembre"],"dateFormatItem-EEEd":"d EEE",
"dayPeriods-format-wide-pm":"PM","dateFormat-full":"EEEE d MMMM y","dateFormatItem-Md":"d/M","dayPeriods-format-wide-noon":"midi","field-era":"ere","dateFormatItem-yM":"M/yyyy","months-standAlone-wide":["janvier","fevrier","mars","avril","mai","juin","juillet","aout","septembre","octobre","novembre","decembre"],"timeFormat-short":"HH:mm","quarters-format-wide":["1er trimestre","2e trimestre","3e trimestre","4e trimestre"],"timeFormat-long":"HH:mm:ss z","field-year":"annee","dateFormatItem-yMMM":"MMM y",
"dateFormatItem-yQ":"'T'Q y","dateFormatItem-yyyyMMMM":"MMMM y","field-hour":"heure","dateFormatItem-MMdd":"dd/MM","months-format-abbr":["janv.","fevr.","mars","avr.","mai","juin","juil.","aout","sept.","oct.","nov.","dec."],"dateFormatItem-yyQ":"'T'Q yy","timeFormat-full":"HH:mm:ss zzzz","field-day-relative+0":"aujourd?hui","field-day-relative+1":"demain","field-day-relative+2":"apres-demain","field-day-relative+3":"apres-apres-demain","months-standAlone-abbr":["janv.","fevr.","mars","avr.","mai",
"juin","juil.","aout","sept.","oct.","nov.","dec."],"quarters-format-abbr":["T1","T2","T3","T4"],"quarters-standAlone-wide":["1er trimestre","2e trimestre","3e trimestre","4e trimestre"],"dateFormatItem-M":"L","days-standAlone-wide":["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],"dateFormatItem-yyMMMEEEd":"EEE d MMM yy","dateFormatItem-yyMMM":"MMM yy","timeFormat-medium":"HH:mm:ss","dateFormatItem-Hm":"HH:mm","quarters-standAlone-abbr":["T1","T2","T3","T4"],"eraAbbr":["av. J.-C.",
"ap. J.-C."],"field-minute":"minute","field-dayperiod":"cadran","days-standAlone-abbr":["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],"dayPeriods-format-wide-night":"soir","dateFormatItem-yyMMMd":"d MMM yy","dateFormatItem-d":"d","dateFormatItem-ms":"mm:ss","quarters-format-narrow":["T1","T2","T3","T4"],"field-day-relative+-1":"hier","field-day-relative+-2":"avant-hier","field-day-relative+-3":"avant-avant-hier","dateFormatItem-MMMd":"d MMM","dateFormatItem-MEd":"EEE d/M","field-day":"jour","days-format-wide":["dimanche",
"lundi","mardi","mercredi","jeudi","vendredi","samedi"],"field-zone":"fuseau horaire","dateFormatItem-y":"y","months-standAlone-narrow":["J","F","M","A","M","J","J","A","S","O","N","D"],"dateFormatItem-yyMM":"MM/yy","days-format-abbr":["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],"eraNames":["avant Jesus-Christ","apres Jesus-Christ"],"days-format-narrow":["D","L","M","M","J","V","S"],"field-month":"mois","days-standAlone-narrow":["D","L","M","M","J","V","S"],"dateFormatItem-MMM":"LLL","dayPeriods-format-wide-am":"AM",
"dateFormatItem-MMMMEd":"EEE d MMMM","dateFormat-short":"dd/MM/yy","dateFormatItem-MMd":"d/MM","dayPeriods-format-wide-afternoon":"apres-midi","field-second":"seconde","dateFormatItem-yMMMEd":"EEE d MMM y","field-week":"semaine","dateFormat-medium":"d MMM y","dateFormatItem-Hms":"HH:mm:ss","quarters-standAlone-narrow":["1","2","3","4"],"dateTimeFormats-appendItem-Day-Of-Week":"{0} {1}","dateTimeFormat-medium":"{1} {0}","dayPeriods-format-abbr-am":"AM","dateTimeFormats-appendItem-Second":"{0} ({2}: {1})",
"dateTimeFormats-appendItem-Era":"{0} {1}","dateTimeFormats-appendItem-Week":"{0} ({2}: {1})","dateFormatItem-H":"HH","dateFormatItem-h":"h a","dateTimeFormat-long":"{1} {0}","dayPeriods-format-narrow-am":"AM","dateTimeFormat-full":"{1} {0}","dateTimeFormats-appendItem-Day":"{0} ({2}: {1})","dateFormatItem-hm":"h:mm a","dateTimeFormats-appendItem-Year":"{0} {1}","dateTimeFormats-appendItem-Hour":"{0} ({2}: {1})","dayPeriods-format-abbr-pm":"PM","dateTimeFormats-appendItem-Quarter":"{0} ({2}: {1})",
"dateTimeFormats-appendItem-Month":"{0} ({2}: {1})","dateTimeFormats-appendItem-Minute":"{0} ({2}: {1})","dateTimeFormats-appendItem-Timezone":"{0} {1}","dayPeriods-format-narrow-pm":"PM","dateTimeFormat-short":"{1} {0}","dateFormatItem-hms":"h:mm:ss a"};dojo.provide("dojo.nls.dojo_fr-fr");dojo.provide("dijit.nls.common.fr_fr");dijit.nls.common.fr_fr={"buttonOk":"OK","buttonCancel":"Annuler","buttonSave":"Sauvegarder","itemClose":"Fermer"};dojo.provide("dojo.cldr.nls.gregorian.fr_fr");dojo.cldr.nls.gregorian.fr_fr=
{"months-format-narrow":["J","F","M","A","M","J","J","A","S","O","N","D"],"field-weekday":"jour de la semaine","dateFormatItem-yyQQQQ":"QQQQ yy","dateFormatItem-yQQQ":"QQQ y","dateFormatItem-yMEd":"EEE d/M/yyyy","dateFormatItem-MMMEd":"E d MMM","eraNarrow":["av. J.-C.","ap. J.-C."],"dayPeriods-format-wide-morning":"matin","dateFormatItem-MMMdd":"dd MMM","dateFormat-long":"d MMMM y","months-format-wide":["janvier","fevrier","mars","avril","mai","juin","juillet","aout","septembre","octobre","novembre",
"decembre"],"dateFormatItem-EEEd":"d EEE","dayPeriods-format-wide-pm":"PM","dateFormat-full":"EEEE d MMMM y","dateFormatItem-Md":"d/M","dayPeriods-format-wide-noon":"midi","field-era":"ere","dateFormatItem-yM":"M/yyyy","months-standAlone-wide":["janvier","fevrier","mars","avril","mai","juin","juillet","aout","septembre","octobre","novembre","decembre"],"timeFormat-short":"HH:mm","quarters-format-wide":["1er trimestre","2e trimestre","3e trimestre","4e trimestre"],"timeFormat-long":"HH:mm:ss z","field-year":"annee",
"dateFormatItem-yMMM":"MMM y","dateFormatItem-yQ":"'T'Q y","dateFormatItem-yyyyMMMM":"MMMM y","field-hour":"heure","dateFormatItem-MMdd":"dd/MM","months-format-abbr":["janv.","fevr.","mars","avr.","mai","juin","juil.","aout","sept.","oct.","nov.","dec."],"dateFormatItem-yyQ":"'T'Q yy","timeFormat-full":"HH:mm:ss zzzz","field-day-relative+0":"aujourd?hui","field-day-relative+1":"demain","field-day-relative+2":"apres-demain","field-day-relative+3":"apres-apres-demain","months-standAlone-abbr":["janv.",
"fevr.","mars","avr.","mai","juin","juil.","aout","sept.","oct.","nov.","dec."],"quarters-format-abbr":["T1","T2","T3","T4"],"quarters-standAlone-wide":["1er trimestre","2e trimestre","3e trimestre","4e trimestre"],"dateFormatItem-M":"L","days-standAlone-wide":["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],"dateFormatItem-yyMMMEEEd":"EEE d MMM yy","dateFormatItem-yyMMM":"MMM yy","timeFormat-medium":"HH:mm:ss","dateFormatItem-Hm":"HH:mm","quarters-standAlone-abbr":["T1","T2","T3",
"T4"],"eraAbbr":["av. J.-C.","ap. J.-C."],"field-minute":"minute","field-dayperiod":"cadran","days-standAlone-abbr":["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],"dayPeriods-format-wide-night":"soir","dateFormatItem-yyMMMd":"d MMM yy","dateFormatItem-d":"d","dateFormatItem-ms":"mm:ss","quarters-format-narrow":["T1","T2","T3","T4"],"field-day-relative+-1":"hier","field-day-relative+-2":"avant-hier","field-day-relative+-3":"avant-avant-hier","dateFormatItem-MMMd":"d MMM","dateFormatItem-MEd":"EEE d/M",
"field-day":"jour","days-format-wide":["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],"field-zone":"fuseau horaire","dateFormatItem-y":"y","months-standAlone-narrow":["J","F","M","A","M","J","J","A","S","O","N","D"],"dateFormatItem-yyMM":"MM/yy","days-format-abbr":["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],"eraNames":["avant Jesus-Christ","apres Jesus-Christ"],"days-format-narrow":["D","L","M","M","J","V","S"],"field-month":"mois","days-standAlone-narrow":["D","L","M",
"M","J","V","S"],"dateFormatItem-MMM":"LLL","dayPeriods-format-wide-am":"AM","dateFormatItem-MMMMEd":"EEE d MMMM","dateFormat-short":"dd/MM/yy","dateFormatItem-MMd":"d/MM","dayPeriods-format-wide-afternoon":"apres-midi","field-second":"seconde","dateFormatItem-yMMMEd":"EEE d MMM y","field-week":"semaine","dateFormat-medium":"d MMM y","dateFormatItem-Hms":"HH:mm:ss","quarters-standAlone-narrow":["1","2","3","4"],"dateTimeFormats-appendItem-Day-Of-Week":"{0} {1}","dateTimeFormat-medium":"{1} {0}","dayPeriods-format-abbr-am":"AM",
"dateTimeFormats-appendItem-Second":"{0} ({2}: {1})","dateTimeFormats-appendItem-Era":"{0} {1}","dateTimeFormats-appendItem-Week":"{0} ({2}: {1})","dateFormatItem-H":"HH","dateFormatItem-h":"h a","dateTimeFormat-long":"{1} {0}","dayPeriods-format-narrow-am":"AM","dateTimeFormat-full":"{1} {0}","dateTimeFormats-appendItem-Day":"{0} ({2}: {1})","dateFormatItem-hm":"h:mm a","dateTimeFormats-appendItem-Year":"{0} {1}","dateTimeFormats-appendItem-Hour":"{0} ({2}: {1})","dayPeriods-format-abbr-pm":"PM",
"dateTimeFormats-appendItem-Quarter":"{0} ({2}: {1})","dateTimeFormats-appendItem-Month":"{0} ({2}: {1})","dateTimeFormats-appendItem-Minute":"{0} ({2}: {1})","dateTimeFormats-appendItem-Timezone":"{0} {1}","dayPeriods-format-narrow-pm":"PM","dateTimeFormat-short":"{1} {0}","dateFormatItem-hms":"h:mm:ss a"};dojo.provide("dojo.nls.dojo_he");dojo.provide("dijit.nls.common.he");dijit.nls.common.he={"buttonOk":"?????","buttonCancel":"?????","buttonSave":"?????","itemClose":"?????"};dojo.provide("dojo.cldr.nls.gregorian.he");
dojo.cldr.nls.gregorian.he={"field-weekday":"??? ?????","dateFormatItem-yQQQ":"y QQQ","dateFormatItem-yMEd":"EEE, d.M.yyyy","dateFormatItem-MMMEd":"E, d ?MMM","eraNarrow":["??????","?????"],"dateFormat-long":"d ?MMMM y","months-format-wide":["?????","??????","???","?????","???","????","????","??????","??????","???????","??????","?????"],"dateFormatItem-EEEd":"EEE ?-d","dayPeriods-format-wide-pm":"?????","dateFormat-full":"EEEE, d ?MMMM y","dateFormatItem-Md":"d/M","field-era":"?????","dateFormatItem-yM":"M.yyyy",
"months-standAlone-wide":["?????","??????","???","?????","???","????","????","??????","??????","???????","??????","?????"],"timeFormat-short":"HH:mm","quarters-format-wide":["????? 1","????? 2","????? 3","????? 4"],"timeFormat-long":"HH:mm:ss z","field-year":"???","dateFormatItem-yMMM":"MMM y","dateFormatItem-yQ":"yyyy Q","dateFormatItem-yyyyMMMM":"MMMM y","field-hour":"???","dateFormatItem-MMdd":"dd/MM","months-format-abbr":["???","???","???","???","???","???","???","???","???","???","???","???"],
"dateFormatItem-yyQ":"Q yy","timeFormat-full":"HH:mm:ss zzzz","field-day-relative+0":"????","field-day-relative+1":"???","field-day-relative+2":"???????","dateFormatItem-H":"HH","field-day-relative+3":"???? ????? ????","months-standAlone-abbr":["????","????","???","????","???","????","????","????","????","????","????","????"],"quarters-format-abbr":["????? 1","????? 2","????? 3","????? 4"],"quarters-standAlone-wide":["????? 1","????? 2","????? 3","????? 4"],"dateFormatItem-M":"L","days-standAlone-wide":["??? ?????",
"??? ???","??? ?????","??? ?????","??? ?????","??? ????","??? ???"],"dateFormatItem-MMMMd":"d ?MMMM","dateFormatItem-yyMMM":"MMM yyyy","timeFormat-medium":"HH:mm:ss","dateFormatItem-Hm":"HH:mm","quarters-standAlone-abbr":["????? 1","????? 2","????? 3","????? 4"],"eraAbbr":["??????","?????"],"field-minute":"???","field-dayperiod":"?????/?????","days-standAlone-abbr":["??? ??","??? ??","??? ??","??? ??","??? ??","??? ??","???"],"dateFormatItem-d":"d","dateFormatItem-ms":"mm:ss","field-day-relative+-1":"?????",
"field-day-relative+-2":"?????","field-day-relative+-3":"???? ????? ????","dateFormatItem-MMMd":"d ?MMM","dateFormatItem-MEd":"E, M-d","dateFormatItem-yMMMM":"MMMM y","field-day":"???","days-format-wide":["??? ?????","??? ???","??? ?????","??? ?????","??? ?????","??? ????","??? ???"],"field-zone":"????","dateFormatItem-yyyyMM":"MM/yyyy","dateFormatItem-y":"y","dateFormatItem-yyMM":"MM/yy","dateFormatItem-hm":"h:mm a","days-format-abbr":["??? ??","??? ??","??? ??","??? ??","??? ??","??? ??","???"],
"eraNames":["???? ??????","??????"],"days-format-narrow":["?","?","?","?","?","?","?"],"field-month":"????","days-standAlone-narrow":["?","?","?","?","?","?","?"],"dateFormatItem-MMM":"LLL","dayPeriods-format-wide-am":"??????","dateFormatItem-MMMMEd":"E, d ?MMMM","dateFormat-short":"dd/MM/yy","field-second":"?????","dateFormatItem-yMMMEd":"EEE, d ?MMM y","dateFormatItem-Ed":"E ?-d","field-week":"????","dateFormat-medium":"d ?MMM yyyy","dateFormatItem-mmss":"mm:ss","dateFormatItem-Hms":"HH:mm:ss",
"dateFormatItem-hms":"h:mm:ss a","dateFormatItem-yyyy":"y","months-format-narrow":["1","2","3","4","5","6","7","8","9","10","11","12"],"quarters-standAlone-narrow":["1","2","3","4"],"dateTimeFormats-appendItem-Day-Of-Week":"{0} {1}","dateTimeFormat-medium":"{1} {0}","dayPeriods-format-abbr-am":"AM","dateTimeFormats-appendItem-Second":"{0} ({2}: {1})","dateTimeFormats-appendItem-Era":"{0} {1}","dateTimeFormats-appendItem-Week":"{0} ({2}: {1})","quarters-format-narrow":["1","2","3","4"],"dateFormatItem-h":"h a",
"dateTimeFormat-long":"{1} {0}","dayPeriods-format-narrow-am":"AM","dateTimeFormat-full":"{1} {0}","dateTimeFormats-appendItem-Day":"{0} ({2}: {1})","months-standAlone-narrow":["1","2","3","4","5","6","7","8","9","10","11","12"],"dateTimeFormats-appendItem-Year":"{0} {1}","dateTimeFormats-appendItem-Hour":"{0} ({2}: {1})","dayPeriods-format-abbr-pm":"PM","dateTimeFormats-appendItem-Quarter":"{0} ({2}: {1})","dateTimeFormats-appendItem-Month":"{0} ({2}: {1})","dateTimeFormats-appendItem-Minute":"{0} ({2}: {1})",
"dateTimeFormats-appendItem-Timezone":"{0} {1}","dayPeriods-format-narrow-pm":"PM","dateTimeFormat-short":"{1} {0}"};dojo.provide("dojo.nls.dojo_he-il");dojo.provide("dijit.nls.common.he_il");dijit.nls.common.he_il={"buttonOk":"?????","buttonCancel":"?????","buttonSave":"?????","itemClose":"?????"};dojo.provide("dojo.cldr.nls.gregorian.he_il");dojo.cldr.nls.gregorian.he_il={"field-weekday":"??? ?????","dateFormatItem-yQQQ":"y QQQ","dateFormatItem-yMEd":"EEE, d.M.yyyy","dateFormatItem-MMMEd":"E, d ?MMM",
"eraNarrow":["??????","?????"],"dateFormat-long":"d ?MMMM y","months-format-wide":["?????","??????","???","?????","???","????","????","??????","??????","???????","??????","?????"],"dateFormatItem-EEEd":"EEE ?-d","dayPeriods-format-wide-pm":"?????","dateFormat-full":"EEEE, d ?MMMM y","dateFormatItem-Md":"d/M","field-era":"?????","dateFormatItem-yM":"M.yyyy","months-standAlone-wide":["?????","??????","???","?????","???","????","????","??????","??????","???????","??????","?????"],"timeFormat-short":"HH:mm",
"quarters-format-wide":["????? 1","????? 2","????? 3","????? 4"],"timeFormat-long":"HH:mm:ss z","field-year":"???","dateFormatItem-yMMM":"MMM y","dateFormatItem-yQ":"yyyy Q","dateFormatItem-yyyyMMMM":"MMMM y","field-hour":"???","dateFormatItem-MMdd":"dd/MM","months-format-abbr":["???","???","???","???","???","???","???","???","???","???","???","???"],"dateFormatItem-yyQ":"Q yy","timeFormat-full":"HH:mm:ss zzzz","field-day-relative+0":"????","field-day-relative+1":"???","field-day-relative+2":"???????",
"dateFormatItem-H":"HH","field-day-relative+3":"???? ????? ????","months-standAlone-abbr":["????","????","???","????","???","????","????","????","????","????","????","????"],"quarters-format-abbr":["????? 1","????? 2","????? 3","????? 4"],"quarters-standAlone-wide":["????? 1","????? 2","????? 3","????? 4"],"dateFormatItem-M":"L","days-standAlone-wide":["??? ?????","??? ???","??? ?????","??? ?????","??? ?????","??? ????","??? ???"],"dateFormatItem-MMMMd":"d ?MMMM","dateFormatItem-yyMMM":"MMM yyyy",
"timeFormat-medium":"HH:mm:ss","dateFormatItem-Hm":"HH:mm","quarters-standAlone-abbr":["????? 1","????? 2","????? 3","????? 4"],"eraAbbr":["??????","?????"],"field-minute":"???","field-dayperiod":"?????/?????","days-standAlone-abbr":["??? ??","??? ??","??? ??","??? ??","??? ??","??? ??","???"],"dateFormatItem-d":"d","dateFormatItem-ms":"mm:ss","field-day-relative+-1":"?????","field-day-relative+-2":"?????","field-day-relative+-3":"???? ????? ????","dateFormatItem-MMMd":"d ?MMM","dateFormatItem-MEd":"E, M-d",
"dateFormatItem-yMMMM":"MMMM y","field-day":"???","days-format-wide":["??? ?????","??? ???","??? ?????","??? ?????","??? ?????","??? ????","??? ???"],"field-zone":"????","dateFormatItem-yyyyMM":"MM/yyyy","dateFormatItem-y":"y","dateFormatItem-yyMM":"MM/yy","dateFormatItem-hm":"h:mm a","days-format-abbr":["??? ??","??? ??","??? ??","??? ??","??? ??","??? ??","???"],"eraNames":["???? ??????","??????"],"days-format-narrow":["?","?","?","?","?","?","?"],"field-month":"????","days-standAlone-narrow":["?",
"?","?","?","?","?","?"],"dateFormatItem-MMM":"LLL","dayPeriods-format-wide-am":"??????","dateFormatItem-MMMMEd":"E, d ?MMMM","dateFormat-short":"dd/MM/yy","field-second":"?????","dateFormatItem-yMMMEd":"EEE, d ?MMM y","dateFormatItem-Ed":"E ?-d","field-week":"????","dateFormat-medium":"d ?MMM yyyy","dateFormatItem-mmss":"mm:ss","dateFormatItem-Hms":"HH:mm:ss","dateFormatItem-hms":"h:mm:ss a","dateFormatItem-yyyy":"y","months-format-narrow":["1","2","3","4","5","6","7","8","9","10","11","12"],"quarters-standAlone-narrow":["1",
"2","3","4"],"dateTimeFormats-appendItem-Day-Of-Week":"{0} {1}","dateTimeFormat-medium":"{1} {0}","dayPeriods-format-abbr-am":"AM","dateTimeFormats-appendItem-Second":"{0} ({2}: {1})","dateTimeFormats-appendItem-Era":"{0} {1}","dateTimeFormats-appendItem-Week":"{0} ({2}: {1})","quarters-format-narrow":["1","2","3","4"],"dateFormatItem-h":"h a","dateTimeFormat-long":"{1} {0}","dayPeriods-format-narrow-am":"AM","dateTimeFormat-full":"{1} {0}","dateTimeFormats-appendItem-Day":"{0} ({2}: {1})","months-standAlone-narrow":["1",
"2","3","4","5","6","7","8","9","10","11","12"],"dateTimeFormats-appendItem-Year":"{0} {1}","dateTimeFormats-appendItem-Hour":"{0} ({2}: {1})","dayPeriods-format-abbr-pm":"PM","dateTimeFormats-appendItem-Quarter":"{0} ({2}: {1})","dateTimeFormats-appendItem-Month":"{0} ({2}: {1})","dateTimeFormats-appendItem-Minute":"{0} ({2}: {1})","dateTimeFormats-appendItem-Timezone":"{0} {1}","dayPeriods-format-narrow-pm":"PM","dateTimeFormat-short":"{1} {0}"};dojo.provide("dojo.nls.dojo_hu");dojo.provide("dijit.nls.common.hu");
dijit.nls.common.hu={"buttonOk":"OK","buttonCancel":"Megse","buttonSave":"Mentes","itemClose":"Bezaras"};dojo.provide("dojo.cldr.nls.gregorian.hu");dojo.cldr.nls.gregorian.hu={"field-dayperiod":"napszak","dayPeriods-format-wide-pm":"du.","field-minute":"perc","eraNames":["idoszamitasunk elott","idoszamitasunk szerint"],"field-day-relative+-1":"tegnap","field-weekday":"het napja","field-day-relative+-2":"tegnapelott","dateFormatItem-MMdd":"MM.dd.","field-day-relative+-3":"harom nappal ezelott","days-standAlone-wide":["vasarnap",
"hetfo","kedd","szerda","csutortok","pentek","szombat"],"dateFormatItem-MMM":"LLL","months-standAlone-narrow":["J","F","M","A","M","J","J","A","Sz","O","N","D"],"field-era":"era","field-hour":"ora","dayPeriods-format-wide-am":"de.","quarters-standAlone-abbr":["N1","N2","N3","N4"],"timeFormat-full":"H:mm:ss zzzz","months-standAlone-abbr":["jan.","febr.","marc.","apr.","maj.","jun.","jul.","aug.","szept.","okt.","nov.","dec."],"field-day-relative+0":"ma","field-day-relative+1":"holnap","days-standAlone-narrow":["V",
"H","K","Sz","Cs","P","Sz"],"eraAbbr":["i. e.","i. sz."],"field-day-relative+2":"holnaputan","field-day-relative+3":"harom nap mulva","dateFormatItem-yyyyMM":"yyyy.MM","dateFormatItem-yyyyMMMM":"y. MMMM","dateFormat-long":"y. MMMM d.","timeFormat-medium":"H:mm:ss","field-zone":"zona","dateFormatItem-Hm":"H:mm","dateFormat-medium":"yyyy.MM.dd.","dateFormatItem-Hms":"H:mm:ss","quarters-standAlone-wide":["I. negyedev","II. negyedev","III. negyedev","IV. negyedev"],"field-year":"ev","field-week":"het",
"months-standAlone-wide":["januar","februar","marcius","aprilis","majus","junius","julius","augusztus","szeptember","oktober","november","december"],"dateFormatItem-MMMd":"MMM d.","dateFormatItem-yyQ":"yy/Q","timeFormat-long":"H:mm:ss z","months-format-abbr":["jan.","febr.","marc.","apr.","maj.","jun.","jul.","aug.","szept.","okt.","nov.","dec."],"timeFormat-short":"H:mm","dateFormatItem-H":"H","field-month":"honap","dateFormatItem-MMMMd":"MMMM d.","quarters-format-abbr":["N1","N2","N3","N4"],"days-format-abbr":["V",
"H","K","Sze","Cs","P","Szo"],"dateFormatItem-mmss":"mm:ss","dateFormatItem-M":"L","days-format-narrow":["V","H","K","Sz","Cs","P","Sz"],"field-second":"masodperc","field-day":"nap","dateFormatItem-MEd":"M. d., E","months-format-narrow":["J","F","M","A","M","J","J","A","Sz","O","N","D"],"days-standAlone-abbr":["V","H","K","Sze","Cs","P","Szo"],"dateFormat-short":"yyyy.MM.dd.","dateFormat-full":"y. MMMM d., EEEE","dateFormatItem-Md":"M. d.","months-format-wide":["januar","februar","marcius","aprilis",
"majus","junius","julius","augusztus","szeptember","oktober","november","december"],"dateFormatItem-d":"d","quarters-format-wide":["I. negyedev","II. negyedev","III. negyedev","IV. negyedev"],"days-format-wide":["vasarnap","hetfo","kedd","szerda","csutortok","pentek","szombat"],"eraNarrow":["i. e.","i. sz."],"quarters-standAlone-narrow":["1","2","3","4"],"dateFormatItem-yQQQ":"y QQQ","dateFormatItem-yMEd":"EEE, y-M-d","dateFormatItem-MMMEd":"E MMM d","dateTimeFormats-appendItem-Day-Of-Week":"{0} {1}",
"dateTimeFormat-medium":"{1} {0}","dateFormatItem-EEEd":"d EEE","dayPeriods-format-abbr-am":"AM","dateTimeFormats-appendItem-Second":"{0} ({2}: {1})","dateFormatItem-yM":"y-M","dateFormatItem-yMMM":"y MMM","dateFormatItem-yQ":"y Q","dateTimeFormats-appendItem-Era":"{0} {1}","dateTimeFormats-appendItem-Week":"{0} ({2}: {1})","dateFormatItem-ms":"mm:ss","quarters-format-narrow":["1","2","3","4"],"dateFormatItem-h":"h a","dateTimeFormat-long":"{1} {0}","dayPeriods-format-narrow-am":"AM","dateTimeFormat-full":"{1} {0}",
"dateTimeFormats-appendItem-Day":"{0} ({2}: {1})","dateFormatItem-y":"y","dateFormatItem-hm":"h:mm a","dateTimeFormats-appendItem-Year":"{0} {1}","dateTimeFormats-appendItem-Hour":"{0} ({2}: {1})","dayPeriods-format-abbr-pm":"PM","dateTimeFormats-appendItem-Quarter":"{0} ({2}: {1})","dateTimeFormats-appendItem-Month":"{0} ({2}: {1})","dateTimeFormats-appendItem-Minute":"{0} ({2}: {1})","dateFormatItem-yMMMEd":"EEE, y MMM d","dateTimeFormats-appendItem-Timezone":"{0} {1}","dayPeriods-format-narrow-pm":"PM",
"dateTimeFormat-short":"{1} {0}","dateFormatItem-hms":"h:mm:ss a"};dojo.provide("dojo.nls.dojo_it");dojo.provide("dijit.nls.common.it");dijit.nls.common.it={"buttonOk":"OK","buttonCancel":"Annulla","buttonSave":"Salva","itemClose":"Chiudi"};dojo.provide("dojo.cldr.nls.gregorian.it");dojo.cldr.nls.gregorian.it={"months-format-narrow":["G","F","M","A","M","G","L","A","S","O","N","D"],"field-weekday":"giorno della settimana","dateFormatItem-yyQQQQ":"QQQQ yy","dateFormatItem-yQQQ":"QQQ y","dateFormatItem-yMEd":"EEE, d/M/y",
"dateFormatItem-MMMEd":"EEE d MMM","eraNarrow":["aC","dC"],"dateFormat-long":"dd MMMM y","months-format-wide":["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre"],"dayPeriods-format-wide-pm":"p.","dateFormat-full":"EEEE d MMMM y","dateFormatItem-Md":"d/M","field-era":"era","dateFormatItem-yM":"M/y","months-standAlone-wide":["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],
"timeFormat-short":"HH:mm","quarters-format-wide":["1o trimestre","2o trimestre","3o trimestre","4o trimestre"],"timeFormat-long":"HH:mm:ss z","field-year":"anno","dateFormatItem-yMMM":"MMM y","dateFormatItem-yQ":"Q-yyyy","dateFormatItem-yyyyMMMM":"MMMM y","field-hour":"ora","dateFormatItem-MMdd":"dd/MM","months-format-abbr":["gen","feb","mar","apr","mag","giu","lug","ago","set","ott","nov","dic"],"dateFormatItem-yyQ":"Q yy","timeFormat-full":"HH:mm:ss zzzz","field-day-relative+0":"oggi","field-day-relative+1":"domani",
"field-day-relative+2":"dopodomani","field-day-relative+3":"tra tre giorni","months-standAlone-abbr":["gen","feb","mar","apr","mag","giu","lug","ago","set","ott","nov","dic"],"quarters-format-abbr":["T1","T2","T3","T4"],"quarters-standAlone-wide":["1o trimestre","2o trimestre","3o trimestre","4o trimestre"],"dateFormatItem-M":"L","days-standAlone-wide":["Domenica","Lunedi","Martedi","Mercoledi","Giovedi","Venerdi","Sabato"],"timeFormat-medium":"HH:mm:ss","dateFormatItem-Hm":"HH:mm","quarters-standAlone-abbr":["T1",
"T2","T3","T4"],"eraAbbr":["aC","dC"],"field-minute":"minuto","field-dayperiod":"periodo del giorno","days-standAlone-abbr":["dom","lun","mar","mer","gio","ven","sab"],"dateFormatItem-d":"d","dateFormatItem-ms":"mm:ss","field-day-relative+-1":"ieri","dateFormatItem-h":"hh a","field-day-relative+-2":"l'altro ieri","field-day-relative+-3":"tre giorni fa","dateFormatItem-MMMd":"d MMM","dateFormatItem-MEd":"EEE d/M","field-day":"giorno","days-format-wide":["domenica","lunedi","martedi","mercoledi","giovedi",
"venerdi","sabato"],"field-zone":"zona","dateFormatItem-y":"y","months-standAlone-narrow":["G","F","M","A","M","G","L","A","S","O","N","D"],"dateFormatItem-yyMM":"MM/yy","dateFormatItem-hm":"hh:mm a","days-format-abbr":["dom","lun","mar","mer","gio","ven","sab"],"eraNames":["a.C.","d.C"],"days-format-narrow":["D","L","M","M","G","V","S"],"field-month":"mese","days-standAlone-narrow":["D","L","M","M","G","V","S"],"dateFormatItem-MMM":"LLL","dayPeriods-format-wide-am":"m.","dateFormatItem-MMMMdd":"dd MMMM",
"dateFormat-short":"dd/MM/yy","field-second":"secondo","dateFormatItem-yMMMEd":"EEE d MMM y","field-week":"settimana","dateFormat-medium":"dd/MMM/y","dateFormatItem-Hms":"HH:mm:ss","dateFormatItem-hms":"hh:mm:ss a","quarters-standAlone-narrow":["1","2","3","4"],"dateTimeFormats-appendItem-Day-Of-Week":"{0} {1}","dateTimeFormat-medium":"{1} {0}","dateFormatItem-EEEd":"d EEE","dayPeriods-format-abbr-am":"AM","dateTimeFormats-appendItem-Second":"{0} ({2}: {1})","dateTimeFormats-appendItem-Era":"{0} {1}",
"dateTimeFormats-appendItem-Week":"{0} ({2}: {1})","dateFormatItem-H":"HH","quarters-format-narrow":["1","2","3","4"],"dateTimeFormat-long":"{1} {0}","dayPeriods-format-narrow-am":"AM","dateTimeFormat-full":"{1} {0}","dateTimeFormats-appendItem-Day":"{0} ({2}: {1})","dateTimeFormats-appendItem-Year":"{0} {1}","dateTimeFormats-appendItem-Hour":"{0} ({2}: {1})","dayPeriods-format-abbr-pm":"PM","dateTimeFormats-appendItem-Quarter":"{0} ({2}: {1})","dateTimeFormats-appendItem-Month":"{0} ({2}: {1})",
"dateTimeFormats-appendItem-Minute":"{0} ({2}: {1})","dateTimeFormats-appendItem-Timezone":"{0} {1}","dayPeriods-format-narrow-pm":"PM","dateTimeFormat-short":"{1} {0}"};dojo.provide("dojo.nls.dojo_it-it");dojo.provide("dijit.nls.common.it_it");dijit.nls.common.it_it={"buttonOk":"OK","buttonCancel":"Annulla","buttonSave":"Salva","itemClose":"Chiudi"};dojo.provide("dojo.cldr.nls.gregorian.it_it");dojo.cldr.nls.gregorian.it_it={"months-format-narrow":["G","F","M","A","M","G","L","A","S","O","N","D"],
"field-weekday":"giorno della settimana","dateFormatItem-yyQQQQ":"QQQQ yy","dateFormatItem-yQQQ":"QQQ y","dateFormatItem-yMEd":"EEE, d/M/y","dateFormatItem-MMMEd":"EEE d MMM","eraNarrow":["aC","dC"],"dateFormat-long":"dd MMMM y","months-format-wide":["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre"],"dayPeriods-format-wide-pm":"p.","dateFormat-full":"EEEE d MMMM y","dateFormatItem-Md":"d/M","field-era":"era","dateFormatItem-yM":"M/y",
"months-standAlone-wide":["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],"timeFormat-short":"HH:mm","quarters-format-wide":["1o trimestre","2o trimestre","3o trimestre","4o trimestre"],"timeFormat-long":"HH:mm:ss z","field-year":"anno","dateFormatItem-yMMM":"MMM y","dateFormatItem-yQ":"Q-yyyy","dateFormatItem-yyyyMMMM":"MMMM y","field-hour":"ora","dateFormatItem-MMdd":"dd/MM","months-format-abbr":["gen","feb","mar","apr","mag",
"giu","lug","ago","set","ott","nov","dic"],"dateFormatItem-yyQ":"Q yy","timeFormat-full":"HH:mm:ss zzzz","field-day-relative+0":"oggi","field-day-relative+1":"domani","field-day-relative+2":"dopodomani","field-day-relative+3":"tra tre giorni","months-standAlone-abbr":["gen","feb","mar","apr","mag","giu","lug","ago","set","ott","nov","dic"],"quarters-format-abbr":["T1","T2","T3","T4"],"quarters-standAlone-wide":["1o trimestre","2o trimestre","3o trimestre","4o trimestre"],"dateFormatItem-M":"L","days-standAlone-wide":["Domenica",
"Lunedi","Martedi","Mercoledi","Giovedi","Venerdi","Sabato"],"timeFormat-medium":"HH:mm:ss","dateFormatItem-Hm":"HH:mm","quarters-standAlone-abbr":["T1","T2","T3","T4"],"eraAbbr":["aC","dC"],"field-minute":"minuto","field-dayperiod":"periodo del giorno","days-standAlone-abbr":["dom","lun","mar","mer","gio","ven","sab"],"dateFormatItem-d":"d","dateFormatItem-ms":"mm:ss","field-day-relative+-1":"ieri","dateFormatItem-h":"hh a","field-day-relative+-2":"l'altro ieri","field-day-relative+-3":"tre giorni fa",
"dateFormatItem-MMMd":"d MMM","dateFormatItem-MEd":"EEE d/M","field-day":"giorno","days-format-wide":["domenica","lunedi","martedi","mercoledi","giovedi","venerdi","sabato"],"field-zone":"zona","dateFormatItem-y":"y","months-standAlone-narrow":["G","F","M","A","M","G","L","A","S","O","N","D"],"dateFormatItem-yyMM":"MM/yy","dateFormatItem-hm":"hh:mm a","days-format-abbr":["dom","lun","mar","mer","gio","ven","sab"],"eraNames":["a.C.","d.C"],"days-format-narrow":["D","L","M","M","G","V","S"],"field-month":"mese",
"days-standAlone-narrow":["D","L","M","M","G","V","S"],"dateFormatItem-MMM":"LLL","dayPeriods-format-wide-am":"m.","dateFormatItem-MMMMdd":"dd MMMM","dateFormat-short":"dd/MM/yy","field-second":"secondo","dateFormatItem-yMMMEd":"EEE d MMM y","field-week":"settimana","dateFormat-medium":"dd/MMM/y","dateFormatItem-Hms":"HH:mm:ss","dateFormatItem-hms":"hh:mm:ss a","quarters-standAlone-narrow":["1","2","3","4"],"dateTimeFormats-appendItem-Day-Of-Week":"{0} {1}","dateTimeFormat-medium":"{1} {0}","dateFormatItem-EEEd":"d EEE",
"dayPeriods-format-abbr-am":"AM","dateTimeFormats-appendItem-Second":"{0} ({2}: {1})","dateTimeFormats-appendItem-Era":"{0} {1}","dateTimeFormats-appendItem-Week":"{0} ({2}: {1})","dateFormatItem-H":"HH","quarters-format-narrow":["1","2","3","4"],"dateTimeFormat-long":"{1} {0}","dayPeriods-format-narrow-am":"AM","dateTimeFormat-full":"{1} {0}","dateTimeFormats-appendItem-Day":"{0} ({2}: {1})","dateTimeFormats-appendItem-Year":"{0} {1}","dateTimeFormats-appendItem-Hour":"{0} ({2}: {1})","dayPeriods-format-abbr-pm":"PM",
"dateTimeFormats-appendItem-Quarter":"{0} ({2}: {1})","dateTimeFormats-appendItem-Month":"{0} ({2}: {1})","dateTimeFormats-appendItem-Minute":"{0} ({2}: {1})","dateTimeFormats-appendItem-Timezone":"{0} {1}","dayPeriods-format-narrow-pm":"PM","dateTimeFormat-short":"{1} {0}"};dojo.provide("dojo.nls.dojo_ja");dojo.provide("dijit.nls.common.ja");dijit.nls.common.ja={"buttonOk":"OK","buttonCancel":"?????","buttonSave":"??","itemClose":"???"};dojo.provide("dojo.cldr.nls.gregorian.ja");dojo.cldr.nls.gregorian.ja=
{"field-weekday":"??","dateFormatItem-yQQQ":"yQQQ","dateFormatItem-yMEd":"y/M/d(EEE)","dateFormatItem-MMMEd":"M?d?(E)","eraNarrow":["BC","AD"],"dateFormat-long":"y?M?d?","months-format-wide":["1?","2?","3?","4?","5?","6?","7?","8?","9?","10?","11?","12?"],"dateTimeFormat-medium":"{1} {0}","dayPeriods-format-wide-pm":"??","dateFormat-full":"y?M?d?EEEE","dateFormatItem-Md":"M/d","dateFormatItem-yMd":"y/M/d","field-era":"??","dateFormatItem-yM":"y/M","months-standAlone-wide":["1?","2?","3?","4?","5?",
"6?","7?","8?","9?","10?","11?","12?"],"timeFormat-short":"H:mm","quarters-format-wide":["?1???","?2???","?3???","?4???"],"timeFormat-long":"H:mm:ss z","field-year":"?","dateFormatItem-yMMM":"y?M?","dateFormatItem-yQ":"y/Q","field-hour":"?","dateFormatItem-MMdd":"MM/dd","months-format-abbr":["1?","2?","3?","4?","5?","6?","7?","8?","9?","10?","11?","12?"],"dateFormatItem-yyQ":"yy/Q","timeFormat-full":"H?mm?ss? zzzz","field-day-relative+0":"??","field-day-relative+1":"??","field-day-relative+2":"???",
"dateFormatItem-H":"H?","field-day-relative+3":"3??","months-standAlone-abbr":["1?","2?","3?","4?","5?","6?","7?","8?","9?","10?","11?","12?"],"quarters-format-abbr":["Q1","Q2","Q3","Q4"],"quarters-standAlone-wide":["?1???","?2???","?3???","?4???"],"dateFormatItem-M":"L","days-standAlone-wide":["???","???","???","???","???","???","???"],"dateFormatItem-yyMMM":"y?M?","timeFormat-medium":"H:mm:ss","dateFormatItem-Hm":"H:mm","eraAbbr":["BC","AD"],"field-minute":"?","field-dayperiod":"??/??","days-standAlone-abbr":["?",
"?","?","?","?","?","?"],"dateFormatItem-d":"d?","dateFormatItem-ms":"mm:ss","field-day-relative+-1":"??","dateFormatItem-h":"ah","dateTimeFormat-long":"{1}{0}","field-day-relative+-2":"???","field-day-relative+-3":"3??","dateFormatItem-MMMd":"M?d?","dateFormatItem-MEd":"M/d(E)","dateTimeFormat-full":"{1}{0}","field-day":"?","days-format-wide":["???","???","???","???","???","???","???"],"field-zone":"??????","dateFormatItem-yyyyMM":"yyyy/MM","dateFormatItem-y":"y","months-standAlone-narrow":["1",
"2","3","4","5","6","7","8","9","10","11","12"],"dateFormatItem-hm":"ah:mm","dateFormatItem-GGGGyMd":"GGGGy?M?d?","days-format-abbr":["?","?","?","?","?","?","?"],"dateFormatItem-yMMMd":"y?M?d?","eraNames":["???","??"],"days-format-narrow":["?","?","?","?","?","?","?"],"field-month":"?","days-standAlone-narrow":["?","?","?","?","?","?","?"],"dateFormatItem-MMM":"LLL","dayPeriods-format-wide-am":"??","dateFormat-short":"yy/MM/dd","field-second":"?","dateFormatItem-yMMMEd":"y?M?d?(EEE)","dateFormatItem-Ed":"d?(EEE)",
"field-week":"?","dateFormat-medium":"yyyy/MM/dd","dateTimeFormat-short":"{1} {0}","dateFormatItem-Hms":"H:mm:ss","dateFormatItem-hms":"ah:mm:ss","dateFormatItem-yyyy":"y?","months-format-narrow":["1","2","3","4","5","6","7","8","9","10","11","12"],"quarters-standAlone-narrow":["1","2","3","4"],"dateTimeFormats-appendItem-Day-Of-Week":"{0} {1}","dateFormatItem-EEEd":"d EEE","dayPeriods-format-abbr-am":"AM","dateTimeFormats-appendItem-Second":"{0} ({2}: {1})","dateTimeFormats-appendItem-Era":"{0} {1}",
"dateTimeFormats-appendItem-Week":"{0} ({2}: {1})","quarters-standAlone-abbr":["Q1","Q2","Q3","Q4"],"quarters-format-narrow":["1","2","3","4"],"dayPeriods-format-narrow-am":"AM","dateTimeFormats-appendItem-Day":"{0} ({2}: {1})","dateTimeFormats-appendItem-Year":"{0} {1}","dateTimeFormats-appendItem-Hour":"{0} ({2}: {1})","dayPeriods-format-abbr-pm":"PM","dateTimeFormats-appendItem-Quarter":"{0} ({2}: {1})","dateTimeFormats-appendItem-Month":"{0} ({2}: {1})","dateTimeFormats-appendItem-Minute":"{0} ({2}: {1})",
"dateTimeFormats-appendItem-Timezone":"{0} {1}","dayPeriods-format-narrow-pm":"PM"};dojo.provide("dojo.nls.dojo_ja-jp");dojo.provide("dijit.nls.common.ja_jp");dijit.nls.common.ja_jp={"buttonOk":"OK","buttonCancel":"?????","buttonSave":"??","itemClose":"???"};dojo.provide("dojo.cldr.nls.gregorian.ja_jp");dojo.cldr.nls.gregorian.ja_jp={"field-weekday":"??","dateFormatItem-yQQQ":"yQQQ","dateFormatItem-yMEd":"y/M/d(EEE)","dateFormatItem-MMMEd":"M?d?(E)","eraNarrow":["BC","AD"],"dateFormat-long":"y?M?d?",
"months-format-wide":["1?","2?","3?","4?","5?","6?","7?","8?","9?","10?","11?","12?"],"dateTimeFormat-medium":"{1} {0}","dayPeriods-format-wide-pm":"??","dateFormat-full":"y?M?d?EEEE","dateFormatItem-Md":"M/d","dateFormatItem-yMd":"y/M/d","field-era":"??","dateFormatItem-yM":"y/M","months-standAlone-wide":["1?","2?","3?","4?","5?","6?","7?","8?","9?","10?","11?","12?"],"timeFormat-short":"H:mm","quarters-format-wide":["?1???","?2???","?3???","?4???"],"timeFormat-long":"H:mm:ss z","field-year":"?",
"dateFormatItem-yMMM":"y?M?","dateFormatItem-yQ":"y/Q","field-hour":"?","dateFormatItem-MMdd":"MM/dd","months-format-abbr":["1?","2?","3?","4?","5?","6?","7?","8?","9?","10?","11?","12?"],"dateFormatItem-yyQ":"yy/Q","timeFormat-full":"H?mm?ss? zzzz","field-day-relative+0":"??","field-day-relative+1":"??","field-day-relative+2":"???","dateFormatItem-H":"H?","field-day-relative+3":"3??","months-standAlone-abbr":["1?","2?","3?","4?","5?","6?","7?","8?","9?","10?","11?","12?"],"quarters-format-abbr":["Q1",
"Q2","Q3","Q4"],"quarters-standAlone-wide":["?1???","?2???","?3???","?4???"],"dateFormatItem-M":"L","days-standAlone-wide":["???","???","???","???","???","???","???"],"dateFormatItem-yyMMM":"y?M?","timeFormat-medium":"H:mm:ss","dateFormatItem-Hm":"H:mm","eraAbbr":["BC","AD"],"field-minute":"?","field-dayperiod":"??/??","days-standAlone-abbr":["?","?","?","?","?","?","?"],"dateFormatItem-d":"d?","dateFormatItem-ms":"mm:ss","field-day-relative+-1":"??","dateFormatItem-h":"ah","dateTimeFormat-long":"{1}{0}",
"field-day-relative+-2":"???","field-day-relative+-3":"3??","dateFormatItem-MMMd":"M?d?","dateFormatItem-MEd":"M/d(E)","dateTimeFormat-full":"{1}{0}","field-day":"?","days-format-wide":["???","???","???","???","???","???","???"],"field-zone":"??????","dateFormatItem-yyyyMM":"yyyy/MM","dateFormatItem-y":"y","months-standAlone-narrow":["1","2","3","4","5","6","7","8","9","10","11","12"],"dateFormatItem-hm":"ah:mm","dateFormatItem-GGGGyMd":"GGGGy?M?d?","days-format-abbr":["?","?","?","?","?","?","?"],
"dateFormatItem-yMMMd":"y?M?d?","eraNames":["???","??"],"days-format-narrow":["?","?","?","?","?","?","?"],"field-month":"?","days-standAlone-narrow":["?","?","?","?","?","?","?"],"dateFormatItem-MMM":"LLL","dayPeriods-format-wide-am":"??","dateFormat-short":"yy/MM/dd","field-second":"?","dateFormatItem-yMMMEd":"y?M?d?(EEE)","dateFormatItem-Ed":"d?(EEE)","field-week":"?","dateFormat-medium":"yyyy/MM/dd","dateTimeFormat-short":"{1} {0}","dateFormatItem-Hms":"H:mm:ss","dateFormatItem-hms":"ah:mm:ss",
"dateFormatItem-yyyy":"y?","months-format-narrow":["1","2","3","4","5","6","7","8","9","10","11","12"],"quarters-standAlone-narrow":["1","2","3","4"],"dateTimeFormats-appendItem-Day-Of-Week":"{0} {1}","dateFormatItem-EEEd":"d EEE","dayPeriods-format-abbr-am":"AM","dateTimeFormats-appendItem-Second":"{0} ({2}: {1})","dateTimeFormats-appendItem-Era":"{0} {1}","dateTimeFormats-appendItem-Week":"{0} ({2}: {1})","quarters-standAlone-abbr":["Q1","Q2","Q3","Q4"],"quarters-format-narrow":["1","2","3","4"],
"dayPeriods-format-narrow-am":"AM","dateTimeFormats-appendItem-Day":"{0} ({2}: {1})","dateTimeFormats-appendItem-Year":"{0} {1}","dateTimeFormats-appendItem-Hour":"{0} ({2}: {1})","dayPeriods-format-abbr-pm":"PM","dateTimeFormats-appendItem-Quarter":"{0} ({2}: {1})","dateTimeFormats-appendItem-Month":"{0} ({2}: {1})","dateTimeFormats-appendItem-Minute":"{0} ({2}: {1})","dateTimeFormats-appendItem-Timezone":"{0} {1}","dayPeriods-format-narrow-pm":"PM"};dojo.provide("dojo.nls.dojo_ko");dojo.provide("dijit.nls.common.ko");
dijit.nls.common.ko={"buttonOk":"??","buttonCancel":"??","buttonSave":"??","itemClose":"??"};dojo.provide("dojo.cldr.nls.gregorian.ko");dojo.cldr.nls.gregorian.ko={"months-format-narrow":["1?","2?","3?","4?","5?","6?","7?","8?","9?","10?","11?","12?"],"field-weekday":"??","dateFormatItem-yQQQ":"y? QQQ","dateFormatItem-yMEd":"yyyy. M. d. EEE","dateFormatItem-MMMEd":"MMM d? (E)","eraNarrow":["???","??"],"dateFormat-long":"y? M? d?","months-format-wide":["1?","2?","3?","4?","5?","6?","7?","8?","9?",
"10?","11?","12?"],"dateTimeFormat-medium":"{1} {0}","dateFormatItem-EEEd":"d? EEE","dayPeriods-format-wide-pm":"??","dateFormat-full":"y? M? d? EEEE","dateFormatItem-Md":"M. d.","field-era":"??","dateFormatItem-yM":"yyyy. M.","months-standAlone-wide":["1?","2?","3?","4?","5?","6?","7?","8?","9?","10?","11?","12?"],"timeFormat-short":"a h:mm","quarters-format-wide":["? 1/4??","? 2/4??","? 3/4??","? 4/4??"],"timeFormat-long":"a h? m? s? z","field-year":"?","dateFormatItem-yMMM":"y? MMM","dateFormatItem-yQ":"y? Q??",
"field-hour":"?","dateFormatItem-MMdd":"MM. dd","months-format-abbr":["1?","2?","3?","4?","5?","6?","7?","8?","9?","10?","11?","12?"],"dateFormatItem-yyQ":"yy? Q??","timeFormat-full":"a h? m? s? zzzz","field-day-relative+0":"??","field-day-relative+1":"??","field-day-relative+2":"??","field-day-relative+3":"3??","months-standAlone-abbr":["1?","2?","3?","4?","5?","6?","7?","8?","9?","10?","11?","12?"],"quarters-format-abbr":["1??","2??","3??","4??"],"quarters-standAlone-wide":["? 1/4??","? 2/4??",
"? 3/4??","? 4/4??"],"dateFormatItem-HHmmss":"HH:mm:ss","dateFormatItem-M":"L","days-standAlone-wide":["???","???","???","???","???","???","???"],"dateFormatItem-yyMMM":"yy? MMM","timeFormat-medium":"a h:mm:ss","dateFormatItem-Hm":"HH:mm","quarters-standAlone-abbr":["1??","2??","3??","4??"],"eraAbbr":["???","??"],"field-minute":"?","field-dayperiod":"??/??","days-standAlone-abbr":["?","?","?","?","?","?","?"],"dateFormatItem-d":"d","dateFormatItem-ms":"mm:ss","field-day-relative+-1":"??","dateFormatItem-h":"a h",
"dateTimeFormat-long":"{1} {0}","field-day-relative+-2":"???","field-day-relative+-3":"???","dateFormatItem-MMMd":"MMM d?","dateFormatItem-MEd":"M. d. (E)","dateTimeFormat-full":"{1} {0}","field-day":"?","days-format-wide":["???","???","???","???","???","???","???"],"field-zone":"???","dateFormatItem-yyyyMM":"yyyy. MM","dateFormatItem-y":"y","months-standAlone-narrow":["1?","2?","3?","4?","5?","6?","7?","8?","9?","10?","11?","12?"],"dateFormatItem-yyMM":"YY. M.","dateFormatItem-hm":"a h:mm","days-format-abbr":["?",
"?","?","?","?","?","?"],"dateFormatItem-yMMMd":"y? MMM d?","eraNames":["?????","????"],"days-format-narrow":["?","?","?","?","?","?","?"],"field-month":"?","days-standAlone-narrow":["?","?","?","?","?","?","?"],"dateFormatItem-MMM":"LLL","dayPeriods-format-wide-am":"??","dateFormat-short":"yy. M. d.","field-second":"?","dateFormatItem-yMMMEd":"y? MMM d? EEE","dateFormatItem-Ed":"d? (E)","field-week":"?","dateFormat-medium":"yyyy. M. d.","dateFormatItem-mmss":"mm:ss","dateTimeFormat-short":"{1} {0}",
"dateFormatItem-Hms":"H? m? s?","dateFormatItem-hms":"a h:mm:ss","quarters-standAlone-narrow":["1","2","3","4"],"dateTimeFormats-appendItem-Day-Of-Week":"{0} {1}","dayPeriods-format-abbr-am":"AM","dateTimeFormats-appendItem-Second":"{0} ({2}: {1})","dateTimeFormats-appendItem-Era":"{0} {1}","dateTimeFormats-appendItem-Week":"{0} ({2}: {1})","dateFormatItem-H":"HH","quarters-format-narrow":["1","2","3","4"],"dayPeriods-format-narrow-am":"AM","dateTimeFormats-appendItem-Day":"{0} ({2}: {1})","dateTimeFormats-appendItem-Year":"{0} {1}",
"dateTimeFormats-appendItem-Hour":"{0} ({2}: {1})","dayPeriods-format-abbr-pm":"PM","dateTimeFormats-appendItem-Quarter":"{0} ({2}: {1})","dateTimeFormats-appendItem-Month":"{0} ({2}: {1})","dateTimeFormats-appendItem-Minute":"{0} ({2}: {1})","dateTimeFormats-appendItem-Timezone":"{0} {1}","dayPeriods-format-narrow-pm":"PM"};dojo.provide("dojo.nls.dojo_ko-kr");dojo.provide("dijit.nls.common.ko_kr");dijit.nls.common.ko_kr={"buttonOk":"??","buttonCancel":"??","buttonSave":"??","itemClose":"??"};dojo.provide("dojo.cldr.nls.gregorian.ko_kr");
dojo.cldr.nls.gregorian.ko_kr={"months-format-narrow":["1?","2?","3?","4?","5?","6?","7?","8?","9?","10?","11?","12?"],"field-weekday":"??","dateFormatItem-yQQQ":"y? QQQ","dateFormatItem-yMEd":"yyyy. M. d. EEE","dateFormatItem-MMMEd":"MMM d? (E)","eraNarrow":["???","??"],"dateFormat-long":"y? M? d?","months-format-wide":["1?","2?","3?","4?","5?","6?","7?","8?","9?","10?","11?","12?"],"dateTimeFormat-medium":"{1} {0}","dateFormatItem-EEEd":"d? EEE","dayPeriods-format-wide-pm":"??","dateFormat-full":"y? M? d? EEEE",
"dateFormatItem-Md":"M. d.","field-era":"??","dateFormatItem-yM":"yyyy. M.","months-standAlone-wide":["1?","2?","3?","4?","5?","6?","7?","8?","9?","10?","11?","12?"],"timeFormat-short":"a h:mm","quarters-format-wide":["? 1/4??","? 2/4??","? 3/4??","? 4/4??"],"timeFormat-long":"a h? m? s? z","field-year":"?","dateFormatItem-yMMM":"y? MMM","dateFormatItem-yQ":"y? Q??","field-hour":"?","dateFormatItem-MMdd":"MM. dd","months-format-abbr":["1?","2?","3?","4?","5?","6?","7?","8?","9?","10?","11?","12?"],
"dateFormatItem-yyQ":"yy? Q??","timeFormat-full":"a h? m? s? zzzz","field-day-relative+0":"??","field-day-relative+1":"??","field-day-relative+2":"??","field-day-relative+3":"3??","months-standAlone-abbr":["1?","2?","3?","4?","5?","6?","7?","8?","9?","10?","11?","12?"],"quarters-format-abbr":["1??","2??","3??","4??"],"quarters-standAlone-wide":["? 1/4??","? 2/4??","? 3/4??","? 4/4??"],"dateFormatItem-HHmmss":"HH:mm:ss","dateFormatItem-M":"L","days-standAlone-wide":["???","???","???","???","???","???",
"???"],"dateFormatItem-yyMMM":"yy? MMM","timeFormat-medium":"a h:mm:ss","dateFormatItem-Hm":"HH:mm","quarters-standAlone-abbr":["1??","2??","3??","4??"],"eraAbbr":["???","??"],"field-minute":"?","field-dayperiod":"??/??","days-standAlone-abbr":["?","?","?","?","?","?","?"],"dateFormatItem-d":"d","dateFormatItem-ms":"mm:ss","field-day-relative+-1":"??","dateFormatItem-h":"a h","dateTimeFormat-long":"{1} {0}","field-day-relative+-2":"???","field-day-relative+-3":"???","dateFormatItem-MMMd":"MMM d?",
"dateFormatItem-MEd":"M. d. (E)","dateTimeFormat-full":"{1} {0}","field-day":"?","days-format-wide":["???","???","???","???","???","???","???"],"field-zone":"???","dateFormatItem-yyyyMM":"yyyy. MM","dateFormatItem-y":"y","months-standAlone-narrow":["1?","2?","3?","4?","5?","6?","7?","8?","9?","10?","11?","12?"],"dateFormatItem-yyMM":"YY. M.","dateFormatItem-hm":"a h:mm","days-format-abbr":["?","?","?","?","?","?","?"],"dateFormatItem-yMMMd":"y? MMM d?","eraNames":["?????","????"],"days-format-narrow":["?",
"?","?","?","?","?","?"],"field-month":"?","days-standAlone-narrow":["?","?","?","?","?","?","?"],"dateFormatItem-MMM":"LLL","dayPeriods-format-wide-am":"??","dateFormat-short":"yy. M. d.","field-second":"?","dateFormatItem-yMMMEd":"y? MMM d? EEE","dateFormatItem-Ed":"d? (E)","field-week":"?","dateFormat-medium":"yyyy. M. d.","dateFormatItem-mmss":"mm:ss","dateTimeFormat-short":"{1} {0}","dateFormatItem-Hms":"H? m? s?","dateFormatItem-hms":"a h:mm:ss","quarters-standAlone-narrow":["1","2","3","4"],
"dateTimeFormats-appendItem-Day-Of-Week":"{0} {1}","dayPeriods-format-abbr-am":"AM","dateTimeFormats-appendItem-Second":"{0} ({2}: {1})","dateTimeFormats-appendItem-Era":"{0} {1}","dateTimeFormats-appendItem-Week":"{0} ({2}: {1})","dateFormatItem-H":"HH","quarters-format-narrow":["1","2","3","4"],"dayPeriods-format-narrow-am":"AM","dateTimeFormats-appendItem-Day":"{0} ({2}: {1})","dateTimeFormats-appendItem-Year":"{0} {1}","dateTimeFormats-appendItem-Hour":"{0} ({2}: {1})","dayPeriods-format-abbr-pm":"PM",
"dateTimeFormats-appendItem-Quarter":"{0} ({2}: {1})","dateTimeFormats-appendItem-Month":"{0} ({2}: {1})","dateTimeFormats-appendItem-Minute":"{0} ({2}: {1})","dateTimeFormats-appendItem-Timezone":"{0} {1}","dayPeriods-format-narrow-pm":"PM"};dojo.provide("dojo.nls.dojo_nb");dojo.provide("dijit.nls.common.nb");dijit.nls.common.nb={"buttonOk":"OK","buttonCancel":"Avbryt","buttonSave":"Lagre","itemClose":"Lukk"};dojo.provide("dojo.cldr.nls.gregorian.nb");dojo.cldr.nls.gregorian.nb={"months-format-narrow":["J",
"F","M","A","M","J","J","A","S","O","N","D"],"field-weekday":"ukedag","dateFormatItem-yyQQQQ":"QQQQ yy","dateFormatItem-yQQQ":"QQQ y","dateFormatItem-yMEd":"EEE d.M.yyyy","dateFormatItem-MMMEd":"E d. MMM","eraNarrow":["f.Kr.","e.Kr."],"dateFormat-long":"d. MMMM y","months-format-wide":["januar","februar","mars","april","mai","juni","juli","august","september","oktober","november","desember"],"dateFormatItem-EEEd":"EEE d","dayPeriods-format-wide-pm":"PM","dateFormat-full":"EEEE d. MMMM y","dateFormatItem-Md":"d.M.",
"field-era":"tidsalder","dateFormatItem-yM":"M y","months-standAlone-wide":["januar","februar","mars","april","mai","juni","juli","august","september","oktober","november","desember"],"timeFormat-short":"HH:mm","quarters-format-wide":["1. kvartal","2. kvartal","3. kvartal","4. kvartal"],"timeFormat-long":"HH:mm:ss z","field-year":"ar","dateFormatItem-yMMM":"MMM y","dateFormatItem-yQ":"Q yyyy","dateFormatItem-yyyyMMMM":"MMMM y","field-hour":"time","dateFormatItem-MMdd":"dd.MM","months-format-abbr":["jan.",
"feb.","mars","apr.","mai","juni","juli","aug.","sep.","okt.","nov.","des."],"dateFormatItem-yyQ":"Q yy","timeFormat-full":"'kl'. HH:mm:ss zzzz","field-day-relative+0":"i dag","field-day-relative+1":"i morgen","field-day-relative+2":"i overmorgen","field-day-relative+3":"i overovermorgen","months-standAlone-abbr":["jan.","feb.","mars","apr.","mai","juni","juli","aug.","sep.","okt.","nov.","des."],"quarters-format-abbr":["K1","K2","K3","K4"],"quarters-standAlone-wide":["1. kvartal","2. kvartal","3. kvartal",
"4. kvartal"],"dateFormatItem-M":"L","days-standAlone-wide":["sondag","mandag","tirsdag","onsdag","torsdag","fredag","lordag"],"dateFormatItem-yyMMM":"MMM yy","timeFormat-medium":"HH:mm:ss","dateFormatItem-Hm":"HH:mm","quarters-standAlone-abbr":["K1","K2","K3","K4"],"eraAbbr":["f.Kr.","e.Kr."],"field-minute":"minutt","field-dayperiod":"AM/PM","days-standAlone-abbr":["son.","man.","tir.","ons.","tor.","fre.","lor."],"dateFormatItem-d":"d.","dateFormatItem-ms":"mm.ss","field-day-relative+-1":"i gar",
"field-day-relative+-2":"i forgars","field-day-relative+-3":"i forforgars","dateFormatItem-MMMd":"d. MMM","dateFormatItem-MEd":"E d.M","field-day":"dag","days-format-wide":["sondag","mandag","tirsdag","onsdag","torsdag","fredag","lordag"],"field-zone":"sone","dateFormatItem-y":"y","months-standAlone-narrow":["J","F","M","A","M","J","J","A","S","O","N","D"],"dateFormatItem-yyMM":"MM.yy","dateFormatItem-hm":"h:mm a","days-format-abbr":["son.","man.","tir.","ons.","tor.","fre.","lor."],"eraNames":["f.Kr.",
"e.Kr."],"days-format-narrow":["S","M","T","O","T","F","L"],"field-month":"maned","days-standAlone-narrow":["S","M","T","O","T","F","L"],"dateFormatItem-MMM":"LLL","dayPeriods-format-wide-am":"AM","dateFormat-short":"dd.MM.yy","field-second":"sekund","dateFormatItem-yMMMEd":"EEE d. MMM y","field-week":"uke","dateFormat-medium":"d. MMM y","dateFormatItem-Hms":"HH:mm:ss","dateFormatItem-hms":"h:mm:ss a","quarters-standAlone-narrow":["1","2","3","4"],"dateTimeFormats-appendItem-Day-Of-Week":"{0} {1}",
"dateTimeFormat-medium":"{1} {0}","dayPeriods-format-abbr-am":"AM","dateTimeFormats-appendItem-Second":"{0} ({2}: {1})","dateTimeFormats-appendItem-Era":"{0} {1}","dateTimeFormats-appendItem-Week":"{0} ({2}: {1})","dateFormatItem-H":"HH","quarters-format-narrow":["1","2","3","4"],"dateFormatItem-h":"h a","dateTimeFormat-long":"{1} {0}","dayPeriods-format-narrow-am":"AM","dateTimeFormat-full":"{1} {0}","dateTimeFormats-appendItem-Day":"{0} ({2}: {1})","dateTimeFormats-appendItem-Year":"{0} {1}","dateTimeFormats-appendItem-Hour":"{0} ({2}: {1})",
"dayPeriods-format-abbr-pm":"PM","dateTimeFormats-appendItem-Quarter":"{0} ({2}: {1})","dateTimeFormats-appendItem-Month":"{0} ({2}: {1})","dateTimeFormats-appendItem-Minute":"{0} ({2}: {1})","dateTimeFormats-appendItem-Timezone":"{0} {1}","dayPeriods-format-narrow-pm":"PM","dateTimeFormat-short":"{1} {0}"};dojo.provide("dojo.nls.dojo_nl");dojo.provide("dijit.nls.common.nl");dijit.nls.common.nl={"buttonOk":"OK","buttonCancel":"Annuleren","buttonSave":"Opslaan","itemClose":"Sluiten"};dojo.provide("dojo.cldr.nls.gregorian.nl");
dojo.cldr.nls.gregorian.nl={"dateFormatItem-yM":"M-y","field-dayperiod":"AM/PM","dateFormatItem-yQ":"Q yyyy","dayPeriods-format-wide-pm":"PM","field-minute":"Minuut","eraNames":["Voor Christus","na Christus"],"dateFormatItem-MMMEd":"E d MMM","field-day-relative+-1":"gisteren","field-weekday":"Dag van de week","dateFormatItem-yQQQ":"QQQ y","field-day-relative+-2":"eergisteren","dateFormatItem-MMdd":"dd-MM","field-day-relative+-3":"eereergisteren","days-standAlone-wide":["zondag","maandag","dinsdag",
"woensdag","donderdag","vrijdag","zaterdag"],"dateFormatItem-MMM":"LLL","months-standAlone-narrow":["J","F","M","A","M","J","J","A","S","O","N","D"],"field-era":"Tijdperk","field-hour":"Uur","dayPeriods-format-wide-am":"AM","quarters-standAlone-abbr":["K1","K2","K3","K4"],"dateFormatItem-y":"y","timeFormat-full":"HH:mm:ss zzzz","months-standAlone-abbr":["jan.","feb.","mrt.","apr.","mei","jun.","jul.","aug.","sep.","okt.","nov.","dec."],"dateFormatItem-yMMM":"MMM y","field-day-relative+0":"vandaag",
"field-day-relative+1":"morgen","days-standAlone-narrow":["Z","M","D","W","D","V","Z"],"eraAbbr":["v. Chr.","n. Chr."],"field-day-relative+2":"overmorgen","field-day-relative+3":"overovermorgen","dateFormatItem-yyyyMMMM":"MMMM y","dateFormat-long":"d MMMM y","timeFormat-medium":"HH:mm:ss","field-zone":"Zone","dateFormatItem-Hm":"HH:mm","dateFormatItem-MMd":"d-MM","dateFormat-medium":"d MMM y","dateFormatItem-yyMM":"MM-yy","dateFormatItem-yyMMM":"MMM yy","dateFormatItem-yyQQQQ":"QQQQ yy","quarters-standAlone-wide":["1e kwartaal",
"2e kwartaal","3e kwartaal","4e kwartaal"],"dateFormatItem-ms":"mm:ss","field-year":"Jaar","field-week":"Week","months-standAlone-wide":["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],"dateFormatItem-MMMd":"d-MMM","dateFormatItem-yyQ":"Q yy","timeFormat-long":"HH:mm:ss z","months-format-abbr":["jan.","feb.","mrt.","apr.","mei","jun.","jul.","aug.","sep.","okt.","nov.","dec."],"timeFormat-short":"HH:mm","field-month":"Maand","dateFormatItem-MMMMd":"d MMMM",
"quarters-format-abbr":["K1","K2","K3","K4"],"days-format-abbr":["zo","ma","di","wo","do","vr","za"],"dateFormatItem-M":"L","days-format-narrow":["Z","M","D","W","D","V","Z"],"field-second":"Seconde","field-day":"Dag","dateFormatItem-MEd":"E d-M","months-format-narrow":["J","F","M","A","M","J","J","A","S","O","N","D"],"days-standAlone-abbr":["zo","ma","di","wo","do","vr","za"],"dateFormat-short":"dd-MM-yy","dateFormatItem-yMMMEd":"EEE d MMM y","dateFormat-full":"EEEE d MMMM y","dateFormatItem-Md":"d-M",
"dateFormatItem-yMEd":"EEE d-M-y","months-format-wide":["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],"dateFormatItem-d":"d","quarters-format-wide":["1e kwartaal","2e kwartaal","3e kwartaal","4e kwartaal"],"days-format-wide":["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],"eraNarrow":["v. Chr.","n. Chr."],"quarters-standAlone-narrow":["1","2","3","4"],"dateTimeFormats-appendItem-Day-Of-Week":"{0} {1}","dateTimeFormat-medium":"{1} {0}",
"dateFormatItem-EEEd":"d EEE","dayPeriods-format-abbr-am":"AM","dateTimeFormats-appendItem-Second":"{0} ({2}: {1})","dateTimeFormats-appendItem-Era":"{0} {1}","dateTimeFormats-appendItem-Week":"{0} ({2}: {1})","dateFormatItem-H":"HH","quarters-format-narrow":["1","2","3","4"],"dateFormatItem-h":"h a","dateTimeFormat-long":"{1} {0}","dayPeriods-format-narrow-am":"AM","dateTimeFormat-full":"{1} {0}","dateTimeFormats-appendItem-Day":"{0} ({2}: {1})","dateFormatItem-hm":"h:mm a","dateTimeFormats-appendItem-Year":"{0} {1}",
"dateTimeFormats-appendItem-Hour":"{0} ({2}: {1})","dayPeriods-format-abbr-pm":"PM","dateTimeFormats-appendItem-Quarter":"{0} ({2}: {1})","dateTimeFormats-appendItem-Month":"{0} ({2}: {1})","dateTimeFormats-appendItem-Minute":"{0} ({2}: {1})","dateTimeFormats-appendItem-Timezone":"{0} {1}","dayPeriods-format-narrow-pm":"PM","dateTimeFormat-short":"{1} {0}","dateFormatItem-Hms":"HH:mm:ss","dateFormatItem-hms":"h:mm:ss a"};dojo.provide("dojo.nls.dojo_nl-nl");dojo.provide("dijit.nls.common.nl_nl");dijit.nls.common.nl_nl=
{"buttonOk":"OK","buttonCancel":"Annuleren","buttonSave":"Opslaan","itemClose":"Sluiten"};dojo.provide("dojo.cldr.nls.gregorian.nl_nl");dojo.cldr.nls.gregorian.nl_nl={"dateFormatItem-yM":"M-y","field-dayperiod":"AM/PM","dateFormatItem-yQ":"Q yyyy","dayPeriods-format-wide-pm":"PM","field-minute":"Minuut","eraNames":["Voor Christus","na Christus"],"dateFormatItem-MMMEd":"E d MMM","field-day-relative+-1":"gisteren","field-weekday":"Dag van de week","dateFormatItem-yQQQ":"QQQ y","field-day-relative+-2":"eergisteren",
"dateFormatItem-MMdd":"dd-MM","field-day-relative+-3":"eereergisteren","days-standAlone-wide":["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],"dateFormatItem-MMM":"LLL","months-standAlone-narrow":["J","F","M","A","M","J","J","A","S","O","N","D"],"field-era":"Tijdperk","field-hour":"Uur","dayPeriods-format-wide-am":"AM","quarters-standAlone-abbr":["K1","K2","K3","K4"],"dateFormatItem-y":"y","timeFormat-full":"HH:mm:ss zzzz","months-standAlone-abbr":["jan.","feb.","mrt.",
"apr.","mei","jun.","jul.","aug.","sep.","okt.","nov.","dec."],"dateFormatItem-yMMM":"MMM y","field-day-relative+0":"vandaag","field-day-relative+1":"morgen","days-standAlone-narrow":["Z","M","D","W","D","V","Z"],"eraAbbr":["v. Chr.","n. Chr."],"field-day-relative+2":"overmorgen","field-day-relative+3":"overovermorgen","dateFormatItem-yyyyMMMM":"MMMM y","dateFormat-long":"d MMMM y","timeFormat-medium":"HH:mm:ss","field-zone":"Zone","dateFormatItem-Hm":"HH:mm","dateFormatItem-MMd":"d-MM","dateFormat-medium":"d MMM y",
"dateFormatItem-yyMM":"MM-yy","dateFormatItem-yyMMM":"MMM yy","dateFormatItem-yyQQQQ":"QQQQ yy","quarters-standAlone-wide":["1e kwartaal","2e kwartaal","3e kwartaal","4e kwartaal"],"dateFormatItem-ms":"mm:ss","field-year":"Jaar","field-week":"Week","months-standAlone-wide":["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],"dateFormatItem-MMMd":"d-MMM","dateFormatItem-yyQ":"Q yy","timeFormat-long":"HH:mm:ss z","months-format-abbr":["jan.",
"feb.","mrt.","apr.","mei","jun.","jul.","aug.","sep.","okt.","nov.","dec."],"timeFormat-short":"HH:mm","field-month":"Maand","dateFormatItem-MMMMd":"d MMMM","quarters-format-abbr":["K1","K2","K3","K4"],"days-format-abbr":["zo","ma","di","wo","do","vr","za"],"dateFormatItem-M":"L","days-format-narrow":["Z","M","D","W","D","V","Z"],"field-second":"Seconde","field-day":"Dag","dateFormatItem-MEd":"E d-M","months-format-narrow":["J","F","M","A","M","J","J","A","S","O","N","D"],"days-standAlone-abbr":["zo",
"ma","di","wo","do","vr","za"],"dateFormat-short":"dd-MM-yy","dateFormatItem-yMMMEd":"EEE d MMM y","dateFormat-full":"EEEE d MMMM y","dateFormatItem-Md":"d-M","dateFormatItem-yMEd":"EEE d-M-y","months-format-wide":["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],"dateFormatItem-d":"d","quarters-format-wide":["1e kwartaal","2e kwartaal","3e kwartaal","4e kwartaal"],"days-format-wide":["zondag","maandag","dinsdag","woensdag","donderdag",
"vrijdag","zaterdag"],"eraNarrow":["v. Chr.","n. Chr."],"quarters-standAlone-narrow":["1","2","3","4"],"dateTimeFormats-appendItem-Day-Of-Week":"{0} {1}","dateTimeFormat-medium":"{1} {0}","dateFormatItem-EEEd":"d EEE","dayPeriods-format-abbr-am":"AM","dateTimeFormats-appendItem-Second":"{0} ({2}: {1})","dateTimeFormats-appendItem-Era":"{0} {1}","dateTimeFormats-appendItem-Week":"{0} ({2}: {1})","dateFormatItem-H":"HH","quarters-format-narrow":["1","2","3","4"],"dateFormatItem-h":"h a","dateTimeFormat-long":"{1} {0}",
"dayPeriods-format-narrow-am":"AM","dateTimeFormat-full":"{1} {0}","dateTimeFormats-appendItem-Day":"{0} ({2}: {1})","dateFormatItem-hm":"h:mm a","dateTimeFormats-appendItem-Year":"{0} {1}","dateTimeFormats-appendItem-Hour":"{0} ({2}: {1})","dayPeriods-format-abbr-pm":"PM","dateTimeFormats-appendItem-Quarter":"{0} ({2}: {1})","dateTimeFormats-appendItem-Month":"{0} ({2}: {1})","dateTimeFormats-appendItem-Minute":"{0} ({2}: {1})","dateTimeFormats-appendItem-Timezone":"{0} {1}","dayPeriods-format-narrow-pm":"PM",
"dateTimeFormat-short":"{1} {0}","dateFormatItem-Hms":"HH:mm:ss","dateFormatItem-hms":"h:mm:ss a"};dojo.provide("dojo.nls.dojo_pl");dojo.provide("dijit.nls.common.pl");dijit.nls.common.pl={"buttonOk":"OK","buttonCancel":"Anuluj","buttonSave":"Zapisz","itemClose":"Zamknij"};dojo.provide("dojo.cldr.nls.gregorian.pl");dojo.cldr.nls.gregorian.pl={"months-format-narrow":["s","l","m","k","m","c","l","s","w","p","l","g"],"field-weekday":"Dzien tygodnia","dateFormatItem-yQQQ":"y QQQ","dateFormatItem-yMEd":"EEE, d-M-y",
"dateFormatItem-MMMEd":"d MMM E","eraNarrow":["p.n.e.","n.e."],"dayPeriods-format-wide-earlyMorning":"nad ranem","dayPeriods-format-wide-morning":"rano","dateFormat-long":"d MMMM y","months-format-wide":["stycznia","lutego","marca","kwietnia","maja","czerwca","lipca","sierpnia","wrzesnia","pazdziernika","listopada","grudnia"],"dayPeriods-format-wide-evening":"wieczorem","dayPeriods-format-wide-pm":"PM","dateFormat-full":"EEEE, d MMMM y","dateFormatItem-Md":"d-M","dayPeriods-format-wide-noon":"w poludnie",
"field-era":"Era","dateFormatItem-yM":"M-y","months-standAlone-wide":["styczen","luty","marzec","kwiecien","maj","czerwiec","lipiec","sierpien","wrzesien","pazdziernik","listopad","grudzien"],"timeFormat-short":"HH:mm","quarters-format-wide":["I kwartal","II kwartal","III kwartal","IV kwartal"],"timeFormat-long":"HH:mm:ss z","field-year":"Rok","dateFormatItem-yQ":"yyyy Q","dateFormatItem-yyyyMMMM":"LLLL y","field-hour":"Godzina","dateFormatItem-MMdd":"dd-MM","months-format-abbr":["sty","lut","mar",
"kwi","maj","cze","lip","sie","wrz","paz","lis","gru"],"dateFormatItem-yyQ":"Q yy","timeFormat-full":"HH:mm:ss zzzz","field-day-relative+0":"Dzisiaj","field-day-relative+1":"Jutro","field-day-relative+2":"Pojutrze","field-day-relative+3":"Za trzy dni","months-standAlone-abbr":["sty","lut","mar","kwi","maj","cze","lip","sie","wrz","paz","lis","gru"],"quarters-format-abbr":["K1","K2","K3","K4"],"quarters-standAlone-wide":["I kwartal","II kwartal","III kwartal","IV kwartal"],"dateFormatItem-M":"L","days-standAlone-wide":["niedziela",
"poniedzialek","wtorek","sroda","czwartek","piatek","sobota"],"dateFormatItem-MMMMd":"d MMMM","dateFormatItem-yyMMM":"MMM yy","timeFormat-medium":"HH:mm:ss","dateFormatItem-Hm":"HH:mm","quarters-standAlone-abbr":["1 kw.","2 kw.","3 kw.","4 kw."],"eraAbbr":["p.n.e.","n.e."],"field-minute":"Minuta","field-dayperiod":"Dayperiod","days-standAlone-abbr":["niedz.","pon.","wt.","sr.","czw.","pt.","sob."],"dayPeriods-format-wide-night":"w nocy","dateFormatItem-d":"d","dateFormatItem-ms":"mm:ss","field-day-relative+-1":"Wczoraj",
"dateFormatItem-h":"hh a","field-day-relative+-2":"Przedwczoraj","field-day-relative+-3":"Trzy dni temu","dateFormatItem-MMMd":"d MMM","dateFormatItem-MEd":"E, d-M","dayPeriods-format-wide-lateMorning":"przed poludniem","dateFormatItem-yMMMM":"LLLL y","field-day":"Dzien","days-format-wide":["niedziela","poniedzialek","wtorek","sroda","czwartek","piatek","sobota"],"field-zone":"Strefa","dateFormatItem-yyyyMM":"yyyy-MM","dateFormatItem-y":"y","months-standAlone-narrow":["s","l","m","k","m","c","l",
"s","w","p","l","g"],"dateFormatItem-yyMM":"MM/yy","dateFormatItem-hm":"hh:mm a","days-format-abbr":["niedz.","pon.","wt.","sr.","czw.","pt.","sob."],"eraNames":["p.n.e.","n.e."],"days-format-narrow":["N","P","W","S","C","P","S"],"field-month":"Miesiac","days-standAlone-narrow":["N","P","W","S","C","P","S"],"dateFormatItem-MMM":"LLL","dayPeriods-format-wide-am":"AM","dateFormat-short":"dd-MM-yyyy","dayPeriods-format-wide-afternoon":"po poludniu","field-second":"Sekunda","dateFormatItem-yMMMEd":"EEE, d MMM y",
"field-week":"Tydzien","dateFormat-medium":"dd-MM-yyyy","dateFormatItem-Hms":"HH:mm:ss","dateFormatItem-hms":"hh:mm:ss a","quarters-standAlone-narrow":["1","2","3","4"],"dateTimeFormats-appendItem-Day-Of-Week":"{0} {1}","dateTimeFormat-medium":"{1} {0}","dateFormatItem-EEEd":"d EEE","dayPeriods-format-abbr-am":"AM","dateTimeFormats-appendItem-Second":"{0} ({2}: {1})","dateFormatItem-yMMM":"y MMM","dateTimeFormats-appendItem-Era":"{0} {1}","dateTimeFormats-appendItem-Week":"{0} ({2}: {1})","dateFormatItem-H":"HH",
"quarters-format-narrow":["1","2","3","4"],"dateTimeFormat-long":"{1} {0}","dayPeriods-format-narrow-am":"AM","dateTimeFormat-full":"{1} {0}","dateTimeFormats-appendItem-Day":"{0} ({2}: {1})","dateTimeFormats-appendItem-Year":"{0} {1}","dateTimeFormats-appendItem-Hour":"{0} ({2}: {1})","dayPeriods-format-abbr-pm":"PM","dateTimeFormats-appendItem-Quarter":"{0} ({2}: {1})","dateTimeFormats-appendItem-Month":"{0} ({2}: {1})","dateTimeFormats-appendItem-Minute":"{0} ({2}: {1})","dateTimeFormats-appendItem-Timezone":"{0} {1}",
"dayPeriods-format-narrow-pm":"PM","dateTimeFormat-short":"{1} {0}"};dojo.provide("dojo.nls.dojo_pt");dojo.provide("dijit.nls.common.pt");dijit.nls.common.pt={"buttonOk":"OK","buttonCancel":"Cancelar","buttonSave":"Salvar","itemClose":"Fechar"};dojo.provide("dojo.cldr.nls.gregorian.pt");dojo.cldr.nls.gregorian.pt={"months-format-narrow":["J","F","M","A","M","J","J","A","S","O","N","D"],"field-weekday":"Dia da semana","dateFormatItem-yQQQ":"y QQQ","dateFormatItem-yMEd":"EEE, dd/MM/yyyy","dateFormatItem-MMMEd":"EEE, d 'de' MMM",
"eraNarrow":["a.C.","d.C."],"dayPeriods-format-wide-morning":"manha","dateFormat-long":"d 'de' MMMM 'de' y","months-format-wide":["janeiro","fevereiro","marco","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"],"dateFormatItem-EEEd":"EEE, d","dateFormat-full":"EEEE, d 'de' MMMM 'de' y","dateFormatItem-Md":"d/M","dayPeriods-format-wide-noon":"meio-dia","field-era":"Era","dateFormatItem-yM":"MM/yyyy","months-standAlone-wide":["janeiro","fevereiro","marco","abril","maio",
"junho","julho","agosto","setembro","outubro","novembro","dezembro"],"timeFormat-short":"HH:mm","quarters-format-wide":["1? trimestre","2? trimestre","3? trimestre","4? trimestre"],"timeFormat-long":"HH'h'mm'min'ss's' z","field-year":"Ano","dateFormatItem-yMMM":"MMM 'de' y","dateFormatItem-yQ":"yyyy Q","field-hour":"Hora","dateFormatItem-MMdd":"dd/MM","months-format-abbr":["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],"dateFormatItem-yyQ":"Q yy","timeFormat-full":"HH'h'mm'min'ss's' zzzz",
"field-day-relative+0":"Hoje","field-day-relative+1":"Amanha","field-day-relative+2":"Depois de amanha","field-day-relative+3":"Daqui a tres dias","months-standAlone-abbr":["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],"quarters-format-abbr":["T1","T2","T3","T4"],"quarters-standAlone-wide":["1? trimestre","2? trimestre","3? trimestre","4? trimestre"],"dateFormatItem-HHmmss":"HH'h'mm'min'ss's'","dateFormatItem-M":"L","days-standAlone-wide":["domingo","segunda-feira","terca-feira",
"quarta-feira","quinta-feira","sexta-feira","sabado"],"dateFormatItem-yyyyMMM":"MMM 'de' y","dateFormatItem-yyMMMEEEd":"EEE, d 'de' MMM 'de' yy","dateFormatItem-yyMMM":"MMM 'de' yy","timeFormat-medium":"HH:mm:ss","dateFormatItem-Hm":"HH'h'mm","quarters-standAlone-abbr":["T1","T2","T3","T4"],"eraAbbr":["a.C.","d.C."],"field-minute":"Minuto","field-dayperiod":"Periodo do dia","days-standAlone-abbr":["dom","seg","ter","qua","qui","sex","sab"],"dayPeriods-format-wide-night":"noite","dateFormatItem-yyMMMd":"d 'de' MMM 'de' yy",
"dateFormatItem-d":"d","dateFormatItem-ms":"mm'min'ss's'","field-day-relative+-1":"Ontem","field-day-relative+-2":"Anteontem","field-day-relative+-3":"Ha tres dias","dateFormatItem-MMMd":"d 'de' MMM","dateFormatItem-MEd":"EEE, dd/MM","field-day":"Dia","days-format-wide":["domingo","segunda-feira","terca-feira","quarta-feira","quinta-feira","sexta-feira","sabado"],"field-zone":"Fuso","dateFormatItem-yyyyMM":"MM/yyyy","dateFormatItem-y":"y","months-standAlone-narrow":["J","F","M","A","M","J","J","A",
"S","O","N","D"],"dateFormatItem-yyMM":"MM/yy","days-format-abbr":["dom","seg","ter","qua","qui","sex","sab"],"eraNames":["Antes de Cristo","Ano do Senhor"],"days-format-narrow":["D","S","T","Q","Q","S","S"],"field-month":"Mes","days-standAlone-narrow":["D","S","T","Q","Q","S","S"],"dateFormatItem-MMM":"LLL","dateFormatItem-HHmm":"HH'h'mm","dateFormat-short":"dd/MM/yy","dayPeriods-format-wide-afternoon":"tarde","field-second":"Segundo","dateFormatItem-yMMMEd":"EEE, d 'de' MMM 'de' y","field-week":"Semana",
"dateFormat-medium":"dd/MM/yyyy","quarters-standAlone-narrow":["1","2","3","4"],"dateTimeFormats-appendItem-Day-Of-Week":"{0} {1}","dateTimeFormat-medium":"{1} {0}","dayPeriods-format-wide-pm":"PM","dayPeriods-format-abbr-am":"AM","dateTimeFormats-appendItem-Second":"{0} ({2}: {1})","dateTimeFormats-appendItem-Era":"{0} {1}","dateTimeFormats-appendItem-Week":"{0} ({2}: {1})","dateFormatItem-H":"HH","quarters-format-narrow":["1","2","3","4"],"dateFormatItem-h":"h a","dateTimeFormat-long":"{1} {0}",
"dayPeriods-format-narrow-am":"AM","dateTimeFormat-full":"{1} {0}","dateTimeFormats-appendItem-Day":"{0} ({2}: {1})","dateFormatItem-hm":"h:mm a","dateTimeFormats-appendItem-Year":"{0} {1}","dateTimeFormats-appendItem-Hour":"{0} ({2}: {1})","dayPeriods-format-abbr-pm":"PM","dateTimeFormats-appendItem-Quarter":"{0} ({2}: {1})","dayPeriods-format-wide-am":"AM","dateTimeFormats-appendItem-Month":"{0} ({2}: {1})","dateTimeFormats-appendItem-Minute":"{0} ({2}: {1})","dateTimeFormats-appendItem-Timezone":"{0} {1}",
"dayPeriods-format-narrow-pm":"PM","dateTimeFormat-short":"{1} {0}","dateFormatItem-Hms":"HH:mm:ss","dateFormatItem-hms":"h:mm:ss a"};dojo.provide("dojo.nls.dojo_pt-br");dojo.provide("dijit.nls.common.pt br");dijit.nls.common.pt_br={"buttonOk":"OK","buttonCancel":"Cancelar","buttonSave":"Salvar","itemClose":"Fechar"};dojo.provide("dojo.cldr.nls.gregorian.pt_br");dojo.cldr.nls.gregorian.pt_br={"months-format-narrow":["J","F","M","A","M","J","J","A","S","O","N","D"],"field-weekday":"Dia da semana",
"dateFormatItem-yQQQ":"y QQQ","dateFormatItem-yMEd":"EEE, dd/MM/yyyy","dateFormatItem-MMMEd":"EEE, d 'de' MMM","eraNarrow":["a.C.","d.C."],"dayPeriods-format-wide-morning":"manha","dateFormat-long":"d 'de' MMMM 'de' y","months-format-wide":["janeiro","fevereiro","marco","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"],"dateFormatItem-EEEd":"EEE, d","dateFormat-full":"EEEE, d 'de' MMMM 'de' y","dateFormatItem-Md":"d/M","dayPeriods-format-wide-noon":"meio-dia","field-era":"Era",
"dateFormatItem-yM":"MM/yyyy","months-standAlone-wide":["janeiro","fevereiro","marco","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"],"timeFormat-short":"HH:mm","quarters-format-wide":["1? trimestre","2? trimestre","3? trimestre","4? trimestre"],"timeFormat-long":"HH'h'mm'min'ss's' z","field-year":"Ano","dateFormatItem-yMMM":"MMM 'de' y","dateFormatItem-yQ":"yyyy Q","field-hour":"Hora","dateFormatItem-MMdd":"dd/MM","months-format-abbr":["jan","fev","mar","abr",
"mai","jun","jul","ago","set","out","nov","dez"],"dateFormatItem-yyQ":"Q yy","timeFormat-full":"HH'h'mm'min'ss's' zzzz","field-day-relative+0":"Hoje","field-day-relative+1":"Amanha","field-day-relative+2":"Depois de amanha","field-day-relative+3":"Daqui a tres dias","months-standAlone-abbr":["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],"quarters-format-abbr":["T1","T2","T3","T4"],"quarters-standAlone-wide":["1? trimestre","2? trimestre","3? trimestre","4? trimestre"],"dateFormatItem-HHmmss":"HH'h'mm'min'ss's'",
"dateFormatItem-M":"L","days-standAlone-wide":["domingo","segunda-feira","terca-feira","quarta-feira","quinta-feira","sexta-feira","sabado"],"dateFormatItem-yyyyMMM":"MMM 'de' y","dateFormatItem-yyMMMEEEd":"EEE, d 'de' MMM 'de' yy","dateFormatItem-yyMMM":"MMM 'de' yy","timeFormat-medium":"HH:mm:ss","dateFormatItem-Hm":"HH'h'mm","quarters-standAlone-abbr":["T1","T2","T3","T4"],"eraAbbr":["a.C.","d.C."],"field-minute":"Minuto","field-dayperiod":"Periodo do dia","days-standAlone-abbr":["dom","seg","ter",
"qua","qui","sex","sab"],"dayPeriods-format-wide-night":"noite","dateFormatItem-yyMMMd":"d 'de' MMM 'de' yy","dateFormatItem-d":"d","dateFormatItem-ms":"mm'min'ss's'","field-day-relative+-1":"Ontem","field-day-relative+-2":"Anteontem","field-day-relative+-3":"Ha tres dias","dateFormatItem-MMMd":"d 'de' MMM","dateFormatItem-MEd":"EEE, dd/MM","field-day":"Dia","days-format-wide":["domingo","segunda-feira","terca-feira","quarta-feira","quinta-feira","sexta-feira","sabado"],"field-zone":"Fuso","dateFormatItem-yyyyMM":"MM/yyyy",
"dateFormatItem-y":"y","months-standAlone-narrow":["J","F","M","A","M","J","J","A","S","O","N","D"],"dateFormatItem-yyMM":"MM/yy","days-format-abbr":["dom","seg","ter","qua","qui","sex","sab"],"eraNames":["Antes de Cristo","Ano do Senhor"],"days-format-narrow":["D","S","T","Q","Q","S","S"],"field-month":"Mes","days-standAlone-narrow":["D","S","T","Q","Q","S","S"],"dateFormatItem-MMM":"LLL","dateFormatItem-HHmm":"HH'h'mm","dateFormat-short":"dd/MM/yy","dayPeriods-format-wide-afternoon":"tarde","field-second":"Segundo",
"dateFormatItem-yMMMEd":"EEE, d 'de' MMM 'de' y","field-week":"Semana","dateFormat-medium":"dd/MM/yyyy","quarters-standAlone-narrow":["1","2","3","4"],"dateTimeFormats-appendItem-Day-Of-Week":"{0} {1}","dateTimeFormat-medium":"{1} {0}","dayPeriods-format-wide-pm":"PM","dayPeriods-format-abbr-am":"AM","dateTimeFormats-appendItem-Second":"{0} ({2}: {1})","dateTimeFormats-appendItem-Era":"{0} {1}","dateTimeFormats-appendItem-Week":"{0} ({2}: {1})","dateFormatItem-H":"HH","quarters-format-narrow":["1",
"2","3","4"],"dateFormatItem-h":"h a","dateTimeFormat-long":"{1} {0}","dayPeriods-format-narrow-am":"AM","dateTimeFormat-full":"{1} {0}","dateTimeFormats-appendItem-Day":"{0} ({2}: {1})","dateFormatItem-hm":"h:mm a","dateTimeFormats-appendItem-Year":"{0} {1}","dateTimeFormats-appendItem-Hour":"{0} ({2}: {1})","dayPeriods-format-abbr-pm":"PM","dateTimeFormats-appendItem-Quarter":"{0} ({2}: {1})","dayPeriods-format-wide-am":"AM","dateTimeFormats-appendItem-Month":"{0} ({2}: {1})","dateTimeFormats-appendItem-Minute":"{0} ({2}: {1})",
"dateTimeFormats-appendItem-Timezone":"{0} {1}","dayPeriods-format-narrow-pm":"PM","dateTimeFormat-short":"{1} {0}","dateFormatItem-Hms":"HH:mm:ss","dateFormatItem-hms":"h:mm:ss a"};dojo.provide("dojo.nls.dojo_pt-pt");dojo.provide("dijit.nls.common.pt_pt");dijit.nls.common.pt_pt={"buttonOk":"OK","buttonCancel":"Cancelar","buttonSave":"Guardar","itemClose":"Fechar"};dojo.provide("dojo.cldr.nls.gregorian.pt_pt");dojo.cldr.nls.gregorian.pt_pt={"quarters-standAlone-wide":["1.? trimestre","2.? trimestre",
"3.? trimestre","4.? trimestre"],"quarters-format-abbr":["1.? trimestre","2.? trimestre","3.? trimestre","4.? trimestre"],"dayPeriods-standAlone-wide-am":"a.m.","dateFormat-medium":"d 'de' MMM 'de' yyyy","quarters-standAlone-abbr":["1.? trimestre","2.? trimestre","3.? trimestre","4.? trimestre"],"dayPeriods-standAlone-abbr-pm":"p.m.","dateFormatItem-hm":"h:mm","months-standAlone-wide":["Janeiro","Fevereiro","Marco","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],
"dayPeriods-standAlone-abbr-am":"a.m.","dayPeriods-format-wide-pm":"Depois do meio-dia","months-standAlone-abbr":["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],"dateFormatItem-yQQQ":"QQQ 'de' y","dayPeriods-format-wide-am":"Antes do meio-dia","dayPeriods-format-abbr-pm":"p.m.","dateFormatItem-yyQ":"QQQ 'de' yy","dayPeriods-format-abbr-am":"a.m.","months-format-wide":["Janeiro","Fevereiro","Marco","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],
"days-standAlone-wide":["Domingo","Segunda-feira","Terca-feira","Quarta-feira","Quinta-feira","Sexta-feira","Sabado"],"months-format-abbr":["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],"days-standAlone-abbr":["Domingo","Segunda-feira","Terca-feira","Quarta-feira","Quinta-feira","Sexta-feira","Sabado"],"days-format-wide":["Domingo","Segunda-feira","Terca-feira","Quarta-feira","Quinta-feira","Sexta-feira","Sabado"],"dateFormatItem-yQ":"QQQ 'de' yyyy","dateFormatItem-hms":"h:mm:ss",
"quarters-format-wide":["1.? trimestre","2.? trimestre","3.? trimestre","4.? trimestre"],"dayPeriods-standAlone-wide-pm":"p.m.","days-format-abbr":["Domingo","Segunda-feira","Terca-feira","Quarta-feira","Quinta-feira","Sexta-feira","Sabado"],"months-format-narrow":["J","F","M","A","M","J","J","A","S","O","N","D"],"field-weekday":"Dia da semana","dateFormatItem-yMEd":"EEE, dd/MM/yyyy","dateFormatItem-MMMEd":"EEE, d 'de' MMM","eraNarrow":["a.C.","d.C."],"dayPeriods-format-wide-morning":"manha","dateFormat-long":"d 'de' MMMM 'de' y",
"dateFormatItem-EEEd":"EEE, d","dateFormat-full":"EEEE, d 'de' MMMM 'de' y","dateFormatItem-Md":"d/M","dayPeriods-format-wide-noon":"meio-dia","field-era":"Era","dateFormatItem-yM":"MM/yyyy","timeFormat-short":"HH:mm","timeFormat-long":"HH'h'mm'min'ss's' z","field-year":"Ano","dateFormatItem-yMMM":"MMM 'de' y","field-hour":"Hora","dateFormatItem-MMdd":"dd/MM","timeFormat-full":"HH'h'mm'min'ss's' zzzz","field-day-relative+0":"Hoje","field-day-relative+1":"Amanha","field-day-relative+2":"Depois de amanha",
"field-day-relative+3":"Daqui a tres dias","dateFormatItem-HHmmss":"HH'h'mm'min'ss's'","dateFormatItem-M":"L","dateFormatItem-yyyyMMM":"MMM 'de' y","dateFormatItem-yyMMMEEEd":"EEE, d 'de' MMM 'de' yy","dateFormatItem-yyMMM":"MMM 'de' yy","timeFormat-medium":"HH:mm:ss","dateFormatItem-Hm":"HH'h'mm","eraAbbr":["a.C.","d.C."],"field-minute":"Minuto","field-dayperiod":"Periodo do dia","dayPeriods-format-wide-night":"noite","dateFormatItem-yyMMMd":"d 'de' MMM 'de' yy","dateFormatItem-d":"d","dateFormatItem-ms":"mm'min'ss's'",
"field-day-relative+-1":"Ontem","field-day-relative+-2":"Anteontem","field-day-relative+-3":"Ha tres dias","dateFormatItem-MMMd":"d 'de' MMM","dateFormatItem-MEd":"EEE, dd/MM","field-day":"Dia","field-zone":"Fuso","dateFormatItem-yyyyMM":"MM/yyyy","dateFormatItem-y":"y","months-standAlone-narrow":["J","F","M","A","M","J","J","A","S","O","N","D"],"dateFormatItem-yyMM":"MM/yy","eraNames":["Antes de Cristo","Ano do Senhor"],"days-format-narrow":["D","S","T","Q","Q","S","S"],"field-month":"Mes","days-standAlone-narrow":["D",
"S","T","Q","Q","S","S"],"dateFormatItem-MMM":"LLL","dateFormatItem-HHmm":"HH'h'mm","dateFormat-short":"dd/MM/yy","dayPeriods-format-wide-afternoon":"tarde","field-second":"Segundo","dateFormatItem-yMMMEd":"EEE, d 'de' MMM 'de' y","field-week":"Semana","quarters-standAlone-narrow":["1","2","3","4"],"dateTimeFormats-appendItem-Day-Of-Week":"{0} {1}","dateTimeFormat-medium":"{1} {0}","dateTimeFormats-appendItem-Second":"{0} ({2}: {1})","dateTimeFormats-appendItem-Era":"{0} {1}","dateTimeFormats-appendItem-Week":"{0} ({2}: {1})",
"dateFormatItem-H":"HH","quarters-format-narrow":["1","2","3","4"],"dateFormatItem-h":"h a","dateTimeFormat-long":"{1} {0}","dayPeriods-format-narrow-am":"AM","dateTimeFormat-full":"{1} {0}","dateTimeFormats-appendItem-Day":"{0} ({2}: {1})","dateTimeFormats-appendItem-Year":"{0} {1}","dateTimeFormats-appendItem-Hour":"{0} ({2}: {1})","dateTimeFormats-appendItem-Quarter":"{0} ({2}: {1})","dateTimeFormats-appendItem-Month":"{0} ({2}: {1})","dateTimeFormats-appendItem-Minute":"{0} ({2}: {1})","dateTimeFormats-appendItem-Timezone":"{0} {1}",
"dayPeriods-format-narrow-pm":"PM","dateTimeFormat-short":"{1} {0}","dateFormatItem-Hms":"HH:mm:ss"};dojo.provide("dojo.nls.dojo_ru");dojo.provide("dijit.nls.common.ru");dijit.nls.common.ru={"buttonOk":"\u0414\u0430","buttonCancel":"\u041e\u0442\u043c\u0435\u043d\u0430","buttonSave":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c","itemClose":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"};dojo.provide("dojo.cldr.nls.gregorian.ru");dojo.cldr.nls.gregorian.ru={"dateFormatItem-yM":"M.y","field-dayperiod":"AM/PM",
"field-minute":"??????","eraNames":["?? ?.?.","?.?."],"dateFormatItem-MMMEd":"E d MMM","field-day-relative+-1":"?????","field-weekday":"???? ??????","dateFormatItem-yQQQ":"y QQQ","field-day-relative+-2":"?????????","dateFormatItem-MMdd":"dd.MM","days-standAlone-wide":["???????????","???????????","???????","?????","???????","???????","???????"],"dateFormatItem-MMM":"LLL","months-standAlone-narrow":["?","?","?","?","?","?","?","?","?","?","?","?"],"field-era":"???","field-hour":"???","quarters-standAlone-abbr":["1-? ??.",
"2-? ??.","3-? ??.","4-? ??."],"dateFormatItem-yyMMMEEEd":"EEE, d MMM yy","dateFormatItem-y":"y","timeFormat-full":"H:mm:ss zzzz","dateFormatItem-yyyy":"y","months-standAlone-abbr":["???.","????.","????","???.","???","????","????","???.","????.","???.","????.","???."],"dateFormatItem-Ed":"E d","dateFormatItem-yMMM":"LLL y","field-day-relative+0":"???????","dateFormatItem-yyyyLLLL":"LLLL y","field-day-relative+1":"??????","days-standAlone-narrow":["?","?","?","?","?","?","?"],"eraAbbr":["?? ?.?.",
"?.?."],"field-day-relative+2":"???????????","dateFormatItem-yyyyMM":"MM.yyyy","dateFormatItem-yyyyMMMM":"LLLL y","dateFormat-long":"d MMMM y?'?'.","timeFormat-medium":"H:mm:ss","field-zone":"??????? ????","dateFormatItem-Hm":"H:mm","dateFormat-medium":"dd.MM.yyyy","dateFormatItem-yyMM":"MM.yy","dateFormatItem-Hms":"H:mm:ss","dateFormatItem-yyMMM":"LLL yy","quarters-standAlone-wide":["1-? ???????","2-? ???????","3-? ???????","4-? ???????"],"dateFormatItem-ms":"mm:ss","dateFormatItem-yyyyQQQQ":"QQQQ y?'?'.",
"field-year":"???","months-standAlone-wide":["??????","???????","????","??????","???","????","????","??????","????????","???????","??????","???????"],"field-week":"??????","dateFormatItem-MMMd":"d MMM","dateFormatItem-yyQ":"Q yy","timeFormat-long":"H:mm:ss z","months-format-abbr":["???.","????.","?????","???.","???","????","????","???.","????.","???.","????.","???."],"timeFormat-short":"H:mm","dateFormatItem-H":"H","field-month":"?????","quarters-format-abbr":["1-? ??.","2-? ??.","3-? ??.","4-? ??."],
"days-format-abbr":["??","??","??","??","??","??","??"],"dateFormatItem-M":"L","days-format-narrow":["?","?","?","?","?","?","?"],"field-second":"???????","field-day":"????","dateFormatItem-MEd":"E, d.M","months-format-narrow":["?","?","?","?","?","?","?","?","?","?","?","?"],"days-standAlone-abbr":["??","??","??","??","??","??","??"],"dateFormat-short":"dd.MM.yy","dateFormatItem-yMMMEd":"E, d MMM y","dateFormat-full":"EEEE, d MMMM y?'?'.","dateFormatItem-Md":"d.M","dateFormatItem-yMEd":"EEE, d.M.y",
"months-format-wide":["??????","???????","?????","??????","???","????","????","???????","????????","???????","??????","???????"],"dateFormatItem-d":"d","quarters-format-wide":["1-? ???????","2-? ???????","3-? ???????","4-? ???????"],"days-format-wide":["???????????","???????????","???????","?????","???????","???????","???????"],"eraNarrow":["?? ?.?.","?.?."],"quarters-standAlone-narrow":["1","2","3","4"],"dateTimeFormats-appendItem-Day-Of-Week":"{0} {1}","dateTimeFormat-medium":"{1} {0}","dateFormatItem-EEEd":"d EEE",
"dayPeriods-format-wide-pm":"PM","dayPeriods-format-abbr-am":"AM","dateTimeFormats-appendItem-Second":"{0} ({2}: {1})","dateFormatItem-yQ":"y Q","dateTimeFormats-appendItem-Era":"{0} {1}","dateTimeFormats-appendItem-Week":"{0} ({2}: {1})","quarters-format-narrow":["1","2","3","4"],"dateFormatItem-h":"h a","dateTimeFormat-long":"{1} {0}","dayPeriods-format-narrow-am":"AM","dateTimeFormat-full":"{1} {0}","dateTimeFormats-appendItem-Day":"{0} ({2}: {1})","dateFormatItem-hm":"h:mm a","dateTimeFormats-appendItem-Year":"{0} {1}",
"dateTimeFormats-appendItem-Hour":"{0} ({2}: {1})","dayPeriods-format-abbr-pm":"PM","dateTimeFormats-appendItem-Quarter":"{0} ({2}: {1})","dayPeriods-format-wide-am":"AM","dateTimeFormats-appendItem-Month":"{0} ({2}: {1})","dateTimeFormats-appendItem-Minute":"{0} ({2}: {1})","dateTimeFormats-appendItem-Timezone":"{0} {1}","dayPeriods-format-narrow-pm":"PM","dateTimeFormat-short":"{1} {0}","dateFormatItem-hms":"h:mm:ss a"};dojo.provide("dojo.nls.dojo_ua");dojo.provide("dijit.nls.common.ua");dijit.nls.common.ua=
{"buttonOk":"\u0422\u0430\u043a","buttonCancel":"\u0412\u0456\u0434\u043c\u0456\u043d\u0430","buttonSave":"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438","itemClose":"\u0417\u0430\u043a\u0440\u0438\u0442\u0438"};dojo.provide("dojo.cldr.nls.gregorian.ua");dojo.cldr.nls.gregorian.ua={"dateFormatItem-yM":"M.y","field-dayperiod":"AM/PM","field-minute":"??????","eraNames":["?? ?.?.","?.?."],"dateFormatItem-MMMEd":"E d MMM","field-day-relative+-1":"?????","field-weekday":"???? ??????","dateFormatItem-yQQQ":"y QQQ",
"field-day-relative+-2":"?????????","dateFormatItem-MMdd":"dd.MM","days-standAlone-wide":["???????????","???????????","???????","?????","???????","???????","???????"],"dateFormatItem-MMM":"LLL","months-standAlone-narrow":["?","?","?","?","?","?","?","?","?","?","?","?"],"field-era":"???","field-hour":"???","quarters-standAlone-abbr":["1-? ??.","2-? ??.","3-? ??.","4-? ??."],"dateFormatItem-yyMMMEEEd":"EEE, d MMM yy","dateFormatItem-y":"y","timeFormat-full":"H:mm:ss zzzz","dateFormatItem-yyyy":"y",
"months-standAlone-abbr":["???.","????.","????","???.","???","????","????","???.","????.","???.","????.","???."],"dateFormatItem-Ed":"E d","dateFormatItem-yMMM":"LLL y","field-day-relative+0":"???????","dateFormatItem-yyyyLLLL":"LLLL y","field-day-relative+1":"??????","days-standAlone-narrow":["?","?","?","?","?","?","?"],"eraAbbr":["?? ?.?.","?.?."],"field-day-relative+2":"???????????","dateFormatItem-yyyyMM":"MM.yyyy","dateFormatItem-yyyyMMMM":"LLLL y","dateFormat-long":"d MMMM y?'?'.","timeFormat-medium":"H:mm:ss",
"field-zone":"??????? ????","dateFormatItem-Hm":"H:mm","dateFormat-medium":"dd.MM.yyyy","dateFormatItem-yyMM":"MM.yy","dateFormatItem-Hms":"H:mm:ss","dateFormatItem-yyMMM":"LLL yy","quarters-standAlone-wide":["1-? ???????","2-? ???????","3-? ???????","4-? ???????"],"dateFormatItem-ms":"mm:ss","dateFormatItem-yyyyQQQQ":"QQQQ y?'?'.","field-year":"???","months-standAlone-wide":["??????","???????","????","??????","???","????","????","??????","????????","???????","??????","???????"],"field-week":"??????",
"dateFormatItem-MMMd":"d MMM","dateFormatItem-yyQ":"Q yy","timeFormat-long":"H:mm:ss z","months-format-abbr":["???.","????.","?????","???.","???","????","????","???.","????.","???.","????.","???."],"timeFormat-short":"H:mm","dateFormatItem-H":"H","field-month":"?????","quarters-format-abbr":["1-? ??.","2-? ??.","3-? ??.","4-? ??."],"days-format-abbr":["??","??","??","??","??","??","??"],"dateFormatItem-M":"L","days-format-narrow":["?","?","?","?","?","?","?"],"field-second":"???????","field-day":"????",
"dateFormatItem-MEd":"E, d.M","months-format-narrow":["?","?","?","?","?","?","?","?","?","?","?","?"],"days-standAlone-abbr":["??","??","??","??","??","??","??"],"dateFormat-short":"dd.MM.yy","dateFormatItem-yMMMEd":"E, d MMM y","dateFormat-full":"EEEE, d MMMM y?'?'.","dateFormatItem-Md":"d.M","dateFormatItem-yMEd":"EEE, d.M.y","months-format-wide":["??????","???????","?????","??????","???","????","????","???????","????????","???????","??????","???????"],"dateFormatItem-d":"d","quarters-format-wide":["1-? ???????",
"2-? ???????","3-? ???????","4-? ???????"],"days-format-wide":["???????????","???????????","???????","?????","???????","???????","???????"],"eraNarrow":["?? ?.?.","?.?."],"quarters-standAlone-narrow":["1","2","3","4"],"dateTimeFormats-appendItem-Day-Of-Week":"{0} {1}","dateTimeFormat-medium":"{1} {0}","dateFormatItem-EEEd":"d EEE","dayPeriods-format-wide-pm":"PM","dayPeriods-format-abbr-am":"AM","dateTimeFormats-appendItem-Second":"{0} ({2}: {1})","dateFormatItem-yQ":"y Q","dateTimeFormats-appendItem-Era":"{0} {1}",
"dateTimeFormats-appendItem-Week":"{0} ({2}: {1})","quarters-format-narrow":["1","2","3","4"],"dateFormatItem-h":"h a","dateTimeFormat-long":"{1} {0}","dayPeriods-format-narrow-am":"AM","dateTimeFormat-full":"{1} {0}","dateTimeFormats-appendItem-Day":"{0} ({2}: {1})","dateFormatItem-hm":"h:mm a","dateTimeFormats-appendItem-Year":"{0} {1}","dateTimeFormats-appendItem-Hour":"{0} ({2}: {1})","dayPeriods-format-abbr-pm":"PM","dateTimeFormats-appendItem-Quarter":"{0} ({2}: {1})","dayPeriods-format-wide-am":"AM",
"dateTimeFormats-appendItem-Month":"{0} ({2}: {1})","dateTimeFormats-appendItem-Minute":"{0} ({2}: {1})","dateTimeFormats-appendItem-Timezone":"{0} {1}","dayPeriods-format-narrow-pm":"PM","dateTimeFormat-short":"{1} {0}","dateFormatItem-hms":"h:mm:ss a"};dojo.provide("dojo.nls.dojo_sk");dojo.provide("dijit.nls.common.sk");dijit.nls.common.sk={"buttonOk":"OK","buttonCancel":"Zrusit","buttonSave":"Ulozit","itemClose":"Zatvorit"};dojo.provide("dojo.cldr.nls.gregorian.sk");dojo.cldr.nls.gregorian.sk=
{"field-dayperiod":"Cast dna","dateFormatItem-yQ":"Q yyyy","dayPeriods-format-wide-pm":"popoludni","field-minute":"Minuta","eraNames":["pred n.l.","n.l."],"dateFormatItem-MMMEd":"E, d. MMM","field-day-relative+-1":"Vcera","field-weekday":"Den v tyzdni","dateFormatItem-yQQQ":"QQQ y","field-day-relative+-2":"Predvcerom","field-day-relative+-3":"Pred tromi dnami","days-standAlone-wide":["nedela","pondelok","utorok","streda","stvrtok","piatok","sobota"],"months-standAlone-narrow":["j","f","m","a","m",
"j","j","a","s","o","n","d"],"field-era":"Era","field-hour":"Hodina","dayPeriods-format-wide-am":"dopoludnia","timeFormat-full":"H:mm:ss zzzz","months-standAlone-abbr":["jan","feb","mar","apr","maj","jun","jul","aug","sep","okt","nov","dec"],"dateFormatItem-yMMM":"LLL y","field-day-relative+0":"Dnes","field-day-relative+1":"Zajtra","days-standAlone-narrow":["N","P","U","S","S","P","S"],"eraAbbr":["pred n.l.","n.l."],"field-day-relative+2":"Pozajtra","field-day-relative+3":"O tri dni","dateFormatItem-yyyyMMMM":"LLLL y",
"dateFormat-long":"d. MMMM y","timeFormat-medium":"H:mm:ss","dateFormatItem-EEEd":"EEE, d.","field-zone":"Pasmo","dateFormatItem-Hm":"H:mm","dateFormat-medium":"d.M.yyyy","dateFormatItem-Hms":"H:mm:ss","dateFormatItem-yyQQQQ":"QQQQ yy","quarters-standAlone-wide":["1. stvrtrok","2. stvrtrok","3. stvrtrok","4. stvrtrok"],"dateFormatItem-yMMMM":"LLLL y","dateFormatItem-ms":"mm:ss","field-year":"Rok","months-standAlone-wide":["januar","februar","marec","april","maj","jun","jul","august","september","oktober",
"november","december"],"field-week":"Tyzden","dateFormatItem-MMMMEd":"E, d. MMMM","dateFormatItem-MMMd":"d. MMM","dateFormatItem-yyQ":"Q yy","timeFormat-long":"H:mm:ss z","months-format-abbr":["jan","feb","mar","apr","maj","jun","jul","aug","sep","okt","nov","dec"],"timeFormat-short":"H:mm","dateFormatItem-H":"H","field-month":"Mesiac","dateFormatItem-MMMMd":"d. MMMM","quarters-format-abbr":["Q1","Q2","Q3","Q4"],"days-format-abbr":["ne","po","ut","st","st","pi","so"],"dateFormatItem-mmss":"mm:ss",
"days-format-narrow":["N","P","U","S","S","P","S"],"field-second":"Sekunda","field-day":"Den","dateFormatItem-MEd":"E, d.M.","months-format-narrow":["j","f","m","a","m","j","j","a","s","o","n","d"],"days-standAlone-abbr":["ne","po","ut","st","st","pi","so"],"dateFormat-short":"d.M.yyyy","dateFormatItem-yyyyM":"M.yyyy","dateFormatItem-yMMMEd":"EEE, d. MMM y","dateFormat-full":"EEEE, d. MMMM y","dateFormatItem-Md":"d.M.","dateFormatItem-yMEd":"EEE, d.M.yyyy","months-format-wide":["januara","februara",
"marca","aprila","maja","juna","jula","augusta","septembra","oktobra","novembra","decembra"],"dateFormatItem-d":"d.","quarters-format-wide":["1. stvrtrok","2. stvrtrok","3. stvrtrok","4. stvrtrok"],"days-format-wide":["nedela","pondelok","utorok","streda","stvrtok","piatok","sobota"],"eraNarrow":["pred n.l.","n.l."],"quarters-standAlone-narrow":["1","2","3","4"],"dateTimeFormats-appendItem-Day-Of-Week":"{0} {1}","dateTimeFormat-medium":"{1} {0}","dayPeriods-format-abbr-am":"AM","dateTimeFormats-appendItem-Second":"{0} ({2}: {1})",
"dateFormatItem-yM":"y-M","dateTimeFormats-appendItem-Era":"{0} {1}","dateTimeFormats-appendItem-Week":"{0} ({2}: {1})","dateFormatItem-M":"L","quarters-standAlone-abbr":["Q1","Q2","Q3","Q4"],"quarters-format-narrow":["1","2","3","4"],"dateFormatItem-h":"h a","dateTimeFormat-long":"{1} {0}","dayPeriods-format-narrow-am":"AM","dateTimeFormat-full":"{1} {0}","dateTimeFormats-appendItem-Day":"{0} ({2}: {1})","dateFormatItem-y":"y","dateFormatItem-hm":"h:mm a","dateTimeFormats-appendItem-Year":"{0} {1}",
"dateTimeFormats-appendItem-Hour":"{0} ({2}: {1})","dayPeriods-format-abbr-pm":"PM","dateFormatItem-MMM":"LLL","dateTimeFormats-appendItem-Quarter":"{0} ({2}: {1})","dateTimeFormats-appendItem-Month":"{0} ({2}: {1})","dateTimeFormats-appendItem-Minute":"{0} ({2}: {1})","dateTimeFormats-appendItem-Timezone":"{0} {1}","dayPeriods-format-narrow-pm":"PM","dateTimeFormat-short":"{1} {0}","dateFormatItem-hms":"h:mm:ss a"};dojo.provide("dojo.nls.dojo_sl");dojo.provide("dijit.nls.common.sl");dijit.nls.common.sl=
{"buttonOk":"V redu","buttonCancel":"Preklici","buttonSave":"Shrani","itemClose":"Zapri"};dojo.provide("dojo.cldr.nls.gregorian.sl");dojo.cldr.nls.gregorian.sl={"field-dayperiod":"Cas dneva","dayPeriods-format-wide-pm":"pop.","field-minute":"Minuta","eraNames":["pred nasim stetjem","nase stetje"],"field-day-relative+-1":"Vceraj","field-weekday":"Dan v tednu","field-day-relative+-2":"Predvcerajsnjim","field-day-relative+-3":"Pred tremi dnevi","days-standAlone-wide":["nedelja","ponedeljek","torek",
"sreda","cetrtek","petek","sobota"],"months-standAlone-narrow":["j","f","m","a","m","j","j","a","s","o","n","d"],"field-era":"Doba","field-hour":"Ura","dayPeriods-format-wide-am":"dop.","dateFormatItem-y":"y","timeFormat-full":"HH:mm:ss zzzz","months-standAlone-abbr":["jan","feb","mar","apr","maj","jun","jul","avg","sep","okt","nov","dec"],"field-day-relative+0":"Danes","field-day-relative+1":"Jutri","days-standAlone-narrow":["n","p","t","s","c","p","s"],"eraAbbr":["pr. n. st.","po Kr."],"field-day-relative+2":"Pojutrisnjem",
"field-day-relative+3":"Cez tri dni","dateFormatItem-yyyyMMMM":"MMMM y","dateFormat-long":"dd. MMMM y","timeFormat-medium":"HH:mm:ss","field-zone":"Obmocje","dateFormatItem-Hm":"HH:mm","dateFormat-medium":"d. MMM. yyyy","dateFormatItem-Hms":"HH:mm:ss","quarters-standAlone-wide":["1. cetrtletje","2. cetrtletje","3. cetrtletje","4. cetrtletje"],"dateFormatItem-ms":"mm:ss","field-year":"Leto","months-standAlone-wide":["januar","februar","marec","april","maj","junij","julij","avgust","september","oktober",
"november","december"],"field-week":"Teden","dateFormatItem-yyQ":"Q/yy","timeFormat-long":"HH:mm:ss z","months-format-abbr":["jan","feb","mar","apr","maj","jun","jul","avg","sep","okt","nov","dec"],"timeFormat-short":"HH:mm","field-month":"Mesec","dateFormatItem-MMMMd":"d. MMMM","quarters-format-abbr":["Q1","Q2","Q3","Q4"],"days-format-abbr":["ned","pon","tor","sre","cet","pet","sob"],"dateFormatItem-MMMMdd":"dd. MMMM","dateFormatItem-mmss":"mm:ss","days-format-narrow":["n","p","t","s","c","p","s"],
"field-second":"Sekunda","field-day":"Dan","months-format-narrow":["j","f","m","a","m","j","j","a","s","o","n","d"],"days-standAlone-abbr":["ned","pon","tor","sre","cet","pet","sob"],"dateFormat-short":"d. MM. yy","dateFormatItem-yyyyM":"M/yyyy","dateFormat-full":"EEEE, dd. MMMM y","dateFormatItem-Md":"d. M.","months-format-wide":["januar","februar","marec","april","maj","junij","julij","avgust","september","oktober","november","december"],"quarters-format-wide":["1. cetrtletje","2. cetrtletje","3. cetrtletje",
"4. cetrtletje"],"days-format-wide":["nedelja","ponedeljek","torek","sreda","cetrtek","petek","sobota"],"eraNarrow":["pr. n. st.","po Kr."],"quarters-standAlone-narrow":["1","2","3","4"],"dateFormatItem-yQQQ":"y QQQ","dateFormatItem-yMEd":"EEE, y-M-d","dateFormatItem-MMMEd":"E MMM d","dateTimeFormats-appendItem-Day-Of-Week":"{0} {1}","dateTimeFormat-medium":"{1} {0}","dateFormatItem-EEEd":"d EEE","dayPeriods-format-abbr-am":"AM","dateTimeFormats-appendItem-Second":"{0} ({2}: {1})","dateFormatItem-yM":"y-M",
"dateFormatItem-yMMM":"y MMM","dateFormatItem-yQ":"y Q","dateTimeFormats-appendItem-Era":"{0} {1}","dateTimeFormats-appendItem-Week":"{0} ({2}: {1})","dateFormatItem-H":"HH","dateFormatItem-M":"L","quarters-standAlone-abbr":["Q1","Q2","Q3","Q4"],"dateFormatItem-d":"d","quarters-format-narrow":["1","2","3","4"],"dateFormatItem-h":"h a","dateTimeFormat-long":"{1} {0}","dayPeriods-format-narrow-am":"AM","dateFormatItem-MMMd":"MMM d","dateFormatItem-MEd":"E, M-d","dateTimeFormat-full":"{1} {0}","dateTimeFormats-appendItem-Day":"{0} ({2}: {1})",
"dateFormatItem-hm":"h:mm a","dateTimeFormats-appendItem-Year":"{0} {1}","dateTimeFormats-appendItem-Hour":"{0} ({2}: {1})","dayPeriods-format-abbr-pm":"PM","dateFormatItem-MMM":"LLL","dateTimeFormats-appendItem-Quarter":"{0} ({2}: {1})","dateTimeFormats-appendItem-Month":"{0} ({2}: {1})","dateTimeFormats-appendItem-Minute":"{0} ({2}: {1})","dateFormatItem-yMMMEd":"EEE, y MMM d","dateTimeFormats-appendItem-Timezone":"{0} {1}","dayPeriods-format-narrow-pm":"PM","dateTimeFormat-short":"{1} {0}","dateFormatItem-hms":"h:mm:ss a"};
dojo.provide("dojo.nls.dojo_sv");dojo.provide("dijit.nls.common.sv");dijit.nls.common.sv={"buttonOk":"OK","buttonCancel":"Avbryt","buttonSave":"Spara","itemClose":"Stang"};dojo.provide("dojo.cldr.nls.gregorian.sv");dojo.cldr.nls.gregorian.sv={"months-format-narrow":["J","F","M","A","M","J","J","A","S","O","N","D"],"quarters-standAlone-narrow":["1","2","3","4"],"field-weekday":"veckodag","dateFormatItem-yQQQ":"y QQQ","dateFormatItem-yMEd":"EEE, yyyy-MM-dd","dateFormatItem-MMMEd":"E d MMM","eraNarrow":["f.Kr.",
"e.Kr."],"dateFormat-long":"d MMMM y","months-format-wide":["januari","februari","mars","april","maj","juni","juli","augusti","september","oktober","november","december"],"dateFormatItem-EEEd":"EEE d","dayPeriods-format-wide-pm":"em","dateFormat-full":"EEEE'en' 'den' d:'e' MMMM y","dateFormatItem-Md":"d/M","dateFormatItem-MMMMEEEd":"EEE d MMMM","field-era":"era","dateFormatItem-yM":"yyyy-MM","months-standAlone-wide":["januari","februari","mars","april","maj","juni","juli","augusti","september","oktober",
"november","december"],"timeFormat-short":"HH:mm","quarters-format-wide":["1:a kvartalet","2:a kvartalet","3:e kvartalet","4:e kvartalet"],"timeFormat-long":"HH:mm:ss z","field-year":"ar","dateFormatItem-yMMM":"y MMM","dateFormatItem-yQ":"yyyy Q","field-hour":"timme","dateFormatItem-MMdd":"dd/MM","months-format-abbr":["jan","feb","mar","apr","maj","jun","jul","aug","sep","okt","nov","dec"],"dateFormatItem-yyQ":"Q yy","timeFormat-full":"'kl'. HH:mm:ss zzzz","field-day-relative+0":"i dag","field-day-relative+1":"i morgon",
"field-day-relative+2":"i overmorgon","field-day-relative+3":"i overovermorgon","months-standAlone-abbr":["jan","feb","mar","apr","maj","jun","jul","aug","sep","okt","nov","dec"],"quarters-format-abbr":["K1","K2","K3","K4"],"quarters-standAlone-wide":["1:a kvartalet","2:a kvartalet","3:e kvartalet","4:e kvartalet"],"dateFormatItem-M":"L","days-standAlone-wide":["sondag","mandag","tisdag","onsdag","torsdag","fredag","lordag"],"dateFormatItem-yyyyMMM":"MMM y","dateFormatItem-MMMMd":"d:'e' MMMM","dateFormatItem-yyMMM":"MMM -yy",
"timeFormat-medium":"HH:mm:ss","dateFormatItem-Hm":"HH:mm","quarters-standAlone-abbr":["K1","K2","K3","K4"],"eraAbbr":["f.Kr.","e.Kr."],"field-minute":"minut","field-dayperiod":"fm/em","days-standAlone-abbr":["son","man","tis","ons","tors","fre","lor"],"dateFormatItem-d":"d","dateFormatItem-ms":"mm:ss","field-day-relative+-1":"i gar","field-day-relative+-2":"i forrgar","field-day-relative+-3":"i forrforrgar","dateFormatItem-MMMd":"d MMM","dateFormatItem-MEd":"E d/M","field-day":"dag","days-format-wide":["sondag",
"mandag","tisdag","onsdag","torsdag","fredag","lordag"],"field-zone":"tidszon","dateFormatItem-yyyyMM":"yyyy-MM","dateFormatItem-y":"y","months-standAlone-narrow":["J","F","M","A","M","J","J","A","S","O","N","D"],"dateFormatItem-yyMM":"yy-MM","dateFormatItem-hm":"h:mm a","days-format-abbr":["son","man","tis","ons","tors","fre","lor"],"eraNames":["fore Kristus","efter Kristus"],"days-format-narrow":["S","M","T","O","T","F","L"],"field-month":"manad","days-standAlone-narrow":["S","M","T","O","T","F",
"L"],"dateFormatItem-MMM":"LLL","dayPeriods-format-wide-am":"fm","dateFormatItem-MMMMEd":"E d:'e' MMMM","dateFormat-short":"yyyy-MM-dd","dateFormatItem-MMd":"d/M","field-second":"sekund","dateFormatItem-yMMMEd":"EEE d MMM y","field-week":"vecka","dateFormat-medium":"d MMM y","dateFormatItem-yyyyQQQQ":"QQQQ y","dateFormatItem-Hms":"HH:mm:ss","dateFormatItem-hms":"h:mm:ss a","dateTimeFormats-appendItem-Day-Of-Week":"{0} {1}","dateTimeFormat-medium":"{1} {0}","dayPeriods-format-abbr-am":"AM","dateTimeFormats-appendItem-Second":"{0} ({2}: {1})",
"dateTimeFormats-appendItem-Era":"{0} {1}","dateTimeFormats-appendItem-Week":"{0} ({2}: {1})","dateFormatItem-H":"HH","quarters-format-narrow":["1","2","3","4"],"dateFormatItem-h":"h a","dateTimeFormat-long":"{1} {0}","dayPeriods-format-narrow-am":"AM","dateTimeFormat-full":"{1} {0}","dateTimeFormats-appendItem-Day":"{0} ({2}: {1})","dateTimeFormats-appendItem-Year":"{0} {1}","dateTimeFormats-appendItem-Hour":"{0} ({2}: {1})","dayPeriods-format-abbr-pm":"PM","dateTimeFormats-appendItem-Quarter":"{0} ({2}: {1})",
"dateTimeFormats-appendItem-Month":"{0} ({2}: {1})","dateTimeFormats-appendItem-Minute":"{0} ({2}: {1})","dateTimeFormats-appendItem-Timezone":"{0} {1}","dayPeriods-format-narrow-pm":"PM","dateTimeFormat-short":"{1} {0}"};dojo.provide("dojo.nls.dojo_th");dojo.provide("dijit.nls.common.th");dijit.nls.common.th={"buttonOk":"????","buttonCancel":"??????","buttonSave":"??????","itemClose":"???"};dojo.provide("dojo.cldr.nls.gregorian.th");dojo.cldr.nls.gregorian.th={"months-format-narrow":["?.?.","?.?.",
"??.?.","??.?.","?.?.","??.?.","?.?.","?.?.","?.?.","?.?.","?.?.","?.?."],"field-weekday":"????????????","dateFormatItem-yQQQ":"QQQ y","dateFormatItem-yMEd":"EEE d/M/yyyy","dateFormatItem-MMMEd":"E d MMM","eraNarrow":["???? ?.?.","?.?."],"dateFormat-long":"d MMMM y","months-format-wide":["??????","??????????","??????","??????","???????","????????","???????","???????","???????","??????","?????????","???????"],"dateTimeFormat-medium":"{1}, {0}","dateFormatItem-EEEd":"EEE d","dayPeriods-format-wide-pm":"??????????",
"dateFormat-full":"EEEE??? d MMMM G y","dateFormatItem-Md":"d/M","field-era":"????","dateFormatItem-yM":"M/yyyy","months-standAlone-wide":["??????","??????????","??????","??????","???????","????????","???????","???????","???????","??????","?????????","???????"],"timeFormat-short":"H:mm","quarters-format-wide":["?????? 1","?????? 2","?????? 3","?????? 4"],"timeFormat-long":"H ?????? m ???? ss ?????? z","field-year":"??","dateFormatItem-yMMM":"MMM y","dateFormatItem-yQ":"Q yyyy","dateFormatItem-yyyyMMMM":"MMMM y",
"field-hour":"???????","months-format-abbr":["?.?.","?.?.","??.?.","??.?.","?.?.","??.?.","?.?.","?.?.","?.?.","?.?.","?.?.","?.?."],"dateFormatItem-yyQ":"Q yy","timeFormat-full":"H ?????? m ???? ss ?????? zzzz","field-day-relative+0":"??????","field-day-relative+1":"????????","field-day-relative+2":"????????","dateFormatItem-H":"H","field-day-relative+3":"???????????????","months-standAlone-abbr":["?.?.","?.?.","??.?.","??.?.","?.?.","??.?.","?.?.","?.?.","?.?.","?.?.","?.?.","?.?."],"quarters-format-abbr":["Q1",
"Q2","Q3","Q4"],"quarters-standAlone-wide":["?????? 1","?????? 2","?????? 3","?????? 4"],"dateFormatItem-M":"L","days-standAlone-wide":["??????????","?????????","?????????","??????","???????????","????????","????????"],"dateFormatItem-MMMMd":"d MMMM","timeFormat-medium":"H:mm:ss","dateFormatItem-Hm":"H:mm","eraAbbr":["?????? ?.?.","?.?."],"field-minute":"????","field-dayperiod":"???????","days-standAlone-abbr":["??.","?.","?.","?.","??.","?.","?."],"dateFormatItem-d":"d","dateFormatItem-ms":"mm:ss",
"field-day-relative+-1":"????????","dateTimeFormat-long":"{1}, {0}","field-day-relative+-2":"???????????","field-day-relative+-3":"??????????","dateFormatItem-MMMd":"d MMM","dateFormatItem-MEd":"E, d/M","dateTimeFormat-full":"{1}, {0}","dateFormatItem-yMMMM":"MMMM y","field-day":"???","days-format-wide":["??????????","?????????","?????????","??????","???????????","????????","????????"],"field-zone":"???","dateFormatItem-y":"y","months-standAlone-narrow":["?.?.","?.?.","??.?.","??.?.","?.?.","??.?.",
"?.?.","?.?.","?.?.","?.?.","?.?.","?.?."],"days-format-abbr":["??.","?.","?.","?.","??.","?.","?."],"eraNames":["??????????????????","????????????"],"days-format-narrow":["?","?","?","?","?","?","?"],"field-month":"?????","days-standAlone-narrow":["?","?","?","?","?","?","?"],"dateFormatItem-MMM":"LLL","dayPeriods-format-wide-am":"??????????","dateFormatItem-MMMMEd":"E d MMMM","dateFormat-short":"d/M/yyyy","field-second":"??????","dateFormatItem-yMMMEd":"EEE d MMM y","field-week":"???????","dateFormat-medium":"d MMM y",
"dateFormatItem-yyyyM":"M/yyyy","dateFormatItem-mmss":"mm:ss","dateTimeFormat-short":"{1}, {0}","dateFormatItem-Hms":"H:mm:ss","quarters-standAlone-narrow":["1","2","3","4"],"dateTimeFormats-appendItem-Day-Of-Week":"{0} {1}","dayPeriods-format-abbr-am":"AM","dateTimeFormats-appendItem-Second":"{0} ({2}: {1})","dateTimeFormats-appendItem-Era":"{0} {1}","dateTimeFormats-appendItem-Week":"{0} ({2}: {1})","quarters-standAlone-abbr":["Q1","Q2","Q3","Q4"],"quarters-format-narrow":["1","2","3","4"],"dateFormatItem-h":"h a",
"dayPeriods-format-narrow-am":"AM","dateTimeFormats-appendItem-Day":"{0} ({2}: {1})","dateFormatItem-hm":"h:mm a","dateTimeFormats-appendItem-Year":"{0} {1}","dateTimeFormats-appendItem-Hour":"{0} ({2}: {1})","dayPeriods-format-abbr-pm":"PM","dateTimeFormats-appendItem-Quarter":"{0} ({2}: {1})","dateTimeFormats-appendItem-Month":"{0} ({2}: {1})","dateTimeFormats-appendItem-Minute":"{0} ({2}: {1})","dateTimeFormats-appendItem-Timezone":"{0} {1}","dayPeriods-format-narrow-pm":"PM","dateFormatItem-hms":"h:mm:ss a"};
dojo.provide("dojo.nls.dojo_tr");dojo.provide("dijit.nls.common.tr");dijit.nls.common.tr={"buttonOk":"Tamam","buttonCancel":"Iptal","buttonSave":"Kaydet","itemClose":"Kapat"};dojo.provide("dojo.cldr.nls.gregorian.tr");dojo.cldr.nls.gregorian.tr={"months-format-narrow":["O","S","M","N","M","H","T","A","E","E","K","A"],"field-weekday":"Haftan?n Gunu","dateFormatItem-yyQQQQ":"QQQQ yy","dateFormatItem-yQQQ":"QQQ y","dateFormatItem-yMEd":"dd.MM.yyyy EEE","dateFormatItem-MMMEd":"dd MMM E","eraNarrow":["MO",
"MS"],"dateFormat-long":"dd MMMM y","months-format-wide":["Ocak","Subat","Mart","Nisan","May?s","Haziran","Temmuz","Agustos","Eylul","Ekim","Kas?m","Aral?k"],"dateFormatItem-EEEd":"d EEE","dayPeriods-format-wide-pm":"PM","dateFormat-full":"dd MMMM y EEEE","dateFormatItem-Md":"dd/MM","field-era":"Miladi Donem","dateFormatItem-yM":"M/yyyy","months-standAlone-wide":["Ocak","Subat","Mart","Nisan","May?s","Haziran","Temmuz","Agustos","Eylul","Ekim","Kas?m","Aral?k"],"timeFormat-short":"HH:mm","quarters-format-wide":["1. ceyrek",
"2. ceyrek","3. ceyrek","4. ceyrek"],"timeFormat-long":"HH:mm:ss z","field-year":"Y?l","dateFormatItem-yMMM":"MMM y","dateFormatItem-yQ":"Q yyyy","field-hour":"Saat","months-format-abbr":["Oca","Sub","Mar","Nis","May","Haz","Tem","Agu","Eyl","Eki","Kas","Ara"],"dateFormatItem-yyQ":"Q yy","timeFormat-full":"HH:mm:ss zzzz","field-day-relative+0":"Bugun","field-day-relative+1":"Yar?n","field-day-relative+2":"Yar?ndan sonraki gun","dateFormatItem-H":"HH","field-day-relative+3":"Uc gun sonra","months-standAlone-abbr":["Oca",
"Sub","Mar","Nis","May","Haz","Tem","Agu","Eyl","Eki","Kas","Ara"],"quarters-format-abbr":["C1","C2","C3","C4"],"quarters-standAlone-wide":["1. ceyrek","2. ceyrek","3. ceyrek","4. ceyrek"],"dateFormatItem-M":"L","days-standAlone-wide":["Pazar","Pazartesi","Sal?","Carsamba","Persembe","Cuma","Cumartesi"],"dateFormatItem-MMMMd":"dd MMMM","dateFormatItem-yyMMM":"MMM yy","timeFormat-medium":"HH:mm:ss","dateFormatItem-Hm":"HH:mm","quarters-standAlone-abbr":["C1","C2","C3","C4"],"eraAbbr":["MO","MS"],"field-minute":"Dakika",
"field-dayperiod":"AM/PM","days-standAlone-abbr":["Paz","Pzt","Sal","Car","Per","Cum","Cmt"],"dateFormatItem-d":"d","dateFormatItem-ms":"mm:ss","field-day-relative+-1":"Dun","field-day-relative+-2":"Evvelsi gun","field-day-relative+-3":"Uc gun once","dateFormatItem-MMMd":"dd MMM","dateFormatItem-MEd":"dd/MM E","dateFormatItem-yMMMM":"MMMM y","field-day":"Gun","days-format-wide":["Pazar","Pazartesi","Sal?","Carsamba","Persembe","Cuma","Cumartesi"],"field-zone":"Saat Dilimi","dateFormatItem-y":"y",
"months-standAlone-narrow":["O","S","M","N","M","H","T","A","E","E","K","A"],"dateFormatItem-yyMM":"MM/yy","dateFormatItem-hm":"h:mm a","days-format-abbr":["Paz","Pzt","Sal","Car","Per","Cum","Cmt"],"eraNames":["Milattan Once","Milattan Sonra"],"days-format-narrow":["P","P","S","C","P","C","C"],"field-month":"Ay","days-standAlone-narrow":["P","P","S","C","P","C","C"],"dateFormatItem-MMM":"LLL","dayPeriods-format-wide-am":"AM","dateFormatItem-MMMMEd":"dd MMMM E","dateFormat-short":"dd.MM.yyyy","field-second":"Saniye",
"dateFormatItem-yMMMEd":"dd MMM y EEE","dateFormatItem-Ed":"d E","field-week":"Hafta","dateFormat-medium":"dd MMM y","dateFormatItem-mmss":"mm:ss","dateFormatItem-Hms":"HH:mm:ss","dateFormatItem-hms":"h:mm:ss a","dateFormatItem-yyyy":"y","quarters-standAlone-narrow":["1","2","3","4"],"dateTimeFormats-appendItem-Day-Of-Week":"{0} {1}","dateTimeFormat-medium":"{1} {0}","dayPeriods-format-abbr-am":"AM","dateTimeFormats-appendItem-Second":"{0} ({2}: {1})","dateTimeFormats-appendItem-Era":"{0} {1}","dateTimeFormats-appendItem-Week":"{0} ({2}: {1})",
"quarters-format-narrow":["1","2","3","4"],"dateFormatItem-h":"h a","dateTimeFormat-long":"{1} {0}","dayPeriods-format-narrow-am":"AM","dateTimeFormat-full":"{1} {0}","dateTimeFormats-appendItem-Day":"{0} ({2}: {1})","dateTimeFormats-appendItem-Year":"{0} {1}","dateTimeFormats-appendItem-Hour":"{0} ({2}: {1})","dayPeriods-format-abbr-pm":"PM","dateTimeFormats-appendItem-Quarter":"{0} ({2}: {1})","dateTimeFormats-appendItem-Month":"{0} ({2}: {1})","dateTimeFormats-appendItem-Minute":"{0} ({2}: {1})",
"dateTimeFormats-appendItem-Timezone":"{0} {1}","dayPeriods-format-narrow-pm":"PM","dateTimeFormat-short":"{1} {0}"};dojo.provide("dojo.nls.dojo_xx");dojo.provide("dijit.nls.common.xx");dijit.nls.common.xx={"buttonOk":"OK","buttonCancel":"Cancel","buttonSave":"Save","itemClose":"Close"};dojo.provide("dojo.cldr.nls.gregorian.xx");dojo.cldr.nls.gregorian.xx={"months-format-narrow":["1","2","3","4","5","6","7","8","9","10","11","12"],"quarters-standAlone-narrow":["1","2","3","4"],"field-weekday":"Day of the Week",
"dateFormatItem-yQQQ":"y QQQ","dateFormatItem-yMEd":"EEE, y-M-d","dateFormatItem-MMMEd":"E MMM d","eraNarrow":["BCE","CE"],"dateTimeFormats-appendItem-Day-Of-Week":"{0} {1}","dateFormat-long":"y MMMM d","months-format-wide":["1","2","3","4","5","6","7","8","9","10","11","12"],"dateTimeFormat-medium":"{1} {0}","dateFormatItem-EEEd":"d EEE","dayPeriods-format-wide-pm":"PM","dateFormat-full":"EEEE, y MMMM dd","dateFormatItem-Md":"M-d","dayPeriods-format-abbr-am":"AM","dateTimeFormats-appendItem-Second":"{0} ({2}: {1})",
"field-era":"Era","dateFormatItem-yM":"y-M","months-standAlone-wide":["1","2","3","4","5","6","7","8","9","10","11","12"],"timeFormat-short":"HH:mm","quarters-format-wide":["Q1","Q2","Q3","Q4"],"timeFormat-long":"HH:mm:ss z","field-year":"Year","dateFormatItem-yMMM":"y MMM","dateFormatItem-yQ":"y Q","dateTimeFormats-appendItem-Era":"{0} {1}","field-hour":"Hour","months-format-abbr":["1","2","3","4","5","6","7","8","9","10","11","12"],"timeFormat-full":"HH:mm:ss zzzz","dateTimeFormats-appendItem-Week":"{0} ({2}: {1})",
"field-day-relative+0":"Today","field-day-relative+1":"Tomorrow","dateFormatItem-H":"HH","months-standAlone-abbr":["1","2","3","4","5","6","7","8","9","10","11","12"],"quarters-format-abbr":["Q1","Q2","Q3","Q4"],"quarters-standAlone-wide":["Q1","Q2","Q3","Q4"],"dateFormatItem-M":"L","days-standAlone-wide":["1","2","3","4","5","6","7"],"timeFormat-medium":"HH:mm:ss","dateFormatItem-Hm":"HH:mm","quarters-standAlone-abbr":["Q1","Q2","Q3","Q4"],"eraAbbr":["BCE","CE"],"field-minute":"Minute","field-dayperiod":"Dayperiod",
"days-standAlone-abbr":["1","2","3","4","5","6","7"],"dateFormatItem-d":"d","dateFormatItem-ms":"mm:ss","quarters-format-narrow":["1","2","3","4"],"field-day-relative+-1":"Yesterday","dateFormatItem-h":"h a","dateTimeFormat-long":"{1} {0}","dayPeriods-format-narrow-am":"AM","dateFormatItem-MMMd":"MMM d","dateFormatItem-MEd":"E, M-d","dateTimeFormat-full":"{1} {0}","field-day":"Day","days-format-wide":["1","2","3","4","5","6","7"],"field-zone":"Zone","dateTimeFormats-appendItem-Day":"{0} ({2}: {1})",
"dateFormatItem-y":"y","months-standAlone-narrow":["1","2","3","4","5","6","7","8","9","10","11","12"],"dateFormatItem-hm":"h:mm a","dateTimeFormats-appendItem-Year":"{0} {1}","dateTimeFormats-appendItem-Hour":"{0} ({2}: {1})","dayPeriods-format-abbr-pm":"PM","days-format-abbr":["1","2","3","4","5","6","7"],"eraNames":["BCE","CE"],"days-format-narrow":["1","2","3","4","5","6","7"],"days-standAlone-narrow":["1","2","3","4","5","6","7"],"dateFormatItem-MMM":"LLL","field-month":"Month","dateTimeFormats-appendItem-Quarter":"{0} ({2}: {1})",
"dayPeriods-format-wide-am":"AM","dateTimeFormats-appendItem-Month":"{0} ({2}: {1})","dateTimeFormats-appendItem-Minute":"{0} ({2}: {1})","dateFormat-short":"yyyy-MM-dd","field-second":"Second","dateFormatItem-yMMMEd":"EEE, y MMM d","dateTimeFormats-appendItem-Timezone":"{0} {1}","field-week":"Week","dateFormat-medium":"y MMM d","dayPeriods-format-narrow-pm":"PM","dateTimeFormat-short":"{1} {0}","dateFormatItem-Hms":"HH:mm:ss","dateFormatItem-hms":"h:mm:ss a"};dojo.provide("dojo.nls.dojo_zh");dojo.provide("dijit.nls.common.zh");
dijit.nls.common.zh={"buttonOk":"??","buttonCancel":"??","buttonSave":"??","itemClose":"??"};dojo.provide("dojo.cldr.nls.gregorian.zh");dojo.cldr.nls.gregorian.zh={"months-format-narrow":["1?","2?","3?","4?","5?","6?","7?","8?","9?","10?","11?","12?"],"field-weekday":"??","dateFormatItem-yQQQ":"y?QQQ","dateFormatItem-yMEd":"y?M?d?,E","dateFormatItem-MMMEd":"MMMd?E","eraNarrow":["???","??"],"dayPeriods-format-wide-earlyMorning":"??","dayPeriods-format-wide-morning":"??","dateFormat-long":"y?M?d?",
"months-format-wide":["1?","2?","3?","4?","5?","6?","7?","8?","9?","10?","11?","12?"],"dateTimeFormat-medium":"{1} {0}","dayPeriods-format-wide-pm":"??","dateFormat-full":"y?M?d?EEEE","dateFormatItem-Md":"M-d","field-era":"??","dateFormatItem-yM":"yyyy-M","months-standAlone-wide":["??","??","??","??","??","??","??","??","??","??","???","???"],"timeFormat-short":"ah:mm","quarters-format-wide":["?1??","?2??","?3??","?4??"],"timeFormat-long":"zah?mm?ss?","field-year":"?","dateFormatItem-yMMM":"y?MMM",
"dateFormatItem-yQ":"y?QQQ","dateFormatItem-yyyyMMMM":"y?MMMM","field-hour":"??","dateFormatItem-MMdd":"MM-dd","months-format-abbr":["1?","2?","3?","4?","5?","6?","7?","8?","9?","10?","11?","12?"],"dateFormatItem-yyQ":"yy??Q??","timeFormat-full":"zzzzah?mm?ss?","field-day-relative+0":"??","field-day-relative+1":"??","field-day-relative+2":"??","dateFormatItem-H":"H?","months-standAlone-abbr":["??","??","??","??","??","??","??","??","??","??","???","???"],"quarters-format-abbr":["1?","2?","3?","4?"],
"quarters-standAlone-wide":["?1??","?2??","?3??","?4??"],"dateFormatItem-M":"L","days-standAlone-wide":["???","???","???","???","???","???","???"],"dateFormatItem-yyMMM":"yy?MMM","timeFormat-medium":"ah:mm:ss","dateFormatItem-Hm":"H:mm","quarters-standAlone-abbr":["1?","2?","3?","4?"],"eraAbbr":["???","??"],"field-minute":"??","field-dayperiod":"??/??","days-standAlone-abbr":["??","??","??","??","??","??","??"],"dayPeriods-format-wide-night":"??","dateFormatItem-d":"d?","dateFormatItem-ms":"mm:ss",
"field-day-relative+-1":"??","dateFormatItem-h":"ah","dateTimeFormat-long":"{1}{0}","field-day-relative+-2":"??","dateFormatItem-MMMd":"MMMd?","dayPeriods-format-wide-midDay":"??","dateFormatItem-MEd":"M-dE","dateTimeFormat-full":"{1}{0}","field-day":"?","days-format-wide":["???","???","???","???","???","???","???"],"field-zone":"??","dateFormatItem-y":"y?","months-standAlone-narrow":["1?","2?","3?","4?","5?","6?","7?","8?","9?","10?","11?","12?"],"dateFormatItem-yyMM":"yy-MM","dateFormatItem-hm":"ah:mm",
"days-format-abbr":["??","??","??","??","??","??","??"],"dateFormatItem-yMMMd":"y?MMMd?","eraNames":["???","??"],"days-format-narrow":["?","?","?","?","?","?","?"],"field-month":"?","days-standAlone-narrow":["?","?","?","?","?","?","?"],"dateFormatItem-MMM":"LLL","dayPeriods-format-wide-am":"??","dateFormatItem-MMMMdd":"MMMMdd?","dayPeriods-format-wide-weeHours":"??","dateFormat-short":"yy-M-d","dayPeriods-format-wide-afternoon":"??","field-second":"??","dateFormatItem-yMMMEd":"y?MMMd?EEE","dateFormatItem-Ed":"d?E",
"field-week":"?","dateFormat-medium":"yyyy-M-d","dateFormatItem-yyyyM":"y?M?","dateTimeFormat-short":"{1} {0}","dateFormatItem-Hms":"H:mm:ss","dateFormatItem-hms":"ah:mm:ss","dateFormatItem-yyyy":"y?","quarters-standAlone-narrow":["1","2","3","4"],"dateTimeFormats-appendItem-Day-Of-Week":"{0} {1}","dateFormatItem-EEEd":"d EEE","dayPeriods-format-abbr-am":"AM","dateTimeFormats-appendItem-Second":"{0} ({2}: {1})","dateTimeFormats-appendItem-Era":"{0} {1}","dateTimeFormats-appendItem-Week":"{0} ({2}: {1})",
"quarters-format-narrow":["1","2","3","4"],"dayPeriods-format-narrow-am":"AM","dateTimeFormats-appendItem-Day":"{0} ({2}: {1})","dateTimeFormats-appendItem-Year":"{0} {1}","dateTimeFormats-appendItem-Hour":"{0} ({2}: {1})","dayPeriods-format-abbr-pm":"PM","dateTimeFormats-appendItem-Quarter":"{0} ({2}: {1})","dateTimeFormats-appendItem-Month":"{0} ({2}: {1})","dateTimeFormats-appendItem-Minute":"{0} ({2}: {1})","dateTimeFormats-appendItem-Timezone":"{0} {1}","dayPeriods-format-narrow-pm":"PM"};dojo.provide("dojo.nls.dojo_zh-cn");
dojo.provide("dijit.nls.common.zh_cn");dijit.nls.common.zh_cn={"buttonOk":"??","buttonCancel":"??","buttonSave":"??","itemClose":"??"};dojo.provide("dojo.cldr.nls.gregorian.zh_cn");dojo.cldr.nls.gregorian.zh_cn={"months-format-narrow":["1?","2?","3?","4?","5?","6?","7?","8?","9?","10?","11?","12?"],"field-weekday":"??","dateFormatItem-yQQQ":"y?QQQ","dateFormatItem-yMEd":"y?M?d?,E","dateFormatItem-MMMEd":"MMMd?E","eraNarrow":["???","??"],"dayPeriods-format-wide-earlyMorning":"??","dayPeriods-format-wide-morning":"??",
"dateFormat-long":"y?M?d?","months-format-wide":["1?","2?","3?","4?","5?","6?","7?","8?","9?","10?","11?","12?"],"dateTimeFormat-medium":"{1} {0}","dayPeriods-format-wide-pm":"??","dateFormat-full":"y?M?d?EEEE","dateFormatItem-Md":"M-d","field-era":"??","dateFormatItem-yM":"yyyy-M","months-standAlone-wide":["??","??","??","??","??","??","??","??","??","??","???","???"],"timeFormat-short":"ah:mm","quarters-format-wide":["?1??","?2??","?3??","?4??"],"timeFormat-long":"zah?mm?ss?","field-year":"?","dateFormatItem-yMMM":"y?MMM",
"dateFormatItem-yQ":"y?QQQ","dateFormatItem-yyyyMMMM":"y?MMMM","field-hour":"??","dateFormatItem-MMdd":"MM-dd","months-format-abbr":["1?","2?","3?","4?","5?","6?","7?","8?","9?","10?","11?","12?"],"dateFormatItem-yyQ":"yy??Q??","timeFormat-full":"zzzzah?mm?ss?","field-day-relative+0":"??","field-day-relative+1":"??","field-day-relative+2":"??","dateFormatItem-H":"H?","months-standAlone-abbr":["??","??","??","??","??","??","??","??","??","??","???","???"],"quarters-format-abbr":["1?","2?","3?","4?"],
"quarters-standAlone-wide":["?1??","?2??","?3??","?4??"],"dateFormatItem-M":"L","days-standAlone-wide":["???","???","???","???","???","???","???"],"dateFormatItem-yyMMM":"yy?MMM","timeFormat-medium":"ah:mm:ss","dateFormatItem-Hm":"H:mm","quarters-standAlone-abbr":["1?","2?","3?","4?"],"eraAbbr":["???","??"],"field-minute":"??","field-dayperiod":"??/??","days-standAlone-abbr":["??","??","??","??","??","??","??"],"dayPeriods-format-wide-night":"??","dateFormatItem-d":"d?","dateFormatItem-ms":"mm:ss",
"field-day-relative+-1":"??","dateFormatItem-h":"ah","dateTimeFormat-long":"{1}{0}","field-day-relative+-2":"??","dateFormatItem-MMMd":"MMMd?","dayPeriods-format-wide-midDay":"??","dateFormatItem-MEd":"M-dE","dateTimeFormat-full":"{1}{0}","field-day":"?","days-format-wide":["???","???","???","???","???","???","???"],"field-zone":"??","dateFormatItem-y":"y?","months-standAlone-narrow":["1?","2?","3?","4?","5?","6?","7?","8?","9?","10?","11?","12?"],"dateFormatItem-yyMM":"yy-MM","dateFormatItem-hm":"ah:mm",
"days-format-abbr":["??","??","??","??","??","??","??"],"dateFormatItem-yMMMd":"y?MMMd?","eraNames":["???","??"],"days-format-narrow":["?","?","?","?","?","?","?"],"field-month":"?","days-standAlone-narrow":["?","?","?","?","?","?","?"],"dateFormatItem-MMM":"LLL","dayPeriods-format-wide-am":"??","dateFormatItem-MMMMdd":"MMMMdd?","dayPeriods-format-wide-weeHours":"??","dateFormat-short":"yy-M-d","dayPeriods-format-wide-afternoon":"??","field-second":"??","dateFormatItem-yMMMEd":"y?MMMd?EEE","dateFormatItem-Ed":"d?E",
"field-week":"?","dateFormat-medium":"yyyy-M-d","dateFormatItem-yyyyM":"y?M?","dateTimeFormat-short":"{1} {0}","dateFormatItem-Hms":"H:mm:ss","dateFormatItem-hms":"ah:mm:ss","dateFormatItem-yyyy":"y?","quarters-standAlone-narrow":["1","2","3","4"],"dateTimeFormats-appendItem-Day-Of-Week":"{0} {1}","dateFormatItem-EEEd":"d EEE","dayPeriods-format-abbr-am":"AM","dateTimeFormats-appendItem-Second":"{0} ({2}: {1})","dateTimeFormats-appendItem-Era":"{0} {1}","dateTimeFormats-appendItem-Week":"{0} ({2}: {1})",
"quarters-format-narrow":["1","2","3","4"],"dayPeriods-format-narrow-am":"AM","dateTimeFormats-appendItem-Day":"{0} ({2}: {1})","dateTimeFormats-appendItem-Year":"{0} {1}","dateTimeFormats-appendItem-Hour":"{0} ({2}: {1})","dayPeriods-format-abbr-pm":"PM","dateTimeFormats-appendItem-Quarter":"{0} ({2}: {1})","dateTimeFormats-appendItem-Month":"{0} ({2}: {1})","dateTimeFormats-appendItem-Minute":"{0} ({2}: {1})","dateTimeFormats-appendItem-Timezone":"{0} {1}","dayPeriods-format-narrow-pm":"PM"};dojo.provide("dojo.nls.dojo_zh-tw");
dojo.provide("dijit.nls.common.zh_tw");dijit.nls.common.zh_tw={"buttonOk":"??","buttonCancel":"??","buttonSave":"??","itemClose":"??"};dojo.provide("dojo.cldr.nls.gregorian.zh_tw");dojo.cldr.nls.gregorian.zh_tw={"dateFormatItem-yM":"yyyy/M","field-minute":"??","eraNames":["???","??"],"field-weekday":"??","dateFormatItem-MMdd":"MM/dd","field-day-relative+-3":"???","field-relative-day":"???","months-standAlone-narrow":["1","2","3","4","5","6","7","8","9","10","11","12"],"field-era":"??","field-hour":"??",
"quarters-standAlone-abbr":["?1?","?2?","?3?","?4?"],"timeFormat-full":"zzzzah?mm?ss?","months-standAlone-abbr":["1?","2?","3?","4?","5?","6?","7?","8?","9?","10?","11?","12?"],"dateFormatItem-Ed":"d?(E)","dateFormatItem-yMMM":"y?M?","eraAbbr":["???","??"],"field-day-relative+2":"??","field-day-relative+3":"???","timeFormat-medium":"ah:mm:ss","field-zone":"??","dateFormatItem-yyMM":"yy-MM","dateFormat-medium":"yyyy/M/d","quarters-standAlone-wide":["?1?","?2?","?3?","?4?"],"dateFormatItem-yMMMM":"y?M?",
"dateFormatItem-HHmmss":"H:mm:ss","months-standAlone-wide":["1?","2?","3?","4?","5?","6?","7?","8?","9?","10?","11?","12?"],"field-week":"?","dateFormatItem-HHmm":"H:mm","timeFormat-long":"zah?mm?ss?","dateFormatItem-H":"H?","quarters-format-abbr":["?1?","?2?","?3?","?4?"],"days-format-abbr":["??","??","??","??","??","??","??"],"field-second":"?","dateFormatItem-MEd":"M/d(E)","months-format-narrow":["1","2","3","4","5","6","7","8","9","10","11","12"],"days-standAlone-abbr":["??","??","??","??","??",
"??","??"],"dateFormat-short":"yy/M/d","dateFormatItem-yMMMEd":"y?M?d?EEE","dateFormatItem-Md":"M/d","dateFormatItem-yMEd":"yyyy/M/d(EEE)","dateTimeAvailableFormats":["d?(E)","H:mm","H:mm:ss","M-d(E)","MM/dd","M/d","yyyy/M","yyyy/M/d(EEE)","yyyy?M?","yyyy?M?","yyyy/MM","MMMMdd?","MMMd?","MM-dd","M-d","d?","mm:ss","mm:ss","yyyy?","yyyy-M","yyyy?M?d?,E","yyyy?MMM","yyyy?MMMd?EEE","yyyy?MMMM","yyyy?QQQ","y?QQQ","yy-MM","yy?MMM","yy??Q??","yyyy?","yyyy?M?","yyyy?MMMM"],"quarters-format-wide":["?1?","?2?",
"?3?","?4?"],"eraNarrow":["???","??"],"dateFormatItem-yQQQ":"y?QQQ","dateFormatItem-MMMEd":"MMMd?E","dayPeriods-format-wide-earlyMorning":"??","dayPeriods-format-wide-morning":"??","dateFormat-long":"y?M?d?","months-format-wide":["1?","2?","3?","4?","5?","6?","7?","8?","9?","10?","11?","12?"],"dateTimeFormat-medium":"{1} {0}","dayPeriods-format-wide-pm":"??","dateFormat-full":"y?M?d?EEEE","timeFormat-short":"ah:mm","field-year":"?","dateFormatItem-yQ":"y?QQQ","dateFormatItem-yyyyMMMM":"y?MMMM","months-format-abbr":["1?",
"2?","3?","4?","5?","6?","7?","8?","9?","10?","11?","12?"],"dateFormatItem-yyQ":"yy??Q??","field-day-relative+0":"??","field-day-relative+1":"??","dateFormatItem-M":"L","days-standAlone-wide":["???","???","???","???","???","???","???"],"dateFormatItem-yyMMM":"yy?MMM","dateFormatItem-Hm":"H:mm","field-dayperiod":"??/??","dayPeriods-format-wide-night":"??","dateFormatItem-d":"d?","dateFormatItem-ms":"mm:ss","field-day-relative+-1":"??","dateFormatItem-h":"ah","dateTimeFormat-long":"{1}{0}","field-day-relative+-2":"??",
"dateFormatItem-MMMd":"MMMd?","dayPeriods-format-wide-midDay":"??","dateTimeFormat-full":"{1}{0}","field-day":"?","days-format-wide":["???","???","???","???","???","???","???"],"dateFormatItem-y":"y?","dateFormatItem-hm":"ah:mm","dateFormatItem-yMMMd":"y?MMMd?","days-format-narrow":["?","?","?","?","?","?","?"],"field-month":"?","days-standAlone-narrow":["?","?","?","?","?","?","?"],"dateFormatItem-MMM":"LLL","dayPeriods-format-wide-am":"??","dateFormatItem-MMMMdd":"MMMMdd?","dayPeriods-format-wide-weeHours":"??",
"dayPeriods-format-wide-afternoon":"??","dateFormatItem-yyyyM":"y?M?","dateTimeFormat-short":"{1} {0}","dateFormatItem-Hms":"H:mm:ss","dateFormatItem-hms":"ah:mm:ss","dateFormatItem-yyyy":"y?","quarters-standAlone-narrow":["1","2","3","4"],"dateTimeFormats-appendItem-Day-Of-Week":"{0} {1}","dateFormatItem-EEEd":"d EEE","dayPeriods-format-abbr-am":"AM","dateTimeFormats-appendItem-Second":"{0} ({2}: {1})","dateTimeFormats-appendItem-Era":"{0} {1}","dateTimeFormats-appendItem-Week":"{0} ({2}: {1})",
"quarters-format-narrow":["1","2","3","4"],"dayPeriods-format-narrow-am":"AM","dateTimeFormats-appendItem-Day":"{0} ({2}: {1})","dateTimeFormats-appendItem-Year":"{0} {1}","dateTimeFormats-appendItem-Hour":"{0} ({2}: {1})","dayPeriods-format-abbr-pm":"PM","dateTimeFormats-appendItem-Quarter":"{0} ({2}: {1})","dateTimeFormats-appendItem-Month":"{0} ({2}: {1})","dateTimeFormats-appendItem-Minute":"{0} ({2}: {1})","dateTimeFormats-appendItem-Timezone":"{0} {1}","dayPeriods-format-narrow-pm":"PM"};if(dojo.isBrowser&&
(document.readyState==="complete"||dojo.config.afterOnLoad))window.setTimeout(dojo._loadInit,100)})();ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions");ITHit.oNS.AjaxFileBrowserException=function(sMessage,oInnerException){ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions.AjaxFileBrowserException.baseConstructor.call(this,sMessage,oInnerException)};ITHit.Extend(ITHit.oNS.AjaxFileBrowserException,ITHit.Exception);ITHit.oNS.AjaxFileBrowserException.prototype.Name="AjaxFileBrowserException";
ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions");ITHit.oNS.InvalidConfigException=function(sMessage,oInnerException){ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions.InvalidConfigException.baseConstructor.call(this,sMessage,oInnerException)};ITHit.Extend(ITHit.oNS.InvalidConfigException,ITHit.oNS.AjaxFileBrowserException);ITHit.oNS.InvalidConfigException.prototype.Name="InvalidConfigException";ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser");
ITHit.oNS.UrlUtils=function(sUrl){var oNsCl=ITHit.WebDAV.Client;var oNsUrlUtils=oNsCl.AjaxFileBrowser.UrlUtils;if(!sUrl)throw new ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions.AjaxFileBrowserException(ITHit.Phrases.AjaxFileBrowser.Exceptions.WrongBaseUrl.Paste(String(sUrl)));oNsUrlUtils.CheckUrlSchema(sUrl);var sUrl=ITHit.WebDAV.Client.Encoder.Decode(sUrl.replace(/\/?$/,"/"));this.BasePath=oNsUrlUtils.GetRelativePath(sUrl);this.Host=oNsUrlUtils.GetHost(sUrl)};
ITHit.oNS.UrlUtils.CheckUrlSchema=function(sUrl){if(!/^http[s]?:\/\/(?:[^\/]+[\/]?)*$/.test(sUrl))throw new ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions.AjaxFileBrowserException(ITHit.Phrases.AjaxFileBrowser.Exceptions.WrongBaseUrl.Paste(String(sUrl)));};
ITHit.oNS.UrlUtils.GetHost=function(sUrl){var aResults=sUrl.match(/^(http[s]?:\/\/[^\/]+)/);if(!aResults)throw new ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions.AjaxFileBrowserException(ITHit.Phrases.AjaxFileBrowser.Exceptions.WrongBaseUrl.Paste(String(sUrl)));return aResults[0]+"/"};
ITHit.oNS.UrlUtils.prototype.CheckUrlAgainstBase=function(sUrl,bSuppressException){return true;if(0!==sUrl.indexOf(this.BasePath))if(!bSuppressException)throw new ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions.AjaxFileBrowserException(ITHit.Phrases.AjaxFileBrowser.Exceptions.WrongUrl.Paste(sUrl));else return false;return true};
ITHit.oNS.UrlUtils.GetRelativePath=function(sUrl,sCurrentPath){if(/^http[s]?:/.test(sUrl))sUrl=sUrl.replace(/^http[s]?:\/\/[^\/]+\/?/,"/");if(ITHit.Utils.IsUndefined(sCurrentPath))return sUrl;else return ITHit.WebDAV.ClientAjaxFileBrowser.UrlUtils.GetRelativePath(sUrl)+sCurrentPath};ITHit.oNS.UrlUtils.prototype.GetRelativePath=ITHit.oNS.UrlUtils.GetRelativePath;
ITHit.oNS.UrlUtils.prototype.GetAbsolutePath=function(sUrl){if(/https?:\/\//.test(sUrl))return sUrl;var oNsBrowser=ITHit.WebDAV.Client.AjaxFileBrowser;if(!/^\//.test(sUrl))throw new oNsBrowser.Exceptions.AjaxFileBrowserException(ITHit.Phrases.AjaxFileBrowser.Exceptions.WrongUrl.Paste(sUrl));return this.Host+oNsBrowser.UrlUtils.GetRelativePath(sUrl).substr(1)};
ITHit.oNS.UrlUtils.GetFileName=function(sUrl){var iLastSlash=sUrl.lastIndexOf("/"),iLastBackslash=sUrl.lastIndexOf("\\"),sFileName=sUrl;if(-1!=iLastSlash)sFileName=sFileName.substr(iLastSlash+1);else if(-1!=iLastBackslash)sFileName=sFileName.substr(iLastBackslash+1);return sFileName};ITHit.oNS.UrlUtils.GetDirName=function(sUrl){var iPos=sUrl.lastIndexOf("/")+1||sUrl.lastIndexOf("\\")+1;if(iPos)return sUrl.substr(0,iPos);return sUrl};
ITHit.oNS.UrlUtils.IsAbsolutePath=function(sUrl){if(/https?:\/\//.test(sUrl))return true;return false};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser");
ITHit.oNS.Utils={FixPNG:function(element){var src,onload;if(/MSIE (5\.5|6).+Win/.test(navigator.userAgent)){if(element.tagName=="IMG"){if(/\.png$/.test(element.src)){if(element.onload){onload=element.onload;element.onload=null}src=element.src;element.src=ITHit.WebDAV.Client.AjaxFileBrowser.Utils.GetBlankGifPath()}}else{src=element.currentStyle.backgroundImage.match(/url\("(.+\.png)"\)/i);if(src){src=src[1];element.runtimeStyle.backgroundImage="none"}}if(src){if(onload){var timer=setTimeout(function(){ITHit.WebDAV.Client.AjaxFileBrowser.Controller.IconNotFound(element)},
300);element.onfilterchange=function(event){clearTimeout(timer);onload(event)}}element.runtimeStyle.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+src+"',sizingMethod='scale')"}}},GetBlankGifPath:function(){return"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="}};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser");
ITHit.oNS.FileFormats={ProtectedExtentions:[],MsOfficeEditExtensions:["docx","doc","docm","dot","dotm","dotx","odt","xltx","xltm","xlt","xlsx","xlsm","xlsb","xls","xll","xlam","xla","ods","pptx","pptm","ppt","ppsx","ppsm","pps","ppam","ppa","potx","potm","pot","odp","accdb","mdb","xsn","xsf","pub","vstx","vstm","vst","vssx","vssm","vssm","vss","vsl","vsdx","vsdm","vsd","vdw","mpp","mpt"]};
ITHit.WebDAV.Client.AjaxFileBrowser.HierarchyItem=function(oHierItem){this.DisplayName=oHierItem.DisplayName;this.Href=ITHit.WebDAV.Client.AjaxFileBrowser.UrlUtils.GetRelativePath(ITHit.WebDAV.Client.Encoder.Decode(oHierItem.Href));this.ResourceType=oHierItem.ResourceType;this.CreationDate=oHierItem.CreationDate;this.LastModified=oHierItem.LastModified;this.Item=oHierItem;if(oHierItem instanceof ITHit.WebDAV.Client.Folder)this.Href=this.Href.replace(/\/?$/,"/")};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser");
ITHit.oNS.Folder=function(oFolder){var oNsBrowser=ITHit.WebDAV.Client.AjaxFileBrowser;if(!(oFolder instanceof ITHit.WebDAV.Client.Folder))throw new oNsBrowser.Exception("ITHit.WebDAV.Client.Folder class instance expected.");oNsBrowser.Folder.baseConstructor.call(this,oFolder)};ITHit.Extend(ITHit.oNS.Folder,ITHit.oNS.HierarchyItem);ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser");
ITHit.oNS.Resource=function(oResource){var oNsBrowser=ITHit.WebDAV.Client.AjaxFileBrowser;if(!(oResource instanceof ITHit.WebDAV.Client.Resource))throw new oNsBrowser.Exception("ITHit.WebDAV.Client.Resource class instance expected.");oNsBrowser.Resource.baseConstructor.call(this,oResource);this.ContentLength=oResource.ContentLength};ITHit.Extend(ITHit.oNS.Resource,ITHit.oNS.HierarchyItem);ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser");
ITHit.oNS.Filter=function(oController,sCollection,bShowFolders){this._Controller=oController;this._Collection=sCollection;this.ShowFolders=bShowFolders||false;this._FileExtensions={only:{},except:{}};this._FileFilterFlag=0;this._ClassId="ITHit.WebDAV.Client.AjaxFileBrowser.Filter_"+ITHit.WebDAV.Client.AjaxFileBrowser.Filter._Counter++};ITHit.oNS.Filter._Counter=0;ITHit.oNS.Filter.prototype.ShowFolders=function(bShowFolders){this.ShowFolders=bShowFolders||false};
ITHit.oNS.Filter.prototype.SetShowOnlyFileExtensions=function(mFileExt){this._FileExtensions.only={};if(!mFileExt){this._FileFilterFlag=0;return}this.SetShowExceptFileExtensions();var aFileExt=ITHit.Utils.IsArray(mFileExt)?mFileExt:[mFileExt];for(var i=0,l=aFileExt.length;i<l;i++){if(!ITHit.Utils.IsUndefined(this._FileExtensions.only[aFileExt[i]]))continue;this._FileExtensions.only[aFileExt[i]]=true}this._FileFilterFlag=1};
ITHit.oNS.Filter.prototype.GetShowOnlyFileExtensions=function(){var aOut=[];for(var sExt in this._FileExtensions.only)aOut.push(sExt);return aOut};
ITHit.oNS.Filter.prototype.SetShowExceptFileExtensions=function(mFileExt){this._FileExtensions.except={};if(!mFileExt){this._FileFilterFlag=0;return}this.SetShowOnlyFileExtensions();var aFileExt=ITHit.Utils.IsArray(mFileExt)?mFileExt:[mFileExt];for(var i=0,l=aFileExt.length;i<l;i++){if(!ITHit.Utils.IsUndefined(this._FileExtensions.except[aFileExt[i]]))continue;this._FileExtensions.except[aFileExt[i]]=true}this._FileFilterFlag=2};
ITHit.oNS.Filter.prototype.GetShowExceptFileExtensions=function(){var aOut=[];for(var sExt in this._FileExtensions.except)aOut.push(sExt);return aOut};
ITHit.oNS.Filter.prototype.Run=function(aItems){var oFilteredItems={"Folders":[],"Resources":[],ShowFolders:this.ShowFolders};if(aItems)for(var i=0;i<aItems.length;i++)if(aItems[i].ResourceType!=this._Collection){if(this.FileCheck(aItems[i].DisplayName)){if(!(aItems[i]instanceof ITHit.WebDAV.Client.AjaxFileBrowser.Resource))aItems[i]=new ITHit.WebDAV.Client.AjaxFileBrowser.Resource(aItems[i]);oFilteredItems["Resources"].push(aItems[i])}}else{if(!(aItems[i]instanceof ITHit.WebDAV.Client.AjaxFileBrowser.Folder))aItems[i]=
new ITHit.WebDAV.Client.AjaxFileBrowser.Folder(aItems[i]);oFilteredItems["Folders"].push(aItems[i])}var func=function(a,b){return a.DisplayName.localeCompare(b.DisplayName)};oFilteredItems.Folders.sort(func);oFilteredItems.Resources.sort(func);return oFilteredItems};
ITHit.oNS.Filter.prototype.FileCheck=function(sFileName){switch(this._FileFilterFlag){case 0:return true;case 1:var sExt=sFileName.substr(sFileName.lastIndexOf(".")+1);return this._FileExtensions.only[sExt]||false;case 2:var sExt=sFileName.substr(sFileName.lastIndexOf(".")+1);return!this._FileExtensions.except[sExt]}};ITHit.oNS.Filter.prototype.toString=function(){return this._ClassId};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser");ITHit.oNS.CodeConstructor=function(){};
ITHit.oNS.CodeConstructor._ElementsBinderCounter=0;ITHit.oNS.CodeConstructor._FunctionsBinderList={};ITHit.oNS.CodeConstructor.RestoreBindedFunctions=function(){var oBinders=ITHit.WebDAV.Client.AjaxFileBrowser.CodeConstructor._FunctionsBinderList;var oNsDojo=ITHit.Components.dojo;for(var sElementId in oBinders){if(!oBinders.hasOwnProperty(sElementId))continue;for(var sProp in oBinders[sElementId])oNsDojo.connect(oNsDojo.byId(sElementId),sProp.toLowerCase(),oBinders[sElementId][sProp])}oBinders={}};
ITHit.oNS.CodeConstructor.CreateHTML=function(oLinks,mStruct,oToIgnore,sTab,oReplaceChildProps){sTab=sTab||"";oToIgnore=oToIgnore||{};var html=[];if(!ITHit.Utils.IsArray(mStruct))mStruct=[mStruct];for(var i=0,l=mStruct.length;i<l;i++){var oJS=mStruct[i];for(var sElem in oJS){if(!ITHit.Utils.IsUndefined(Object[sElem]))continue;var bClose=true;switch(sElem){case "img":case "hr":case "br":case "frame":case "input":bClose=false}var sTagName=sElem.toLowerCase();var aNodeData=ITHit.WebDAV.Client.AjaxFileBrowser.CodeConstructor._ParseParams(oLinks,
oJS[sElem],oToIgnore,sTab,oReplaceChildProps);if("emptyElement"!=sElem)if(bClose)html.push([sTab,"<",sTagName," ",aNodeData.props.join(" "),">\n",aNodeData.childNodes.join("\n"),"\n",sTab,"</",sTagName,">"].join(""));else html.push([sTab,"<",sTagName," ",aNodeData.props.join(" ")," />"].join(""));else html.push(aNodeData.childNodes.join(" "))}}return html.join("\n")};
ITHit.oNS.CodeConstructor._ParseParams=function(oLinks,oParams,oToIgnore,sTab,oReplaceProps){sTab=sTab+"\t";oReplaceProps=oReplaceProps||{};var oNsCodeConstructor=ITHit.WebDAV.Client.AjaxFileBrowser.CodeConstructor;var oNsIsFunction=ITHit.Utils.IsFunction;var oNsUndefined=ITHit.Utils.IsUndefined;var aNodeData={props:[],childNodes:[]};for(var sProp in oParams){if(!oParams.hasOwnProperty(sProp))continue;var mParamValue=oParams[sProp];if(!oNsUndefined(oReplaceProps[sProp]))mParamValue=oReplaceProps[sProp];
switch(sProp){case "linkId":break;case "className":aNodeData.props.push('class="'+mParamValue+'"');break;case "style":if(!oNsUndefined(oParams.show)&&!oParams.show)mParamValue.display="none";aNodeData.props.push(sProp+'="'+oNsCodeConstructor.PrepareStyle(mParamValue).join(" ")+'"');break;case "show":if(oParams.style)break;if(!oParams.show)aNodeData.props.push('style="'+oNsCodeConstructor.PrepareStyle({display:"none"}).join(" ")+'"');break;case "label":if(oParams.ihDojoType&&"dijit.MenuItem"==oParams.ihDojoType&&
!oNsUndefined(oParams.text))break;aNodeData.props.push(sProp+'="'+String(mParamValue)+'"');break;case "text":if(oParams.ihDojoType&&"dijit.MenuItem"==oParams.ihDojoType){aNodeData.props.push('label="'+String(mParamValue)+'"');break}var sText=String(mParamValue).replace(/\|>/gm,"\n"+sTab);if(sText)aNodeData.childNodes.push(sTab+sText);break;case "tooltip":aNodeData.props.push('title="'+mParamValue+'"');break;case "title":aNodeData.props.push(sProp+'="'+mParamValue+'"');break;case "expression":aNodeData.props.push(mParamValue);
break;case "childNodes":for(var i=0,l=mParamValue.length;i<l;i++){var mChild=mParamValue[i];if(ITHit.Utils.IsObjectStrict(mChild)){var oReplaceChildProps={};if(0==i&&!oNsUndefined(oParams.text)&&mChild["span"])oReplaceChildProps.text=oParams.text;aNodeData.childNodes.push(oNsCodeConstructor.CreateHTML(oLinks,mChild,oToIgnore,sTab,oReplaceChildProps))}else aNodeData.childNodes.push(sTab+mChild)}break;case "innerHTML":aNodeData.childNodes.push(mParamValue);break;case "contextHelp":if(!oLinks["ContextHelp"]||
!oParams[sProp])continue;if(ITHit.Utils.IsUndefined(sElementId)){var sElementId=oParams.id;if(!sElementId)sElementId="ITHit_Element_"+oNsCodeConstructor._ElementsBinderCounter++}if(!oNsCodeConstructor._FunctionsBinderList[sElementId])oNsCodeConstructor._FunctionsBinderList[sElementId]={};oNsCodeConstructor._FunctionsBinderList[sElementId]["onMouseOver"]=ITHit.Utils.MakeScopeClosure(oLinks["ContextHelp"],"Show",[oParams[sProp],oParams["contextHelpIconClass"]]);oNsCodeConstructor._FunctionsBinderList[sElementId]["onMouseOut"]=
ITHit.Utils.MakeScopeClosure(oLinks["ContextHelp"],"Hide");break;case "dojoProps":var mProps=[];for(var key in mParamValue)if(mParamValue.hasOwnProperty(key))mProps.push(key+":'"+mParamValue[key]+"'");aNodeData.props.push('data-dojo-props="'+mProps.join(", ")+'"');break;case "dojoMixins":aNodeData.props.push('data-dojo-mixins="'+mParamValue.replace(/\./g,"/")+'"');break;default:if(!oNsIsFunction(mParamValue))aNodeData.props.push(sProp+'="'+mParamValue+'"');else{if(ITHit.Utils.IsUndefined(sElementId)){var sElementId=
oParams.id;if(!sElementId)sElementId="ITHit_Element_"+oNsCodeConstructor._ElementsBinderCounter++}if(!oNsCodeConstructor._FunctionsBinderList[sElementId])oNsCodeConstructor._FunctionsBinderList[sElementId]={};oNsCodeConstructor._FunctionsBinderList[sElementId][sProp]=mParamValue}}}return aNodeData};
ITHit.oNS.CodeConstructor.PrepareStyle=function(mStyle){if(ITHit.Utils.IsString(mStyle))return[mStyle];if(ITHit.Utils.IsObjectStrict(mStyle)){var aStyles=[];for(var sProp in mStyle)if(mStyle.hasOwnProperty(sProp))aStyles.push(sProp.replace(/([A-Z])/g,"-$1").toLowerCase()+": "+mStyle[sProp]+";");return aStyles}return[]};
ITHit.oNS.CodeConstructor.Clone=function(oObject,oContext,bFirstCharToLowerCase){var oNsUtils=ITHit.Utils;var oNsClone=ITHit.WebDAV.Client.AjaxFileBrowser.CodeConstructor.Clone;if(ITHit.Utils.IsArray(oObject)){var aNewArray=[];for(var i=0,l=oObject.length;i<l;i++)aNewArray.push(oNsClone(oObject[i]));return aNewArray}if(!oNsUtils.IsObject(oObject)||oNsUtils.IsNull(oObject))return oObject;var oCloned=oContext||{};for(var prop in oObject){if(!oObject.hasOwnProperty(prop))continue;var sNewProp=prop;if(bFirstCharToLowerCase)sNewProp=
sNewProp.substr(0,1).toLowerCase()+sNewProp.substr(1);switch(sNewProp){case "text":case "title":case "label":case "name":case "contextHelp":oCloned[sNewProp]=String(oObject[prop]);continue;case "tooltip":oCloned.title=oObject[prop];continue}if(!oNsUtils.IsObjectStrict(oObject[prop])||oNsUtils.IsDOMObject(oObject[prop]))oCloned[sNewProp]=oObject[prop];else oCloned[sNewProp]=oNsClone(oObject[prop],null,bFirstCharToLowerCase)}return oCloned};
ITHit.oNS.CodeConstructor.CloneGridColumnsModified=function(aColumns,oModify,userHandlerFormatter){var oNsCodeConstructor=ITHit.WebDAV.Client.AjaxFileBrowser.CodeConstructor;var oNsCloneModified=oNsCodeConstructor._CloneGridColumnsModified;var aUnorderedColumns=ITHit.WebDAV.Client.AjaxFileBrowser.CodeConstructor.Clone(aColumns);var aOrderedColumns=[];var bFormatterIsSet=userHandlerFormatter&&ITHit.Utils.IsFunction(userHandlerFormatter);if(oModify&&ITHit.Utils.IsArray(oModify.Columns)&&oModify.Columns.length){var oCreateOrModifyColumns=
oModify.Columns.concat();for(var i=0,l=oCreateOrModifyColumns.length;i<l;i++){var bFound=false;if(oCreateOrModifyColumns[i].Id)for(var j=0,jl=aUnorderedColumns.length;j<jl;j++)if(aUnorderedColumns[j].linkId==oCreateOrModifyColumns[i].Id){aUnorderedColumns[j]=oNsCloneModified(aUnorderedColumns[j],oCreateOrModifyColumns[i],userHandlerFormatter);bFound=true;break}if(!bFound){if(ITHit.Utils.IsUndefined(oCreateOrModifyColumns[i].Formatter)||!ITHit.Utils.IsFunction(oCreateOrModifyColumns[i].Formatter)||
!bFormatterIsSet){if(!oCreateOrModifyColumns[i].CustomProperty)oCreateOrModifyColumns[i].Formatter=function(){return""}}else oCreateOrModifyColumns[i].Formatter=userHandlerFormatter(oCreateOrModifyColumns[i].Formatter);aUnorderedColumns.push(oNsCloneModified({},oCreateOrModifyColumns[i],userHandlerFormatter))}}}if(oModify&&oModify.Order)for(var i=0,l=oModify.Order.length;i<l;i++)for(var j=0,jl=aUnorderedColumns.length;j<jl;j++)if(aUnorderedColumns[j].linkId&&aUnorderedColumns[j].linkId==oModify.Order[i]){aOrderedColumns.push(aUnorderedColumns[j]);
aUnorderedColumns.splice(j,1);break}aOrderedColumns=aOrderedColumns.concat(aUnorderedColumns);for(var i=0,l=aOrderedColumns.length;i<l;i++){if(aOrderedColumns[i].cellStyles)aOrderedColumns[i].cellStyles=oNsCodeConstructor.PrepareStyle(aOrderedColumns[i].cellStyles).join(" ");if(aOrderedColumns[i].headerStyles)aOrderedColumns[i].headerStyles=oNsCodeConstructor.PrepareStyle(aOrderedColumns[i].headerStyles).join(" ");if(aOrderedColumns[i].styles)aOrderedColumns[i].styles=oNsCodeConstructor.PrepareStyle(aOrderedColumns[i].styles).join(" ")}return aOrderedColumns};
ITHit.oNS.CodeConstructor._CloneGridColumnsModified=function(oColumn,oModify,userHandlerFormatter){var oNsUtils=ITHit.Utils;var oNsUndefined=oNsUtils.IsUndefined;var oNsCodeConstructor=ITHit.WebDAV.Client.AjaxFileBrowser.CodeConstructor;var oNsClone=oNsCodeConstructor.Clone;var oClonedColumn={};for(var prop in oColumn){if(!oColumn.hasOwnProperty(prop))continue;var sFCUProp=prop.substr(0,1).toUpperCase()+prop.substr(1);if(oNsUndefined(oModify[sFCUProp]))oClonedColumn[prop]=oColumn[prop];else if(!oNsUtils.IsObjectStrict(oModify[sFCUProp])||
oNsUtils.IsDOMObject(oModify[sFCUProp]))if("formatter"===prop&&oNsUtils.IsFunction(oModify[sFCUProp]))oClonedColumn[prop]=userHandlerFormatter(oModify[sFCUProp],oColumn[prop]);else oClonedColumn[prop]=oModify[sFCUProp];else oClonedColumn[prop]=oNsClone(oColumn[prop],oModify[sFCUProp])}for(var prop in oModify){if(!oModify.hasOwnProperty(prop))continue;switch(prop){case "Columns":case "Order":continue;case "Id":oClonedColumn.linkId=oModify.Id;continue;case "Show":if(oNsUndefined(oClonedColumn.styles)){if(!oModify.Show)oClonedColumn.styles=
{display:"none"}}else if(oModify.Show){if(oNsUndefined(oClonedColumn.styles.display))delete oClonedColumn.styles.display}else oClonedColumn.styles.display="none";continue;case "Text":oClonedColumn.name=String(oModify.Text);continue;case "Tooltip":oClonedColumn.title=oModify[prop];continue;case "Formatter":oClonedColumn.formatter=userHandlerFormatter(oModify.Formatter);continue;case "CellFormatter":oClonedColumn.cellFormatter=oModify.CellFormatter;continue}var sFCLProp=prop.substr(0,1).toLowerCase()+
prop.substr(1);if(!oNsUtils.IsObjectStrict(oModify[prop])||oNsUtils.IsDOMObject(oModify[prop]))oClonedColumn[sFCLProp]=oModify[prop];else oClonedColumn[sFCLProp]=oNsClone(oModify[prop],oModify[prop])}return oClonedColumn};
ITHit.oNS.CodeConstructor.CloneCodeModified=function(mObject,oModify){if(!oModify)return ITHit.WebDAV.Client.AjaxFileBrowser.CodeConstructor.Clone(mObject);var oNsCodeConstructor=ITHit.WebDAV.Client.AjaxFileBrowser.CodeConstructor;var oNsCloneCodeModified=oNsCodeConstructor.CloneCodeModified;var oNsUtils=ITHit.Utils;var oNsUndefined=oNsUtils.IsUndefined;var bChk=false;var oNew=oNsUtils.IsArray(mObject)?[]:{};if(!oNsUndefined(mObject.linkId))if(oNsUtils.IsArray(oModify))for(var i=0,l=oModify.length;i<
l;i++){if(!oNsUndefined(oModify[i].Id)&&oModify[i].Id==mObject.linkId){oModify=oModify[i];bChk=true;break}}else if(oNsUtils.IsObjectStrict(oModify))if(!oNsUndefined(oModify[mObject.linkId])){oModify=oModify[mObject.linkId];bChk=true}for(var prop in mObject){if(!mObject.hasOwnProperty(prop))continue;switch(prop){case "linkId":continue;case "name":case "text":case "title":case "label":case "tooltip":case "contextHelp":oNew[prop]=String(mObject[prop]);continue;case "childNodes":var aChildren=[];if(!bChk||
oNsUndefined(oModify["Order"]))aChildren=mObject[prop];else{var aUnordered=mObject[prop].concat();var bLoop=false;for(var i=0,il=oModify["Order"].length;i<il;i++){var bFound=false;unorderedSearch:for(var j=0,jl=aUnordered.length;j<jl;j++)for(var sElemProp in aUnordered[j]){if(!aUnordered[j].hasOwnProperty(sElemProp))continue;if(aUnordered[j][sElemProp].linkId==oModify["Order"][i]){aChildren.push(aUnordered[j]);aUnordered.splice(j,1);bFound=true;break unorderedSearch}}if(!bFound&&bChk&&oNsUtils.IsArray(oModify["Items"]))for(var k=
0,kl=oModify["Items"].length;k<kl;k++)if(!oNsUndefined(oModify["Items"][k].Id)&&oModify["Order"][i]&&oModify["Items"][k].Id==oModify["Order"][i]){var aNewElements=oNsCodeConstructor.CreateElement(oModify["Items"][k]);for(var j=0,jl=aNewElements.length;j<jl;j++)aChildren.push(aNewElements[j]);oModify["Items"].splice(k,1);break}}aChildren=aChildren.concat(aUnordered)}oNew[prop]=[];var mToChildren=oModify;if(bChk&&oNsUtils.IsArray(oModify["Items"]))mToChildren=oModify["Items"];for(var i=0,l=aChildren.length;i<
l;i++)oNew[prop].push(oNsCloneCodeModified(aChildren[i],mToChildren));if(bChk&&oNsUtils.IsArray(oModify["Items"]))for(var i=0,l=oModify["Items"].length;i<l;i++)if(oModify["Items"][i].Type||oModify["Items"][i].InnerHTML){var aNewElements=oNsCodeConstructor.CreateElement(oModify["Items"][i]);for(var j=0,jl=aNewElements.length;j<jl;j++)oNew[prop].push(aNewElements[j])}continue}if(!oNsUtils.IsObjectStrict(mObject[prop])||oNsUtils.IsDOMObject(mObject))oNew[prop]=mObject[prop];else oNew[prop]=oNsCloneCodeModified(mObject[prop],
oModify)}if(bChk){var bButtonElement=!oNsUtils.IsUndefined(mObject.ihDojoType)&&-1!=mObject.ihDojoType.indexOf(".Button");var bIsModifyTextUndefined=oNsUtils.IsUndefined(oModify.Text);if(bButtonElement&&(bIsModifyTextUndefined&&(oNsUtils.IsUndefined(oNew.text)||""===oNew.text)||!bIsModifyTextUndefined&&""===oModify.Text))oNew.showLabel=false;for(var prop in oModify){if(!oModify.hasOwnProperty(prop))continue;var sFCLProp=prop.substr(0,1).toLowerCase()+prop.substr(1);switch(prop){case "Items":case "Order":case "InnerHTML":continue;
case "Id":if(oNew.linkId)continue;case "Tooltip":oNew.title=oModify[prop];continue}if(!oNsUtils.IsObjectStrict(oModify[prop]||oNsUtils.IsDOMObject(oModify[prop])))oNew[sFCLProp]=oModify[prop];else oNew[sFCLProp]=oNsClone(oModify[prop])}}else if(!oNsUtils.IsUndefined(oNew.ihDojoType)&&-1!=oNew.ihDojoType.indexOf(".Button")&&(oNsUtils.IsUndefined(oNew.text)||""===oNew.text))oNew.showLabel=false;return oNew};
ITHit.oNS.CodeConstructor.CreateElement=function(oCode){var oNsClone=ITHit.WebDAV.Client.AjaxFileBrowser.CodeConstructor.Clone;oCode=oNsClone(oCode);var aNewElements=[];if(!oCode.Type&&!oCode.InnerHTML)throw new ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions.AjaxFileBrowserException("New element type is not passed.");if(oCode.InnerHTML){aNewElements.push({emptyElement:{innerHTML:oCode.InnerHTML}});return aNewElements}switch(oCode.Type){case "Button":aNewElements.push({});var iNewElementIndex=aNewElements.length-
1;var oElement=aNewElements[iNewElementIndex].button={};oElement.ihDojoType="dijit.form.Button";if(ITHit.Utils.IsUndefined(oCode.Text)||""===oCode.Text)oElement.showLabel=false;break;case "ToggleButton":aNewElements.push({});var iNewElementIndex=aNewElements.length-1;var oElement=aNewElements[iNewElementIndex].button={};oElement.ihDojoType="dijit.form.ToggleButton";if(ITHit.Utils.IsUndefined(oCode.Text)||""===oCode.Text)oElement.showLabel=false;break;default:throw new ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions.AjaxFileBrowserException('Passed unsupported element type: "'+
oCode.Type+'".');}delete oCode.Type;oNsClone(oCode,oElement,true);return aNewElements};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser");
ITHit.oNS.Control=function(oController,oElement,sId,sStyle,sClass,bDnDFilesSupported,interfaceHandler,oContextHelp){var oNsAjaxFileBrowser=ITHit.WebDAV.Client.AjaxFileBrowser,oNsInterfacePhrases=ITHit.Phrases.AjaxFileBrowser.Interface,oNsContextHelpPhrases=ITHit.Phrases.AjaxFileBrowser.ContextHelp.Commands,oNsViewModes=oNsAjaxFileBrowser.Render.ViewModes,oNsDojo=ITHit.Components.dojo,oNsButtonsPhrases=oNsInterfacePhrases.Buttons,oLinks={ContextHelp:oContextHelp};var iIndex=oController.GetIndex(),
sIdPrefix=oController._ElementsIdPrefix;this._ids={tree:"ithit_interface_foldersTree_"+iIndex,grid:"ithit_interface_grid_"+iIndex,upload:"ithit_interface_file_uploadInfo_"+iIndex};var sizer=document.createElement("div");sizer.className="resizeGrip";oElement.appendChild(sizer);var defaultSizerWidth=5;var sizerWidth;if(sizer){sizerWidth=window.getComputedStyle?window.getComputedStyle(sizer).getPropertyValue("width"):sizer.currentStyle?sizer.currentStyle["width"]:defaultSizerWidth;if(sizerWidth===""||
sizerWidth==="auto")sizerWidth=defaultSizerWidth;else{sizerWidth=parseInt(sizerWidth,10);if(sizerWidth>defaultSizerWidth)sizerWidth=defaultSizerWidth}}else sizerWidth=defaultSizerWidth;sizer.parentNode.removeChild(sizer);var oToIgnore={};var oControlCode={div:{expression:(sId?' id="'+sId+iIndex+'"':"")+' class="'+(sClass?sClass+" ":"")+'"'+(' style="'+(sStyle?sStyle:"width:100%; height:100%;")+'"'),childNodes:[{div:{id:"ithit_interface_content_container_"+iIndex,ihDojoType:"dijit.layout.LayoutContainer",
className:"ithitAjaxFileBrowser positionRelative dnd_target",ondragover:"ITHit.WebDAV.Client.AjaxFileBrowser.Controller.OnDragOverHandler(event);  ITHit.Components.dojo.stopEvent(event);",ondragenter:"ITHit.WebDAV.Client.AjaxFileBrowser.Controller.OnDragEnterHandler(event);  ITHit.Components.dojo.stopEvent(event);",ondragleave:"ITHit.WebDAV.Client.AjaxFileBrowser.Controller.OnDragLeaveHandler(event);  ITHit.Components.dojo.stopEvent(event);",ondrop:"ITHit.WebDAV.Client.AjaxFileBrowser.Controller.OnFilesDropHandler(ITHit.Components.dojo.fixEvent(event),"+
iIndex+");  ITHit.Components.dojo.stopEvent(event);",oncontextmenu:function(e){if(ITHit.WebDAV.Client.AjaxFileBrowser.Render.RenderController.isFormFieldTarget(e))return true;ITHit.Events.Stop(e)},style:{width:"100%",height:"100%"},childNodes:[{div:{linkId:"Toolbar",ihDojoType:"dijit.Toolbar",layoutAlign:"top",childNodes:[{button:{linkId:"ViewsButton",id:"ithit_interface_selectView_"+iIndex,ihDojoType:"dijit.form.DropDownButton",iconClass:"iconView",tooltip:oNsButtonsPhrases.Views,contextHelp:oNsContextHelpPhrases.Views,
contextHelpIconClass:"contextIconView",childNodes:[{script:{type:"dojo/method",event:"_onDropDownClick",text:"ITHit.oNS.Render.MenuController.RefreshCheckedViewState("+iIndex+");"}},{span:{text:oNsButtonsPhrases.Views}},{ul:{ihDojoType:"dijit.Menu",className:"view_menu_container",childNodes:[{div:{id:iIndex+"menuElargeIcons",linkId:"ELV",ihDojoType:"dijit.MenuItem",label:oNsButtonsPhrases.ExtraLargeIcons,contextHelp:oNsContextHelpPhrases.ViewsExtraLarge,contextHelpIconClass:"contextIconViewExtraLarge",
onclick:"ITHit.WebDAV.Client.AjaxFileBrowser.Controller.ChangeView("+iIndex+", '"+oNsViewModes.ExtraLarge+"');"}},{div:{id:iIndex+"menuLargeIcons",linkId:"LIV",ihDojoType:"dijit.MenuItem",label:oNsButtonsPhrases.LargeIcons,contextHelp:oNsContextHelpPhrases.ViewsLarge,contextHelpIconClass:"contextIconViewLarge",onclick:"ITHit.WebDAV.Client.AjaxFileBrowser.Controller.ChangeView("+iIndex+", '"+oNsViewModes.Large+"');"}},{div:{id:iIndex+"menuMediumIcons",linkId:"MIV",ihDojoType:"dijit.MenuItem",label:oNsButtonsPhrases.MediumIcons,
contextHelp:oNsContextHelpPhrases.ViewsMedium,contextHelpIconClass:"contextIconViewMedium",onclick:"ITHit.WebDAV.Client.AjaxFileBrowser.Controller.ChangeView("+iIndex+", '"+oNsViewModes.Medium+"');"}},{div:{id:iIndex+"menuDetailsView",linkId:"DV",ihDojoType:"dijit.MenuItem",label:oNsButtonsPhrases.Details,contextHelp:oNsContextHelpPhrases.ViewsDetails,contextHelpIconClass:"contextIconViewDetails",onclick:"ITHit.WebDAV.Client.AjaxFileBrowser.Controller.ChangeView("+iIndex+", '"+oNsViewModes.Details+
"');"}}]}}]}},{button:{linkId:"FoldersButton",id:"ithit_interface_folders_"+iIndex,ihDojoType:"dijit.form.ToggleButton",checked:true,iconClass:"iconFolders",text:oNsButtonsPhrases.Folders,tooltip:oNsButtonsPhrases.Folders,contextHelp:oNsContextHelpPhrases.Folders,contextHelpIconClass:"contextIconFolders",childNodes:[{script:{type:"dojo/method",event:"onClick",text:"ITHit.WebDAV.Client.AjaxFileBrowser.Controller.ToggleTreeView("+iIndex+");"}}]}},{button:{linkId:"UpButton",id:"ithit_interface_up_"+
iIndex,ihDojoType:"dijit.form.Button",iconClass:"iconUp",text:oNsButtonsPhrases.Up,tooltip:oNsButtonsPhrases.Up,contextHelp:oNsContextHelpPhrases.Up,contextHelpIconClass:"contextIconUp",childNodes:[{script:{type:"dojo/method",event:"onClick",args:"event",text:"ITHit.WebDAV.Client.AjaxFileBrowser.Controller.OpenParentFolder(event, "+iIndex+");"}}]}},{button:{linkId:"RefreshButton",id:"ithit_interface_refresh_"+iIndex,ihDojoType:"dijit.form.Button",iconClass:"iconRefresh",tooltip:oNsButtonsPhrases.Refresh,
contextHelp:oNsContextHelpPhrases.Refresh,contextHelpIconClass:"contextIconRefresh",childNodes:[{script:{type:"dojo/method",event:"onClick",args:"event",text:"ITHit.WebDAV.Client.AjaxFileBrowser.Controller.InterfaceHandler(event, "+iIndex+", 'Refresh');"}}]}},{separator:{ihDojoType:"dijit.ToolbarSeparator",linkId:"Separator1"}},{button:{linkId:"UploadButton",id:"ithit_interface_upload_"+iIndex,ihDojoType:"dijit.form.Button",iconClass:"iconUpload",tooltip:oNsInterfacePhrases.Buttons.Upload,contextHelp:oNsContextHelpPhrases.Upload,
contextHelpIconClass:"contextIconUpload",childNodes:[{script:{type:"dojo/method",event:"onClick",args:"event",text:"ITHit.WebDAV.Client.AjaxFileBrowser.Controller.InterfaceHandler(event, "+iIndex+", 'Upload');"}}]}},{button:{linkId:"UploadFolderButton",id:"ithit_interface_upload_folder"+iIndex,ihDojoType:"dijit.form.Button",iconClass:"iconUploadFolder",tooltip:oNsInterfacePhrases.Buttons.UploadFolder,contextHelp:oNsContextHelpPhrases.UploadFolder,contextHelpIconClass:"contextIconUploadFolder",childNodes:[{script:{type:"dojo/method",
event:"onClick",args:"event",text:"ITHit.WebDAV.Client.AjaxFileBrowser.Controller.InterfaceHandler(event, "+iIndex+", 'UploadFolder');"}}]}},{button:{linkId:"NewFolderButton",id:"ithit_interface_new_folder_"+iIndex,ihDojoType:"dijit.form.Button",iconClass:"iconNewFolder",tooltip:oNsInterfacePhrases.Buttons.NewFolder,contextHelp:oNsContextHelpPhrases.NewFolder,contextHelpIconClass:"contextIconNewFolder",childNodes:[{script:{type:"dojo/method",event:"onClick",args:"event",text:"ITHit.WebDAV.Client.AjaxFileBrowser.Controller.InterfaceHandler(event, "+
iIndex+", 'NewFolder');"}}]}},{button:{linkId:"DownloadButton",id:"ithit_interface_download_"+iIndex,ihDojoType:"dijit.form.Button",iconClass:"iconDownload",tooltip:oNsButtonsPhrases.Download,contextHelp:oNsContextHelpPhrases.Download,contextHelpIconClass:"contextIconDownload",disabled:true,childNodes:[{script:{type:"dojo/method",event:"onClick",args:"event",text:"ITHit.WebDAV.Client.AjaxFileBrowser.Controller.InterfaceHandler(event, "+iIndex+", 'Download');"}}]}},{button:{linkId:"EditButton",id:"ithit_interface_edit_"+
iIndex,ihDojoType:"dijit.form.Button",iconClass:"iconEdit",tooltip:oNsInterfacePhrases.Buttons.Edit,contextHelp:oNsContextHelpPhrases.Edit,contextHelpIconClass:"contextIconEdit",disabled:true,childNodes:[{script:{type:"dojo/method",event:"onClick",args:"event",text:"ITHit.WebDAV.Client.AjaxFileBrowser.Controller.InterfaceHandler(event, "+iIndex+", 'Edit');"}}]}},{button:{linkId:"FileManagerButton",id:"ithit_interface_file_manager_"+iIndex,ihDojoType:"dijit.form.Button",iconClass:"iconFileManager",
tooltip:oNsInterfacePhrases.Buttons.FileManager,contextHelp:oNsContextHelpPhrases.FileManager,contextHelpIconClass:"contextIconFileManager",childNodes:[{script:{type:"dojo/method",event:"onClick",args:"event",text:"ITHit.WebDAV.Client.AjaxFileBrowser.Controller.InterfaceHandler(event, "+iIndex+", 'FileManager');"}}]}},{button:{linkId:"VersionsButton",id:"ithit_interface_versions_"+iIndex,ihDojoType:"dijit.form.Button",iconClass:"iconVersions",tooltip:oNsInterfacePhrases.Buttons.Versions,contextHelp:oNsContextHelpPhrases.Versions,
contextHelpIconClass:"contextIconVersions",disabled:true,childNodes:[{script:{type:"dojo/method",event:"onClick",args:"event",text:"ITHit.WebDAV.Client.AjaxFileBrowser.Controller.InterfaceHandler(event, "+iIndex+", 'Versions');"}}]}},{button:{linkId:"CustomPropButton",id:"ithit_interface_custom_prop_"+iIndex,ihDojoType:"dijit.form.Button",iconClass:"iconCustomProp",tooltip:oNsInterfacePhrases.Buttons.CustomProp,contextHelp:oNsContextHelpPhrases.CustomProp,contextHelpIconClass:"contextIconCustomProp",
disabled:true,childNodes:[{script:{type:"dojo/method",event:"onClick",args:"event",text:"ITHit.WebDAV.Client.AjaxFileBrowser.Controller.InterfaceHandler(event, "+iIndex+", 'CustomProp');"}}]}},{separator:{ihDojoType:"dijit.ToolbarSeparator",linkId:"Separator1"}},{button:{linkId:"DeleteButton",id:"ithit_interface_delete_"+iIndex,ihDojoType:"dijit.form.Button",iconClass:"iconDelete",tooltip:oNsInterfacePhrases.Buttons.Delete,contextHelp:oNsContextHelpPhrases.Delete,contextHelpIconClass:"contextIconDelete",
disabled:true,childNodes:[{script:{type:"dojo/method",event:"onClick",args:"event",text:"ITHit.WebDAV.Client.AjaxFileBrowser.Controller.InterfaceHandler(event, "+iIndex+", 'Delete');"}}]}},{button:{linkId:"UndoButton",id:"ithit_interface_undo_"+iIndex,ihDojoType:"dijit.form.Button",iconClass:"iconUndo",show:false,tooltip:oNsButtonsPhrases.Undo,contextHelp:oNsContextHelpPhrases.Undo,contextHelpIconClass:"contextIconUndo",disabled:true,childNodes:[{script:{type:"dojo/method",event:"onClick",args:"event",
text:"ITHit.WebDAV.Client.AjaxFileBrowser.Controller.InterfaceHandler(event, "+iIndex+", 'Undo');"}}]}},{button:{linkId:"RedoButton",id:"ithit_interface_redo_"+iIndex,ihDojoType:"dijit.form.Button",iconClass:"iconRedo",show:false,tooltip:oNsButtonsPhrases.Redo,contextHelp:oNsContextHelpPhrases.Redo,contextHelpIconClass:"contextIconRedo",disabled:true,childNodes:[{script:{type:"dojo/method",event:"onClick",args:"event",text:"ITHit.WebDAV.Client.AjaxFileBrowser.Controller.InterfaceHandler(event, "+
iIndex+", 'Redo');"}}]}},{separator:{ihDojoType:"dijit.ToolbarSeparator",linkId:"Separator2"}},{button:{linkId:"CopyButton",id:"ithit_interface_copy_"+iIndex,ihDojoType:"dijit.form.Button",iconClass:"iconCopy",tooltip:oNsButtonsPhrases.Copy,contextHelp:oNsContextHelpPhrases.Copy,contextHelpIconClass:"contextIconCopy",disabled:true,childNodes:[{script:{type:"dojo/method",event:"onClick",args:"event",text:"ITHit.WebDAV.Client.AjaxFileBrowser.Controller.InterfaceHandler(event, "+iIndex+", 'Copy');"}}]}},
{button:{linkId:"CutButton",id:"ithit_interface_cut_"+iIndex,ihDojoType:"dijit.form.Button",iconClass:"iconCut",tooltip:oNsButtonsPhrases.Cut,contextHelp:oNsContextHelpPhrases.Cut,contextHelpIconClass:"contextIconCut",disabled:true,childNodes:[{script:{type:"dojo/method",event:"onClick",args:"event",text:"ITHit.WebDAV.Client.AjaxFileBrowser.Controller.InterfaceHandler(event, "+iIndex+", 'Cut');"}}]}},{button:{linkId:"PasteButton",id:"ithit_interface_paste_"+iIndex,ihDojoType:"dijit.form.Button",iconClass:"iconPaste",
tooltip:oNsButtonsPhrases.Paste,contextHelp:oNsContextHelpPhrases.Paste,contextHelpIconClass:"contextIconPaste",disabled:true,childNodes:[{script:{type:"dojo/method",event:"onClick",args:"event",text:"ITHit.WebDAV.Client.AjaxFileBrowser.Controller.InterfaceHandler(event, "+iIndex+", 'Paste');"}}]}},{separator:{ihDojoType:"dijit.ToolbarSeparator",show:false,linkId:"Separator3"}},{button:{linkId:"LockButton",id:"ithit_interface_lock_"+iIndex,ihDojoType:"dijit.form.Button",iconClass:"iconLock",show:false,
tooltip:oNsButtonsPhrases.Lock,contextHelp:oNsContextHelpPhrases.Lock,contextHelpIconClass:"contextIconLock",childNodes:[{script:{type:"dojo/method",event:"onClick",args:"event",text:"ITHit.WebDAV.Client.AjaxFileBrowser.Controller.InterfaceHandler(event, "+iIndex+", 'Lock');"}}]}},{button:{linkId:"UnlockButton",id:"ithit_interface_unlock_"+iIndex,ihDojoType:"dijit.form.Button",iconClass:"iconUnlock",show:false,tooltip:oNsButtonsPhrases.Unlock,contextHelp:oNsContextHelpPhrases.Unlock,contextHelpIconClass:"contextIconUnlock",
childNodes:[{script:{type:"dojo/method",event:"onClick",args:"event",text:"ITHit.WebDAV.Client.AjaxFileBrowser.Controller.InterfaceHandler(event, "+iIndex+", 'Unlock');"}}]}},{separator:{ihDojoType:"dijit.ToolbarSeparator",linkId:"Separator3"}},{button:{linkId:"InfoButton",id:"ithit_interface_info_"+iIndex,ihDojoType:"dijit.form.Button",iconClass:"iconInfo",tooltip:oNsButtonsPhrases.Info,contextHelp:oNsContextHelpPhrases.Info,contextHelpIconClass:"contextIconInfo",disabled:true,childNodes:[{script:{type:"dojo/method",
event:"onClick",args:"event",text:"ITHit.WebDAV.Client.AjaxFileBrowser.Controller.InterfaceHandler(event, "+iIndex+", 'Info');"}}]}},{button:{linkId:"InfoLog",id:"ithit_interface_log_"+iIndex,ihDojoType:"dijit.form.Button",iconClass:"iconLog",show:false,tooltip:oNsButtonsPhrases.Log,contextHelp:oNsContextHelpPhrases.Log,contextHelpIconClass:"contextIconLog",childNodes:[{script:{type:"dojo/method",event:"onClick",args:"event",text:"ITHit.WebDAV.Client.AjaxFileBrowser.Controller.InterfaceHandler(event, "+
iIndex+", 'Log');"}}]}}]}},{div:{linkId:"AddressBar",ihDojoType:"dijit.layout.ContentPane",layoutAlign:"top",className:"addressBarLine",childNodes:[{table:{style:{width:"100%",height:"100%",margin:"0px",padding:"0px"},cellspacing:"0",cellpadding:"0",childNodes:[{tr:{childNodes:[{td:{style:{width:"50px"},text:oNsInterfacePhrases.Address}},{td:{style:{padding:"0px",paddingRight:"8px"},childNodes:[{input:{type:"text",className:"dijitReset addressBar",id:"ithit_interface_address_bar_"+iIndex,value:""}}]}},
{td:{style:{width:"20px",verticalAlign:"middle"},childNodes:[{div:{className:"addressGoContainer",childNodes:[{button:{className:"dijit dijitReset dijitLeft dijitButton addressGoButton",id:"ithit_interface_address_go_"+iIndex,text:"&nbsp;",type:"button"}}]}}]}},{td:{id:"ithit_interface_search_bar_"+iIndex,style:{width:"200px"}}}]}}]}}]}},{div:{ihDojoType:"dijit.layout.SplitContainer",orientation:"vertical",sizerWidth:sizerWidth,activeSizing:"false",layoutAlign:"client",id:"ithit_interface_content_verticalSplitContainer_"+
iIndex,childNodes:[{div:{ihDojoType:"dijit.layout.ContentPane",sizeMin:"0",sizeShare:"30",style:{height:"100%",overflow:"hidden"},childNodes:[{div:{ihDojoType:"dijit.layout.SplitContainer",orientation:"horizontal",sizerWidth:sizerWidth,style:{height:"100%"},activeSizing:"false",id:"ithit_interface_content_splitContainer_"+iIndex,childNodes:[{div:{ihDojoType:"dijit.layout.ContentPane",sizeMin:"0",sizeShare:"30",className:"treePane",style:{overflow:"auto"},childNodes:[{div:{id:this._ids.tree}}]}},{div:{ihDojoType:"dijit.layout.ContentPane",
sizeMin:"0",sizeShare:"70",style:{overflow:"hidden"},childNodes:[{div:{id:"ithit_interface_mainPanel_"+iIndex,ihDojoType:"dijit.layout.LayoutContainer",layoutAlign:"client",style:{height:"100%",overflow:"hidden"},childNodes:[{div:{id:"ithit_interface_folderView_"+iIndex,controllerIndex:iIndex,ihDojoType:"dijit.layout.ContentPane",layoutAlign:"client",style:{height:"100%"},oncontextmenu:"ITHit.WebDAV.Client.AjaxFileBrowser.Controller.ShowRightPaneContextMenu(ITHit.Components.dojo.fixEvent(event),"+
iIndex+"); ITHit.Events.Stop(event);",childNodes:[{script:{type:"dojo/connect",event:"onClick",args:"event",text:"ITHit.WebDAV.Client.AjaxFileBrowser.Controller.OnRightPaneClick(event,"+iIndex+");"}},{script:{type:"dojo/connect",event:"resize",args:"event",text:"ITHit.WebDAV.Client.AjaxFileBrowser.Controller.OnResizeDataViewArea("+iIndex+");"}}]}},{div:{id:"ithit_interface_upload_file_form_"+iIndex,ihDojoType:"dijit.layout.ContentPane",layoutAlign:"bottom",style:{height:"38px",backgroundColor:"#EEEEEE",
border:"none",borderTop:"1px solid #CCCCCC",paddingLeft:"2px",display:"none"},className:"dropZone dnd_target uploadPanelWrapper",childNodes:[{div:{className:"uploadPanel",childNodes:[{table:{width:"100%",cellspacing:"0",cellpadding:"0",childNodes:[{tr:{childNodes:[{td:{style:{whiteSpace:"nowrap",paddingLeft:"20px",paddingRight:"4px",width:"24px"},text:bDnDFilesSupported?oNsInterfacePhrases.UploadCaptionForDnDFilesSupportedBrowsers:oNsInterfacePhrases.UploadCaption}},{td:{id:"ithit_interface_file_upload_"+
iIndex}},{td:{width:"14"}}]}}]}}]}}]}}]}}]}}]}}]}},{div:{ihDojoType:"dijit.layout.ContentPane",sizeMin:"0",style:{overflow:"hidden"},childNodes:[{div:{ihDojoType:"dojox.grid.DataGrid",id:this._ids.upload,jsId:"uploadWidget",updateDelay:0,style:{width:"100%",height:"100%"}}}]}}]}},{table:{id:"ithit_interface_context_help_container",style:{display:"none"},childNodes:[{tr:{childNodes:[{td:{id:"ithit_interface_context_help_content"}}]}}]}}]}},{div:{id:"ithit_interface_iframe_upload_container_"+iIndex,
style:{width:0,height:0,position:"absolute",top:"-100px",left:"-100px",display:"none"}}},{span:{id:"ithit_interface_menu_dialog_container"}}]}};if(!oNsAjaxFileBrowser.Control._ShowDialogs)oToIgnore["ithit_interface_menu_dialog_container"]=true;try{var oModifiedCode=oNsAjaxFileBrowser.CodeConstructor.CloneCodeModified(oControlCode,oController._MofifyInstructions);var sCode=oNsAjaxFileBrowser.CodeConstructor.CreateHTML(oLinks,oModifiedCode,oToIgnore);delete oModifiedCode}catch(e){throw e;}oElement.innerHTML=
sCode;oNsDojo.parser.parse({rootNode:oElement,appendToNode:oController.Settings.GetRootNode()});oNsAjaxFileBrowser.CodeConstructor.RestoreBindedFunctions();ITHit.Components.dojo.style("ithit_interface_upload_file_form_"+iIndex,"display","block");ITHit.Components.dijit.byId("ithit_interface_mainPanel_"+iIndex).resize();if(oNsAjaxFileBrowser.Control._ShowDialogs){var oDialogs=[{div:{ihDojoType:"dijit.Dialog",id:"ithit_interface_renameItem",title:oNsInterfacePhrases.Rename,style:{width:"250px",display:"none"},
childNodes:[{table:{width:"100%",childNodes:[{tr:{childNodes:[{td:{style:{textAlign:"right"},childNodes:[{label:{"for":"ithit_interface_rename",text:oNsInterfacePhrases.NewName}}]}},{td:{childNodes:[{input:{type:"hidden",id:"ithit_interface_rename_url"}},{input:{type:"hidden",id:"ithit_interface_rename_itemResourceType"}},{input:{type:"text",id:"ithit_interface_rename",ihDojoType:"dijit.form.TextBox"}}]}}]}},{tr:{childNodes:[{td:{colspan:2,style:{textAlign:"right",paddingTop:"15px"},childNodes:[{button:{ihDojoType:"dijit.form.Button",
type:"button",iconClass:"iconOk",className:"ihDialogButton",childNodes:[String(oNsInterfacePhrases.OK),{script:{type:"dojo/method",event:"onClick",text:'return ITHit.WebDAV.Client.AjaxFileBrowser.Controller.RenameItem(ITHit.Components.dojo.byId("ithit_interface_rename_url").value, ITHit.Components.dojo.byId("ithit_interface_rename").value);'}}]}},{button:{ihDojoType:"dijit.form.Button",type:"button",iconClass:"iconCancel",className:"ihDialogButton",text:oNsInterfacePhrases.Cancel}}]}}]}}]}}]}},{div:{ihDojoType:"dijit.Dialog",
id:"ithit_interface_uploadResource",title:oNsInterfacePhrases.UploadFile,style:{width:"500px",display:"none"},childNodes:[{table:{width:"100%",childNodes:[{tr:{childNodes:[{td:{style:{width:"115px",textAlign:"left"},childNodes:[{span:{id:"ithit_interface_uploadResource_folder",text:oNsInterfacePhrases.TargetFolder}},{span:{id:"ithit_interface_uploadResource_file",style:{display:"none"},text:oNsInterfacePhrases.File}}]}},{td:{childNodes:[{div:{className:"invisibleTextfieldWrapper",childNodes:[{input:{type:"text",
id:"ithit_interface_uploadResource_itemDisplayUrl",className:"invisibleTextfield",style:{width:"355px"},readonly:"true"}}]}},{input:{type:"hidden",id:"ithit_interface_uploadResource_item_url"}}]}}]}},{tr:{childNodes:[{td:{style:{textAlign:"left",height:"24px"},text:oNsInterfacePhrases.LocalResource}},{td:{childNodes:[{div:{id:"ithit_interface_uploadResourceFile",style:{height:"24px"}}}]}}]}},{tr:{childNodes:[{td:{colspan:2,style:{textAlign:"right",paddingTop:"15px"},childNodes:[{button:{ihDojoType:"dijit.form.Button",
type:"button",iconClass:"iconOk",className:"ihDialogButton",id:"ithit_interface_uploadResource_subm",childNodes:[String(oNsInterfacePhrases.OK),{script:{type:"dojo/method",event:"onClick",text:"return false;"}}]}},{button:{ihDojoType:"dijit.form.Button",type:"button",iconClass:"iconCancel",className:"ihDialogButton",childNodes:[String(oNsInterfacePhrases.Cancel),{script:{type:"dojo/method",event:"onClick",text:"ITHit.WebDAV.Client.AjaxFileBrowser.Controller.CancelUploadFileDialog("+iIndex+");"}}]}}]}}]}}]}}]}},
{div:{ihDojoType:"dijit.Dialog",id:"ithit_interface_newFolder",title:oNsInterfacePhrases.NewFolder,style:{width:"260px",display:"none"},childNodes:[{table:{style:{width:"100%"},childNodes:[{tr:{childNodes:[{td:{}},{td:{childNodes:[{span:{id:"ithit_interface_new_folder_message"}}]}}]}},{tr:{childNodes:[{td:{style:{textAlign:"right"},childNodes:[{label:{"for":"ithit_interface_new_folder",text:oNsInterfacePhrases.FolderName}}]}},{td:{childNodes:[{input:{type:"hidden",id:"ithit_interface_new_folder_url"}},
{input:{id:"ithit_interface_new_folder",type:"text",className:"dijit dijitReset dijitLeft dijitTextBox dijitTextBoxFocused dijitFocused"}}]}}]}},{tr:{childNodes:[{td:{colspan:2,style:{textAlign:"right",paddingTop:"15px"},childNodes:[{button:{ihDojoType:"dijit.form.Button",type:"button",iconClass:"iconOk",className:"ihDialogButton",childNodes:[String(oNsInterfacePhrases.OK),{script:{type:"dojo/method",event:"onClick",text:'return ITHit.WebDAV.Client.AjaxFileBrowser.Controller.CreateFolder(ITHit.Components.dojo.byId("ithit_interface_new_folder_url").value, ITHit.Components.dojo.byId("ithit_interface_new_folder").value);'}}]}},
{button:{ihDojoType:"dijit.form.Button",type:"button",iconClass:"iconCancel",className:"ihDialogButton",text:oNsInterfacePhrases.Cancel}}]}}]}}]}}]}},{div:{ihDojoType:"dijit.Dialog",id:"ithit_interface_deleteItems",title:oNsInterfacePhrases.Delete,style:{width:"300px",display:"none"},childNodes:[{table:{style:{width:"100%"},childNodes:[{tr:{childNodes:[{td:{text:oNsInterfacePhrases.DeleteItemsConfirmQuestion}}]}},{tr:{childNodes:[{td:{style:{textAlign:"right",paddingTop:"15px"},childNodes:[{input:{type:"hidden",
id:"ithit_interface_delete_url"}},{button:{ihDojoType:"dijit.form.Button",type:"button",iconClass:"iconOk",className:"ihDialogButton",childNodes:[String(oNsInterfacePhrases.OK),{script:{type:"dojo/method",event:"onClick",text:'ITHit.WebDAV.Client.AjaxFileBrowser.Controller.DeleteGridItems(ITHit.Components.dojo.byId("ithit_interface_delete_url").value);'}}]}},{button:{ihDojoType:"dijit.form.Button",type:"button",iconClass:"iconCancel",className:"ihDialogButton",text:oNsInterfacePhrases.Cancel}}]}}]}}]}}]}},
{div:{ihDojoType:"dijit.Dialog",id:"ithit_interface_copy_move_overwrite",title:oNsInterfacePhrases.OverwriteConfirm,style:{width:"480px",display:"none"},childNodes:[{table:{style:{width:"100%"},childNodes:[{tr:{childNodes:[{td:{childNodes:[{div:{className:"dialogMessageDiv",text:oNsInterfacePhrases.FileExistsOverwriteConfirmQuestion.Paste('<span style="word-wrap: break-word;" id="ithit_interface_copy_move_overwrite_file_name"></span>')}}]}}]}},{tr:{childNodes:[{td:{childNodes:[{div:{style:{"float":"right"},
childNodes:[{button:{ihDojoType:"dijit.form.Button",type:"button",id:"ithit_interface_copy_move_buttons5",iconClass:"iconCancel",className:"ihDialogButton",childNodes:[String(oNsInterfacePhrases.Cancel),{script:{type:"dojo/method",event:"onClick",text:'ITHit.WebDAV.Client.AjaxFileBrowser.Controller.SetCopyMoveAction("cancel")'}}]}}]}},{button:{ihDojoType:"dijit.form.Button",type:"button",id:"ithit_interface_copy_move_buttons1",className:"ihDialogButton",childNodes:[String(oNsInterfacePhrases.Yes),
{script:{type:"dojo/method",event:"onClick",text:'ITHit.WebDAV.Client.AjaxFileBrowser.Controller.SetCopyMoveAction("yes")'}}]}},{button:{ihDojoType:"dijit.form.Button",type:"button",id:"ithit_interface_copy_move_buttons2",className:"ihDialogButton",childNodes:[String(oNsInterfacePhrases.YesToAll),{script:{type:"dojo/method",event:"onClick",text:'ITHit.WebDAV.Client.AjaxFileBrowser.Controller.SetCopyMoveAction("yes_all")'}}]}},{button:{ihDojoType:"dijit.form.Button",type:"button",id:"ithit_interface_copy_move_buttons3",
className:"ihDialogButton",childNodes:[String(oNsInterfacePhrases.No),{script:{type:"dojo/method",event:"onClick",text:'ITHit.WebDAV.Client.AjaxFileBrowser.Controller.SetCopyMoveAction("no")'}}]}},{button:{ihDojoType:"dijit.form.Button",type:"button",id:"ithit_interface_copy_move_buttons4",className:"ihDialogButton",childNodes:[String(oNsInterfacePhrases.NoToAll),{script:{type:"dojo/method",event:"onClick",text:'ITHit.WebDAV.Client.AjaxFileBrowser.Controller.SetCopyMoveAction("no_all")'}}]}}]}}]}}]}}]}},
{div:{ihDojoType:"dijit.Dialog",id:"ithit_interface_rewrite_upload_file",title:oNsInterfacePhrases.OverwriteConfirm,style:{width:"480px",display:"none"},childNodes:[{script:{type:"dojo/method",event:"onCancel",args:"event",text:'ITHit.WebDAV.Client.AjaxFileBrowser.Controller.SetRewriteUploadFileAction("cancel");'}},{table:{style:{width:"100%"},childNodes:[{tr:{childNodes:[{td:{childNodes:[{div:{className:"dialogMessageDiv",text:oNsInterfacePhrases.FileExistsOverwriteConfirmQuestion.Paste('<span style="word-wrap: break-word;" id="ithit_interface_rewrite_upload_file_name"></span>')}}]}}]}},
{tr:{childNodes:[{td:{childNodes:[{div:{style:{"float":"right"},childNodes:[{button:{ihDojoType:"dijit.form.Button",type:"button",id:"ithit_interface_rewrite_upload_buttons5",iconClass:"iconCancel",className:"ihDialogButton",childNodes:[String(oNsInterfacePhrases.Cancel),{script:{type:"dojo/method",event:"onClick",text:'ITHit.WebDAV.Client.AjaxFileBrowser.Controller.SetRewriteUploadFileAction("cancel");'}}]}}]}},{button:{ihDojoType:"dijit.form.Button",type:"button",id:"ithit_interface_rewrite_upload_buttons1",
className:"ihDialogButton",childNodes:[String(oNsInterfacePhrases.Yes),{script:{type:"dojo/method",event:"onClick",text:'ITHit.WebDAV.Client.AjaxFileBrowser.Controller.SetRewriteUploadFileAction("yes");'}}]}},{button:{ihDojoType:"dijit.form.Button",type:"button",id:"ithit_interface_rewrite_upload_buttons2",className:"ihDialogButton",childNodes:[String(oNsInterfacePhrases.YesToAll),{script:{type:"dojo/method",event:"onClick",text:'ITHit.WebDAV.Client.AjaxFileBrowser.Controller.SetRewriteUploadFileAction("yes_all");'}}]}},
{button:{ihDojoType:"dijit.form.Button",type:"button",id:"ithit_interface_rewrite_upload_buttons3",className:"ihDialogButton",childNodes:[String(oNsInterfacePhrases.No),{script:{type:"dojo/method",event:"onClick",text:'ITHit.WebDAV.Client.AjaxFileBrowser.Controller.SetRewriteUploadFileAction("no");'}}]}},{button:{ihDojoType:"dijit.form.Button",type:"button",id:"ithit_interface_rewrite_upload_buttons4",className:"ihDialogButton",childNodes:[String(oNsInterfacePhrases.NoToAll),{script:{type:"dojo/method",
event:"onClick",text:'ITHit.WebDAV.Client.AjaxFileBrowser.Controller.SetRewriteUploadFileAction("no_all");'}}]}}]}}]}}]}}]}},{div:{ihDojoType:"dijit.Dialog",id:"ithit_interface_properties",title:oNsInterfacePhrases.ManageProperties,style:{width:"550px",display:"none"},childNodes:[{table:{style:{width:"100%"},cellspacing:"0",cellpadding:"0",border:"0",childNodes:[{tr:{childNodes:[{td:{childNodes:[{input:{type:"hidden",id:"ithit_interface_property_itemDisplayUrl"}},{input:{type:"hidden",id:"ithit_interface_property_item_url"}},
{div:{ihDojoType:"dojox.grid.DataGrid",id:"ithit_interface_properties_list",style:{width:"526px",height:"250px",border:"1px solid #999999"}}}]}}]}},{tr:{childNodes:[{td:{style:{textAlign:"left",paddingTop:"15px"},childNodes:[{span:{style:{"float":"right"},childNodes:[{button:{ihDojoType:"dijit.form.Button",type:"button",iconClass:"iconCancel",className:"ihDialogButton",text:oNsInterfacePhrases.Close}}]}},{button:{ihDojoType:"dijit.form.Button",type:"button",className:"ihDialogButton",text:oNsInterfacePhrases.Add,
childNodes:[{script:{type:"dojo/method",event:"onClick",text:"ITHit.WebDAV.Client.AjaxFileBrowser.Render.RenderController.ShowAddPropertyDialog();"+"|>\treturn false;"}}]}},{button:{ihDojoType:"dijit.form.Button",type:"button",id:"ithit_interface_properties_edit_button",className:"ihDialogButton",text:oNsInterfacePhrases.Edit,childNodes:[{script:{type:"dojo/method",event:"onClick",text:"ITHit.WebDAV.Client.AjaxFileBrowser.Controller.EditPropertyDialog();"+"|>\treturn false;"}}]}},{button:{ihDojoType:"dijit.form.Button",
type:"button",id:"ithit_interface_properties_delete_button",className:"ihDialogButton",text:oNsInterfacePhrases.Delete,childNodes:[{script:{type:"dojo/method",event:"onClick",text:"ITHit.WebDAV.Client.AjaxFileBrowser.Render.RenderController.ShowDeletePropertiesDialog();"+"|>\treturn false;"}}]}}]}}]}}]}}]}},{div:{ihDojoType:"dijit.Dialog",id:"ithit_interface_versions",title:oNsInterfacePhrases.Versions,style:{width:"550px",display:"none"},childNodes:[{div:{id:"ithit_interface_versions_warning_old_version",
text:oNsInterfacePhrases.WarningOldVersion,className:"messageWarning",style:{display:"none"}}},{table:{style:{width:"100%"},cellspacing:"0",cellpadding:"0",border:"0",childNodes:[{tr:{childNodes:[{td:{childNodes:[{input:{type:"hidden",id:"ithit_interface_versions_url"}},{div:{ihDojoType:"dojox.grid.DataGrid",id:"ithit_interface_versions_list",style:{width:"526px",height:"250px",border:"1px solid #999999"}}}]}}]}},{tr:{childNodes:[{td:{style:{textAlign:"left",paddingTop:"15px"},childNodes:[{span:{style:{"float":"right"},
childNodes:[{button:{ihDojoType:"dijit.form.Button",type:"button",iconClass:"iconCancel",className:"ihDialogButton",text:oNsInterfacePhrases.Buttons.Close}}]}},{button:{ihDojoType:"dijit.form.Button",type:"button",id:"ithit_interface_versions_update_button",className:"ihDialogButton",text:oNsInterfacePhrases.Buttons.VersionUpdateToThis,tooltip:oNsInterfacePhrases.VersionUpdateToThisTooltip,childNodes:[{script:{type:"dojo/method",event:"onClick",text:'ITHit.WebDAV.Client.AjaxFileBrowser.Controller.VersionUpdate(ITHit.Components.dojo.byId("ithit_interface_versions_url").value);'+
"|>\treturn false;"}}]}},{button:{ihDojoType:"dijit.form.Button",type:"button",id:"ithit_interface_versions_remove_button",className:"ihDialogButton",text:oNsInterfacePhrases.Buttons.VersionRemove,childNodes:[{script:{type:"dojo/method",event:"onClick",text:"ITHit.WebDAV.Client.AjaxFileBrowser.Render.RenderController.ShowDeleteVersionDialog();"+"|> return false;"}}]}},{button:{ihDojoType:"dijit.form.Button",type:"button",id:"ithit_interface_versions_download_button",className:"ihDialogButton",text:oNsInterfacePhrases.Buttons.VersionDownload,
childNodes:[{script:{type:"dojo/method",event:"onClick",text:'ITHit.WebDAV.Client.AjaxFileBrowser.Controller.VersionDownload(ITHit.Components.dojo.byId("ithit_interface_versions_url").value);'+"|>\treturn false;"}}]}}]}}]}}]}}]}},{div:{ihDojoType:"dijit.Dialog",id:"ithit_interface_delete_version",title:oNsInterfacePhrases.Delete,style:{width:"300px",display:"none"},childNodes:[{table:{style:{width:"100%"},childNodes:[{tr:{childNodes:[{td:{text:oNsInterfacePhrases.DeleteVersionConfirmQuestion}}]}},
{tr:{childNodes:[{td:{style:{textAlign:"right",paddingTop:"15px"},childNodes:[{button:{ihDojoType:"dijit.form.Button",type:"button",iconClass:"iconOk",className:"ihDialogButton",childNodes:[String(oNsInterfacePhrases.OK),{script:{type:"dojo/method",event:"onClick",text:'ITHit.WebDAV.Client.AjaxFileBrowser.Controller.VersionDelete(ITHit.Components.dojo.byId("ithit_interface_versions_url").value);'}}]}},{button:{ihDojoType:"dijit.form.Button",type:"button",iconClass:"iconCancel",className:"ihDialogButton",
text:oNsInterfacePhrases.Cancel,onClick:"ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.HideDeleteVersionDialog();"}}]}}]}}]}}]}},{div:{ihDojoType:"dijit.Dialog",id:"ithit_interface_add_property",title:oNsInterfacePhrases.AddProperty,style:{width:"550px",display:"none"},childNodes:[{table:{style:{width:"100%"},childNodes:[{tr:{childNodes:[{td:{style:{width:"70px",textAlign:"left"},text:oNsInterfacePhrases.Item}},{td:{childNodes:[{div:{className:"invisibleTextfieldWrapper",childNodes:[{input:{type:"text",
id:"ithit_interface_property_url",className:"invisibleTextfield",readonly:"true"}}]}}]}}]}},{tr:{childNodes:[{td:{style:{textAlign:"left"},childNodes:[{label:{"for":"ithit_interface_property_namespace",text:oNsInterfacePhrases.Namespace}}]}},{td:{childNodes:[{input:{id:"ithit_interface_property_namespace",ihDojoType:"dijit.form.TextBox",type:"text",style:{width:"100%",margin:"0px"}}}]}}]}},{tr:{childNodes:[{td:{style:{textAlign:"left"},childNodes:[{label:{"for":"ithit_interface_property_name",text:oNsInterfacePhrases.Name}}]}},
{td:{childNodes:[{input:{id:"ithit_interface_property_name",ihDojoType:"dijit.form.TextBox",type:"text",style:{width:"100%",margin:"0px"}}}]}}]}},{tr:{childNodes:[{td:{style:{textAlign:"left",verticalAlign:"top"},childNodes:[{label:{"for":"ithit_interface_property_value",text:oNsInterfacePhrases.Value}}]}},{td:{childNodes:[{textarea:{id:"ithit_interface_property_value",className:"dijitInline dijitInputField dijitTextArea",style:{width:"100%",height:"12em !important",outline:"none",overflowY:"auto !important"}}}]}}]}},
{tr:{childNodes:[{td:{colspan:2,style:{textAlign:"right",paddingTop:"15px"},childNodes:[{button:{ihDojoType:"dijit.form.Button",type:"button",iconClass:"iconOk",className:"ihDialogButton",childNodes:[String(oNsInterfacePhrases.OK),{script:{type:"dojo/method",event:"onClick",text:'if (false === ITHit.WebDAV.Client.AjaxFileBrowser.Controller.AddOrUpdateProperty(ITHit.Components.dojo.byId("ithit_interface_property_item_url").value, ITHit.Components.dojo.byId("ithit_interface_property_namespace").value, ITHit.Components.dojo.byId("ithit_interface_property_name").value, ITHit.Components.dojo.byId("ithit_interface_property_value").value)) {return false;}'}}]}},
{button:{ihDojoType:"dijit.form.Button",type:"button",iconClass:"iconCancel",className:"ihDialogButton",text:oNsInterfacePhrases.Cancel,childNodes:[{script:{type:"dojo/method",event:"onClick",text:"ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.CloseAddProperty();"}}]}}]}}]}}]}}]}},{div:{ihDojoType:"dijit.Dialog",id:"ithit_interface_delete_properties",title:oNsInterfacePhrases.Delete,style:{width:"300px",display:"none"},childNodes:[{table:{style:{width:"100%"},childNodes:[{tr:{childNodes:[{td:{text:oNsInterfacePhrases.DeletePropertiesConfirmQuestion}}]}},
{tr:{childNodes:[{td:{style:{textAlign:"right",paddingTop:"15px"},childNodes:[{button:{ihDojoType:"dijit.form.Button",type:"button",iconClass:"iconOk",className:"ihDialogButton",childNodes:[String(oNsInterfacePhrases.OK),{script:{type:"dojo/method",event:"onClick",text:'ITHit.WebDAV.Client.AjaxFileBrowser.Controller.DeleteProperties(ITHit.Components.dojo.byId("ithit_interface_property_item_url").value);'}}]}},{button:{ihDojoType:"dijit.form.Button",type:"button",iconClass:"iconCancel",className:"ihDialogButton",
text:oNsInterfacePhrases.Cancel,onClick:"ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.HideDeletePropertiesDialog();"}}]}}]}}]}}]}},{div:{ihDojoType:"dijit.Dialog",id:"ithit_interface_edit_property",title:oNsInterfacePhrases.EditProperty,style:{width:"550px",display:"none"},childNodes:[{table:{style:{width:"100%"},childNodes:[{tr:{childNodes:[{td:{style:{width:"70px",textAlign:"left"},text:oNsInterfacePhrases.Item}},{td:{childNodes:[{div:{className:"invisibleTextfieldWrapper",childNodes:[{input:{type:"text",
id:"ithit_interface_property_edit_url",className:"invisibleTextfield",readonly:"true"}}]}}]}}]}},{tr:{childNodes:[{td:{style:{textAlign:"left"},childNodes:[{label:{"for":"ithit_interface_property_namespace",text:oNsInterfacePhrases.Namespace}}]}},{td:{childNodes:[{div:{className:"invisibleTextfieldWrapper",childNodes:[{input:{id:"ithit_interface_property_edit_namespace",type:"text",className:"invisibleTextfield",readonly:"true"}}]}}]}}]}},{tr:{childNodes:[{td:{style:{textAlign:"left"},childNodes:[{label:{"for":"ithit_interface_property_name",
text:oNsInterfacePhrases.Name}}]}},{td:{childNodes:[{div:{className:"invisibleTextfieldWrapper",childNodes:[{input:{id:"ithit_interface_property_edit_name",type:"text",className:"invisibleTextfield",readonly:"true"}}]}}]}}]}},{tr:{childNodes:[{td:{style:{textAlign:"left",verticalAlign:"top"},childNodes:[{label:{"for":"ithit_interface_property_edit_value",text:oNsInterfacePhrases.Value}}]}},{td:{childNodes:[{textarea:{id:"ithit_interface_property_edit_value",className:"dijitInline dijitInputField dijitTextArea",
style:{width:"100%",height:"12em !important",outline:"none",overflowY:"auto !important"}}}]}}]}},{tr:{childNodes:[{td:{colspan:"2",style:{textAlign:"right",paddingTop:"15px"},childNodes:[{button:{ihDojoType:"dijit.form.Button",type:"button",iconClass:"iconOk",className:"ihDialogButton",childNodes:[String(oNsInterfacePhrases.OK),{script:{type:"dojo/method",event:"onClick",text:'if (false === ITHit.WebDAV.Client.AjaxFileBrowser.Controller.AddOrUpdateProperty(ITHit.Components.dojo.byId("ithit_interface_property_item_url").value, ITHit.Components.dojo.byId("ithit_interface_property_edit_namespace").value, ITHit.Components.dojo.byId("ithit_interface_property_edit_name").value, ITHit.Components.dojo.byId("ithit_interface_property_edit_value").value)) {return false;}'}}]}},
{button:{ihDojoType:"dijit.form.Button",type:"button",iconClass:"iconCancel",className:"ihDialogButton",text:oNsInterfacePhrases.Cancel,childNodes:[{script:{type:"dojo/method",event:"onClick",text:"ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.CloseUpdateProperty();"}}]}}]}}]}}]}}]}},{div:{ihDojoType:"dijit.Dialog",id:"ithit_interface_error",title:oNsInterfacePhrases.FollowingErrorsOccurred,style:{width:"550px",display:"none"},childNodes:[{table:{style:{width:"100%"},childNodes:[{tr:{childNodes:[{td:{childNodes:[{div:{ihDojoType:"dojox.grid.DataGrid",
id:"ithit_interface_error_details",selectionMode:"single",style:{width:"100%",height:"250px",border:"1px solid #999999"},childNodes:[{script:{type:"dojo/connect",event:"onRowClick",args:"event",text:"ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.EnableErrorDetailsButton();"}}]}}]}}]}},{tr:{childNodes:[{td:{style:{paddingTop:"15px"},childNodes:[{span:{style:{"float":"right"},childNodes:[{button:{ihDojoType:"dijit.form.Button",type:"button",iconClass:"iconCancel",className:"ihDialogButton",text:oNsInterfacePhrases.Close}}]}},
{button:{ihDojoType:"dijit.form.Button",type:"button",id:"ithit_interface_error_details_button",className:"ihDialogButton",text:oNsInterfacePhrases.Details,childNodes:[{script:{type:"dojo/method",event:"onClick",args:"event",text:"ITHit.WebDAV.Client.AjaxFileBrowser.Controller.ShowDetailedError(event, "+iIndex+");"}}]}}]}}]}}]}}]}},{div:{ihDojoType:"dijit.Dialog",id:"ithit_interface_detailed_error",title:oNsInterfacePhrases.ErrorDetails,style:{width:"550px",display:"none"},childNodes:[{table:{style:{width:"100%"},
childNodes:[{tr:{childNodes:[{td:{style:{width:"70px",textAlign:"left"},childNodes:[{strong:{text:oNsInterfacePhrases.Source}}]}},{td:{childNodes:[{div:{className:"invisibleTextfieldWrapper",childNodes:[{input:{type:"text",id:"ithit_interface_detailed_error_url",className:"invisibleTextfield",style:{width:"450px"},readonly:"true"}}]}}]}}]}},{tr:{childNodes:[{td:{style:{textAlign:"left"},childNodes:[{strong:{text:oNsInterfacePhrases.Message}}]}},{td:{childNodes:[{div:{className:"invisibleTextfieldWrapper",
childNodes:[{input:{type:"text",id:"ithit_interface_detailed_error_message",className:"invisibleTextfield",style:{width:"450px"},readonly:"true"}}]}}]}}]}},{tr:{childNodes:[{td:{colspan:2,childNodes:[{iframe:{id:"ithit_interface_detailed_error_message_body",style:{width:"524px",height:"300px",overflow:"auto",border:"1px solid #ccc"}}}]}}]}},{tr:{childNodes:[{td:{colspan:2,style:{textAlign:"right",paddingTop:"15px"},childNodes:[{button:{ihDojoType:"dijit.form.Button",type:"button",iconClass:"iconCancel",
className:"ihDialogButton",text:oNsInterfacePhrases.Close}}]}}]}}]}}]}},{div:{ihDojoType:"dijit.Dialog",id:"ithit_interface_item_info",title:oNsInterfacePhrases.Properties,style:{width:"550px",display:"none"},childNodes:[{table:{style:{width:"100%"},childNodes:[{tr:{childNodes:[{td:{className:"itemInfoName",childNodes:[{div:{id:"ithit_interface_item_info_icon"}}]}},{td:{childNodes:[{div:{className:"invisibleTextfieldWrapper",childNodes:[{input:{type:"text",className:"invisibleTextfield",id:"ithit_interface_item_info_name",
readonly:"true",tabindex:-1}}]}}]}}]}},{tr:{childNodes:[{td:{colspan:2,childNodes:[{hr:{}}]}}]}},{tr:{childNodes:[{td:{text:oNsInterfacePhrases.ItemType}},{td:{childNodes:[{span:{id:"ithit_interface_item_info_type"}}]}}]}},{tr:{childNodes:[{td:{colspan:2,childNodes:[{hr:{}}]}}]}},{tr:{childNodes:[{td:{text:oNsInterfacePhrases.Location}},{td:{childNodes:[{div:{className:"invisibleTextfieldWrapper",childNodes:[{input:{type:"text",id:"ithit_interface_item_info_url",className:"invisibleTextfield",readonly:"true",
tabindex:-1}}]}}]}}]}},{tr:{id:"ithit_interface_item_info_sizeTr",childNodes:[{td:{text:oNsInterfacePhrases.Size}},{td:{childNodes:[{span:{id:"ithit_interface_item_info_size"}}]}}]}},{tr:{childNodes:[{td:{colspan:2,childNodes:[{hr:{}}]}}]}},{tr:{childNodes:[{td:{text:oNsInterfacePhrases.Created}},{td:{childNodes:[{span:{id:"ithit_interface_item_info_created"}}]}}]}},{tr:{childNodes:[{td:{text:oNsInterfacePhrases.Modified}},{td:{childNodes:[{span:{id:"ithit_interface_item_info_modified"}}]}}]}}]}},
{table:{id:"ithit_interface_item_info_quota_container",className:"quota",childNodes:[{tr:{childNodes:[{td:{colspan:4,childNodes:[{hr:{}}]}}]}},{tr:{childNodes:[{td:{className:"itemInfoName",text:oNsInterfacePhrases.UsedSpace}},{td:{className:"itemInfoQuotaBytes",id:"ithit_interface_item_info_used_bytes"}},{td:{className:"itemInfoQuota",id:"ithit_interface_item_info_used"}},{td:{text:"&nbsp;"}}]}},{tr:{childNodes:[{td:{text:oNsInterfacePhrases.FreeSpace}},{td:{className:"itemInfoQuotaBytes",id:"ithit_interface_item_info_available_bytes"}},
{td:{className:"itemInfoQuota",id:"ithit_interface_item_info_available"}},{td:{}}]}},{tr:{childNodes:[{td:{text:oNsInterfacePhrases.TotalSpace}},{td:{className:"itemInfoQuotaBytes",id:"ithit_interface_item_info_total_bytes"}},{td:{className:"itemInfoQuota",id:"ithit_interface_item_info_total"}},{td:{}}]}},{tr:{childNodes:[{td:{colspan:4,text:"&nbsp;"}}]}},{tr:{childNodes:[{td:{className:"itemInfoName",id:"ithit_interface_item_info_used_percent"}},{td:{colspan:3,className:"table",childNodes:[{div:{className:"progress_bar",
childNodes:[{div:{className:"progress",id:"ithit_interface_item_info_used_percent_bar"}}]}}]}}]}}]}},{div:{style:{textAlign:"right",paddingTop:"15px"},childNodes:[{button:{ihDojoType:"dijit.form.Button",type:"button",iconClass:"iconCancel",className:"ihDialogButton",text:oNsInterfacePhrases.Close}}]}}]}},{div:{ihDojoType:"dijit.Dialog",id:"ithit_interface_log",title:oNsInterfacePhrases.Log,style:{width:"750px",display:"none"},childNodes:[{textarea:{id:"ithit_interface_log_log",className:"dijitInline dijitInputField dijitTextArea",
wrap:"off",style:{width:"100%",height:"600px",overflowX:"auto",overflowY:"auto"}}},{div:{style:{textAlign:"right",paddingTop:"15px"},childNodes:[{button:{ihDojoType:"dijit.form.Button",type:"button",iconClass:"iconCancel",className:"ihDialogButton",text:oNsInterfacePhrases.Close}}]}}]}},{div:{ihDojoType:"dijit.Dialog",id:"ithit_interface_alertMessage",title:"&nbsp;",style:{width:"500px",display:"none"},childNodes:[{table:{style:{width:"100%"},childNodes:[{tr:{childNodes:[{td:{style:{textAlign:"left"},
childNodes:[{div:{id:"ithit_interface_alertMessage_message",className:"dialogMessageDiv"}}]}}]}},{tr:{childNodes:[{td:{style:{textAlign:"center",paddingTop:"15px"},childNodes:[{button:{ihDojoType:"dijit.form.Button",type:"button",iconClass:"iconCancel",className:"ihDialogButton",text:oNsInterfacePhrases.Close}}]}}]}}]}}]}},{div:{ihDojoType:"dijit.Dialog",id:"ithit_interface_customDialog",title:"&nbsp;",style:{width:"500px",display:"none"},childNodes:[{div:{id:"ithit_interface_customDialog_content",
style:{margin:"0",padding:"0"}}}]}},{div:{ihDojoType:"dijit.Dialog",id:"ithit_interface_trialPeriodExpired",title:"&nbsp;",style:{width:"500px",display:"none"},childNodes:[{table:{style:{width:"100%"},childNodes:[{tr:{childNodes:[{td:{style:{textAlign:"left"},childNodes:[{div:{id:"ithit_interface_alertMessage_message",className:"dialogMessageDiv",text:oNsInterfacePhrases.TrialPeriodExpired}}]}}]}},{tr:{childNodes:[{td:{style:{textAlign:"right",paddingTop:"15px"},childNodes:[{button:{ihDojoType:"dijit.form.Button",
type:"button",iconClass:"iconOk",className:"ihDialogButton",childNodes:[String(oNsInterfacePhrases.BuyNow),{script:{type:"dojo/method",event:"onClick",text:"ITHit.WebDAV.Client.AjaxFileBrowser.Controller.BuyNow();"}}]}},{button:{ihDojoType:"dijit.form.Button",type:"button",iconClass:"iconCancel",className:"ihDialogButton",text:oNsInterfacePhrases.Close}}]}}]}}]}}]}}];var sDialogsCode=oNsAjaxFileBrowser.CodeConstructor.CreateHTML(oLinks,oDialogs);var oEl=oNsDojo.byId("ithit_interface_menu_dialog_container");
oEl.innerHTML=sDialogsCode;oNsDojo.parser.parse({rootNode:oEl,appendToNode:oEl});oNsAjaxFileBrowser.Control._ShowDialogs=false}oNsDojo.connect(oNsDojo.byId("ithit_interface_address_bar_"+iIndex),"onkeypress",function(oEvent){oController.OnAddressBarKeyDown(oEvent,iIndex)});oNsDojo.connect(oNsDojo.byId("ithit_interface_address_go_"+iIndex),"onclick",function(oEvent){oController.OpenFolderFromInterface(ITHit.Components.dojo.byId("ithit_interface_address_bar_"+iIndex).value)});oNsDojo.connect(oNsDojo.byId("ithit_interface_property_value"),
"onkeydown",function(e){if(ITHit.WebDAV.Client.AjaxFileBrowser.Render.RenderController.isFormFieldTarget(e,"textarea"))return false;return true});var dijitByIdNs=ITHit.Components.dijit.byId;var dialog=dijitByIdNs("ithit_interface_renameItem");dialog.onShow=new Function("oEvent","ITHit.WebDAV.Client.AjaxFileBrowser.Controller.EnterZone("+iIndex+', "Dialog:RenameItem");');dialog.onHide=new Function("oEvent","ITHit.WebDAV.Client.AjaxFileBrowser.Controller.LeaveZone("+iIndex+', "Dialog:RenameItem");');
dialog=dijitByIdNs("ithit_interface_uploadResource");dialog.onShow=new Function("oEvent","ITHit.WebDAV.Client.AjaxFileBrowser.Controller.EnterZone("+iIndex+', "Dialog:UploadResource");');dialog.onHide=new Function("oEvent","ITHit.WebDAV.Client.AjaxFileBrowser.Controller.LeaveZone("+iIndex+', "Dialog:UploadResource");');dialog=dijitByIdNs("ithit_interface_newFolder");dialog.onShow=new Function("oEvent","ITHit.WebDAV.Client.AjaxFileBrowser.Controller.EnterZone("+iIndex+', "Dialog:NewFolder");');dialog.onHide=
new Function("oEvent","ITHit.WebDAV.Client.AjaxFileBrowser.Controller.LeaveZone("+iIndex+', "Dialog:NewFolder");');dialog=dijitByIdNs("ithit_interface_deleteItems");dialog.onShow=new Function("oEvent","ITHit.WebDAV.Client.AjaxFileBrowser.Controller.EnterZone("+iIndex+', "Dialog:DeleteItems");');dialog.onHide=new Function("oEvent","ITHit.WebDAV.Client.AjaxFileBrowser.Controller.LeaveZone("+iIndex+', "Dialog:DeleteItems");');dialog=dijitByIdNs("ithit_interface_copy_move_overwrite");dialog.onShow=new Function("oEvent",
"ITHit.WebDAV.Client.AjaxFileBrowser.Controller.EnterZone("+iIndex+', "Dialog:CopyMoveOverwrite");');dialog.onHide=new Function("oEvent","ITHit.WebDAV.Client.AjaxFileBrowser.Controller.LeaveZone("+iIndex+', "Dialog:CopyMoveOverwrite");');dialog=dijitByIdNs("ithit_interface_rewrite_upload_file");dialog.onShow=new Function("oEvent","ITHit.WebDAV.Client.AjaxFileBrowser.Controller.EnterZone("+iIndex+', "Dialog:RewriteUploadFile");');dialog.onHide=new Function("oEvent","ITHit.WebDAV.Client.AjaxFileBrowser.Controller.LeaveZone("+
iIndex+', "Dialog:RewriteUploadFile");');dialog=dijitByIdNs("ithit_interface_properties");dialog.onShow=new Function("oEvent","ITHit.WebDAV.Client.AjaxFileBrowser.Controller.EnterZone("+iIndex+', "Dialog:CustomProperties");');dialog.onHide=new Function("oEvent","ITHit.WebDAV.Client.AjaxFileBrowser.Controller.LeaveZone("+iIndex+', "Dialog:CustomProperties");');dialog=dijitByIdNs("ithit_interface_versions");dialog.onShow=new Function("oEvent","ITHit.WebDAV.Client.AjaxFileBrowser.Controller.EnterZone("+
iIndex+', "Dialog:Versions");');dialog.onHide=new Function("oEvent","ITHit.WebDAV.Client.AjaxFileBrowser.Controller.LeaveZone("+iIndex+', "Dialog:Versions");');dialog=dijitByIdNs("ithit_interface_add_property");dialog.onShow=new Function("oEvent","ITHit.WebDAV.Client.AjaxFileBrowser.Controller.EnterZone("+iIndex+', "Dialog:AddProperty");');dialog.onHide=new Function("oEvent","ITHit.WebDAV.Client.AjaxFileBrowser.Controller.LeaveZone("+iIndex+', "Dialog:AddProperty");');dialog=dijitByIdNs("ithit_interface_delete_properties");
dialog.onShow=new Function("oEvent","ITHit.WebDAV.Client.AjaxFileBrowser.Controller.EnterZone("+iIndex+', "Dialog:DeleteProperty");');dialog.onHide=new Function("oEvent","ITHit.WebDAV.Client.AjaxFileBrowser.Controller.LeaveZone("+iIndex+', "Dialog:DeleteProperty");');dialog=dijitByIdNs("ithit_interface_edit_property");dialog.onShow=new Function("oEvent","ITHit.WebDAV.Client.AjaxFileBrowser.Controller.EnterZone("+iIndex+', "Dialog:EditProperty");');dialog.onHide=new Function("oEvent","ITHit.WebDAV.Client.AjaxFileBrowser.Controller.LeaveZone("+
iIndex+', "Dialog:EditProperty");');dialog=dijitByIdNs("ithit_interface_error");dialog.onShow=new Function("oEvent","ITHit.WebDAV.Client.AjaxFileBrowser.Controller.EnterZone("+iIndex+', "Dialog:Errors");');dialog.onHide=new Function("oEvent","ITHit.WebDAV.Client.AjaxFileBrowser.Controller.LeaveZone("+iIndex+', "Dialog:Errors");');dialog=dijitByIdNs("ithit_interface_detailed_error");dialog.onShow=new Function("oEvent","ITHit.WebDAV.Client.AjaxFileBrowser.Controller.EnterZone("+iIndex+', "Dialog:DetailedError");');
dialog.onHide=new Function("oEvent","ITHit.WebDAV.Client.AjaxFileBrowser.Controller.LeaveZone("+iIndex+', "Dialog:DetailedError");');dialog=dijitByIdNs("ithit_interface_item_info");dialog.onShow=new Function("oEvent","ITHit.WebDAV.Client.AjaxFileBrowser.Controller.EnterZone("+iIndex+', "Dialog:ItemInfo");');dialog.onHide=new Function("oEvent","ITHit.WebDAV.Client.AjaxFileBrowser.Controller.LeaveZone("+iIndex+', "Dialog:ItemInfo");');dialog=dijitByIdNs("ithit_interface_alertMessage");dialog.onShow=
new Function("oEvent","ITHit.WebDAV.Client.AjaxFileBrowser.Controller.EnterZone("+iIndex+', "Dialog:AlertMessage");');dialog.onHide=new Function("oEvent","ITHit.WebDAV.Client.AjaxFileBrowser.Controller.LeaveZone("+iIndex+', "Dialog:AlertMessage");');dialog=dijitByIdNs("ithit_interface_customDialog");dialog.onShow=new Function("oEvent","ITHit.WebDAV.Client.AjaxFileBrowser.Controller.EnterZone("+iIndex+', "Dialog:Custom");');dialog.onHide=new Function("oEvent","ITHit.WebDAV.Client.AjaxFileBrowser.Controller.LeaveZone("+
iIndex+', "Dialog:Custom");');dialog=dijitByIdNs("ithit_interface_trialPeriodExpired");dialog.onShow=new Function("oEvent","ITHit.WebDAV.Client.AjaxFileBrowser.Controller.EnterZone("+iIndex+', "Dialog:TrialPeriodExpired");');dialog.onHide=new Function("oEvent","ITHit.WebDAV.Client.AjaxFileBrowser.Controller.LeaveZone("+iIndex+', "Dialog:TrialPeriodExpired");')};ITHit.oNS.Control._ShowDialogs=true;ITHit.oNS.Control.prototype._GetTreeId=function(){return this._ids.tree};
ITHit.oNS.Control.prototype._GetGridId=function(){return this._ids.grid};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser");ITHit.oNS.DocTemplates={"word_13":"template2013.dotx","word_07":"template2007.dot","excel_13":"template2013.xltx","excel_07":"template2007.xlt","powerpoint_13":"template2013.potx","powerpoint_07":"template2007.pot"};
(function(){var self=ITHit.DefineClass("ITHit.WebDAV.Client.AjaxFileBrowser.CopyMoveManager",function(){},{_Controller:null,_Action:null,_ItemUrls:null,_CurrentCommand:null,constructor:function(oController){this._Controller=oController;this._ItemUrls=[]},CopyItems:function(mItems){this.Clear();this._Action=self.ACTION_COPY;this._ItemUrls=[].concat(mItems);ITHit.Events.DispatchEvent(this,"OnUpdateItems")},CutItems:function(mItems){this.Clear();this._Action=self.ACTION_MOVE;this._ItemUrls=[].concat(mItems);
ITHit.Events.DispatchEvent(this,"OnUpdateItems")},Clear:function(){this._ItemUrls=[];this._CurrentCommand=null;ITHit.Events.DispatchEvent(this,"OnUpdateItems")},GetItemsLength:function(){return this._ItemUrls.length},GetAction:function(){return this._Action},PasteTo:function(sDestinationUrl){if(!sDestinationUrl)throw new ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions.AjaxFileBrowserException(ITHit.Phrases.AjaxFileBrowser.Exceptions.DestinationLocationNotPassed);if(this._ItemUrls.length===0)return;
if(this._Action===self.ACTION_COPY&&this._ItemUrls.length===1&&this._ItemUrls[0]===sDestinationUrl)sDestinationUrl=sDestinationUrl.replace(/[^\/]+\/?$/,"");var sCommandName=this._Action===self.ACTION_MOVE?"MoveQueueCommand":"CopyQueueCommand";this._CurrentCommand=this._Controller.Commands.Create(sCommandName,{HrefList:this._ItemUrls,ToFolderHref:sDestinationUrl,OnOverwrite:ITHit.Utils.MakeScopeClosure(this,"_OnOverwrite"),OnSuccess:ITHit.Utils.MakeScopeClosure(this,"_OnFinish")});this._CurrentCommand.Execute()},
SetOverwriteAction:function(sAction){if(this._CurrentCommand===null)return;var oCommand=this._CurrentCommand;if(sAction===self.OVERWRITE_CANCEL){if(this._Action===self.ACTION_MOVE)this.Clear();ITHit.Events.DispatchEvent(this,"OnCancel",[this._ItemUrls,oCommand.ToFolderHref,this._Action])}oCommand.SetOverwriteAction(sAction)},_OnOverwrite:function(sAbsoluteUrl){ITHit.Events.DispatchEvent(this,"OnOverwrite",[sAbsoluteUrl])},_OnFinish:function(){if(this._Action===self.ACTION_MOVE){ITHit.Events.DispatchEvent(this,
"OnMoveComplete",[this._ItemUrls,this._CurrentCommand.ToFolderHref,this._Action]);this.Clear()}else ITHit.Events.DispatchEvent(this,"OnCopyComplete",[this._ItemUrls,this._CurrentCommand.ToFolderHref,this._Action])}},{ACTION_COPY:"copy",ACTION_MOVE:"move",OVERWRITE_CANCEL:"cancel",OVERWRITE_ASK:"ask",OVERWRITE_YES:"yes",OVERWRITE_NO:"no",OVERWRITE_YES_ALL:"yes_all",OVERWRITE_NO_ALL:"no_all"})})();ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser");
ITHit.oNS.AjaxFileBrowserBase=function(){var className=this._GetClassName();if(className=="ITHit.WebDAV.Client.AjaxFileBrowser.AjaxFileBrowserBase")throw new ITHit.Exception("Class name is not implemented.");this._ClassId=className+"_"+ITHit.WebDAV.Client.AjaxFileBrowser.AjaxFileBrowserBase._Counter++};ITHit.oNS.AjaxFileBrowserBase._Counter=0;ITHit.oNS.AjaxFileBrowserBase.prototype._GetClassName=function(){return"ITHit.WebDAV.Client.AjaxFileBrowser.AjaxFileBrowserBase"};
ITHit.oNS.AjaxFileBrowserBase.prototype.AddListener=function(event,handler,scope){return ITHit.Events.AddListener(this,event,handler,scope)};ITHit.oNS.AjaxFileBrowserBase.prototype.DispatchEvent=function(event,params){if(!ITHit.Utils.IsArray(params))params=[params];return ITHit.Events.DispatchEvent(this,event,params)};ITHit.oNS.AjaxFileBrowserBase.prototype.RemoveListener=function(event,handler,scope){return ITHit.Events.RemoveListener(this,event,handler,scope)};
ITHit.oNS.AjaxFileBrowserBase.prototype.RemoveAllListeners=function(event){return ITHit.Events.RemoveAllListeners(this,event)};ITHit.oNS.AjaxFileBrowserBase.prototype.StopEvent=function(event){return ITHit.Events.Stop(event)};ITHit.oNS.AjaxFileBrowserBase.prototype.CallBaseMethod=function(method){var argsArray=Array.apply([],arguments);argsArray.splice(0,1)};ITHit.oNS.AjaxFileBrowserBase.prototype.toString=function(){return this._ClassId};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions");
ITHit.oNS.UploadProgressException=function(sUrl,sMessage,oInnerException){this.Url=sUrl;ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions.UploadProgressException.baseConstructor.call(this,sMessage,oInnerException)};ITHit.Extend(ITHit.oNS.UploadProgressException,ITHit.oNS.AjaxFileBrowserException);ITHit.oNS.UploadProgressException.prototype.Name="UploadProgressException";ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser");
ITHit.oNS.UploadProgressManager=function(iRepeatTime){this.Pool={};this.Counter=0;this.RepeatTime=0;this.TimerId=null;this.UploadInfoLibraryClass=ITHit.WebDAV.Client.UploadProgressInfo;this.ChangeProgressRefreshTime(iRepeatTime);this._ClassId="ITHit.WebDAV.Client.AjaxFileBrowser.UploadProgressManager_"+ITHit.WebDAV.Client.AjaxFileBrowser.UploadProgressManager._Counter++};ITHit.oNS.UploadProgressManager._Counter=0;
ITHit.oNS.UploadProgressManager.prototype.ChangeProgressRefreshTime=function(iRepeatTime){if(isNaN(iRepeatTime)||iRepeatTime<0)return;iRepeatTime=Math.ceil(iRepeatTime);if(0==iRepeatTime){this.RepeatTime=0;this._CancelSendReport();return}this.RepeatTime=iRepeatTime*1E3;this._StartSendReport()};ITHit.oNS.UploadProgressManager.prototype.AddResource=function(sUrl){this.Pool[sUrl]=true;this.Counter++;this._StartSendReport()};
ITHit.oNS.UploadProgressManager.prototype.RemoveResource=function(sUrl){if(this.Pool[sUrl]){delete this.Pool[sUrl];this.Counter--;if(!this.Counter)this._CancelSendReport()}return true};ITHit.oNS.UploadProgressManager.prototype._StartSendReport=function(){if(this.Counter&&this.RepeatTime&&!this.TimerId)this.TimerId=setTimeout(ITHit.Utils.MakeScopeClosure(this,"_CheckUploadProgress"),this.RepeatTime)};
ITHit.oNS.UploadProgressManager.prototype._CancelSendReport=function(){if(this.TimerId){clearTimeout(this.TimerId);this.TimerId=null}};
ITHit.oNS.UploadProgressManager.prototype._CheckUploadProgress=function(){var oOut={};this.TimerId=null;var oUploadInfo;for(var sUrl in this.Pool)try{oUploadInfo=ITHit.Events.DispatchEvent(this,"OnGetProgress",["OnGetProgress",sUrl]);if(!(oUploadInfo instanceof this.UploadInfoLibraryClass))throw new ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions.UploadProgressException(ITHit.Phrases.AjaxFileBrowser.Exceptions.UploadProgressInfoInstanceExpected);oOut[sUrl]=oUploadInfo}catch(e){var oResult;if(e instanceof
ITHit.Exception)oResult=new ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions.UploadProgressException(sUrl,e.Message,e);else oResult=new ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions.UploadProgressException(sUrl,ITHit.Phrases.AjaxFileBrowser.Exceptions.UploadProgressInfoInstanceExpected,ITHit.Exception(String(e)));ITHit.Events.DispatchEvent(this,"OnError",["OnError",oResult])}this._StartSendReport();ITHit.Events.DispatchEvent(this,"OnProgress",["OnProgress",oOut])};
ITHit.oNS.UploadProgressManager.prototype.toString=function(){return this._ClassId};ITHit.oNS.UploadProgressManager.prototype.OnReportReceive;ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser");
ITHit.oNS.UploadResult=function(sUrl,bSuccess,sErrorMessage,oStatus){if(!ITHit.Utils.IsString(sUrl)||""==sUrl||!ITHit.Utils.IsBoolean(bSuccess))throw"URL and Success status must be specified for upload result.";this.Url=sUrl;this.Success=bSuccess;this.ErrorMessage=sErrorMessage;this.Status=oStatus||null};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser");
ITHit.oNS.UploadIframe=function(oContainer,sName){this.Url="";this.UploadUrl="";this.Name=sName?sName:"ITHit_Upload_Iframe_"+ITHit.WebDAV.Client.AjaxFileBrowser.UploadIframe._Counter;this._Iframe;this._Container=oContainer;this._FFLoadCheckRepeat=1E4;this._IframeIETimer=null;this._IframeFFTimer=null;this._IframeLoaded=false;var createIframeByStandard=true;if(ITHit.DetectBrowser.IE&&ITHit.DetectBrowser.IE<10)try{this._Iframe=document.createElement('<IFRAME name="'+this.Name+'">');createIframeByStandard=
false}catch(e){}if(createIframeByStandard){this._Iframe=document.createElement("IFRAME");this._Iframe.name=this.Name}this._Iframe.src="javascript:{};";this._Iframe.className="upload_iframe";this._Container.appendChild(this._Iframe);this._Iframe.onload=ITHit.Utils.MakeScopeClosure(this,"_LoadHandler");this._Iframe.onreadystatechange=ITHit.Utils.MakeScopeClosure(this,"_ReadyStateChangeHandler");this._ClassId="ITHit.WebDAV.Client.AjaxFileBrowser.UploadIframe_"+ITHit.WebDAV.Client.AjaxFileBrowser.UploadIframe._Counter++};
ITHit.oNS.UploadIframe._Counter=0;
ITHit.oNS.UploadIframe.prototype.BeginUpload=function(oForm){if(!(oForm instanceof ITHit.WebDAV.Client.AjaxFileBrowser.UploadFormObject)&&!(oForm instanceof ITHit.WebDAV.Client.AjaxFileBrowser.UploadDropObjectAdapter))throw ITHit.Exception("Parameter expected to be UploadFormObject or UploadDropObjectAdapter instance.");this.Url=oForm.Url;this.UploadUrl=oForm.UploadUrl;oForm.SetFormTarget(this.Name);if(ITHit.DetectBrowser.FF)this._IframeFFTimer=setTimeout(ITHit.Utils.MakeScopeClosure(this,"_FirefoxLoadCheck"),
this._FFLoadCheckRepeat);oForm.onsubmit=null;oForm.Submit();ITHit.Events.DispatchEvent(this,"OnLoadStart",["OnLoadStart",this.Url])};
ITHit.oNS.UploadIframe.prototype._LoadHandler=function(oEvent){if(this._IframeIETimer){clearTimeout(this._IframeIETimer);this._IframeIETimer=null;this._Iframe.onreadystatechange=null}if(this._IframeFFTimer){clearTimeout(this._IframeFFTimer);this._IframeFFTimer=null}if(this._IframeLoaded)return;this._IframeLoaded=true;var oResult=this._GetUploadSuccess();this._FinishHandler(oResult);if(oResult.Success)this._SuccessHandler("OnLoad",oResult);else this._ErrorHandler("OnError",oResult)};
ITHit.oNS.UploadIframe.prototype._FinishHandler=function(oResult){var oResponse=new ITHit.HttpResponse(oResult.Url,oResult.Status.Code,oResult.Status.Description);oResponse.SetBodyText(oResult.ErrorMessage||"");ITHit.Events.DispatchEvent(this,"OnFinish",[oResponse])};ITHit.oNS.UploadIframe.prototype._SuccessHandler=function(sEvent,oResult){if(!ITHit.Events.DispatchEvent(this,"OnLoad",["OnLoad",oResult.Url])){this._RemoveIframeTimer();return false}};
ITHit.oNS.UploadIframe.prototype._ErrorHandler=function(sEvent,oResult){if(!ITHit.Events.DispatchEvent(this,"OnError",["OnError",oResult.Url,oResult.Status,String(oResult.ErrorBody||"")])){this._RemoveIframeTimer();return false}};
ITHit.oNS.UploadIframe.prototype._ReadyStateChangeHandler=function(oEvent){if(this._IframeIETimer){clearTimeout(this._IframeIETimer);this._IframeIETimer=null}if("interactive"==this._Iframe.readyState)this._IframeIETimer=setTimeout(ITHit.Utils.MakeScopeClosure(this,"_CompliteStateCheckNew",oEvent),500);if("complete"==this._Iframe.readyState)this._IframeIETimer=setTimeout(ITHit.Utils.MakeScopeClosure(this,"_CompliteStateCheckNew",oEvent),500)};
ITHit.oNS.UploadIframe.prototype._CompliteStateCheckNew=function(oEvent){if(this._IframeIETimer){clearTimeout(this._IframeIETimer);this._IframeIETimer=null}try{this._Iframe.contentWindow.document.body;this._LoadHandler(oEvent)}catch(e){this._IframeIETimer=setTimeout(ITHit.Utils.MakeScopeClosure(this,"_CompliteStateCheck",oEvent),1E3)}};
ITHit.oNS.UploadIframe.prototype._FirefoxLoadCheck=function(){if(!ITHit.DetectBrowser.FF)return;try{this._Iframe.contentWindow.document;this._IframeFFTimer=setTimeout(ITHit.Utils.MakeScopeClosure(this,"_FirefoxLoadCheck"),this._FFLoadCheckRepeat)}catch(e){this._LoadHandler(null)}};
ITHit.oNS.UploadIframe.prototype._GetUploadSuccess=function(){var oXml=new ITHit.XMLDoc,oStatus=new ITHit.WebDAV.Client.AjaxFileBrowser.UploadResult(this.Url,true),bPassCheck=false,bGetTitle=true,isIE=ITHit.DetectBrowser.IE,document,body;try{document=this._Iframe.contentWindow.document;body=document.body}catch(e){if(-1==e.message.indexOf("denied")){oStatus.Success=false;bGetTitle=false}else{oStatus.Success=true;bPassCheck=true}}if(oStatus.Success&&!bPassCheck)if(document)if(document.XMLDocument)oXml.load(document.XMLDocument.xml);
else if(!body)if(isIE&&document.documentElement){var xmlStr=ITHit.XMLDoc.toString(document.documentElement);oXml.load(xmlStr)}else if(document.firstChild)oXml.appendChild(new ITHit.XMLDoc(document.firstChild.cloneNode(true)));else if(isIE<9)bPassCheck=true;else oStatus.Success=false;else if(isIE&&isIE<9)if(navigator.userAgent.indexOf("Trident/")!==-1&&/HTTP\/1.1\s+2\d{2}/i.test(body.innerHTML)||oStatus.Url.indexOf("%")!==-1)bPassCheck=true;else oStatus.Success=false;else oStatus.Success=false;else oStatus.Success=
false;if(oStatus.Success)if(!bPassCheck){var oRequest=new ITHit.WebDAV.Client.Methods.MultiResponse(oXml,oStatus.Url);if(oRequest.Responses.length){oStatus.Status=oRequest.Responses[0].Status;oStatus.Success=oStatus.Status.IsSuccess()}else oStatus.Success=false}if(!oStatus.Success){if(oStatus.Status)oStatus.ErrorMessage=oStatus.Status.Description;else if(bGetTitle){var oTitle=this._Iframe.contentWindow.document.getElementsByTagName("TITLE");if(oTitle.length)oStatus.ErrorMessage=oTitle[0].text}if(!oStatus.ErrorMessage)oStatus.ErrorMessage=
ITHit.Phrases.AjaxFileBrowser.Interface.FileUploadFailed;if(body)oStatus.ErrorBody=body.innerHTML}if(!oStatus.Status)if(oStatus.Success)oStatus.Status=new ITHit.WebDAV.Client.HttpStatus(201,"Created");else oStatus.Status=new ITHit.WebDAV.Client.HttpStatus(400,"Bad Request");return oStatus};ITHit.oNS.UploadIframe.prototype.Destruct=function(){ITHit.Events.RemoveAllListeners(this);this._RemoveIframeTimer()};
ITHit.oNS.UploadIframe.prototype._RemoveIframeTimer=function(){if(this._DelareRemoveIframe)return;this._DelareRemoveIframe=true;setTimeout(ITHit.Utils.MakeScopeClosure(this,"_RemoveIframe"),0)};
ITHit.oNS.UploadIframe.prototype._RemoveIframe=function(){if(this._IframeIETimer){clearTimeout(this._IframeIETimer);this._IframeIETimer=null}if(this._IframeFFTimer){clearTimeout(this._IframeFFTimer);this._IframeFFTimer=null}this._Iframe.onload=this._Iframe.onreadystatechange=null;ITHit.Components.YAHOO.util.Event.removeListener(this._Iframe,"readystatechange",this._ReadyStateChangeHandler);ITHit.Components.YAHOO.util.Event.removeListener(this._Iframe,"load",this._LoadHandler);if(this._Iframe){this._Container.removeChild(this._Iframe);
delete this._Iframe}};ITHit.oNS.UploadIframe.prototype.toString=function(){return this._ClassId};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser");
ITHit.oNS.UploadIframeManager=function(oController,oContainer,oUploadProgress,sName){this._Controller=oController;this._UploadStarted=false;ITHit.WebDAV.Client.AjaxFileBrowser.UploadIframeManager.baseConstructor.call(this,oContainer,sName);this.base=ITHit.WebDAV.Client.AjaxFileBrowser.UploadIframeManager.base;this._UploadProgress=oUploadProgress;ITHit.Events.AddListener(this._UploadProgress,"OnError","_ErrorProgressHandler",this);this._ClassId="ITHit.WebDAV.Client.AjaxFileBrowser.UploadIframeManager_"+
ITHit.WebDAV.Client.AjaxFileBrowser.UploadIframeManager._Counter++};ITHit.oNS.UploadIframeManager._Counter=0;ITHit.Extend(ITHit.oNS.UploadIframeManager,ITHit.oNS.UploadIframe);ITHit.oNS.UploadIframeManager.prototype.BeginUpload=function(oUploadFile){this._UploadStarted=true;oUploadFile.Form.SetUrl(oUploadFile.Url);oUploadFile.Form.SetUploadUrl(oUploadFile.UploadUrl);this.base.BeginUpload.call(this,oUploadFile.Form);this._UploadProgress.AddResource(oUploadFile.Url)};
ITHit.oNS.UploadIframeManager.prototype._SuccessHandler=function(sEvent,oResult){this._UploadProgress.RemoveResource(oResult.Url);this.base._SuccessHandler.call(this,"OnLoad",oResult)};ITHit.oNS.UploadIframeManager.prototype._ErrorHandler=function(sEvent,oResult){this._UploadProgress.RemoveResource(oResult.Url);this.base._ErrorHandler.call(this,"OnError",oResult)};
ITHit.oNS.UploadIframeManager.prototype._ErrorProgressHandler=function(sEvent,oResult){var oStatus;if(oResult.InnerException&&oResult.InnerException.Status)oStatus=oResult.InnerException.Status;else oStatus=ITHit.WebDAV.Client.HttpStatus.BadRequest;var oResponse=new ITHit.HttpResponse(oResult.Url,oStatus.Code,oStatus.Description);ITHit.Events.DispatchEvent(this,"OnFinish",[oResponse]);this._ErrorHandler(sEvent,oResult)};
ITHit.oNS.UploadIframeManager.prototype.Destruct=function(){if(this._UploadStarted)this._UploadProgress.RemoveResource(this.Url);this.base.Destruct.call(this)};ITHit.oNS.UploadIframeManager.prototype.toString=function(){return this._ClassId};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser");
ITHit.oNS.InternalUploadProgressInfo=function(sHref,iBytesUploaded,iContentLength,oLastChunkSaved){ITHit.WebDAV.Client.AjaxFileBrowser.InternalUploadProgressInfo.baseConstructor.call(this,sHref,iBytesUploaded,iContentLength,oLastChunkSaved);this.base=ITHit.WebDAV.Client.AjaxFileBrowser.InternalUploadProgressInfo.base};ITHit.Extend(ITHit.oNS.InternalUploadProgressInfo,ITHit.WebDAV.Client.UploadProgressInfo);ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser");
ITHit.oNS.Uploader=function(){this._ClassId="ITHit.WebDAV.Client.AjaxFileBrowser.Uploader_"+ITHit.WebDAV.Client.AjaxFileBrowser.Uploader._Counter++;this._IisMaxUploadPartSize=2097151*1024};ITHit.oNS.Uploader._Counter=0;ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser");ITHit.oNS.UploadFirefox=function(){this._ClassId="ITHit.WebDAV.Client.AjaxFileBrowser.UploadFirefox_"+ITHit.WebDAV.Client.AjaxFileBrowser.UploadFirefox._Counter++;this._LastReportTime=(new Date(0)).getTime();ITHit.WebDAV.Client.AjaxFileBrowser.UploadFirefox.baseConstructor.call(this)};
ITHit.Extend(ITHit.oNS.UploadFirefox,ITHit.WebDAV.Client.AjaxFileBrowser.Uploader);ITHit.oNS.UploadFirefox._Counter=0;
ITHit.oNS.UploadFirefox.prototype.BeginUpload=function(oUploadFile){this._UploadFile=oUploadFile;this.Method=oUploadFile.Method;this.Url=oUploadFile.Url;this.UploadUrl=oUploadFile.UploadUrl;var oFile=oUploadFile.Form._GetInputFile().files[oUploadFile.FileIndex];this._XHR=new XMLHttpRequest;var oXhr=this._XHR;oXhr.upload.addEventListener("progress",ITHit.Utils.MakeScopeClosure(this,"_ProgressHandler",oXhr),false);oXhr.onreadystatechange=ITHit.Utils.MakeScopeClosure(this,"_ReadyStateChange",oXhr);oXhr.open(this.Method,
this.UploadUrl,true);try{oXhr.withCredentials=true}catch(e){}if(!this._SkipLoadStartHandling)ITHit.Events.DispatchEvent(this,"OnLoadStart",["OnLoadStart",this.Url]);try{if(ITHit.DetectBrowser.FF>=7){var iisDetected=oUploadFile.Form.GetIisDetected();var iUploadPartSize=oUploadFile.Form.GetMaxUploadSegmentBytes();var iFileSize=oFile.fileSize||oFile.size;var bPartialUpload=iisDetected||iUploadPartSize>0&&iUploadPartSize<iFileSize;if(iisDetected&&(iUploadPartSize<=0||iUploadPartSize>this._IisMaxUploadPartSize))iUploadPartSize=
this._IisMaxUploadPartSize;var iBytesUploaded=oUploadFile.Form.GetBytesUploaded(oUploadFile.FileIndex);this._BytesUploadedEnd=null;if(iBytesUploaded&&iBytesUploaded>=iFileSize)ITHit.Events.DispatchEvent(this,"OnLoad",["OnLoad",this.Url]);else if(iBytesUploaded&&ITHit.Utils.IsInteger(iBytesUploaded)||bPartialUpload){if(bPartialUpload&&!ITHit.Utils.IsInteger(iBytesUploaded))iBytesUploaded=0;var iBytesEnd=iFileSize;if(bPartialUpload){iBytesEnd=iBytesUploaded+iUploadPartSize;if(iBytesEnd>iFileSize)iBytesEnd=
iFileSize}ITHit.Events.DispatchEvent(this,"OnUploadPart",[this.Url,iBytesUploaded,iFileSize]);if(iBytesUploaded!==0||iBytesEnd!==iFileSize)oXhr.setRequestHeader("Content-Range","bytes "+iBytesUploaded+"-"+(iBytesEnd-1)+"/"+iFileSize);if(bPartialUpload&&iBytesEnd<iFileSize){this._BytesUploadedEnd=iBytesEnd;oXhr.send(oFile.slice(iBytesUploaded,iBytesEnd))}else oXhr.send(oFile.slice(iBytesUploaded))}else oXhr.send(oFile)}else oXhr.sendAsBinary(oFile.getAsBinary())}catch(e){this._ErrorHandler("Error",
oXhr)}return false};ITHit.oNS.UploadFirefox.prototype._ProgressHandler=function(oXmlObj,oEvent){var iNow=(new Date).getTime();if(iNow-this._LastReportTime<1E3)return;this._LastReportTime=iNow;var oReport={};oReport[this.Url]=new ITHit.WebDAV.Client.AjaxFileBrowser.InternalUploadProgressInfo(this.Url,oEvent.loaded,oEvent.total);ITHit.Events.DispatchEvent(this,"OnProgress",["OnProgress",oReport])};
ITHit.oNS.UploadFirefox.prototype._LoadHandler=function(oXmlObj,oEvent){var oStatus=new ITHit.WebDAV.Client.HttpStatus(oXmlObj.status,oXmlObj.statusText);if(oStatus.IsSuccess()){if(this._UploadFile){var oUploadFile=this._UploadFile;var bPartialUpload=oUploadFile.Form.GetIisDetected()||oUploadFile.Form.GetMaxUploadSegmentBytes()>0;if(bPartialUpload&&ITHit.Utils.IsInteger(this._BytesUploadedEnd)){this._SkipLoadStartHandling=true;oUploadFile.Form.SetBytesUploaded(oUploadFile.FileIndex,this._BytesUploadedEnd);
this.BeginUpload(this._UploadFile);return}}ITHit.Events.DispatchEvent(this,"OnLoad",["OnLoad",this.Url])}else this._ErrorHandler(oXmlObj,oEvent,oStatus)};ITHit.oNS.UploadFirefox.prototype._ErrorHandler=function(oXmlObj,oEvent,oStatus){ITHit.Events.DispatchEvent(this,"OnError",["OnError",this.Url,oStatus,oXmlObj.responseText])};
ITHit.oNS.UploadFirefox.prototype._FinishHandler=function(oXmlObj,oStatus){var oResponse=new ITHit.HttpResponse(this.Url,oStatus.Code,oStatus.Description);oResponse._SetBody(oXmlObj.responseXML,oXmlObj.responseText);ITHit.Events.DispatchEvent(this,"OnFinish",[oResponse])};
ITHit.oNS.UploadFirefox.prototype._ReadyStateChange=function(oXmlObj,oEvent){if(4!=oXmlObj.readyState)return;var oStatus=new ITHit.WebDAV.Client.HttpStatus(oXmlObj.status,oXmlObj.statusText);this._FinishHandler(oXmlObj,oStatus);if(oStatus.IsSuccess())this._LoadHandler(oXmlObj,oEvent);else this._ErrorHandler(oXmlObj,oEvent,oStatus)};ITHit.oNS.UploadFirefox.prototype.Destruct=function(){this._XHR.abort()};ITHit.oNS.UploadFirefox.prototype.toString=function(){return this._ClassId};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser");
ITHit.oNS.UploadWebKit=function(){this._ClassId="ITHit.WebDAV.Client.AjaxFileBrowser.UploadWebKit_"+ITHit.WebDAV.Client.AjaxFileBrowser.UploadWebKit._Counter++;this._LastReportTime=new Date(0);this.CheckTimer;this._LastProgressReport;this._XHR;ITHit.WebDAV.Client.AjaxFileBrowser.UploadWebKit.baseConstructor.call(this)};ITHit.Extend(ITHit.oNS.UploadWebKit,ITHit.WebDAV.Client.AjaxFileBrowser.Uploader);ITHit.oNS.UploadWebKit._Counter=0;
ITHit.oNS.UploadWebKit.prototype.BeginUpload=function(oUploadFile){this._UploadFile=oUploadFile;this.Method=oUploadFile.Method;this.Url=oUploadFile.Url;this.UploadUrl=oUploadFile.UploadUrl;var oFile=oUploadFile.Form._GetInputFile().files[oUploadFile.FileIndex];this._XHR=new XMLHttpRequest;var oUpload=this._XHR.upload;var oXhr=this._XHR;var _this=this;oUpload.onloadstart=function(oEvent){_this._LoadStartHandler(oEvent,oXhr)};oUpload.onprogress=function(oEvent){_this._ProgressHandler(oEvent,oXhr)};
oXhr.onreadystatechange=function(oEvent){_this._ReadyStateChange(oEvent,oXhr)};oXhr.open(this.Method,this.UploadUrl,true);oXhr.setRequestHeader("X-Requested-With","XMLHttpRequest");oXhr.setRequestHeader("X-File-Name",oFile.fileName);oXhr.setRequestHeader("X-File-Size",oFile.fileSize);try{oXhr.withCredentials=true}catch(e){}var iisDetected=oUploadFile.Form.GetIisDetected();var iUploadPartSize=oUploadFile.Form.GetMaxUploadSegmentBytes();var iFileSize=oFile.fileSize||oFile.size;var bPartialUpload=iisDetected||
iUploadPartSize>0&&iUploadPartSize<iFileSize;if(iisDetected&&(iUploadPartSize<=0||iUploadPartSize>this._IisMaxUploadPartSize))iUploadPartSize=this._IisMaxUploadPartSize;var iBytesUploaded=oUploadFile.Form.GetBytesUploaded(oUploadFile.FileIndex);this._BytesUploadedEnd=null;if(iBytesUploaded&&iBytesUploaded>=iFileSize)ITHit.Events.DispatchEvent(this,"OnLoad",["OnLoad",this.Url]);else if(iBytesUploaded&&ITHit.Utils.IsInteger(iBytesUploaded)||bPartialUpload){if(bPartialUpload&&!ITHit.Utils.IsInteger(iBytesUploaded))iBytesUploaded=
0;var iBytesEnd=iFileSize;if(bPartialUpload){iBytesEnd=iBytesUploaded+iUploadPartSize;if(iBytesEnd>iFileSize)iBytesEnd=iFileSize}ITHit.Events.DispatchEvent(this,"OnUploadPart",[this.Url,iBytesUploaded,iFileSize]);if(iBytesUploaded!==0||iBytesEnd!==iFileSize)oXhr.setRequestHeader("Content-Range","bytes "+iBytesUploaded+"-"+(iBytesEnd-1)+"/"+iFileSize);if(bPartialUpload&&iBytesEnd<iFileSize){this._BytesUploadedEnd=iBytesEnd;oXhr.send(oFile.slice(iBytesUploaded,iBytesEnd))}else oXhr.send(oFile.slice(iBytesUploaded))}else oXhr.send(oFile);
return false};ITHit.oNS.UploadWebKit.prototype._LoadStartHandler=function(oEvent,oXmlObj){if(!this._SkipLoadStartHandling)ITHit.Events.DispatchEvent(this,"OnLoadStart",[oEvent,this.Url])};
ITHit.oNS.UploadWebKit.prototype._ProgressHandler=function(oEvent,oXmlObj){var oNow=new Date;if(oNow.getTime()-this._LastReportTime.getTime()<1E3)return true;this._LastReportTime=oNow;var oReport={};oReport[this.Url]=new ITHit.WebDAV.Client.AjaxFileBrowser.InternalUploadProgressInfo(this.Url,oEvent.loaded,oEvent.total);ITHit.Events.DispatchEvent(this,"OnProgress",["OnProgress",oReport])};
ITHit.oNS.UploadWebKit.prototype._ReadyStateChange=function(oEvent,oXmlObj){if(4!=oXmlObj.readyState)return;var oStatus=new ITHit.WebDAV.Client.HttpStatus(oXmlObj.status,oXmlObj.statusText);this._FinishHandler(oXmlObj,oStatus);if(oStatus.IsSuccess())this._LoadHandler(oEvent,oXmlObj);else this._ErrorHandler(oEvent,oXmlObj,oStatus)};
ITHit.oNS.UploadWebKit.prototype._LoadHandler=function(oEvent,oXmlObj){if(this._UploadFile){var oUploadFile=this._UploadFile;var bPartialUpload=oUploadFile.Form.GetIisDetected()||oUploadFile.Form.GetMaxUploadSegmentBytes()>0;if(bPartialUpload&&ITHit.Utils.IsInteger(this._BytesUploadedEnd)){this._SkipLoadStartHandling=true;oUploadFile.Form.SetBytesUploaded(oUploadFile.FileIndex,this._BytesUploadedEnd);this.BeginUpload(this._UploadFile);return}}ITHit.Events.DispatchEvent(this,"OnLoad",["OnLoad",this.Url])};
ITHit.oNS.UploadWebKit.prototype._ErrorHandler=function(oEvent,oXmlObj,oStatus){ITHit.Events.DispatchEvent(this,"OnError",["OnError",this.Url,oStatus,oXmlObj.responseText])};ITHit.oNS.UploadWebKit.prototype._FinishHandler=function(oXmlObj,oStatus){var oResponse=new ITHit.HttpResponse(this.Url,oStatus.Code,oStatus.Description);oResponse._SetBody(oXmlObj.responseXML,oXmlObj.responseText);ITHit.Events.DispatchEvent(this,"OnFinish",[oResponse])};
ITHit.oNS.UploadWebKit.prototype.Destruct=function(){if(typeof this._XHR["upload"]!=null){var oUpload=this._XHR.upload;oUpload.onloadstart=null;oUpload.onprogress=null}this._XHR.onreadystatechange=null;this._XHR.abort()};ITHit.oNS.UploadWebKit.prototype.toString=function(){return this._ClassId};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser");
ITHit.oNS.UploadProgressInfo=function(iBytesUploaded,iContentLength){if(!ITHit.Utils.IsInteger(iBytesUploaded))throw new ITHit.Exceptions.ArgumentException(ITHit.Phrases.AjaxFileBrowser.Exceptions.WrongUploadedBytesType,iBytesUploaded);if(!ITHit.Utils.IsInteger(iContentLength))throw new ITHit.Exceptions.ArgumentException(ITHit.Phrases.AjaxFileBrowser.Exceptions.WrongContentLengthType,iContentLength);if(iBytesUploaded>iContentLength)throw new ITHit.Exceptions.ExpressionException(ITHit.Phrases.AjaxFileBrowser.Exceptions.BytesUploadedIsMoreThanTotalFileContentLength);
this.BytesUploaded=iBytesUploaded;this.TotalContentLength=iContentLength};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser");
ITHit.oNS.UploadAutoResumeManager=function(iRepeatTime,iRepeatCount,iMaxUploadCount){this.Pool={};this.Counter=0;this.RepeatTime=0;this.RepeatCount=-1;this.TimerId=null;this._FilesToResume=[];this._NextFileIndex=0;this._MaxUploadCount=iMaxUploadCount;this.ChangeAutoResumeSettings(iRepeatTime,iRepeatCount);this._ClassId="ITHit.WebDAV.Client.AjaxFileBrowser.UploadAutoResumeManager_"+ITHit.WebDAV.Client.AjaxFileBrowser.UploadAutoResumeManager._Counter++};ITHit.oNS.UploadAutoResumeManager._Counter=0;
ITHit.oNS.UploadAutoResumeManager.prototype.ChangeAutoResumeSettings=function(iRepeatTime,iRepeatCount){if((isNaN(iRepeatTime)||iRepeatTime<0)&&(isNaN(iRepeatCount)||iRepeatCount<1))return;iRepeatTime=Math.ceil(iRepeatTime);if(0==iRepeatTime){this.RepeatTime=0;this._CancelTryToResume();return}if(!isNaN(iRepeatCount)&&iRepeatCount>=0)this.RepeatCount=iRepeatCount;else this.RepeatCount=Number.MAX_VALUE;this.RepeatTime=iRepeatTime;this._StartTryToResume()};
ITHit.oNS.UploadAutoResumeManager.prototype.AddResource=function(sUrl){if(this.Pool[sUrl])return;this.Pool[sUrl]={RepeatTime:0,RepeatCount:this.RepeatCount};this.Counter++;this._StartTryToResume()};ITHit.oNS.UploadAutoResumeManager.prototype.RemoveResource=function(sUrl){if(typeof this.Pool[sUrl]!="undefined"){delete this.Pool[sUrl];this.Counter--;if(!this.Counter)this._CancelTryToResume()}return true};
ITHit.oNS.UploadAutoResumeManager.prototype._StartTryToResume=function(){if(this.Counter&&this.RepeatTime&&!this.TimerId)this.TimerId=setTimeout(ITHit.Utils.MakeScopeClosure(this,"_CheckTryToResume"),1E3)};ITHit.oNS.UploadAutoResumeManager.prototype._CancelTryToResume=function(){if(this.TimerId){clearTimeout(this.TimerId);this.TimerId=null}};
ITHit.oNS.UploadAutoResumeManager.prototype._CheckTryToResume=function(){this.TimerId=null;this._FilesToResume=[];var iUploadCounter=0;for(var sUrl in this.Pool){if(!this.Pool.hasOwnProperty(sUrl))continue;if(typeof this.Pool[sUrl]=="undefined")continue;var oUpload=this.Pool[sUrl];var iCounter=oUpload.RepeatTime+1;oUpload.RepeatTime=iCounter;if(iCounter>=this.RepeatTime){oUpload.RepeatTime=0;oUpload.RepeatCount--;if(oUpload.RepeatCount<0){this.RemoveResource(sUrl);continue}this._FilesToResume.push({Url:sUrl})}ITHit.Events.DispatchEvent(this,
"OnAutoResumeRetryIn",["OnAutoResumeRetryIn",sUrl,this.RepeatTime-iCounter+1]);iUploadCounter++;if(iUploadCounter>=this._MaxUploadCount)break}this._NextFileIndex=0;this._TryToResumeNextFile()};
ITHit.oNS.UploadAutoResumeManager.prototype._TryToResumeNextFile=function(){if(this._NextFileIndex>=this._FilesToResume.length){this._StartTryToResume();return}var oUpload=this._FilesToResume[this._NextFileIndex];var sUrl=oUpload.Url;if(typeof this.Pool[sUrl]=="undefined")this._GotoNextFile();else try{var self=this;var oProgress=ITHit.Events.DispatchEvent(this,"OnGetProgress",["OnGetProgress",sUrl,function(oResult){self._GetProgressCallback(oResult,sUrl)}])}catch(e){}};
ITHit.oNS.UploadAutoResumeManager.prototype._GetProgressCallback=function(oResult,sUrl){if(oResult.IsSuccess||oResult.Error instanceof ITHit.WebDAV.Client.Exceptions.NotFoundException){var uploadInfo={Url:sUrl,BytesUploaded:0};var oProgress=oResult.Result;if(oProgress)uploadInfo={Url:sUrl,Size:oProgress.TotalContentLength,BytesUploaded:oProgress.BytesUploaded};ITHit.Events.DispatchEvent(this,"OnTryToResume",["OnTryToResume",uploadInfo])}else{var e=oResult.Error;ITHit.Events.DispatchEvent(this,"OnTryToResumeError",
["OnTryToResumeError",sUrl,e.Status,e.Message])}this._GotoNextFile()};ITHit.oNS.UploadAutoResumeManager.prototype._GotoNextFile=function(){this._NextFileIndex++;setTimeout(ITHit.Utils.MakeScopeClosure(this,"_TryToResumeNextFile"),10)};ITHit.oNS.UploadAutoResumeManager.prototype.toString=function(){return this._ClassId};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser");
ITHit.oNS.UploadManager=function(oUploadController,oController,oIframeContainer,iMaxUploadsCount,iRepeatTime){this._ClassId="ITHit.WebDAV.Client.AjaxFileBrowser.UploadManager_"+ITHit.WebDAV.Client.AjaxFileBrowser.UploadManager._Counter++;this._Controller=oController;this._UploadController=oUploadController;this.MaxUploadsCount=iMaxUploadsCount;this._Container=oIframeContainer;this._UploadCounter=0;this._GroupList={};this._GroupIndex=0;this._UploadOrder=[];this._UploadFiles={};this._UploadProgress=
new ITHit.WebDAV.Client.AjaxFileBrowser.UploadProgressManager(iRepeatTime);ITHit.Events.AddListener(this._UploadProgress,"OnGetProgress","_GetProgressHandler",this);ITHit.Events.AddListener(this._UploadProgress,"OnProgress","_ProgressHandler",this);this._AutoResumeManager=new ITHit.WebDAV.Client.AjaxFileBrowser.UploadAutoResumeManager(this._Controller.UploadRetryIntervalSeconds,this._Controller.UploadRetryMaxCount,this.MaxUploadsCount);ITHit.Events.AddListener(this._AutoResumeManager,"OnTryToResume",
"_TryToResumeHandler",this);ITHit.Events.AddListener(this._AutoResumeManager,"OnGetProgress","_GetProgressHandler",this);ITHit.Events.AddListener(this._AutoResumeManager,"OnAutoResumeRetryIn","_AutoResumeRetryInHandler",this);ITHit.Events.AddListener(this._AutoResumeManager,"OnTryToResumeError","_TryToResumeErrorHandler",this)};ITHit.oNS.UploadManager._Counter=0;ITHit.oNS.UploadManager.prototype.ChangeProgressRefreshTime=function(iRepeatTime){return this._UploadProgress.ChangeProgressRefreshTime(iRepeatTime)};
ITHit.oNS.UploadManager.prototype.CheckFileExistenceInUploadPool=function(sUrl){return this._UploadFiles.hasOwnProperty(sUrl)};
ITHit.oNS.UploadManager.prototype.AddFilesToPool=function(aUploadFiles){var iGroupIndex=this._GroupIndex++;this._GroupList[iGroupIndex]=0;for(var i=0,l=aUploadFiles.length;i<l;i++){var oFile=aUploadFiles[i];var sUrl=oFile.Url;ITHit.Events.DispatchEvent(this,"OnAddToPool",["OnAddToPool",oFile]);this._UploadOrder.push(sUrl);this._UploadFiles[sUrl]={Url:sUrl,UploadUrl:oFile.Url,Index:this._UploadOrder.length-1,Method:oFile.Method,Status:"queue",Uploader:null,IsResumable:this._UploadController.IsResumeSupported(),
Form:oFile.Form,GroupIndex:iGroupIndex,RewriteAction:oFile.RewriteAction,FileIndex:oFile.FileIndex,FileExists:oFile.FileExists,IsFolder:oFile.IsFolder,BaseUrl:oFile.BaseUrl};this._GroupList[iGroupIndex]++}setTimeout(ITHit.Utils.MakeScopeClosure(this,"_StartFromQueue"),10);return false};ITHit.oNS.UploadManager.prototype.Restart=function(sUrl){if(!this._UploadFiles[sUrl])return false;this._UploadFiles[sUrl].Status="restart";this._StartFromQueue()};
ITHit.oNS.UploadManager.prototype._TryToResumeHandler=function(sEvent,aUploads){if(!ITHit.Utils.IsArray(aUploads))aUploads=[aUploads];ITHit.Events.DispatchEvent(this,"OnTryToResume",["OnTryToResume",aUploads]);this.ResumeUpload(aUploads,true);for(var i=0;i<aUploads.length;i++){var sUrl=aUploads[i].Url;var oUploadFile=this._UploadFiles[sUrl];if(oUploadFile)this._UploadFile(oUploadFile)}};
ITHit.oNS.UploadManager.prototype.ResumeUpload=function(aUploads,bFromAutoResume){if(!ITHit.Utils.IsArray(aUploads))aUploads=[aUploads];for(var i=0;i<aUploads.length;i++){var uploadInfo=aUploads[i];var sUrl=uploadInfo.Url;var oUploadFile=this._UploadFiles[sUrl];if(oUploadFile){oUploadFile.Status="resume";var iBytesUploaded=uploadInfo.BytesUploaded;if(iBytesUploaded)oUploadFile.Form.SetBytesUploaded(oUploadFile.FileIndex,iBytesUploaded)}this._AutoResumeManager.RemoveResource(sUrl)}if(bFromAutoResume!==
true)setTimeout(ITHit.Utils.MakeScopeClosure(this,"_StartFromQueue"),10)};
ITHit.oNS.UploadManager.prototype._StartFromQueue=function(){if(this._UploadCounter<0)this._UploadCounter=0;if(this._UploadCounter<this.MaxUploadsCount){var oUploadFile;for(var iIndex in this._UploadOrder){if(!this._UploadOrder.hasOwnProperty(iIndex))continue;var sStatus=this._UploadFiles[this._UploadOrder[iIndex]].Status;if("queue"==sStatus||"restart"==sStatus||"resume"==sStatus){oUploadFile=this._UploadFiles[this._UploadOrder[iIndex]];break}}if(oUploadFile){var sUrl=oUploadFile.Url;if("queue"==
sStatus&&ITHit.WebDAV.Client.AjaxFileBrowser.UploadController.DefaultActions.Ask==oUploadFile.RewriteAction)if(ITHit.Events.DispatchEvent(this,"OnItemExists",["OnItemExists",sUrl])){var sFileName=sUrl.substr(sUrl.lastIndexOf("/")+1);if(sFileName!=""&&!confirm(ITHit.Phrases.AjaxFileBrowser.Interface.FileExistsOverwriteConfirmQuestion.Paste(sFileName))){ITHit.Events.DispatchEvent(this,"OnCancelUpload",["OnCancelUpload",sUrl]);this._StartFromQueue();return false}}if(++this._UploadCounter<=this.MaxUploadsCount){if(this._UploadCounter<
this.MaxUploadsCount&&!oUploadFile.IsFolder)setTimeout(ITHit.Utils.MakeScopeClosure(this,"_StartFromQueue"),0);this._UploadFile(oUploadFile)}else this._UploadCounter--}}};
ITHit.oNS.UploadManager.prototype._UploadFile=function(oUploadFile){if(oUploadFile.IsFolder){oUploadFile.Status="upload";var self=this;var sUrl=oUploadFile.Url;this._Controller.CreateFolderAsync(sUrl,function(oResult){var bSuccess=oResult.IsSuccess;var oError=oResult.Error;if(bSuccess||oError instanceof ITHit.WebDAV.Client.Exceptions.MethodNotAllowedException)self._LoadHandler("",sUrl);else self._ErrorHandler("",sUrl,oError.Status,oError.Message)});return true}else{var oUploader,bLoadViaIframe=true;
var oFileInfo=oUploadFile.Form.GetFileInfo(oUploadFile.FileIndex);if("POST"!=oUploadFile.Method.toUpperCase()&&oFileInfo)if(ITHit.DetectBrowser.FF>=3.5){if(ITHit.DetectBrowser.FF>=7||(oFileInfo.size||oFileInfo.fileSize)<=104857600){oUploader=new ITHit.WebDAV.Client.AjaxFileBrowser.UploadFirefox;bLoadViaIframe=false}}else if((ITHit.DetectBrowser.Safari||ITHit.DetectBrowser.Chrome||ITHit.DetectBrowser.IE>=10)&&oFileInfo){oUploader=new ITHit.WebDAV.Client.AjaxFileBrowser.UploadWebKit;bLoadViaIframe=
false}if(bLoadViaIframe)oUploader=new ITHit.WebDAV.Client.AjaxFileBrowser.UploadIframeManager(this._Controller,this._Container,this._UploadProgress);oUploadFile.Status="upload";oUploadFile.Uploader=oUploader;oUploadFile.Form.SetIisDetected(this._Controller.GetIisDetected());oUploadFile.Form.SetMaxUploadSegmentBytes(this._Controller.MaxUploadSegmentBytes);ITHit.Events.AddListener(oUploader,"OnLoadStart","_LoadStartHandler",this);ITHit.Events.AddListener(oUploader,"OnLoad","_LoadHandler",this);ITHit.Events.AddListener(oUploader,
"OnError","_ErrorHandler",this);ITHit.Events.AddListener(oUploader,"OnProgress","_ProgressHandler",this);ITHit.Events.AddListener(oUploader,"OnFinish","_FinishHandler",this);ITHit.Events.AddListener(oUploader,"OnUploadPart","_UploadPartHandler",this);oUploader.BeginUpload(oUploadFile);return true}};ITHit.oNS.UploadManager.prototype._LoadStartHandler=function(sEvent,sUrl){ITHit.Events.DispatchEvent(this,"OnLoadStart",["OnLoadStart",sUrl])};
ITHit.oNS.UploadManager.prototype._LoadHandler=function(sEvent,sUrl){if(!this._UploadFiles[sUrl])return;this._UploadFiles[sUrl].Status="complite";ITHit.Events.DispatchEvent(this,"OnLoad",["OnLoad",sUrl,this._UploadFiles[sUrl].BaseUrl]);this.DeleteForm(sUrl)};ITHit.oNS.UploadManager.prototype._ProgressHandler=function(sEvent,oReports){ITHit.Events.DispatchEvent(this,"OnProgress",["OnProgress",oReports])};
ITHit.oNS.UploadManager.prototype.ResumeUploadError=function(sUrl,oError){this._ErrorHandler(null,sUrl,oError?oError.Status:null,oError?oError.Message:null,true)};
ITHit.oNS.UploadManager.prototype._ErrorHandler=function(oEvent,sUrl,oStatus,sErrorBody,bResumeUploadError){if(!this._UploadFiles[sUrl])return;var oUploadFile=this._UploadFiles[sUrl];if(bResumeUploadError===true)oUploadFile.Status="queue";else{oUploadFile.Status="retry";this._AutoResumeManager.AddResource(sUrl)}if(oUploadFile.Uploader){ITHit.Events.RemoveAllListeners(oUploadFile.Uploader);oUploadFile.Uploader.Destruct();oUploadFile.Uploader=null}if(oUploadFile.Status!="queue")ITHit.Events.DispatchEvent(this,
"OnError",["OnError",sUrl,oStatus,sErrorBody]);setTimeout(ITHit.Utils.MakeScopeClosure(this,"_StartFromQueue"),10)};ITHit.oNS.UploadManager.prototype._FinishHandler=function(oResponse){ITHit.Events.DispatchEvent(this,"OnFinish",[oResponse])};ITHit.oNS.UploadManager.prototype._UploadPartHandler=function(sUrl,iBytesUploaded,iFileSize){ITHit.Events.DispatchEvent(this,"OnUploadPart",[sUrl,iBytesUploaded,iFileSize])};
ITHit.oNS.UploadManager.prototype._AutoResumeRetryInHandler=function(sEvent,sUrl,iCount){if(this._UploadFiles[sUrl])this._UploadFiles[sUrl].Status="retry";ITHit.Events.DispatchEvent(this,"OnAutoResumeRetryIn",[sEvent,sUrl,iCount])};ITHit.oNS.UploadManager.prototype._TryToResumeErrorHandler=function(sEvent,sUrl,oStatus,sErrorBody){ITHit.Events.DispatchEvent(this,"OnTryToResumeError",[sEvent,sUrl,oStatus,sErrorBody])};
ITHit.oNS.UploadManager.prototype._GetProgressHandler=function(sEvent,sUrl,fCallback){var oNsBrowser=ITHit.WebDAV.Client.AjaxFileBrowser;var oProgress=ITHit.Events.DispatchEvent(this,"OnGetProgress",[sEvent,sUrl,fCallback]);if(oProgress instanceof oNsBrowser.UploadProgressInfo)return new oNsBrowser.InternalUploadProgressInfo(sUrl,oProgress.BytesUploaded,oProgress.TotalContentLength);else return this._Controller.GetUploadProgress(sUrl)[0]};
ITHit.oNS.UploadManager.prototype.DeleteForm=function(sUrl){if(!this._UploadFiles[sUrl])return;this._AutoResumeManager.RemoveResource(sUrl);var oUploadFile=this._UploadFiles[sUrl];var bSubCounter=false;switch(oUploadFile.Status){case "upload":case "retry":case "complite":bSubCounter=true;break}if(oUploadFile.Uploader){ITHit.Events.RemoveAllListeners(oUploadFile.Uploader);oUploadFile.Uploader.Destruct()}delete this._UploadFiles[sUrl];delete this._UploadOrder[oUploadFile.Index];var sGroupCount=--this._GroupList[oUploadFile.GroupIndex];
if(!sGroupCount&&oUploadFile.Form)oUploadFile.Form.Destruct();if(bSubCounter)this._UploadCounter--;setTimeout(ITHit.Utils.MakeScopeClosure(this,"_StartFromQueue"),10)};
ITHit.oNS.UploadManager.prototype.PauseUpload=function(sUrl){if(!this._UploadFiles[sUrl])return;this._AutoResumeManager.RemoveResource(sUrl);var oUploadFile=this._UploadFiles[sUrl];var bIsUploading=oUploadFile.Status=="upload"||oUploadFile.Status=="retry";oUploadFile.Status="paused";if(oUploadFile.Uploader){ITHit.Events.RemoveAllListeners(oUploadFile.Uploader);oUploadFile.Uploader.Destruct();oUploadFile.Uploader=null}if(bIsUploading)this._UploadCounter--;setTimeout(ITHit.Utils.MakeScopeClosure(this,
"_StartFromQueue"),10)};ITHit.oNS.UploadManager.prototype.GetInfo=function(sUrl){if(!this._UploadFiles[sUrl])return false;var oUploadFile=this._UploadFiles[sUrl];return{Status:oUploadFile.Status,IsResumable:oUploadFile.IsResumable,FileExists:oUploadFile.FileExists}};
ITHit.oNS.UploadManager.prototype.GetUploadingCount=function(){var count=0;for(var iIndex in this._UploadOrder){if(!this._UploadOrder.hasOwnProperty(iIndex))continue;var sStatus=this._UploadFiles[this._UploadOrder[iIndex]].Status;if("upload"==sStatus||"retry"==sStatus)count++}return count};
ITHit.oNS.UploadManager.prototype.GetQueuedCount=function(){var count=0;for(var iIndex in this._UploadOrder){if(!this._UploadOrder.hasOwnProperty(iIndex))continue;var sStatus=this._UploadFiles[this._UploadOrder[iIndex]].Status;if("queue"==sStatus||"restart"==sStatus||"resume"==sStatus||"upload"==sStatus||"retry"==sStatus)count++}return count};ITHit.oNS.UploadManager.prototype.IsQueueEmpty=function(){var count=this.GetQueuedCount();return count==0};ITHit.oNS.UploadManager.prototype.toString=function(){return this._ClassId};
ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser");
ITHit.oNS.UploadDropObjectAdapter=function(targetUrl,dataTransfer,submitHandler){this._ClassId="ITHit.WebDAV.Client.AjaxFileBrowser.UploadDropObjectAdapter_"+ITHit.WebDAV.Client.AjaxFileBrowser.UploadDropObjectAdapter._Counter++;this.Method="PUT";this._TargetUrl=targetUrl;this.CheckFileExistence=true;this.ExternalCreated=true;this._IisDetected=null;this._MaxUploadSegmentBytes=-1;this._Files={"files":[],"relativePath":[]};this._readFoldersCount=0;this._pendingFilesCount=0;this._submitHandler=submitHandler;
this.Url=this.GetDestination();this._InProcess=true;this._bytesUploaded=[];if(ITHit.DetectBrowser.Chrome&&dataTransfer.items&&dataTransfer.items.length>0){this._readFoldersCount++;try{for(var i=0,item;item=dataTransfer.items[i];i++){var entry=item.webkitGetAsEntry();if(entry===null)continue;if(entry.isDirectory){this._readFoldersCount++;this._Files.files.push({"name":entry.name+"/.","size":0});this._Files.relativePath.push("");this.ReadDirectoryEntries(entry,entry.name+"/")}else{this._Files.files.push(item.getAsFile());
this._Files.relativePath.push("")}}}catch(e){console.error(e)}this._readFoldersCount--}else{var isFirefoxFoldersFound=false;for(var i=0,l=dataTransfer.files.length;i<l;i++){var file=dataTransfer.files[i];if(ITHit.DetectBrowser.FF&&ITHit.DetectBrowser.FF>=4)if(!file.type&&file.size%4096==0&&file.size<=102400)try{var reader=new FileReader;reader.readAsBinaryString(f)}catch(NS_ERROR_FILE_ACCESS_DENIED){isFirefoxFoldersFound=true;continue}this._Files.files.push(file);this._Files.relativePath.push("")}if(isFirefoxFoldersFound)ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.ShowMessage(ITHit.Phrases.AjaxFileBrowser.Interface.FirefoxFolderDropNotSupported)}var self=
this;var finishInterval=setInterval(function(){if(self._readFoldersCount<=0&&self._pendingFilesCount<=0){clearInterval(finishInterval);if(self._submitHandler!=null&&typeof self._submitHandler=="function")self._submitHandler(self)}},20)};ITHit.oNS.UploadDropObjectAdapter._Counter=0;
ITHit.oNS.UploadDropObjectAdapter.prototype.ReadDirectoryEntries=function(oDirEntry,sParentPath){sParentPath=sParentPath||"";var dirReader=oDirEntry.createReader();var self=this;dirReader.readEntries(function(entries){try{for(var i=0,entry;entry=entries[i];++i)if(entry.isDirectory){self._readFoldersCount++;self._Files.files.push({"name":entry.name+"/.","size":0});self._Files.relativePath.push(sParentPath);self.ReadDirectoryEntries(entry,sParentPath+entry.name+"/")}else{var _parentPath=sParentPath;
self._pendingFilesCount++;entry.file(function(item){self._Files.files.push(item);self._Files.relativePath.push(_parentPath);self._pendingFilesCount--},function errorHandler(e){self._pendingFilesCount--;console.error(e)})}}catch(e){console.error(e)}self._readFoldersCount--},function errorHandler(e){console.error(e)})};ITHit.oNS.UploadDropObjectAdapter.prototype._GetInputFile=function(){return this._Files};ITHit.oNS.UploadDropObjectAdapter.prototype.SetFormTarget=function(sName){};
ITHit.oNS.UploadDropObjectAdapter.prototype.GetRelativePath=function(iIndex){if(this._Files.relativePath)return(this._Files.relativePath[iIndex]||"")+this.GetSourceName(iIndex);return null};ITHit.oNS.UploadDropObjectAdapter.prototype.GetResumeDestinations=function(){};ITHit.oNS.UploadDropObjectAdapter.prototype.GetResumeDestination=function(index){};
ITHit.oNS.UploadDropObjectAdapter.prototype.GetDestination=function(index){var url=this._TargetUrl;if(/\/$/.test(url)){var rel=this.GetRelativePath(index)||"";if(!ITHit.Utils.IsStringNullOrEmpty(rel)){if(/\/\.$/.test(rel))rel=rel.substr(0,rel.length-1)}else rel=this.GetSourceName(index)||"";url+=ITHit.WebDAV.Client.Encoder.Encode(rel)}return url};ITHit.oNS.UploadDropObjectAdapter.prototype.GetFileInfo=function(index){if(this._Files.files&&this._Files.files[index])return this._Files.files[index];return null};
ITHit.oNS.UploadDropObjectAdapter.prototype.GetFileSize=function(iIndex){var iFileSize;iIndex=iIndex||0;if(this._Files.files&&this._Files.files[iIndex]){var oFile=this._Files.files[iIndex];if(oFile)iFileSize=oFile.fileSize||oFile.size}return iFileSize};ITHit.oNS.UploadDropObjectAdapter.prototype.GetSourceName=function(index){var fileName;if(this._Files.files&&this._Files.files[index]){var file=this._Files.files[index];fileName=file.fileName||file.name}return fileName};
ITHit.oNS.UploadDropObjectAdapter.prototype.GetUploadFilesLength=function(){return this._Files.files.length};ITHit.oNS.UploadDropObjectAdapter.prototype.ClearFileField=function(){};ITHit.oNS.UploadDropObjectAdapter.prototype.SetBytesUploaded=function(iIndex,iBytesUploaded){if(this._bytesUploaded)this._bytesUploaded[iIndex]=iBytesUploaded};
ITHit.oNS.UploadDropObjectAdapter.prototype.GetBytesUploaded=function(iIndex){if(this._bytesUploaded&&iIndex>=0&&iIndex<this._bytesUploaded.length)return this._bytesUploaded[iIndex];return null};ITHit.oNS.UploadDropObjectAdapter.prototype.Hide=function(){};ITHit.oNS.UploadDropObjectAdapter.prototype.Submit=function(){};ITHit.oNS.UploadDropObjectAdapter.prototype.Destruct=function(){ITHit.Events.RemoveAllListeners(this)};
ITHit.oNS.UploadDropObjectAdapter.prototype.SetInProcess=function(){this._InProcess=true;ITHit.Events.DispatchEvent(this,"OnProcessForm",["OnProcessForm",this])};ITHit.oNS.UploadDropObjectAdapter.prototype.CheckProcess=function(){return this._InProcess};ITHit.oNS.UploadDropObjectAdapter.prototype.SetIisDetected=function(bIisDetected){this._IisDetected=bIisDetected};ITHit.oNS.UploadDropObjectAdapter.prototype.GetIisDetected=function(){return this._IisDetected===true};
ITHit.oNS.UploadDropObjectAdapter.prototype.SetMaxUploadSegmentBytes=function(iMaxUploadSegmentBytes){this._MaxUploadSegmentBytes=iMaxUploadSegmentBytes};ITHit.oNS.UploadDropObjectAdapter.prototype.GetMaxUploadSegmentBytes=function(){return this._MaxUploadSegmentBytes};ITHit.oNS.UploadDropObjectAdapter.prototype.AddListener=function(){};ITHit.oNS.UploadDropObjectAdapter.prototype.RemoveListener=function(){};ITHit.oNS.UploadDropObjectAdapter.prototype.toString=function(){return this._ClassId};
ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser");ITHit.oNS.UploadFormObject=function(oUploadForm){this.Method="PUT";this.Url=oUploadForm.GetDestination();this.UploadUrl=oUploadForm.GetDestination();this.CheckFileExistence=oUploadForm.CheckFileExistence;this.ExternalCreated=oUploadForm.ExternalCreated;this._UploadForm=oUploadForm;this._ClassId="ITHit.WebDAV.Client.AjaxFileBrowser.UploadFormObject_"+ITHit.WebDAV.Client.AjaxFileBrowser.UploadFormObject._Counter++};
ITHit.oNS.UploadFormObject._Counter=0;ITHit.oNS.UploadFormObject.prototype.SetUrl=function(sUrl){this.Url=sUrl;this._UploadForm.SetDestination(sUrl)};ITHit.oNS.UploadFormObject.prototype.SetUploadUrl=function(sUrl){this.UploadUrl=sUrl};ITHit.oNS.UploadFormObject.prototype._GetInputFile=function(){return this._UploadForm._GetInputFile()};ITHit.oNS.UploadFormObject.prototype.SetFormTarget=function(sName){this._UploadForm.SetFormTarget(sName)};
ITHit.oNS.UploadFormObject.prototype.GetResumeDestination=function(iIndex){return this._UploadForm.GetResumeDestination(iIndex)};ITHit.oNS.UploadFormObject.prototype.GetResumeDestinations=function(){return this._UploadForm.GetResumeDestinations()};ITHit.oNS.UploadFormObject.prototype.GetDestination=function(iIndex){return this._UploadForm.GetDestination(iIndex)};ITHit.oNS.UploadFormObject.prototype.GetFileInfo=function(iIndex){return this._UploadForm.GetFileInfo(iIndex)};
ITHit.oNS.UploadFormObject.prototype.GetFileSize=function(iIndex){return this._UploadForm.GetFileSize(iIndex)};ITHit.oNS.UploadFormObject.prototype.GetSourceName=function(iIndex){return this._UploadForm.GetSourceName(iIndex)};ITHit.oNS.UploadFormObject.prototype.GetRelativePath=function(iIndex){return this._UploadForm.GetRelativePath(iIndex)};ITHit.oNS.UploadFormObject.prototype.GetUploadFilesLength=function(){return this._UploadForm.GetUploadFilesLength()};
ITHit.oNS.UploadFormObject.prototype.ClearFileField=function(){return this._UploadForm.ClearFileField()};ITHit.oNS.UploadFormObject.prototype.SetBytesUploaded=function(iIndex,iBytesUploaded){this._UploadForm.SetBytesUploaded(iIndex,iBytesUploaded)};ITHit.oNS.UploadFormObject.prototype.GetBytesUploaded=function(iIndex){return this._UploadForm.GetBytesUploaded(iIndex)};ITHit.oNS.UploadFormObject.prototype.SetIisDetected=function(bIisDetected){this._UploadForm.SetIisDetected(bIisDetected)};
ITHit.oNS.UploadFormObject.prototype.GetIisDetected=function(){return this._UploadForm.GetIisDetected()};ITHit.oNS.UploadFormObject.prototype.SetResumeAfterCrash=function(bIsResumeAfterCrash){this._UploadForm.SetResumeAfterCrash(bIsResumeAfterCrash)};ITHit.oNS.UploadFormObject.prototype.GetResumeAfterCrash=function(){return this._UploadForm.GetResumeAfterCrash()};ITHit.oNS.UploadFormObject.prototype.SetMaxUploadSegmentBytes=function(iMaxUploadSegmentBytes){this._UploadForm.SetMaxUploadSegmentBytes(iMaxUploadSegmentBytes)};
ITHit.oNS.UploadFormObject.prototype.GetMaxUploadSegmentBytes=function(){return this._UploadForm.GetMaxUploadSegmentBytes()};ITHit.oNS.UploadFormObject.prototype.Hide=function(){this._UploadForm.Hide()};ITHit.oNS.UploadFormObject.prototype.Submit=function(){this._UploadForm.Submit(this.UploadUrl)};ITHit.oNS.UploadFormObject.prototype.Destruct=function(){this._UploadForm.Destruct()};ITHit.oNS.UploadFormObject.prototype.SetInProcess=function(){this._UploadForm.SetInProcess()};
ITHit.oNS.UploadFormObject.prototype.CheckProcess=function(){return this._UploadForm.CheckProcess()};ITHit.oNS.UploadFormObject.prototype.AddListener=function(sEventName,mHandler,mHandlerScope){ITHit.Events.AddListener(this._UploadForm,sEventName,mHandler,mHandlerScope)};ITHit.oNS.UploadFormObject.prototype.RemoveListener=function(sEventName,mHandler,mHandlerScope){ITHit.Events.RemoveListener(this._UploadForm,sEventName,mHandler,mHandlerScope)};ITHit.oNS.UploadFormObject.prototype.toString=function(){return this._ClassId};
ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser.Render");
ITHit.oNS.UploadForm=function(oRoot,sUrl,bDisabled,bDoNotCheckFileExistence,bExternalCreated,oSubmitButton,bDoNotCreateFileNameField){var iNum=ITHit.WebDAV.Client.AjaxFileBrowser.Render.UploadForm._Counter,utilsNs=ITHit.Utils;this.UrlAddParams="AjaxFileBrowser=True";this.CheckFileExistence=!bDoNotCheckFileExistence;this.ExternalCreated=bExternalCreated;this.IsFolderMode=false;this.IsResumeAfterCrash=false;this._ResumeDestinations=null;this.inProcess=false;this.root=oRoot;this.url=sUrl;this.disabled=
bDisabled;this.name="ithit_upload_iframe_"+iNum;this.ExternalCreated=false;this.iframe;this.iframeIETimer=null;this.iframeFFTimer=null;this.iframeLoaded=false;this.iisDetected=null;this.maxUploadSegmentBytes=-1;this._SourceNames={};this.form=utilsNs.CreateDOMElement({nodeName:"FORM",method:"POST",encoding:"multipart/form-data",acceptCharset:"UTF-8",characterSet:"UTF-8",charset:"UTF-8",onsubmit:function(){return false}});if(!bDoNotCreateFileNameField)this.txt=utilsNs.CreateDOMElement({nodeName:"INPUT",
type:"text",readOnly:true,className:"dijit dijitReset dijitLeft dijitTextBox uploadFileName",style:{width:"100%"},onkeypress:function(){return false}});var self=this;this.butt=utilsNs.CreateDOMElement({nodeName:"BUTTON",className:"dijitReset dijitStretch dijitButtonNode dijitButtonContents uploadButtons",childNodes:[String(ITHit.Phrases.AjaxFileBrowser.Interface.BrowseFiles)],onclick:function(){return false}});this.file=this._CreateFileField();this.file.onchange=ITHit.Utils.MakeScopeClosure(this,
"OnFileFieldChanged");this.file.onkeypress=function(){return false};this.file.onclick=function(){this.webkitdirectory=self.IsFolderMode?"true":"";if(!self.IsResumeAfterCrash)this._ResumeDestinations=null;self.IsFolderMode=false;self.IsResumeAfterCrash=false};this._submFlag=oSubmitButton?utilsNs.IsDOMObject(oSubmitButton)?2:1:0;this.subm=null;switch(this._submFlag){case 1:this.subm=utilsNs.CreateDOMElement({nodeName:"INPUT",type:"button",value:ITHit.Phrases.AjaxFileBrowser.Interface.Upload,className:"dijitReset dijitStretch dijitButtonNode dijitButtonContents uploadButtons",
onclick:ITHit.Utils.MakeScopeClosure(this,"_SubmitHandler")});break;case 2:this.subm=oSubmitButton;this.subm.onclick=ITHit.Utils.MakeScopeClosure(this,"_SubmitHandler");break}var table=utilsNs.CreateDOMElement({nodeName:"TABLE",width:"100%",height:"22px",margin:"auto",padding:"0px",childNodes:[{nodeName:"TBODY",childNodes:[{nodeName:"TR",childNodes:[{nodeName:"TD",childNodes:[{nodeName:"TABLE",style:{width:"100%",height:"20px",margin:"auto",padding:"0px",tableLayout:"fixed"},cellSpacing:0,cellPadding:0,
childNodes:[{nodeName:"TBODY",childNodes:[{nodeName:"TR",childNodes:[{nodeName:"TD",childNodes:[this.txt]},{nodeName:"TD",style:{height:"20px",width:"80px",overflow:"hidden"},childNodes:[{nodeName:"DIV",className:"uploadContainer",childNodes:[this.file,{nodeName:"SPAN",childNodes:[this.butt]}]}]}]}]}]},1==this._submFlag?{nodeName:"TD",style:{width:"50px"},childNodes:[this.subm]}:null]}]}]}]});this.form.appendChild(table);if(this.disabled)this.DisableForm();else this.DisableSubmitButton();this.root.appendChild(this.form);
this._ClassId="ITHit.WebDAV.Client.AjaxFileBrowser.Render.UploadForm_"+ITHit.WebDAV.Client.AjaxFileBrowser.Render.UploadForm._Counter++};ITHit.oNS.UploadForm._Counter=0;
ITHit.oNS.UploadForm.prototype._CreateFileField=function(){var oFile=document.createElement("INPUT");oFile.className="hiddenFileField";oFile.type="file";oFile.name="file";if(this.CheckFileExistence)oFile.multiple=true;if(ITHit.DetectBrowser.IE){var _fileStyle=oFile.style;_fileStyle.visibility="hidden";setTimeout(function(){_fileStyle.visibility="visible"},0)}return oFile};
ITHit.oNS.UploadForm.prototype.DisableForm=function(){this.file.disabled=true;this.butt.disabled=true;if(this.txt)this.txt.disabled=true;this.disabled=true;this.DisableSubmitButton()};ITHit.oNS.UploadForm.prototype.EnableForm=function(bEnableSubm){this.file.disabled=false;this.butt.disabled=false;if((ITHit.DetectBrowser.Chrome||ITHit.DetectBrowser.Safari)&&this.butt.parentNode)this.butt.parentNode.innerHTML+="";if(this.txt)this.txt.disabled=false;this.disabled=false;if(bEnableSubm)this.EnableSubmitButton()};
ITHit.oNS.UploadForm.prototype.ClearFileField=function(){if(this.txt)this.txt.value="";var oFile=this._CreateFileField();oFile.onchange=this.file.onchange;oFile.onkeypress=this.file.onkeypress;oFile.disabled=this.file.disabled;this.file.onchange=null;this.file.onkeypress=null;this.file.parentNode.replaceChild(oFile,this.file);this.file=oFile;this._bytesUploaded=[];this._SourceNames={};if(ITHit.DetectBrowser.Safari||ITHit.DetectBrowser.Chrome)this.file.form.style.overflow="visible"};
ITHit.oNS.UploadForm.prototype.ResetForm=function(sUrl,bDoNotCheckFileExistence){this.url=sUrl;this.CheckFileExistence=!bDoNotCheckFileExistence;this.form.reset();this.file.multiple=this.CheckFileExistence};ITHit.oNS.UploadForm.prototype.DisableSubmitButton=function(){if(this._submFlag)this.subm.disabled=true};ITHit.oNS.UploadForm.prototype.EnableSubmitButton=function(){if(this._submFlag)this.subm.disabled=false};
ITHit.oNS.UploadForm.prototype.SetUploadUrl=function(sUrl){this.url=sUrl.replace(/\/?$/,"/")};
ITHit.oNS.UploadForm.prototype.OnFileFieldChanged=function(oEvent){oEvent=oEvent||window.event;var el=this.file,urlUtils=ITHit.WebDAV.Client.AjaxFileBrowser.UrlUtils;if(el.files&&el.files.length>1)if(ITHit.DetectBrowser.Safari&&ITHit.DetectBrowser.Safari==5.1&&!ITHit.DetectBrowser.Mac){ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.ShowMessage(ITHit.Phrases.AjaxFileBrowser.Interface.Safari51WindowsMultiUploadNotSupported);return}if(this.txt)if(el.files&&el.files.length>1){var aFileNames=[];for(var i=
0,l=el.files.length;i<l;i++)aFileNames.push(urlUtils.GetFileName(el.files[i].fileName||el.files[i].name));this.txt.value=aFileNames.join(", ")}else this.txt.value=urlUtils.GetFileName(el.value);this._bytesUploaded=[];this._SourceNames={};if(this._submFlag)this.EnableSubmitButton();else this._SubmitHandler(oEvent)};ITHit.oNS.UploadForm.prototype._AddRequiredParams=function(url){return url+(-1==url.indexOf("?")?"?":"&")+this.UrlAddParams};
ITHit.oNS.UploadForm.prototype.SetFormTarget=function(sName){if(!sName||!ITHit.Utils.IsString(sName))throw"String name must be specified as upload form target.";this.form.target=sName};ITHit.oNS.UploadForm.prototype._GetInputFile=function(){return this.file};ITHit.oNS.UploadForm.prototype.DoClickBrowse=function(){var evt=document.createEvent("MouseEvents");evt.initEvent("click",true,false);this.file.dispatchEvent(evt)};
ITHit.oNS.UploadForm.prototype._SubmitHandler=function(oEvent){if(""===this.file.value)return false;this.form.action=this._AddRequiredParams(this.GetDestination());if(false===ITHit.Events.DispatchEvent(this,"OnSubmit",[oEvent,new ITHit.WebDAV.Client.AjaxFileBrowser.UploadFormObject(this)]))return false;this.Hide();return true};ITHit.oNS.UploadForm.prototype.SetBytesUploaded=function(iIndex,iBytesUploaded){if(this._bytesUploaded)this._bytesUploaded[iIndex]=iBytesUploaded};
ITHit.oNS.UploadForm.prototype.GetBytesUploaded=function(iIndex){if(this._bytesUploaded&&iIndex>=0&&iIndex<this._bytesUploaded.length)return this._bytesUploaded[iIndex];return null};ITHit.oNS.UploadForm.prototype.Hide=function(){this.form.style.display="none"};
ITHit.oNS.UploadForm.prototype.Destruct=function(){this.file.onchange=null;this.file.onkeypress=null;if(this.txt)this.txt.onkeypress=null;this.butt.onclick=null;if(this.subm)this.subm.onclick=null;this.root.removeChild(this.form);ITHit.Events.RemoveAllListeners(this);for(var p in this)this[p]=null};ITHit.oNS.UploadForm.prototype.GetFileSize=function(iIndex){var iFileSize;iIndex=iIndex||0;if(this.file.files){var oFile=this.file.files[iIndex];if(oFile)iFileSize=oFile.fileSize||oFile.size}return iFileSize};
ITHit.oNS.UploadForm.prototype.GetSourceName=function(iIndex){if(!this._SourceNames[iIndex]){var sVal;iIndex=iIndex||0;if(this.file.files&&iIndex!==undefined){var file=this.file.files[iIndex];sVal=file.fileName||file.name}else sVal=this.file.value;var iPos=sVal.lastIndexOf("/")+1;if(!iPos)iPos=sVal.lastIndexOf("\\")+1;if(iPos)sVal=sVal.substr(iPos);if(sVal.indexOf("image.jpg",sVal.length-"image.jpg".length)!==-1&&(ITHit.DetectBrowser.iPad||ITHit.DetectBrowser.iPhone))sVal=sVal.replace("image.jpg",
"image"+(new Date).getTime()+".jpg");this._SourceNames[iIndex]=sVal}return this._SourceNames[iIndex]};ITHit.oNS.UploadForm.prototype.GetRelativePath=function(iIndex){var sVal;iIndex=iIndex||0;if(ITHit.DetectBrowser.Chrome){var oFile=this.file.files[iIndex];if(oFile&&!ITHit.Utils.IsStringNullOrEmpty(oFile.webkitRelativePath)){sVal=oFile.webkitRelativePath;var iPos=sVal.indexOf("/")+1;if(!iPos)iPos=sVal.indexOf("\\")+1;if(iPos)sVal=sVal.substr(iPos);return sVal}}};
ITHit.oNS.UploadForm.prototype.SetDestination=function(sUrl){this.url=sUrl};
ITHit.oNS.UploadForm.prototype.GetDestination=function(iIndex){if(this._ResumeDestinations){var sSource=ITHit.WebDAV.Client.Encoder.Encode(this.GetSourceName(iIndex));if(sSource&&this._ResumeDestinations[sSource])return this._ResumeDestinations[sSource]}var sRet=this.url;if(/\/$/.test(sRet)){var sRel=this.GetRelativePath(iIndex);if(!ITHit.Utils.IsStringNullOrEmpty(sRel)){if(/\/\.$/.test(sRel))sRel=sRel.substr(0,sRel.length-1)}else sRel=this.GetSourceName(iIndex);sRet+=ITHit.WebDAV.Client.Encoder.Encode(sRel)}return sRet};
ITHit.oNS.UploadForm.prototype.GetResumeDestinations=function(){return this._ResumeDestinations};ITHit.oNS.UploadForm.prototype.GetResumeDestination=function(iIndex){if(this._ResumeDestinations){var sSource=ITHit.WebDAV.Client.Encoder.Encode(this.GetSourceName(iIndex));if(sSource&&this._ResumeDestinations[sSource])return this._ResumeDestinations[sSource]}};ITHit.oNS.UploadForm.prototype.SetResumeDestinations=function(aDestinations){this._ResumeDestinations=aDestinations};
ITHit.oNS.UploadForm.prototype.GetFileInfo=function(iIndex){if(this.file.files){iIndex=iIndex||0;return this.file.files[iIndex]}return null};ITHit.oNS.UploadForm.prototype.GetUploadFilesLength=function(){if(this.file.files)return this.file.files.length;else return this.file.value?1:0};ITHit.oNS.UploadForm.prototype.Submit=function(sUrl){if(sUrl)this.form.action=this._AddRequiredParams(sUrl);this.form.submit()};
ITHit.oNS.UploadForm.prototype.SetInProcess=function(){this.inProcess=true;ITHit.Events.DispatchEvent(this,"OnProcessForm",["OnProcessForm",new ITHit.WebDAV.Client.AjaxFileBrowser.UploadFormObject(this)])};ITHit.oNS.UploadForm.prototype.CheckProcess=function(){return this.inProcess};ITHit.oNS.UploadForm.prototype.SetIisDetected=function(bIisDetected){this.iisDetected=bIisDetected};ITHit.oNS.UploadForm.prototype.GetIisDetected=function(){return this.iisDetected===true};
ITHit.oNS.UploadForm.prototype.SetResumeAfterCrash=function(bIsResumeAfterCrash){this.IsResumeAfterCrash=bIsResumeAfterCrash};ITHit.oNS.UploadForm.prototype.GetResumeAfterCrash=function(){return this.IsResumeAfterCrash===true};ITHit.oNS.UploadForm.prototype.SetMaxUploadSegmentBytes=function(iMaxUploadSegmentBytes){this.maxUploadSegmentBytes=iMaxUploadSegmentBytes};ITHit.oNS.UploadForm.prototype.GetMaxUploadSegmentBytes=function(){return this.maxUploadSegmentBytes};
ITHit.oNS.UploadForm.prototype.toString=function(){return this._ClassId};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions");ITHit.oNS.GridException=function(sMessage,oInnerException){ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions.GridException.baseConstructor.call(this,sMessage,oInnerException)};ITHit.Extend(ITHit.oNS.GridException,ITHit.oNS.AjaxFileBrowserException);ITHit.oNS.GridException.prototype.Name="GridException";ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser.Render.DataView.GridView");
ITHit.oNS.Grid=function(element,layout,mapNames){if("string"===typeof element||element instanceof String){this._elementId=element;this._grid=ITHit.Components.dijit.byId(element)}else{this._elementId=element.id;this._grid=element}this._grid.scrollTo=this._GridScrollTo;this._grid.onKeyDownOriginal=this._grid.onKeyDown;this._grid.onKeyDown=this._GridOnKeyDown;var that=this;this._grid.renderRow=function(inRowIndex,inNodes){that._RenderRow(this,inRowIndex,inNodes)};this._grid.rows.applyStyles=function(inRow){var sCustomClassNames=
inRow.node.className.replace(/\b(dojo[^ ]+|dnd_target|selection_target)\b/g,"").replace(/  +|^ | $/g,"");inRow.node.className=inRow.customClasses+" "+sCustomClassNames};this._grid.focus.isNavHeader=function(){return false};if(mapNames&&!ITHit.Utils.IsObjectStrict(mapNames))throw new ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions.GridException(ITHit.Phrases.AjaxFileBrowser.Exceptions.WrongParametrType);ITHit.WebDAV.Client.AjaxFileBrowser.Render.DataView.GridView.Grid.baseConstructor.call(this);this.base=
ITHit.WebDAV.Client.AjaxFileBrowser.Render.DataView.GridView.Grid.base;this._Layout=layout;this._MapNames=mapNames||{};this._grid.set("escapeHTMLInData",false)};ITHit.Extend(ITHit.oNS.Grid,ITHit.WebDAV.Client.AjaxFileBrowser.AjaxFileBrowserBase);
ITHit.oNS.Grid.prototype._GridScrollTo=function(inTop){if(!this.fastScroll){this.setScrollTop(inTop);return}this.lastScrollTop=inTop;this.delayScroll=true;this.scrollTop=inTop;if(this._pendingScroll)window.clearTimeout(this._pendingScroll);var _this=this;this._pendingScroll=window.setTimeout(function(){delete _this._pendingScroll;_this.finishScrollJob()},100)};ITHit.oNS.Grid.prototype._GridOnKeyDown=function(e){switch(e.keyCode){case ITHit.Components.dojo.keys.PAGE_UP:case ITHit.Components.dojo.keys.PAGE_DOWN:case ITHit.Components.dojo.keys.UP_ARROW:case ITHit.Components.dojo.keys.DOWN_ARROW:case ITHit.Components.dojo.keys.ENTER:return true}this.onKeyDownOriginal(e)};
ITHit.oNS.Grid.prototype._RenderRow=function(grid,inRowIndex,inNodes){grid.views.renderRow(inRowIndex,inNodes,this._skipRowRenormalize);if(ITHit.Utils.IsFunction(this._RowFormatter)||ITHit.Utils.IsFunction(this._CellFormatter)){var inRowNode=inNodes[0].childNodes[inRowIndex];var sUrl=grid.store.getItem(inRowIndex)[this._MapNames.Url][0];var iControllerIndex=this._grid.domNode.parentNode.getAttribute("controllerIndex")||0;var oController=ITHit.WebDAV.Client.AjaxFileBrowser.Controller.GetByIndex(iControllerIndex);
var oItem=oController._GetItem(sUrl);if(ITHit.Utils.IsFunction(this._RowFormatter))this._RowFormatter(inRowNode,oItem.Item,inRowIndex);if(ITHit.Utils.IsFunction(this._CellFormatter))ITHit.Components.dojo.query("td.dojoxGridCell",inRowNode).forEach(function(cellElement,iCellIndex){var oCellOptions=this.Layout.cells[0][iCellIndex];if(oCellOptions){var result=this._CellFormatter(cellElement,oItem.Item,inRowIndex,iCellIndex,oCellOptions);if(!ITHit.Utils.IsUndefined(result)&&result!==null)cellElement.innerHTML=
result;if(oCellOptions.cellFormatter){var result=oCellOptions.cellFormatter(cellElement,oItem.Item,inRowIndex,iCellIndex,oCellOptions);if(!ITHit.Utils.IsUndefined(result)&&result!==null)cellElement.innerHTML=result}}},this)}};ITHit.oNS.Grid.prototype._GetClassName=function(){return"ITHit.WebDAV.Client.AjaxFileBrowser.Render.DataView.GridView.Grid"};ITHit.oNS.Grid.prototype.GetElementId=function(){return this._elementId};
ITHit.oNS.Grid.prototype.RenderItems=function(dataRows){this._grid.selection.clear();var obj={data:{items:dataRows}};var store=new ITHit.Components.dojo.data.ItemFileWriteStore(obj);var bIsStructureInit=!!this._grid.get("structure");if(!bIsStructureInit)this._grid.set("structure",this._Layout);this._grid.setStore(store)};ITHit.oNS.Grid.prototype.GetSelectedCount=function(){return this._grid.selection.getSelectedCount()};
ITHit.oNS.Grid.prototype.GetSelectedItems=function(){var aItems=[];var aItemIndexes=this._grid.selection.getSelectedIndexes();for(var i=0,l=aItemIndexes.length;i<l;i++){var oItem=this._grid.getItem(aItemIndexes[i])||this.GetItemByRowIndex(aItemIndexes[i]);aItems.push(oItem)}return aItems};ITHit.oNS.Grid.prototype.GetItemByRowIndex=function(index){return this._grid.getItem(index)||this._grid.store.getItem(index)};
ITHit.oNS.Grid.prototype.SearchDataByIndex=function(attribute,index){attribute=this._MapNames[String(attribute)]||attribute;var row=this._grid.getItem(index)||this.GetItemByRowIndex(index);if(!row)return null;var data=row[attribute];if(data.length)return data[0];return null};ITHit.oNS.Grid.prototype.SearchItemByData=function(attribute,toSearch,caseInsensitive){var index=this.SearchIndexByData(attribute,toSearch,caseInsensitive);return null!==index?this.Grid._by_idx[index].item:null};
ITHit.oNS.Grid.prototype.SearchIndexByData=function(attribute,toSearch,caseInsensitive){var indexes=this.SearchIndexesByData(attribute,toSearch,caseInsensitive,true);return indexes.length?indexes[0]:null};
ITHit.oNS.Grid.prototype.SearchIndexesByData=function(attribute,toSearch,caseInsensitive,onlyFirst){var items=this.Grid._by_idx,indexes=[];if(!items||!items.length)return[];if(!(toSearch instanceof Array))toSearch=[toSearch];var attributeIndex=this._MapNames[String(attribute)]||attribute;for(var i=0,l=toSearch.length,search;i<l;i++){search=caseInsensitive?String(toSearch[i]).toLowerCase():toSearch[i];for(var j=0,lj=items.length,attrValue;j<lj;j++){if(!items[j])continue;attrValue=items[j].item[attributeIndex][0];
if(caseInsensitive)attrValue=String(attrValue).toLowerCase();if(attrValue===search){if(onlyFirst)return[j];indexes.push(j)}}}return indexes},ITHit.oNS.Grid.prototype.IsSelected=function(index){return this._grid.selection.isSelected(index)||false};ITHit.oNS.Grid.prototype.DeselectAll=function(){this._grid.selection.deselectAll()};
ITHit.oNS.Grid.prototype.SetSelected=function(index,isSet){isSet=isSet||false;if(!ITHit.Utils.IsArray(index))index=[index];for(var i=0,l=index.length;i<l;i++)this._grid.selection.setSelected(index[i],isSet);if(index[0]<this._grid.scroller.firstVisibleRow||this._grid.scroller.lastVisibleRow<index[0]){this._grid.setScrollTop(this._grid.scroller.findScrollTop(index[0]));this._grid.focus.setFocusIndex(index[0],0)}};ITHit.oNS.Grid.prototype.SelectAll=function(){this._grid.selection.selectAll()};
ITHit.oNS.Grid.prototype.SetSelectedByBoxArea=function(beginX,beginY,endX,endY){var indexes=this._grid.findIndexesInBoxCoords(beginX,beginY,endX,endY);this.SetSelected(indexes,true)};ITHit.oNS.Grid.prototype.SetValue=function(dataRow,attribute,data){attribute=this._MapNames[String(attribute)]||attribute;this._grid.store.setValue(dataRow,attribute,data)};
ITHit.oNS.Grid.prototype.GetValue=function(dataRow,attribute){attribute=this._MapNames[String(attribute)]||attribute;return this._grid.store.getValue(dataRow,attribute)};ITHit.oNS.Grid.prototype.AddItem=function(dataArray){return this._grid.store.newItem(dataArray)};ITHit.oNS.Grid.prototype.DeleteItem=function(dataRow){var index=ITHit.Components.dojo.indexOf(this._grid.store._arrayOfTopLevelItems,dataRow);this._grid.selection.deselect(index);this._grid.selection.remove(index);return this._grid.store.deleteItem(dataRow)};
ITHit.oNS.Grid.prototype.Update=function(){this._grid.store.save()};ITHit.oNS.Grid.prototype.GetScrollerNode=function(){if(this._grid.views.views.length)return this._grid.views.views[0].scrollboxNode;return null};ITHit.oNS.Grid.prototype.SetScrollTop=function(top){return this._grid.setScrollTop(top)};ITHit.oNS.Grid.prototype.SetScrollLeft=function(left){return this._grid.setScrollLeft(left)};
ITHit.oNS.Grid.prototype.KeyUp=function(aItems,oEvent){var indexes=this._grid.selection.getSelectedIndexes();var index=indexes[0]||0;if(this._grid.selection.selectedIndex!==index){this.SetSelected(this._grid.selection.selectedIndex,false);index=indexes[indexes.length-1]}var newIndex=index>0?index-1:index;this._KeyPress(index,newIndex,oEvent.shiftKey)};
ITHit.oNS.Grid.prototype.KeyDown=function(aItems,oEvent){var indexes=this._grid.selection.getSelectedIndexes();var index=indexes[indexes.length-1];if(this._grid.selection.selectedIndex!==index){this.SetSelected(this._grid.selection.selectedIndex,false);index=indexes[0]||0}var newIndex=index<this._grid.rowCount-1?index+1:index;this._KeyPress(index,newIndex,oEvent.shiftKey)};
ITHit.oNS.Grid.prototype.KeyHome=function(aItems,oEvent){var indexes=this._grid.selection.getSelectedIndexes();this._KeyHomeEnd(oEvent,indexes[0]||0,0)};ITHit.oNS.Grid.prototype.KeyEnd=function(aItems,oEvent){var indexes=this._grid.selection.getSelectedIndexes();this._KeyHomeEnd(oEvent,indexes[indexes.length-1],this._grid.rowCount-1)};
ITHit.oNS.Grid.prototype.KeyPageUp=function(aItems,oEvent){var indexes=this._grid.selection.getSelectedIndexes();var newIndex=this._grid.scroller.firstVisibleRow*2-this._grid.scroller.lastVisibleRow+2;this._KeyHomeEnd(oEvent,indexes[indexes.length-1],newIndex)};
ITHit.oNS.Grid.prototype.KeyPageDown=function(aItems,oEvent){var indexes=this._grid.selection.getSelectedIndexes();var newIndex=this._grid.scroller.lastVisibleRow*2-this._grid.scroller.firstVisibleRow-2;this._KeyHomeEnd(oEvent,indexes[0]||0,newIndex,this._grid.scroller.lastVisibleRow)};
ITHit.oNS.Grid.prototype._KeyHomeEnd=function(oEvent,index,newIndex,scrollIndex){if(!this._grid.rowCount)return false;newIndex=Math.max(0,newIndex);newIndex=Math.min(this._grid.rowCount-1,newIndex);scrollIndex=ITHit.Utils.IsUndefined(scrollIndex)?newIndex:scrollIndex;this._grid.setScrollTop(this._grid.scroller.findScrollTop(scrollIndex));this._grid.focus.setFocusIndex(newIndex,0);this.DeselectAll();if(oEvent.shiftKey)for(var i=Math.min(index,newIndex);i<=Math.max(index,newIndex);i++)this.SetSelected(i,
true);else this.SetSelected(newIndex,true)};ITHit.oNS.Grid.prototype._KeyPress=function(index,newIndex,withShift){if(!this._grid.rowCount)return false;var selectedLength=this.GetSelectedCount();if(!selectedLength){this.SetSelected(0,true);this._grid.focus.setFocusIndex(0,0);return}if(!withShift)if(1==selectedLength)this.SetSelected(index,false);else this.DeselectAll();this.SetSelected(newIndex,true);this._grid.focus.setFocusIndex(newIndex,0)};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser.Render");
ITHit.oNS.Timer=function(mIndex,iTime,iIncrement,fHandler,bDisabled){this.index=mIndex;this.time=parseInt(iTime)||0;this.increment=iIncrement||1;this.type=this.increment>0?"up":"down";this.active=!bDisabled;this.OnTimerUpdate=fHandler;this._ReturnTime();this._ClassId="ITHit.WebDAV.Client.AjaxFileBrowser.Render.Timer_"+ITHit.WebDAV.Client.AjaxFileBrowser.Render.Timer._Counter++};ITHit.oNS.Timer._Counter=0;
ITHit.oNS.Timer.prototype._Tick=function(){if(!this.active||"down"===this.type&&this.time<=0)return;if(isFinite(this.time)){this.time+=this.increment;if(this.time<0)this.time=0}this._ReturnTime()};ITHit.oNS.Timer.prototype._ReturnTime=function(){if(this.OnTimerUpdate instanceof Function)this.OnTimerUpdate(this.index,this.time)};ITHit.oNS.Timer.prototype.SetTime=function(mTime){this.time=mTime;this.active=true};ITHit.oNS.Timer.prototype.StopTimer=function(){this.active=false};
ITHit.oNS.Timer.prototype.SetUpdateHandler=function(fHandler){this.OnTimerUpdate=fHandler};ITHit.oNS.Timer.prototype.IsSetTimerUpdateHandler=function(mTime){return!!this.OnTimerUpdate};ITHit.oNS.Timer.prototype.toString=function(){return this._ClassId};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser.Render");ITHit.oNS.TimerManager=function(){this.timers=[];this.timersLength=0;this.interval;this._ClassId="ITHit.WebDAV.Client.AjaxFileBrowser.Render.TimerManager_"+ITHit.WebDAV.Client.AjaxFileBrowser.Render.TimerManager._Counter++};
ITHit.oNS.TimerManager._Counter=0;ITHit.oNS.TimerManager.prototype.AddTimer=function(mIndex,iTime,iIncrement,fHandler,bDisabled){if(this.timers[mIndex])return false;this.timers[mIndex]=new ITHit.WebDAV.Client.AjaxFileBrowser.Render.Timer(mIndex,iTime,iIncrement,fHandler,bDisabled);this.timersLength++;if(!this.interval)this.interval=setInterval(ITHit.Utils.MakeScopeClosure(this,"_Tick"),1E3)};
ITHit.oNS.TimerManager.prototype._Tick=function(){for(var mIndex in this.timers){if(!this.timers.hasOwnProperty(mIndex))continue;this.timers[mIndex]._Tick()}};ITHit.oNS.TimerManager.prototype.SetTime=function(mIndex,iTime){if(!this.timers[mIndex])return false;this.timers[mIndex].SetTime(iTime)};
ITHit.oNS.TimerManager.prototype.DeleteTimer=function(mIndex){if(!this.timers[mIndex])return false;delete this.timers[mIndex];this.timersLength--;if(!this.timersLength&&this.interval){clearInterval(this.interval);this.interval=null}};ITHit.oNS.TimerManager.prototype.StopTimer=function(mIndex){if(!this.timers[mIndex])return false;this.timers[mIndex].StopTimer()};ITHit.oNS.TimerManager.prototype.TimerExists=function(mIndex){return this.timers[mIndex]?true:false};
ITHit.oNS.TimerManager.prototype.SetTimerUpdateHandler=function(mIndex,fHandler){if(!this.timers[mIndex])return;this.timers[mIndex].SetUpdateHandler(fHandler)};ITHit.oNS.TimerManager.prototype.IsSetTimerUpdateHandler=function(mIndex){return this.timers[mIndex]&&this.timers[mIndex].IsSetUpdateHandler()};ITHit.oNS.TimerManager.prototype.toString=function(){return this._ClassId};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser.Render");
ITHit.oNS.UploadInfoManager=function(sElementId,oController){this._ClassId="ITHit.WebDAV.Client.AjaxFileBrowser.Render.UploadInfoManager_"+ITHit.WebDAV.Client.AjaxFileBrowser.Render.UploadInfoManager._Counter++;var oNsPhrases=ITHit.Phrases.AjaxFileBrowser.Upload;this._PreloadImg(oController);var aTableFieldsStructure=[{linkId:"Icon",name:"&nbsp;",field:"1",width:"22px",formatter:this.StatusImage,noresize:"true"},{linkId:"Source",name:oNsPhrases.Source,field:"2",width:"115px",formatter:this.CreateSourceContainer},
{linkId:"Destination",name:oNsPhrases.Destination,field:"3",width:"100px",formatter:this.RightPosition,styles:{textAlign:"right"},escapeHTMLInData:"false"},{linkId:"ProgressBar",name:oNsPhrases.Progress,field:"4",width:"78px",formatter:this.UploadProgress,headerStyle:{textAlign:"center"}},{linkId:"Progress",name:oNsPhrases.ProgressPercent,field:"5",width:"65px",styles:{textAlign:"right"}},{linkId:"Uploaded",name:oNsPhrases.Uploaded,field:"6",width:"60px",formatter:this.FileSize,styles:{textAlign:"right"}},
{linkId:"FileSize",name:oNsPhrases.FileSize,field:"7",width:"60px",formatter:this.FileSize,styles:{textAlign:"right"}},{linkId:"Speed",name:oNsPhrases.Speed,field:"8",width:"64px",formatter:this.UploadSpeed,styles:{textAlign:"right"}},{linkId:"TimeLeft",name:oNsPhrases.Left,field:"9",width:"54px",formatter:this.FormatTime,styles:{textAlign:"center"}},{linkId:"TimeElapsed",name:oNsPhrases.Elapsed,field:"10",width:"54px",formatter:this.FormatTime,styles:{textAlign:"center"}}];var oMapNames={"Url":"0",
"Status":"1","Source":"2","Destination":"3","ProgressBar":"4","UploadProgress":"5","UploadedBytes":"6","FileSize":"7","UploadSpeed":"8","TimeLeft":"9","TimeElapsed":"10","UploadStartTime":"11","LastReportTime":"12","LastUploadedBytes":"13","StartPosition":"14","TotalFileSize":"15"};var aModified=ITHit.WebDAV.Client.AjaxFileBrowser.CodeConstructor.CloneGridColumnsModified(aTableFieldsStructure,oController._MofifyInstructions.UploadProgressPanel);this._Layout=[{cells:[aModified],tableLayout:true}];
ITHit.WebDAV.Client.AjaxFileBrowser.Render.UploadInfoManager.baseConstructor.call(this,sElementId,this._Layout,oMapNames);this._grid.formatterScope=this;this.base=ITHit.WebDAV.Client.AjaxFileBrowser.Render.UploadInfoManager.base;this._Controller=oController;this.Timers=new ITHit.WebDAV.Client.AjaxFileBrowser.Render.TimerManager;this.UploadInfoLibraryClass=ITHit.WebDAV.Client.UploadProgressInfo;this.ReportProgressErrorCount=3;this.Pool=[];this.Hash={};this.IdHash={};this.TimerHash={};this.DiffInfo=
{};this.IdCounter=0;this.ErrorLog={};this.UniqueIndex=oController._index;ITHit.Components.dojo.connect(this._grid,"onRowContextMenu",ITHit.Utils.MakeScopeClosure(this,"_OnRowContextMenuHandler"));ITHit.Components.dojo.connect(this._grid,"onRowDblClick",ITHit.Utils.MakeScopeClosure(this,"_OnRowDblClickHandler"));ITHit.Components.dojo.connect(this._grid,"onRowMouseDown",ITHit.Utils.MakeScopeClosure(this,"_OnGridMouseDownHandler"));ITHit.Components.dojo.connect(this._grid,"onRowMouseOut",ITHit.Utils.MakeScopeClosure(this,
"_OnGridMouseOutHandler"));this.RenderItems([])};ITHit.Extend(ITHit.oNS.UploadInfoManager,ITHit.oNS.DataView.GridView.Grid);ITHit.oNS.UploadInfoManager._Counter=0;ITHit.oNS.UploadInfoManager.prototype._OnGridMouseDownHandler=function(oEvent){window.document.body.onselectstart=new Function("","return false;")};ITHit.oNS.UploadInfoManager.prototype._OnGridMouseOutHandler=function(oEvent){window.document.body.onselectstart=null};
ITHit.oNS.UploadInfoManager.prototype.StatusImage=function(sValue,iIndex){var sOut="";switch(sValue){case "queue":sOut='<div class="queue_status"></div>';break;case "upload":sOut='<div class="upload_status"></div>';break;case "paused":sOut='<div class="pause_status"></div>';break;case "error":sOut='<div class="error_status"></div>';break}return sOut};
ITHit.oNS.UploadInfoManager.prototype._PreloadImg=function(oController){var s=document.createElement("DIV");s.className="ih_style";s.style.position="absolute";s.style.left="-10000px";s.style.top="-10000px";s.style.disable="hidden";var t=document.createElement("DIV");t.className="table";var d=document.createElement("DIV");d.className="error_status";s.appendChild(t);t.appendChild(d);document.body.appendChild(s);document.body.removeChild(s)};
ITHit.oNS.UploadInfoManager.prototype.RightPosition=function(sValue,iIndex){return ITHit.DetectBrowser.IE<10?sValue:'<div class="dijitGrid-rightAlignContainer"><span class="dijitGrid-rightAlignText">'+sValue+"</span></div>"};
ITHit.oNS.UploadInfoManager.prototype.CreateSourceContainer=function(sValue,iIndex){var sUrl=this.GetValue(this.GetItemByRowIndex(iIndex),"Url");sUrl=ITHit.Utils.HtmlEscape(sUrl);var sIndex=this.IdHash[sUrl]+"_2";return this.RightPosition('<div id="'+sIndex+'">'+sValue+"</div>",sIndex)};
ITHit.oNS.UploadInfoManager.prototype.UploadProgress=function(sValue,iIndex){var iPerc=parseInt(sValue);var sAddClass="";if(sValue.indexOf&&-1!==sValue.indexOf("error"))sAddClass="error";else if(100<=iPerc);return'<div class="progress_bar"><div class="progress '+sAddClass+'" style="width:'+iPerc+'%"></div></div>'};
ITHit.oNS.UploadInfoManager.prototype.FileSize=function(sValue,iIndex){if(isNaN(sValue))return sValue;if(""===sValue)return sValue;var fSize=parseFloat(sValue);var sOutSize,sSizeType;if(fSize>=1048576E3){sOutSize=String(Math.round(fSize/1073741824*100)/100);sSizeType=" GB"}else if(fSize>=1048576){sOutSize=String(Math.round(fSize/1048576*100)/100);sSizeType=" MB"}else if(fSize>=1024){sOutSize=String(Math.round(fSize/1024*100)/100);sSizeType=" KB"}else{sOutSize=fSize;sSizeType=" B"}if(" B"!==sSizeType){iPos=
sOutSize.indexOf(".")+1;if(iPos){if(1==sOutSize.length-iPos)sOutSize+="0"}else sOutSize+=".00"}return sOutSize+sSizeType};ITHit.oNS.UploadInfoManager.prototype.UploadSpeed=function(sValue,iIndex){var sSpeed=this.FileSize(sValue,iIndex);return""!==sSpeed?sSpeed+"/s":sSpeed};
ITHit.oNS.UploadInfoManager.prototype.FormatTime=function(mValue,iIndex){if(!isFinite(mValue)||""===mValue)return mValue;if(!mValue)return"00:00:00";var hours=Math.floor(mValue/3600);var minutes=Math.floor((mValue-hours*3600)/60);var seconds=mValue-hours*3600-minutes*60;return this._LeadingZero(hours)+":"+this._LeadingZero(minutes)+":"+this._LeadingZero(seconds)};ITHit.oNS.UploadInfoManager.prototype._LeadingZero=function(iInt){return iInt<10?"0"+iInt:iInt};
ITHit.oNS.UploadInfoManager.prototype._Grid=function(){return this._grid};
ITHit.oNS.UploadInfoManager.prototype.Add=function(sUrl,sSourceName,iFileSize){if(this.CheckUploadItem(sUrl)){ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.ShowMessage(ITHit.Phrases.AjaxFileBrowser.Interface.FilePrecentInUploadList);return false}this.IdHash[sUrl]="ithit_interface_upload_cell_"+this.UniqueIndex+"_"+this.IdCounter;this.IdCounter++;this.TimerHash[this.IdHash[sUrl]]=sUrl;var aItem=[sUrl,"queue",ITHit.Utils.HtmlEscape(sSourceName),'<span style="float:right;">'+ITHit.Utils.HtmlEscape(ITHit.Decode(sUrl))+
"</span>",0,ITHit.Phrases.AjaxFileBrowser.Upload.Queued,0,""!==iFileSize?iFileSize:"",0,"","","","",0,0,0];this.Hash[sUrl]=this.AddItem(aItem);this.ErrorLog[sUrl]=[]};
ITHit.oNS.UploadInfoManager.prototype.ResetInfo=function(sUrl){var oItem=this.Hash[sUrl];if(!oItem)return;this.SetValue(oItem,"Status","queue");this.SetValue(oItem,"ProgressBar",0);this.SetValue(oItem,"UploadProgress","0%");this.SetValue(oItem,"UploadedBytes",0);this.SetValue(oItem,"UploadSpeed",0);this.SetValue(oItem,"TimeLeft","");this.SetValue(oItem,"TimeElapsed","");this.SetValue(oItem,"LastUploadedBytes",0);this.SetValue(oItem,"StartPosition",0);this.SetValue(oItem,"TotalFileSize",0);this.ErrorLog[sUrl]=
[]};ITHit.oNS.UploadInfoManager.prototype.GetStartPosition=function(sUrl){var oItem=this.Hash[sUrl];if(!oItem)return 0;return this.GetValue(oItem,"StartPosition")};ITHit.oNS.UploadInfoManager.prototype.UploadPartBegin=function(sUrl,iStartPosition,iFileSize){var oItem=this.Hash[sUrl];if(!oItem)return 0;this.SetValue(oItem,"StartPosition",iStartPosition?iStartPosition:0);this.SetValue(oItem,"TotalFileSize",iFileSize?iFileSize:0)};
ITHit.oNS.UploadInfoManager.prototype.BeginUpload=function(sUrl,iStartPosition){var oItem=this.Hash[sUrl];if(!oItem)return;var oNow=new Date,sId=this.IdHash[sUrl];this.SetValue(oItem,"Status","upload");this.SetValue(oItem,"UploadStartTime",oNow);this.SetValue(oItem,"LastReportTime",oNow);if(iStartPosition)this.SetValue(oItem,"StartPosition",iStartPosition);this.ErrorLog[sUrl]=[];var sTimeLeftTimerId=sId+"_9";if(!this.Timers.TimerExists(sTimeLeftTimerId)){var handler=ITHit.Utils.MakeScopeClosure(this,
"UpdateCellValue",[sUrl,"TimeLeft"]);this.Timers.AddTimer(sTimeLeftTimerId,0,-1,handler,true)}var sTimeElapsedTimerId=sId+"_10";if(!this.Timers.TimerExists(sTimeElapsedTimerId)){var handler=ITHit.Utils.MakeScopeClosure(this,"UpdateCellValue",[sUrl,"TimeElapsed"]);this.Timers.AddTimer(sTimeElapsedTimerId,0,1,handler)}else this.Timers.SetTime(sTimeElapsedTimerId,0)};ITHit.oNS.UploadInfoManager.prototype.CheckUploadItem=function(sUrl){return this.Hash[sUrl]?true:false};
ITHit.oNS.UploadInfoManager.prototype.UpdateInfo=function(oReports){for(var sUrl in oReports)if(this.Hash[sUrl]){var oProgress=oReports[sUrl],sId=this.IdHash[sUrl],oItem=this.Hash[sUrl],oLastReportTime=this.GetValue(oItem,"LastReportTime"),oLastBytesUploaded=this.GetValue(oItem,"LastUploadedBytes"),iStartPosition=this.GetValue(oItem,"StartPosition"),iFileSize=this.GetValue(oItem,"TotalFileSize");if(oProgress instanceof this.UploadInfoLibraryClass){var iTotalFileSize=iFileSize?iFileSize:oProgress.TotalContentLength+
iStartPosition;var iUploaded,fUploadSpeed,oNow;oNow=new Date;if(0!==oProgress.TotalContentLength){if(!this.DiffInfo[sUrl])this.DiffInfo[sUrl]=[];this.DiffInfo[sUrl].push({BytesUploaded:oProgress.BytesUploaded-oLastBytesUploaded,TimeUpload:(oNow-oLastReportTime)/1E3});var iSliceCount=5;var aLastDiffSlice=this.DiffInfo[sUrl].slice(-1*iSliceCount);var iSummaryBytesUploaded=0;var iSummaryTimeUpload=0;for(var i=0,l=aLastDiffSlice.length;i<l;i++){iSummaryBytesUploaded+=aLastDiffSlice[i].BytesUploaded;iSummaryTimeUpload+=
aLastDiffSlice[i].TimeUpload}iUploaded=Math.floor((oProgress.BytesUploaded+iStartPosition)/iTotalFileSize*100);fUploadSpeed=iSummaryBytesUploaded/iSummaryTimeUpload;fUploadSpeed=fUploadSpeed>0?fUploadSpeed:0}else{iUploaded=100;fUploadSpeed=0}this.SetValue(oItem,"ProgressBar",iUploaded);this.SetValue(oItem,"UploadProgress",iUploaded+" %");this.SetValue(oItem,"UploadedBytes",oProgress.BytesUploaded+iStartPosition);this.SetValue(oItem,"FileSize",iTotalFileSize);this.SetValue(oItem,"UploadSpeed",Math.round(fUploadSpeed*
10)/10);this.SetValue(oItem,"LastReportTime",oNow);this.SetValue(oItem,"LastUploadedBytes",oProgress.BytesUploaded);if(fUploadSpeed){var iTimeLeft=Math.ceil((iTotalFileSize-iStartPosition-oProgress.BytesUploaded)/fUploadSpeed);this.Timers.SetTime(sId+"_9",iTimeLeft)}else{this.Timers.StopTimer(sId+"_9");this.SetValue(oItem,"TimeLeft","-")}if(100==iUploaded){this.Timers.DeleteTimer(sId+"_9");this.SetValue(oItem,"TimeLeft","00:00:00")}}else{this.Timers.StopTimer(sId+"_9");this.SetValue(oItem,"ProgressBar",
this.GetValue(oItem,"ProgressBar")+" error");this.SetValue(oItem,"UploadProgress",'<span style="color: red">'+ITHit.Phrases.AjaxFileBrowser.Upload.Error+"</span>");this.SetValue(oItem,"UploadSpeed","");this.SetValue(oItem,"TimeLeft","");this.SetValue(oItem,"LastReportTime",oNow);if(this.ErrorLog[sUrl].length<this.ReportProgressErrorCount)this.ErrorLog[sUrl].push([sUrl,oProgress])}}};
ITHit.oNS.UploadInfoManager.prototype.UpdateCellValue=function(sUrl,mIndex,sElementId,iValue){var oItem=this.Hash[sUrl];this.SetValue(oItem,String(this._MapNames[mIndex]),iValue)};
ITHit.oNS.UploadInfoManager.prototype.UploadError=function(sUrl,sError,sErrorBody){var oItem=this.Hash[sUrl];if(oItem){this.Timers.StopTimer(this.IdHash[sUrl]+"_9");this.Timers.StopTimer(this.IdHash[sUrl]+"_10");delete this.DiffInfo[sUrl];if(!this.ErrorLog[sUrl])this.ErrorLog[sUrl]=[];this.ErrorLog[sUrl].splice(0,0,[sUrl,sError,sErrorBody]);this.SetValue(oItem,"Status","error");this.SetValue(oItem,"ProgressBar",this.GetValue(oItem,"4")+" error");this.SetValue(oItem,"UploadProgress",'<span class="error_percent">'+
ITHit.Phrases.AjaxFileBrowser.Upload.Error+"</span>");this.SetValue(oItem,"UploadSpeed","");this.SetValue(oItem,"TimeLeft","");this.SetValue(oItem,"LastReportTime",new Date);this.Update()}};
ITHit.oNS.UploadInfoManager.prototype.UploadPause=function(sUrl){var oItem=this.Hash[sUrl];if(oItem){this.Timers.StopTimer(this.IdHash[sUrl]+"_9");this.Timers.StopTimer(this.IdHash[sUrl]+"_10");delete this.DiffInfo[sUrl];this.SetValue(oItem,"Status","paused");this.SetValue(oItem,"UploadProgress",ITHit.Phrases.AjaxFileBrowser.Upload.Paused);this.SetValue(oItem,"UploadSpeed","");this.SetValue(oItem,"TimeLeft","");this.SetValue(oItem,"LastReportTime",new Date);this.Update()}};
ITHit.oNS.UploadInfoManager.prototype.UploadResume=function(sUrl){var oItem=this.Hash[sUrl];if(oItem){this.SetValue(oItem,"Status","queue");this.SetValue(oItem,"UploadProgress",ITHit.Phrases.AjaxFileBrowser.Upload.Queued);this.SetValue(oItem,"UploadSpeed","");this.SetValue(oItem,"TimeLeft","");this.Update()}};
ITHit.oNS.UploadInfoManager.prototype.UploadRetry=function(sUrl,iCount){var oItem=this.Hash[sUrl];if(oItem){this.SetValue(oItem,"UploadProgress",ITHit.Phrases.AjaxFileBrowser.Upload.RetryIn.Paste(iCount));this.Update()}};
ITHit.oNS.UploadInfoManager.prototype.Remove=function(sUrl){var sId=this.IdHash[sUrl];if(sId){this.Timers.DeleteTimer(sId+"_9");this.Timers.DeleteTimer(sId+"_10")}if(this.Hash[sUrl])this.DeleteItem(this.Hash[sUrl]);delete this.Hash[sUrl];delete this.TimerHash[sId];delete this.IdHash[sUrl];delete this.ErrorLog[sUrl];delete this.DiffInfo[sUrl]};ITHit.oNS.UploadInfoManager.prototype.GetStatus=function(sUrl){var oItem=this.Hash[sUrl];if(!oItem)return null;return this.GetValue(oItem,"Status")};
ITHit.oNS.UploadInfoManager.prototype.GetErrors=function(sUrl){return this.ErrorLog[sUrl]};ITHit.oNS.UploadInfoManager.prototype.GetErrorsLength=function(sUrl){var aErrors=this.ErrorLog[sUrl];return aErrors?aErrors.length:0};ITHit.oNS.UploadInfoManager.prototype.toString=function(){return this._ClassId};
ITHit.oNS.UploadInfoManager.prototype.GetSelectedItemsList=function(){var selected=[],items=this.GetSelectedItems();for(var i=0,l=items.length;i<l;i++)selected.push(this.GetValue(items[i],"Url"));return selected};ITHit.oNS.UploadInfoManager.prototype._OnRowContextMenuHandler=function(event){if(!this.IsSelected(event.rowIndex)){this.DeselectAll();this.SetSelected(event.rowIndex,true)}var urls=this.GetSelectedItemsList();this.DispatchEvent("OnRowContextMenu",[event,urls])};
ITHit.oNS.UploadInfoManager.prototype._OnRowDblClickHandler=function(event){var data=this.GetItemByRowIndex(event.rowIndex),url=this.GetValue(data,"Url");this.DispatchEvent("OnRowDoubleClick",[event,url])};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser");ITHit.oNS.LocalStorage=function(){};ITHit.oNS.LocalStorage.enabled=true;ITHit.oNS.LocalStorage.data=[];
ITHit.oNS.LocalStorage.GetObject=function(sKey){var oResult=[];try{if(this.enabled){if(localStorage&&localStorage.getItem&&JSON&&JSON.parse)oResult=JSON.parse(localStorage.getItem(sKey))||oResult}else if(typeof this.data[sKey]!="undefined")oResult=JSON.parse(this.data[sKey])}catch(e){}return oResult};
ITHit.oNS.LocalStorage.SetObject=function(sKey,oValue){try{if(this.enabled){if(localStorage&&localStorage.setItem&&JSON&&JSON.stringify)localStorage.setItem(sKey,JSON.stringify(oValue))}else this.data[sKey]=JSON.stringify(oValue)}catch(e){}};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser");
ITHit.oNS.ResumableUploadsManager=function(oUploadInfoManager,oUploadManager,oController){this._ClassId="ITHit.WebDAV.Client.AjaxFileBrowser.ResumableUploadsManager_"+ITHit.WebDAV.Client.AjaxFileBrowser.ResumableUploadsManager._Counter++;this._UploadInfoManager=oUploadInfoManager;this._UploadManager=oUploadManager;this._Controller=oController;this._sLocalStorageKey="ITHit_ResumeUploads";this._IsRunCheckResumeSupported=false;this._ResumableUploadsSupported=ITHit.DetectBrowser.FF>=7||ITHit.DetectBrowser.Safari||
ITHit.DetectBrowser.Chrome||ITHit.DetectBrowser.IE>=10};ITHit.oNS.ResumableUploadsManager._Counter=0;
ITHit.oNS.ResumableUploadsManager.prototype.LoadResumableUploads=function(){var oNsDefaultActions=ITHit.WebDAV.Client.AjaxFileBrowser.UploadController.DefaultActions;if(!this._ResumableUploadsSupported)return;var resumableUploads=ITHit.WebDAV.Client.AjaxFileBrowser.LocalStorage.GetObject(this._sLocalStorageKey);var resumableUploadsNew=[];var sBaseUrl=this._Controller.defaultParams.Url;if(resumableUploads&&resumableUploads.length)for(var i=0;i<resumableUploads.length;i++){var _uploadInfo=resumableUploads[i];
if(_uploadInfo){var sUrl=_uploadInfo.Url;if(sUrl){if(sUrl.substr(0,sBaseUrl.length)==sBaseUrl){var sName=_uploadInfo.SourceName;if(!sName&&sUrl){var iPos=sUrl.lastIndexOf("/")+1;if(!iPos)iPos=sUrl.lastIndexOf("\\")+1;var sName=iPos?sUrl.substr(iPos):sUrl}if(_uploadInfo.IsFolder){var oUploadFile={Url:sUrl,Method:"",Form:null,RewriteAction:oNsDefaultActions.Rewrite,FileIndex:i,FileExists:false,IsFolder:true,BaseUrl:null};this._UploadManager.AddFilesToPool([oUploadFile])}else{var oProgress=null;try{oProgress=
this._Controller.GetUploadProgress(sUrl)}catch(e){}_uploadInfo.BytesUploaded=oProgress&&oProgress[0]&&oProgress[0].BytesUploaded?oProgress[0].BytesUploaded:0;this.CheckResumeSupported(sUrl);this._UploadInfoManager.Add(sUrl,sName,_uploadInfo.Size);try{this._UploadInfoManager.BeginUpload(sUrl);if(oProgress&&oProgress[0]){var oReport={};oReport[sUrl]=oProgress[0];this._UploadInfoManager.UpdateInfo(oReport)}}catch(e){}this._UploadInfoManager.UploadPause(sUrl)}}resumableUploadsNew.push(_uploadInfo)}}}ITHit.WebDAV.Client.AjaxFileBrowser.LocalStorage.SetObject(this._sLocalStorageKey,
resumableUploadsNew);return resumableUploadsNew};ITHit.oNS.ResumableUploadsManager.prototype.IsResumeSupported=function(){return this._ResumableUploadsSupported};ITHit.oNS.ResumableUploadsManager.prototype.SetResumeSupported=function(bIsSupported){this._ResumableUploadsSupported=bIsSupported;this._IsRunCheckResumeSupported=true};ITHit.oNS.ResumableUploadsManager.prototype.CheckResumeSupported=function(sUrl){};
ITHit.oNS.ResumableUploadsManager.prototype.AddUpload=function(sUrl,sSourceName,iFileSize,bIsFolder){if(!this._ResumableUploadsSupported)return;var resumableUploads=ITHit.WebDAV.Client.AjaxFileBrowser.LocalStorage.GetObject(this._sLocalStorageKey);var _uploadInfo=null;if(resumableUploads&&resumableUploads.length)for(var i=0;i<resumableUploads.length;i++)if(resumableUploads[i].Url==sUrl){_uploadInfo=resumableUploads[i];_uploadInfo.SourceName=sSourceName;_uploadInfo.Size=iFileSize;_uploadInfo.IsFolder=
bIsFolder;resumableUploads[i]=_uploadInfo;break}if(!resumableUploads)resumableUploads=[];if(_uploadInfo==null){_uploadInfo={Url:sUrl,SourceName:sSourceName,Size:iFileSize,IsFolder:bIsFolder};resumableUploads.push(_uploadInfo)}ITHit.WebDAV.Client.AjaxFileBrowser.LocalStorage.SetObject(this._sLocalStorageKey,resumableUploads)};ITHit.oNS.ResumableUploadsManager.prototype.RefreshBytesUploaded=function(sUrl){this.RefreshBytesUploadedAsync(sUrl)};
ITHit.oNS.ResumableUploadsManager.prototype.RefreshBytesUploadedAsync=function(sUrl,fCallback){if(!this._ResumableUploadsSupported)return;var resumableUploads=ITHit.WebDAV.Client.AjaxFileBrowser.LocalStorage.GetObject(this._sLocalStorageKey);var _uploadInfo=null;if(resumableUploads&&resumableUploads.length)for(var i=0;i<resumableUploads.length;i++)if(resumableUploads[i].Url==sUrl){_uploadInfo=resumableUploads[i];if(typeof fCallback==="function"){var self=this;var fOnResponse=function(oReport){self._RefreshBytesUploadedCallback(resumableUploads,
i,_uploadInfo,oReport,fCallback)};this._Controller.GetUploadProgressAsync(sUrl,fOnResponse)}else{var oProgress=this._Controller.GetUploadProgress(sUrl);_uploadInfo.BytesUploaded=oProgress&&oProgress[0]&&oProgress[0].BytesUploaded?oProgress[0].BytesUploaded:0;resumableUploads[i]=_uploadInfo}break}if(typeof fCallback!=="function")ITHit.WebDAV.Client.AjaxFileBrowser.LocalStorage.SetObject(this._sLocalStorageKey,resumableUploads);return _uploadInfo};
ITHit.oNS.ResumableUploadsManager.prototype._RefreshBytesUploadedCallback=function(resumableUploads,i,_uploadInfo,oProgress,fCallback){var bSuccess=true;var oError=null;if(oProgress instanceof ITHit.WebDAV.Client.AsyncResult){var oResult=oProgress;bSuccess=oResult.IsSuccess;oError=oResult.Error;if(bSuccess)oProgress=oResult.Result}if(bSuccess){_uploadInfo.BytesUploaded=oProgress&&oProgress[0]&&oProgress[0].BytesUploaded?oProgress[0].BytesUploaded:0;resumableUploads[i]=_uploadInfo;ITHit.WebDAV.Client.AjaxFileBrowser.LocalStorage.SetObject(this._sLocalStorageKey,
resumableUploads)}if(typeof fCallback==="function"){var oUploadInfoResult=new ITHit.WebDAV.Client.AsyncResult(_uploadInfo,bSuccess,oError);fCallback.call(this,oUploadInfoResult,_uploadInfo.Url)}};
ITHit.oNS.ResumableUploadsManager.prototype.RemoveUpload=function(sUrl){if(!this._ResumableUploadsSupported)return;var resumableUploads=ITHit.WebDAV.Client.AjaxFileBrowser.LocalStorage.GetObject(this._sLocalStorageKey);var resumableUploadsNew=[];if(resumableUploads&&resumableUploads.length)for(var i=0;i<resumableUploads.length;i++)if(resumableUploads[i].Url!=sUrl)resumableUploadsNew.push(resumableUploads[i]);ITHit.WebDAV.Client.AjaxFileBrowser.LocalStorage.SetObject(this._sLocalStorageKey,resumableUploadsNew)};
ITHit.oNS.ResumableUploadsManager.prototype.GetUploadInfo=function(sUrl){if(!this._ResumableUploadsSupported)return;var resumableUploads=ITHit.WebDAV.Client.AjaxFileBrowser.LocalStorage.GetObject(this._sLocalStorageKey);var _uploadInfo;if(resumableUploads&&resumableUploads.length)for(var i=0;i<resumableUploads.length;i++)if(resumableUploads[i].Url==sUrl){_uploadInfo=resumableUploads[i];break}return _uploadInfo};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser");
ITHit.oNS.UploadCancelManager=function(oController){this._Controller=oController;this.Pool={};this.Counter=0;this.RepeatTime=0;this.RepeatCount=1;this.TimerId=null;this._FilesToCancel=[];this._NextFileIndex=0;this.ChangeCancelSettings(this._Controller.CancelUploadRetryIntervalSeconds,this._Controller.CancelUploadRetryCount);this._ClassId="ITHit.WebDAV.Client.AjaxFileBrowser.UploadCancelManager_"+ITHit.WebDAV.Client.AjaxFileBrowser.UploadCancelManager._Counter++};
ITHit.oNS.UploadCancelManager._Counter=0;ITHit.oNS.UploadCancelManager.prototype.ChangeCancelSettings=function(iRepeatTime,iRepeatCount){if((isNaN(iRepeatTime)||iRepeatTime<0)&&(isNaN(iRepeatCount)||iRepeatCount<1))return;iRepeatTime=Math.ceil(iRepeatTime);if(0==iRepeatTime){this.RepeatTime=0;this._CancelTryToCancel();return}if(!isNaN(iRepeatCount)&&iRepeatCount>0)this.RepeatCount=iRepeatCount;this.RepeatTime=iRepeatTime*1E3;this._StartTryToCancel(10)};
ITHit.oNS.UploadCancelManager.prototype.AddResource=function(sUrl,bFileExists){if(this.Pool[sUrl])return;this.Pool[sUrl]={RepeatCount:this.RepeatCount,FileExists:bFileExists};this.Counter++;this._StartTryToCancel(10)};ITHit.oNS.UploadCancelManager.prototype.RemoveResource=function(sUrl){if(typeof this.Pool[sUrl]!="undefined"){delete this.Pool[sUrl];this.Counter--;if(!this.Counter)this._CancelTryToCancel();this._Controller.RefreshOnUpdate(ITHit.Utils.GetParentUrl(sUrl))}return true};
ITHit.oNS.UploadCancelManager.prototype._StartTryToCancel=function(iInitialDelay){if(this.Counter&&this.RepeatTime&&!this.TimerId)this.TimerId=setTimeout(ITHit.Utils.MakeScopeClosure(this,"_CheckTryToCancel"),iInitialDelay?iInitialDelay:this.RepeatTime)};ITHit.oNS.UploadCancelManager.prototype._CancelTryToCancel=function(){if(this.TimerId){clearTimeout(this.TimerId);this.TimerId=null}};
ITHit.oNS.UploadCancelManager.prototype._CheckTryToCancel=function(){this.TimerId=null;this._FilesToCancel=[];for(var sUrl in this.Pool){if(typeof this.Pool[sUrl]=="undefined")continue;this._FilesToCancel.push({Url:sUrl,RepeatCount:this.Pool[sUrl].RepeatCount,FileExists:this.Pool[sUrl].FileExists})}this._NextFileIndex=0;this._TryToCancelNextFile()};
ITHit.oNS.UploadCancelManager.prototype._TryToCancelNextFile=function(){if(this._NextFileIndex>=this._FilesToCancel.length){this._StartTryToCancel();return}var oCancel=this._FilesToCancel[this._NextFileIndex];var sUrl=oCancel.Url;var iRepeatCount=oCancel.RepeatCount;var bFileExists=oCancel.FileExists;if(typeof this.Pool[sUrl]=="undefined")this._GotoNextFile();else{var iCounter=this.Pool[sUrl].RepeatCount-1;this.Pool[sUrl].RepeatCount=iCounter;if(iCounter<0)this.RemoveResource(sUrl);else try{var self=
this;if(bFileExists)this._Controller.GetSupportedFeaturesAsync(sUrl,function(oResult){if(oResult.IsSuccess){var oOptions=oResult.Result;if((oOptions.ItemOptions.Features&ITHit.WebDAV.Client.Features.ResumableUpload)>0)self._Controller.CancelUploadAsync(sUrl,null,function(oResult){self._CancelCallback(oResult,sUrl)});else self._Controller.DeleteAsync(sUrl,null,function(oResult){self._CancelCallback(oResult,sUrl)})}});else this._Controller.DeleteAsync(sUrl,null,function(oResult){self._CancelCallback(oResult,
sUrl)});this._GotoNextFile()}catch(e){}}};ITHit.oNS.UploadCancelManager.prototype._CancelCallback=function(oResult,sUrl){if(oResult.IsSuccess||oResult.Error instanceof ITHit.WebDAV.Client.Exceptions.NotFoundException)this.RemoveResource(sUrl)};ITHit.oNS.UploadCancelManager.prototype._GotoNextFile=function(){this._NextFileIndex++;setTimeout(ITHit.Utils.MakeScopeClosure(this,"_TryToCancelNextFile"),10)};ITHit.oNS.UploadCancelManager.prototype.toString=function(){return this._ClassId};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser");
ITHit.oNS.UploadController=function(sParentFormElementId,sParentInfoElementId,sUrl,oController,iRepeatTime){var oNsBrowser=ITHit.WebDAV.Client.AjaxFileBrowser;oNsBrowser.UploadController.baseConstructor.call(this);this.base=oNsBrowser.UploadController.base;this._Controller=oController;this._Url=sUrl;this._Form;this._UploadFormToProcess;this._UploadRewriteFlag=oNsBrowser.UploadController.DefaultActions.Ask;this._NextFileIndex=0;this._FilesToUpload=[];this._DnDFiles=this._Controller._DnDFilesSupported;
this._LastUploadList={};this._IframeContainer=ITHit.Components.dojo.byId("ithit_interface_iframe_upload_container_"+this._Controller.GetIndex());this.DefaultRoot=ITHit.Components.dojo.byId(sParentFormElementId);this.MaximumUploads=3;this.IsFormDisabled=true;if(ITHit.DetectBrowser.IE&&ITHit.DetectBrowser.IE<10)this.MaximumUploads=1;this.UploadManager=new oNsBrowser.UploadManager(this,this._Controller,this._IframeContainer,this.MaximumUploads,iRepeatTime);ITHit.Events.AddListener(this.UploadManager,
"OnCheckFileExistence","_CheckFileExistenceHandler",this);ITHit.Events.AddListener(this.UploadManager,"OnAddToPool","_AddToPoolHandler",this);ITHit.Events.AddListener(this.UploadManager,"OnLoadStart","_LoadStartHandler",this);ITHit.Events.AddListener(this.UploadManager,"OnLoad","_LoadHandler",this);ITHit.Events.AddListener(this.UploadManager,"OnError","_ErrorHandler",this);ITHit.Events.AddListener(this.UploadManager,"OnProgress","_ProgressHandler",this);ITHit.Events.AddListener(this.UploadManager,
"OnFinish","_FinishHandler",this);ITHit.Events.AddListener(this.UploadManager,"OnGetProgress","_GetProgressHandler",this);ITHit.Events.AddListener(this.UploadManager,"OnUploadPart","_UploadPartHandler",this);ITHit.Events.AddListener(this.UploadManager,"OnItemExists","_CheckFileExistenceHandler",this);ITHit.Events.AddListener(this.UploadManager,"OnCancelUpload","_CancelUploadHandler",this);ITHit.Events.AddListener(this.UploadManager,"OnAutoResumeRetryIn","_AutoResumeRetryInHandler",this);ITHit.Events.AddListener(this.UploadManager,
"OnTryToResumeError","_ErrorHandler",this);ITHit.Events.AddListener(this.UploadManager,"OnTryToResume","_TryToResumeHandler",this);this.UploadInfo=new oNsBrowser.Render.UploadInfoManager(sParentInfoElementId,oController);this.UploadInfo.AddListener("OnRowContextMenu","_OnUploadInfoContextMenuHandler",this);this.UploadInfo.AddListener("OnRowDoubleClick","_OnUploadInfoRowDoubleClickMenuHandler",this);this._ResumableUploadsManager=new oNsBrowser.ResumableUploadsManager(this.UploadInfo,this.UploadManager,
this._Controller);this._ResumableUploadsManager.LoadResumableUploads();this._UploadCancelManager=new ITHit.WebDAV.Client.AjaxFileBrowser.UploadCancelManager(this._Controller);this.CreateForm(sUrl)};ITHit.Extend(ITHit.oNS.UploadController,ITHit.oNS.AjaxFileBrowserBase);ITHit.oNS.UploadController.prototype._GetClassName=function(){return"ITHit.WebDAV.Client.AjaxFileBrowser.UploadController"};ITHit.oNS.UploadController.DefaultActions={"Ask":0,"Rewrite":1,"RewriteAll":2,"Skip":3,"SkipAll":4};
ITHit.oNS.UploadController.prototype.ChangeProgressRefreshTime=function(iRepeatTime){return this.UploadManager.ChangeProgressRefreshTime(iRepeatTime)};ITHit.oNS.UploadController.prototype.SetResumeSupported=function(bIsSupported){this._ResumableUploadsManager.SetResumeSupported(bIsSupported)};ITHit.oNS.UploadController.prototype.IsResumeSupported=function(){return this._ResumableUploadsManager.IsResumeSupported()};
ITHit.oNS.UploadController.prototype.CreateForm=function(sUrl,oRoot,bDoNotCheckFileExistence,oSubmitButton){var bFormDisabled=this.IsFormDisabled,bExternalCreated=oRoot&&oRoot!==this.DefaultRoot;if(oRoot)bFormDisabled=false;if(sUrl)sUrl=ITHit.DecodeHost(this._Controller._Utils.GetAbsolutePath(sUrl));var bDoNotCreateFileNameField=!bExternalCreated&&this._DnDFiles||ITHit.DetectBrowser.iPad||ITHit.DetectBrowser.iPhone;var oForm=new ITHit.WebDAV.Client.AjaxFileBrowser.Render.UploadForm(oRoot||this.DefaultRoot,
sUrl,bFormDisabled,bDoNotCheckFileExistence,oRoot&&oRoot!==this.DefaultRoot,oSubmitButton,bDoNotCreateFileNameField);if(bExternalCreated)oForm.ExternalCreated=true;ITHit.Events.AddListener(oForm,"OnSubmit","_SubmitHandler",this);if(!oRoot)this._Form=oForm;return oForm};ITHit.oNS.UploadController.prototype.DisableForm=function(){this.IsFormDisabled=true;this._Form.DisableForm()};ITHit.oNS.UploadController.prototype.EnableForm=function(){this.IsFormDisabled=false;this._Form.EnableForm()};
ITHit.oNS.UploadController.prototype.SetUploadUrl=function(sUrl){this._Url=sUrl;if(sUrl)sUrl=ITHit.DecodeHost(this._Controller._Utils.GetAbsolutePath(sUrl));this._Form.SetUploadUrl(sUrl)};
ITHit.oNS.UploadController.prototype._SubmitHandler=function(oEvent,oForm){if(!(oForm instanceof ITHit.WebDAV.Client.AjaxFileBrowser.UploadFormObject)&&!(oForm instanceof ITHit.WebDAV.Client.AjaxFileBrowser.UploadDropObjectAdapter))throw ITHit.Exception("Parameter expected to be UploadFormObject or UploadDropObjectAdapter instance.");if(this._FilesToUpload.length)return false;if(false===ITHit.Events.DispatchEvent(this,"OnSubmit",[oEvent,oForm]))return false;setTimeout(ITHit.Utils.MakeScopeClosure(this,
"_AddFiles",oForm),0);return false};ITHit.oNS.UploadController.prototype._AddFiles=function(oForm){this._UploadFormToProcess=oForm;this._AddFilesToQueue()};
ITHit.oNS.UploadController.prototype._AddFilesToQueue=function(){var iFilesLength=this._UploadFormToProcess.GetUploadFilesLength();for(var i=0;i<iFilesLength;i++){var sUrl=this._UploadFormToProcess.GetDestination(i);var bIsFolder=false;var sSourceName=this._UploadFormToProcess.GetRelativePath(i);if(!ITHit.Utils.IsStringNullOrEmpty(sSourceName)){if(sSourceName==".")continue;if(/\/\.$/.test(sSourceName)){sSourceName=sSourceName.substr(0,sSourceName.length-1);bIsFolder=true}}else sSourceName=this._UploadFormToProcess.GetSourceName(i);
var oFileInfo=this._UploadFormToProcess.GetFileInfo(i);var iFileSize=oFileInfo?oFileInfo.size||oFileInfo.fileSize||"":"";if(!bIsFolder&&!this.UploadInfo.CheckUploadItem(sUrl))this.UploadInfo.Add(sUrl,sSourceName,iFileSize)}this._UploadFilesPresent=[];this._FilesNotInResumeList={};this._FilesResumeSizeChanged={};this._UploadFileExists=false;this._UploadFolders={};this._ProcessUploadFiles()};
ITHit.oNS.UploadController.prototype._ClearFilesFromQueue=function(){var iFilesLength=this._UploadFormToProcess.GetUploadFilesLength();for(var i=0;i<iFilesLength;i++){var sUrl=this._UploadFormToProcess.GetDestination(i);if(!/\/\.$/.test(sUrl))this.UploadInfo.Remove(sUrl)}};
ITHit.oNS.UploadController.prototype.SetRewriteUploadFileAction=function(sAction){var oNsDefaultActions=ITHit.WebDAV.Client.AjaxFileBrowser.UploadController.DefaultActions;switch(sAction){case "cancel":this._ClearFilesFromQueue();this._UploadFormToProcess.ClearFileField();this.Clear();return;case "yes":this._UploadRewriteFlag=oNsDefaultActions.Rewrite;break;case "no":this._UploadRewriteFlag=oNsDefaultActions.Skip;break;case "yes_all":this._UploadRewriteFlag=oNsDefaultActions.RewriteAll;break;case "no_all":this._UploadRewriteFlag=
oNsDefaultActions.SkipAll;break}setTimeout(ITHit.Utils.MakeScopeClosure(this,"_ProcessUploadFiles"),300)};ITHit.oNS.UploadController.prototype.Clear=function(){this._UploadFormToProcess=null;this._UploadRewriteFlag=ITHit.WebDAV.Client.AjaxFileBrowser.UploadController.DefaultActions.Ask;this._NextFileIndex=0;this._FilesToUpload=[];this._UploadFilesPresent=[];this._FilesNotInResumeList={};this._FilesResumeSizeChanged={}};
ITHit.oNS.UploadController.prototype._ProcessUploadFiles=function(){var oNsDefaultActions=ITHit.WebDAV.Client.AjaxFileBrowser.UploadController.DefaultActions,iAskRewriteFlag=oNsDefaultActions.Ask,iFilesLength=this._UploadFormToProcess.GetUploadFilesLength(),aLargeFiles=[];if(ITHit.DetectBrowser.FF&&ITHit.DetectBrowser.FF<7&&(iFilesLength>1||this._UploadFormToProcess instanceof ITHit.WebDAV.Client.AjaxFileBrowser.UploadDropObjectAdapter)&&this._UploadFormToProcess.GetFileInfo(this._NextFileIndex)){for(var i=
this._NextFileIndex;i<iFilesLength;i++){var oFileData=this._UploadFormToProcess.GetFileInfo(i);if(oFileData&&(oFileData.fileSize||oFileData.size)>104857600)aLargeFiles.push(oFileData.name)}if(aLargeFiles.length){ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.ShowMessage(ITHit.Phrases.AjaxFileBrowser.Interface.FirefoxLargeFilesToUpload.Paste(aLargeFiles.join("\n")));this.Clear();return false}}for(var i=this._NextFileIndex;i<iFilesLength;i++){this._NextFileIndex=i;var sUrl=this._UploadFormToProcess.GetDestination(i);
var sRelativePath=this._UploadFormToProcess.GetRelativePath(i)||"";if(sRelativePath==".")continue;var sBasePath;var bIsFolder=/\/\.$/.test(sRelativePath);if(!ITHit.Utils.IsStringNullOrEmpty(sRelativePath))sBasePath=sUrl.substr(0,sUrl.length-ITHit.WebDAV.Client.Encoder.Encode(sRelativePath).length+(bIsFolder?1:0));if(this._LastUploadList[sUrl])continue;var bResumableUpload=this._CheckForResumableUpload(sUrl,i);if(this.UploadManager.CheckFileExistenceInUploadPool(sUrl)&&!bResumableUpload){this._UploadFilesPresent.push(ITHit.WebDAV.Client.Encoder.Decode(sUrl));
continue}if(this._UploadFormToProcess.CheckFileExistence&&this._UploadRewriteFlag!==oNsDefaultActions.RewriteAll)switch(this._UploadRewriteFlag){case oNsDefaultActions.Skip:this.UploadInfo.Remove(sUrl);if(1==iFilesLength){this._UploadFormToProcess.ClearFileField();this.Clear();return false}this._UploadRewriteFlag=iAskRewriteFlag;continue;case oNsDefaultActions.SkipAll:this._ClearFilesFromQueue();this._UploadFormToProcess.ClearFileField();this.Clear();return false;continue;case oNsDefaultActions.Ask:if(!bIsFolder){var self=
this;this.CheckFileExistenceAsync(sUrl,function(oResult){self._CheckFileExistenceCallback(sUrl,oResult)});return}}if(!bIsFolder){var parts=sRelativePath.split("/");if(parts.length>1){var path="";for(var i2=0;i2<parts.length-1;i2++){if(path!=="")path+="/";path+=parts[i2];if(this._UploadFolders[path]==null){this._UploadFolders[path]={};this._FilesToUpload.push({Url:sBasePath+path,Method:this._UploadFormToProcess.Method,Form:this._UploadFormToProcess,RewriteAction:oNsDefaultActions.Rewrite,FileIndex:i2,
FileExists:false,IsFolder:true,BaseUrl:sBasePath})}}}}this._FilesToUpload.push({Url:sUrl,Method:this._UploadFormToProcess.Method,Form:this._UploadFormToProcess,RewriteAction:this._UploadFormToProcess.CheckFileExistence?this._UploadRewriteFlag:oNsDefaultActions.Rewrite,FileIndex:i,FileExists:this._UploadFileExists,IsFolder:bIsFolder,BaseUrl:sBasePath});this._UploadFileExists=false;this._LastUploadList[sUrl]=true;if(iAskRewriteFlag!=this._UploadRewriteFlag)switch(this._UploadRewriteFlag){case oNsDefaultActions.Rewrite:case oNsDefaultActions.Skip:this._UploadRewriteFlag=
iAskRewriteFlag}var sSourceName=this._UploadFormToProcess.GetSourceName(i);var iFileSize=this._UploadFormToProcess.GetFileSize(i);this._ResumableUploadsManager.AddUpload(sUrl,sSourceName,iFileSize,bIsFolder)}if(this._UploadFilesPresent&&this._UploadFilesPresent.length>0)ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.ShowMessage(ITHit.Phrases.AjaxFileBrowser.Interface.FilesPresentInUploadList.Paste(this._UploadFilesPresent.join("\n")));var aFilesNotInResumeList=[];for(var _url in this._FilesNotInResumeList)aFilesNotInResumeList.push(_url);
var aFilesResumeSizeChanged=[];for(var _url in this._FilesResumeSizeChanged)aFilesResumeSizeChanged.push(_url);if(aFilesNotInResumeList.length>0||aFilesResumeSizeChanged.length>0)ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.ShowMessage(ITHit.Phrases.AjaxFileBrowser.Interface.FilesResumeNotInListOrChanged.Paste(aFilesResumeSizeChanged.join("\n"),aFilesNotInResumeList.join("\n")));this._LastUploadList={};if(!this._FilesToUpload.length){this.Clear();return false}if(!this._UploadFormToProcess.ExternalCreated)this.CreateForm(this._Url);
this._UploadFormToProcess.SetInProcess();this._UploadFormToProcess.Hide();this.UploadManager.AddFilesToPool(this._FilesToUpload);this.Clear()};
ITHit.oNS.UploadController.prototype._CheckForResumableUpload=function(sUrl,iIndex){var oNsDefaultActions=ITHit.WebDAV.Client.AjaxFileBrowser.UploadController.DefaultActions;var oInfo=this.GetInfo(sUrl);if(oInfo)return false;var bIsInResumeList=this._UploadFormToProcess.GetResumeDestination(iIndex)!=null;var bIsResumeAfterCrash=this._UploadFormToProcess.GetResumeDestinations()!=null;if(bIsResumeAfterCrash&&!bIsInResumeList)this._FilesNotInResumeList[ITHit.WebDAV.Client.Encoder.Decode(sUrl)]=1;var oResumableUpload=
this._ResumableUploadsManager.GetUploadInfo(sUrl);if(oResumableUpload){if(this.UploadInfo.CheckUploadItem(sUrl))this.UploadInfo.Remove(sUrl);this._UploadFormToProcess.SetBytesUploaded(iIndex,oResumableUpload.BytesUploaded);this._UploadRewriteFlag=oNsDefaultActions.Rewrite;this._UploadFileExists=true;var oFile=this._UploadFormToProcess.GetFileInfo(iIndex);var iFileSize=oFile.fileSize||oFile.size;if(iFileSize!=oResumableUpload.Size){this._FilesResumeSizeChanged[ITHit.WebDAV.Client.Encoder.Decode(sUrl)]=
1;this._UploadFormToProcess.SetBytesUploaded(iIndex,0)}}return oResumableUpload!=null};ITHit.oNS.UploadController.prototype._CheckFileExistenceCallback=function(sUrl,oResult){var oNsDefaultActions=ITHit.WebDAV.Client.AjaxFileBrowser.UploadController.DefaultActions;if(oResult.IsSuccess){this._UploadFileExists=true;this._Controller.OpenRewriteUploadFileDialog(ITHit.WebDAV.Client.Encoder.Decode(sUrl))}else{this._UploadFileExists=false;this._UploadRewriteFlag=oNsDefaultActions.Rewrite;this._ProcessUploadFiles()}};
ITHit.oNS.UploadController.prototype.CheckFileExistence=function(sUrl){sUrl=ITHit.Decode(sUrl);return this._Controller.ItemExists(sUrl)};ITHit.oNS.UploadController.prototype.CheckFileExistenceAsync=function(sUrl,fCallback){sUrl=ITHit.Decode(sUrl);return this._Controller.ItemExistsAsync(sUrl,fCallback)};
ITHit.oNS.UploadController.prototype._AddToPoolHandler=function(sEvent,oUploadFile){var oEventData={method:oUploadFile.Method,action:oUploadFile.Url};this.DispatchEvent("OnBeforeUpload",oEventData);oUploadFile.Method=oEventData.method.toUpperCase();oUploadFile.Url=oEventData.action};ITHit.oNS.UploadController.prototype.GetSelectedItems=function(){return this.UploadInfo.GetSelectedItems()};ITHit.oNS.UploadController.prototype.GetErrors=function(sUrl){return this.UploadInfo.GetErrors(sUrl)};
ITHit.oNS.UploadController.prototype.GetErrorsLength=function(sUrl){return this.UploadInfo.GetErrorsLength(sUrl)};ITHit.oNS.UploadController.prototype.GetStatus=function(sUrl){return this.UploadInfo.GetStatus(sUrl)};ITHit.oNS.UploadController.prototype.GetInfo=function(sUrl){return this.UploadManager.GetInfo(sUrl)};
ITHit.oNS.UploadController.prototype._LoadStartHandler=function(sEvent,sUrl){var uploadInfo=this._ResumableUploadsManager.GetUploadInfo(sUrl);this.UploadInfo.BeginUpload(sUrl,uploadInfo?uploadInfo.BytesUploaded:0);this._ResumableUploadsManager.CheckResumeSupported(sUrl)};
ITHit.oNS.UploadController.prototype._LoadHandler=function(sEvent,sUrl,sBaseUrl){if(this.UploadInfo.CheckUploadItem(sUrl))this.UploadInfo.Remove(sUrl);this._ResumableUploadsManager.RemoveUpload(sUrl);this.DispatchEvent("OnLoad",["OnLoad",sUrl,sBaseUrl])};
ITHit.oNS.UploadController.prototype._ErrorHandler=function(sEvent,sUrl,oStatus,sErrorBody){var sErrorMessage;if(oStatus&&oStatus.Code)sErrorMessage=ITHit.Phrases.AjaxFileBrowser.StatusDescriptions[oStatus.Code]||oStatus.Description;if(!sErrorMessage)sErrorMessage=ITHit.Phrases.AjaxFileBrowser.Interface.FileUploadFailed;sErrorMessage=String(sErrorMessage);this.UploadInfo.UploadError(sUrl,sErrorMessage,sErrorBody);this.DispatchEvent("OnError",[sUrl,sErrorMessage,sErrorBody])};
ITHit.oNS.UploadController.prototype._GetProgressHandler=function(sEvent,sUrl,fCallback){var uploadInfo=this._ResumableUploadsManager.RefreshBytesUploadedAsync(sUrl,fCallback);if(!uploadInfo)return false;var oProgress=new ITHit.WebDAV.Client.AjaxFileBrowser.UploadProgressInfo(uploadInfo.BytesUploaded,uploadInfo.Size);return oProgress};
ITHit.oNS.UploadController.prototype._TryToResumeHandler=function(sEvent,aUploads){if(!ITHit.Utils.IsArray(aUploads))aUploads=[aUploads];for(var i=0;i<aUploads.length;i++){var uploadInfo=aUploads[i];var sUrl=uploadInfo.Url;this.UploadInfo.UploadResume(sUrl)}};ITHit.oNS.UploadController.prototype._ProgressHandler=function(sEvent,oReports){this.UploadInfo.UpdateInfo(oReports)};ITHit.oNS.UploadController.prototype._FinishHandler=function(oResponse){this.DispatchEvent("OnFinish",[oResponse])};
ITHit.oNS.UploadController.prototype._UploadPartHandler=function(sUrl,iBytesUploaded,iFileSize){this.UploadInfo.UploadPartBegin(sUrl,iBytesUploaded,iFileSize)};ITHit.oNS.UploadController.prototype._CheckFileExistenceHandler=function(sEvent,sUrl){return this.CheckFileExistence(sUrl)};ITHit.oNS.UploadController.prototype._CancelUploadHandler=function(sEvent,sUrl){return this.CancelUpload(sUrl)};
ITHit.oNS.UploadController.prototype._AutoResumeRetryInHandler=function(sEvent,sUrl,iCount){this.UploadInfo.UploadRetry(sUrl,iCount)};
ITHit.oNS.UploadController.prototype.CancelUpload=function(aUrl){if(!ITHit.Utils.IsArray(aUrl))aUrl=[aUrl];for(var i=0,l=aUrl.length;i<l;i++){var sUrl=aUrl[i];var sStatus=this.UploadInfo.GetStatus(sUrl);var oFile=this.UploadManager.GetInfo(sUrl);this.UploadManager.DeleteForm(sUrl);this.UploadInfo.Remove(sUrl);this._ResumableUploadsManager.RemoveUpload(sUrl);if(sStatus&&"queue"!=sStatus)this._UploadCancelManager.AddResource(sUrl,oFile.FileExists)}};
ITHit.oNS.UploadController.prototype.PauseUpload=function(aUrl){if(!ITHit.Utils.IsArray(aUrl))aUrl=[aUrl];var self=this;for(var i=0,l=aUrl.length;i<l;i++){var sUrl=aUrl[i];var sStatus=this.UploadInfo.GetStatus(sUrl);this.UploadManager.PauseUpload(sUrl);this.UploadInfo.UploadPause(sUrl);this._ResumableUploadsManager.RefreshBytesUploadedAsync(sUrl,function(uploadInfo,sUrl){var bSuccess=true;if(uploadInfo instanceof ITHit.WebDAV.Client.AsyncResult){var oResult=uploadInfo;bSuccess=oResult.IsSuccess;if(bSuccess)uploadInfo=
oResult.Result}if(bSuccess)try{var iStartPosition=self.UploadInfo.GetStartPosition(sUrl);if(iStartPosition&&uploadInfo.BytesUploaded>iStartPosition){uploadInfo.BytesUploaded-=iStartPosition;uploadInfo.Size-=iStartPosition}var oProgress=new ITHit.WebDAV.Client.UploadProgressInfo(sUrl,uploadInfo.BytesUploaded,uploadInfo.Size,0);var oReports={};oReports[sUrl]=oProgress;self.UploadInfo.UpdateInfo(oReports)}catch(e){}self.UploadInfo.UploadPause(sUrl)})}};
ITHit.oNS.UploadController.prototype.ResumeUpload=function(aUrl){if(!ITHit.Utils.IsArray(aUrl))aUrl=[aUrl];var noFile=false;var formDestinations={};for(var i=0;i<aUrl.length;i++){var sUrl=aUrl[i];var iPos=sUrl.lastIndexOf("/")+1;if(!iPos)iPos=sUrl.lastIndexOf("\\")+1;if(iPos)sUrl=sUrl.substr(iPos);formDestinations[sUrl]=aUrl[i];if(!this.GetInfo(aUrl[i]))noFile=true}if(noFile){this._Form.SetResumeAfterCrash(true);this._Form.SetResumeDestinations(formDestinations);this._Form.ClearFileField();this._Form.DoClickBrowse();
return}var self=this;for(var i=0;i<aUrl.length;i++){var sUrl=aUrl[i];this.UploadInfo.UploadResume(sUrl);this._ResumableUploadsManager.RefreshBytesUploadedAsync(sUrl,function(oUploadInfo,sUrl){var bSuccess=true;var oError=null;if(oUploadInfo instanceof ITHit.WebDAV.Client.AsyncResult){var oResult=oUploadInfo;if(!oResult.IsSuccess){bSuccess=oResult.IsSuccess;oError=oResult.Error}oUploadInfo=oResult.Result;if(oError instanceof ITHit.WebDAV.Client.Exceptions.NotFoundException){bSuccess=true;oUploadInfo=
{Url:sUrl,BytesUploaded:0}}}if(bSuccess)self.UploadManager.ResumeUpload([oUploadInfo]);else self.UploadManager.ResumeUploadError(oUploadInfo.Url,oError)})}};ITHit.oNS.UploadController.prototype.UploadFile=function(sUrl){if(sUrl.indexOf("://")===-1)sUrl=this._Controller.Commands.GetAbsolutePath(sUrl,true);this._Form.IsFolderMode=false;this._Form.SetDestination(sUrl);this._Form.DoClickBrowse()};
ITHit.oNS.UploadController.prototype.UploadFolder=function(sUrl){if(sUrl.indexOf("://")===-1)sUrl=this._Controller.Commands.GetAbsolutePath(sUrl,true);if(ITHit.DetectBrowser.Chrome>=11){this._Form.IsFolderMode=true;this._Form.SetDestination(sUrl);this._Form.DoClickBrowse()}else ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.ShowMessage(ITHit.Phrases.AjaxFileBrowser.Interface.FolderUploadNotAvailedInYourBrowser)};
ITHit.oNS.UploadController.prototype.Restart=function(aUrl){if(!ITHit.Utils.IsArray(aUrl))aUrl=[aUrl];for(var i=0,l=aUrl.length;i<l;i++){this.UploadInfo.ResetInfo(aUrl[i]);this.UploadManager.Restart(aUrl[i])}};ITHit.oNS.UploadController.prototype._OnUploadInfoContextMenuHandler=function(event,urls){this.DispatchEvent("OnContextMenu",[event,urls])};ITHit.oNS.UploadController.prototype._OnUploadInfoRowDoubleClickMenuHandler=function(event,url){this.DispatchEvent("OnRowDoubleClick",[event,url])};
ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser.Render");
ITHit.oNS.TreeController=function(sElementId,oController){this._ClassId="ITHit.WebDAV.Client.AjaxFileBrowser.Render.TreeController_"+ITHit.WebDAV.Client.AjaxFileBrowser.Render.TreeController._Counter++;this._elementId=sElementId;this._tree=new ITHit.Components.YAHOO.widget.TreeView(sElementId,oController._index);this._controller=oController;this._isActive=false;this._IsFetched=false;this._BeforeFetchTreeData={SelectedNode:null,OpenToFolder:null};this._tree.setDynamicLoad(function(o){return function(node,
onComplite){o.Load(node,onComplite)}}(this),1);var root=this._tree.getRoot();var sAbsoluteBaseUrl=ITHit.Utils.HtmlEscape(this._controller._Utils.GetAbsolutePath(this._controller._baseUrl));var rootNode=new ITHit.Components.YAHOO.widget.TextNode(sAbsoluteBaseUrl,root,false);rootNode.data={url:ITHit.Utils.HtmlEscape(this._controller._baseUrl),sourceUrl:this._controller._baseUrl};this._tree.draw();ITHit.Events.AddListener(this._controller.Commands.FoldersCollection,"OnRemove",function(sUrl){this.RemoveNode(sUrl)},
this);ITHit.Events.AddListener(this._controller.Commands.FoldersCollection,"OnSet",function(sUrl,aChildren){var oNode=this.GetNodeByUrl(sUrl);if(!oNode)return;var oFiltered=this._controller._filter.Run(aChildren);this.AddNodes(oNode,oFiltered.Folders)},this)};ITHit.oNS.TreeController._Counter=0;
ITHit.oNS.TreeController.prototype.FetchTree=function(sUrl){if(this._IsFetched)return;this._IsFetched=true;var fGetValues=function(oItems){var aItems=[];for(var key in oItems)if(oItems.hasOwnProperty(key))aItems.push(oItems[key]);return aItems};var that=this;this._controller.Commands.Create("LoadTreeFoldersCommand",{Href:sUrl,OnSuccess:function(oItems,oFolderItems){for(var sFolderUrl in oFolderItems){if(!oFolderItems.hasOwnProperty(sFolderUrl))continue;var oFiltered=that._controller._filter.Run(fGetValues(oFolderItems[sFolderUrl]));
that.RenderItems(oItems[sFolderUrl],oFiltered.Folders)}if(that._BeforeFetchTreeData.SelectedNode)that.SetSelectedNode(that._BeforeFetchTreeData.SelectedNode);if(that._BeforeFetchTreeData.OpenToFolder)that.OpenToFolder(that._BeforeFetchTreeData.OpenToFolder)}}).Execute()};ITHit.oNS.TreeController.prototype.GetTreeId=function(){return this._tree.id};
ITHit.oNS.TreeController.prototype.Load=function(oNode,onComplite){this._tree.locked=false;this._controller.Commands.Create("LoadFolderCommand",{Href:encodeURI(oNode.data.sourceUrl),OnSuccess:function(oItem,aChildren){if(oItem)onComplite(oItem);else{oNode.isLoading=false;oNode.updateIcon()}}}).Execute()};ITHit.oNS.TreeController.prototype.RenderItems=function(oItem,aItems){var sUrl=decodeURI(oItem.Href),oNode=this.GetNodeByUrl(sUrl);if(!oNode)return false;this.AddNodes(oNode,aItems);return true};
ITHit.oNS.TreeController.prototype.RenameNode=function(sUrl,sNewName){var oNode;if(""!==sUrl)oNode=this.GetNodeByUrl(sUrl);else oNode=this._tree.root.children[0];oNode.setUpLabel({label:sNewName})};ITHit.oNS.TreeController.prototype.IsOpenedItem=function(sUrl){var oNode=this.GetNodeByUrl(sUrl);if(!oNode)return false;return oNode.dynamicLoadComplete};ITHit.oNS.TreeController.prototype.GetNodeUrl=function(oNode){return oNode&&oNode.data&&oNode.data.sourceUrl?oNode.data.sourceUrl:""};
ITHit.oNS.TreeController.prototype.GetNodeByUrl=function(sUrl){return this._tree.getNodeByProperty("sourceUrl",decodeURI(sUrl))};ITHit.oNS.TreeController.prototype.NodeExists=function(sUrl){return!!this.GetNodeByUrl(sUrl)};ITHit.oNS.TreeController.prototype.GetNodesByProperty=function(sPropName,sValue){return this._tree.getNodesByProperty(sPropName,sValue)};
ITHit.oNS.TreeController.prototype.AddNodes=function(oNode,aItems){if(!oNode.dynamicLoadComplete&&!oNode.children.length){for(var i=0,l=aItems.length;i<l;i++)this.AddNode(oNode,aItems[i]);oNode.dynamicLoadComplete=true}else{var oHash={};for(var i=0,l=aItems.length;i<l;i++)oHash[decodeURI(aItems[i].Href)]=true;var aChildren=oNode.children;for(var i=0;i<aChildren.length;i++)if(!oHash[aChildren[i].data.sourceUrl]){this.RemoveNode(aChildren[i].data.sourceUrl);aChildren.splice(i,1);i--}var iIndex=0;for(var i=
0,l=aItems.length;i<l;i++){if(!oNode.children[iIndex]||oNode.children[iIndex].data.sourceUrl!=decodeURI(aItems[i].Href)){var iLen=oNode.children.length;var oNewNode=this.AddNode(oNode,aItems[i]);if(iIndex<iLen)oNewNode.insertBefore(oNode.children[iIndex])}iIndex++}}this._tree.draw()};
ITHit.oNS.TreeController.prototype.AddNode=function(oNode,aNode){var sHref=decodeURI(aNode.Href);var node=new ITHit.Components.YAHOO.widget.TextNode({label:ITHit.Utils.HtmlEscape(aNode.DisplayName),href:sHref},oNode,false);node.data={url:ITHit.Utils.HtmlEscape(sHref),sourceUrl:sHref};return node};ITHit.oNS.TreeController.prototype.RemoveChildrenByUrl=function(sUrl){var oNode=this.GetNodeByUrl(sUrl);if(oNode)this.RemoveChildren(oNode)};
ITHit.oNS.TreeController.prototype.RemoveChildren=function(oNode){var aChildren=oNode.children;for(var i=0;i<aChildren.length;i++){this._tree.removeNode(aChildren[i]);aChildren.splice(i,1);i--}oNode.collapse();oNode._dynLoad=true;oNode.dynamicLoadComplete=false;oNode.isLoading=false;oNode.updateIcon();this._tree.draw()};ITHit.oNS.TreeController.prototype.RemoveNode=function(sUrl){var oNode=this.GetNodeByUrl(sUrl);if(oNode)this._tree.removeNode(oNode,true)};
ITHit.oNS.TreeController.prototype.RemoveNodes=function(aUrl){var bRefresh=aUrl.length<=5?true:false;for(var i=0,l=aUrl.length;i<l;i++){var oNode=this.GetNodeByUrl(aUrl[i]);if(oNode)this._tree.removeNode(oNode,bRefresh)}if(!bRefresh)this._tree.draw()};
ITHit.oNS.TreeController.prototype.UpdateNode=function(sUrl,sNewUrl,sNewLabel){var oNode=this.GetNodeByUrl(sUrl);if(oNode){oNode.setUpLabel(sNewLabel);oNode.data.url=ITHit.Utils.HtmlEscape(sNewUrl);oNode.data.sourceUrl=sNewUrl;try{oNode.getLabelEl().innerHTML=ITHit.Utils.HtmlEscape(sNewLabel)}catch(e){}}};ITHit.oNS.TreeController.prototype.GetNodeByElement=function(oElement){return this._tree.getNodeByElement(oElement)};
ITHit.oNS.TreeController.prototype.RefreshNode=function(oNode){var oEl=oNode.getToggleEl();oEl.className="";oEl.className="ygtvloading";var prev=this.FlushCacheOnOpenFolder;this._controller.FlushCacheOnOpenFolder=true;this._controller.OpenFolderAsync(oNode.data.sourceUrl,true,false,false,function(){oNode.isLoading=false;oNode.updateIcon()});this._controller.FlushCacheOnOpenFolder=prev};
ITHit.oNS.TreeController.prototype.OpenToFolder=function(sUrl){if(!this._IsFetched){this._BeforeFetchTreeData.OpenToFolder=sUrl;return}var oNode=this.GetNodeByUrl(sUrl);if(oNode)this.OpenToNode(oNode)};ITHit.oNS.TreeController.prototype.OpenToNode=function(oNode){if(oNode.parent)this.OpenToNode(oNode.parent);oNode.expand()};ITHit.oNS.TreeController.prototype.SetSelectedNode=function(sUrl){if(!this._IsFetched){this._BeforeFetchTreeData.SelectedNode=sUrl;return}this._tree.selectNode("sourceUrl",decodeURI(sUrl))};
ITHit.oNS.TreeController.prototype.DeselectNode=function(){var oNode=this._tree.getSelectedNode();if(oNode)oNode.deselectNode()};ITHit.oNS.TreeController.prototype.SetNodeOverStyle=function(oElement,bSet){var oNode=this.GetNodeByElement(oElement),oEl=oNode.getLabelEl();oEl.className=oEl.className.replace(" hover","");if(bSet)oEl.className+=" hover"};ITHit.oNS.TreeController.prototype.IsActive=function(sUrl){return this._isActive};
ITHit.oNS.TreeController.prototype.SetActive=function(sUrl){if(!this._isActive){var oNode=this._tree.getEl();oNode.className=oNode.className+" active";this._isActive=true}};ITHit.oNS.TreeController.prototype.SetInactive=function(sUrl){if(this._isActive){var oNode=this._tree.getEl();oNode.className=oNode.className.replace(" active","");this._isActive=false}};ITHit.oNS.TreeController.prototype.GetSelectedNodeUrl=function(){var oNode=this._tree.getSelectedNode();return oNode?oNode.data.sourceUrl:null};
ITHit.oNS.TreeController.prototype.SetRootNode=function(sUrl){var root=this._tree.getRoot();var sAbsoluteUrl=ITHit.Utils.HtmlEscape(this._controller._Utils.GetAbsolutePath(sUrl));var rootNode=new ITHit.Components.YAHOO.widget.TextNode(sAbsoluteUrl,root,false);rootNode.data={url:ITHit.Utils.HtmlEscape(sUrl),sourceUrl:sUrl};this._tree.draw()};ITHit.oNS.TreeController.prototype.toString=function(){return this._ClassId};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser.Render");
ITHit.oNS.ViewModes={Details:"details",Medium:"medium",Large:"large",ExtraLarge:"extralarge"};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser.Render.DataView.GridView");
ITHit.oNS.GridController=function(container,tableViewModifier,imageTypes,preventImageCaching){this.Grid=null;this.MapNames=null;this._RowFormatter=null;this._CellFormatter=null;this._CustomColumns=[];var phrasesNs=ITHit.Phrases.AjaxFileBrowser.Grid,utilsNs=ITHit.WebDAV.Client.AjaxFileBrowser.Render.Utils;this._TableFieldsDefautlStructure=[{linkId:"Icon",name:"&nbsp;",field:"2",width:"24px",cellStyles:{textAlign:"center"},noresize:"true",formatter:ITHit.Utils.MakeScopeClosure(this,"FormatIconsByType"),
cellClasses:"image"},{linkId:"Name",name:phrasesNs.Name,field:"0",width:"194px",formatter:ITHit.Utils.HtmlEscape},{linkId:"Size",name:phrasesNs.Size,field:"1",width:"64px",cellStyles:{textAlign:"right"},formatter:utilsNs.FormatSize},{linkId:"Type",name:phrasesNs.Type,field:"2",width:"54px"},{linkId:"DateModified",name:phrasesNs.DateModified,field:"3",width:"94px",formatter:utilsNs.FormatDate},{linkId:"Folder",name:phrasesNs.Folder,field:"4",width:"150px",hidden:true,formatter:function(sUrl){return ITHit.WebDAV.Client.HierarchyItem.GetFolderParentUri(sUrl)}}];
this._TableDefaultMapNames={"Name":"0","Size":"1","Type":"2","LastModified":"3","Url":"4","Item":"5","IsLocked":"6"};this.Container=container;this.Initiated=false;this.ImageTypes=imageTypes;this._ThumbSize=null;this._ViewMode=ITHit.WebDAV.Client.AjaxFileBrowser.Render.ViewModes.Details;this._IconSize=16;this._PreventCache=preventImageCaching;this.ShowImagePreview=true;this.ItemsLength=null;this.DispatchTimer=null;this.DispatchEventClosure=ITHit.Utils.MakeScopeClosure(this,"_DispatchSelectionChangedEvent");
this.SelectionChangedDispatchEvent=true;this.LastSelectedItems=0;this.SetTableStructure(tableViewModifier)};ITHit.Extend(ITHit.oNS.GridController,ITHit.oNS.Grid);ITHit.oNS.GridController.prototype._GetClassName=function(){return"ITHit.WebDAV.Client.AjaxFileBrowser.Render.DataView.GridView.GridController"};
ITHit.oNS.GridController.prototype.SetTableStructure=function(tableViewModifier){tableViewModifier=tableViewModifier||{};var tableFieldsStructure=this._TableFieldsDefautlStructure;var modifiedCode=ITHit.WebDAV.Client.AjaxFileBrowser.CodeConstructor.CloneGridColumnsModified(tableFieldsStructure,tableViewModifier,ITHit.Utils.MakeScopeClosure(this,"_UserFormatterScopeMaker"));this._CustomColumns=[];if(tableViewModifier.Columns)for(var i=0,l=tableViewModifier.Columns.length;i<l;i++)if(tableViewModifier.Columns[i].CustomProperty)this._CustomColumns.push(tableViewModifier.Columns[i]);
this.MapNames={};for(var name in this._TableDefaultMapNames)if(this._TableDefaultMapNames.hasOwnProperty(name))this.MapNames[name]=this._TableDefaultMapNames[name];for(var i=0,l=this._CustomColumns.length;i<l;i++){var oColumn=this._CustomColumns[i];this.MapNames[oColumn.Id]=String(i+7)}for(var i=0,l=modifiedCode.length;i<l;i++)if(!modifiedCode[i].field&&this.MapNames[modifiedCode[i].linkId])modifiedCode[i].field=this.MapNames[modifiedCode[i].linkId];this.Layout={cells:[modifiedCode],tableLayout:true};
if(this.Grid){this.Grid.set("structure",this.Layout);this.Grid.focus.focusView=this.Grid.views.views[0];this._Layout=this.Layout;this._MapNames=this.MapNames}};ITHit.oNS.GridController.prototype.SetRowFormatter=function(fFormatter){this._RowFormatter=fFormatter||null};ITHit.oNS.GridController.prototype.SetCellFormatter=function(fFormatter){this._CellFormatter=fFormatter||null};
ITHit.oNS.GridController.prototype.ToggleFolderColumn=function(bIsShow){var aCells=this.Grid.layout.cells;for(var i=0,l=aCells.length;i<l;i++)if(aCells[i].linkId==="Folder"){this.Grid.layout.setColumnVisibility(aCells[i].index,bIsShow);break}};
ITHit.oNS.GridController.prototype.Initiate=function(){if(this.Initiated)return;this.Grid=new ITHit.Components.dojox.grid.DataGrid({id:"grid"+(new Date).getTime()},document.createElement("div"));this.Grid.placeAt(this.Container);this.Grid.startup();ITHit.WebDAV.Client.AjaxFileBrowser.Render.DataView.GridView.GridController.baseConstructor.call(this,this.Grid,this.Layout,this.MapNames);this.base=ITHit.WebDAV.Client.AjaxFileBrowser.Render.DataView.GridView.GridController.base;ITHit.Components.dojo.connect(this._grid,
"onRowContextMenu",ITHit.Utils.MakeScopeClosure(this,"_OnRowContextMenuHandler"));ITHit.Components.dojo.connect(this._grid,"onRowClick",ITHit.Utils.MakeScopeClosure(this,"_OnRowClickHandler"));ITHit.Components.dojo.connect(this._grid,"onRowDblClick",ITHit.Utils.MakeScopeClosure(this,"_OnRowDblClickHandler"));ITHit.Components.dojo.connect(this._grid,"onSelectionChanged",ITHit.Utils.MakeScopeClosure(this,"_OnSelectionChangedHandler"));ITHit.Components.dojo.connect(this._grid,"onMouseDown",ITHit.Utils.MakeScopeClosure(this,
"_OnMouseDownHandler"));this.Initiated=true};ITHit.oNS.GridController.prototype.IsInitiated=function(){return this.Initiated};ITHit.oNS.GridController.prototype.Deactivate=function(){if(!this.IsInitiated())throw new ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions.AjaxFileBrowserException("Grid was not initiated.");this.Container.removeChild(this.Grid.domNode);this.RenderItems()};
ITHit.oNS.GridController.prototype.Activate=function(){if(!this.IsInitiated())throw new ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions.AjaxFileBrowserException("Grid was not initiated.");this.Grid.placeAt(this.Container)};
ITHit.oNS.GridController.prototype.RenderItems=function(items){var itemsData=[];if(items)for(var i=0,l=items.length;i<l;i++){var oItem=items[i];var isLocked=items[i].Item.ActiveLocks.length>0;var aItem;if(items[i].ResourceType=="Folder"){var folder=items[i];aItem=[folder.DisplayName,"",folder.ResourceType,folder.LastModified,folder.Href,"",isLocked]}else{var resource=items[i],name=resource.DisplayName,extension=name.substr(name.lastIndexOf(".")+1).toUpperCase();aItem=[name,resource.ContentLength,
"File "+extension,resource.LastModified,resource.Href,"",isLocked]}for(var i2=0,l2=this._CustomColumns.length;i2<l2;i2++){var oColumn=this._CustomColumns[i2];aItem.push(oItem.Item.GetProperty(oColumn.CustomProperty))}itemsData.push(aItem)}this.ItemsLength=itemsData.length;this.base.RenderItems.call(this,itemsData)};ITHit.oNS.GridController.prototype._UserFormatterScopeMaker=function(userFunction,defaultFunction){return ITHit.Utils.MakeScopeClosure(this,"_UserFormatterCaller",[userFunction,defaultFunction])};
ITHit.oNS.GridController.prototype._UserFormatterCaller=function(userFunction,defaultFunction,value,iRowIndex,cell){var url=this.SearchDataByIndex("Url",iRowIndex);var result=this.DispatchEvent("OnCallUserDefinedFunction",[userFunction,url,iRowIndex]);if(!ITHit.Utils.IsString(result)&&!ITHit.Utils.IsNumber(result))if(defaultFunction)result=defaultFunction(value,iRowIndex);else result="";return result};
ITHit.oNS.GridController.prototype.SetImageTypes=function(){this.ImageCheck=this.ImageTypes;var aTypes=this.ImageCheck.split("|");this.Images={};for(var i=0,l=aTypes.length;i<l;i++){if(""===aTypes[i])continue;this.Images[aTypes[i].toLowerCase()]=true}};
ITHit.oNS.GridController.prototype.FormatIconsByType=function(sValue,iIndex){if(this.ImageTypes!==this.ImageCheck)this.SetImageTypes();var thumbStr,utilsNs=ITHit.WebDAV.Client.AjaxFileBrowser.Render.Utils;var oItem=this.GetItemByRowIndex(iIndex);if(-1!=String(sValue).indexOf("Folder"))thumbStr=utilsNs.ResourceIcons.CreateImageString(this._IconSize,"folder");else{var sName=this.GetValue(oItem,"Name"),dotIndex=sName.lastIndexOf("."),sExtension=sName.substr(dotIndex+1).toLowerCase(),oNsUndefined=ITHit.Utils.IsUndefined;
if(-1!=dotIndex)if(!this.Images[sExtension]||!this.ShowImagePreview||16==this._IconSize)thumbStr=utilsNs.ResourceIcons.CreateImageString(this._IconSize,sExtension);else thumbStr='<img class="image_preview" src="'+this.GetValue(oItem,"Item").Item.Href.replace(/#/g,"%23")+(this._PreventCache?"?lm="+this.GetValue(oItem,"LastModified").getTime()+"&":"?")+"width="+this._ThumbSize+"&height="+this._ThumbSize+'" onload="this.onload=null;ITHit.WebDAV.Client.AjaxFileBrowser.Controller.ShowThumb(this,'+this._ThumbSize+
');" />';else thumbStr=utilsNs.ResourceIcons.CreateImageString(this._IconSize,false)}var isLocked=this.GetValue(oItem,"IsLocked");var lockHtml=isLocked?'<div class="grid_lock"></div>':"";return'<table class="thumb_block"><tr><td>'+lockHtml+thumbStr+"</td></tr></table>"};ITHit.oNS.GridController.prototype.IsSelected=function(url){var index=this.SearchIndexByData("Url",url);return this.base.IsSelected.call(this,index)};
ITHit.oNS.GridController.prototype.SetSelectedByUrl=function(url){var indexes=this.SearchIndexesByData("Url",url);return this.SetSelected(indexes,true)};ITHit.oNS.GridController.prototype.GetSelectedItemsList=function(){if(!this.ItemsLength)return[];var selected=[],items=this.GetSelectedItems();for(var i=0,l=items.length;i<l;i++){var value=this.GetValue(items[i],"Url");if(value!==null)selected.push(value)}return selected};
ITHit.oNS.GridController.prototype.GetUrlByElement=function(elem){if(ITHit.Utils.IsUndefined(elem.gridRowIndex))return false;return this.SearchDataByIndex("Url",elem.gridRowIndex)};ITHit.oNS.GridController.prototype.UpdateItem=function(url,newUrl,newName,lastModified){var item=this.SearchItemByData("Url",url);if(item){this.SetValue(item,"Url",newUrl);this.SetValue(item,"Name",newName);this.SetValue(item,"LastModified",lastModified);this.Update()}};
ITHit.oNS.GridController.prototype.DeleteItems=function(urls){if(!ITHit.Utils.IsArray(urls))urls=[urls];for(var i=0,l=urls.length;i<l;i++){var item=this.SearchItemByData("Url",urls[i]);if(item)this.DeleteItem(item)}};
ITHit.oNS.GridController.prototype.SelectRowsByUrl=function(urls){if(!this.ItemsLength)return false;if(!ITHit.Utils.IsArray(urls))urls=[urls];var indexes=this.SearchIndexesByData("Url",urls);this.SelectionChangedDispatchEvent=false;this.SetSelected(indexes,true);this.SelectionChangedDispatchEvent=true};ITHit.oNS.GridController.prototype._OnRowContextMenuHandler=function(event){var url=this.SearchDataByIndex("Url",event.rowIndex);this.DispatchEvent("OnRowContextMenu",[event,url])};
ITHit.oNS.GridController.prototype._OnRowClickHandler=function(event){ITHit.Events.Stop(event);var url=this.SearchDataByIndex("Url",event.rowIndex);this.DispatchEvent("OnRowClick",[event,url])};ITHit.oNS.GridController.prototype._OnRowDblClickHandler=function(event){var url=this.SearchDataByIndex("Url",event.rowIndex);this.DispatchEvent("OnRowDoubleClick",[event,url])};
ITHit.oNS.GridController.prototype._OnSelectionChangedHandler=function(){if(!this.SelectionChangedDispatchEvent)return;if(this.DispatchTimer)clearTimeout(this.DispatchTimer);this.DispatchTimer=setTimeout(this.DispatchEventClosure,30)};ITHit.oNS.GridController.prototype._DispatchSelectionChangedEvent=function(){var length=this.GetSelectedCount();if(!length&&!this.LastSelectedItems)return;this.LastSelectedItems=length;this.DispatchEvent("OnSelectionChanged")};
ITHit.oNS.GridController.prototype._OnMouseDownHandler=function(event){ITHit.Events.Fix(event);if(1!=event.which)return;if(event.rowIndex<0)return false;this.StopEvent(event);var url=this.SearchDataByIndex("Url",event.rowIndex);this.DispatchEvent("OnGridMouseDown",[event,url])};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser.Render.DataView.ThumbnailView");
ITHit.oNS.ThumbnailItem=function(name,contentLength,type,lastModified,url,creationDate,isLocked){this.Href=url;this.Name=name;this.ContentLength=contentLength;this.Type=type;this.LastModified=lastModified;this.CreationDate=creationDate;this.Locked=isLocked;this.Item;this.Selected=false;this.Rendered=false;ITHit.WebDAV.Client.AjaxFileBrowser.Render.DataView.ThumbnailView.ThumbnailItem.baseConstructor.call(this);this.base=ITHit.WebDAV.Client.AjaxFileBrowser.Render.DataView.ThumbnailView.ThumbnailItem.base};
ITHit.Extend(ITHit.oNS.ThumbnailItem,ITHit.WebDAV.Client.AjaxFileBrowser.AjaxFileBrowserBase);ITHit.oNS.ThumbnailItem.prototype._GetClassName=function(){return"ITHit.WebDAV.Client.AjaxFileBrowser.Render.DataView.ThumbnailView.ThumbnailItem"};ITHit.oNS.ThumbnailItem.prototype.GetName=function(){return this.Name};ITHit.oNS.ThumbnailItem.prototype.GetType=function(){return this.Type};ITHit.oNS.ThumbnailItem.prototype.GetHref=function(){return this.Href};
ITHit.oNS.ThumbnailItem.prototype.GetContentLength=function(){return this.ContentLength};ITHit.oNS.ThumbnailItem.prototype.GetLastModified=function(){return this.LastModified};ITHit.oNS.ThumbnailItem.prototype.GetCreationDate=function(){return this.CreationDate};
ITHit.oNS.ThumbnailItem.prototype.Render=function(icon){if(this.Item)this.Destruct();var lockedBlock="";if(this.Locked)lockedBlock={nodeName:"DIV",className:"thumbnailLockContainer",childNodes:[{nodeName:"DIV",className:"lock"}]};this.Item=ITHit.Utils.CreateDOMElement({nodeName:"DIV",className:"thumbnailItem dnd_target",childNodes:[{nodeName:"DIV",className:"iconContainer",childNodes:[{nodeName:"TABLE",childNodes:[{nodeName:"TBODY",childNodes:[{nodeName:"TR",childNodes:[{nodeName:"TD",childNodes:[icon]}]}]}]},
lockedBlock]},{nodeName:"DIV",className:"nameContainer",childNodes:[this.Name]}]});if(this.Selected)this.SetSelected();this.Rendered=true;return this.Item};ITHit.oNS.ThumbnailItem.prototype.Destruct=function(){if(!this.Item)return;this.Item.parentNode.removeChild(this.Item);this.Item=null;this.Rendered=false};ITHit.oNS.ThumbnailItem.prototype.SetSelected=function(){if(!this.Item)return false;if(this.Selected&&this.Rendered)return 0;this.Item.className+=" selected";this.Selected=true;return true};
ITHit.oNS.ThumbnailItem.prototype.Deselect=function(){if(!this.Item)return false;if(!this.Selected)return 0;this.Item.className=this.Item.className.replace(" selected","");this.Selected=false;return true};ITHit.oNS.ThumbnailItem.prototype.IsSelected=function(){return this.Selected};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser.Render.DataView.ThumbnailView");
ITHit.oNS.ThumbnailItemsList=function(){this.ItemsHash={};this.Items=[];ITHit.WebDAV.Client.AjaxFileBrowser.Render.DataView.ThumbnailView.ThumbnailItemsList.baseConstructor.call(this);this.base=ITHit.WebDAV.Client.AjaxFileBrowser.Render.DataView.ThumbnailView.ThumbnailItemsList.base};ITHit.Extend(ITHit.oNS.ThumbnailItemsList,ITHit.WebDAV.Client.AjaxFileBrowser.AjaxFileBrowserBase);ITHit.oNS.ThumbnailItemsList.prototype._GetClassName=function(){return"ITHit.WebDAV.Client.AjaxFileBrowser.Render.DataView.ThumbnailView.ThumbnailItemsList"};
ITHit.oNS.ThumbnailItemsList.prototype._ItemExists=function(url){return!ITHit.Utils.IsUndefined(this.ItemsHash[url])};ITHit.oNS.ThumbnailItemsList.prototype._ReorderHash=function(){this.ItemsHash={};for(var i=0,l=this.Items.length;i<l;i++)this.ItemsHash[this.Items[i].Href]=i};
ITHit.oNS.ThumbnailItemsList.prototype.Add=function(data){var itemClass=ITHit.WebDAV.Client.AjaxFileBrowser.Render.DataView.ThumbnailView.ThumbnailItem;this.DispatchEvent("OnBeforeItemsChanged",[this.Items]);this.ItemsHash={};this.Items=[];for(var i=0,l=data.length;i<l;i++){var item=data[i];this.ItemsHash[item.Href]=i;this.Items.push(new itemClass(item.DisplayName,item.ContentLength,item.ResourceType,item.LastModified,item.Href,item.CreationDate,item.Item.ActiveLocks.length>0))}this.DispatchEvent("OnItemsChanged",
this.Items)};ITHit.oNS.ThumbnailItemsList.prototype.Clear=function(){this.DispatchEvent("OnClear",[this.Items]);this.ItemsHash={};this.Items=[]};ITHit.oNS.ThumbnailItemsList.prototype.Delete=function(url){if(!this._ItemExists(url))return false;this.Items[this.ItemsHash[url]].Destruct();this.Items.splice(this.ItemsHash[url],1);delete this.ItemsHash[url];this._ReorderHash();return true};ITHit.oNS.ThumbnailItemsList.prototype.Deselect=function(url){if(!this._ItemExists(url))return false;return this.Items[this.ItemsHash[url]].Deselect()};
ITHit.oNS.ThumbnailItemsList.prototype.IsSelected=function(url){if(!this._ItemExists(url))return false;return this.Items[this.ItemsHash[url]].IsSelected()};ITHit.oNS.ThumbnailItemsList.prototype.GetItems=function(){return this.Items};ITHit.oNS.ThumbnailItemsList.prototype.GetIndexByUrl=function(url){return this.ItemsHash[url]};ITHit.oNS.ThumbnailItemsList.prototype.GetItemByUrl=function(url){var index=this.GetIndexByUrl(url);if(index==null)return null;return this.Items[index]};
ITHit.oNS.ThumbnailItemsList.prototype.GetItemsCount=function(){return this.Items.length};ITHit.oNS.ThumbnailItemsList.prototype.GetUrlByIndex=function(index){return this.Items[index]?this.Items[index].Href:null};
ITHit.oNS.ThumbnailItemsList.prototype.GetUrlsRange=function(firstUrl,lastUrl){var urls=[];if(this.ItemsHash[firstUrl]<=this.ItemsHash[lastUrl])for(var i=this.ItemsHash[firstUrl],l=this.ItemsHash[lastUrl];i<=l;i++)urls.push(this.Items[i].Href);else for(var i=this.ItemsHash[firstUrl],l=this.ItemsHash[lastUrl];i>=l;i--)urls.push(this.Items[i].Href);return urls};ITHit.oNS.ThumbnailItemsList.prototype.SetSelected=function(url){if(!this._ItemExists(url))return false;return this.Items[this.ItemsHash[url]].SetSelected()};
ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser.Render.DataView.ThumbnailView");ITHit.oNS.ThumbnailSelectionModes={Single:"Single",Shift:"Shift",Ctrl:"Ctrl"};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser.Render.DataView.ThumbnailView");
ITHit.oNS.ThumbnailSelection=function(){var thumbViewNs=ITHit.WebDAV.Client.AjaxFileBrowser.Render.DataView.ThumbnailView;thumbViewNs.ThumbnailSelection.baseConstructor.call(this);this.base=thumbViewNs.ThumbnailSelection.base;this.DispatchEventsFlag=true;this.FirstSelected=null;this.ItemsMaxIndex=0;this.LastSelected=null;this.SelectionMode=null;this.Selected={};this.SelectedLength=0;this.ThumbsInRow=1;this.ThumbsInColumn=1;this.SetMode(thumbViewNs.ThumbnailSelectionModes.Single);ITHit.Events.AttachEvent(document,
"onkeydown",ITHit.Utils.MakeScopeClosure(this,"_DetectMode"));ITHit.Events.AttachEvent(document,"onkeyup",ITHit.Utils.MakeScopeClosure(this,"ClearMode"))};ITHit.Extend(ITHit.oNS.ThumbnailSelection,ITHit.WebDAV.Client.AjaxFileBrowser.AjaxFileBrowserBase);ITHit.oNS.ThumbnailSelection.prototype._GetClassName=function(){return"ITHit.WebDAV.Client.AjaxFileBrowser.Render.DataView.ThumbnailView.ThumbnailSelection"};
ITHit.oNS.ThumbnailSelection.prototype.SetMode=function(mode){var modeNs=ITHit.WebDAV.Client.AjaxFileBrowser.Render.DataView.ThumbnailView.ThumbnailSelectionModes;switch(mode){case modeNs.Single:case modeNs.Shift:case modeNs.Ctrl:this.SelectionMode=mode;break;default:throw new ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions.AjaxFileBrowserException('Wrong thumblails selection mode has been passed ("'+mode+'").');}};ITHit.oNS.ThumbnailSelection.prototype.ClearMode=function(){this.SelectionMode=ITHit.WebDAV.Client.AjaxFileBrowser.Render.DataView.ThumbnailView.ThumbnailSelectionModes.Single};
ITHit.oNS.ThumbnailSelection.prototype.ClearSelection=function(){this.Selected={};if(this.SelectedLength>0){this._ClearSelection();this.DispatchEvent("OnSelectionChanged")}};ITHit.oNS.ThumbnailSelection.prototype._ClearSelection=function(){this.Selected={};this.SelectedLength=0;this.FirstSelected=null;this.LastSelected=null};
ITHit.oNS.ThumbnailSelection.prototype.SetThumbnailsInRowCount=function(thumbsInRow){if(ITHit.Utils.IsNumber(thumbsInRow)&&thumbsInRow>0)this.ThumbsInRow=thumbsInRow;else this.ThumbsInRow=1};ITHit.oNS.ThumbnailSelection.prototype.SetThumbnailsInColumnCount=function(thumbsInColumn){if(ITHit.Utils.IsNumber(thumbsInColumn)&&thumbsInColumn>0)this.ThumbsInColumn=thumbsInColumn;else this.ThumbsInColumn=1};ITHit.oNS.ThumbnailSelection.prototype.IsSelected=function(url){return this.Selected[url]};
ITHit.oNS.ThumbnailSelection.prototype.InternalSetSelected=function(url){var selectionModesNs=ITHit.WebDAV.Client.AjaxFileBrowser.Render.DataView.ThumbnailView.ThumbnailSelectionModes;switch(this.SelectionMode){case selectionModesNs.Single:this.LastSelected=null;if(this.SelectedLength)this.DeselectAll();if(!this.Selected[url]){this.FirstSelected=url;this.SetSelected(url);this.ScrollToItem(url)}break;case selectionModesNs.Shift:if(!this.FirstSelected){this.FirstSelected=url;if(!this.Selected[url]){this.SetSelected(url);
this.ScrollToItem(url)}}else if(url!=this.LastSelected){this.LastSelected=url;this.SelectionChangedDispatchEvent=false;this._SelectByRange(this.FirstSelected,url);this.ScrollToItem(url);this.SelectionChangedDispatchEvent=true;this.DispatchEvent("OnSelectionChanged")}break;case selectionModesNs.Ctrl:this.FirstSelected=url;this.LastSelected=null;this.SelectionChangedDispatchEvent=false;if(this.Selected[url])this.Deselect(url);else{this.SetSelected(url);this.ScrollToItem(url)}this.SelectionChangedDispatchEvent=
true;this.DispatchEvent("OnSelectionChanged");if(!this.SelectedLength)this.FirstSelected=null;break}};
ITHit.oNS.ThumbnailSelection.prototype._SelectByRange=function(firstUrl,lastUrl){var urls=this.DispatchEvent("GetUrlsRange",[firstUrl,lastUrl]),urlsObj={};for(var i=0,l=urls.length;i<l;i++)urlsObj[urls[i]]=true;for(var url in this.Selected){if(!this.Selected.hasOwnProperty(url))continue;if(!urlsObj[url])this.Deselect(url);else delete urlsObj[url]}for(var url in urlsObj){if(!urlsObj.hasOwnProperty(url))continue;this.SetSelected(url)}};
ITHit.oNS.ThumbnailSelection.prototype.SetSelected=function(urls){if(!ITHit.Utils.IsArray(urls))urls=[urls];var selectionChanged=false;for(var i=0,l=urls.length;i<l;i++){var url=urls[i];if(!this.Selected[url]){var result=this.DispatchEvent("SelectItemByUrl",url);if(result){this.Selected[url]=true;this.SelectedLength++;selectionChanged=true}}}if(this.DispatchEventsFlag&&selectionChanged)this.DispatchEvent("OnSelectionChanged")};
ITHit.oNS.ThumbnailSelection.prototype.ScrollToItem=function(sUrl){var iIndex=this.DispatchEvent("OnGetIndexByUrl",sUrl);this.DispatchEvent("ScrollToItem",iIndex)};
ITHit.oNS.ThumbnailSelection.prototype.Deselect=function(urls){if(!ITHit.Utils.IsArray(urls))urls=[urls];var selectionChanged=false;for(var i=0,l=urls.length;i<l;i++){var url=urls[i];if(this.Selected[url]){var result=this.DispatchEvent("DeselectItemByUrl",url);if(result){delete this.Selected[url];this.SelectedLength--;selectionChanged=true}}}if(this.DispatchEventsFlag&&selectionChanged)this.DispatchEvent("OnSelectionChanged")};
ITHit.oNS.ThumbnailSelection.prototype.SelectAll=function(){if(this.ItemsMaxIndex&&this.SelectedLength-1!=this.ItemsMaxIndex){this.FirstSelected=this.DispatchEvent("OnGetUrlByIndex",0);this.LastSelected=this.DispatchEvent("OnGetUrlByIndex",this.ItemsMaxIndex);this.SelectionChangedDispatchEvent=false;this._SelectByRange(this.FirstSelected,this.LastSelected);this.SelectionChangedDispatchEvent=true;this.DispatchEvent("OnSelectionChanged")}};
ITHit.oNS.ThumbnailSelection.prototype.DeselectAll=function(){this.FirstSelected=null;this.LastSelected=null;if(!this.SelectedLength)return;for(var url in this.Selected){if(!this.Selected.hasOwnProperty(url))continue;var result=this.DispatchEvent("DeselectItemByUrl",url);if(result){delete this.Selected[url];this.SelectedLength--}}this.Selected={};this.SelectedLength=0;if(this.DispatchEventsFlag)this.DispatchEvent("OnSelectionChanged")};ITHit.oNS.ThumbnailSelection.prototype.GetSelectedCount=function(){return this.SelectedLength};
ITHit.oNS.ThumbnailSelection.prototype.GetSelectedUrlsList=function(){var urls=[];for(var url in this.Selected){if(!this.Selected.hasOwnProperty(url))continue;urls.push(url)}return urls};
ITHit.oNS.ThumbnailSelection.prototype.KeyDown=function(aItems,oEvent){this._DetectMode(oEvent);if(!this.SelectedLength){var url=this.DispatchEvent("OnGetUrlByIndex",0);this.InternalSetSelected(url)}else{var currentIndex=this.DispatchEvent("OnGetIndexByUrl",this.LastSelected||this.FirstSelected),index=currentIndex+this.ThumbsInRow;if(index>this.ItemsMaxIndex)return false;url=this.DispatchEvent("OnGetUrlByIndex",index);this.InternalSetSelected(url)}};
ITHit.oNS.ThumbnailSelection.prototype.KeyUp=function(aItems,oEvent){this._DetectMode(oEvent);if(!this.SelectedLength){var url=this.DispatchEvent("OnGetUrlByIndex",0);this.InternalSetSelected(url)}else{var currentIndex=this.DispatchEvent("OnGetIndexByUrl",this.LastSelected||this.FirstSelected),index=currentIndex-this.ThumbsInRow;if(index<0)return false;var url=this.DispatchEvent("OnGetUrlByIndex",index);this.InternalSetSelected(url)}};
ITHit.oNS.ThumbnailSelection.prototype.KeyLeft=function(aItems,oEvent){this._DetectMode(oEvent);if(!this.SelectedLength){var url=this.DispatchEvent("OnGetUrlByIndex",0);this.InternalSetSelected(url)}else{var currentIndex=this.DispatchEvent("OnGetIndexByUrl",this.LastSelected||this.FirstSelected),index=currentIndex-1;if(index<0)index=0;var url=this.DispatchEvent("OnGetUrlByIndex",index);this.InternalSetSelected(url)}};
ITHit.oNS.ThumbnailSelection.prototype.KeyRight=function(aItems,oEvent){this._DetectMode(oEvent);if(!this.SelectedLength){var url=this.DispatchEvent("OnGetUrlByIndex",0);this.InternalSetSelected(url)}else{var currentIndex=this.DispatchEvent("OnGetIndexByUrl",this.LastSelected||this.FirstSelected),index=currentIndex+1;if(index>this.ItemsMaxIndex)index=this.ItemsMaxIndex;url=this.DispatchEvent("OnGetUrlByIndex",index);this.InternalSetSelected(url)}};
ITHit.oNS.ThumbnailSelection.prototype.KeyHome=function(aItems,oEvent){this._DetectMode(oEvent);this.InternalSetSelected(this.DispatchEvent("OnGetUrlByIndex",0))};ITHit.oNS.ThumbnailSelection.prototype.KeyEnd=function(aItems,oEvent){this._DetectMode(oEvent);this.InternalSetSelected(this.DispatchEvent("OnGetUrlByIndex",this.ItemsMaxIndex))};
ITHit.oNS.ThumbnailSelection.prototype.KeyPageUp=function(aItems,oEvent){if(!this.SelectedLength)return;this._DetectMode(oEvent);var iFirstVisibleIndex=this.DispatchEvent("OnGetFirstVisibleIndex");var sSelectedUrl=this.LastSelected||this.FirstSelected;var iIndex=this.DispatchEvent("OnGetIndexByUrl",sSelectedUrl);var iLeftIndex=iIndex-Math.floor(iIndex/this.ThumbsInRow)*this.ThumbsInRow;var url=this.DispatchEvent("OnGetUrlByIndex",iFirstVisibleIndex+iLeftIndex);if(url===sSelectedUrl){var iFirstVisibleIndex2=
Math.max(0,iFirstVisibleIndex-this.ThumbsInRow*this.ThumbsInColumn);var searchIndex=iFirstVisibleIndex!==iFirstVisibleIndex2?iFirstVisibleIndex2+iLeftIndex:0;url=this.DispatchEvent("OnGetUrlByIndex",searchIndex)}this.InternalSetSelected(url)};
ITHit.oNS.ThumbnailSelection.prototype.KeyPageDown=function(aItems,oEvent){if(!this.SelectedLength)return;this._DetectMode(oEvent);var iLastVisibleIndex=this.DispatchEvent("OnGetLastVisibleIndex");var sSelectedUrl=this.LastSelected||this.FirstSelected;var iIndex=this.DispatchEvent("OnGetIndexByUrl",sSelectedUrl);var iLeftIndex=iIndex-Math.floor(iIndex/this.ThumbsInRow)*this.ThumbsInRow;var url=this.DispatchEvent("OnGetUrlByIndex",Math.min(this.ItemsMaxIndex,iLastVisibleIndex+iLeftIndex));if(url===
sSelectedUrl){iLastVisibleIndex+=this.ThumbsInRow*this.ThumbsInColumn;url=this.DispatchEvent("OnGetUrlByIndex",Math.min(this.ItemsMaxIndex,iLastVisibleIndex+iLeftIndex))}this.InternalSetSelected(url)};
ITHit.oNS.ThumbnailSelection.prototype._DetectMode=function(oEvent){if(oEvent.ctrlKey||oEvent.metaKey)this.SetMode(ITHit.WebDAV.Client.AjaxFileBrowser.Render.DataView.ThumbnailView.ThumbnailSelectionModes.Ctrl);else if(oEvent.shiftKey)this.SetMode(ITHit.WebDAV.Client.AjaxFileBrowser.Render.DataView.ThumbnailView.ThumbnailSelectionModes.Shift);else this.SetMode(ITHit.WebDAV.Client.AjaxFileBrowser.Render.DataView.ThumbnailView.ThumbnailSelectionModes.Single)};
ITHit.oNS.ThumbnailSelection.prototype.SetItemsQuantity=function(quantity){if(ITHit.Utils.IsNumber(quantity)&&quantity>0)this.ItemsMaxIndex=quantity-1;else this.ItemsMaxIndex=0};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser.Render.DataView.ThumbnailView");
ITHit.oNS.ThumbnailView=function(container,sizeMode,imageTypes,preventImageCaching,showPreview){ITHit.WebDAV.Client.AjaxFileBrowser.Render.DataView.ThumbnailView.ThumbnailView.baseConstructor.call(this);this.Container=container;this.IconSize;this.Images={};this.ImageTypes;this.ItemsCount;this.PreventCaching=preventImageCaching;this.ShowImagePreview=showPreview;this.SizeMode;this.ThumbSize;this.ThumbsInRow;this.ThumbsInColumn;this.ViewArea=ITHit.Utils.CreateDOMElement({nodeName:"DIV",width:"100%",
height:"100%",margin:"0px",padding:"0px",className:"ithitThumbnailViewContainer"});this.SetThumbnailsSize(sizeMode||ITHit.WebDAV.Client.AjaxFileBrowser.Render.ViewModes.Medium);this.ViewArea.onmousedown=ITHit.Utils.MakeScopeClosure(this,"_OnMouseDownHandler");this.ViewArea.onclick=ITHit.Utils.MakeScopeClosure(this,"_OnClickHandler");this.ViewArea.ondblclick=ITHit.Utils.MakeScopeClosure(this,"_OnDoubleClickHandler");this.ViewArea.oncontextmenu=ITHit.Utils.MakeScopeClosure(this,"_OnContextMenuHandler");
this.ViewArea.onmouseover=ITHit.Utils.MakeScopeClosure(this,"_OnMouseOverHandler");this.ViewArea.onmouseout=ITHit.Utils.MakeScopeClosure(this,"_OnMouseOutHandler");this.ViewArea.onselectstart=function(){return false};ITHit.Events.AttachEvent(document,"onkeydown",ITHit.Utils.MakeScopeClosure(this,"_OnKeyDownHandler"));ITHit.Events.AttachEvent(document,"onkeyup",ITHit.Utils.MakeScopeClosure(this,"_OnKeyUpHandler"));this.Container.appendChild(this.ViewArea);this.SetImageTypes(imageTypes);this.IsActive=
true};ITHit.Extend(ITHit.oNS.ThumbnailView,ITHit.WebDAV.Client.AjaxFileBrowser.AjaxFileBrowserBase);ITHit.oNS.ThumbnailView.prototype._GetClassName=function(){return"ITHit.WebDAV.Client.AjaxFileBrowser.Render.ThumbnailView.ThumbnailView"};ITHit.oNS.ThumbnailView.prototype.GetViewAreaNode=function(){return this.ViewArea};
ITHit.oNS.ThumbnailView.prototype.GetIndexesByBoxArea=function(beginX,beginY,endX,endY){var boxWidth=this.ThumbSize.Width,boxHeight=this.ThumbSize.Height;if(!boxWidth||!boxHeight)return false;var countInRow=this.ThumbsInRow;var beginRow=Math.ceil(beginY/boxHeight)-(boxHeight-beginY%boxHeight>this.ThumbSize.MarginBottom?1:0),endRow=Math.ceil(endY/boxHeight)-(boxHeight-endY%boxHeight>this.ThumbSize.MarginTop?1:0),beginI=Math.ceil(beginX/boxWidth)-(boxWidth-beginX%boxWidth>this.ThumbSize.MarginRight?
1:0),endI=Math.ceil(endX/boxWidth)-(boxWidth-endX%boxWidth>this.ThumbSize.MarginLeft?1:0),beginI=beginI>=0?beginI:0,endI=endI<countInRow?endI:countInRow-1,indexes=[];indexIterator:for(var i=beginRow;i<=endRow;i++){var rowIndex=i*countInRow;for(var j=beginI;j<=endI;j++){if(rowIndex+j>=this.ItemsCount)break indexIterator;indexes.push(rowIndex+j)}}return indexes};ITHit.oNS.ThumbnailView.prototype.Deactivate=function(){if(!this.IsActive)return;this.Container.removeChild(this.ViewArea);this.IsActive=false};
ITHit.oNS.ThumbnailView.prototype.Activate=function(sizeMode){if(this.IsActive)return;if(sizeMode)this.SetThumbnailsSize(sizeMode);this.Container.appendChild(this.ViewArea);this.IsActive=true};ITHit.oNS.ThumbnailView.prototype.SetImageTypes=function(imageTypes){var aTypes=imageTypes.split("|");this.Images={};for(var i=0,l=aTypes.length;i<l;i++){if(""===aTypes[i])continue;this.Images[aTypes[i].toLowerCase()]=true}};
ITHit.oNS.ThumbnailView.prototype.SetShowImagePreview=function(show){this.ShowImagePreview=show;var items=this.DispatchEvent("OnGetItems");if(items)this.RenderItems(items)};
ITHit.oNS.ThumbnailView.prototype.RenderItems=function(items){this.ItemsCount=items.length;if(items.length){for(var i=0,l=items.length;i<l;i++){var icon=this._GetItemIcon(items[i],i),thumbnail=items[i].Render(icon);thumbnail.idx=i;this.ViewArea.appendChild(thumbnail)}if(!this.ThumbSize){var thumbStyle=ITHit.Utils.GetComputedStyle(thumbnail),marginTop=parseInt(thumbStyle.marginTop),marginRight=parseInt(thumbStyle.marginRight),marginBottom=parseInt(thumbStyle.marginBottom),marginLeft=parseInt(thumbStyle.marginLeft);
this.ThumbSize={MarginTop:marginTop,MarginRight:marginRight,MarginBottom:marginBottom,MarginLeft:marginLeft,Width:thumbnail.offsetWidth+marginLeft+marginRight,Height:thumbnail.offsetHeight+marginTop+marginBottom}}if(!this.ThumbsInRow)this.CalculateThumbsInRowCount()}};
ITHit.oNS.ThumbnailView.prototype._GetItemIcon=function(item,iIndex){var utilsNs=ITHit.Utils,extension="folder",icon=this.DispatchEvent("OnGetIcon",item.GetHref(),iIndex),name=item.GetName();if(utilsNs.IsString(icon)||utilsNs.IsNumber(icon)){var span=utilsNs.CreateDOMElement({nodeName:"SPAN"});span.innerHTML=ITHit.Utils.HtmlEscape(icon);return span.firstChild}if("Folder"!=item.GetType()){var dotIndex=name.lastIndexOf(".");if(dotIndex!=-1)extension=name.substr(dotIndex+1,name.length);else extension=
name.Name||"";if(this.ShowImagePreview&&this.Images[extension.toLowerCase()]){var url=this.DispatchEvent("OnGetAbsolutePath",item.GetHref());icon=utilsNs.CreateDOMElement({nodeName:"IMG",className:"image_preview",onload:new Function("this.onload=this.onerror=null; ITHit.WebDAV.Client.AjaxFileBrowser.Controller.ShowThumb(this, "+this.ImageSize+");"),onerror:new Function("this.onload=this.onerror=null;"),src:url.replace(/#/g,"%23")+(this.PreventCaching?"?lm="+item.GetLastModified().getTime()+"&":"?")+
"width="+this.ImageSize+"&height="+this.ImageSize})}}if(!icon)icon=ITHit.WebDAV.Client.AjaxFileBrowser.Render.Utils.ResourceIcons.CreateImage(this.IconSize,extension);return icon};
ITHit.oNS.ThumbnailView.prototype.SetThumbnailsSize=function(mode){if(mode==this.SizeMode)return;var cls;switch(mode){case ITHit.WebDAV.Client.AjaxFileBrowser.Render.ViewModes.Medium:cls="medium";this.IconSize=32;this.ImageSize=42;break;case ITHit.WebDAV.Client.AjaxFileBrowser.Render.ViewModes.Large:cls="large";this.IconSize=72;this.ImageSize=85;break;case ITHit.WebDAV.Client.AjaxFileBrowser.Render.ViewModes.ExtraLarge:cls="elarge";this.IconSize=256;this.ImageSize=232;break;default:throw new ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions.AjaxFileBrowserException('Unexpected view mode has been passed "'+
mode+'".');}this.ViewArea.className=this.ViewArea.className.replace(/( medium| large| elarge)/,"")+" "+cls;this.SizeMode=mode;this.ThumbSize=null;this.ThumbsInRow=null;var items=this.DispatchEvent("OnGetItems");if(items)this.RenderItems(items)};ITHit.oNS.ThumbnailView.prototype.DestructItems=function(items){for(var i=0,l=items.length;i<l;i++)items[i].Destruct()};
ITHit.oNS.ThumbnailView.prototype.CalculateThumbsInRowCount=function(){this.ThumbsInRow=null;this.ThumbsInColumn=null;if(this.ThumbSize){this.ThumbsInRow=Math.floor(this.ViewArea.clientWidth/this.ThumbSize.Width);this.ThumbsInColumn=Math.floor(this.ViewArea.clientHeight/this.ThumbSize.Height);this.DispatchEvent("OnThumbnailsInRowChanged",this.ThumbsInRow);this.DispatchEvent("OnThumbnailsInColumnChanged",this.ThumbsInColumn)}};
ITHit.oNS.ThumbnailView.prototype.ScrollToItem=function(iIndex){var oListNode=this.Container.lastChild;var oItemNode=oListNode.childNodes[iIndex];var oContainerPosition=ITHit.Components.dojo.position(this.Container);var oItemPosition=ITHit.Components.dojo.position(oItemNode);var deltaBottom=oContainerPosition.y+oContainerPosition.h-(oItemPosition.y+oItemPosition.h);var deltaTop=oItemPosition.y-oContainerPosition.y;if(deltaBottom<0)oListNode.scrollTop+=-1*deltaBottom;else if(deltaTop<0)oListNode.scrollTop+=
deltaTop};ITHit.oNS.ThumbnailView.prototype.GetFirstVisibleIndex=function(){return this._FindIndexByFilterPosition(function(oItemPosition,oContainerPosition){return oItemPosition.y-oContainerPosition.y>=0})};
ITHit.oNS.ThumbnailView.prototype.GetLastVisibleIndex=function(){var iIndex=-1;this._FindIndexByFilterPosition(function(oItemPosition,oContainerPosition){if(oContainerPosition.y+oContainerPosition.h-(oItemPosition.y+oItemPosition.h)<0)return true;iIndex++});return this.ThumbsInRow*Math.max(0,iIndex)};
ITHit.oNS.ThumbnailView.prototype._FindIndexByFilterPosition=function(fFilter){var oListNode=this.Container.lastChild;var oContainerPosition=ITHit.Components.dojo.position(this.Container);var i=0;while(true){var iIndex=this.ThumbsInRow*i++;var oItemNode=oListNode.childNodes[iIndex];if(!oItemNode)break;var oItemPosition=ITHit.Components.dojo.position(oItemNode);if(fFilter.call(this,oItemPosition,oContainerPosition)===true)return iIndex}return-1};
ITHit.oNS.ThumbnailView.prototype._FindTargetNode=function(targetNode){var undefinedFunc=ITHit.Utils.IsUndefined;while(targetNode&&targetNode!=this.Container){if(!undefinedFunc(targetNode.idx))return targetNode;targetNode=targetNode.parentNode}return null};ITHit.oNS.ThumbnailView.prototype._OnMouseDownHandler=function(event){event=ITHit.Events.Fix(event);if(1!=event.which)return;var url=this._GetTargetNodeUrl(event,true);if(!url)return;this.DispatchEvent("OnMouseDown",[event,url])};
ITHit.oNS.ThumbnailView.prototype._OnClickHandler=function(event){event=ITHit.Events.Fix(event);var url=this._GetTargetNodeUrl(event);if(!url)return;this.DispatchEvent("OnItemClick",[event,url]);return false};ITHit.oNS.ThumbnailView.prototype._OnDoubleClickHandler=function(event){event=ITHit.Events.Fix(event);var url=this._GetTargetNodeUrl(event);if(!url)return;this.DispatchEvent("OnDoubleClick",[event,url])};
ITHit.oNS.ThumbnailView.prototype._OnContextMenuHandler=function(event){event=ITHit.Events.Fix(event);var url=this._GetTargetNodeUrl(event);if(!url)return;this.DispatchEvent("OnContextMenu",[event,url])};ITHit.oNS.ThumbnailView.prototype._OnMouseOverHandler=function(event){event=ITHit.Events.Fix(event);var url=this._GetTargetNodeUrl(event);if(!url)return;this.DispatchEvent("OnMouseOver",[event,url])};
ITHit.oNS.ThumbnailView.prototype._OnMouseOutHandler=function(event){event=ITHit.Events.Fix(event);var url=this._GetTargetNodeUrl(event);if(!url)return;this.DispatchEvent("OnMouseOut",[event,url])};ITHit.oNS.ThumbnailView.prototype._GetTargetNodeUrl=function(event){var targetElement=this._FindTargetNode(event.target);if(null===targetElement)return;ITHit.Events.Stop(event);return this.DispatchEvent("OnGetUrlByIndex",[targetElement.idx])};
ITHit.oNS.ThumbnailView.prototype.GetUrlByElement=function(elem){var targetElement=this._FindTargetNode(elem);if(null===targetElement)return;return this.DispatchEvent("OnGetUrlByIndex",[targetElement.idx])};ITHit.oNS.ThumbnailView.prototype._OnKeyDownHandler=function(event){event=event||window.event;return this.DispatchEvent("OnKeyDown",event)};ITHit.oNS.ThumbnailView.prototype._OnKeyUpHandler=function(event){event=event||window.event;return this.DispatchEvent("OnKeyUp",event)};
ITHit.oNS.ThumbnailView.prototype.SetScrollTop=function(top){this.ViewArea.scrollTop=top};ITHit.oNS.ThumbnailView.prototype.SetScrollLeft=function(left){this.ViewArea.scrollLeft=left};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser.Render.DataView.ThumbnailView");
ITHit.oNS.ThumbnailController=function(gridPlaceholder,modifier,imageTypes,preventImageCaching,showPreview,contextHelp){this.ContextHelp=contextHelp;this.Container=gridPlaceholder;this.InitParams={ImageTypes:imageTypes,PreventImageCaching:preventImageCaching,ShowImagePreview:showPreview};this.IconsHandler=modifier.IconsHandler;this.utilsNs=ITHit.WebDAV.Client.AjaxFileBrowser.Render.Utils;this.oNsPhrases=ITHit.Phrases.AjaxFileBrowser.Interface;ITHit.WebDAV.Client.AjaxFileBrowser.Render.DataView.ThumbnailView.ThumbnailController.baseConstructor.call(this);
this.base=ITHit.WebDAV.Client.AjaxFileBrowser.Render.DataView.ThumbnailView.ThumbnailController.base;this.View;this.Selection;this.Items=new ITHit.WebDAV.Client.AjaxFileBrowser.Render.DataView.ThumbnailView.ThumbnailItemsList;this.CurrentViewMode;this.Initiated=false};ITHit.Extend(ITHit.oNS.ThumbnailController,ITHit.WebDAV.Client.AjaxFileBrowser.AjaxFileBrowserBase);ITHit.oNS.ThumbnailController.prototype._GetClassName=function(){return"ITHit.WebDAV.Client.AjaxFileBrowser.Render.DataView.ThumbnailView.ThumbnailController"};
ITHit.oNS.ThumbnailController.prototype.Initiate=function(viewMode){if(this.Initiated)return;this.DispatchTimer;this.DispatchEventClosure=ITHit.Utils.MakeScopeClosure(this,"_DispatchSelectionChangedEvent");this.SelectionChangedDispatchEvent=true;this.Selection=new ITHit.WebDAV.Client.AjaxFileBrowser.Render.DataView.ThumbnailView.ThumbnailSelection;this.Selection.AddListener("DeselectItemByUrl","Deselect",this.Items);this.Selection.AddListener("GetUrlsRange","GetUrlsRange",this.Items);this.Selection.AddListener("OnGetIndexByUrl",
"GetIndexByUrl",this.Items);this.Selection.AddListener("OnGetUrlByIndex","GetUrlByIndex",this.Items);this.Selection.AddListener("OnSelectionChanged","_OnSelectionChangedHandler",this);this.Selection.AddListener("SelectItemByUrl","SetSelected",this.Items);this.View=new ITHit.WebDAV.Client.AjaxFileBrowser.Render.DataView.ThumbnailView.ThumbnailView(this.Container,viewMode,this.InitParams.ImageTypes,this.InitParams.PreventImageCaching,this.InitParams.ShowImagePreview);this.View.AddListener("OnContextMenu",
"_OnContextMenuHandler",this);this.View.AddListener("OnMouseOver","_OnMouseOverHandler",this);this.View.AddListener("OnMouseOut","_OnMouseOutHandler",this);this.Selection.AddListener("ScrollToItem","ScrollToItem",this.View);this.Selection.AddListener("OnGetFirstVisibleIndex","GetFirstVisibleIndex",this.View);this.Selection.AddListener("OnGetLastVisibleIndex","GetLastVisibleIndex",this.View);this.View.AddListener("OnDoubleClick","_OnDoubleClickHandler",this);this.View.AddListener("OnGetItems","GetItems",
this.Items);this.View.AddListener("OnGetAbsolutePath","_OnGetAbsolutePathHandler",this);this.View.AddListener("OnGetIcon","_OnGetIconHandler",this);this.View.AddListener("OnGetUrlByIndex","GetUrlByIndex",this.Items);this.View.AddListener("OnItemClick","_OnItemClickHandler",this);this.View.AddListener("OnMouseDown","_OnMouseDownHandler",this);this.View.AddListener("OnThumbnailsInRowChanged","SetThumbnailsInRowCount",this.Selection);this.View.AddListener("OnThumbnailsInColumnChanged","SetThumbnailsInColumnCount",
this.Selection);this.Items.AddListener("OnBeforeItemsChanged","ClearSelection",this.Selection);this.Items.AddListener("OnBeforeItemsChanged","DestructItems",this.View);this.Items.AddListener("OnClear","_ClearSelection",this.Selection);this.Items.AddListener("OnClear","DestructItems",this.View);this.Initiated=true;delete this.InitParams};ITHit.oNS.ThumbnailController.prototype.IsInitiated=function(){return this.Initiated};
ITHit.oNS.ThumbnailController.prototype.Deactivate=function(){if(!this.IsInitiated())throw new ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions.AjaxFileBrowserException("Grid was not initiated.");this.View.Deactivate();this.Items.Clear()};ITHit.oNS.ThumbnailController.prototype.Activate=function(viewMode){if(!this.IsInitiated())throw new ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions.AjaxFileBrowserException("Grid was not initiated.");this.View.Activate(viewMode)};
ITHit.oNS.ThumbnailController.prototype.SetThumbnailsSize=function(sizeMode){this.View.SetThumbnailsSize(sizeMode)};ITHit.oNS.ThumbnailController.prototype.SetImageTypes=function(imageTypes){this.View.SetImageTypes(imageTypes)};ITHit.oNS.ThumbnailController.prototype.SetShowImagePreview=function(show){this.View.SetShowImagePreview(show)};
ITHit.oNS.ThumbnailController.prototype.RenderItems=function(items){this.Items.Add(items);this.View.RenderItems(this.Items.GetItems());this.Selection.SetItemsQuantity(items.length);this.Selection.ClearSelection()};ITHit.oNS.ThumbnailController.prototype.IsSelected=function(url){return this.Selection.IsSelected(url)};ITHit.oNS.ThumbnailController.prototype.GetScrollerNode=function(){return this.View.GetViewAreaNode()};ITHit.oNS.ThumbnailController.prototype.SetSelectedByUrl=function(urls){return this.Selection.SetSelected(urls)};
ITHit.oNS.ThumbnailController.prototype.GetSelectedItemsList=function(){return this.Selection.GetSelectedUrlsList()};ITHit.oNS.ThumbnailController.prototype.GetSelectedCount=function(){return this.Selection.GetSelectedCount()};ITHit.oNS.ThumbnailController.prototype.GetUrlByElement=function(elem){return this.View.GetUrlByElement(elem)};ITHit.oNS.ThumbnailController.prototype.UpdateItem=function(url,newUrl,newName,lastModified){throw'Method "ThumbnailController:UpdateItem" not implemented yet.';};
ITHit.oNS.ThumbnailController.prototype.DeleteItems=function(urls){if(!ITHit.Utils.IsArray(urls))urls=[urls];for(var i=0,l=urls.length;i<l;i++){var url=urls[i];this.Selection.Deselect(url);this.Items.Delete(url)}var items=this.Items.GetItems();this.View.RenderItems(items);this.Selection.SetItemsQuantity(items.length)};ITHit.oNS.ThumbnailController.prototype.SelectRowsByUrl=function(urls){this.Selection.SetSelected(urls)};ITHit.oNS.ThumbnailController.prototype.SelectAll=function(){this.Selection.SelectAll()};
ITHit.oNS.ThumbnailController.prototype.DeselectAll=function(){this.Selection.DeselectAll()};ITHit.oNS.ThumbnailController.prototype.KeyDown=function(aItems,oEvent){this.Selection.KeyDown(aItems,oEvent)};ITHit.oNS.ThumbnailController.prototype.KeyUp=function(aItems,oEvent){this.Selection.KeyUp(aItems,oEvent)};ITHit.oNS.ThumbnailController.prototype.KeyLeft=function(aItems,oEvent){this.Selection.KeyLeft(aItems,oEvent)};
ITHit.oNS.ThumbnailController.prototype.KeyRight=function(aItems,oEvent){this.Selection.KeyRight(aItems,oEvent)};ITHit.oNS.ThumbnailController.prototype.KeyHome=function(aItems,oEvent){this.Selection.KeyHome(aItems,oEvent)};ITHit.oNS.ThumbnailController.prototype.KeyEnd=function(aItems,oEvent){this.Selection.KeyEnd(aItems,oEvent)};ITHit.oNS.ThumbnailController.prototype.KeyPageUp=function(aItems,oEvent){this.Selection.KeyPageUp(aItems,oEvent)};
ITHit.oNS.ThumbnailController.prototype.KeyPageDown=function(aItems,oEvent){this.Selection.KeyPageDown(aItems,oEvent)};ITHit.oNS.ThumbnailController.prototype.OnResizeViewArea=function(){this.View.CalculateThumbsInRowCount()};
ITHit.oNS.ThumbnailController.prototype.SetSelectedByBoxArea=function(beginX,beginY,endX,endY){var indexes=this.View.GetIndexesByBoxArea(beginX,beginY,endX,endY),urls=[];for(var i=0,l=indexes.length;i<l;i++){var url=this.Items.GetUrlByIndex(indexes[i]);urls.push(url)}this.DeselectAll();this.SelectRowsByUrl(urls)};ITHit.oNS.ThumbnailController.prototype.SetScrollTop=function(top){this.View.SetScrollTop(top)};ITHit.oNS.ThumbnailController.prototype.SetScrollLeft=function(left){this.View.SetScrollLeft(left)};
ITHit.oNS.ThumbnailController.prototype._OnContextMenuHandler=function(event,url){this.DispatchEvent("OnRowContextMenu",[event,url])};
ITHit.oNS.ThumbnailController.prototype._OnMouseOverHandler=function(event,url){if(this.ContextHelp==null)return;var item=this.Items.GetItemByUrl(url);var iconObj=ITHit.WebDAV.Client.AjaxFileBrowser.Render.Utils.ResourceIcons.CreateImage2(72,url,item.GetType()=="Folder");var contentLength=item.GetType()!="Folder"?this.utilsNs.FormatSize(item.GetContentLength()):null;this.ContextHelp.ShowItemInfo(iconObj,item.GetName(),this.utilsNs.FormatDate(item.GetCreationDate()),this.utilsNs.FormatDate(item.GetLastModified()),
contentLength)};ITHit.oNS.ThumbnailController.prototype._OnMouseOutHandler=function(event,url){if(this.ContextHelp==null)return;this.ContextHelp.Hide()};ITHit.oNS.ThumbnailController.prototype._OnItemClickHandler=function(event,url){this.Selection.InternalSetSelected(url)};ITHit.oNS.ThumbnailController.prototype._OnGetAbsolutePathHandler=function(url){return this.DispatchEvent("OnGetAbsolutePath",url)};
ITHit.oNS.ThumbnailController.prototype._OnGetIconHandler=function(url,iIndex){if(!this.IconsHandler)return;return this.DispatchEvent("OnCallUserDefinedFunction",[this.IconsHandler,url,iIndex])};ITHit.oNS.ThumbnailController.prototype._OnRowClickHandler=function(event){ITHit.Events.Stop(event);var url=this.SearchDataByIndex("Url",event.rowIndex);this.DispatchEvent("OnRowClick",[event,url])};
ITHit.oNS.ThumbnailController.prototype._OnDoubleClickHandler=function(event,url){this.DispatchEvent("OnRowDoubleClick",[event,url])};ITHit.oNS.ThumbnailController.prototype._OnSelectionChangedHandler=function(){if(!this.SelectionChangedDispatchEvent)return;if(this.DispatchTimer)clearTimeout(this.DispatchTimer);this.DispatchTimer=setTimeout(this.DispatchEventClosure,30)};ITHit.oNS.ThumbnailController.prototype._DispatchSelectionChangedEvent=function(){this.DispatchEvent("OnSelectionChanged")};
ITHit.oNS.ThumbnailController.prototype._OnMouseDownHandler=function(event,url){this.DispatchEvent("OnGridMouseDown",[event,url])};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser.Render.DataView");
ITHit.oNS.DataViewAdapter=function(gridPlaceholderId,gridViewModification,imageTypes,preventImageCaching,showPreview,contextHelp){ITHit.WebDAV.Client.AjaxFileBrowser.Render.DataView.DataViewAdapter.baseConstructor.call(this);var thumbModifier={};if(ITHit.Utils.IsObjectStrict(gridViewModification)&&ITHit.Utils.IsArray(gridViewModification.Columns)){var cols=gridViewModification.Columns;for(var i=0,l=cols.length;i<l;i++)if("Icon"==cols[i].Id&&cols[i].Formatter)thumbModifier.IconsHandler=cols[i].Formatter}this.GridPlaceholder=
document.getElementById(gridPlaceholderId);this.Views={Grid:new ITHit.WebDAV.Client.AjaxFileBrowser.Render.DataView.GridView.GridController(this.GridPlaceholder,gridViewModification,imageTypes,preventImageCaching),Thumbnails:new ITHit.WebDAV.Client.AjaxFileBrowser.Render.DataView.ThumbnailView.ThumbnailController(this.GridPlaceholder,thumbModifier,imageTypes,preventImageCaching,showPreview,contextHelp)};this._View;this._ViewMode;this.CurrentView;this.Items;this.PreventImageCaching=preventImageCaching;
this.SetViewMode(ITHit.WebDAV.Client.AjaxFileBrowser.Render.ViewModes.Details)};ITHit.Extend(ITHit.oNS.DataViewAdapter,ITHit.WebDAV.Client.AjaxFileBrowser.AjaxFileBrowserBase);ITHit.oNS.DataViewAdapter.prototype._GetClassName=function(){return"ITHit.WebDAV.Client.AjaxFileBrowser.Render.DataView.DataViewAdapter"};
ITHit.oNS.DataViewAdapter.prototype.SetViewMode=function(mode){if(this._ViewMode==mode)return;var viewModesNs=ITHit.WebDAV.Client.AjaxFileBrowser.Render.ViewModes,view;switch(mode){case viewModesNs.Details:view="Grid";break;case viewModesNs.Medium:case viewModesNs.Large:case viewModesNs.ExtraLarge:view="Thumbnails";break;default:throw new ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions.ThumbnailItemsList(ITHit.Phrases.AjaxFileBrowser.Exceptions.WrongViewModeIndex);}if(this._View!=view){var selectedItems;
if(this.CurrentView){selectedItems=this.CurrentView.GetSelectedItemsList();this.CurrentView.RemoveListener("OnGetAbsolutePath","_OnGetAbsolutePathHandler",this);this.CurrentView.RemoveListener("OnGridMouseDown","_OnGridMouseDownHandler",this);this.CurrentView.RemoveListener("OnRowContextMenu","_OnRowContextMenuHandler",this);this.CurrentView.RemoveListener("OnRowClick","_OnRowClickHandler",this);this.CurrentView.RemoveListener("OnRowDoubleClick","_OnRowDoubleClickHandler",this);this.CurrentView.RemoveListener("OnSelectionChanged",
"_OnSelectionChangedHandler",this);this.CurrentView.RemoveListener("OnCallUserDefinedFunction","_OnCallUserDefinedFunctionHandler",this);this.CurrentView.Deactivate()}this._View=view;this._ViewMode=mode;this.CurrentView=this.Views[view];if(this.CurrentView.IsInitiated())this.CurrentView.Activate(mode);else this.CurrentView.Initiate(mode);this.CurrentView.AddListener("OnGetAbsolutePath","_OnGetAbsolutePathHandler",this);this.CurrentView.AddListener("OnGridMouseDown","_OnGridMouseDownHandler",this);
this.CurrentView.AddListener("OnRowContextMenu","_OnRowContextMenuHandler",this);this.CurrentView.AddListener("OnRowClick","_OnRowClickHandler",this);this.CurrentView.AddListener("OnRowDoubleClick","_OnRowDoubleClickHandler",this);this.CurrentView.AddListener("OnSelectionChanged","_OnSelectionChangedHandler",this);this.CurrentView.AddListener("OnCallUserDefinedFunction","_OnCallUserDefinedFunctionHandler",this);if(this.Items)this.RenderItems(this.Items);if(selectedItems&&selectedItems.length)this.CurrentView.SelectRowsByUrl(selectedItems)}else{this.CurrentView.SetThumbnailsSize(mode);
this._ViewMode=mode}};ITHit.oNS.DataViewAdapter.prototype.GetViewMode=function(){return this._ViewMode};ITHit.oNS.DataViewAdapter.prototype.SetImageTypes=function(event,imageTypes){for(var view in this.Views){if(!this.Views.hasOwnProperty(view))continue;if(this.Views[view].SetImageTypes)this.Views[view].SetImageTypes(imageTypes)}};ITHit.oNS.DataViewAdapter.prototype.SetShowImagePreview=function(event,show){for(var view in this.Views){if(!this.Views.hasOwnProperty(view))continue;if(this.Views[view].SetShowImagePreview)this.Views[view].SetShowImagePreview(show)}};
ITHit.oNS.DataViewAdapter.prototype.GetScrollerNode=function(){return this.CurrentView.GetScrollerNode()};ITHit.oNS.DataViewAdapter.prototype.RenderItems=function(items){this.Items=items;if(this.Items.ShowFolders)return this.CurrentView.RenderItems(this.Items.Folders.concat(this.Items.Resources));else return this.CurrentView.RenderItems(this.Items.Resources)};ITHit.oNS.DataViewAdapter.prototype.IsSelected=function(url){return this.CurrentView.IsSelected(url)};
ITHit.oNS.DataViewAdapter.prototype.UpdateItem=function(url,newUrl,newName,lastModified){this.CurrentView.UpdateItem(url,newUrl,newName,lastModified)};ITHit.oNS.DataViewAdapter.prototype.SetSelectedByUrl=function(urls){this.CurrentView.SetSelectedByUrl(urls)};ITHit.oNS.DataViewAdapter.prototype.GetSelectedItemsList=function(){return this.CurrentView.GetSelectedItemsList()};
ITHit.oNS.DataViewAdapter.prototype.DeleteItems=function(urls){var folders=this.Items.Folders,resources=this.Items.Resources;external:for(var i=0,l=urls.length;i<l;i++){var url=urls[i];for(var j=0,jl=folders.length;j<jl;j++)if(url==folders[j].Href){folders.splice(j,1);continue external}for(var j=0,jl=resources.length;j<jl;j++)if(url==resources[j].Href){resources.splice(j,1);continue external}}return this.CurrentView.DeleteItems(urls)};ITHit.oNS.DataViewAdapter.prototype.SelectAll=function(){return this.CurrentView.SelectAll()};
ITHit.oNS.DataViewAdapter.prototype.DeselectAll=function(){return this.CurrentView.DeselectAll()};ITHit.oNS.DataViewAdapter.prototype.GetSelectedCount=function(){return this.CurrentView.GetSelectedCount()};ITHit.oNS.DataViewAdapter.prototype.GetUrlByElement=function(elem){return this.CurrentView.GetUrlByElement(elem)};ITHit.oNS.DataViewAdapter.prototype.KeyUp=function(aItems,oEvent){return this.CurrentView.KeyUp(aItems,oEvent)};
ITHit.oNS.DataViewAdapter.prototype.KeyDown=function(aItems,oEvent){return this.CurrentView.KeyDown(aItems,oEvent)};ITHit.oNS.DataViewAdapter.prototype.KeyLeft=function(aItems,oEvent){if(this.CurrentView.KeyLeft)return this.CurrentView.KeyLeft(aItems,oEvent)};ITHit.oNS.DataViewAdapter.prototype.KeyRight=function(aItems,oEvent){if(this.CurrentView.KeyRight)return this.CurrentView.KeyRight(aItems,oEvent)};
ITHit.oNS.DataViewAdapter.prototype.KeyHome=function(aItems,oEvent){if(this.CurrentView.KeyHome)return this.CurrentView.KeyHome(aItems,oEvent)};ITHit.oNS.DataViewAdapter.prototype.KeyEnd=function(aItems,oEvent){if(this.CurrentView.KeyEnd)return this.CurrentView.KeyEnd(aItems,oEvent)};ITHit.oNS.DataViewAdapter.prototype.KeyPageUp=function(aItems,oEvent){if(this.CurrentView.KeyPageUp)return this.CurrentView.KeyPageUp(aItems,oEvent)};
ITHit.oNS.DataViewAdapter.prototype.KeyPageDown=function(aItems,oEvent){if(this.CurrentView.KeyPageDown)return this.CurrentView.KeyPageDown(aItems,oEvent)};ITHit.oNS.DataViewAdapter.prototype.OnResizeViewArea=function(){if(this.CurrentView.OnResizeViewArea)this.CurrentView.OnResizeViewArea()};ITHit.oNS.DataViewAdapter.prototype.SetSelectedByBoxArea=function(beginX,beginY,endX,endY){return this.CurrentView.SetSelectedByBoxArea(beginX,beginY,endX,endY)};
ITHit.oNS.DataViewAdapter.prototype.SetScrollTop=function(top){this.CurrentView.SetScrollTop(top)};ITHit.oNS.DataViewAdapter.prototype.SetScrollLeft=function(left){this.CurrentView.SetScrollLeft(left)};ITHit.oNS.DataViewAdapter.prototype._OnRowClickHandler=function(event,url){return this.DispatchEvent("OnRowClick",[event,url])};ITHit.oNS.DataViewAdapter.prototype._OnRowDoubleClickHandler=function(event,url){return this.DispatchEvent("OnRowDoubleClick",[event,url])};
ITHit.oNS.DataViewAdapter.prototype._OnSelectionChangedHandler=function(){return this.DispatchEvent("OnSelectionChanged")};ITHit.oNS.DataViewAdapter.prototype._OnRowContextMenuHandler=function(event,url){return this.DispatchEvent("OnRowContextMenu",[event,url])};ITHit.oNS.DataViewAdapter.prototype._OnGridMouseDownHandler=function(event,url){return this.DispatchEvent("OnGridMouseDown",[event,url])};
ITHit.oNS.DataViewAdapter.prototype._OnGetAbsolutePathHandler=function(url){return this.DispatchEvent("OnGetAbsolutePath",url)};
ITHit.oNS.DataViewAdapter.prototype._OnCallUserDefinedFunctionHandler=function(fHandler,sUrl,iIndex){var aItems=this.Items.Folders.concat(this.Items.Resources);for(var i=0,l=aItems.length;i<l;i++)if(aItems[i].Href===sUrl)return fHandler(aItems[i].Item,iIndex);throw new ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions.AjaxFileBrowserException("Not found item in DataViewAdapter.Items by url `"+sUrl+"`");};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser.Render");
ITHit.oNS.MenuController=function(oController,oHandlers){this._ClassId="ITHit.WebDAV.Client.AjaxFileBrowser.Render.MenuController_"+ITHit.WebDAV.Client.AjaxFileBrowser.Render.MenuController._Counter++;this._menu={};this._controller=oController;this._elementChk=window.Element?true:false;this._element=window.Element?window.Element:window.Object;this._events={onShowMenu:"OnShowMenu"};this._openOrCreateDocument=oController._SharePointOpenOrEditDocs;this._EditDocumentWithPlugin=oController.EnablePlugins;
this._Handlers=oHandlers;var oNs=ITHit.WebDAV.Client.AjaxFileBrowser,oNsController=oNs.Controller,oNsRender=oNs.Render.RenderController,oNsMenuPhrases=ITHit.Phrases.AjaxFileBrowser.Menu,oNsContextHelpPhrases=ITHit.Phrases.AjaxFileBrowser.ContextHelp.Commands;this._menu.FoldersPanelMenu={Type:"Menu",Id:"FoldersPanelMenu",TargetNodeIds:[],Children:[{Type:"MenuItem",Id:"NewFolder",Text:oNsMenuPhrases.NewFolder,ContextHelp:oNsContextHelpPhrases.NewFolder,ContextHelpIconClass:"contextIconNewFolder"},{Type:"PopupMenuItem",
Id:"NewDocument",Text:oNsMenuPhrases.NewDocument,Children:[{Id:"NewWord",Type:"MenuItem",Text:oNsMenuPhrases.NewWord,ContextHelp:oNsContextHelpPhrases.NewWord,ContextHelpIconClass:"contextIconNewWord"},{Id:"NewExcel",Type:"MenuItem",Text:oNsMenuPhrases.NewExcel,ContextHelp:oNsContextHelpPhrases.NewExcel,ContextHelpIconClass:"contextIconNewExcel"},{Id:"NewPowerpoint",Type:"MenuItem",Text:oNsMenuPhrases.NewPowerPoint,ContextHelp:oNsContextHelpPhrases.NewPowerPoint,ContextHelpIconClass:"contextIconNewPowerPoint"}]},
{Type:"MenuItem",Id:"UploadFile",Text:oNsMenuPhrases.UploadFile,ContextHelp:oNsContextHelpPhrases.Upload,ContextHelpIconClass:"contextIconUpload"},{Type:"MenuItem",Id:"UploadFolder",Text:oNsMenuPhrases.UploadFolder,ContextHelp:oNsContextHelpPhrases.UploadFolder,ContextHelpIconClass:"contextIconUploadFolder"},{Type:"MenuItem",Id:"OpenFolderInFM",Text:oNsMenuPhrases.OpenFolderInFM,ContextHelp:oNsContextHelpPhrases.FileManager,ContextHelpIconClass:"contextIconFileManager"},{Type:"MenuSeparator"},{Type:"MenuItem",
Id:"CustomProperties",Text:oNsMenuPhrases.CustomProperties,ContextHelp:oNsContextHelpPhrases.CustomProp,ContextHelpIconClass:"contextIconCustomProp"},{Type:"MenuSeparator"},{Type:"MenuItem",Id:"Copy",Text:oNsMenuPhrases.Copy,ContextHelp:oNsContextHelpPhrases.Copy,ContextHelpIconClass:"contextIconCopy"},{Type:"MenuItem",Id:"Cut",Text:oNsMenuPhrases.Cut,ContextHelp:oNsContextHelpPhrases.Cut,ContextHelpIconClass:"contextIconCut"},{Type:"MenuItem",Id:"Paste",Text:oNsMenuPhrases.Paste,ContextHelp:oNsContextHelpPhrases.Paste,
ContextHelpIconClass:"contextIconPaste"},{Type:"MenuItem",Id:"Refresh",Text:oNsMenuPhrases.Refresh,ContextHelp:oNsContextHelpPhrases.Refresh,ContextHelpIconClass:"contextIconRefresh"},{Type:"MenuSeparator"},{Type:"MenuItem",Id:"Rename",Text:oNsMenuPhrases.Rename,ContextHelp:oNsContextHelpPhrases.Rename,ContextHelpIconClass:"contextIconRename"},{Type:"MenuItem",Id:"Delete",Text:oNsMenuPhrases.Delete,ContextHelp:oNsContextHelpPhrases.Delete,ContextHelpIconClass:"contextIconDetete"},{Type:"MenuSeparator"},
{Type:"MenuItem",Id:"Properties",Text:oNsMenuPhrases.Properties,ContextHelp:oNsContextHelpPhrases.Info,ContextHelpIconClass:"contextIconInfo"}]};this._menu.FilesViewPanelGeneralMenu={Type:"Menu",Id:"FilesViewPanelGeneralMenu",TargetNodeIds:[],Children:[{Type:"MenuItem",Id:"NewFolder",Text:oNsMenuPhrases.NewFolder,ContextHelp:oNsContextHelpPhrases.NewFolder,ContextHelpIconClass:"contextIconNewFolder"},{Type:"PopupMenuItem",Id:"NewDocument",Text:oNsMenuPhrases.NewDocument,Children:[{Id:"NewWord",Type:"MenuItem",
Text:oNsMenuPhrases.NewWord,ContextHelp:oNsContextHelpPhrases.NewWord,ContextHelpIconClass:"contextIconNewWord"},{Id:"NewExcel",Type:"MenuItem",Text:oNsMenuPhrases.NewExcel,ContextHelp:oNsContextHelpPhrases.NewExcel,ContextHelpIconClass:"contextIconNewExcel"},{Id:"NewPowerpoint",Type:"MenuItem",Text:oNsMenuPhrases.NewPowerPoint,ContextHelp:oNsContextHelpPhrases.NewPowerPoint,ContextHelpIconClass:"contextIconNewPowerPoint"}]},{Type:"MenuItem",Id:"UploadFile",Text:oNsMenuPhrases.UploadFile,ContextHelp:oNsContextHelpPhrases.Upload,
ContextHelpIconClass:"contextIconUpload"},{Type:"MenuItem",Id:"UploadFolder",Text:oNsMenuPhrases.UploadFolder,ContextHelp:oNsContextHelpPhrases.UploadFolder,ContextHelpIconClass:"contextIconUploadFolder"},{Type:"MenuItem",Id:"OpenFolderInFM",Text:oNsMenuPhrases.OpenFolderInFM,ContextHelp:oNsContextHelpPhrases.FileManager,ContextHelpIconClass:"contextIconFileManager"},{Type:"MenuSeparator"},{Type:"PopupMenuItem",Id:"View",Text:oNsMenuPhrases.View,Style:{width:"147px"},Children:[{Type:"MenuItem",Id:"ElargeIcons",
Text:oNsMenuPhrases.ExtraLargeIcons,ContextHelp:oNsContextHelpPhrases.ViewsExtraLarge,ContextHelpIconClass:"contextIconViewExtraLarge"},{Type:"MenuItem",Id:"LargeIcons",Text:oNsMenuPhrases.LargeIcons,ContextHelp:oNsContextHelpPhrases.ViewsLarge,ContextHelpIconClass:"contextIconViewLarge"},{Type:"MenuItem",Id:"MediumIcons",Text:oNsMenuPhrases.MediumIcons,ContextHelp:oNsContextHelpPhrases.ViewsMedium,ContextHelpIconClass:"contextIconViewMedium"},{Type:"MenuItem",Id:"DetailsView",Text:oNsMenuPhrases.Details,
ContextHelp:oNsContextHelpPhrases.ViewsDetails,ContextHelpIconClass:"contextIconViewDetails"}]},{Type:"MenuItem",Id:"Paste",Text:oNsMenuPhrases.Paste,ContextHelp:oNsContextHelpPhrases.Paste,ContextHelpIconClass:"contextIconPaste"},{Type:"MenuItem",Id:"Refresh",Text:oNsMenuPhrases.Refresh,ContextHelp:oNsContextHelpPhrases.Refresh,ContextHelpIconClass:"contextIconRefresh"}]};this._menu.FilesViewPanelFolderMenu={Type:"Menu",Id:"FilesViewPanelFolderMenu",TargetNodeIds:[],Children:[{Type:"MenuItem",Id:"UploadFile",
Text:oNsMenuPhrases.UploadFile,ContextHelp:oNsContextHelpPhrases.Upload,ContextHelpIconClass:"contextIconUpload"},{Type:"MenuItem",Id:"UploadFolder",Text:oNsMenuPhrases.UploadFolder,ContextHelp:oNsContextHelpPhrases.UploadFolder,ContextHelpIconClass:"contextIconUploadFolder"},{Type:"MenuItem",Id:"OpenFolderInFM",Text:oNsMenuPhrases.OpenFolderInFM,ContextHelp:oNsContextHelpPhrases.FileManager,ContextHelpIconClass:"contextIconFileManager"},{Type:"MenuSeparator"},{Type:"MenuItem",Id:"OpenLocation",Text:oNsMenuPhrases.OpenLocation,
ContextHelp:oNsContextHelpPhrases.OpenLocation,ContextHelpIconClass:"contextIconArrowRight"},{Type:"MenuSeparator"},{Type:"MenuItem",Id:"CustomProperties",Text:oNsMenuPhrases.CustomProperties,ContextHelp:oNsContextHelpPhrases.CustomProp,ContextHelpIconClass:"contextIconCustomProp"},{Type:"MenuSeparator"},{Type:"MenuItem",Id:"Copy",Text:oNsMenuPhrases.Copy,ContextHelp:oNsContextHelpPhrases.Copy,ContextHelpIconClass:"contextIconCopy"},{Type:"MenuItem",Id:"Cut",Text:oNsMenuPhrases.Cut,ContextHelp:oNsContextHelpPhrases.Cut,
ContextHelpIconClass:"contextIconCut"},{Type:"MenuItem",Id:"Paste",Text:oNsMenuPhrases.Paste,ContextHelp:oNsContextHelpPhrases.Paste,ContextHelpIconClass:"contextIconPaste"},{Type:"MenuSeparator"},{Type:"MenuItem",Id:"Rename",Text:oNsMenuPhrases.Rename,ContextHelp:oNsContextHelpPhrases.Rename,ContextHelpIconClass:"contextIconRename"},{Type:"MenuItem",Id:"Delete",Text:oNsMenuPhrases.Delete,ContextHelp:oNsContextHelpPhrases.Delete,ContextHelpIconClass:"contextIconDelete"},{Type:"MenuSeparator"},{Type:"MenuItem",
Id:"Properties",Text:oNsMenuPhrases.Properties,ContextHelp:oNsContextHelpPhrases.Info,ContextHelpIconClass:"contextIconInfo"}]};this._menu.FilesViewPanelFileMenu={Type:"Menu",Id:"FilesViewPanelFileMenu",TargetNodeIds:[],Children:[{Type:"MenuItem",Id:"UpdateFile",Text:oNsMenuPhrases.UpdateFile,ContextHelp:oNsContextHelpPhrases.UpdateFile,ContextHelpIconClass:"contextIconUpdateFile"},{Type:"MenuSeparator"},{Type:"MenuItem",Id:"OpenDocument",Text:oNsMenuPhrases.OpenDownload,ContextHelp:oNsContextHelpPhrases.Download,
ContextHelpIconClass:"contextIconDownload"},{Type:"MenuItem",Id:"EditDocument",Text:oNsMenuPhrases.EditDocument,ContextHelp:oNsContextHelpPhrases.Edit,ContextHelpIconClass:"contextIconEdit"},{Type:"MenuItem",Id:"OpenContainingFolderInFM",Text:oNsMenuPhrases.OpenContainingFolderInFM,ContextHelp:oNsContextHelpPhrases.FileManager,ContextHelpIconClass:"contextIconFileManager"},{Type:"MenuSeparator"},{Type:"MenuItem",Id:"OpenLocation",Text:oNsMenuPhrases.OpenLocation,ContextHelp:oNsContextHelpPhrases.OpenLocation,
ContextHelpIconClass:"contextIconArrowRight"},{Type:"MenuSeparator"},{Type:"MenuItem",Id:"Versions",Text:oNsMenuPhrases.Versions,ContextHelp:oNsContextHelpPhrases.Versions,ContextHelpIconClass:"contextIconVersions"},{Type:"MenuSeparator"},{Type:"MenuItem",Id:"CustomProperties",Text:oNsMenuPhrases.CustomProperties,ContextHelp:oNsContextHelpPhrases.CustomProp,ContextHelpIconClass:"contextIconCustomProp"},{Type:"MenuSeparator"},{Type:"MenuItem",Id:"Copy",Text:oNsMenuPhrases.Copy,ContextHelp:oNsContextHelpPhrases.Copy,
ContextHelpIconClass:"contextIconCopy"},{Type:"MenuItem",Id:"Cut",Text:oNsMenuPhrases.Cut,ContextHelp:oNsContextHelpPhrases.Cut,ContextHelpIconClass:"contextIconCut"},{Type:"MenuSeparator"},{Type:"MenuItem",Id:"Rename",Text:oNsMenuPhrases.Rename,ContextHelp:oNsContextHelpPhrases.Rename,ContextHelpIconClass:"contextIconRename"},{Type:"MenuItem",Id:"Delete",Text:oNsMenuPhrases.Delete,ContextHelp:oNsContextHelpPhrases.Delete,ContextHelpIconClass:"contextIconDelete"},{Type:"MenuSeparator"},{Type:"MenuItem",
Id:"Properties",Text:oNsMenuPhrases.Properties,ContextHelp:oNsContextHelpPhrases.Info,ContextHelpIconClass:"contextIconInfo"}]};this._menu.FilesViewPanelMultiselectionMenu={Type:"Menu",Id:"FilesViewPanelMultiselectionMenu",TargetNodeIds:[],Children:[{Type:"MenuItem",Id:"Copy",Text:oNsMenuPhrases.Copy,ContextHelp:oNsContextHelpPhrases.Copy,ContextHelpIconClass:"contextIconCopy"},{Type:"MenuItem",Id:"Cut",Text:oNsMenuPhrases.Cut,ContextHelp:oNsContextHelpPhrases.Cut,ContextHelpIconClass:"contextIconCut"},
{Type:"MenuSeparator"},{Type:"MenuItem",Id:"Delete",Text:oNsMenuPhrases.Delete,ContextHelp:oNsContextHelpPhrases.Delete,ContextHelpIconClass:"contextIconDelete"}]};this._menu.UploadProgressPanelMenu={Type:"Menu",Id:"UploadProgressPanelMenu",TargetNodeIds:[],Children:[{Type:"MenuItem",Id:"Abort",Text:oNsMenuPhrases.CancelUpload,ContextHelp:oNsContextHelpPhrases.CancelUpload,ContextHelpIconClass:"contextIconCancelUpload"},{Type:"MenuItem",Id:"Pause",Text:oNsMenuPhrases.PauseUpload,ContextHelp:oNsContextHelpPhrases.PauseUpload,
ContextHelpIconClass:"contextIconPauseUpload"},{Type:"MenuItem",Id:"Resume",Text:oNsMenuPhrases.ResumeUpload,ContextHelp:oNsContextHelpPhrases.ResumeUpload,ContextHelpIconClass:"contextIconResumeUpload"},{Type:"MenuItem",Id:"Restart",Text:oNsMenuPhrases.RestartUpload,ContextHelp:oNsContextHelpPhrases.RestartUpload,ContextHelpIconClass:"contextIconRestartUpload"},{Type:"MenuItem",Id:"Errors",Text:oNsMenuPhrases.ViewError,ContextHelp:oNsContextHelpPhrases.ViewError,ContextHelpIconClass:"contextIconViewError"}]};
var buttonComponent=ITHit.Components.dijit.byId("ithit_interface_selectView_"+this._controller._index);ITHit.Components.ihDojo.connect(buttonComponent.dropDown,"onOpen",null,function(){ITHit.Components.dojo.addClass(buttonComponent.domNode,"dijitButtonChecked dijitChecked")});ITHit.Components.ihDojo.connect(buttonComponent.dropDown,"onClose",null,function(){ITHit.Components.dojo.removeClass(buttonComponent.domNode,"dijitButtonChecked dijitChecked")});this._HiddenMenuItems={OpenLocation:true}};
ITHit.oNS.MenuController._Counter=0;ITHit.oNS.MenuController.prototype.ToggleVisible=function(sName,bVisible){this._HiddenMenuItems[sName]=!bVisible};
ITHit.oNS.MenuController.prototype._SetActions=function(oMenu,oHandlers){var aMenuChildren=oMenu.Children;for(var i=0,l=aMenuChildren.length;i<l;i++){var menuItem=aMenuChildren[i];if(menuItem.Id)for(var action in oHandlers){if(!oHandlers.hasOwnProperty(action))continue;if(menuItem.Id==action){menuItem.OnClick=oHandlers[action];break}}if(menuItem.Children&&menuItem.Children.length)this._SetActions(menuItem,oHandlers)}};
ITHit.oNS.MenuController.prototype._CloneMenu=function(mInput,aDelete,aDisable){aDelete=aDelete||[];aDisable=aDisable||[];var oDelete={};for(var sName in this._HiddenMenuItems)if(this._HiddenMenuItems.hasOwnProperty(sName))oDelete[sName]=this._HiddenMenuItems[sName];for(var i=0,l=aDelete.length;i<l;i++)oDelete[aDelete[i]]=true;var oDisable={};for(var i=0,l=aDisable.length;i<l;i++)oDisable[aDisable[i]]=true;return this._DoCloneMenu(mInput,oDelete,oDisable)};
ITHit.oNS.MenuController.prototype._DoCloneMenu=function(mInput,oDelete,oDisable){oDelete=oDelete||{};oDisable=oDisable||{};var clone;if(ITHit.Utils.IsArray(mInput)){clone=[];var bLastIsMenuSeparator=false;for(var i=0,l=mInput.length;i<l;i++){var mVal=this._DoCloneMenu(mInput[i],oDelete,oDisable);if(undefined===mVal)continue;if(mVal&&mVal.Type==="MenuSeparator"){if(bLastIsMenuSeparator)continue;bLastIsMenuSeparator=true}else bLastIsMenuSeparator=false;clone.push(mVal)}}else if(ITHit.Utils.IsObjectStrict(mInput)){clone=
{};var bDisable=false;if(mInput.Id&&oDelete[mInput.Id])return undefined;for(var prop in mInput){if(!mInput.hasOwnProperty(prop))continue;switch(prop){case "Id":clone["Id"]=mInput[prop];if(oDisable[mInput[prop]])bDisable=true;continue;case "Text":case "ContextHelp":clone[prop]=String(mInput[prop]);continue}var mVal=this._DoCloneMenu(mInput[prop],oDelete,oDisable);if(undefined!==mVal)clone[prop]=mVal}if(bDisable)clone.Disabled=true}else clone=mInput;return clone};
ITHit.oNS.MenuController.prototype.ShowRightPaneContextMenu=function(oEvent,oTarget,oItem){var oDelete=[],oDisable=[],menu;if(!this._controller.CopyMoveManager.GetItemsLength())oDisable.push("Paste");if(!this._openOrCreateDocument)oDelete.push("NewDocument");menu=this._CloneMenu(this._menu.FilesViewPanelGeneralMenu,oDelete,oDisable);menu["TargetNodeIds"]=[oTarget];menu["TargetItems"]=[oItem];this._ShowMenu(menu,oEvent);ITHit.oNS.Render.MenuController.RefreshCheckedViewState(this._controller._index)};
ITHit.oNS.MenuController.prototype.ShowUploadManagerContextMenu=function(oEvent,oTarget,aUrl){var aDelete=[],aDisable=[],oUpload=this._controller._upload,oDelete={};if(!(ITHit.DetectBrowser.FF>=7||ITHit.DetectBrowser.Safari||ITHit.DetectBrowser.Chrome||ITHit.DetectBrowser.IE>=10)){oDelete["Pause"]=1;oDelete["Resume"]=1}if(!ITHit.DetectBrowser.IE||ITHit.DetectBrowser.IE>9)oDelete["Restart"]=1;if(aUrl.length>1)oDelete["Errors"]=1;for(var i=0,l=aUrl.length;i<l;i++){var oItemInfo=oUpload.GetInfo(aUrl[i]);
var sStatus=oItemInfo?oItemInfo.Status:oUpload.GetStatus(aUrl[i]);if(!oItemInfo&&!sStatus)return false;switch(sStatus){case "queue":case "resume":case "retry":case "Restart":oDelete["Resume"]=1;oDelete["Restart"]=1;oDelete["Errors"]=1;break;case "upload":if(!oItemInfo||!oItemInfo.IsResumable)oDelete["Pause"]=1;oDelete["Resume"]=1;oDelete["Restart"]=1;oDelete["Errors"]=1;break;case "paused":oDelete["Pause"]=1;oDelete["Restart"]=1;oDelete["Errors"]=1;break;case "error":if(!oItemInfo)oDelete["Restart"]=
1;if(!oItemInfo||!oItemInfo.IsResumable)oDelete["Resume"]=1;oDelete["Pause"]=1;if(!oItemInfo)oDelete["Errors"]=1;break;default:throw new ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions.AjaxFileBrowserException(ITHit.Phrases.AjaxFileBrowser.Exceptions.UnexpectedUploadItemState.Paste(oItemInfo.Status));}}for(var prop in oDelete){if(!oDelete.hasOwnProperty(prop))continue;aDelete.push(prop)}if(!this._controller._Upload().IsResumeSupported()){aDisable.push("Resume");aDisable.push("Pause")}var menu=this._CloneMenu(this._menu.UploadProgressPanelMenu,
aDelete,aDisable);menu["TargetNodeIds"]=[oTarget];menu["TargetItems"]=aUrl;this._ShowMenu(menu,oEvent)};
ITHit.oNS.MenuController.prototype.ShowTreeContextMenu=function(oEvent,oTarget,oItem,sUrl){var oNs=ITHit.WebDAV.Client.AjaxFileBrowser;var oNsController=oNs.Controller;var oNsRender=oNs.Render.RenderController;var oController=this._controller;var oDelete=[];var oDisable=[];if(!this._controller.CopyMoveManager.GetItemsLength())oDisable.push("Paste");if(!this._openOrCreateDocument)oDelete.push("NewDocument");if(this._controller._baseUrl==sUrl){oDisable.push("Copy");oDisable.push("Cut");oDisable.push("Rename");
oDisable.push("Delete")}var menu=this._CloneMenu(this._menu.FoldersPanelMenu,oDelete,oDisable);menu["TargetNodeIds"]=[oTarget];menu["TargetItems"]=[oItem];this._ShowMenu(menu,oEvent)};
ITHit.oNS.MenuController.prototype.ShowGridContextMenu=function(oEvent,oTarget,oItems){var oDelete=[],oDisable=[],sUrl,sFullUrl,oNsFileBrowser=ITHit.WebDAV.Client.AjaxFileBrowser;var oItem=null;var sourceMenu;let i=0,length=oItems.length,hasFolder=false;while(i<length&&!hasFolder){oItem=oItems[i];hasFolder=-1!=oItem.ResourceType.indexOf("Folder");i++}if(hasFolder)sourceMenu=this._menu.FilesViewPanelMultiselectionMenu;else{var oItem=oItems[0];sUrl=oItem.Href;sourceMenu=this._menu.FilesViewPanelFileMenu;
if(length==1&&!oItem.Item.VersionControlled())oDisable.push("Versions");var ext=ITHit.Trim(sUrl.substr(sUrl.lastIndexOf(".")+1));if(!ext||!this._openOrCreateDocument&&!this._EditDocumentWithPlugin)oDelete.push("EditDocument");else{var edit=true,fileFormatsNs=oNsFileBrowser.FileFormats;if(fileFormatsNs.ProtectedExtentions.join("|").indexOf(ext)>=0){oDelete.push("EditDocument");edit=false}if(edit&&!this._EditDocumentWithPlugin&&-1==fileFormatsNs.MsOfficeEditExtensions.join("|").indexOf(ext))oDelete.push("EditDocument")}}if(!this._controller.CopyMoveManager.GetItemsLength())oDisable.push("Paste");
var menu=this._CloneMenu(sourceMenu,oDelete,oDisable);menu["TargetNodeIds"]=[oTarget];menu["TargetItems"]=oItems;this._ShowMenu(menu,oEvent)};
ITHit.oNS.MenuController.prototype._ShowMenu=function(menu,oEvent){var targetNodeIds=menu.TargetNodeIds,targetItems=menu.TargetItems;delete menu.TargetNodeIds;delete menu.TargetItems;if(ITHit.Events.ListenersLength(this,this._events.onShowMenu)){var items=[];for(var i=0,l=targetItems.length;i<l;i++)items.push(targetItems[i].Item);if(false===ITHit.Events.DispatchEvent(this,this._events.onShowMenu,[menu,items]))return false}menu.TargetNodeIds=targetNodeIds;menu.TargetItems=targetItems;var oContextMenu=
this._CreateWidgetsTree(menu);if(menu.Id=="FoldersPanelMenu"){ITHit.Events.DispatchEvent(this,"OnTreeNodeMenuOpen",[oEvent]);var _this=this;ITHit.Components.ihDojo.connect(oContextMenu,"onClose",null,function(){ITHit.Events.DispatchEvent(_this,"OnTreeNodeMenuClose",[oEvent])})}if(oContextMenu&&oContextMenu._openMyself){ITHit.WebDAV.Client.AjaxFileBrowser.Controller._SetActive(this._controller._index);oContextMenu.startup();oContextMenu._openMyself({target:oEvent.target||oEvent.srcElement,coords:{x:oEvent.pageX+
2,y:oEvent.pageY}})}};
ITHit.oNS.MenuController.prototype._CreateWidgetsTree=function(oneEntry,menu){if(!menu)menu=oneEntry;var dijit=ITHit.Components.dijit,widget=null,popget=false,div=document.createElement("div"),params={},dojoNs=ITHit.Components.dojo,utilsNs=ITHit.Utils,contextHelp=this._controller._ContextHelp;for(var param in oneEntry){if(!oneEntry.hasOwnProperty(param))continue;switch(param){case "Type":case "TargetItems":case "Children":case "Scope":case "ContextHelp":continue;case "Style":if(ITHit.Utils.IsString(oneEntry[param]))params["style"]=oneEntry[param];
else if(ITHit.Utils.IsObjectStrict(oneEntry[param]))params["style"]=ITHit.WebDAV.Client.AjaxFileBrowser.CodeConstructor.PrepareStyle(oneEntry[param]).join(" ");continue}var newParamName=param.substr(0,1).toLowerCase()+param.substr(1);params[newParamName]=oneEntry[param]}switch(oneEntry.Type){case "Menu":params["first"]=true;params["appendToNode"]=this._controller.Settings.GetRootNode();widget=new dijit.Menu(params,div);if(contextHelp)dojoNs.connect(widget,"onClose",utilsNs.MakeScopeClosure(contextHelp,
"Hide"));break;case "MenuItem":if(oneEntry.Id&&!params.onClick)params.onClick=this._Handlers.GetMenuHandler(menu.Id,oneEntry.Id,menu.TargetItems);else if(params.onClick){var items=[];for(var i=0,l=menu.TargetItems.length;i<l;i++)items.push(menu.TargetItems[i].Item);params.onClick=this._Handlers._MakeClosure(oneEntry.Scope,params.onClick,items)}if(!params.onClick)params.onClick=new Function("","");if(params["id"])params["id"]=this._controller._index+params["id"];params["label"]=params["text"];params["appendToNode"]=
this._controller.Settings.GetRootNode();widget=new dijit.MenuItem(params,div);if(contextHelp&&oneEntry.ContextHelp){dojoNs.connect(widget.domNode,"onmouseover",utilsNs.MakeScopeClosure(contextHelp,"Show",[oneEntry.ContextHelp,oneEntry.ContextHelpIconClass]));dojoNs.connect(widget.domNode,"onmouseout",utilsNs.MakeScopeClosure(contextHelp,"Hide"))}break;case "MenuSeparator":widget=new dijit.MenuSeparator(params,div);break;case "PopupMenuItem":params["appendToNode"]=this._controller.Settings.GetRootNode();
widget=new dijit.Menu(params,div);popget=true;if(contextHelp&&oneEntry.ContextHelp){dojoNs.connect(widget.domNode,"onmouseover",utilsNs.MakeScopeClosure(contextHelp,"Show",[oneEntry.ContextHelp,oneEntry.ContextHelpIconClass]));dojoNs.connect(widget.domNode,"onmouseout",utilsNs.MakeScopeClosure(contextHelp,"Hide"))}break;default:throw new ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions.AjaxFileBrowserException(ITHit.Phrases.AjaxFileBrowser.Exceptions.WrongMenuItemType.Paste(oneEntry.Type));return}if(oneEntry.Children)for(var i=
0,l=oneEntry.Children.length;i<l;i++){var widgetChild=this._CreateWidgetsTree(oneEntry.Children[i],menu);widget.addChild(widgetChild)}if(popget)return new dijit.PopupMenuItem({label:params["text"],popup:widget,appendToNode:params["appendToNode"]});return widget};
ITHit.oNS.MenuController.RefreshCheckedViewState=function(index){var oNsViewModes=ITHit.WebDAV.Client.AjaxFileBrowser.Render.ViewModes;var viewStateCodeToItemIdRelations={};viewStateCodeToItemIdRelations[oNsViewModes.Details]="DetailsView";viewStateCodeToItemIdRelations[oNsViewModes.Medium]="MediumIcons";viewStateCodeToItemIdRelations[oNsViewModes.Large]="LargeIcons";viewStateCodeToItemIdRelations[oNsViewModes.ExtraLarge]="ElargeIcons";var iconCssClassMapping={};iconCssClassMapping[oNsViewModes.Details]=
"Details";iconCssClassMapping[oNsViewModes.Medium]="Medium";iconCssClassMapping[oNsViewModes.Large]="Large";iconCssClassMapping[oNsViewModes.ExtraLarge]="ExtraLarge";var controller=ITHit.WebDAV.Client.AjaxFileBrowser.Controller.GetByIndex(index);var itemToSelect=ITHit.Components.dijit.byId(index+viewStateCodeToItemIdRelations[controller._grid._ViewMode]);var menuItemToSelect=ITHit.Components.dijit.byId(index+"menu"+viewStateCodeToItemIdRelations[controller._grid._ViewMode]);var viewButton=ITHit.Components.dijit.byId("ithit_interface_selectView_"+
index);viewButton.iconNode.className=viewButton.iconNode.className.toString().replace(/(iconView)[^ ]*/,"")+"iconView"+iconCssClassMapping[controller._grid._ViewMode];var setChecked=function(node){ITHit.Components.dojo.addClass(node,"checked_menuitem_icon");node.setAttribute("src",ITHit.WebDAV.Client.AjaxFileBrowser.Utils.GetBlankGifPath());node.style.display="block"};var setUnchecked=function(node){node.style.display="none"};for(var i in viewStateCodeToItemIdRelations){var itemToHide=ITHit.Components.dijit.byId(index+
"menu"+viewStateCodeToItemIdRelations[i]);setUnchecked(itemToHide.iconNode)}if(itemToSelect)setChecked(itemToSelect.iconNode);if(menuItemToSelect)setChecked(menuItemToSelect.iconNode)};ITHit.oNS.MenuController.prototype.toString=function(){return this._ClassId};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser.Render");ITHit.oNS.ResourceIcons=function(iconsPath){this.IconsPath=iconsPath;this.Hash={16:{},32:{},48:{},64:{},72:{},94:{},128:{},256:{}}};
ITHit.oNS.ResourceIcons.prototype.Check=function(size,extension){return this.Hash[size][extension.toLowerCase()]};ITHit.oNS.ResourceIcons.prototype.Add=function(size,extension,exists){this.Hash[size][extension.toLowerCase()]=exists};
ITHit.oNS.ResourceIcons.prototype.CreateImage=function(size,extension){extension=extension.toLowerCase();var thumb;if("folder"!=extension){var exists=this.Check(size,extension);if(exists){thumb=document.createElement("IMG");thumb.src=this.IconsPath+size+"/"+extension+".png"}else if(ITHit.Utils.IsUndefined(exists)){thumb=document.createElement("IMG");thumb.onerror=new Function([],"this.onerror=this.onload=null;ITHit.WebDAV.Client.AjaxFileBrowser.Controller.IconNotFound(this);");thumb.onload=new Function([],
"this.onerror=this.onload=null;ITHit.WebDAV.Client.AjaxFileBrowser.Controller.IconLoaded(this);");thumb.src=this.IconsPath+size+"/"+extension+".png?width="+size+"&height="+size+"&mode=fit"}else{thumb=document.createElement("DIV");thumb.className="resource"}}else{thumb=document.createElement("DIV");thumb.className="folder"}return thumb};
ITHit.oNS.ResourceIcons.prototype.CreateImage2=function(size,url,isFolder){var ns=ITHit.WebDAV.Client.AjaxFileBrowser.Render.Utils.ResourceIcons;if(isFolder)return ns.CreateImage(size,"Folder");return ns.CreateImage(size,url.substr(url.lastIndexOf(".")+1))};
ITHit.oNS.ResourceIcons.prototype.CreateImageString=function(size,extension){if(extension)extension=extension.toLowerCase();if("folder"!=extension)if(false!==extension){var exists=this.Check(size,extension);if(exists)return'<img src="'+this.IconsPath+size+"/"+extension+'.png" />';else if(ITHit.Utils.IsUndefined(exists))return'<img onerror="this.onerror=this.onload=null;ITHit.WebDAV.Client.AjaxFileBrowser.Controller.IconNotFound(this);" onload="this.onerror=this.onload=null;ITHit.WebDAV.Client.AjaxFileBrowser.Controller.IconLoaded(this);" src="'+
this.IconsPath+size+"/"+extension+'.png" />';else return'<div class="resource" />'}else return'<div class="resource" />';else return'<div class="folder" />'};ITHit.oNS.ResourceIcons.prototype.SaveIconInfo=function(image,loaded){var imageSrc=image.src;if(/blank_\d{2,3}\.gif$/.test(imageSrc))return;var imgInfo=imageSrc.match(/\d{2,3}?\/[^\/]+$/)[0].split("/");var size=parseInt(imgInfo[0]);var matches=imageSrc.match(/\/([^.\/]+)\.[^.]+(\?.+)?$/);var ext=matches[1];this.Add(size,ext,loaded);if(!loaded)this.ReplaceResourceThumbnail(image)};
ITHit.oNS.ResourceIcons.prototype.ReplaceResourceThumbnail=function(image){var parent=image.parentNode;if(!parent)return;image.onerror=null;image.onload=null;parent.removeChild(image);var div=document.createElement("DIV");div.setAttribute("class","resource",true);div.setAttribute("className","resource",true);parent.appendChild(div)};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser.Render");
ITHit.oNS.Utils=function(iconsPath){if(!ITHit.WebDAV.Client.AjaxFileBrowser.Render.Utils.ResourceIcons)ITHit.WebDAV.Client.AjaxFileBrowser.Render.Utils.ResourceIcons=new ITHit.WebDAV.Client.AjaxFileBrowser.Render.ResourceIcons(iconsPath)};ITHit.oNS.Utils.ResourceIcons;
ITHit.oNS.Utils.FormatSize=function(value){if("number"!==typeof value)return value;var size=parseFloat(value),formattedSize,phrasesNs=ITHit.Phrases.AjaxFileBrowser.FileSizes;if(size>=1048576E3)formattedSize=Math.round(size/1073741824*100)/100+" "+phrasesNs.GB;else if(size>=1048576)formattedSize=Math.round(size/1048576*100)/100+" "+phrasesNs.MB;else if(size>=1024)formattedSize=Math.round(size/1024*100)/100+" "+phrasesNs.KB;else formattedSize=size+" "+phrasesNs.B;return formattedSize};
ITHit.oNS.Utils.FormatSizeBytes=function(iSize){var sSize=iSize.toString(),aFormattedSize=[],iSeparatorPos=0;for(var i=sSize.length-1;i>=0;i--){if(iSeparatorPos&&!(iSeparatorPos%3))aFormattedSize.push(",");aFormattedSize.push(sSize.charAt(i));iSeparatorPos++}return aFormattedSize.reverse().join("")+" "+ITHit.Phrases.AjaxFileBrowser.FileSizes.Bytes};ITHit.oNS.Utils.FormatDate=function(date){return ITHit.Components.dojo.date.locale.format(date)};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser.Render");
ITHit.oNS.Dialog=function(oController){this._controller=oController;this._uploadForm=null};ITHit.oNS.Dialog.FocusElement=function(sChildId,oElement){setTimeout(ITHit.Components.dojo.hitch(ITHit.Components.dijit,"focus",ITHit.Components.dojo.query("#"+sChildId,oElement.domNode)[0]),400)};
ITHit.oNS.Dialog.Rename=function(sUrl,sName,sResourceType){ITHit.Components.dojo.byId("ithit_interface_rename_url").value=sUrl;ITHit.Components.dojo.byId("ithit_interface_rename").value=sName;ITHit.Components.dojo.byId("ithit_interface_rename_itemResourceType").value=sResourceType;var oDialog=ITHit.Components.dijit.byId("ithit_interface_renameItem");oDialog.show();ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.FocusElement("ithit_interface_rename",oDialog)};
ITHit.oNS.Dialog.Delete=function(sUrl){ITHit.Components.dojo.byId("ithit_interface_delete_url").value=sUrl||"";ITHit.Components.dijit.byId("ithit_interface_deleteItems").show()};
ITHit.oNS.Dialog.NewFolder=function(sUrl,sName){var oNsController=ITHit.WebDAV.Client.AjaxFileBrowser.Controller;var oController=oNsController.GetByIndex(oNsController._GetActive());var aFolders=[];if(oController._url===sUrl)aFolders=oController._Grid().Items.Folders;else{var aChildren=oController.Commands.FoldersCollection.Get(sUrl)||[];aFolders=oController._filter.Run(aChildren).Folders}var sNewFolderPhrase=ITHit.Phrases.AjaxFileBrowser.Interface.NewFolderPattern;var oPattern=new RegExp("^"+sNewFolderPhrase+
"( [0-9]+)?$","i");var iNewFolderMaxNumber=0;for(var i=0,l=aFolders.length;i<l;i++){var aMatches=oPattern.exec(aFolders[i].DisplayName);if(aMatches!==null){var iNumber=parseInt(aMatches[1])||1;iNewFolderMaxNumber=Math.max(iNewFolderMaxNumber,iNumber)}}iNewFolderMaxNumber++;ITHit.Components.dojo.byId("ithit_interface_new_folder_message").innerHTML="";ITHit.Components.dojo.byId("ithit_interface_new_folder").value=sName||sNewFolderPhrase+(iNewFolderMaxNumber>1?" "+iNewFolderMaxNumber:"");ITHit.Components.dojo.byId("ithit_interface_new_folder_url").value=
sUrl;ITHit.Components.dijit.byId("ithit_interface_newFolder").show()};ITHit.oNS.Dialog.CloseNewFolder=function(){ITHit.Components.dijit.byId("ithit_interface_newFolder").hide()};ITHit.oNS.Dialog.NewFolderFolderExistsMessage=function(){var oElement=ITHit.Components.dojo.byId("ithit_interface_new_folder_message");oElement.innerHTML=ITHit.Utils.HtmlEscape(ITHit.Phrases.AjaxFileBrowser.Interface.FolderAlreadyExists)};
ITHit.oNS.Dialog.ViewProperties=function(sUrl,aProps,sItemDisplayUrl){var oNsDojo=ITHit.Components.dojo;var oNsRender=ITHit.WebDAV.Client.AjaxFileBrowser.Render;var oGrid=oNsRender.Dialog.ViewProperties._grid;var oNsPhrases=ITHit.Phrases.AjaxFileBrowser.Property;oNsRender.Dialog.SwitchPropertyEditButton(false);oNsRender.Dialog.SwitchPropertyDeleteButton(false);oNsDojo.byId("ithit_interface_property_itemDisplayUrl").value=sItemDisplayUrl||sUrl;oNsDojo.byId("ithit_interface_property_item_url").value=
sUrl;var oLayout=[{cells:[[{name:oNsPhrases.Namespace,field:"0",width:"100px"},{name:oNsPhrases.Name,field:"1",width:"100px"},{name:oNsPhrases.Value,field:"2",width:"auto"}]],tableLayout:true}];var oMapNames={"Namespace":"0","Name":"1","Value":"2"};if(!oGrid){oGrid=oNsRender.Dialog.ViewProperties._grid=new ITHit.WebDAV.Client.AjaxFileBrowser.Render.DataView.GridView.Grid("ithit_interface_properties_list",oLayout,oMapNames);oNsDojo.connect(ITHit.Components.dijit.byId(oGrid.GetElementId()),"onRowClick",
ITHit.WebDAV.Client.AjaxFileBrowser.Render.RenderController.EnablePropertyControlButtons)}ITHit.Components.dijit.byId("ithit_interface_properties").show();oGrid.RenderItems(aProps)};ITHit.oNS.Dialog.ViewProperties._grid;
ITHit.oNS.Dialog.Versions=function(sUrl,aProps){var oNsDojo=ITHit.Components.dojo;var oNsRender=ITHit.WebDAV.Client.AjaxFileBrowser.Render;var oGrid=oNsRender.Dialog.Versions._grid;var oNsPhrases=ITHit.Phrases.AjaxFileBrowser.Version;oNsDojo.byId("ithit_interface_versions_url").value=sUrl;var sizeFormatter=function(sValue){sValue=parseInt(sValue)||0;return ITHit.WebDAV.Client.AjaxFileBrowser.Render.Utils.FormatSize(sValue)};oNsRender.Dialog.SwitchVersionUpdateButton(false);oNsRender.Dialog.SwitchVersionRemoveButton(false);
oNsRender.Dialog.SwitchVersionDownloadButton(false);var oLayout=[{cells:[[{name:oNsPhrases.Name,field:"0",width:"90px",formatter:ITHit.Utils.HtmlEscape},{name:oNsPhrases.Size,field:"1",width:"70px",formatter:sizeFormatter},{name:oNsPhrases.CreationDate,field:"2",width:"120px"},{name:oNsPhrases.SavedBy,field:"3",width:"auto",formatter:ITHit.Utils.HtmlEscape},{name:oNsPhrases.Comments,field:"4",width:"120px",hidden:true,formatter:ITHit.Utils.HtmlEscape},{field:"5",hidden:true}]],tableLayout:true}];
var oMapNames={"Name":"0","Size":"1","CreationDate":"2","SavedBy":"3","Comments":"4","VersionHref":"5"};if(!oGrid){oGrid=oNsRender.Dialog.Versions._grid=new ITHit.WebDAV.Client.AjaxFileBrowser.Render.DataView.GridView.Grid("ithit_interface_versions_list",oLayout,oMapNames);oNsDojo.connect(ITHit.Components.dijit.byId(oGrid.GetElementId()),"onRowClick",ITHit.WebDAV.Client.AjaxFileBrowser.Render.RenderController.EnableVersionControlButtons);oNsDojo.connect(ITHit.Components.dijit.byId(oGrid.GetElementId()),
"onRowDblClick",function(){ITHit.WebDAV.Client.AjaxFileBrowser.Controller.VersionDownload(ITHit.Components.dojo.byId("ithit_interface_versions_url").value)})}ITHit.Components.dijit.byId("ithit_interface_versions").show();oGrid.RenderItems(aProps);oGrid._grid.setSortIndex(0,true);var oNsCl=ITHit.WebDAV.Client,oNsController=oNsCl.AjaxFileBrowser.Controller,oController=oNsController.GetByIndex(oNsController._GetActive()),oItem=oController._GetItem(sUrl);if(!oController.SuppressServerWarning){var sXEngine=
oItem.Item.ServerVersion;var aXEngineExec=sXEngine&&sXEngine.indexOf("IT Hit WebDAV Server")!==-1?/v([0-9.]+)/.exec(sXEngine):null;var sWebDavServerVersion=aXEngineExec?aXEngineExec[1]:"";if(sWebDavServerVersion){var sWebDavServerMajorVersion=/^[0-9]+\.[0-9]+/.exec(sWebDavServerVersion)[0];var oWarningElement=oNsDojo.byId("ithit_interface_versions_warning_old_version");if(parseFloat(sWebDavServerMajorVersion)<3.5){oWarningElement.innerHTML=ITHit.Utils.HtmlEscape(ITHit.Phrases.AjaxFileBrowser.Interface.WarningOldVersion.Paste(sWebDavServerVersion));
oWarningElement.style.display=""}else oWarningElement.style.display="none"}}};ITHit.oNS.Dialog.Versions._grid;ITHit.oNS.Dialog.DeleteVersion=function(){ITHit.Components.dijit.byId("ithit_interface_delete_version").show()};ITHit.oNS.Dialog.HideDeleteVersionDialog=function(){ITHit.Components.dijit.byId("ithit_interface_delete_version").hide()};ITHit.oNS.Dialog.ShowPropertiesDialog=function(){ITHit.Components.dijit.byId("ithit_interface_properties").show()};
ITHit.oNS.Dialog.AddProperty=function(){ITHit.Components.dojo.byId("ithit_interface_property_url").value=ITHit.Components.dojo.byId("ithit_interface_property_itemDisplayUrl").value;ITHit.Components.dijit.byId("ithit_interface_property_namespace").setValue("");ITHit.Components.dijit.byId("ithit_interface_property_name").setValue("");ITHit.Components.dojo.byId("ithit_interface_property_value").value="";var oDialog=ITHit.Components.dijit.byId("ithit_interface_add_property");oDialog.show();ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.FocusElement("ithit_interface_property_namespace",
oDialog)};ITHit.oNS.Dialog.CloseAddProperty=function(){ITHit.Components.dijit.byId("ithit_interface_add_property").hide()};
ITHit.oNS.Dialog.UpdateProperty=function(sNamespace,sName,sValue){ITHit.Components.dojo.byId("ithit_interface_property_edit_url").value=ITHit.Components.dojo.byId("ithit_interface_property_itemDisplayUrl").value;ITHit.Components.dojo.byId("ithit_interface_property_edit_namespace").value=sNamespace;ITHit.Components.dojo.byId("ithit_interface_property_edit_name").value=sName;ITHit.Components.dojo.byId("ithit_interface_property_edit_value").value=sValue;var oDialog=ITHit.Components.dijit.byId("ithit_interface_edit_property");
oDialog.show();ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.FocusElement("ithit_interface_property_edit_value",oDialog)};ITHit.oNS.Dialog.CloseUpdateProperty=function(){var oDialog=ITHit.Components.dijit.byId("ithit_interface_edit_property").hide()};ITHit.oNS.Dialog.DeleteProperties=function(){ITHit.Components.dijit.byId("ithit_interface_delete_properties").show()};ITHit.oNS.Dialog.HideDeletePropertiesDialog=function(){ITHit.Components.dijit.byId("ithit_interface_delete_properties").hide()};
ITHit.oNS.Dialog.SwitchPropertyEditButton=function(bOn){ITHit.Components.dijit.byId("ithit_interface_properties_edit_button").setAttribute("disabled",!bOn)};ITHit.oNS.Dialog.SwitchPropertyDeleteButton=function(bOn){ITHit.Components.dijit.byId("ithit_interface_properties_delete_button").setAttribute("disabled",!bOn)};ITHit.oNS.Dialog.SwitchVersionUpdateButton=function(bOn){ITHit.Components.dijit.byId("ithit_interface_versions_update_button").setAttribute("disabled",!bOn)};
ITHit.oNS.Dialog.SwitchVersionRemoveButton=function(bOn){ITHit.Components.dijit.byId("ithit_interface_versions_remove_button").setAttribute("disabled",!bOn)};ITHit.oNS.Dialog.SwitchVersionDownloadButton=function(bOn){ITHit.Components.dijit.byId("ithit_interface_versions_download_button").setAttribute("disabled",!bOn)};
ITHit.oNS.Dialog.CopyMoveOverwrite=function(sFileName){ITHit.Components.dojo.byId("ithit_interface_copy_move_overwrite_file_name").innerHTML=ITHit.Utils.HtmlEscape(sFileName);var oComponent=ITHit.Components.dijit.byId("ithit_interface_copy_move_overwrite");oComponent.show()};ITHit.oNS.Dialog.CopyMoveOverwriteHide=function(){var oComponent=ITHit.Components.dijit.byId("ithit_interface_copy_move_overwrite");oComponent.hide();ITHit.Components.dijit._DialogLevelManager.hide(oComponent)};
ITHit.oNS.Dialog.RewriteUploadFile=function(sFileName){ITHit.Components.dojo.byId("ithit_interface_rewrite_upload_file_name").innerHTML=ITHit.Utils.HtmlEscape(sFileName);ITHit.Components.dijit.byId("ithit_interface_rewrite_upload_file").show()};ITHit.oNS.Dialog.RewriteUploadFileHide=function(){var oElement=ITHit.Components.dijit.byId("ithit_interface_rewrite_upload_file");oElement.hide()};ITHit.oNS.Dialog.CopyMoveError=function(){ITHit.Components.dijit.byId("ithit_interface_copyMove").show()};
ITHit.oNS.Dialog.ShowErrors=function(){ITHit.Components.dijit.byId("ithit_interface_error_details_button").setAttribute("disabled",true);ITHit.Components.dijit.byId("ithit_interface_error").show()};ITHit.oNS.Dialog.EnableErrorDetailsButton=function(){ITHit.Components.dijit.byId("ithit_interface_error_details_button").setAttribute("disabled",false)};
ITHit.oNS.Dialog.ShowDetailedError=function(sUrl,sMessage,sBody){ITHit.Components.dojo.byId("ithit_interface_detailed_error_url").value=ITHit.WebDAV.Client.Encoder.Decode(sUrl);ITHit.Components.dojo.byId("ithit_interface_detailed_error_message").value=ITHit.WebDAV.Client.Encoder.Decode(sMessage);var iframe=ITHit.Components.dojo.byId("ithit_interface_detailed_error_message_body"),doc=iframe.contentDocument?iframe.contentDocument:iframe.contentWindow.document;doc.open();doc.close();doc.body.innerHTML=
sBody;ITHit.Components.dijit.byId("ithit_interface_detailed_error").show()};
ITHit.oNS.Dialog.ShowUploadResourceDialog=function(sUrl,bReplace,sDisplayUrl){ITHit.Components.dojo.byId("ithit_interface_uploadResource_itemDisplayUrl").value=sDisplayUrl||sUrl;ITHit.Components.dojo.byId("ithit_interface_uploadResource_item_url").value=sUrl;var sTitle=ITHit.Phrases.AjaxFileBrowser.Interface.UploadFile;if(!bReplace){ITHit.Components.dojo.byId("ithit_interface_uploadResource_folder").style.display="";ITHit.Components.dojo.byId("ithit_interface_uploadResource_file").style.display="none"}else{sTitle=
ITHit.Phrases.AjaxFileBrowser.Interface.UpdateFile;ITHit.Components.dojo.byId("ithit_interface_uploadResource_folder").style.display="none";ITHit.Components.dojo.byId("ithit_interface_uploadResource_file").style.display=""}var oTitleBar=ITHit.Components.dijit.byId("ithit_interface_uploadResource");oTitleBar.setAttribute("title",sTitle);oTitleBar.titleNode.innerHTML=ITHit.Utils.HtmlEscape(sTitle);ITHit.Components.dijit.byId("ithit_interface_uploadResource").show()};
ITHit.oNS.Dialog.HideUploadResourceDialog=function(){ITHit.Components.dijit.byId("ithit_interface_uploadResource").hide()};ITHit.oNS.Dialog.TrialPeriodExpired=function(){var oDialog=ITHit.Components.dijit.byId("ithit_interface_trialPeriodExpired").show()};
ITHit.oNS.Dialog.ShowItemInfo=function(sUrl,sItemName,sType,iSize,sCreated,sModified,iAvailableBytes,iUsedBytes){var oNsById=ITHit.Components.dojo.byId,thumb;var formatUtils=ITHit.WebDAV.Client.AjaxFileBrowser.Render.Utils;if(ITHit.Utils.IsUndefined(iSize))oNsById("ithit_interface_item_info_sizeTr").style.display="none";else{oNsById("ithit_interface_item_info_sizeTr").style.display="";oNsById("ithit_interface_item_info_size").innerHTML=ITHit.Utils.HtmlEscape(formatUtils.FormatSize(iSize)+" ("+formatUtils.FormatSizeBytes(iSize)+
")")}var extTypePhrase,ext;if(sType!="Folder"){ext=sItemName.substr(sItemName.lastIndexOf(".")+1);extTypePhrase=ext}else{ext=sType;extTypePhrase=ITHit.Phrases.AjaxFileBrowser.Interface.FileFolderType}var thumb=ITHit.WebDAV.Client.AjaxFileBrowser.Render.Utils.ResourceIcons.CreateImage(32,ext);if(-1==sUrl.search(/:[0-9]+\//)){iPort=0==sUrl.indexOf("https:")?443:80;sUrl=sUrl.replace(/([a-zA-Z0-9])\/(?!\/)/,"$1:"+iPort+"/")}var quotaInfoContainer=oNsById("ithit_interface_item_info_quota_container");if(iAvailableBytes>=
0&&iUsedBytes>=0){quotaInfoContainer.style.display="";oNsById("ithit_interface_item_info_used_bytes").innerHTML=ITHit.Utils.HtmlEscape(formatUtils.FormatSizeBytes(iUsedBytes));oNsById("ithit_interface_item_info_available_bytes").innerHTML=ITHit.Utils.HtmlEscape(formatUtils.FormatSizeBytes(iAvailableBytes));oNsById("ithit_interface_item_info_total_bytes").innerHTML=ITHit.Utils.HtmlEscape(formatUtils.FormatSizeBytes(iUsedBytes+iAvailableBytes));oNsById("ithit_interface_item_info_used").innerHTML=ITHit.Utils.HtmlEscape(formatUtils.FormatSize(iUsedBytes));
oNsById("ithit_interface_item_info_available").innerHTML=ITHit.Utils.HtmlEscape(formatUtils.FormatSize(iAvailableBytes));oNsById("ithit_interface_item_info_total").innerHTML=ITHit.Utils.HtmlEscape(formatUtils.FormatSize(iUsedBytes+iAvailableBytes));var usedPercent=iUsedBytes*100/(iUsedBytes+iAvailableBytes);oNsById("ithit_interface_item_info_used_percent").innerHTML=ITHit.Utils.HtmlEscape(ITHit.Phrases.AjaxFileBrowser.Interface.UsedPercent.Paste(Math.round(usedPercent)));oNsById("ithit_interface_item_info_used_percent_bar").style.width=
usedPercent+"%"}else quotaInfoContainer.style.display="none";oNsById("ithit_interface_item_info_icon").innerHTML="";oNsById("ithit_interface_item_info_icon").appendChild(thumb);oNsById("ithit_interface_item_info_name").value=sItemName;oNsById("ithit_interface_item_info_url").value=sUrl;oNsById("ithit_interface_item_info_type").innerHTML=ITHit.Utils.HtmlEscape(extTypePhrase);oNsById("ithit_interface_item_info_created").innerHTML=ITHit.Utils.HtmlEscape(sCreated);oNsById("ithit_interface_item_info_modified").innerHTML=
ITHit.Utils.HtmlEscape(sModified);ITHit.Components.dijit.byId("ithit_interface_item_info").show()};ITHit.oNS.Dialog.ShowLog=function(){ITHit.Components.dijit.byId("ithit_interface_log").show()};ITHit.oNS.Dialog.ShowMessage=function(sMessage){ITHit.Components.dojo.byId("ithit_interface_alertMessage_message").innerHTML=ITHit.Utils.HtmlEscape(String(sMessage)).replace(/\n/g,"<br />\n").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;");ITHit.Components.dijit.byId("ithit_interface_alertMessage").show()};
ITHit.oNS.Dialog.ShowCustomDialog=function(html,newStyle,title){var dialog=ITHit.Components.dijit.byId("ithit_interface_customDialog"),dialogNs=ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog;dialogNs.HideCustomDialog();if(newStyle){if(!ITHit.Utils.IsObjectStrict(newStyle))throw new ITHit.Exceptions.ArgumentException(ITHit.Phrases.Exceptions.ObjectExpected,"newStyle");var dialogNode=dialog.domNode;for(var prop in newStyle){if(!newStyle.hasOwnProperty(prop))continue;dialogNs.CustomStyleChanges[prop]=
dialogNode.style[prop];dialogNode.style[prop]=newStyle[prop]}}var element=ITHit.Components.dojo.byId("ithit_interface_customDialog_content");element.innerHTML=html;ITHit.Components.dojo.parser.parse({rootNode:element,appendToNode:element});if(!ITHit.Utils.IsUndefined(title))dialog.set("title",title);dialog.show()};ITHit.oNS.Dialog.CustomStyleChanges={};
ITHit.oNS.Dialog.HideCustomDialog=function(){var dialog=ITHit.Components.dijit.byId("ithit_interface_customDialog"),dialogNode=dialog.domNode,dialogNs=ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog,styleChanges=dialogNs.CustomStyleChanges,dialogContent=ITHit.Components.dojo.byId("ithit_interface_customDialog_content");dialog.set("title","");for(var prop in styleChanges){if(!styleChanges.hasOwnProperty(prop))continue;dialogNode.style[prop]=styleChanges[prop]}dialogNs.CustomStyleChanges={};ITHit.Components.dojo.query("[widgetid]",
dialogContent).forEach(function(node){ITHit.Components.dijit.byNode(node).destroy()});dialogContent.innerHTML="";dialog.hide()};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser.Render");
ITHit.oNS.ErrorDialog=function(showDetails){var phrasesNs=ITHit.Phrases.AjaxFileBrowser.Interface,renderNs=ITHit.WebDAV.Client.AjaxFileBrowser.Render,oMapNames={"Source":"0","Message":"1","Body":"2"};this.ShowDetails=showDetails;this._layout=[{cells:[[{name:phrasesNs.Source,field:"0",width:"auto",cellStyles:"cursor:pointer;",formatter:ITHit.Utils.HtmlEscape},{name:phrasesNs.Message,field:"1",width:"auto",cellStyles:"cursor:pointer;",formatter:ITHit.Utils.HtmlEscape}]],tableLayout:true}];renderNs.ErrorDialog.baseConstructor.call(this,
"ithit_interface_error_details",this._layout,oMapNames);ITHit.Components.dojo.connect(this._grid,"onRowDblClick",ITHit.Utils.MakeScopeClosure(this,"ShowDetailedError"));this.base=renderNs.ErrorDialog.base;this.RenderItems([]);if(!this.ShowDetails)ITHit.Components.dijit.byId("ithit_interface_error_details_button").setAttribute("style","display: none;")};ITHit.Extend(ITHit.oNS.ErrorDialog,ITHit.oNS.DataView.GridView.Grid);ITHit.oNS.ErrorDialog.ShowErrorDetails=true;
ITHit.oNS.ErrorDialog.prototype.ShowErrors=function(){var browserNs=ITHit.WebDAV.Client.AjaxFileBrowser,aErrorData=[];switch(arguments.length){case 1:if(ITHit.Utils.IsArray(arguments[0])){var aErrors=arguments[0];for(var i=0,l=aErrors.length;i<l;i++)if(ITHit.Utils.IsArray(aErrors[i]))aErrorData.push(aErrors[i]);else aErrorData.push(["",aErrors[i],""])}else throw new browserNs.Exceptions.AjaxFileBrowserException(ITHit.Phrases.AjaxFileBrowser.Exceptions.WrongParametrType);break;case 2:aErrorData=[[arguments[0],
arguments[1],""]];break;case 3:aErrorData=[[arguments[0],arguments[1],arguments[2]]];break;default:throw new browserNs.Exceptions.AjaxFileBrowserException(ITHit.Phrases.AjaxFileBrowser.Exceptions.WrongCountInputParameters);return}browserNs.Render.Dialog.ShowErrors();this.RenderItems(aErrorData);if(this.ShowDetails&&aErrorData.length){this.SetSelected(0,true);browserNs.Render.Dialog.EnableErrorDetailsButton()}};
ITHit.oNS.ErrorDialog.prototype.ShowDetailedError=function(){var selectedItems=this.GetSelectedItems();if(!this.ShowDetails||!selectedItems.length)return;var oItem=selectedItems[0];ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.ShowDetailedError(this.GetValue(oItem,"Source"),this.GetValue(oItem,"Message"),this.GetValue(oItem,"Body"))};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser.Render");
ITHit.oNS.InterfaceElements=function(sElementId){this._Element=ITHit.Components.dijit.byId(sElementId);if(this._Element)return null};ITHit.oNS.InterfaceElements.prototype.GetDisabled=function(){return this._Element.disabled};ITHit.oNS.InterfaceElements.prototype.SetDisabled=function(bDisabled){this._Element.setAttribute("disabled",!!bDisabled);return this._Element};ITHit.oNS.InterfaceElements.prototype.SetChecked=function(bChecked){this._Element.setAttribute("checked",!!bChecked);return this._Element};
ITHit.oNS.InterfaceElements.prototype.GetText=function(){return this._Element.label};ITHit.oNS.InterfaceElements.prototype.SetText=function(sLabel){if(""===sLabel)this._Element.showLabel=false;else if(!this._Element.showLabel)this._Element.showLabel=true;return this._Element.setLabel(sLabel)};ITHit.oNS.InterfaceElements.prototype.GetIconClass=function(){return this._Element.iconClass};
ITHit.oNS.InterfaceElements.prototype.SetIconClass=function(sIconClass){var oNsDojo=ITHit.Components.dojo;oNsDojo.removeClass(this._Element.iconNode,this.GetIconClass());oNsDojo.addClass(this._Element.iconNode,sIconClass);this._Element.setAttribute("iconClass",sIconClass)};ITHit.oNS.InterfaceElements.prototype.GetTooltip=function(){return this._Element.title};ITHit.oNS.InterfaceElements.prototype.SetTooltip=function(sTitle){this._Element.setAttribute("title",sTitle);return this._Element};
(function(){var self=ITHit.DefineClass("ITHit.WebDAV.Client.AjaxFileBrowser.Render.SearchBarView",null,{_Controller:null,_Node:null,_CurrentSearchCommand:null,_CurrentAutocompleteCommand:null,_SearchDelayTimer:null,_AutocompleteDelayTimer:null,_LastValue:null,_ComboBox:null,_FlagSkipChangeEvent:false,_FlagIsNoChangeEvent:false,constructor:function(oController,sNodeId){this._Controller=oController;this._Node=document.getElementById(sNodeId);var oTable=ITHit.Utils.CreateDOMElement({nodeName:"TABLE",
style:{width:"100%"},className:"searchBar",childNodes:[{nodeName:"TR",childNodes:[{nodeName:"TD",className:"separator",childNodes:[{nodeName:"DIV"}]},{nodeName:"TD",className:"searchLabel",style:{width:"48px",textAlign:"right"},innerHTML:ITHit.Phrases.AjaxFileBrowser.Interface.Search},{nodeName:"TD",childNodes:[{nodeName:"DIV",className:"inputContainer",childNodes:[{nodeName:"INPUT",type:"text",className:"dijitReset addressBar"},{nodeName:"DIV",className:"button-clear"}]}]}]}]});this._Node.appendChild(oTable);
var that=this;var nButtonClear=ITHit.Components.dojo.query(".button-clear",this._Node)[0];ITHit.Events.AttachEvent(nButtonClear,"click",ITHit.Utils.MakeScopeClosure(this,"Clear"));var stateStore=new ITHit.Components.dojo.data.ItemFileReadStore({data:{"items":[]}});this._ComboBox=new ITHit.Components.dijit.form.ComboBox({store:stateStore,appendToNode:this._Controller.Settings.GetRootNode(),searchAttr:"0",maxHeight:200,autoComplete:false},ITHit.Components.dojo.query("input",this._Node)[0]);this._ComboBox.displayMessage=
function(){};ITHit.Components.dojo.connect(this._ComboBox,"onKeyUp",ITHit.Utils.MakeScopeClosure(this,"_OnKeyUp"));ITHit.Components.dojo.connect(this._ComboBox,"onChange",ITHit.Utils.MakeScopeClosure(this,"_OnChange"));ITHit.Components.dojo.connect(this._ComboBox,"onBlur",ITHit.Utils.MakeScopeClosure(this,"_OnBlur"));ITHit.Components.dojo.connect(this._ComboBox,"onFocus",function(){that.ToggleWidth(true)});ITHit.Components.dojo.connect(this._ComboBox,"onBlur",function(){if(that._ComboBox.getValue()===
"")that.ToggleWidth(false)})},Toggle:function(bShow){this._ComboBox.set("disabled",!bShow);ITHit.Components.dojo.query(".button-clear",this._Node)[0].style.display=bShow?"block":"none"},ToggleWidth:function(bToBig){},Clear:function(){this._ComboBox.set("value","");this._ComboBox.focus();if(this._LastValue)this._Controller.Refresh();this._LastValue=""},SetValue:function(sValue){this._FlagIsNoChangeEvent=true;this._ComboBox.set("value",sValue);this._LastValue=sValue;this._ComboBox.focus()},_OnBlur:function(){if(this._LastValue===
this._ComboBox.getValue())this._FlagIsNoChangeEvent=true},_OnChange:function(sNewValue){if(this._FlagIsNoChangeEvent){this._FlagIsNoChangeEvent=false;return}this._DoSearch()},_OnKeyUp:function(oEvent){oEvent=ITHit.Events.Fix(oEvent);var sNewValue=this._ComboBox.getValue();var isEnter=oEvent.keyCode===ITHit.Components.dojo.keys.ENTER;var iDelayTime=isEnter?0:self.KEY_PRESS_SEARCH_DELAY;if(this._LastValue!==null&&sNewValue===this._LastValue&&!isEnter)return;this._LastValue=sNewValue;if(isEnter||this._Controller.GetSearchDynamicEnable()){if(this._SearchDelayTimer)clearTimeout(this._SearchDelayTimer);
this._SearchDelayTimer=setTimeout(ITHit.Utils.MakeScopeClosure(this,"_DoSearch"),iDelayTime)}if(this._Controller.GetSearchAutocompleteEnable()){if(this._AutocompleteDelayTimer)clearTimeout(this._AutocompleteDelayTimer);var bIsNavigateKeyPress=isEnter||oEvent.keyCode>=37&&oEvent.keyCode<=40;if(!bIsNavigateKeyPress)if(sNewValue==="")this._UpdateAutoComplete([]);else this._AutocompleteDelayTimer=setTimeout(ITHit.Utils.MakeScopeClosure(this,"_DoAutocomplete"),self.KEY_PRESS_AUTOCOMPLETE_DELAY)}},_DoSearch:function(){if(this._FlagSkipChangeEvent){this._FlagSkipChangeEvent=
false;return}if(this._CurrentSearchCommand)this._CurrentSearchCommand.Abort();var sNewValue=this._ComboBox.getValue();if(sNewValue===""){this._Controller.Refresh();return}this._CurrentSearchCommand=this._Controller.OpenSearchResultsAsync(sNewValue,null,true)},_DoAutocomplete:function(){if(this._CurrentAutoCompleteCommand)this._CurrentAutoCompleteCommand.Abort();var sNewValue=this._ComboBox.getValue();if(sNewValue==="")return;var that=this;this._CurrentAutoCompleteCommand=this._Controller.Commands.Create("SearchCommand",
{Href:this._Controller._url,Query:sNewValue,EnableContains:false,OnSuccess:function(oItem,aItems){that._UpdateAutoComplete(aItems)}});this._CurrentAutoCompleteCommand.Execute()},_UpdateAutoComplete:function(aItems){this._ComboBox.store.clearOnClose=true;this._ComboBox.store.data={items:[]};var oUniqueNames={};for(var i=0,l=aItems.length;i<l;i++)oUniqueNames[aItems[i].DisplayName]=true;for(var sName in oUniqueNames)if(oUniqueNames.hasOwnProperty(sName))this._ComboBox.store.data.items.push([sName]);
this._ComboBox.store.close();this._ComboBox.loadDropDown()}},{KEY_PRESS_SEARCH_DELAY:600,KEY_PRESS_AUTOCOMPLETE_DELAY:100})})();ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser.Render");
ITHit.oNS.StateController=function(controlContainer,oController){this.ActiveState=true;this.ControlContainer=controlContainer;this.RenderController=oController;this.ControlContainer.onclick=ITHit.Utils.MakeScopeClosure(this,"OnControlClickHandler");document.body.onclick=ITHit.Utils.MakeScopeClosure(this,"SetInactive");this._ClassId="ITHit.WebDAV.Client.AjaxFileBrowser.Render.StateController_"+ITHit.WebDAV.Client.AjaxFileBrowser.Render.StateController._Counter++};
ITHit.oNS.StateController._Counter=0;ITHit.oNS.StateController.prototype.GetState=function(){return this.ActiveState};ITHit.oNS.StateController.prototype.SetActiveState=function(){if(this.ActiveState)return;this.ActiveState=true;ITHit.Events.DispatchEvent(this,"OnStateChange",this.ActiveState)};ITHit.oNS.StateController.prototype.OnControlClickHandler=function(event){event=event||window.event;event.cancelBubble=true;this.SetActiveState()};
ITHit.oNS.StateController.prototype.SetInactive=function(){if(!this.ActiveState)return;this.ActiveState=false;ITHit.Events.DispatchEvent(this,"OnStateChange",this.ActiveState)};ITHit.oNS.StateController.prototype.Destruct=function(){this.ControlContainer.onclick=document.body.onclick=null};ITHit.oNS.StateController.prototype.toString=function(){return this._ClassId};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser.Render.DragDrop.DragHelpers");
ITHit.oNS.GetOffset=function(elem){if(elem.getBoundingClientRect)return ITHit.WebDAV.Client.AjaxFileBrowser.Render.DragDrop.DragHelpers.GetOffsetRect(elem);else return ITHit.WebDAV.Client.AjaxFileBrowser.Render.DragDrop.DragHelpers.GetOffsetSum(elem)};
ITHit.oNS.GetOffsetRect=function(elem){var box=elem.getBoundingClientRect();var body=document.body,docElem=document.documentElement;var scrollTop=window.pageYOffset||docElem.scrollTop||body.scrollTop,scrollLeft=window.pageXOffset||docElem.scrollLeft||body.scrollLeft,clientTop=docElem.clientTop||body.clientTop||0,clientLeft=docElem.clientLeft||body.clientLeft||0,top=box.top+scrollTop-clientTop,left=box.left+scrollLeft-clientLeft;return{top:Math.round(top),left:Math.round(left)}};
ITHit.oNS.GetOffsetSum=function(elem){var top=0,left=0,i=0;while(elem){top=top+parseInt(elem.offsetTop);left=left+parseInt(elem.offsetLeft);elem=elem.offsetParent}return{top:top,left:left}};ITHit.oNS.FindTargetNode=function(elem){while(elem){if(elem.className&&-1!=elem.className.indexOf("dnd_target"))return elem;elem=elem.parentNode}return null};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser.Render.DragDrop");
ITHit.oNS.DragObject=function(elem,data){this._Element=elem;this.Data=data;this._ClassId="ITHit.WebDAV.Client.AjaxFileBrowser.Render.DragDrop.DragObject_"+ITHit.WebDAV.Client.AjaxFileBrowser.Render.DragDrop.DragObject._Counter++};ITHit.oNS.DragObject._Counter=0;ITHit.oNS.DragObject.prototype.CompareElement=function(elem){return elem===this._Element};ITHit.oNS.DragObject.prototype.toString=function(){return this._ClassId};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser.Render.DragDrop");
ITHit.oNS.DragInfo=function(iconsPath,imageTypes,itemsCount,name,url,resourceType,container){var iconImg,itemsCountDiv,renderNs=ITHit.WebDAV.Client.AjaxFileBrowser.Render,dragInfoNs=renderNs.DragDrop.DragInfo;this.IconSize="48";if(!dragInfoNs.IconsExtensionHash)dragInfoNs.IconsExtensionHash=new renderNs.ResourceIcons;if(resourceType==ITHit.WebDAV.Client.ResourceType.Resource){var extension=name.substr(name.lastIndexOf(".")+1).toLowerCase();if(imageTypes[extension])iconImg=this._CreateElement("IMG",
{className:"dragIcon",src:url+"?width=94&height=94",creator:this,onerror:function(){this.creator.ImageNotFound(this);this.creator=this.onerror=this.onload=null},onload:function(){this.creator=this.onerror=this.onload=null;ITHit.WebDAV.Client.AjaxFileBrowser.Controller.ShowThumb(this,94)}});else{var iconCheck=this.IconCheck(this.IconSize,extension);if(ITHit.Utils.IsUndefined(iconCheck))iconImg=this._CreateElement("IMG",{className:"dragIcon visible",src:iconsPath+this.IconSize+"/"+extension+".png",
creator:this,onerror:function(){this.creator.IconNotFound(this);this.creator=this.onerror=this.onload=null},onload:function(){this.creator.IconLoaded(this);this.creator=this.onerror=this.onload=null}});else if(iconCheck)iconImg=this._CreateElement("IMG",{className:"dragIcon visible",src:iconsPath+this.IconSize+"/"+extension+".png"});else iconImg=this._CreateElement("DIV",{className:"dragIcon dndFile"})}}else iconImg=this._CreateElement("DIV",{className:"dragIcon dndFolder"});if(itemsCount>1)itemsCountDiv=
this._CreateElement("DIV",{className:"dragItemsCountCenterDiv",childNodes:[{nodeName:"DIV",className:"dragItemsCount",childNodes:[itemsCount]}]});this.ActionDiv;this.Container=container;this.InfoDiv=this._CreateElement({nodeName:"DIV",className:"dragInfoDiv",childNodes:[{nodeName:"DIV",className:"dragIconDiv",childNodes:[iconImg,itemsCountDiv]}]});container.appendChild(this.InfoDiv);this._ClassId="ITHit.WebDAV.Client.AjaxFileBrowser.Render.DragDrop.DropTarget_"+ITHit.WebDAV.Client.AjaxFileBrowser.Render.DragDrop.DropTarget._Counter++};
ITHit.oNS.DragInfo._Counter=0;ITHit.oNS.DragInfo.IconsExtensionHash;ITHit.oNS.DragInfo.prototype.IconCheck=function(iconSize,extension){return ITHit.WebDAV.Client.AjaxFileBrowser.Render.DragDrop.DragInfo.IconsExtensionHash.Check(iconSize,extension)};ITHit.oNS.DragInfo.prototype.IconLoaded=function(image){this.SaveIconInfo(image.src,true)};
ITHit.oNS.DragInfo.prototype.IconNotFound=function(image){this.SaveIconInfo(image.src,false);image.parentNode.replaceChild(this._CreateElement("DIV",{className:"dragIcon dndFile"}),image)};
ITHit.oNS.DragInfo.prototype.SaveIconInfo=function(imgSrc,foundFlag){if(/blank_\d{2,3}\.gif$/.test(imgSrc))return;var imgInfo=imgSrc.match(/\d{2,3}?\/[^\/]+$/)[0].split("/"),size=parseInt(imgInfo[0]),extension=imgInfo[1].substr(0,imgInfo[1].length-4).toLowerCase();ITHit.WebDAV.Client.AjaxFileBrowser.Render.DragDrop.DragInfo.IconsExtensionHash.Add(size,extension,foundFlag)};
ITHit.oNS.DragInfo.prototype.ImageNotFound=function(image){image.parentNode.replaceChild(this._CreateElement("DIV",{className:"dragIcon dndFile"}),image)};ITHit.oNS.DragInfo.prototype._CreateElement=ITHit.Utils.CreateDOMElement;ITHit.oNS.DragInfo.Actions={"Cancel":0,"Copy":1,"Move":2};
ITHit.oNS.DragInfo.prototype.CreateActionInfo=function(actionMode,sTargetName){this.DestroyActionInfo();var oNsActions=ITHit.WebDAV.Client.AjaxFileBrowser.Render.DragDrop.DragInfo.Actions,iconClass,actionCaption;switch(actionMode){case oNsActions.Copy:iconClass="copy";actionCaption="Copy to";break;case oNsActions.Move:iconClass="move";actionCaption="Move to";break;case oNsActions.Cancel:iconClass="cancel";break}var childNodesArray=[];if(actionCaption){childNodesArray.push(actionCaption+' "');childNodesArray.push({nodeName:"SPAN",
childNodes:[sTargetName]});childNodesArray.push('"')}this.ActionDiv=this._CreateElement({nodeName:"DIV",className:"dragActionDiv",childNodes:[{nodeName:"UL",className:actionCaption?"content":"",childNodes:[{nodeName:"LI",className:iconClass,childNodes:childNodesArray}]}]});this.InfoDiv.appendChild(this.ActionDiv)};ITHit.oNS.DragInfo.prototype.CheckActionInfoExistence=function(){return!!this.ActionDiv};
ITHit.oNS.DragInfo.prototype.DestroyActionInfo=function(){if(this.ActionDiv){this.InfoDiv.removeChild(this.ActionDiv);this.ActionDiv=null}};ITHit.oNS.DragInfo.prototype.MoveTo=function(x,y){this.InfoDiv.style.left=x;this.InfoDiv.style.top=parseInt(y)+2+"px"};ITHit.oNS.DragInfo.prototype.Hide=function(){this.InfoDiv.style.display="none"};ITHit.oNS.DragInfo.prototype.Show=function(){this.InfoDiv.style.display=""};
ITHit.oNS.DragInfo.prototype.Destroy=function(){this.Container.removeChild(this.InfoDiv);this.ActionDiv=this.InfoDiv=null};ITHit.oNS.DragInfo.prototype.toString=function(){return this._ClassId};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser.Render.DragDrop");ITHit.oNS.DropTarget=function(elem,data){this._Element=elem;this.Data=data;this._ClassId="ITHit.WebDAV.Client.AjaxFileBrowser.Render.DragDrop.DropTarget_"+ITHit.WebDAV.Client.AjaxFileBrowser.Render.DragDrop.DropTarget._Counter++};
ITHit.oNS.DropTarget._Counter=0;ITHit.oNS.DropTarget.prototype.CompareElement=function(elem){return elem===this._Element};ITHit.oNS.DropTarget.prototype.CanAccept=function(elem){return true};ITHit.oNS.DropTarget.prototype.OnEnter=function(){this._Element.className+=" uponMe"};ITHit.oNS.DropTarget.prototype.OnLeave=function(){this._Element.className=this._Element.className.replace(/ uponMe/,"")};
ITHit.oNS.DropTarget.prototype.Accept=function(DragObject){this.OnLeave();ITHit.Events.DispatchEvent(this,"OnDragSuccess",["OnDragSuccess",DragObject.Data,this.Data])};ITHit.oNS.DropTarget.prototype.toString=function(){return this._ClassId};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser.Render.DragDrop");
ITHit.oNS.DragController=function(iconsPath,imageTypes,infoContainer){this.MouseDownAt;this.DragObject;this.DragInfo;this.CurrentDropTarget;this.InfoContainer=infoContainer;this.IconsPath=iconsPath;this.ImageTypes;this._SetImageTypes(imageTypes);this.CtrlPressed;this.Action;this._ClassId="ITHit.WebDAV.Client.AjaxFileBrowser.Render.DragDrop.DragController_"+ITHit.WebDAV.Client.AjaxFileBrowser.Render.DragDrop.DragController._Counter++};ITHit.oNS.DragController._Counter=0;
ITHit.oNS.DragController.prototype.OnSetFileIconsPathHandler=function(event,iconsPath){this.IconsPath=iconsPath};ITHit.oNS.DragController.prototype.OnSetImageTypesHandler=function(event,imageTypes){this._SetImageTypes(imageTypes)};ITHit.oNS.DragController.prototype._SetImageTypes=function(imageTypes){var types=imageTypes.split("|");this.ImageTypes={};for(var i=0,l=types.length;i<l;i++){if(""===types[i])continue;this.ImageTypes[types[i].toLowerCase()]=true}};
ITHit.oNS.DragController.prototype.MouseDown=function(e,elem,sourceData){e=ITHit.Events.Fix(e);if(e.which!=1)return;this.MouseDownAt={x:e.pageX,y:e.pageY,Element:elem,SourceData:sourceData};this._AddDocumentEventHandlers();return false};
ITHit.oNS.DragController.prototype.MouseMove=function(e){e=ITHit.Events.Fix(e);if(this.MouseDownAt){if(Math.abs(this.MouseDownAt.x-e.pageX)<5&&Math.abs(this.MouseDownAt.y-e.pageY)<5)return false;var elem=this.MouseDownAt.Element;this.DragObject=new ITHit.WebDAV.Client.AjaxFileBrowser.Render.DragDrop.DragObject(elem,this.MouseDownAt.SourceData);var mouseOffset=this._GetMouseOffset(elem,this.MouseDownAt.x,this.MouseDownAt.y);this.MouseDownAt=null;this._ChangeAction(e.ctrlKey);this.OnDragStart(mouseOffset)}this.OnDragMove(e.pageX,
e.pageY);var targetElement=this._GetCurrentTargetElement(e);if(!this.CurrentDropTarget||!this.CurrentDropTarget.CompareElement(targetElement)){if(this.CurrentDropTarget){this._DestructCurrentDropTarget();this.DragInfo.DestroyActionInfo()}if(targetElement&&!this.DragObject.CompareElement(targetElement)){var targetData=ITHit.Events.DispatchEvent(this,"OnGetDragDropTargetDataByElement",[e,targetElement]);if(targetData.ResourceType==ITHit.WebDAV.Client.ResourceType.Resource){targetElement=ITHit.WebDAV.Client.AjaxFileBrowser.Render.DragDrop.DragHelpers.FindTargetNode(targetElement.parentNode);
if(targetElement&&!this.DragObject.CompareElement(targetElement))targetData=ITHit.Events.DispatchEvent(this,"OnGetDragDropTargetDataByElement",[e,targetElement]);else return false}this._CreateDropTarget(targetElement,targetData);if(this.CurrentDropTarget.Data.ResourceType==ITHit.WebDAV.Client.ResourceType.Folder)this.DragInfo.CreateActionInfo(this.Action,this.CurrentDropTarget.Data.Name)}}return false};
ITHit.oNS.DragController.prototype.KeyHandler=function(e){e=ITHit.Events.Fix(e);if("keyup"==e.type&&27==e.keyCode){this._Destroy();return}var ctrlKey=e.ctrlKey;if(ctrlKey!=this.CtrlPressed){this._ChangeAction(ctrlKey);if(this.DragInfo&&this.DragInfo.CheckActionInfoExistence())this.DragInfo.CreateActionInfo(this.Action,this.CurrentDropTarget.Data.Name)}};
ITHit.oNS.DragController.prototype._ChangeAction=function(ctrlKey){this.CtrlPressed=ctrlKey;this.Action=this.CtrlPressed?ITHit.WebDAV.Client.AjaxFileBrowser.Render.DragDrop.DragInfo.Actions.Copy:ITHit.WebDAV.Client.AjaxFileBrowser.Render.DragDrop.DragInfo.Actions.Move};
ITHit.oNS.DragController.prototype._CreateDropTarget=function(targetElement,targetData){this.CurrentDropTarget=new ITHit.WebDAV.Client.AjaxFileBrowser.Render.DragDrop.DropTarget(targetElement,targetData);this.CurrentDropTarget.OnEnter();ITHit.Events.AddListener(this.CurrentDropTarget,"OnDragSuccess","_OnDragSuccess",this);ITHit.Events.AddListener(this.CurrentDropTarget,"OnDragFail","_OnDragFail",this)};
ITHit.oNS.DragController.prototype._DestructCurrentDropTarget=function(){if(this.CurrentDropTarget){this.CurrentDropTarget.OnLeave();ITHit.Events.RemoveListener(this.CurrentDropTarget,"OnDragSuccess","_OnDragSuccess",this);ITHit.Events.RemoveListener(this.CurrentDropTarget,"OnDragFail","_OnDragFail",this);this.CurrentDropTarget=null}};
ITHit.oNS.DragController.prototype.OnDragStart=function(mouseOffset){ITHit.Events.DispatchEvent(this,"OnDragStart");this.DragInfo=new ITHit.WebDAV.Client.AjaxFileBrowser.Render.DragDrop.DragInfo(this.IconsPath,this.ImageTypes,this.DragObject.Data.length,this.DragObject.Data[0].Name,this.DragObject.Data[0].Url,this.DragObject.Data[0].ResourceType,this.InfoContainer)};ITHit.oNS.DragController.prototype.OnDragMove=function(x,y){this.DragInfo.MoveTo(x+"px",y+"px")};
ITHit.oNS.DragController.prototype.MouseUp=function(){if(!this.DragObject)this.MouseDownAt=null;else{if(this.CurrentDropTarget)this.CurrentDropTarget.Accept(this.DragObject);else this._OnDragFail();ITHit.Events.DispatchEvent(this,"OnDragEnd")}this._Destroy()};ITHit.oNS.DragController.prototype._Destroy=function(){this.DragObject=null;if(this.DragInfo){this.DragInfo.Destroy();this.DragInfo=null}this._DestructCurrentDropTarget();this._RemoveDocumentEventHandlers()};
ITHit.oNS.DragController.prototype._OnDragSuccess=function(){return ITHit.Events.DispatchEvent(this,"OnDragSuccess",["OnDragSuccess",this.Action,this.DragObject.Data,this.CurrentDropTarget.Data])};ITHit.oNS.DragController.prototype._OnDragFail=function(){return ITHit.Events.DispatchEvent(this,"OnDragFail",["OnDragFail",this.Action,this.DragObject.Data,this.CurrentDropTarget?this.CurrentDropTarget.Data:null])};
ITHit.oNS.DragController.prototype._GetMouseOffset=function(target,x,y){var docPos=ITHit.WebDAV.Client.AjaxFileBrowser.Render.DragDrop.DragHelpers.GetOffset(target);return{x:x-docPos.left,y:y-docPos.top}};ITHit.oNS.DragController.prototype._GetCurrentTargetElement=function(e){if(navigator.userAgent.match("MSIE")||navigator.userAgent.match("Gecko"))var x=e.clientX,y=e.clientY;else var x=e.pageX,y=e.pageY;this.DragInfo.Hide();var elem=document.elementFromPoint(x,y);this.DragInfo.Show();return ITHit.WebDAV.Client.AjaxFileBrowser.Render.DragDrop.DragHelpers.FindTargetNode(elem)};
ITHit.oNS.DragController.prototype._AddDocumentEventHandlers=function(){var doc=window.document;doc.onkeyup=doc.onkeydown=ITHit.Utils.MakeScopeClosure(this,"KeyHandler");doc.onmousemove=ITHit.Utils.MakeScopeClosure(this,"MouseMove");doc.onmouseup=ITHit.Utils.MakeScopeClosure(this,"MouseUp");doc.ondragstart=doc.body.onselectstart=new Function("","return false;")};
ITHit.oNS.DragController.prototype._RemoveDocumentEventHandlers=function(){var doc=window.document;doc.onmousemove=doc.onmouseup=doc.ondragstart=doc.body.onselectstart=doc.onkeyup=doc.onkeydown=null};ITHit.oNS.DragController.prototype.toString=function(){return this._ClassId};
ITHit.DefineClass("ITHit.WebDAV.Client.AjaxFileBrowser.Render.BaseView",null,{_Node:null,_Component:null,constructor:function(oRootNode){this._Render(oRootNode)},GetNode:function(){return this._Node},Query:function(sSelector){return ITHit.Components.dojo.query(sSelector,this._Node)[0]},_Render:function(oRootNode){var oModifiedCode=ITHit.WebDAV.Client.AjaxFileBrowser.CodeConstructor.CloneCodeModified(this._GetStructure());var oNode=document.createElement("div");oNode.innerHTML=ITHit.WebDAV.Client.AjaxFileBrowser.CodeConstructor.CreateHTML({},
oModifiedCode);this._Component=ITHit.Components.dojo.parser.parse({rootNode:oNode,appendToNode:oRootNode})[0];this._Node=this._Component.domNode;this._OnRender()},_OnRender:function(){},_GetStructure:function(){return{}}});
ITHit.DefineClass("ITHit.WebDAV.Client.AjaxFileBrowser.Render.Error.AlertView",ITHit.WebDAV.Client.AjaxFileBrowser.Render.BaseView,{_Error:null,_RootNode:null,constructor:function(oRootNode,mError){this._RootNode=oRootNode;this._Error=mError;this._super(oRootNode)},Show:function(){this._Component.show()},SetTitle:function(sMessage){this._Component.set("title",sMessage)},SetMessage:function(sMessage){sMessage=ITHit.Utils.HtmlEscape(sMessage);sMessage=String(sMessage).replace(/\n/g,"<br />\n").replace(/\t/g,
"&nbsp;&nbsp;&nbsp;&nbsp;");this.Query(".dialogMessageDiv").innerHTML=sMessage},_OnRender:function(){if(this._HaveDetails())this.Query(".button-details").onclick=ITHit.Utils.MakeScopeClosure(this,"_OnDetails");ITHit.Components.dijit.byNode(this.Query(".button-details")).setAttribute("disabled",!this._HaveDetails());this.SetTitle(ITHit.Phrases.AjaxFileBrowser.Interface.RequestError);var sMessage="";if(this._Error instanceof ITHit.WebDAV.Client.Exceptions.WebDavHttpException)sMessage=this._Error.Status.Code===
0?ITHit.Phrases.AjaxFileBrowser.Interface.HttpNotAvailableError:this._Error.Message;else if(ITHit.Utils.IsString(this._Error))sMessage=this._Error;else if(ITHit.Utils.IsObject(this._Error))sMessage=this._Error.toString();else sMessage=String(this._Error);this.SetMessage(sMessage);this.Show()},_HaveDetails:function(){if(this._Error instanceof ITHit.WebDAV.Client.Exceptions.WebDavHttpException)if(this._Error.Error)return!!(this._Error.Error.Description||this._Error.Error.BodyText);else if(this._Error.InnerException)return true;
return false},_OnDetails:function(){if(!this._HaveDetails())return;new ITHit.WebDAV.Client.AjaxFileBrowser.Render.Error.DetailsView(this._RootNode,this._Error)},_GetStructure:function(){return{div:{ihDojoType:"dijit.Dialog",title:"&nbsp;",style:{width:"500px"},childNodes:[{table:{style:{width:"100%"},childNodes:[{tr:{childNodes:[{td:{style:{textAlign:"left"},childNodes:[{div:{className:"dialogMessageDiv"}}]}}]}},{tr:{childNodes:[{td:{style:{textAlign:"center",paddingTop:"15px"},childNodes:[{button:{ihDojoType:"dijit.form.Button",
type:"button",className:"button-details ihDialogButton",text:ITHit.Phrases.AjaxFileBrowser.Interface.Details}},{button:{ihDojoType:"dijit.form.Button",type:"button",iconClass:"iconCancel",className:"ihDialogButton",text:ITHit.Phrases.AjaxFileBrowser.Interface.Close}}]}}]}}]}}]}}}});
ITHit.DefineClass("ITHit.WebDAV.Client.AjaxFileBrowser.Render.Error.DetailsView",ITHit.WebDAV.Client.AjaxFileBrowser.Render.BaseView,{_Error:null,constructor:function(oRootNode,oError){this._Error=oError;this._super(oRootNode)},Show:function(){this._Component.show()},SetTitle:function(sMessage){this._Component.set("title",sMessage)},SetUrl:function(sUrl){this.Query(".error-url").innerHTML=ITHit.Utils.HtmlEscape(sUrl)},SetMessage:function(sMessage){sMessage=ITHit.Utils.HtmlEscape(sMessage);sMessage=
String(sMessage).replace(/\n/g,"<br />\n").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;");this.Query(".error-message").innerHTML=sMessage},SetBody:function(sMessage){var iframe=this.Query("iframe");var doc=iframe.contentDocument||iframe.contentWindow.document;doc.open();doc.close();doc.body.innerHTML=sMessage},_OnRender:function(){this.SetTitle(ITHit.Phrases.AjaxFileBrowser.Interface.RequestError);this.SetUrl(this._Error.Uri);this.SetMessage(this._Error.Message);if(this._Error.Error)this.SetBody(this._Error.Error.Description||
this._Error.Error.BodyText);else if(this._Error.InnerException)this.SetBody(this._Error.InnerException.toString());this.Show()},_GetStructure:function(){return{div:{ihDojoType:"dijit.Dialog",title:ITHit.Phrases.AjaxFileBrowser.Interface.ErrorDetails,style:{width:"550px"},childNodes:[{table:{style:{width:"100%"},childNodes:[{tr:{childNodes:[{td:{style:{width:"70px",textAlign:"left"},childNodes:[{strong:{text:ITHit.Phrases.AjaxFileBrowser.Interface.Source}}]}},{td:{childNodes:[{div:{className:"error-url"}}]}}]}},
{tr:{childNodes:[{td:{style:{textAlign:"left"},childNodes:[{strong:{text:ITHit.Phrases.AjaxFileBrowser.Interface.Message}}]}},{td:{childNodes:[{div:{className:"error-message"}}]}}]}},{tr:{childNodes:[{td:{colspan:2,childNodes:[{iframe:{className:"error-messageBody",style:{width:"524px",height:"300px",overflow:"auto",border:"1px solid #ccc"}}}]}}]}},{tr:{childNodes:[{td:{colspan:2,style:{textAlign:"right",paddingTop:"15px"},childNodes:[{button:{ihDojoType:"dijit.form.Button",type:"button",iconClass:"iconCancel",
className:"ihDialogButton",text:ITHit.Phrases.AjaxFileBrowser.Interface.Close}}]}}]}}]}}]}}}});
(function(){var self=ITHit.DefineClass("ITHit.WebDAV.Client.AjaxFileBrowser.Render.Error.ErrorController",null,{_Controller:null,constructor:function(oController){this._Controller=oController},ShowCommandErrors:function(aErrors){if(aErrors.length===1)this.ShowAsAlert(aErrors[0]);else this.ShowAsAlert(aErrors[0])},ShowAsAlert:function(mError){new ITHit.WebDAV.Client.AjaxFileBrowser.Render.Error.AlertView(this._Controller.Settings.GetRootNode(),mError)},ShowAsList:function(aErrors){}})})();
ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser.Render.BoxSelection.SelectionHelpers");ITHit.oNS.GetOffset=function(elem){if(elem.getBoundingClientRect)return ITHit.WebDAV.Client.AjaxFileBrowser.Render.BoxSelection.SelectionHelpers.GetOffsetRect(elem);else return ITHit.WebDAV.Client.AjaxFileBrowser.Render.BoxSelection.SelectionHelpers.GetOffsetSum(elem)};
ITHit.oNS.GetOffsetRect=function(elem){var box=elem.getBoundingClientRect();var body=document.body,docElem=document.documentElement;var scrollTop=window.pageYOffset||docElem.scrollTop||body.scrollTop,scrollLeft=window.pageXOffset||docElem.scrollLeft||body.scrollLeft,clientTop=docElem.clientTop||body.clientTop||0,clientLeft=docElem.clientLeft||body.clientLeft||0,top=box.top+scrollTop-clientTop,left=box.left+scrollLeft-clientLeft;return{top:Math.round(top),left:Math.round(left)}};
ITHit.oNS.GetOffsetSum=function(elem){var top=0,left=0,i=0;while(elem){top=top+parseInt(elem.offsetTop);left=left+parseInt(elem.offsetLeft);elem=elem.offsetParent}return{top:top,left:left}};ITHit.oNS.FindSelectionNode=function(elem){while(elem){if(elem.className&&-1!=elem.className.indexOf("selection_target"))return elem;elem=elem.parentNode}return null};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser.Render.BoxSelection");
ITHit.oNS.SelectionArea=function(x,y,container){this.Container=container;this.Area=ITHit.Utils.CreateDOMElement({nodeName:"DIV",className:"selectionBorder",style:{top:y+"px",left:x+"px"},childNodes:[{nodeName:"div",className:"selectionArea"}]});this.Container.appendChild(this.Area);this._ClassId="ITHit.WebDAV.Client.AjaxFileBrowser.Render.BoxSelection.SelectionArea_"+ITHit.WebDAV.Client.AjaxFileBrowser.Render.BoxSelection.SelectionArea._Counter++};ITHit.oNS.SelectionArea._Counter=0;
ITHit.oNS.SelectionArea.prototype.ChangeArea=function(x,y,width,height){this.Area.style.top=y+"px";this.Area.style.left=x+"px";this.Area.style.width=width+"px";this.Area.style.height=height+"px"};ITHit.oNS.SelectionArea.prototype.Hide=function(){this.Area.style.display="none"};ITHit.oNS.SelectionArea.prototype.Destroy=function(){this.Container.removeChild(this.Area);this.Area=this.Container=null};ITHit.oNS.SelectionArea.prototype.toString=function(){return this._ClassId};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser.Render.BoxSelection");
ITHit.oNS.Sandbox=function(elem){var containerOffset=ITHit.WebDAV.Client.AjaxFileBrowser.Render.BoxSelection.SelectionHelpers.GetOffset(elem);this.Element=elem;this.Dimentions={Begin:{x:containerOffset.left,y:containerOffset.top},End:{x:containerOffset.left+elem.clientWidth-2,y:containerOffset.top+elem.clientHeight-2}};this.Overflow={Directions:{},ScrollStep:{v:50,h:50},ScrollInterval:100,_IntervalInst:null,Flag:false};this.SelectionArea;this.BeginDot;this.EndDot;this.i=0;this._ClassId="ITHit.WebDAV.Client.AjaxFileBrowser.Render.BoxSelection.Sandbox_"+
ITHit.WebDAV.Client.AjaxFileBrowser.Render.BoxSelection.Sandbox.Counter++};ITHit.oNS.Sandbox._Counter=0;
ITHit.oNS.Sandbox.prototype.SelectionStart=function(coords,elem){var body=document.body,node=elem,offsetX=0,offsetY=0;while(node&&node!==body){var elementStyle=ITHit.Utils.GetComputedStyle(node);offsetX+=parseInt(elementStyle.left)||0;offsetY+=parseInt(elementStyle.top)||0;node=node.parentNode}this.PositionOffset={x:offsetX,y:offsetY};this.BeginDot=coords;var x=coords.x-this.GetScrollLeft()-this.PositionOffset.x,y=coords.y-this.GetScrollTop()-this.PositionOffset.y;this.SelectionArea=new ITHit.WebDAV.Client.AjaxFileBrowser.Render.BoxSelection.SelectionArea(x,
y,elem)};ITHit.oNS.Sandbox.prototype.SelectionMove=function(coords){var beginX=coords.Begin.x,beginY=coords.Begin.y,endX=coords.End.x,endY=coords.End.y,layerX=beginX<=endX?beginX:endX,layerY=beginY<=endY?beginY:endY,width=Math.abs(beginX-endX),height=Math.abs(beginY-endY);this.SelectionArea.ChangeArea(layerX-this.PositionOffset.x,layerY-this.PositionOffset.y,width,height)};ITHit.oNS.Sandbox.prototype.SelectionStop=function(){this.SelectionArea.Hide()};
ITHit.oNS.Sandbox.prototype.OnMouseMove=function(coords){var out=this.GetCoordsCheckOverflow(coords);this.EndDot={x:out.End.x+this.GetScrollLeft(),y:out.End.y+this.GetScrollTop()};if(this.Overflow.Flag){if(!this.Overflow._IntervalInst){this.Overflow._IntervalInst=setInterval(ITHit.Utils.MakeScopeClosure(this,"_ScrollTick"),this.Overflow.ScrollInterval);this._ScrollTick()}}else if(this.Overflow._IntervalInst){clearInterval(this.Overflow._IntervalInst);this.Overflow._IntervalInst=null;this.Overflow.Flag=
false}};ITHit.oNS.Sandbox.prototype._MoveSelectionArea=function(){this.GetCoordsCheckOverflow(this.EndDot,true)};
ITHit.oNS.Sandbox.prototype.GetCoordsCheckOverflow=function(coords,doNotSave){var beginSb=this.Dimentions.Begin,endSb=this.Dimentions.End,flag=false,overflow={},scrollTop=this.GetScrollTop(),scrollLeft=this.GetScrollLeft(),beginX=this.BeginDot.x-scrollLeft,beginY=this.BeginDot.y-scrollTop,endX=coords.x-scrollLeft,endY=coords.y-scrollTop,x=endX,y=endY,coordsOut={Begin:{x:beginX>=beginSb.x?beginX<=endSb.x?beginX:endSb.x:beginSb.x,y:beginY>=beginSb.y?beginY<=endSb.y?beginY:endSb.y:beginSb.y},End:{}};
if(x<beginSb.x){x=beginSb.x;overflow.Left=true;flag=true}else if(x>endSb.x){x=endSb.x;overflow.Rigth=true;flag=true}if(y<beginSb.y){y=beginSb.y;overflow.Top=true;flag=true}else if(y>endSb.y){y=endSb.y;overflow.Bottom=true;flag=true}if(!doNotSave){this.Overflow.Directions=overflow;this.Overflow.Flag=flag}coordsOut.End.x=x||endX;coordsOut.End.y=y||endY;this.SelectionMove(coordsOut);return coordsOut};ITHit.oNS.Sandbox.prototype.CheckX=function(x){return x>=this.Dimentions.Begin.x&&x<=this.Dimentions.End.x};
ITHit.oNS.Sandbox.prototype.CheckY=function(y){return y>=this.Dimentions.Begin.y&&y<=this.Dimentions.End.y};ITHit.oNS.Sandbox.prototype.GetCoordsWithScroll=function(x,y){return{"x":x+this.GetScrollLeft(),"y":y+this.GetScrollTop()}};ITHit.oNS.Sandbox.prototype.GetScrollTop=function(){return this.Element.scrollTop};ITHit.oNS.Sandbox.prototype.GetScrollLeft=function(){return this.Element.scrollLeft};
ITHit.oNS.Sandbox.prototype._ScrollTick=function(){var dirs=this.Overflow.Directions,elem=this.Element,doScroll,offset;if(dirs.Top||dirs.Bottom){doScroll=false;if(dirs.Top)if(elem.scrollTop>0){doScroll=true;if(elem.scrollTop-this.Overflow.ScrollStep.v>=0){offset=elem.scrollTop-this.Overflow.ScrollStep.v;this.EndDot.y-=this.Overflow.ScrollStep.v}else{offset=0;this.EndDot.y=0}}else this.Overflow.Directions.Bottom=false;else{var scrollClientHeight=elem.scrollTop+elem.clientHeight;if(elem.scrollHeight>
scrollClientHeight){doScroll=true;if(scrollClientHeight+this.Overflow.ScrollStep.v<=elem.scrollHeight){offset=elem.scrollTop+this.Overflow.ScrollStep.v;this.EndDot.y+=this.Overflow.ScrollStep.v}else{offset=elem.scrollHeight-elem.clientHeight;this.EndDot.y+=elem.scrollHeight}}else this.Overflow.Directions.Top=false}if(doScroll)ITHit.Events.DispatchEvent(this,"OnScrollTop",[offset])}if(dirs.Rigth||dirs.Left){doScroll=false;if(dirs.Rigth){var scrollClientWidth=elem.scrollLeft+elem.clientWidth;if(elem.scrollWidth>
scrollClientWidth){doScroll=true;if(scrollClientWidth+this.Overflow.ScrollStep.h<=elem.scrollWidth){offset=elem.scrollLeft+this.Overflow.ScrollStep.h;this.EndDot.x+=this.Overflow.ScrollStep.h}else{offset=elem.scrollWidth-elem.clientWidth;this.EndDot.x=elem.scrollLeft}}else this.Overflow.Directions.Right=false}else if(elem.scrollLeft>0){doScroll=true;if(elem.scrollLeft-this.Overflow.ScrollStep.h>=0){offset=elem.scrollLeft-this.Overflow.ScrollStep.h;this.EndDot.x-=this.Overflow.ScrollStep.h}else{offset=
0;this.EndDot.x=0}}else this.Overflow.Directions.Left=false;if(doScroll)ITHit.Events.DispatchEvent(this,"OnScrollLeft",[offset])}this._MoveSelectionArea()};ITHit.oNS.Sandbox.prototype.GetBeginPoint=function(){return this.BeginDot};ITHit.oNS.Sandbox.prototype.GetEndPoint=function(){return this.EndDot};
ITHit.oNS.Sandbox.prototype.Destroy=function(){if(this.Overflow._IntervalInst){clearInterval(this.Overflow._IntervalInst);this.Overflow._IntervalInst=null;this.Overflow.Flag=false}if(this.SelectionArea){this.SelectionArea.Destroy();this.SelectionArea=null;delete this.PositionOffset}this.BeginDot=null;this.EndDot=null;ITHit.Events.RemoveAllListeners(this)};ITHit.oNS.Sandbox.prototype.toString=function(){return this._ClassId};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser.Render.BoxSelection");
ITHit.oNS.SelectionController=function(controlContainer,eventContainer){if(ITHit.Utils.IsString(eventContainer))eventContainer=document.getElementById(eventContainer);if(!ITHit.Utils.IsDOMObject(eventContainer))throw ITHit.Exception("Expected DOM Object or ID parameter.");this.Closures={OnMouseMove:ITHit.Utils.MakeScopeClosure(this,"OnMouseMove"),OnMouseUp:ITHit.Utils.MakeScopeClosure(this,"OnMouseUp")};this.Sandbox;this.SandboxNode;this.MouseDownAt;this.ControlContainer=controlContainer;this.EventContainer=
eventContainer;this.SelectionStart=false;ITHit.Events.AttachEvent(this.EventContainer,"onmousedown",ITHit.Utils.MakeScopeClosure(this,"OnMouseDown"));this._ClassId="ITHit.WebDAV.Client.AjaxFileBrowser.Render.BoxSelection.SelectionController_"+ITHit.WebDAV.Client.AjaxFileBrowser.Render.BoxSelection.SelectionController._Counter++};ITHit.oNS.SelectionController._Counter=0;
ITHit.oNS.SelectionController.prototype.OnMouseDown=function(e){e=ITHit.Events.Fix(e);ITHit.Events.DispatchEvent(this,"OnMouseDown",e);if(e.which!=1)return;this.MouseDownAt={x:e.pageX,y:e.pageY};this.Sandbox=this._GetSelectionSandbox();if(!this.Sandbox.CheckX(this.MouseDownAt.x)||!this.Sandbox.CheckY(this.MouseDownAt.y)){this.Sandbox.Destroy();this.Sandbox=null;this.MouseDownAt=null;return false}ITHit.Events.AddListener(this.Sandbox,"OnScrollTop","OnScrollTopHandler",this);ITHit.Events.AddListener(this.Sandbox,
"OnScrollLeft","OnScrollLeftHandler",this);this._AddDocumentEventHandlers();if(ITHit.DetectBrowser.FF)ITHit.Events.Stop(e);return false};ITHit.oNS.SelectionController.prototype._GetSelectionSandbox=function(){var selBox=ITHit.Events.DispatchEvent(this,"OnGetSelectionContext");if(!ITHit.Utils.IsDOMObject(selBox))selBox=this.EventContainer;this.SandboxNode=selBox;return new ITHit.WebDAV.Client.AjaxFileBrowser.Render.BoxSelection.Sandbox(selBox)};
ITHit.oNS.SelectionController.prototype.OnMouseMove=function(e){e=ITHit.Events.Fix(e);if(this.MouseDownAt){if(Math.abs(this.MouseDownAt.x-e.pageX)<5&&Math.abs(this.MouseDownAt.y-e.pageY)<5)return false;this._StartSelection()}var coords=this.Sandbox.OnMouseMove(this.Sandbox.GetCoordsWithScroll(e.pageX,e.pageY));return false};
ITHit.oNS.SelectionController.prototype._StartSelection=function(){ITHit.Events.DispatchEvent(this,"OnBoxSelectionStart");var beginDot=this.Sandbox.GetCoordsWithScroll(this.MouseDownAt.x,this.MouseDownAt.y);this.Sandbox.SelectionStart(beginDot,this.ControlContainer);this.MouseDownAt=null;this.SelectionStart=true};
ITHit.oNS.SelectionController.prototype._GetMouseOffset=function(target,x,y){var docPos=ITHit.WebDAV.Client.AjaxFileBrowser.Render.BoxSelection.SelectionHelpers.GetOffset(target);return{x:x-docPos.left,y:y-docPos.top}};
ITHit.oNS.SelectionController.prototype.OnMouseUp=function(e){e=e||window.event;if(!this.SelectionStart)this.MouseDownAt=null;else{this.Sandbox.SelectionStop();this.SelectionStart=false;var beginDot=this.Sandbox.GetBeginPoint(),endDot=this.Sandbox.GetEndPoint(),beginDotWithoutOffset=this._GetMouseOffset(this.SandboxNode,beginDot.x,beginDot.y),endDotWithoutOffset=this._GetMouseOffset(this.SandboxNode,endDot.x,endDot.y),beginX=beginDotWithoutOffset.x<=endDotWithoutOffset.x?beginDotWithoutOffset.x:endDotWithoutOffset.x,
endX=beginDotWithoutOffset.x<=endDotWithoutOffset.x?endDotWithoutOffset.x:beginDotWithoutOffset.x,beginY=beginDotWithoutOffset.y<=endDotWithoutOffset.y?beginDotWithoutOffset.y:endDotWithoutOffset.y,endY=beginDotWithoutOffset.y<=endDotWithoutOffset.y?endDotWithoutOffset.y:beginDotWithoutOffset.y;ITHit.Events.DispatchEvent(this,"OnBoxSelect",[beginX,beginY,endX,endY])}this._Destroy();ITHit.Events.Stop(e);return false};ITHit.oNS.SelectionController.prototype.Cancel=function(){this._Destroy()};
ITHit.oNS.SelectionController.prototype._Destroy=function(){this._RemoveDocumentEventHandlers();if(this.Sandbox){this.SelectionStart=false;this.Sandbox.Destroy();this.Sandbox=null;this.SandboxNode=null}ITHit.Events.DispatchEvent(this,"OnBoxSelectionEnd")};
ITHit.oNS.SelectionController.prototype._AddDocumentEventHandlers=function(){var doc=window.document;ITHit.Events.AttachEvent(doc,"onmousemove",this.Closures.OnMouseMove);ITHit.Events.AttachEvent(doc,"onmouseup",this.Closures.OnMouseUp);doc.ondragstart=doc.body.onselectstart=new Function("","return false;")};
ITHit.oNS.SelectionController.prototype._RemoveDocumentEventHandlers=function(){var doc=window.document;ITHit.Events.DettachEvent(doc,"onmousemove",this.Closures.OnMouseMove);ITHit.Events.DettachEvent(doc,"onmouseup",this.Closures.OnMouseUp);doc.ondragstart=doc.body.onselectstart=null};ITHit.oNS.SelectionController.prototype.OnScrollTopHandler=function(offset){ITHit.Events.DispatchEvent(this,"OnScrollTop",[offset])};
ITHit.oNS.SelectionController.prototype.OnScrollLeftHandler=function(offset){ITHit.Events.DispatchEvent(this,"OnScrollLeft",[offset])};ITHit.oNS.SelectionController.prototype.toString=function(){return this._ClassId};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser.Handlers");
ITHit.oNS.MenuHandlers=function(controller){this._Controller=controller;this._HandlerLinks=ITHit.WebDAV.Client.AjaxFileBrowser.Handlers.MenuHandlers._HandlerLinks;this._HandlerLinks.FilesViewPanelFolderMenu=this._HandlerLinks.FilesViewPanelMultiselectionMenu;this._HandlerLinks.FilesViewPanelFileMenu=this._HandlerLinks.FilesViewPanelMultiselectionMenu;this._ClassId="ITHit.WebDAV.Client.AjaxFileBrowser.Handlers.MenuHandlers"+ITHit.WebDAV.Client.AjaxFileBrowser.Handlers.MenuHandlers._Counter++};
ITHit.oNS.MenuHandlers._Counter=0;
ITHit.oNS.MenuHandlers._HandlerLinks={FilesViewPanelGeneralMenu:{DetailsView:"DetailsView",ElargeIcons:"ExtraLargeIcons",LargeIcons:"LargeIcons",MediumIcons:"MediumIcons",Paste:"PasteGridItems",NewFolder:"NewFolderDialog",UploadFile:"UploadFile",UploadFolder:"UploadFolder",OpenFolderInFM:"OpenFolderInFM",NewWord:"NewWord07",NewExcel:"NewExcel07",NewPowerpoint:"NewPowerpoint07",Refresh:"Refresh"},FoldersPanelMenu:{Paste:"PasteItems",NewFolder:"NewFolder",UploadFile:"UploadFile",UploadFolder:"UploadFolder",
OpenFolderInFM:"OpenFolderInFM",NewWord:"NewWord07",NewExcel:"NewExcel07",NewPowerpoint:"NewPowerpoint07",Refresh:"RefreshTreeNode",Rename:"Rename",CustomProperties:"ShowCustomProperties",Delete:"Delete",Copy:"SetCopyItems",Cut:"SetCutItems",Properties:"ItemProperties"},FilesViewPanelMultiselectionMenu:{Paste:"PasteItems",UploadFile:"UploadFile",Rename:"Rename",CustomProperties:"ShowCustomProperties",Versions:"ShowVersions",Delete:"ShowDeleteDialog",Copy:"CopySelected",Cut:"CutSelected",UpdateFile:"UpdateFile",
UploadFolder:"UploadFolder",OpenDocument:"OpenDocument",EditDocument:"EditDocument",OpenFolderInFM:"OpenFolderInFM",OpenLocation:"OpenLocation",OpenContainingFolderInFM:"OpenContainingFolderInFM",Properties:"ItemProperties"},UploadProgressPanelMenu:{Abort:"CancelUpload",Pause:"PauseUpload",Resume:"ResumeUpload",Restart:"Restart",Errors:"ShowUploadErrors"}};
ITHit.oNS.MenuHandlers.prototype.GetMenuHandler=function(menuId,menuItemId,items){if(!menuId||!menuItemId||!this._HandlerLinks[menuId][menuItemId])return false;return this._MakeClosure(this,this._HandlerLinks[menuId][menuItemId],items)};ITHit.oNS.MenuHandlers.prototype._MakeClosure=function(scope,func,items){if(scope)if(ITHit.Utils.IsString(func))return function(event){scope[func](items,event)};else return function(event){func.call(scope,items,event)};else return function(event){func(items,event)}};
ITHit.oNS.MenuHandlers.prototype.DetailsView=function(items,event){this._Controller.SetViewMode(ITHit.WebDAV.Client.AjaxFileBrowser.Render.ViewModes.Details)};ITHit.oNS.MenuHandlers.prototype.ExtraLargeIcons=function(items,event){this._Controller.SetViewMode(ITHit.WebDAV.Client.AjaxFileBrowser.Render.ViewModes.ExtraLarge)};ITHit.oNS.MenuHandlers.prototype.LargeIcons=function(items,event){this._Controller.SetViewMode(ITHit.WebDAV.Client.AjaxFileBrowser.Render.ViewModes.Large)};
ITHit.oNS.MenuHandlers.prototype.MediumIcons=function(items,event){this._Controller.SetViewMode(ITHit.WebDAV.Client.AjaxFileBrowser.Render.ViewModes.Medium)};ITHit.oNS.MenuHandlers.prototype.PasteGridItems=function(items,event){if(!items||!items.length)return false;this._Controller.PasteGridItems();ITHit.Events.DispatchEvent(this._Controller,"OnMenuPaste",[items])};
ITHit.oNS.MenuHandlers.prototype.PasteItems=function(items,event){if(!items||!items.length)return false;this._Controller.CopyMoveManager.PasteTo(items[0].Href);ITHit.Events.DispatchEvent(this._Controller,"OnMenuPaste",[items])};ITHit.oNS.MenuHandlers.prototype.NewFolderDialog=function(items,event){if(!items||!items.length)return false;ITHit.WebDAV.Client.AjaxFileBrowser.Render.RenderController.NewFolderDialog()};
ITHit.oNS.MenuHandlers.prototype.NewFolder=function(items,event){if(!items||!items.length)return false;ITHit.WebDAV.Client.AjaxFileBrowser.Render.RenderController.NewFolderDialog(items[0].Href,event)};ITHit.oNS.MenuHandlers.prototype.UploadFile=function(items,event){if(!items||!items.length)return false;this._Controller.UploadFileDialog(items[0].Href)};ITHit.oNS.MenuHandlers.prototype.UploadFolder=function(items,event){if(!items||!items.length)return false;this._Controller.UploadFolder(items[0].Href)};
ITHit.oNS.MenuHandlers.prototype.NewWord07=function(items,event){if(!items||!items.length)return false;this._Controller.SharePointNewDocument("word",items[0].Href)};ITHit.oNS.MenuHandlers.prototype.NewExcel07=function(items,event){if(!items||!items.length)return false;this._Controller.SharePointNewDocument("excel",items[0].Href)};ITHit.oNS.MenuHandlers.prototype.NewPowerpoint07=function(items,event){if(!items||!items.length)return false;this._Controller.SharePointNewDocument("powerpoint",items[0].Href)};
ITHit.oNS.MenuHandlers.prototype.Refresh=function(items,event){if(!items||!items.length)return false;ITHit.WebDAV.Client.AjaxFileBrowser.Controller.Refresh()};ITHit.oNS.MenuHandlers.prototype.RefreshTreeNode=function(items,event){if(!items||!items.length)return false;this._Controller.RefreshTreeNode(this._Controller._Tree().GetNodeByUrl(items[0].Href))};
ITHit.oNS.MenuHandlers.prototype.Rename=function(items,event){if(!items||!items.length)return false;var item=items[0];ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.Rename(item.Href,item.DisplayName,item.ResourceType)};ITHit.oNS.MenuHandlers.prototype.ShowCustomProperties=function(items,event){if(!items||!items.length)return false;ITHit.WebDAV.Client.AjaxFileBrowser.Controller.ShowPropertiesDialog(items[0].Href)};
ITHit.oNS.MenuHandlers.prototype.ShowVersions=function(items,event){if(!items||!items.length)return false;ITHit.WebDAV.Client.AjaxFileBrowser.Controller.ShowVersionsDialog(items[0].Href)};ITHit.oNS.MenuHandlers.prototype.Delete=function(items,event){if(!items||!items.length)return false;ITHit.WebDAV.Client.AjaxFileBrowser.Render.RenderController.ShowDeleteDialog(decodeURI(items[0].Href))};
ITHit.oNS.MenuHandlers.prototype.ShowDeleteDialog=function(items,event){if(!items||!items.length)return false;ITHit.WebDAV.Client.AjaxFileBrowser.Render.RenderController.ShowDeleteDialog()};ITHit.oNS.MenuHandlers.prototype.CopySelected=function(items,event){if(!items||!items.length)return false;this._Controller.CopyGridSelected();ITHit.Events.DispatchEvent(this._Controller,"OnMenuCopy",[items])};
ITHit.oNS.MenuHandlers.prototype.SetCopyItems=function(items,event){if(!items||!items.length)return false;this._Controller.CopyMoveManager.CopyItems([items[0].Href]);ITHit.Events.DispatchEvent(this._Controller,"OnMenuCopy",[items])};ITHit.oNS.MenuHandlers.prototype.CutSelected=function(items,event){if(!items||!items.length)return false;this._Controller.CutGridSelected();ITHit.Events.DispatchEvent(this._Controller,"OnMenuCut",[items])};
ITHit.oNS.MenuHandlers.prototype.SetCutItems=function(items,event){if(!items||!items.length)return false;this._Controller.CopyMoveManager.CutItems(items[0].Href);ITHit.Events.DispatchEvent(this._Controller,"OnMenuCut",[items])};ITHit.oNS.MenuHandlers.prototype.UpdateFile=function(items,event){if(!items||!items.length)return false;this._Controller.UploadFileDialog(items[0].Href,true)};
ITHit.oNS.MenuHandlers.prototype.OpenDocument=function(items,event){if(!items||!items.length)return false;items.forEach(item=>{this._Controller.OpenDocument(item.Href,true,item.DisplayName)})};ITHit.oNS.MenuHandlers.prototype.EditDocument=function(items,event){if(!items||!items.length)return false;this._Controller.EditDocument(items[0].Href)};ITHit.oNS.MenuHandlers.prototype.OpenFolderInFM=function(items,event){if(!items||!items.length)return false;this._Controller.OpenFolderInFM(items[0].Href)};
ITHit.oNS.MenuHandlers.prototype.OpenLocation=function(items,event){if(!items||!items.length)return false;this._Controller.OpenLocation(items[0].Href)};ITHit.oNS.MenuHandlers.prototype.OpenContainingFolderInFM=function(items,event){if(!items||!items.length)return false;this._Controller.OpenContainingFolderInFM(items[0].Href)};ITHit.oNS.MenuHandlers.prototype.CancelUpload=function(urls,event){if(!urls||!urls.length)return false;this._Controller._Upload().CancelUpload(urls)};
ITHit.oNS.MenuHandlers.prototype.PauseUpload=function(urls,event){if(!urls||!urls.length)return false;this._Controller._Upload().PauseUpload(urls)};ITHit.oNS.MenuHandlers.prototype.ResumeUpload=function(urls,event){if(!urls||!urls.length)return false;this._Controller._Upload().ResumeUpload(urls)};ITHit.oNS.MenuHandlers.prototype.Restart=function(urls,event){if(!urls||!urls.length)return false;this._Controller._Upload().Restart(urls)};
ITHit.oNS.MenuHandlers.prototype.ShowUploadErrors=function(urls,event){if(!urls||!urls.length)return false;this._Controller.ShowUploadErrors(urls[0])};
ITHit.oNS.MenuHandlers.prototype.ItemProperties=function(items,event){if(1!=items.length)return false;var item=items[0],itemName=item.DisplayName,utilsNs=ITHit.WebDAV.Client.AjaxFileBrowser.Render.Utils,url=ITHit.Events.DispatchEvent(this,"OnGetAbsolutePath",item.Item.Href)||item.Item.Href;ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.ShowItemInfo(url,itemName,item.ResourceType,item.ContentLength,utilsNs.FormatDate(item.CreationDate),utilsNs.FormatDate(item.LastModified),item.Item.AvailableBytes,
item.Item.UsedBytes)};ITHit.oNS.MenuHandlers.prototype.toString=function(){return this._ClassId};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser.KeyboardShortcuts");
ITHit.oNS.BindTable={Windows:{Cancel:"Esc",Copy:"Ctrl + C, Ctrl + c",Ctrl:"Ctrl",Cut:"Ctrl + X, Ctrl + x",Delete:"Delete",Enter:"Enter",Escape:"Esc",DnDCopyMode:"Ctrl",HistoryGoBack:"Backspace",Info:"Alt + Enter, Ctrl + I, Ctrl + i",NewFolder:"Ctrl + N, Ctrl + n",OpenItem:"Enter",Paste:"Ctrl + V, Ctrl + v",Redo:"Ctrl + Y, Ctrl + y",Refresh:"Ctrl + R, Ctrl + r",Rename:"F2",SelectAll:"Ctrl + A, Ctrl + a",Undo:"Ctrl + Z, Ctrl + z",Upload:"Ctrl + U, Ctrl + u",Up:"Up, Shift + Up, Ctrl + Up",Down:"Down, Shift + Down, Ctrl + Down",
Left:"Left, Shift + Left, Ctrl + Left",Right:"Right, Shift + Right, Ctrl + Right",Home:"Home, Shift + Home",End:"End, Shift + End",PageUp:"PageUp, Shift + PageUp",PageDown:"PageDown, Shift + PageDown"},MacOS:{Cancel:"Esc",Copy:"Command + C, Command + c",Cut:"Command + X, Command + x",Delete:"Delete",Enter:"Enter",Escape:"Esc",DnDCopyMode:"Ctrl",HistoryGoBack:"Backspace",Info:"Command + I, Command + i",NewFolder:"Shift + Command + N, Shift + Command + n",OpenItem:"Enter",Paste:"Command + V, Command + v",
Redo:"Shift + Command + Z, Shift + Command + z",Refresh:"Command + R, Command + r",Rename:"F2",SelectAll:"Command + A, Command + a",Undo:"Command + Z, Command + z",Upload:"Command + U, Command + u",Home:"Command + Left, Shift + Command + Left",End:"Command + Right, Shift + Command + Right",PageUp:"Command + Up, Shift + Command + Up",PageDown:"Command + Down, Shift + Command + Down",Up:"Up",Down:"Down",Left:"Left",Right:"Right"}};
ITHit.oNS.BindTable.RepeatableEvents={Up:true,Down:true,Left:true,Refresh:true,Right:true};ITHit.oNS.BindTable.DisabledEvents={Refresh:true,Up:true,Down:true};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser.KeyboardShortcuts");ITHit.oNS.KeyCodes={A:65,a:97,C:67,c:99,I:73,i:105,N:78,n:110,R:82,r:114,U:85,u:117,V:86,v:118,X:88,x:120,Y:89,y:121,Z:90,z:122,Delete:46,Enter:13,Esc:27,F2:113,Up:38,Down:40,Left:37,Right:39,Home:36,End:35,PageUp:33,PageDown:34,Backspace:8};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser.KeyboardShortcuts");
ITHit.oNS.ShortcutsParser=function(){var shortcutsNs=ITHit.WebDAV.Client.AjaxFileBrowser.KeyboardShortcuts;this._KeyCodes=shortcutsNs.KeyCodes;this._ClassId="ITHit.WebDAV.Client.AjaxFileBrowser.KeyboardShortcuts.ShortcutsParser_"+shortcutsNs.ShortcutsParser._Counter++};ITHit.oNS.ShortcutsParser._Counter=0;
ITHit.oNS.ShortcutsParser.prototype.GetParsedHashes=function(){var shortcutsNs=ITHit.WebDAV.Client.AjaxFileBrowser.KeyboardShortcuts,bindKeys=shortcutsNs.BindTable[ITHit.DetectOS.OS]||shortcutsNs.BindTable.Windows,hash={};for(var action in bindKeys){if(!bindKeys.hasOwnProperty(action))continue;var actionRecord=bindKeys[action].replace(/ /g,""),keyCombinations=actionRecord.split(",");for(var i=0;i<keyCombinations.length;i++){if(!keyCombinations[i])continue;var hashIndex=this.GetKeyCombinationHash(keyCombinations[i].split("+"));
hash[hashIndex]=action}}return hash};ITHit.oNS.ShortcutsParser.prototype.GetRepeatableEvents=function(){return ITHit.WebDAV.Client.AjaxFileBrowser.KeyboardShortcuts.BindTable.RepeatableEvents};ITHit.oNS.ShortcutsParser.prototype.GetDisabledEvents=function(){return ITHit.WebDAV.Client.AjaxFileBrowser.KeyboardShortcuts.BindTable.DisabledEvents};
ITHit.oNS.ShortcutsParser.prototype.GetKeyCombinationHash=function(keys){var ctrl=false;var shift=false;var alt=false;var command=false;var keyCode="";for(var i=0,l=keys.length;i<l;i++){var key=keys[i];switch(key){case "Ctrl":ctrl=true;break;case "Shift":shift=true;break;case "Alt":alt=true;break;case "Command":command=true;break;default:if(this._KeyCodes[key])keyCode=this._KeyCodes[key];else throw new ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions.AjaxFileBrowserException(ITHit.Phrases.AjaxFileBrowser.Exceptions.KeyCodeNotSpecified.Paste(key));
}}return this._GetKeyCombinationHash(shift,ctrl,alt,command,keyCode)};ITHit.oNS.ShortcutsParser.prototype._GetKeyCombinationHash=function(shift,ctrl,alt,command,code){return(shift?"t":"f")+(ctrl?"t":"f")+(alt?"t":"f")+(command?"t":"f")+code};
ITHit.oNS.ShortcutsParser.prototype.GetEventKeyCombinationHash=function(event){var keyCode=event.keyCode||String.fromCharCode(event.charCode).toUpperCase().charCodeAt(0);if(keyCode===16||keyCode===17||keyCode===18)keyCode="";return this._GetKeyCombinationHash(event.shiftKey,event.ctrlKey,event.altKey,event.metaKey,keyCode)};ITHit.oNS.ShortcutsParser.prototype.toString=function(){return this._ClassId};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser.KeyboardShortcuts");
ITHit.oNS.LinkedList=function(){this.Length=0;this.Current=null;this.Hash={}};ITHit.oNS.LinkedList.prototype.Add=function(name){if(this.Hash[name])if(this.Current.Name==name)return;else this.Delete(name);var rec={"Name":name,"Next":null};if(this.Current)this.Current.Next=rec;rec.Prev=this.Current;this.Hash[name]=true;this.Current=rec;this.Length++};
ITHit.oNS.LinkedList.prototype.Delete=function(name){if(!this.Hash[name])return;var cur=this.Current;while(cur){if(cur.Name==name){delete this.Hash[name];if(cur.Next)cur.Next.Prev=cur.Prev;if(cur.Prev)cur.Prev.Next=cur.Next;if(this.Current.Name==cur.Name)this.Current=cur.Prev;cur=null;this.Length--;break}cur=cur.Prev}};ITHit.oNS.LinkedList.prototype.GetCurrent=function(){if(this.Current)return this.Current.Name;else return null};ITHit.oNS.LinkedList.prototype.GetLength=function(){return this.Length};
ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser.Handlers");ITHit.oNS.KeyboardShortcutsHandlers=function(controller){this._Controller=controller;this.ZoneList=this.GetCoverageZones();ITHit.WebDAV.Client.AjaxFileBrowser.Handlers.KeyboardShortcutsHandlers.baseConstructor.call(this);this.base=ITHit.WebDAV.Client.AjaxFileBrowser.Handlers.KeyboardShortcutsHandlers.base};ITHit.Extend(ITHit.oNS.KeyboardShortcutsHandlers,ITHit.WebDAV.Client.AjaxFileBrowser.AjaxFileBrowserBase);
ITHit.oNS.KeyboardShortcutsHandlers.prototype._GetClassName=function(){return"ITHit.WebDAV.Client.AjaxFileBrowser.Handlers.KeyboardShortcutsHandlers"};ITHit.oNS.KeyboardShortcutsHandlers.prototype.GetCoverageZones=function(){return ITHit.WebDAV.Client.AjaxFileBrowser.Handlers.KeyboardShortcutsHandlers.ZonesActionsList};
ITHit.oNS.KeyboardShortcutsHandlers.ZonesActionsList={"General:UnitializedControl":{},"General:OpenedRoot":{"Down":"GridDown","HistoryGoBack":"HistoryGoBack","Left":"GridLeft","Paste":"PasteGridItems","Redo":"Redo","Refresh":"Refresh","Right":"GridRight","SelectAll":"SelectAll","Undo":"Undo","Up":"GridUp","Upload":"UploadFile"},"Actions:TreeNodeSelected":{"Copy":"SetCopyItems","Cut":"SetCutItems","Delete":"Delete","HistoryGoBack":"HistoryGoBack","Info":"ItemProperties","Paste":"PasteItems","Redo":"Redo",
"Refresh":"RefreshTreeNode","Rename":"Rename","SelectAll":"SelectAll","Undo":"Undo","Upload":"UploadFile"},"Actions:FileSelected":{"Copy":"CopySelected","Cut":"CutSelected","Delete":"ShowDeleteDialog","Down":"GridDown","HistoryGoBack":"HistoryGoBack","Info":"ItemProperties","Left":"GridLeft","Home":"GridHome","End":"GridEnd","PageUp":"GridPageUp","PageDown":"GridPageDown","OpenItem":"OpenItem","Paste":"PasteItemsOnFile","Redo":"Redo","Refresh":"Refresh","Rename":"Rename","Right":"GridRight","SelectAll":"SelectAll",
"Undo":"Undo","Up":"GridUp","Upload":"UpdateFile"},"Actions:FolderSelected":{"Copy":"CopySelected","Cut":"CutSelected","Delete":"ShowDeleteDialog","Down":"GridDown","HistoryGoBack":"HistoryGoBack","Info":"ItemProperties","Left":"GridLeft","Home":"GridHome","End":"GridEnd","PageUp":"GridPageUp","PageDown":"GridPageDown","OpenItem":"OpenItem","Paste":"PasteItems","Redo":"Redo","Refresh":"Refresh","Rename":"Rename","Right":"GridRight","SelectAll":"SelectAll","Undo":"Undo","Up":"GridUp","Upload":"UploadFile"},
"Actions:Multiselection":{"Copy":"CopySelected","Cut":"CutSelected","Delete":"ShowDeleteDialog","Down":"GridDown","HistoryGoBack":"HistoryGoBack","Left":"GridLeft","Home":"GridHome","End":"GridEnd","PageUp":"GridPageUp","PageDown":"GridPageDown","Paste":"PasteItemsOnMultiselection","Redo":"Redo","Refresh":"Refresh","Right":"GridRight","SelectAll":"SelectAll","Up":"GridUp","Undo":"Undo"},"Actions:InternalDragAndDrop":{},"Actions:BoxSelection":{"Cancel":"CancelBoxSelection","Redo":"Redo","SelectAll":"BoxSelectionSelectAll",
"Undo":"Undo"},"Dialog:CustomProperties":{"Delete":"DeleteCustomProperties"},"Dialog:Errors":{"Enter":"ShowDetailedError"}};
ITHit.oNS.KeyboardShortcutsHandlers.prototype.MakeAction=function(zone,action,event){var urls;switch(zone){case "Actions:TreeNodeSelected":urls=this._Controller._Tree().IsActive()?this._Controller._Tree().GetSelectedNodeUrl():null;break;case "Actions:FileSelected":case "Actions:FolderSelected":case "Actions:Multiselection":urls=this._Controller._Grid().GetSelectedItemsList();break;case "General:OpenedRoot":case "Actions:BoxSelection":urls=this._Controller._url;break}if(!ITHit.Utils.IsArray(urls))urls=
[urls];var items=[];for(var i=0,l=urls.length;i<l;i++){var item=this.DispatchEvent("OnGetItem",urls[i]);items.push(item)}var handler=this.ZoneList[zone][action];if(!ITHit.Utils.IsArray(items))items=[items];if(ITHit.Utils.IsFunction(this[handler])){ITHit.WebDAV.Client.AjaxFileBrowser.Controller._SetActive(this._Controller._index);this[handler](items,event)}};ITHit.oNS.KeyboardShortcutsHandlers.prototype.Ctrl=function(items,event){};
ITHit.oNS.KeyboardShortcutsHandlers.prototype.Shift=function(items,event){};ITHit.oNS.KeyboardShortcutsHandlers.prototype.PasteGridItems=function(items,event){if(!items||!items.length)return false;this._Controller.PasteGridItems();ITHit.Events.DispatchEvent(this._Controller,"OnMenuPaste",[items])};
ITHit.oNS.KeyboardShortcutsHandlers.prototype.PasteItems=function(items,event){if(!items||!items.length)return false;this._Controller.CopyMoveManager.PasteTo(items[0].Href);ITHit.Events.DispatchEvent(this._Controller,"OnMenuPaste",[items])};ITHit.oNS.KeyboardShortcutsHandlers.prototype.PasteItemsOnMultiselection=function(items,event){if(!items||!items.length)return false;var url=items[0].Href.replace(/\/$/,"").replace(/[^\/]+$/,"");this._PasteItems(items,url)};
ITHit.oNS.KeyboardShortcutsHandlers.prototype.PasteItemsOnFile=function(items,event){if(!items||!items.length)return false;var url=items[0].Href.replace(/[^\/]+$/,"");this._PasteItems(items,url)};ITHit.oNS.KeyboardShortcutsHandlers.prototype._PasteItems=function(items,destinationUrl){this._Controller.CopyMoveManager.PasteTo(destinationUrl);ITHit.Events.DispatchEvent(this._Controller,"OnMenuPaste",[items])};
ITHit.oNS.KeyboardShortcutsHandlers.prototype.NewFolderDialog=function(items,event){if(!items||!items.length)return false;ITHit.WebDAV.Client.AjaxFileBrowser.Render.RenderController.NewFolderDialog()};ITHit.oNS.KeyboardShortcutsHandlers.prototype.NewFolder=function(items,event){if(!items||!items.length)return false;ITHit.WebDAV.Client.AjaxFileBrowser.Render.RenderController.NewFolderDialog(items[0].Href,event)};
ITHit.oNS.KeyboardShortcutsHandlers.prototype.UploadFile=function(items,event){if(!items||!items.length)return false;this._Controller.UploadFileDialog(items[0].Href)};ITHit.oNS.KeyboardShortcutsHandlers.prototype.Refresh=function(items,event){this._Controller.Refresh()};ITHit.oNS.KeyboardShortcutsHandlers.prototype.RefreshTreeNode=function(items,event){if(!items||!items.length)return false;this._Controller.RefreshTreeNode(this._Controller._Tree().GetNodeByUrl(items[0].Href))};
ITHit.oNS.KeyboardShortcutsHandlers.prototype.Rename=function(items,event){if(!items||!items.length)return false;var item=items[0];ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.Rename(item.Href,item.DisplayName,item.ResourceType)};ITHit.oNS.KeyboardShortcutsHandlers.prototype.ShowProperties=function(items,event){if(!items||!items.length)return false;ITHit.WebDAV.Client.AjaxFileBrowser.Controller.ShowPropertiesDialog(items[0].Href)};
ITHit.oNS.KeyboardShortcutsHandlers.prototype.Delete=function(items,event){if(!items||!items.length)return false;ITHit.WebDAV.Client.AjaxFileBrowser.Render.RenderController.ShowDeleteDialog(decodeURI(items[0].Href))};ITHit.oNS.KeyboardShortcutsHandlers.prototype.ShowDeleteDialog=function(items,event){if(!items||!items.length)return false;ITHit.WebDAV.Client.AjaxFileBrowser.Render.RenderController.ShowDeleteDialog()};
ITHit.oNS.KeyboardShortcutsHandlers.prototype.CopySelected=function(items,event){if(!items||!items.length)return false;this._Controller.CopyGridSelected();ITHit.Events.DispatchEvent(this._Controller,"OnMenuCopy",[items])};ITHit.oNS.KeyboardShortcutsHandlers.prototype.SetCopyItems=function(items,event){if(!items||!items.length)return false;this._Controller.CopyMoveManager.CopyItems([items[0].Href]);ITHit.Events.DispatchEvent(this._Controller,"OnMenuCopy",[items])};
ITHit.oNS.KeyboardShortcutsHandlers.prototype.CutSelected=function(items,event){if(!items||!items.length)return false;this._Controller.CutGridSelected();ITHit.Events.DispatchEvent(this._Controller,"OnMenuCut",[items])};ITHit.oNS.KeyboardShortcutsHandlers.prototype.SetCutItems=function(items,event){if(!items||!items.length)return false;this._Controller.CopyMoveManager.CutItems(items[0].Href);ITHit.Events.DispatchEvent(this._Controller,"OnMenuCut",[items])};
ITHit.oNS.KeyboardShortcutsHandlers.prototype.UpdateFile=function(items,event){if(!items||!items.length)return false;this._Controller.UploadFileDialog(items[0].Href,true)};ITHit.oNS.KeyboardShortcutsHandlers.prototype.OpenDocument=function(items,event){if(!items||!items.length)return false;this._Controller.OpenDocument(items[0].Href)};ITHit.oNS.KeyboardShortcutsHandlers.prototype.EditDocument=function(items,event){if(!items||!items.length)return false;this._Controller.EditDocument(items[0].Href)};
ITHit.oNS.KeyboardShortcutsHandlers.prototype.CancelUpload=function(urls,event){if(!urls||!urls.length)return false;this._Controller._Upload().CancelUpload(urls)};ITHit.oNS.KeyboardShortcutsHandlers.prototype.Restart=function(urls,event){if(!urls||!urls.length)return false;this._Controller._Upload().Restart(urls)};ITHit.oNS.KeyboardShortcutsHandlers.prototype.ShowUploadErrors=function(urls,event){if(!urls||!urls.length)return false;this._Controller.ShowUploadErrors(urls[0])};
ITHit.oNS.KeyboardShortcutsHandlers.prototype.CancelBoxSelection=function(event){this._Controller._BoxSelection.Cancel()};ITHit.oNS.KeyboardShortcutsHandlers.prototype.DeleteCustomProperties=function(event){ITHit.WebDAV.Client.AjaxFileBrowser.Render.RenderController.ShowDeletePropertiesDialog()};ITHit.oNS.KeyboardShortcutsHandlers.prototype.ShowDetailedError=function(event){this._Controller._error.ShowDetailedError()};
ITHit.oNS.KeyboardShortcutsHandlers.prototype.ItemProperties=function(items,event){if(1!=items.length)return false;var item=items[0],itemName=item.DisplayName,utilsNs=ITHit.WebDAV.Client.AjaxFileBrowser.Render.Utils,url=ITHit.Events.DispatchEvent(this,"OnGetAbsolutePath",item.Item.Href)||item.Item.Href;ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.ShowItemInfo(url,itemName,item.ResourceType,item.ContentLength,utilsNs.FormatDate(item.CreationDate),utilsNs.FormatDate(item.LastModified),item.Item.AvailableBytes,
item.Item.UsedBytes)};ITHit.oNS.KeyboardShortcutsHandlers.prototype.SelectAll=function(items,event){this._Controller._Grid().SelectAll()};ITHit.oNS.KeyboardShortcutsHandlers.prototype.BoxSelectionSelectAll=function(items,event){this._Controller._Grid().SelectAll()};ITHit.oNS.KeyboardShortcutsHandlers.prototype.GridUp=function(aItems,oEvent){this._Controller._Grid().KeyUp(aItems,oEvent)};
ITHit.oNS.KeyboardShortcutsHandlers.prototype.GridDown=function(aItems,oEvent){this._Controller._Grid().KeyDown(aItems,oEvent)};ITHit.oNS.KeyboardShortcutsHandlers.prototype.GridLeft=function(aItems,oEvent){this._Controller._Grid().KeyLeft(aItems,oEvent)};ITHit.oNS.KeyboardShortcutsHandlers.prototype.GridRight=function(aItems,oEvent){this._Controller._Grid().KeyRight(aItems,oEvent)};
ITHit.oNS.KeyboardShortcutsHandlers.prototype.GridHome=function(aItems,oEvent){this._Controller._Grid().KeyHome(aItems,oEvent)};ITHit.oNS.KeyboardShortcutsHandlers.prototype.GridEnd=function(aItems,oEvent){this._Controller._Grid().KeyEnd(aItems,oEvent)};ITHit.oNS.KeyboardShortcutsHandlers.prototype.GridPageUp=function(aItems,oEvent){this._Controller._Grid().KeyPageUp(aItems,oEvent)};
ITHit.oNS.KeyboardShortcutsHandlers.prototype.GridPageDown=function(aItems,oEvent){this._Controller._Grid().KeyPageDown(aItems,oEvent)};ITHit.oNS.KeyboardShortcutsHandlers.prototype.OpenItem=function(items,event){if(items.length>1)return;this._Controller._OpenGridItem(items[0])};ITHit.oNS.KeyboardShortcutsHandlers.prototype.Undo=function(){this._Controller.Commands.Undo()};ITHit.oNS.KeyboardShortcutsHandlers.prototype.Redo=function(){this._Controller.Commands.Redo()};
ITHit.oNS.KeyboardShortcutsHandlers.prototype.HistoryGoBack=function(items,event){this._Controller.HistoryGoBack()};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser.KeyboardShortcuts");ITHit.oNS.CoverageZones=function(){var keyShortcutsNs=ITHit.WebDAV.Client.AjaxFileBrowser.KeyboardShortcuts;this.UnitializedZone="General:UnitializedControl";this.Zone=new keyShortcutsNs.LinkedList;this._ClassId="ITHit.WebDAV.Client.AjaxFileBrowser.KeyboardShortcuts.CoverageZones"+keyShortcutsNs.CoverageZones._Counter++};
ITHit.oNS.CoverageZones._Counter=0;ITHit.oNS.CoverageZones.prototype.EnterZone=function(zone){this.Zone.Add(zone)};ITHit.oNS.CoverageZones.prototype.LeaveZone=function(zone){this.Zone.Delete(zone)};ITHit.oNS.CoverageZones.prototype.GetCurrentZone=function(){return this.Zone.GetCurrent()||this.UnitializedZone};ITHit.oNS.CoverageZones.prototype.GetCoverageZones=function(){return ITHit.WebDAV.Client.AjaxFileBrowser.Handlers.KeyboardShortcutsHandlers.ZonesActionsList};
ITHit.oNS.CoverageZones.prototype.toString=function(){return this._ClassId};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser.KeyboardShortcuts");
ITHit.oNS.ShortcutsController=function(element,controller,activeState){var ajaxbrowserNs=ITHit.WebDAV.Client.AjaxFileBrowser;shortcutsNs=ajaxbrowserNs.KeyboardShortcuts;this.ActiveState=activeState;this.Handlers=new ajaxbrowserNs.Handlers.KeyboardShortcutsHandlers(controller);this.CoverageZones=new shortcutsNs.CoverageZones;this.Shortcuts=new shortcutsNs.ShortcutsParser;this.ShortcutHash=this.Shortcuts.GetParsedHashes();this.ZoneActions=this.CoverageZones.GetCoverageZones();this.RepetableEvents=this.Shortcuts.GetRepeatableEvents();
this.DisabledEvents=this.Shortcuts.GetDisabledEvents();this.KPWorkaroundFlag=ITHit.DetectBrowser.IE;this.Cache={KeyHash:null,Zone:null,Disable:false,Recheck:true};this.Handlers.AddListener("OnGetItem","_OnGetItemHandler",this);ITHit.Events.AttachEvent(document,"onkeydown",ITHit.Utils.MakeScopeClosure(this,"OnKeyDownHandler"));ITHit.Events.AttachEvent(document,"onkeypress",ITHit.Utils.MakeScopeClosure(this,"OnKeyPressHandler"));ITHit.WebDAV.Client.AjaxFileBrowser.Handlers.KeyboardShortcutsHandlers.baseConstructor.call(this);
this.base=ITHit.WebDAV.Client.AjaxFileBrowser.Handlers.KeyboardShortcutsHandlers.base};ITHit.Extend(ITHit.oNS.ShortcutsController,ITHit.WebDAV.Client.AjaxFileBrowser.AjaxFileBrowserBase);ITHit.oNS.ShortcutsController.prototype._GetClassName=function(){return"ITHit.WebDAV.Client.AjaxFileBrowser.KeyboardShortcuts.ShortcutsController"};ITHit.oNS.ShortcutsController.prototype.EnterZone=function(zone){this.CoverageZones.EnterZone(zone);this.Cache.Recheck=true};
ITHit.oNS.ShortcutsController.prototype.LeaveZone=function(zone){this.CoverageZones.LeaveZone(zone);this.Cache.Zone=null;this.Cache.Recheck=true};ITHit.oNS.ShortcutsController.prototype.NewItemSelected=function(){this.Cache.Recheck=true};ITHit.oNS.ShortcutsController.prototype.OnKeyPressHandler=function(event){event=event||window.event;if(!this.ActiveState)return;var keyHash=this.Shortcuts.GetEventKeyCombinationHash(event),hashAction=this.ShortcutHash[keyHash];if(hashAction&&this.DisabledEvents[hashAction])ITHit.Events.Stop(event)};
ITHit.oNS.ShortcutsController.prototype.OnKeyDownHandler=function(event){event=event||window.event;if(ITHit.WebDAV.Client.AjaxFileBrowser.Render.RenderController.isFormFieldTarget(event))return true;if(!this.ActiveState)return;return this._CallAction(event)};
ITHit.oNS.ShortcutsController.prototype._CallAction=function(event){if(this.KPWorkaroundFlag)this.OnKeyPressHandler(event);var keyHash=this.Shortcuts.GetEventKeyCombinationHash(event),hashAction=this.ShortcutHash[keyHash],curZone=this.CoverageZones.GetCurrentZone(),cache=this.Cache;if(!hashAction||!this.RepetableEvents[hashAction]&&keyHash==cache.KeyHash&&cache.Zone&&!cache.Recheck){if(hashAction&&this.Cache.Disable){ITHit.Events.Stop(event);return true}return}this.Cache.Zone=this.CoverageZones.GetCurrentZone();
this.Cache.KeyHash=keyHash;this.Cache.Disable=false;var actionZone=this.ZoneActions[this.Cache.Zone];if(actionZone&&actionZone[hashAction]){this.Handlers.MakeAction(this.Cache.Zone,hashAction,event);this.Cache.Disable=true;ITHit.Events.Stop(event);return true}};
ITHit.oNS.ShortcutsController.prototype.OnKeyUpHandler=function(event){var event=event||window.event;if(ITHit.WebDAV.Client.AjaxFileBrowser.Render.RenderController.isFormFieldTarget(event))return true;if(!this.ActiveState)return;if(!this._CallAction(event))this.DispatchEvent("OnKeyUp",event)};ITHit.oNS.ShortcutsController.prototype.OnStateChangeHandler=function(activeState){this.ActiveState=activeState};
ITHit.oNS.ShortcutsController.prototype._OnGetItemHandler=function(url){return this.DispatchEvent("OnGetItem",url)};
ITHit.DefineClass("ITHit.WebDAV.Client.AjaxFileBrowser.Render.CommandsInfo.ItemView",null,{_Node:null,_Command:null,constructor:function(oCommand,oRootNode){this._Command=oCommand;this._Render(oRootNode)},GetNode:function(){return this._Node},UpdateProgress:function(oProgressInfo){ITHit.Components.dojo.query(".progress div",this._Node)[0].style.width=oProgressInfo.GetPercent()+"%";ITHit.Components.dojo.query(".status",this._Node)[0].innerHTML=ITHit.Utils.HtmlEscape(oProgressInfo.GetText());this._UpdateTitle()},
_Render:function(oRootNode){this._Node=ITHit.Utils.CreateDOMElement({nodeName:"LI",childNodes:[{nodeName:"DIV",className:"status-container",childNodes:[{nodeName:"DIV",text:"Loading...",className:"title"},{nodeName:"DIV",text:"&nbsp;",className:"status"},{nodeName:"DIV",className:"progress",childNodes:[{nodeName:"DIV"}]}]},{nodeName:"A",href:"javascript:void(0)",className:"button-cancel iconCancel"}]});oRootNode.appendChild(this._Node);this._UpdateTitle();ITHit.Components.dojo.query(".button-cancel",
this._Node)[0].onclick=ITHit.Utils.MakeScopeClosure(this,"_OnCancel")},_UpdateTitle:function(){var sTitle=this._Command.GetProcessTitle();if(this._Command.IsCancelled())sTitle=ITHit.Phrases.AjaxFileBrowser.Commands.CancelCommand.Paste(sTitle);ITHit.Components.dojo.query(".title",this._Node)[0].innerHTML=ITHit.Utils.HtmlEscape(sTitle)},_OnCancel:function(oEvent){oEvent.preventDefault();this._Node.className+="cancelled";this._UpdateTitle();this._Command.Abort()}});
(function(){var self=ITHit.DefineClass("ITHit.WebDAV.Client.AjaxFileBrowser.Render.CommandsInfo.ContainerView",null,{_Node:null,_UlNode:null,_Controller:null,_InfoItems:null,_LazyCreateTimers:null,constructor:function(oController,oRootNode){this._Controller=oController;this._InfoItems={};this._LazyCreateTimers={};this._Render(oRootNode)},_Render:function(oRootNode){this._Node=ITHit.Utils.CreateDOMElement({nodeName:"DIV",className:"commands-info",childNodes:[{nodeName:"UL"}]});oRootNode.appendChild(this._Node);
this._UlNode=ITHit.Components.dojo.query("ul",this._Node)[0];ITHit.Events.AddListener(this._Controller.Commands,"OnCommandStart","_OnCommandStart",this);ITHit.Events.AddListener(this._Controller.Commands,"OnCommandProgress","_OnCommandProgress",this);ITHit.Events.AddListener(this._Controller.Commands,"OnCommandFinish","_OnCommandFinish",this)},_RefreshVisible:function(){var hasItems=false;for(var sCommandId in this._InfoItems)if(this._InfoItems.hasOwnProperty(sCommandId)){hasItems=true;break}},_OnCommandStart:function(oCommand){var that=
this;var sCommandId=oCommand.GetUniqueId();if(oCommand instanceof ITHit.WebDAV.Client.AjaxFileBrowser.Commands.LoadSupportedFeaturesCommand)return;this._LazyCreateTimers[sCommandId]=setTimeout(function(){that._InfoItems[sCommandId]=new ITHit.WebDAV.Client.AjaxFileBrowser.Render.CommandsInfo.ItemView(oCommand,that._UlNode);that._RefreshVisible()},self.LAZY_CREATE_DELAY)},_OnCommandProgress:function(oCommand,oProgressInfo){var oInfoItemView=this._InfoItems[oCommand.GetUniqueId()];if(!oInfoItemView)return;
oInfoItemView.UpdateProgress(oProgressInfo)},_OnCommandFinish:function(oCommand){var sCommandId=oCommand.GetUniqueId();if(this._LazyCreateTimers[sCommandId])clearTimeout(this._LazyCreateTimers[sCommandId]);var oItemView=this._InfoItems[sCommandId];if(oItemView){this._UlNode.removeChild(oItemView.GetNode());delete this._InfoItems[sCommandId]}this._RefreshVisible()}},{LAZY_CREATE_DELAY:10})})();ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser.Render");
ITHit.oNS.RenderController=function(){new ITHit.WebDAV.Client.AjaxFileBrowser.Render.Utils(this.FileIconsPath);var browserNs=ITHit.WebDAV.Client.AjaxFileBrowser,renderNs=browserNs.Render,menuHandlers=new browserNs.Handlers.MenuHandlers(this);this.Flags={DispatchSelectedItemsChanged:true};this._showFolders=false;this._showToolbar=true;this._showLeftPane=true;this._showQuickUploadPane=true;this._leftPaneStyle="tree";this._url="";this._DragDrop=new renderNs.DragDrop.DragController(this.FileIconsPath,
this.ImageTypes,this.Settings.GetRootNode());this._dialog=new renderNs.Dialog(this);this._tree=new renderNs.TreeController(this._control._GetTreeId(),this);this._contextMenu=new renderNs.MenuController(this,menuHandlers);this._upload=new browserNs.UploadController("ithit_interface_file_upload_"+this._index,"ithit_interface_file_uploadInfo_"+this._index,this._url,this,this.ProgressRefreshTime);this._State=new renderNs.StateController(this.Settings.GetRootNode());this._Shortcuts=new browserNs.KeyboardShortcuts.ShortcutsController(this.Settings.GetRootNode(),
this,this._State.GetState());this._grid=new renderNs.DataView.DataViewAdapter("ithit_interface_folderView_"+this._index,this._MofifyInstructions.FilesView,this.ImageTypes,this.PreventImageCaching,this.ShowImagePreview,this._ContextHelp);this._BoxSelection=new renderNs.BoxSelection.SelectionController(this.Settings.GetRootNode(),"ithit_interface_folderView_"+this._index);ITHit.Events.AddListener(menuHandlers,"OnGetAbsolutePath","OnGetAbsolutePathHandler",this);ITHit.Events.AddListener(this._contextMenu,
"OnTreeNodeMenuOpen","TreeNodeMenuOpenHandler",this);ITHit.Events.AddListener(this._contextMenu,"OnTreeNodeMenuClose","TreeNodeMenuCloseHandler",this);this._upload.AddListener("OnLoad","UploadCompliteHandler",this);this._upload.AddListener("OnContextMenu","OnUploadItemContextMenuHandler",this);this._upload.AddListener("OnRowDoubleClick","OnUploadItemDoubleClickHandler",this);ITHit.Events.AddListener(this,"OnSetFileIconsPath","OnSetFileIconsPathHandler",this._DragDrop);ITHit.Events.AddListener(this,
"OnSetImageTypes","OnSetImageTypesHandler",this._DragDrop);ITHit.Events.AddListener(this._BoxSelection,"OnBoxSelectionStart","OnBoxSelectionStartHandler",this);ITHit.Events.AddListener(this._BoxSelection,"OnBoxSelect","OnBoxSelectHandler",this);ITHit.Events.AddListener(this._BoxSelection,"OnGetSelectionContext","OnGetSelectionContextHandler",this);ITHit.Events.AddListener(this._BoxSelection,"OnBoxSelectionEnd","OnBoxSelectionEndHandler",this);ITHit.Events.AddListener(this._BoxSelection,"OnScrollTop",
"OnScrollTopHandler",this);ITHit.Events.AddListener(this._BoxSelection,"OnScrollLeft","OnScrollLeftHandler",this);ITHit.Events.AddListener(this._BoxSelection,"OnMouseDown","SetActiveState",this);ITHit.Events.AddListener(this._DragDrop,"OnGetDragDropTargetDataByElement","OnGetDragDropTargetDataHandler",this);ITHit.Events.AddListener(this._DragDrop,"OnDragSuccess","OnDragSuccessHandler",this);ITHit.Events.AddListener(this._DragDrop,"OnDragFail","OnDragFailHandler",this);ITHit.Events.AddListener(this._DragDrop,
"OnDragStart","OnDragStartHandler",this);ITHit.Events.AddListener(this._DragDrop,"OnDragEnd","OnDragEndHandler",this);ITHit.Events.AddListener(this._State,"OnStateChange","OnStateChangeHandler",this._Shortcuts);this._grid.AddListener("OnGetAbsolutePath","OnGetAbsolutePathHandler",this);this._grid.AddListener("OnSelectionChanged","OnSelectionChangedHandler",this);this._grid.AddListener("OnRowContextMenu","OnRowContextMenuHandler",this);this._grid.AddListener("OnRowClick","OnRowClickHandler",this);
this._grid.AddListener("OnGridMouseDown","_OnGridMouseDownHandler",this);this._grid.AddListener("OnRowDoubleClick","OpenGridItem",this);ITHit.Events.AddListener(this,"OnSetImageTypes","SetImageTypes",this._grid);ITHit.Events.AddListener(this,"OnSetShowImagePreview","SetShowImagePreview",this._grid);this._Shortcuts.AddListener("OnGetItem","OnGetItemHandler",this);this._UploadRefreshTimer=null;this._FilesUploadedWithoutRefresh=0;this._hiddenTree;this._hiddenFilesView;this._mainContainer;this._hiddenToolbar;
this._addressBarElement=document.getElementById("ithit_interface_address_bar_"+this._index);this._hiddenAddressBar;this._hiddenUploadPanel;this._hiddenUploadProgressPanel;this.CopyMoveManager=new this._ns.CopyMoveManager(this);ITHit.Events.AddListener(this.CopyMoveManager,"OnCopyComplite","UpdateOnCopyMove",this);ITHit.Events.AddListener(this.CopyMoveManager,"OnMoveComplite","UpdateOnCopyMove",this);ITHit.Events.AddListener(this.CopyMoveManager,"OnCancel","UpdateOnCopyMove",this);var that=this;ITHit.Events.AddListener(this.CopyMoveManager,
"OnOverwrite",function(sAbsoluteUrl){ITHit.WebDAV.Client.AjaxFileBrowser.Controller._SetActive(that._index);ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.CopyMoveOverwrite(sAbsoluteUrl)});this.CommandsInfo=new ITHit.WebDAV.Client.AjaxFileBrowser.Render.CommandsInfo.ContainerView(this,document.getElementById("ithit_interface_content_container_"+this._index));this.Errors=new ITHit.WebDAV.Client.AjaxFileBrowser.Render.Error.ErrorController(this);ITHit.Events.AddListener(this.Commands,"OnCommandError",
function(oCommand,aErrors){if(!oCommand.HaveErrorHandlers())that.Errors.ShowCommandErrors(aErrors)});this.SearchBar=new ITHit.WebDAV.Client.AjaxFileBrowser.Render.SearchBarView(this,"ithit_interface_search_bar_"+this._index);this._error=new renderNs.ErrorDialog(this.ShowUploadErrorDetails);this._classId="ITHit.WebDAV.Client.AjaxFileBrowser.Render.RenderController_"+renderNs.RenderController._counter++};ITHit.oNS.RenderController._counter=0;
ITHit.oNS.RenderController.prototype.UploadCompliteHandler=function(sEvent,sUrl){};ITHit.oNS.RenderController.prototype._Tree=function(){return this._tree};ITHit.oNS.RenderController.prototype.Tree=function(){return this._tree};ITHit.oNS.RenderController.prototype._Grid=function(){return this._grid};ITHit.oNS.RenderController.prototype._Upload=function(){return this._upload};ITHit.oNS.RenderController.prototype.OnGetDragDropTargetDataHandler=function(){};
ITHit.oNS.RenderController.prototype.OnDragStartHandler=function(){};ITHit.oNS.RenderController.prototype.OnDragSuccessHandler=function(){};ITHit.oNS.RenderController.prototype.OnDragFailHandler=function(){};ITHit.oNS.RenderController.prototype.OnDragEndHandler=function(){};ITHit.oNS.RenderController.prototype.OnBoxSelectionStartHandler=function(){};ITHit.oNS.RenderController.prototype.OnBoxSelectHandler=function(){};ITHit.oNS.RenderController.prototype.OnGetSelectionContextHandler=function(){};
ITHit.oNS.RenderController.prototype.OnBoxSelectionEndHandler=function(){};ITHit.oNS.RenderController.prototype.OnScrollTopHandler=function(){};ITHit.oNS.RenderController.prototype.OnScrollLeftHandler=function(){};ITHit.oNS.RenderController.prototype.OnGetAbsolutePathHandler=function(){};ITHit.oNS.RenderController.prototype._OnGridMouseDownHandler=function(){};
ITHit.oNS.RenderController.prototype.OnUploadItemContextMenuHandler=function(event,urls){var target=ITHit.Events.GetTarget(event);this._contextMenu.ShowUploadManagerContextMenu(event,target,urls)};ITHit.oNS.RenderController.prototype.OnUploadItemDoubleClickHandler=function(event,url){this.ShowUploadErrors(url)};ITHit.oNS.RenderController.prototype.SetActiveState=function(){};
ITHit.oNS.RenderController.prototype.OnSelectionChangedHandler=function(){var selectedCount=this._Grid().GetSelectedCount();switch(selectedCount){case 0:if(this._CurrentZone){this.LeaveZone(this._CurrentZone);this._CurrentZone=null}break;case 1:var item=this.GetSelectedItems()[0];if(item.ResourceType==ITHit.WebDAV.Client.ResourceType.Folder){if(this._CurrentZone&&this._CurrentZone!=="Actions:FolderSelected")this.LeaveZone(this._CurrentZone);this._CurrentZone="Actions:FolderSelected"}else{if(this._CurrentZone&&
this._CurrentZone!=="Actions:FileSelected")this.LeaveZone(this._CurrentZone);this._CurrentZone="Actions:FileSelected"}break;default:if(this._CurrentZone&&this._CurrentZone!=="Actions:Multiselection")this.LeaveZone(this._CurrentZone);this._CurrentZone="Actions:Multiselection"}if(this._CurrentZone){this._Shortcuts.NewItemSelected();this.EnterZone(this._CurrentZone)}this.SetTreeInactive();ITHit.Events.DispatchEvent(this,"_OnSelectedItemsChanged",this);if(this.Flags.DispatchSelectedItemsChanged)ITHit.Events.DispatchEvent(this,
"OnSelectedItemsChanged",this)};ITHit.oNS.RenderController.prototype.OnRowClickHandler=function(event,url){this.Flags.DispatchSelectedItemsChanged=true};
ITHit.oNS.RenderController.prototype.OnRowContextMenuHandler=function(event,url){this.Flags.DispatchSelectedItemsChanged=true;var target=ITHit.WebDAV.Client.AjaxFileBrowser.Controller._GetEventTarget(event);if(!this._grid.IsSelected(url)){this._grid.DeselectAll();this._grid.SetSelectedByUrl(url,true)}var selectedUrls=this._grid.GetSelectedItemsList(),items=[];for(var i=0,l=selectedUrls.length;i<l;i++)items.push(this._GetItem(selectedUrls[i]));this._contextMenu.ShowGridContextMenu(event,target,items)};
ITHit.oNS.RenderController.prototype.TreeNodeMenuOpenHandler=function(event){var element=event.target?event.target:event.srcElement;this._tree.SetNodeOverStyle(element,true)};ITHit.oNS.RenderController.prototype.TreeNodeMenuCloseHandler=function(event){var element=event.target?event.target:event.srcElement;this._tree.SetNodeOverStyle(element,false)};
ITHit.oNS.RenderController.prototype.SetViewMode=function(sViewMode){if(typeof sViewMode==="number"){var oOldViewModeNames={0:"details",11:"medium",12:"large",13:"extralarge"};if(oOldViewModeNames[sViewMode])sViewMode=oOldViewModeNames[sViewMode]}sViewMode=sViewMode.toLowerCase();var bIsFined=false;var oViewModes=ITHit.WebDAV.Client.AjaxFileBrowser.Render.ViewModes;for(var name in oViewModes)if(oViewModes.hasOwnProperty(name)&&oViewModes[name]===sViewMode)bIsFined=true;if(!bIsFined)throw new Error("Not found view mode `"+
sViewMode+"`. Available values: `details`, `medium`, `large`, `extralarge`.");this._grid.SetViewMode(sViewMode);ITHit.Events.DispatchEvent(this,"OnViewModeChanged",sViewMode)};ITHit.oNS.RenderController.prototype.GetViewMode=function(){return this._grid.GetViewMode()};
ITHit.oNS.RenderController.prototype.UpdateOnCopyMove=function(aSource,sDestination,sAction,bUpdated){if(false===bUpdated)return;var bDoNotUpdateGrid;if("move"===sAction){if(!/\/$/.test(aSource[0]))var sUrl=aSource[0].replace(/[^\/]+$/,"");else var sUrl=ITHit.WebDAV.Client.HierarchyItem.GetFolderParentUri(aSource[0]);var bPreventSaveHistory=aSource[0]!==this._url;var bDoNotUpdatePath=sUrl!==this._url&&bPreventSaveHistory;this.OpenFolderAsync(sUrl,bDoNotUpdatePath,bPreventSaveHistory)}bDoNotUpdateGrid=
sDestination!==this._url;this.OpenFolderAsync(sDestination,bDoNotUpdateGrid,true)};
ITHit.oNS.RenderController.prototype.RenderGridItems=function(oItem,oItems,bDoNotUpdateGrid,bIsSearchRequest){var sPath=oItem.Href;if(!bDoNotUpdateGrid){this._url=sPath;this._CurrentItem=oItem;this._upload.SetUploadUrl(this._url);this._upload.EnableForm();this._grid.RenderItems(oItems);if(this._grid.CurrentView instanceof ITHit.WebDAV.Client.AjaxFileBrowser.Render.DataView.GridView.GridController)this._grid.CurrentView.ToggleFolderColumn(!!bIsSearchRequest);this._contextMenu.ToggleVisible("OpenLocation",
bIsSearchRequest)}else if(this._url.toLowerCase()==sPath.toLowerCase()){this._grid.RenderItems(oItems);if(this._grid.CurrentView instanceof ITHit.WebDAV.Client.AjaxFileBrowser.Render.DataView.GridView.GridController)this._grid.CurrentView.ToggleFolderColumn(!!bIsSearchRequest);this._contextMenu.ToggleVisible("OpenLocation",bIsSearchRequest)}if(!bDoNotUpdateGrid&&!bIsSearchRequest)this._tree.SetSelectedNode(oItem.Href);if(this._baseUrl.toLowerCase()!=oItem.Href.toLowerCase())this._tree.OpenToFolder(ITHit.WebDAV.Client.HierarchyItem.GetFolderParentUri(oItem.Href));
if(!this._hiddenTree)this._tree.FetchTree(oItem.Href)};ITHit.oNS.RenderController.prototype._SetAddressBarValue=function(sValue){this._addressBarElement.value=sValue};ITHit.oNS.RenderController.ShowDeleteDialog=function(sUrl){ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.Delete(sUrl)};
ITHit.oNS.RenderController.prototype.UpdateItem=function(sUrl,oItem){if(oItem.ResourceType==ITHit.WebDAV.Client.ResourceType.Folder){oItem.Href=oItem.Href.replace(/\/?$/,"/");this._tree.UpdateNode(sUrl,oItem.Href,oItem.DisplayName)}var oRegExp=new RegExp("^"+this._url+"[^/]+/?$");if(oRegExp.test(oItem.Href))this._grid.UpdateItem(sUrl,oItem.Href,oItem.DisplayName,oItem.LastModified)};ITHit.oNS.RenderController.prototype.ToggleTreeView=function(){this.SetShowFolders(!this.GetShowFolders())};
ITHit.oNS.RenderController.prototype.GetShowFolders=function(){return!this._hiddenTree};
ITHit.oNS.RenderController.prototype.SetShowFolders=function(bVisible){var oFolders=ITHit.Components.dijit.byId("ithit_interface_folders_"+this._index);oFolders.setChecked(bVisible);if(this._hiddenTree&&!bVisible||!this._hiddenTree&&bVisible)return;if(bVisible)this._SetShowMainContainer(true);var oContainer=ITHit.Components.dijit.byId("ithit_interface_content_splitContainer_"+this._index);if(!this._hiddenTree){this._hiddenTree=oContainer.getChildren()[0];oContainer.removeChild(this._hiddenTree);if(!this.GetShowFilesView())this._SetShowMainContainer(false)}else{oContainer.addChild(this._hiddenTree,
0);this._hiddenTree=null}oContainer.layout();if(!this._hiddenTree)this._tree.FetchTree(this._url)};ITHit.oNS.RenderController.prototype.GetShowFilesView=function(){return!this._hiddenFilesView};
ITHit.oNS.RenderController.prototype.SetShowFilesView=function(bVisible){if(this._hiddenFilesView&&!bVisible||!this._hiddenFilesView&&bVisible)return;if(bVisible)this._SetShowMainContainer(true);var oContainer=ITHit.Components.dijit.byId("ithit_interface_content_splitContainer_"+this._index);var iIndex=this.GetShowFolders()?1:0;if(!this._hiddenFilesView){this._hiddenFilesView=oContainer.getChildren()[iIndex];oContainer.removeChild(this._hiddenFilesView);if(!this.GetShowFolders())this._SetShowMainContainer(false)}else{if(ITHit.DetectBrowser.IE)iIndex+=
1;oContainer.addChild(this._hiddenFilesView,iIndex);this._hiddenFilesView=null}oContainer.layout()};ITHit.oNS.RenderController.prototype._GetShowMainContainer=function(bVisible){return!this._mainContainer};
ITHit.oNS.RenderController.prototype._SetShowMainContainer=function(bVisible){if(this._mainContainer&&!bVisible||!this._mainContainer&&bVisible)return;var oContainer=ITHit.Components.dijit.byId("ithit_interface_content_verticalSplitContainer_"+this._index);if(!this._mainContainer){this._mainContainer=oContainer.getChildren()[0];oContainer.removeChild(this._mainContainer)}else{oContainer.addChild(this._mainContainer,0);this._mainContainer=null}oContainer.layout()};
ITHit.oNS.RenderController.prototype.GetShowToolbar=function(){return!this._hiddenToolbar};
ITHit.oNS.RenderController.prototype.SetShowToolbar=function(bVisible){if(this._hiddenToolbar&&!bVisible||!this._hiddenToolbar&&bVisible)return;var oContainer=ITHit.Components.dijit.byId("ithit_interface_content_container_"+this._index);if(!this._hiddenToolbar){this._hiddenToolbar=oContainer.getChildren()[0];oContainer.removeChild(this._hiddenToolbar)}else{oContainer.addChild(this._hiddenToolbar,0);this._hiddenToolbar=null}oContainer.layout()};
ITHit.oNS.RenderController.prototype.RefreshToolbarLayout=function(){var oContainer=ITHit.Components.dijit.byId("ithit_interface_content_container_"+this._index);oContainer.layout()};ITHit.oNS.RenderController.prototype.GetShowAddressBar=function(){return!this._hiddenAddressBar};
ITHit.oNS.RenderController.prototype.SetShowAddressBar=function(bVisible){if(this._hiddenAddressBar&&!bVisible||!this._hiddenAddressBar&&bVisible)return;var oContainer=ITHit.Components.dijit.byId("ithit_interface_content_container_"+this._index);var iIndex=this.GetShowToolbar()?1:0;if(!this._hiddenAddressBar){this._hiddenAddressBar=oContainer.getChildren()[iIndex];oContainer.removeChild(this._hiddenAddressBar)}else{oContainer.addChild(this._hiddenAddressBar,iIndex);this._hiddenAddressBar=null}oContainer.layout()};
ITHit.oNS.RenderController.prototype.GetShowUploadPanel=function(){return!this._hiddenUploadPanel};
ITHit.oNS.RenderController.prototype.SetShowUploadPanel=function(bVisible){if(this._hiddenUploadPanel&&!bVisible||!this._hiddenUploadPanel&&bVisible)return;var oContainer=ITHit.Components.dijit.byId("ithit_interface_mainPanel_"+this._index);var iIndex=1;if(!this._hiddenUploadPanel){this._hiddenUploadPanel=oContainer.getChildren()[iIndex];oContainer.removeChild(this._hiddenUploadPanel)}else{if(ITHit.DetectBrowser.IE)iIndex+=1;oContainer.addChild(this._hiddenUploadPanel,iIndex);this._hiddenUploadPanel=
null}oContainer.layout()};ITHit.oNS.RenderController.prototype.GetShowUploadProgressPanel=function(){return!this._hiddenUploadProgressPanel};
ITHit.oNS.RenderController.prototype.SetShowUploadProgressPanel=function(bVisible){if(this._hiddenUploadProgressPanel&&!bVisible||!this._hiddenUploadProgressPanel&&bVisible)return;var oContainer=ITHit.Components.dijit.byId("ithit_interface_content_verticalSplitContainer_"+this._index);var iIndex=this._GetShowMainContainer()?1:0;var aChildren=oContainer.getChildren();if(!this._hiddenUploadProgressPanel){this._hiddenUploadProgressPanel=aChildren[iIndex];oContainer.removeChild(this._hiddenUploadProgressPanel)}else{if(ITHit.DetectBrowser.IE)iIndex+=
1;oContainer.addChild(this._hiddenUploadProgressPanel,iIndex);this._hiddenUploadProgressPanel=null}oContainer.layout()};ITHit.oNS.RenderController.prototype.RefreshTreeNode=function(oNode){var _tree=this._tree;setTimeout(function(){_tree.RefreshNode(oNode)},1)};
ITHit.oNS.RenderController.NewFolderDialog=function(sUrl){var oNs=ITHit.WebDAV.Client.AjaxFileBrowser;var oControllerNs=oNs.Controller;var iIndex=oControllerNs._GetActive();var oController=oControllerNs.GetByIndex(iIndex);var sUrl=sUrl||oController._url||"";if(!sUrl)return false;oNs.Render.Dialog.NewFolder(sUrl)};ITHit.oNS.RenderController.ShowPropertiesDialog=function(){ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.ShowPropertiesDialog()};ITHit.oNS.RenderController.ShowAddPropertyDialog=function(){ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.AddProperty()};
ITHit.oNS.RenderController.EnablePropertyControlButtons=function(){if(1==ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.ViewProperties._grid.GetSelectedCount()){ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.SwitchPropertyEditButton(true);ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.SwitchPropertyDeleteButton(true)}else{ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.SwitchPropertyEditButton(false);ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.SwitchPropertyDeleteButton(false)}};
ITHit.oNS.RenderController.EnableVersionControlButtons=function(){var iSelectedCount=ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.Versions._grid.GetSelectedCount();if(iSelectedCount===1){ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.SwitchVersionUpdateButton(true);ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.SwitchVersionDownloadButton(true)}else{ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.SwitchVersionUpdateButton(false);ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.SwitchVersionDownloadButton(false)}if(iSelectedCount>
0)ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.SwitchVersionRemoveButton(true);else ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.SwitchVersionRemoveButton(false)};ITHit.oNS.RenderController.ShowDeleteVersionDialog=function(){if(!ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.Versions._grid.GetSelectedCount())return false;ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.DeleteVersion()};
ITHit.oNS.RenderController.ShowDeletePropertiesDialog=function(){if(!ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.ViewProperties._grid.GetSelectedCount())return false;ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.DeleteProperties()};
ITHit.oNS.RenderController.ShowThumbnail=function(oImg,iSize){iSize=parseInt(iSize);if(oImg.height>iSize&&oImg.width>iSize)if(oImg.height>=oImg.width){oImg.style.height=iSize+"px";oImg.style.width="auto"}else{oImg.style.width=iSize+"px";oImg.style.height="auto"}else if(oImg.height>iSize||oImg.width>iSize)if(oImg.height>iSize){oImg.style.width="auto";oImg.style.height=iSize+"px"}else{oImg.style.width=iSize+"px";oImg.style.height="auto"}oImg.style.visibility="visible";oImg.onload=null};
ITHit.oNS.RenderController.prototype.GetControl=function(sControlId){if(0===sControlId.indexOf(this._ElementsIdPrefix))sControlId+="_"+this.GetIndex();return new ITHit.WebDAV.Client.AjaxFileBrowser.Render.InterfaceElements(sControlId)};ITHit.oNS.RenderController.prototype.SetTreeActive=function(){if(!this._tree.IsActive()){this._tree.SetActive();this.EnterZone("Actions:TreeNodeSelected")}};
ITHit.oNS.RenderController.prototype.SetTreeInactive=function(){if(this._tree.IsActive()){this._tree.SetInactive();this.LeaveZone("Actions:TreeNodeSelected")}};ITHit.oNS.RenderController.isFormFieldTarget=function(event){event=event||window.event;var oElement=event.target||event.srcElement;var sTagName=oElement.tagName.toLowerCase();return oElement.className.indexOf("dojoxGridHiddenFocus")===-1&&(sTagName==="input"||sTagName==="textarea")};ITHit.oNS.RenderController.prototype.toString=function(){return this._classId};
ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser.Plugins");
ITHit.oNS.JavaEditDocument=function(sPluginsPath,sUrl,sMountUrl,bOpenFolder,oContainer){var pramNameUrl=bOpenFolder?"folder":"file";if(document.mountApplet!==undefined&&document.mountApplet.open)try{if(bOpenFolder)document.mountApplet.open(sMountUrl,null,sUrl);else document.mountApplet.open(sMountUrl,sUrl,null);return}catch(ex){if(document.mountApplet!=null)document.mountApplet.parentElement.outerHTML=""}if(this._AppletContainer==null){var appletContainer={nodeName:"div",style:{width:"0px",height:"0px",
position:"absolute",overflow:"hidden",top:"-1000px",left:"-1000px"}};this._AppletContainer=ITHit.Utils.CreateDOMElement(appletContainer);oContainer.appendChild(this._AppletContainer)}var applet;if(ITHit.DetectBrowser.IE)applet='<object name="mountApplet"'+' classid="clsid:8AD9C840-044E-11D1-B3E9-00805F499D93"'+' codebase="http://java.sun.com/update/1.6.0/jinstall-6u26-windows-i586.cab#Version=1,6,0,0"'+' width="0" height="0"'+">"+'  <param name="archive" value="'+sPluginsPath+"ITHitMountOpenDocument.jar"+
'">'+'  <param name="code" value="MODApplet.class">'+'  <param name="'+pramNameUrl+'" value="'+sUrl+'">'+'  <param name="mountUrl" value="'+sMountUrl+'">'+"</object>";else applet='<embed name="mountApplet"'+' type="application/x-java-applet;version=1.6"'+' pluginspage = "http://www.java.com/en/download/"'+' width="0" height="0"'+' archive="'+sPluginsPath+'ITHitMountOpenDocument.jar"'+' code="MODApplet.class"'+" "+pramNameUrl+'="'+sUrl+'"'+' mountUrl="'+sMountUrl+'"'+">";this._AppletContainer.innerHTML=
applet};ITHit.oNS.JavaEditDocument.prototype.Destruct=function(){};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser.Handlers");ITHit.oNS.Button=function(id){this._Button=ITHit.Components.ihDijit.byId(id);this._Id=id};ITHit.oNS.Button.prototype.Disable=function(){if(!this._Button)return false;this._Button.set("disabled",true);var element=document.getElementById(this._Id);if(element)element.blur()};
ITHit.oNS.Button.prototype.Enable=function(){if(!this._Button)return false;this._Button.set("disabled",false)};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser.Handlers");
ITHit.oNS.InterfaceHandlers=function(controller){this._Controller=controller;this.Url;this.DeleteButton;this.DownloadButton;this.CopyButton;this.CutButton;this.PasteButton;this.RedoButton;this.InfoButton;this.UndoButton;this.CopyCutMode;this.EditButton;this.CustomPropertiesButton;this.VersionButton;ITHit.WebDAV.Client.AjaxFileBrowser.Handlers.InterfaceHandlers.baseConstructor.call(this);this.base=ITHit.WebDAV.Client.AjaxFileBrowser.Handlers.InterfaceHandlers.base};
ITHit.Extend(ITHit.oNS.InterfaceHandlers,ITHit.WebDAV.Client.AjaxFileBrowser.AjaxFileBrowserBase);ITHit.oNS.InterfaceHandlers.prototype._GetClassName=function(){return"ITHit.WebDAV.Client.AjaxFileBrowser.Handlers.InterfaceHandlers"};
ITHit.oNS.InterfaceHandlers.prototype._Initiate=function(){var handlers=ITHit.WebDAV.Client.AjaxFileBrowser.Handlers,index=this._Controller._index;this.DeleteButton=new handlers.Button("ithit_interface_delete_"+index);this.DownloadButton=new handlers.Button("ithit_interface_download_"+index);this.CopyButton=new handlers.Button("ithit_interface_copy_"+index);this.CutButton=new handlers.Button("ithit_interface_cut_"+index);this.PasteButton=new handlers.Button("ithit_interface_paste_"+index);this.RedoButton=
new handlers.Button("ithit_interface_redo_"+index);this.InfoButton=new handlers.Button("ithit_interface_info_"+index);this.UndoButton=new handlers.Button("ithit_interface_undo_"+index);this.EditButton=new handlers.Button("ithit_interface_edit_"+index);this.CustomPropertiesButton=new handlers.Button("ithit_interface_custom_prop_"+index);this.VersionButton=new handlers.Button("ithit_interface_versions_"+index);this.UpButton=new handlers.Button("ithit_interface_up_"+index)};
ITHit.oNS.InterfaceHandlers.prototype.GetInterfaceHandler=function(interfaceHandlerId,items){if(!this[interfaceHandlerId])throw new ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions.AjaxFileBrowserException(ITHit.Phrases.AjaxFileBrowser.Exceptions.WrongInterfaceHandler.Paste(interfaceHandlerId));return this._MakeClosure(this,interfaceHandlerId,items)};
ITHit.oNS.InterfaceHandlers.prototype._MakeClosure=function(scope,func,items){if(scope)if(ITHit.Utils.IsString(func))return function(event){scope[func](items,event)};else return function(event){func.call(scope,items,event)};else return function(event){func(items,event)}};
ITHit.oNS.InterfaceHandlers.prototype.OnSelectedItemsChangedHandler=function(){var selectedLength=this.DispatchEvent("OnGetSelectedItemsCount");if(selectedLength>0){this.DeleteButton.Enable();this.CopyButton.Enable();this.CutButton.Enable();this.DownloadButton.Enable();if(selectedLength===1){this.InfoButton.Enable();this.CustomPropertiesButton.Enable();var oItem=this.DispatchEvent("OnGetSelectedGridItems")[0];if(oItem.ResourceType==ITHit.WebDAV.Client.ResourceType.Resource){this.DownloadButton.Enable();
this.EditButton.Enable();if(oItem.Item.CheckedIn===false&&oItem.Item.CheckedOut===false)this.VersionButton.Disable();else this.VersionButton.Enable()}else{this.EditButton.Disable();this.VersionButton.Disable()}}else{this.InfoButton.Disable();this.CustomPropertiesButton.Disable();this.EditButton.Disable();this.VersionButton.Disable()}}else{this.InfoButton.Disable();this.CustomPropertiesButton.Disable();this.DownloadButton.Disable();this.EditButton.Disable();this.DeleteButton.Disable();this.CopyButton.Disable();
this.CutButton.Disable();this.VersionButton.Disable()}};ITHit.oNS.InterfaceHandlers.prototype.OnSelectedFolderChangedHandler=function(){this.Url=this._Controller._url;if(this._Controller._baseUrl===this.Url)this.UpButton.Disable();else this.UpButton.Enable()};ITHit.oNS.InterfaceHandlers.prototype.OnPasteHandler=function(){if("CUT"==this.CopyCutMode){this.PasteButton.Disable();this.CopyCutMode=null}};ITHit.oNS.InterfaceHandlers.prototype.OnCopyHandler=function(){this.CopyCutMode="COPY";this.PasteButton.Enable()};
ITHit.oNS.InterfaceHandlers.prototype.OnCutHandler=function(){this.CopyCutMode="CUT";this.PasteButton.Enable()};ITHit.oNS.InterfaceHandlers.prototype.OnExecuteCommandHandler=function(){this.UndoButton.Enable()};ITHit.oNS.InterfaceHandlers.prototype.OnUndoHandler=function(){var session=this._Controller.Commands;if(session.IsFirst())this.UndoButton.Disable();if(!session.IsLast())this.RedoButton.Enable()};
ITHit.oNS.InterfaceHandlers.prototype.OnRedoHandler=function(){var session=this._Controller.Commands;if(!session.IsFirst())this.UndoButton.Enable();if(session.IsLast())this.RedoButton.Disable()};ITHit.oNS.InterfaceHandlers.prototype.Delete=function(){ITHit.WebDAV.Client.AjaxFileBrowser.Controller._SetActive(this._Controller._index);ITHit.WebDAV.Client.AjaxFileBrowser.Render.RenderController.ShowDeleteDialog()};
ITHit.oNS.InterfaceHandlers.prototype.Upload=function(){ITHit.oNS.Controller.prototype.UploadFileDialog.call(this._Controller,this.Url)};ITHit.oNS.InterfaceHandlers.prototype.UploadFolder=function(){ITHit.oNS.Controller.prototype.UploadFolder.call(this._Controller,this.Url)};ITHit.oNS.InterfaceHandlers.prototype.Refresh=function(){ITHit.oNS.Controller.prototype.Refresh.call(this._Controller)};
ITHit.oNS.InterfaceHandlers.prototype.NewFolder=function(){ITHit.WebDAV.Client.AjaxFileBrowser.Controller._SetActive(this._Controller._index);ITHit.oNS.Render.RenderController.NewFolderDialog(this.Url)};ITHit.oNS.InterfaceHandlers.prototype.Edit=function(){var items=this.DispatchEvent("OnGetSelectedGridItems");if(items.length===1)ITHit.oNS.Controller.prototype.EditDocument.call(this._Controller,items[0].Href)};
ITHit.oNS.InterfaceHandlers.prototype.FileManager=function(){ITHit.oNS.Controller.prototype.OpenFolderInFM.call(this._Controller,this.Url)};ITHit.oNS.InterfaceHandlers.prototype.Versions=function(){ITHit.WebDAV.Client.AjaxFileBrowser.Controller._SetActive(this._Controller._index);var items=this.DispatchEvent("OnGetSelectedGridItems");if(items.length===1)ITHit.oNS.Controller.ShowVersionsDialog.call(this._Controller,items[0].Href)};
ITHit.oNS.InterfaceHandlers.prototype.CustomProp=function(){ITHit.WebDAV.Client.AjaxFileBrowser.Controller._SetActive(this._Controller._index);var items=this.DispatchEvent("OnGetSelectedGridItems");if(items.length===1)ITHit.oNS.Controller.ShowPropertiesDialog(items[0].Href)};ITHit.oNS.InterfaceHandlers.prototype.Download=function(){var items=this.DispatchEvent("OnGetSelectedGridItems");if(items.length>0)items.forEach(item=>{this._Controller.OpenDocument(item.Href,true,item.DisplayName)})};
ITHit.oNS.InterfaceHandlers.prototype.Undo=function(){var session=this._Controller.Commands.Undo()};ITHit.oNS.InterfaceHandlers.prototype.Redo=function(){var session=this._Controller.Commands.Redo()};ITHit.oNS.InterfaceHandlers.prototype.Copy=function(){this.CopyCutMode="COPY";this._Controller.CopyGridSelected();this.PasteButton.Enable()};ITHit.oNS.InterfaceHandlers.prototype.Cut=function(){this.CopyCutMode="CUT";this._Controller.CutGridSelected();this.PasteButton.Enable()};
ITHit.oNS.InterfaceHandlers.prototype.Paste=function(){this._Controller.CopyMoveManager.PasteTo(this.Url);this.CopyButton.Disable();this.CutButton.Disable();if("CUT"==this.CopyCutMode){this.PasteButton.Disable();this.CopyCutMode=null}};
ITHit.oNS.InterfaceHandlers.prototype.Info=function(){var items=this.DispatchEvent("OnGetSelectedGridItems");if(1!=items.length)return false;var item=items[0],itemName=item.DisplayName,utilsNs=ITHit.WebDAV.Client.AjaxFileBrowser.Render.Utils,url=this._Controller._Utils.GetAbsolutePath(item.Item.Href)||item.Item.Href;ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.ShowItemInfo(url,itemName,item.ResourceType,item.ContentLength,utilsNs.FormatDate(item.CreationDate),utilsNs.FormatDate(item.LastModified),
item.Item.AvailableBytes,item.Item.UsedBytes)};ITHit.oNS.InterfaceHandlers.prototype.Log=function(){ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.ShowLog()};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser.HistoryNavigation");
ITHit.oNS.HistoryAPIAdapter=function(){if(!ITHit.WebDAV.Client.AjaxFileBrowser.HistoryNavigation.HistoryAPIAdapter.CheckSupport())throw new ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions.AjaxFileBrowserException(ITHit.Phrases.AjaxFileBrowser.Exceptions.FunctionalityNotSupported.Paste("History API"));this._ClassId="ITHit.WebDAV.Client.AjaxFileBrowser.HistoryNavigation.HistoryAPIAdapter_"+ITHit.WebDAV.Client.AjaxFileBrowser.HistoryNavigation.HistoryAPIAdapter._Counter++;window.onpopstate=ITHit.Utils.MakeScopeClosure(this,
"OnPopstateHandler")};ITHit.oNS.HistoryAPIAdapter._Counter=0;ITHit.oNS.HistoryAPIAdapter.CheckSupport=function(){return!ITHit.Utils.IsUndefined(history.pushState)};ITHit.oNS.HistoryAPIAdapter.prototype.Set=function(url){try{history.pushState({Url:url},"","#"+url)}catch(e){if(typeof window.console!=="undefined")console.error(e)}};ITHit.oNS.HistoryAPIAdapter.prototype.Replace=function(url){try{history.replaceState({Url:url},"","#"+url)}catch(e){if(typeof window.console!=="undefined")console.error(e)}};
ITHit.oNS.HistoryAPIAdapter.prototype.OnPopstateHandler=function(event){ITHit.Events.DispatchEvent(this,"OnHistoryChange",[event.state?event.state.Url:document.location.hash.replace("#","")])};ITHit.oNS.HistoryAPIAdapter.prototype.Destroy=function(){window.onpopstate=null;ITHit.Events.RemoveAllListeners(this)};ITHit.oNS.HistoryAPIAdapter.prototype.toString=function(){return this._ClassId};
(function(){var self=ITHit.DefineClass("ITHit.WebDAV.Client.AjaxFileBrowser.HistoryNavigation.HashChangeAdapter",null,{ChangeFlag:null,_StopEvent:null,constructor:function(){if(!ITHit.WebDAV.Client.AjaxFileBrowser.HistoryNavigation.HashChangeAdapter.CheckSupport())throw new ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions.AjaxFileBrowserException(ITHit.Phrases.AjaxFileBrowser.Exceptions.FunctionalityNotSupported.Paste("onhashchange"));if(ITHit.DetectBrowser.IE&&ITHit.DetectBrowser.IE<=8)this._StopEvent=
function(e){ITHit.Events.Stop(e)};window.onhashchange=ITHit.Utils.MakeScopeClosure(this,"OnHashChangeHandler")},Set:function(url){this.ChangeFlag=true;document.location.hash=url},OnHashChangeHandler:function(oEvent){if(this.ChangeFlag){this.ChangeFlag=false;return false}try{var handlers;if(this._StopEvent){handlers=window.onunload;window.onunload=this._StopEvent}ITHit.Events.DispatchEvent(this,"OnHistoryChange",[document.location.hash.replace("#","")]);if(this._StopEvent)window.onunload=handlers}catch(e){alert(e)}},
Destroy:function(){window.onhashchange=null;ITHit.Events.RemoveAllListeners(this)}},{CheckSupport:function(){return"onhashchange"in window}})})();ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser.HistoryNavigation");
ITHit.oNS.HashIntervalAdapter=function(){this.Hash=document.location.hash;this._StopEvent=null;this._ClassId="ITHit.WebDAV.Client.AjaxFileBrowser.HistoryNavigation.HashIntervalAdapter_"+ITHit.WebDAV.Client.AjaxFileBrowser.HistoryNavigation.HashIntervalAdapter._Counter++;this.ChangeFlag;if(ITHit.DetectBrowser.IE&&ITHit.DetectBrowser.IE<=8)this._StopEvent=function(e){ITHit.Events.Stop(e)};this._Inerval=setInterval(ITHit.Utils.MakeScopeClosure(this,"_CheckHashChange"),700)};
ITHit.oNS.HashIntervalAdapter._Counter=0;ITHit.oNS.HashIntervalAdapter.CheckSupport=function(){return true};ITHit.oNS.HashIntervalAdapter.prototype._CheckHashChange=function(){var newHash=document.location.hash;if(this.Hash!=newHash){this.Hash=newHash;this.OnHashchangeHandler(newHash)}};ITHit.oNS.HashIntervalAdapter.prototype.Set=function(url){this.ChangeFlag=true;document.location.hash=url};
ITHit.oNS.HashIntervalAdapter.prototype.OnHashchangeHandler=function(hash){if(this.ChangeFlag){this.ChangeFlag=false;return false}var handlers;if(this._StopEvent){handlers=window.onunload;window.onunload=this._StopEvent}ITHit.Events.DispatchEvent(this,"OnHistoryChange",[hash.replace("#","")]);if(this._StopEvent)window.onunload=handlers};ITHit.oNS.HashIntervalAdapter.prototype.Destroy=function(){clearInterval(this._Inerval);ITHit.Events.RemoveAllListeners(this)};
ITHit.oNS.HashIntervalAdapter.prototype.toString=function(){return this._ClassId};
(function(){var self=ITHit.DefineClass("ITHit.WebDAV.Client.AjaxFileBrowser.HistoryNavigation.HistoryController",null,{HistoryAdapter:null,_Enabled:true,_LastHistoryHash:null,_HistoryHashList:null,_FlagSkipNextChangeEvent:null,constructor:function(){this._HistoryHashList=[];var historyAdapters=["HistoryAPIAdapter","HashChangeAdapter","HashIntervalAdapter"];var historyNs=ITHit.WebDAV.Client.AjaxFileBrowser.HistoryNavigation;for(var i=0,l=historyAdapters.length;i<l;i++)if(historyNs[historyAdapters[i]].CheckSupport()){this.HistoryAdapter=
new historyNs[historyAdapters[i]];break}ITHit.Events.AddListener(this.HistoryAdapter,"OnHistoryChange","_OnHistoryChangeHandler",this)},SetEnabled:function(bIsEnabled){this._Enabled=bIsEnabled},GetLength:function(){return this._HistoryHashList.length},SetHash:function(sHash){var oHashData=self.ParseHash(sHash);switch(oHashData.Type){case "search":this.SetSearchQuery(oHashData.SearchQuery,oHashData.Url);break;case "url":this.SetUrl(oHashData.Url);break}this._TriggerHistoryEvents(sHash)},SetUrl:function(sUrl){sUrl=
ITHit.WebDAV.Client.Encoder.Encode(sUrl);this._SetHashInternal(sUrl)},UpdateCurrentUrl:function(sUrl){sUrl=ITHit.WebDAV.Client.Encoder.Encode(sUrl);this._ReplaceHashInternal(sUrl)},SetSearchQuery:function(sQuery,sUrl){sUrl=ITHit.WebDAV.Client.Encoder.Encode(sUrl);sQuery=sQuery.replace(":","");sQuery=ITHit.WebDAV.Client.Encoder.Encode(sQuery);this._SetHashInternal("search:"+sQuery+":"+sUrl)},Back:function(){history.back()},Forward:function(){history.forward()},Destroy:function(){this.HistoryAdapter.Destroy();
ITHit.Events.RemoveAllListeners(this)},_SetHashInternal:function(sHash){if(this._LastHistoryHash===sHash)return;this._LastHistoryHash=sHash;this._SaveInList(sHash);if(this._Enabled)this.HistoryAdapter.Set(sHash);ITHit.Events.DispatchEvent(this,"OnSetHash",[sHash])},_ReplaceHashInternal:function(sHash){this._LastHistoryHash=sHash;this._HistoryHashList[(this._HistoryHashList.length||-1)-1]=sHash;if(this.HistoryAdapter.Replace)this.HistoryAdapter.Replace(sHash);else{this._FlagSkipNextChangeEvent=true;
history.back();if(this._Enabled)this.HistoryAdapter.Set(sHash)}},_SaveInList:function(sHash){if(this._HistoryHashList.length===0||this._HistoryHashList[this._HistoryHashList.length-1]!==sHash)this._HistoryHashList.push(sHash)},_OnHistoryChangeHandler:function(sHash){if(!this._Enabled||this._FlagSkipNextChangeEvent){this._FlagSkipNextChangeEvent=false;return}this._TriggerHistoryEvents(sHash)},_TriggerHistoryEvents:function(sHash){this._LastHistoryHash=sHash;this._SaveInList(sHash);var oHashData=self.ParseHash(sHash);
switch(oHashData.Type){case "search":ITHit.Events.DispatchEvent(this,"OnSearchQueryChange",[oHashData.SearchQuery,oHashData.Url]);break;case "url":ITHit.Events.DispatchEvent(this,"OnUrlChange",[oHashData.Url]);break}ITHit.Events.DispatchEvent(this,"OnSetHash",[sHash])}},{ParseHash:function(sHash){sHash=ITHit.WebDAV.Client.Encoder.Decode(sHash);if(sHash.indexOf("search:")===0){var matches=/search:([^:]+):?(.+)?/.exec(sHash);if(matches)return{Type:"search",SearchQuery:ITHit.WebDAV.Client.Encoder.Decode(matches[1]),
Url:ITHit.WebDAV.Client.Encoder.Decode(matches[2]||"")}}return{Type:"url",Url:ITHit.WebDAV.Client.Encoder.Decode(sHash)}}})})();ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser.Render");
ITHit.oNS.ContextHelp=function(){this.Container;this.Content;this.MessageObj;this.Message;this.ContextHelpIconClass;this._Timer;this.FadeInDelay=500;this.FadeOutDelay=500;this.IsVisible=false;this.oNsPhrases=ITHit.Phrases.AjaxFileBrowser.Interface;this._MousePosition={x:0,y:0};ITHit.Events.AttachEvent(window.document,"onmousemove",ITHit.Utils.MakeScopeClosure(this,"_OnMouseMove"))};ITHit.oNS.ContextHelp.prototype._OnMouseMove=function(oEvent){this._MousePosition={x:oEvent.clientX,y:oEvent.clientY}};
ITHit.oNS.ContextHelp.prototype._Initiate=function(){this.Container=document.getElementById("ithit_interface_context_help_container");this.Content=document.getElementById("ithit_interface_context_help_content")};ITHit.oNS.ContextHelp.prototype._Clear=function(message){if(this._Timer){clearTimeout(this._Timer);this._Timer=null}};
ITHit.oNS.ContextHelp.prototype.Show=function(message,contextHelpIconClass){this.MessageObj=ITHit.Utils.CreateDOMElement({nodeName:"DIV",childNodes:[{nodeName:"DIV",className:contextHelpIconClass},{nodeName:"DIV",className:"contextHelpText",childNodes:[String(message)]}]});this.StartShow()};
ITHit.oNS.ContextHelp.prototype.ShowItemInfo=function(imageObj,itemName,creationDate,lastModified,contentLength){this.MessageObj=ITHit.Utils.CreateDOMElement({nodeName:"TABLE",className:"thumbnailsContextHelpCntr",childNodes:[{nodeName:"TBODY",childNodes:[{nodeName:"TR",childNodes:[{nodeName:"TD",rowSpan:"2",className:"thumbnailsContextHelpIcon",childNodes:[imageObj]},{nodeName:"TD",className:"thumbnailsContextHelpName",childNodes:[String(itemName)]}]},{nodeName:"TR",childNodes:[{nodeName:"TD",className:"colContextHelpNames",
childNodes:[{nodeName:"TABLE",className:"thumbnailsContextHelpInfo",childNodes:[{nodeName:"TBODY",childNodes:[{nodeName:"TR",childNodes:[{nodeName:"TD",className:"thumbnailsContextHelpInfoNames",childNodes:[String(this.oNsPhrases.Created)]},{nodeName:"TD",childNodes:[String(creationDate)]}]},{nodeName:"TR",childNodes:[{nodeName:"TD",className:"thumbnailsContextHelpInfoNames",childNodes:[String(this.oNsPhrases.Modified)]},{nodeName:"TD",childNodes:[String(lastModified)]}]},{nodeName:"TR",childNodes:[{nodeName:"TD",
className:"thumbnailsContextHelpInfoNames",childNodes:[String(contentLength==null?"":this.oNsPhrases.Size)]},{nodeName:"TD",childNodes:[String(contentLength==null?"":contentLength)]}]}]}]}]}]}]}]});this.StartShow()};
ITHit.oNS.ContextHelp.prototype.StartShow=function(){this._Clear();this.Container.style.opacity="0";this.Container.style.display="";this.Container.className="";var oPosition=ITHit.Components.dojo.position(this.Container);var iMargin=50;var bGoToLeft=this._MousePosition.x>oPosition.x-iMargin&&this._MousePosition.x<oPosition.x+oPosition.w+iMargin*2&&this._MousePosition.y>oPosition.y-iMargin&&this._MousePosition.y<oPosition.y+oPosition.h+iMargin*2;this.Container.className=bGoToLeft?"left":"";if(this.IsVisible)this._ShowDelayed();
else this._Timer=setTimeout(ITHit.Utils.MakeScopeClosure(this,"_ShowDelayed"),this.FadeInDelay)};ITHit.oNS.ContextHelp.prototype._ShowDelayed=function(){this.Container.style.display="";this.Container.style.opacity="1";this.Content.innerHTML="";this.Content.appendChild(this.MessageObj);this.IsVisible=true};ITHit.oNS.ContextHelp.prototype.Hide=function(){this.Container.style.opacity="0";this._Clear();this._Timer=setTimeout(ITHit.Utils.MakeScopeClosure(this,"_HideDelayed"),this.FadeOutDelay)};
ITHit.oNS.ContextHelp.prototype._HideDelayed=function(){this.Container.style.display="none";this.IsVisible=false};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser.Commands");ITHit.oNS.CommandController=function(){this.Session=null};ITHit.oNS.CommandController.prototype.toString=function(){return"ITHit.WebDAV.Client.AjaxFileBrowser.Commands.CommandController"};
ITHit.oNS.CommandController.prototype.CreateFolderAsync=function(sUrl,sLockToken,fCallback){return this.Session.CreateFolderAsync(sUrl,sLockToken,fCallback)};ITHit.oNS.CommandController.prototype.DeleteAsync=function(url,tokens,callback){return this.Session.DeleteAsync(url,tokens,callback)};ITHit.oNS.CommandController.prototype.ItemExists=function(url){return this.Session.ItemExists(url)};
ITHit.oNS.CommandController.prototype.ItemExistsAsync=function(url,callback){return this.Session.ItemExistsAsync(url,callback)};ITHit.oNS.CommandController.prototype.GetUploadProgress=function(url){return this.Session.GetUploadProgress(url)};ITHit.oNS.CommandController.prototype.GetUploadProgressAsync=function(url,callback){return this.Session.GetUploadProgressAsync(url,callback)};
ITHit.oNS.CommandController.prototype.CancelUploadAsync=function(url,token,callback){return this.Session.CancelUploadAsync(url,token,callback)};ITHit.oNS.CommandController.prototype.CancelUpload=function(resource){return this.Session.CancelUpload(resource)};ITHit.oNS.CommandController.prototype.GetSupportedFeaturesAsync=function(url,callback){return this.Session.GetSupportedFeaturesAsync(url,callback)};ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser");
ITHit.oNS.Session=function(sHost){var oNsBrowser=ITHit.WebDAV.Client.AjaxFileBrowser;try{this._Session=new ITHit.WebDAV.Client.WebDavSession}catch(e){if("The trial period has expired."==e)ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.TrialPeriodExpired();else throw e;}this.Host=sHost;this.Instances={Folder:oNsBrowser.Folder,Resource:oNsBrowser.Resource,HierItem:oNsBrowser.HierarchyItem};this._ClassId="ITHit.WebDAV.Client.AjaxFileBrowser.Session_"+ITHit.WebDAV.Client.AjaxFileBrowser.Session._Counter++};
ITHit.oNS.Session._Counter=0;ITHit.oNS.Session.prototype.GetWebDavSession=function(){return this._Session};ITHit.oNS.Session.prototype._AlertException=function(e,sMethod){switch(sMethod){case "Session.OpenFolder":return}var sMessage=this._GetMessageFromException(e,sMethod);if(ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog)ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.ShowMessage(sMessage);else if(typeof window.console!=="undefined")console.error("TODO",sMessage)};
ITHit.oNS.Session.prototype._GetMessageFromException=function(e,sMethod){var aMessageLines=[];aMessageLines.push(ITHit.Phrases.AjaxFileBrowser.Interface.OperationCannotBePerformed);aMessageLines.push(sMethod);if(e instanceof ITHit.WebDAV.Client.Exceptions.WebDavHttpException){aMessageLines.push(e.Message+" "+e.Status.Code+" "+e.Status.Description);for(var i=0,l=e.Multistatus.Responses.length;i<l;i++){var oResponse=e.Multistatus.Responses[i];aMessageLines.push(oResponse.Message+" "+oResponse.Status.Code+
" "+oResponse.Status.Description)}}else aMessageLines.push(e.message);return aMessageLines.join("\n")};ITHit.oNS.Session.prototype.GetAbsolutePath=function(sUrl,bNotEncode){sUrl=this.Host+sUrl.substr(1);if(bNotEncode)return sUrl;return ITHit.WebDAV.Client.Encoder.Encode(sUrl)};
ITHit.oNS.Session.prototype.OpenItem=function(sUrl){try{var sAbsoluteUrl=this.GetAbsolutePath(sUrl,true);var oItem=this._Session.OpenItem(sAbsoluteUrl)}catch(e){this._AlertException(e,"Session.OpenItem");return false}if(oItem instanceof ITHit.WebDAV.Client.Folder)return new this.Instances.Folder(oItem);else return new this.Instances.Resource(oItem)};ITHit.oNS.Session.prototype.CreateFolderAsync=function(sUrl,sLockToken,fCallback){return this._Session.CreateFolderAsync(sUrl,sLockToken,fCallback)};
ITHit.oNS.Session.prototype.GetUploadProgress=function(sUrl){return this._Session.GetUploadProgress(sUrl)};ITHit.oNS.Session.prototype.GetUploadProgressAsync=function(sUrl,fCallback){return this._Session.GetUploadProgressAsync(sUrl,fCallback)};ITHit.oNS.Session.prototype.GetSupportedFeaturesAsync=function(sUrl,fCallback){return this._Session.GetSupportedFeaturesAsync(sUrl,fCallback)};
ITHit.oNS.Session.prototype.DeleteAsync=function(sUrl,oLockTokens,fCallback){return this._Session.DeleteAsync(sUrl,oLockTokens,fCallback)};ITHit.oNS.Session.prototype.CancelUploadAsync=function(sUrl,sLockToken,fCallback){return this._Session.CancelUploadAsync(sUrl,sLockToken,fCallback)};
ITHit.oNS.Session.prototype.ItemExists=function(sUrl){try{this._Session.OpenItem(ITHit.WebDAV.Client.Encoder.Encode(sUrl));return true}catch(e){if(e instanceof ITHit.WebDAV.Client.Exceptions.NotFoundException)return false;this._AlertException(e,"Session.ItemExists");return false}};
ITHit.oNS.Session.prototype.ItemExistsAsync=function(sUrl,fCallback){try{return this._Session.OpenItemAsync(ITHit.WebDAV.Client.Encoder.Encode(sUrl),function(oResult){if(fCallback){var oItemExistsResult=new ITHit.WebDAV.Client.AsyncResult(oResult.IsSuccess,oResult.IsSuccess,oResult.Error);fCallback.call(this,oItemExistsResult)}})}catch(e){this._AlertException(e,"Session.ItemExists")}};
ITHit.oNS.Session.prototype.CancelUpload=function(oResource){if(!(oResource instanceof this.Instances.Resource))throw new ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions.AjaxFileBrowserException(ITHit.Phrases.Exceptions.ResourceInstanceExpected);try{return oResource.Item.CancelUpload()}catch(e){return false}};ITHit.oNS.Session.prototype.SetCredentials=function(user,pass){return this._Session.SetCredentials(user,pass)};ITHit.oNS.Session.prototype.GetIisDetected=function(){return this._Session.GetIisDetected()};
ITHit.oNS.Session.prototype.Undelete=function(sUrl){try{return this._Session.Undelete(sUrl)}catch(e){return false}};ITHit.oNS.Session.prototype.toString=function(){return this._ClassId};
(function(){var self=ITHit.DefineClass("ITHit.WebDAV.Client.AjaxFileBrowser.Commands.ItemsCollection",null,{_Items:null,_IsEnabled:true,_MaxSize:null,constructor:function(){this._Items={};this._MaxSize=ITHit.DetectDevice.Mobile?2E3:1E4},IsEnabled:function(){return this._IsEnabled},SetEnabled:function(bEnabled){this._IsEnabled=!!bEnabled},SetMaxSize:function(iSize){this._MaxSize=iSize},Set:function(sPath,mData){var bExists=this.Has(sPath);this._CheckToClear();if(this.IsEnabled())this._Items[sPath]=
mData;ITHit.Events.DispatchEvent(this,bExists?"OnChange":"OnAdd",[sPath,mData]);ITHit.Events.DispatchEvent(this,"OnSet",[sPath,mData])},SetDeprecated:function(sPath){delete this._Items[sPath];ITHit.Events.DispatchEvent(this,"OnDeprecated",[sPath])},Has:function(sPath){var res=this._Items.hasOwnProperty(sPath);if(!res)res=this._Items.hasOwnProperty(ITHit.WebDAV.Client.Encoder.EncodeURI(sPath));return res},Get:function(sPath){var item=this._Items[sPath];if(item==null)item=this._Items[ITHit.WebDAV.Client.Encoder.EncodeURI(sPath)];
return item||null},GetSize:function(){var iItemsLength=0;for(var sUrl in this._Items){if(!this._Items.hasOwnProperty(sUrl))continue;iItemsLength+=ITHit.Utils.IsArray(this._Items[sUrl])?this._Items[sUrl].length:1}return iItemsLength},CleanItems:function(iCleanCount){var iRemovedCount=0;for(var sUrl in this._Items){if(!this._Items.hasOwnProperty(sUrl))continue;iRemovedCount+=ITHit.Utils.IsArray(this._Items[sUrl])?this._Items[sUrl].length:1;delete this._Items[sUrl];if(iRemovedCount>=iCleanCount)break}},
Remove:function(sPath){delete this._Items[sPath];ITHit.Events.DispatchEvent(this,"OnRemove",[sPath])},RemoveAll:function(){var oItems=this._Items;this._Items={};for(var sUrl in oItems)if(oItems.hasOwnProperty(sUrl));},_CheckToClear:function(){var iSize=this.GetSize();if(iSize>this._MaxSize)this.CleanItems(iSize-this._MaxSize)}})})();
(function(){var self=ITHit.DefineClass("ITHit.WebDAV.Client.AjaxFileBrowser.Commands.ProgressInfo",null,{_Complete:0,_Total:0,constructor:function(iComplete,iTotal){this._Complete=iComplete;this._Total=iTotal},GetComplete:function(){return this._Complete},GetTotal:function(){return this._Total},GetPercent:function(){if(!this._Total)return 0;return Math.round(this._Complete*100/this._Total*10)/10},GetText:function(){return this._Complete+"/"+this._Total}})})();
(function(){var self=ITHit.DefineClass("ITHit.WebDAV.Client.AjaxFileBrowser.Commands.RequestsProgressInfo",ITHit.WebDAV.Client.AjaxFileBrowser.Commands.ProgressInfo,{_XhrProgresses:null,constructor:function(aXhrProgresses){this._XhrProgresses=aXhrProgresses;for(var i=0,l=this._XhrProgresses.length;i<l;i++){var oProgress=this._XhrProgresses[i];if(oProgress.loaded===oProgress.total)continue;this._Complete+=oProgress.loaded;this._Total+=oProgress.total}},GetText:function(){return this.GetPercent()+"%"}})})();
(function(){var self=ITHit.DefineClass("ITHit.WebDAV.Client.AjaxFileBrowser.Commands.BaseCommand",null,{OnSuccess:null,OnError:null,OnFinish:null,OnAbort:null,OnUndo:null,_CommandsController:null,_CommandsCollection:null,_Status:null,_Errors:null,_SessionRequests:null,_SessionProgresses:null,_ProgressTriggerTimeout:null,constructor:function(oCommandsController,oCommandsCollection,oParams){oParams=oParams||{};this._CommandsController=oCommandsController;this._CommandsCollection=oCommandsCollection;
this._Status=self.STATUS_CREATED;this._Errors=[];for(var key in oParams)if(oParams.hasOwnProperty(key)&&!ITHit.Utils.IsUndefined(this[key]))this[key]=oParams[key];this._Initialize()},GetTitle:function(){return ITHit.Phrases.AjaxFileBrowser.Commands.Names.Load},GetProcessTitle:function(){return ITHit.Phrases.AjaxFileBrowser.Commands.Process.Load},GetUniqueId:function(){return this.toString()},IsEditable:function(){return false},IsCreated:function(){return this._Status===self.STATUS_CREATED},IsFinish:function(){return this._Status===
self.STATUS_FINISH||this._Status===self.STATUS_CANCELLED||this._Status===self.STATUS_ABORTED},IsProcess:function(){return this._Status===self.STATUS_PROCESS},IsCancelled:function(){return this._Status===self.STATUS_CANCELLED||this._Status===self.STATUS_ABORTED},GetCommandsController:function(){return this._CommandsController},SetUpdatedUrl:function(sUrl,sUpdateType){switch(sUpdateType){case self.UPDATE_TYPE_ADD:if(this._CommandsController.FoldersCollection.Has(sUrl)&&this._CommandsController.FoldersCollection.Get(sUrl)===
null)this._CommandsController.FoldersCollection.Remove(sUrl);if(this._CommandsController.ResourcesCollection.Has(sUrl)&&this._CommandsController.ResourcesCollection.Get(sUrl)===null)this._CommandsController.ResourcesCollection.Remove(sUrl);break;case self.UPDATE_TYPE_CHANGE:this._CommandsCollection.AddLazyUpdateUrl(sUrl);break;case self.UPDATE_TYPE_REMOVE:this._CommandsController.FoldersCollection.Remove(sUrl);this._CommandsController.ResourcesCollection.Remove(sUrl);break}var sParentFolderUrl=ITHit.WebDAV.Client.HierarchyItem.GetFolderParentUri(sUrl);
this._CommandsCollection.AddLazyUpdateUrl(sParentFolderUrl)},AddError:function(mError){this._Errors.push(mError)},SetErrors:function(aErrors){this._Errors=aErrors},HasErrors:function(){return this._Errors.length>0},GetErrors:function(){return this._Errors},HaveErrorHandlers:function(){return this.OnError!==null},Execute:function(){},UnExecute:function(){},Abort:function(){},_Initialize:function(){},_TriggerFinish:function(){},_TriggerAbort:function(){},_TriggerFinishUnExecute:function(){}},{STATUS_CREATED:"created",
STATUS_PROCESS:"process",STATUS_FINISH:"finish",STATUS_ABORTED:"aborted",STATUS_CANCELLED:"cancelled",UPDATE_TYPE_ADD:"add",UPDATE_TYPE_CHANGE:"change",UPDATE_TYPE_REMOVE:"remove",GetNameFromHref:function(sHref){var sFolderNameMatches=/([^\/]+)\/?$/.exec(sHref);return sFolderNameMatches!==null?sFolderNameMatches[1]:sHref}})})();
(function(){var self=ITHit.DefineClass("ITHit.WebDAV.Client.AjaxFileBrowser.Commands.QueueCommand",ITHit.WebDAV.Client.AjaxFileBrowser.Commands.BaseCommand,{_Commands:null,_RunPosition:0,constructor:function(){this._Commands=[];this._super.apply(this,arguments)},GetTitle:function(){var oCommand=this._Commands[this._RunPosition-1]||this._Commands[0];return oCommand?oCommand.GetTitle():this._super()},GetProcessTitle:function(){var oCommand=this._Commands[this._RunPosition-1]||this._Commands[0];return oCommand?
oCommand.GetProcessTitle():this._super()},IsEditable:function(){var bEditable=false;for(var i=0,l=this._Commands.length;i<l;i++)if(this._Commands[i].IsEditable())bEditable=true;return bEditable},Add:function(oCommand){this._Commands.push(oCommand);var that=this;ITHit.Events.AddListener(oCommand,"OnFinish",function(){that._AfterExecuteItem(oCommand,function(){if(oCommand.HasErrors()){that.AppendCommandErrors(oCommand);that._TriggerFinish()}else that._ExecuteTryNext()})},this);ITHit.Events.AddListener(oCommand,
"OnAbort",function(){that.AppendCommandErrors(oCommand);that.Abort()},this);ITHit.Events.AddListener(oCommand,"OnUndo",function(){that._AfterUnExecuteItem(oCommand,function(){that.AppendCommandErrors(oCommand);that._UnExecuteTryNext()})},this)},AppendCommandErrors:function(oCommand){var aErrors=oCommand.GetErrors();for(var i=0,l=aErrors.length;i<l;i++)this.AddError(aErrors[i])},GetLength:function(){return this._Commands.length},Execute:function(){this._Status=self.STATUS_PROCESS;ITHit.Events.DispatchEvent(this,
"OnStart");this._ExecuteTryNext()},_ExecuteTryNext:function(){if(!this.IsProcess())return;var iCompletedCount=Math.min(this._RunPosition,this._Commands.length);var oProgressInfo=new ITHit.WebDAV.Client.AjaxFileBrowser.Commands.ProgressInfo(iCompletedCount,this._Commands.length);ITHit.Events.DispatchEvent(this,"OnProgress",[oProgressInfo]);if(this._RunPosition>this._Commands.length){this._TriggerFinish();return}this._RunPosition++;var oCommand=this._Commands[this._RunPosition-1];if(!oCommand||this.HasErrors()){this._TriggerFinish();
return}var that=this;this._BeforeExecuteItem(oCommand,function(){if(oCommand.HasErrors()){that.AppendCommandErrors(oCommand);that._TriggerFinish()}else oCommand.Execute()})},UnExecute:function(){this._Errors=[];this.Abort();this._UnExecuteTryNext()},Abort:function(){this._Status=self.STATUS_CANCELLED;for(var i=0,l=this._Commands.length;i<l;i++)if(this._Commands[i].IsProcess())this._Commands[i].Abort();this._TriggerAbort()},_UnExecuteTryNext:function(){if(this._Status!==self.STATUS_CANCELLED)return;
var iCompletedCount=Math.min(this._RunPosition,this._Commands.length);var oProgressInfo=new ITHit.WebDAV.Client.AjaxFileBrowser.Commands.ProgressInfo(iCompletedCount,this._Commands.length);ITHit.Events.DispatchEvent(this,"OnProgress",[oProgressInfo]);if(this._RunPosition<1){this._TriggerFinishUnExecute();return}this._RunPosition--;var oCommand=this._Commands[this._RunPosition-1]||null;if(!oCommand){this._TriggerFinishUnExecute();return}this._BeforeUnExecuteItem(oCommand,function(){oCommand.UnExecute()})},
_TriggerFinish:function(){if(!this.IsProcess())return;this._Status=self.STATUS_FINISH;var aFinishCommands=[];for(var i=0,l=this._Commands.length;i<l;i++)if(this._Commands[i].IsFinish())aFinishCommands.push(this._Commands[i]);if(ITHit.Utils.IsFunction(this.OnFinish))this.OnFinish(aFinishCommands,this._Errors);ITHit.Events.DispatchEvent(this,"OnFinish",[aFinishCommands,this._Errors]);if(this.HasErrors()){if(ITHit.Utils.IsFunction(this.OnError))this.OnError(this._Errors);ITHit.Events.DispatchEvent(this,
"OnError",[this._Errors])}else{if(ITHit.Utils.IsFunction(this.OnSuccess))this.OnSuccess(aFinishCommands);ITHit.Events.DispatchEvent(this,"OnSuccess",[aFinishCommands])}this._super()},_TriggerAbort:function(){var aFinishCommands=[];var aCancelledCommands=[];for(var i=0,l=this._Commands.length;i<l;i++)if(this._Commands[i].IsCancelled())aCancelledCommands.push(this._Commands[i]);else if(this._Commands[i].IsFinish())aFinishCommands.push(this._Commands[i]);if(ITHit.Utils.IsFunction(this.OnFinish))this.OnFinish(aFinishCommands,
this._Errors);ITHit.Events.DispatchEvent(this,"OnFinish",[aFinishCommands,this._Errors]);if(ITHit.Utils.IsFunction(this.OnAbort))this.OnAbort(aCancelledCommands);ITHit.Events.DispatchEvent(this,"OnAbort",[aCancelledCommands]);this._super()},_BeforeExecuteItem:function(oCommand,fNextCallback){fNextCallback()},_AfterExecuteItem:function(oCommand,fNextCallback){fNextCallback()},_BeforeUnExecuteItem:function(oCommand,fNextCallback){fNextCallback()},_AfterUnExecuteItem:function(oCommand,fNextCallback){fNextCallback()}})})();
(function(){var self=ITHit.DefineClass("ITHit.WebDAV.Client.AjaxFileBrowser.Commands.BaseRequestCommand",ITHit.WebDAV.Client.AjaxFileBrowser.Commands.BaseCommand,{_SessionRequests:null,_SessionProgresses:null,_ProgressTriggerTimeout:null,constructor:function(oCommandsController,oCommandsCollection,oParams){oParams=oParams||{};this._SessionRequests=[];this._SessionProgresses=[];this._super(oCommandsController,oCommandsCollection,oParams)},Execute:function(){if(this.IsProcess())return;this._Status=
self.STATUS_PROCESS;ITHit.Events.DispatchEvent(this,"OnStart");var that=this;this._CommandsController.CheckToLazyInit(function(){that._ExecuteInternal()})},UnExecute:function(){if(this.IsCreated())return;this._AbortSessionRequests();this._UnExecuteInternal()},Abort:function(){if(!this.IsProcess())return;this._Status=self.STATUS_ABORTED;this._AbortSessionRequests();this._TriggerAbort()},_AbortSessionRequests:function(){for(var i=0,l=this._SessionRequests.length;i<l;i++)if(this._SessionRequests[i]){this._SessionRequests[i].Abort();
delete this._SessionRequests[i];delete this._SessionProgresses[i]}},AddSessionRequest:function(oWebDavRequest){if(!oWebDavRequest)return;var iIndex=this._SessionRequests.length;this._SessionRequests[iIndex]=oWebDavRequest;var that=this;oWebDavRequest.OnProgress=function(oEvent){that._OnAnyProgress(iIndex,oEvent)}},_OnAnyProgress:function(iIndex,oEvent){this._SessionProgresses[iIndex]=oEvent;var that=this;if(this._ProgressTriggerTimeout)clearTimeout(this._ProgressTriggerTimeout);this._ProgressTriggerTimeout=
setTimeout(function(){if(!that.IsProcess())return;var aSessionProgresses=[];for(var i in that._SessionProgresses)if(that._SessionProgresses.hasOwnProperty(i))aSessionProgresses.push(that._SessionProgresses[i]);var oProgressInfo=new ITHit.WebDAV.Client.AjaxFileBrowser.Commands.RequestsProgressInfo(aSessionProgresses);ITHit.Events.DispatchEvent(that,"OnProgress",[oProgressInfo])},10)},_ExecuteInternal:function(){},_UnExecuteInternal:function(){},_DestroyEvents:function(){},_TriggerFinish:function(){if(!this.IsProcess())return;
this._Status=self.STATUS_FINISH;if(ITHit.Utils.IsFunction(this.OnFinish))this.OnFinish(arguments,this._Errors);ITHit.Events.DispatchEvent(this,"OnFinish",[arguments,this._Errors]);if(this.HasErrors()){if(ITHit.Utils.IsFunction(this.OnError))this.OnError(this._Errors);ITHit.Events.DispatchEvent(this,"OnError",[this._Errors])}else{if(ITHit.Utils.IsFunction(this.OnSuccess))this.OnSuccess.apply(this,arguments);ITHit.Events.DispatchEvent(this,"OnSuccess",arguments)}this._DestroyEvents();this._super()},
_TriggerAbort:function(){if(ITHit.Utils.IsFunction(this.OnFinish))this.OnFinish(arguments,this._Errors);ITHit.Events.DispatchEvent(this,"OnFinish",[[],this._Errors]);if(ITHit.Utils.IsFunction(this.OnAbort))this.OnAbort(arguments);ITHit.Events.DispatchEvent(this,"OnAbort",arguments);this._DestroyEvents();this._super()},_TriggerFinishUnExecute:function(){if(ITHit.Utils.IsFunction(this.OnUndo))this.OnUndo(arguments);ITHit.Events.DispatchEvent(this,"OnUndo",arguments);this._super()}})})();
(function(){var self=ITHit.DefineClass("ITHit.WebDAV.Client.AjaxFileBrowser.Commands.CopyCommand",ITHit.WebDAV.Client.AjaxFileBrowser.Commands.BaseRequestCommand,{Href:null,ToFolderHref:null,NewName:null,Overwrite:false,_Item:null,_FolderItem:null,GetTitle:function(){return ITHit.Phrases.AjaxFileBrowser.Commands.Names.Copy},GetProcessTitle:function(){var sFolderName=self.GetNameFromHref(this.Href);return ITHit.Phrases.AjaxFileBrowser.Commands.Process.Copy.Paste(sFolderName)},IsEditable:function(){return true},
GetFutureUrl:function(){var isFolder=this.Href.substr(this.Href.length-1,1)==="/";return this.ToFolderHref+this.NewName+(isFolder?"/":"")},_Initialize:function(){if(this.Href===null||this.ToFolderHref===null)throw new ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions.AjaxFileBrowserException("Params `Href`, `ToFolderHref` is required in Copy/Move Command.");this.Href=this._CommandsController.NormalizeUrl(this.Href);this.ToFolderHref=this._CommandsController.NormalizeFolderUrl(this.ToFolderHref);if(this.NewName===
null){var aMatches=/([^\/]+)\/?$/.exec(this.Href);if(aMatches===null)throw new ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions.AjaxFileBrowserException("Cannot parse item name in href `"+this.Href+"`");this.NewName=aMatches[1]}},_ExecuteInternal:function(){var that=this;ITHit.WebDAV.Client.AjaxFileBrowser.Commands.LoadItemCommand.LoadInline(this,this.Href,false,function(oItem){that._Item=oItem;ITHit.WebDAV.Client.AjaxFileBrowser.Commands.LoadItemCommand.LoadInline(that,that.ToFolderHref,false,function(oFolderItem){that._FolderItem=
oFolderItem;if(that.Href===that.GetFutureUrl())that._CheckAndAppendCopySuffix(function(){that._DoCopy()});else that._DoCopy()})})},_UnExecuteInternal:function(){if(this._Item===null||this._FolderItem===null)return;var that=this;var sItemUrl=this._FolderItem.Href+(this.NewName||this._Item.DisplayName);ITHit.WebDAV.Client.AjaxFileBrowser.Commands.DeleteCommand.DeleteInline(that,sItemUrl,function(mResult){that._TriggerFinishUnExecute(mResult)})},_DoCopy:function(){var that=this;self.CopyInline(this,
this._Item,this._FolderItem,this.NewName,this.Overwrite,function(){that._TriggerFinish()})},_CheckAndAppendCopySuffix:function(fCallback){var that=this;ITHit.WebDAV.Client.AjaxFileBrowser.Commands.ItemExistsCommand.CheckInline(this,this.GetFutureUrl(),false,function(bExists){if(!bExists){fCallback();return}var aExtensionMatches=/\.[^\.]+$/.exec(that.NewName);var sName=aExtensionMatches!==null?that.NewName.replace(aExtensionMatches[0],""):that.NewName;var sDotAndExtension=aExtensionMatches!==null?
aExtensionMatches[0]:"";var sLangCopy=ITHit.Phrases.AjaxFileBrowser.Interface.CopyPattern;var oSuffixPattern=new RegExp("- "+sLangCopy+"( \\(([0-9]+)\\))?$","i");var aSuffixMatches=oSuffixPattern.exec(sName);if(aSuffixMatches===null)sName+=" - "+sLangCopy;else if(!aSuffixMatches[1])sName+=" (2)";else{var iNextNumber=parseInt(aSuffixMatches[2])+1;sName=sName.replace(oSuffixPattern,"- "+sLangCopy+" ("+iNextNumber+")")}that.NewName=sName+sDotAndExtension;that._CheckAndAppendCopySuffix(fCallback)})}},
{CopyInline:function(oCommand,oItem,oParentItem,sNewName,bOverwrite,fCallback){sNewName=sNewName||"";bOverwrite=!ITHit.Utils.IsUndefined(bOverwrite)?bOverwrite:null;sNewName=(sNewName||oItem.DisplayName)+(oItem instanceof ITHit.WebDAV.Client.AjaxFileBrowser.Folder?"/":"");oCommand.AddSessionRequest(oItem.Item.CopyToAsync(oParentItem.Item,sNewName,true,bOverwrite,null,function(oAsyncResult){oCommand.SetUpdatedUrl(oParentItem.Href+sNewName,self.UPDATE_TYPE_ADD);if(oAsyncResult.IsSuccess)fCallback.call(oCommand,
oAsyncResult.Result);else{var bIsItemExistsError=oAsyncResult.Error&&oAsyncResult.Error instanceof ITHit.WebDAV.Client.Exceptions.PreconditionFailedException;if(bOverwrite===false&&bIsItemExistsError);else{if(bIsItemExistsError)oAsyncResult.Error.Message=ITHit.Phrases.AjaxFileBrowser.Interface.ItemAlreadyExists;oCommand.AddError(oAsyncResult.Error)}fCallback.call(oCommand,null)}}))}})})();
(function(){var self=ITHit.DefineClass("ITHit.WebDAV.Client.AjaxFileBrowser.Commands.CopyQueueCommand",ITHit.WebDAV.Client.AjaxFileBrowser.Commands.QueueCommand,{HrefList:null,ToFolderHref:null,OnOverwrite:null,_OverwriteAction:null,_LastCommand:null,SetOverwriteAction:function(sAction){if(this._LastCommand===null)return;this._OverwriteAction=sAction;var oCommand=this._LastCommand;this._LastCommand=null;if(this._OverwriteAction!==self.OVERWRITE_CANCEL){if(this._OverwriteAction===self.OVERWRITE_YES||
this._OverwriteAction===self.OVERWRITE_YES_ALL){oCommand.Overwrite=true;this._RunPosition--}else this._ResetOverwrite();this._ExecuteTryNext()}else{this._Status=self.STATUS_CANCELLED;this._TriggerAbort()}},_Initialize:function(){this._OverwriteAction=self.OVERWRITE_ASK;for(var i=0,l=this.HrefList.length;i<l;i++)this._CreateCommand(this.HrefList[i])},_CreateCommand:function(sHref){return this._CommandsCollection.CreateForQueue(this,"CopyCommand",{Href:sHref,ToFolderHref:this.ToFolderHref})},_NeedOverwriteAsk:function(sUrl,
sFutureUrl){if(sUrl===sFutureUrl)return false;return this._OverwriteAction===self.OVERWRITE_ASK},_BeforeExecuteItem:function(oCommand,fNextCallback){switch(this._OverwriteAction){case self.OVERWRITE_YES:case self.OVERWRITE_YES_ALL:oCommand.Overwrite=true;break;case self.OVERWRITE_NO:case self.OVERWRITE_NO_ALL:oCommand.Overwrite=false;break;default:oCommand.Overwrite=null;break}this._ValidateCommand(oCommand);fNextCallback()},_AfterExecuteItem:function(oCommand,fNextCallback){var aErrors=oCommand.GetErrors();
if(aErrors.length===1&&aErrors[0]instanceof ITHit.WebDAV.Client.Exceptions.PreconditionFailedException){var sUrl=oCommand.Href;var sFutureUrl=oCommand.GetFutureUrl();if(this._NeedOverwriteAsk(sUrl,sFutureUrl)){oCommand.SetErrors([]);this._LastCommand=oCommand;this._TriggerOverwrite(sFutureUrl);return}}this._ResetOverwrite();fNextCallback()},_ResetOverwrite:function(){if(this._OverwriteAction===self.OVERWRITE_YES||this._OverwriteAction===self.OVERWRITE_NO)this._OverwriteAction=self.OVERWRITE_ASK},
_TriggerOverwrite:function(sFutureUrl){var sAbsoluteUrl=this._CommandsController.GetAbsolutePath(sFutureUrl,true);if(ITHit.Utils.IsFunction(this.OnOverwrite))this.OnOverwrite(sAbsoluteUrl);ITHit.Events.DispatchEvent(this,"OnOverwrite",[sAbsoluteUrl])},_ValidateCommand:function(oCommand){return true}},{OVERWRITE_CANCEL:"cancel",OVERWRITE_ASK:"ask",OVERWRITE_YES:"yes",OVERWRITE_NO:"no",OVERWRITE_YES_ALL:"yes_all",OVERWRITE_NO_ALL:"no_all"})})();
(function(){var self=ITHit.DefineClass("ITHit.WebDAV.Client.AjaxFileBrowser.Commands.CreateFolderCommand",ITHit.WebDAV.Client.AjaxFileBrowser.Commands.BaseRequestCommand,{Href:null,Name:null,GetTitle:function(){return ITHit.Phrases.AjaxFileBrowser.Commands.Names.CreateFolder},GetProcessTitle:function(){return ITHit.Phrases.AjaxFileBrowser.Commands.Process.CreateFolder.Paste(this.Name)},IsEditable:function(){return true},_Initialize:function(){if(this.Href===null)throw new ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions.AjaxFileBrowserException("Param `Href` is required in CreateFolderCommand.");
if(this.Name===null){var aMatches=/([^\/]+)\/?$/.exec(this.Href);if(aMatches===null)throw new ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions.AjaxFileBrowserException("Cannot parse folder name in href `"+this.Href+"`.");this.Name=aMatches[1];this.Href=this.Href.replace(aMatches[0],"")}this.Href=this._CommandsController.NormalizeFolderUrl(this.Href);this.Name=this._CommandsController.NormalizeFolderName(this.Name)},_ExecuteInternal:function(){if(!this._CommandsController.ValidateName(this,this.Name)){this._TriggerFinish();
return}var that=this;var sNewUrl=this.Href+this.Name+"/";var sAbsoluteNewUrl=decodeURI(this._CommandsController.GetAbsolutePath(sNewUrl));this.AddSessionRequest(this._CommandsController.WebDavSession.CreateFolderAsync(sAbsoluteNewUrl,null,function(oAsyncResult){that.SetUpdatedUrl(sNewUrl,self.UPDATE_TYPE_ADD);if(!oAsyncResult.IsSuccess){that.AddError(oAsyncResult.Error);that._TriggerFinish()}else that._TriggerFinish(oAsyncResult.Result)}))},_UnExecuteInternal:function(){var that=this;ITHit.WebDAV.Client.AjaxFileBrowser.Commands.DeleteCommand.DeleteInline(that,
this.Href+this.Name+"/",function(mResult){that._TriggerFinishUnExecute(mResult)})}})})();
(function(){var self=ITHit.DefineClass("ITHit.WebDAV.Client.AjaxFileBrowser.Commands.DeleteCommand",ITHit.WebDAV.Client.AjaxFileBrowser.Commands.BaseRequestCommand,{Href:null,_Item:null,GetTitle:function(){return ITHit.Phrases.AjaxFileBrowser.Commands.Names.Delete},GetProcessTitle:function(){var sFolderName=self.GetNameFromHref(this.Href);return ITHit.Phrases.AjaxFileBrowser.Commands.Process.Delete.Paste(sFolderName)},IsEditable:function(){return true},_Initialize:function(){if(this.Href===null)throw new ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions.AjaxFileBrowserException("Params `Href` is required in DeleteCommand.");
this.Href=this._CommandsController.NormalizeUrl(this.Href)},_ExecuteInternal:function(){var that=this;self.DeleteInline(that,this.Href,function(mResult){that._TriggerFinish(mResult)})},_UnExecuteInternal:function(){this._CommandsController.Session.Undelete(this._Item);this.SetUpdatedUrl(this.Href,self.UPDATE_TYPE_ADD);this._TriggerFinishUnExecute()}},{DeleteInline:function(oCommand,sUrl,fCallback){var oCommandsController=oCommand.GetCommandsController();var sEncodedAbsoluteUrl=oCommandsController.GetAbsolutePath(sUrl,
true);oCommand.AddSessionRequest(oCommandsController.WebDavSession.DeleteAsync(sEncodedAbsoluteUrl,null,function(oAsyncResult){oCommand.SetUpdatedUrl(sUrl,self.UPDATE_TYPE_REMOVE);if(oAsyncResult.IsSuccess)fCallback.call(oCommand,oAsyncResult.Result);else{oCommand.AddError(oAsyncResult.Error);fCallback.call(oCommand,null)}}))}})})();
(function(){var self=ITHit.DefineClass("ITHit.WebDAV.Client.AjaxFileBrowser.Commands.DeleteQueueCommand",ITHit.WebDAV.Client.AjaxFileBrowser.Commands.QueueCommand,{HrefList:null,_Initialize:function(){for(var i=0,l=this.HrefList.length;i<l;i++)this._CommandsCollection.CreateForQueue(this,"DeleteCommand",{Href:this.HrefList[i]})}})})();
(function(){var self=ITHit.DefineClass("ITHit.WebDAV.Client.AjaxFileBrowser.Commands.ItemExistsCommand",ITHit.WebDAV.Client.AjaxFileBrowser.Commands.BaseRequestCommand,{Href:null,IgnoreCache:false,_Initialize:function(){if(this.Href===null)throw new ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions.AjaxFileBrowserException("Param `Href` is required in ItemExistsCommand.");this.Href=this._CommandsController.NormalizeUrl(this.Href)},_ExecuteInternal:function(){var that=this;self.CheckInline(this,this.Href,
this.IgnoreCache,function(bExists){that._TriggerFinish(bExists)})}},{CheckInline:function(oCommand,sUrl,bIgnoreCache,fCallback){var aErrors=[].concat(oCommand.GetErrors());ITHit.WebDAV.Client.AjaxFileBrowser.Commands.LoadItemCommand.LoadInline(oCommand,sUrl,bIgnoreCache,function(oItem){oCommand.SetErrors(aErrors);fCallback(!!oItem)})}})})();
(function(){var self=ITHit.DefineClass("ITHit.WebDAV.Client.AjaxFileBrowser.Commands.LoadItemCommand",ITHit.WebDAV.Client.AjaxFileBrowser.Commands.BaseRequestCommand,{Href:null,IgnoreCache:false,GetTitle:function(){return ITHit.Phrases.AjaxFileBrowser.Commands.Names.LoadItem},GetProcessTitle:function(){var sFolderName=self.GetNameFromHref(this.Href);return ITHit.Phrases.AjaxFileBrowser.Commands.Process.LoadItem.Paste(sFolderName)},_Initialize:function(){if(this.Href===null)throw new ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions.AjaxFileBrowserException("Param `Href` is required in LoadItemCommand.");
this.Href=this._CommandsController.NormalizeUrl(this.Href)},_ExecuteInternal:function(){var that=this;self.LoadInline(this,this.Href,this.IgnoreCache,function(oItem){that._TriggerFinish(oItem)})}},{LoadInline:function(oCommand,sUrl,bIgnoreCache,fCallback){var oCommandsController=oCommand.GetCommandsController();var sAbsoluteUrl=oCommandsController.GetAbsolutePath(sUrl,true);if(!bIgnoreCache&&oCommandsController.ResourcesCollection.Has(sUrl)){var oItem=oCommandsController.ResourcesCollection.Get(sUrl);
if(oItem===null)oCommand.AddError(ITHit.Phrases.AjaxFileBrowser.Interface.NotFoundLocation.Paste(sAbsoluteUrl));fCallback.call(oCommand,oItem);return}var sEncodedAbsoluteUrl=oCommandsController.GetAbsolutePath(ITHit.WebDAV.Client.Encoder.Encode(sUrl),true);oCommand.AddSessionRequest(oCommandsController.WebDavSession.OpenItemAsync(sEncodedAbsoluteUrl,function(oAsyncResult){var oItem=null;if(oAsyncResult.IsSuccess)oItem=oAsyncResult.Result instanceof ITHit.WebDAV.Client.Folder?new ITHit.WebDAV.Client.AjaxFileBrowser.Folder(oAsyncResult.Result):
new ITHit.WebDAV.Client.AjaxFileBrowser.Resource(oAsyncResult.Result);else{oAsyncResult.Error.Message=ITHit.Phrases.AjaxFileBrowser.Interface.NotFoundLocation.Paste(sAbsoluteUrl);oCommand.AddError(oAsyncResult.Error)}oCommandsController.ResourcesCollection.Set(sUrl,oItem);fCallback.call(oCommand,oItem)}))}})})();
(function(){var self=ITHit.DefineClass("ITHit.WebDAV.Client.AjaxFileBrowser.Commands.LoadItemProperties",ITHit.WebDAV.Client.AjaxFileBrowser.Commands.BaseRequestCommand,{Href:null,_Initialize:function(){if(this.Href===null)throw new ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions.AjaxFileBrowserException("Param `Href` is required in LoadItemProperties.");this.Href=this._CommandsController.NormalizeUrl(this.Href)},_ExecuteInternal:function(){var that=this;ITHit.WebDAV.Client.AjaxFileBrowser.Commands.LoadItemCommand.LoadInline(this,
this.Href,false,function(oItem){if(!oItem){that._TriggerFinish();return}that.AddSessionRequest(oItem.Item.GetAllPropertiesAsync(function(oAsyncResult){if(!oAsyncResult.IsSuccess)that.AddError(oAsyncResult.Error);that._TriggerFinish(oAsyncResult.Result)}))})}})})();
(function(){var self=ITHit.DefineClass("ITHit.WebDAV.Client.AjaxFileBrowser.Commands.LoadItemSyncCommand",ITHit.WebDAV.Client.AjaxFileBrowser.Commands.BaseRequestCommand,{Href:null,IgnoreCache:false,GetTitle:function(){return ITHit.Phrases.AjaxFileBrowser.Commands.Names.LoadItem},GetProcessTitle:function(){var sFolderName=self.GetNameFromHref(this.Href);return ITHit.Phrases.AjaxFileBrowser.Commands.Process.LoadItem.Paste(sFolderName)},_Initialize:function(){if(this.Href===null)throw new ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions.AjaxFileBrowserException("Param `Href` is required in LoadItemCommand.");
this.Href=this._CommandsController.NormalizeUrl(this.Href)},_ExecuteInternal:function(){var oItem=self.LoadInline(this,this.Href,this.IgnoreCache);this._TriggerFinish(oItem)}},{LoadInline:function(oCommand,sUrl,bIgnoreCache){var oCommandsController=oCommand.GetCommandsController();var sAbsoluteUrl=oCommandsController.GetAbsolutePath(sUrl,true);if(!bIgnoreCache&&oCommandsController.ResourcesCollection.Has(sUrl)){var oItem=oCommandsController.ResourcesCollection.Get(sUrl);if(oItem===null)oCommand.AddError(ITHit.Phrases.AjaxFileBrowser.Interface.NotFoundLocation.Paste(sAbsoluteUrl));
return oItem}var oItem=null;var sEncodedAbsoluteUrl=oCommandsController.GetAbsolutePath(sUrl);try{oItem=oCommandsController.WebDavSession.OpenItem(sEncodedAbsoluteUrl)}catch(oException){oException.Message=ITHit.Phrases.AjaxFileBrowser.Interface.NotFoundLocation.Paste(sAbsoluteUrl);oCommand.AddError(oException)}if(oItem){oItem=oItem instanceof ITHit.WebDAV.Client.Folder?new ITHit.WebDAV.Client.AjaxFileBrowser.Folder(oItem):new ITHit.WebDAV.Client.AjaxFileBrowser.Resource(oItem);oCommandsController.ResourcesCollection.Set(sUrl,
oItem)}return oItem}})})();
(function(){var self=ITHit.DefineClass("ITHit.WebDAV.Client.AjaxFileBrowser.Commands.LoadItemVersions",ITHit.WebDAV.Client.AjaxFileBrowser.Commands.BaseRequestCommand,{Href:null,_Initialize:function(){if(this.Href===null)throw new ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions.AjaxFileBrowserException("Param `Href` is required in LoadItemVersions.");this.Href=this._CommandsController.NormalizeUrl(this.Href)},_ExecuteInternal:function(){var that=this;ITHit.WebDAV.Client.AjaxFileBrowser.Commands.LoadItemCommand.LoadInline(this,this.Href,
false,function(oItem){if(!oItem){that._TriggerFinish();return}that.AddSessionRequest(oItem.Item.GetVersionsAsync(function(oAsyncResult){if(!oAsyncResult.IsSuccess)oAsyncResult.Result=[];that._TriggerFinish(oAsyncResult.Result)}))})}})})();
(function(){var self=ITHit.DefineClass("ITHit.WebDAV.Client.AjaxFileBrowser.Commands.LoadFolderCommand",ITHit.WebDAV.Client.AjaxFileBrowser.Commands.BaseRequestCommand,{Href:null,IgnoreCache:false,GetTitle:function(){return ITHit.Phrases.AjaxFileBrowser.Commands.Names.LoadFolder},GetProcessTitle:function(){var sFolderName=self.GetNameFromHref(this.Href);return ITHit.Phrases.AjaxFileBrowser.Commands.Process.LoadFolder.Paste(sFolderName)},_Initialize:function(){if(this.Href===null)throw new ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions.AjaxFileBrowserException("Param `Href` is required in LoadFoldersCommand.");
this.Href=this._CommandsController.NormalizeFolderUrl(this.Href)},_ExecuteInternal:function(){ITHit.WebDAV.Client.AjaxFileBrowser.Commands.LoadItemCommand.LoadInline(this,this.Href,false,function(oItem){if(!oItem){this._TriggerFinish();return}this._LoadFolderItems(oItem,function(aChildren){this._TriggerFinish(oItem,aChildren)})})},_LoadFolderItems:function(oItem,fCallback){if(!this.IgnoreCache&&this._CommandsController.FoldersCollection.Has(oItem.Href)){fCallback.call(this,this._CommandsController.FoldersCollection.Get(oItem.Href));
return}var that=this;this.AddSessionRequest(oItem.Item.GetChildrenAsync(false,this._CommandsController.ChildrenProperties,function(oAsyncResult){var aItems=[];if(!oAsyncResult.IsSuccess)that.AddError(oAsyncResult.Error);else{for(var i=0,l=oAsyncResult.Result.length;i<l;i++)aItems.push(oAsyncResult.Result[i]instanceof ITHit.WebDAV.Client.Folder?new ITHit.WebDAV.Client.AjaxFileBrowser.Folder(oAsyncResult.Result[i]):new ITHit.WebDAV.Client.AjaxFileBrowser.Resource(oAsyncResult.Result[i]));that._CommandsController.FoldersCollection.Set(oItem.Href,
aItems);for(var i=0,l=aItems.length;i<l;i++)that._CommandsController.ResourcesCollection.Set(aItems[i].Href,aItems[i])}fCallback.call(that,aItems)}))}})})();
(function(){var self=ITHit.DefineClass("ITHit.WebDAV.Client.AjaxFileBrowser.Commands.LoadFolderSyncCommand",ITHit.WebDAV.Client.AjaxFileBrowser.Commands.BaseRequestCommand,{Href:null,IgnoreCache:false,GetTitle:function(){return ITHit.Phrases.AjaxFileBrowser.Commands.Names.LoadFolder},GetProcessTitle:function(){var sFolderNameMatches=/([^\/]+)\/?$/.exec(this.Href);var sFolderName=sFolderNameMatches!==null?sFolderNameMatches[1]:this.Href;return ITHit.Phrases.AjaxFileBrowser.Commands.Process.LoadFolder.Paste(sFolderName)},
_Initialize:function(){if(this.Href===null)throw new ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions.AjaxFileBrowserException("Param `Href` is required in LoadFoldersSyncCommand.");this.Href=this._CommandsController.NormalizeFolderUrl(this.Href)},_ExecuteInternal:function(){var oItem=ITHit.WebDAV.Client.AjaxFileBrowser.Commands.LoadItemSyncCommand.LoadInline(this,this.Href,false);if(!oItem){this._TriggerFinish();return}var aChildren=this._LoadFolderItems(oItem);this._TriggerFinish(oItem,aChildren)},
_LoadFolderItems:function(oItem){if(!this.IgnoreCache&&this._CommandsController.FoldersCollection.Has(oItem.Href))return this._CommandsController.FoldersCollection.Get(oItem.Href);var aResultItems=[];try{aResultItems=oItem.Item.GetChildren(false,this._CommandsController.ChildrenProperties)}catch(oException){this.AddError(oException)}var aItems=[];for(var i=0,l=aResultItems.length;i<l;i++)aItems.push(aResultItems[i]instanceof ITHit.WebDAV.Client.Folder?new ITHit.WebDAV.Client.AjaxFileBrowser.Folder(aResultItems[i]):
new ITHit.WebDAV.Client.AjaxFileBrowser.Resource(aResultItems[i]));this._CommandsController.FoldersCollection.Set(oItem.Href,aItems);for(var i=0,l=aItems.length;i<l;i++)this._CommandsController.ResourcesCollection.Set(aItems[i].Href,aItems[i]);return aItems}})})();
(function(){var self=ITHit.DefineClass("ITHit.WebDAV.Client.AjaxFileBrowser.Commands.LoadTreeFoldersCommand",ITHit.WebDAV.Client.AjaxFileBrowser.Commands.LoadFolderCommand,{Href:null,_Items:null,_LoadedFolderItems:null,constructor:function(){this._super.apply(this,arguments);this._Items={};this._LoadedFolderItems={}},GetTitle:function(){return ITHit.Phrases.AjaxFileBrowser.Commands.Names.LoadTree},GetProcessTitle:function(){var sFolderNameMatches=/([^\/]+)\/?$/.exec(this.Href);var sFolderName=sFolderNameMatches!==
null?sFolderNameMatches[1]:this.Href;return ITHit.Phrases.AjaxFileBrowser.Commands.Process.LoadTree.Paste(sFolderName)},_Initialize:function(){if(this.Href===null)throw new ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions.AjaxFileBrowserException("Param `Href` is required in LoadTreeFoldersCommand.");this.Href=this._CommandsController.NormalizeFolderUrl(this.Href)},_ExecuteInternal:function(){var sBaseUrl=this._CommandsController.BaseUrl;var aPath=decodeURI(this.Href).substr(sBaseUrl.length).replace(/^\/|\/$/g,
"").split("/");this._LoadRecursive(sBaseUrl,aPath)},_LoadRecursive:function(sCurrentPath,aPath){ITHit.WebDAV.Client.AjaxFileBrowser.Commands.LoadItemCommand.LoadInline(this,sCurrentPath,false,function(oItem){if(!oItem){this._TriggerFinish(this._Items,this._LoadedFolderItems);return}this._Items[oItem.Href]=oItem;this._LoadFolderItems(oItem,function(aItems){this._LoadedFolderItems[sCurrentPath]=aItems;if(aPath.length===0||aPath[0]===""){this._TriggerFinish(this._Items,this._LoadedFolderItems);return}var sDirName=
aPath.shift()+"/";this._LoadRecursive(sCurrentPath+sDirName,aPath)})})}})})();
(function(){var self=ITHit.DefineClass("ITHit.WebDAV.Client.AjaxFileBrowser.Commands.LoadUploadProgressCommand",ITHit.WebDAV.Client.AjaxFileBrowser.Commands.BaseRequestCommand,{Href:null,_Initialize:function(){if(this.Href===null)throw new ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions.AjaxFileBrowserException("Param `Href` is required in LoadUploadProgressCommand.");this.Href=this._CommandsController.NormalizeUrl(this.Href)},_ExecuteInternal:function(){var that=this;var sEncodedAbsoluteUrl=this._CommandsController.GetAbsolutePath(ITHit.WebDAV.Client.Encoder.Encode(this.Href),
true);this.AddSessionRequest(this._CommandsController.WebDavSession.GetUploadProgressAsync(sEncodedAbsoluteUrl,function(oResponse){if(!oResponse.IsSuccess)that.AddError(oResponse.Error);that._TriggerFinish(oResponse.Result)}))}})})();
(function(){var self=ITHit.DefineClass("ITHit.WebDAV.Client.AjaxFileBrowser.Commands.LoadUploadProgressSyncCommand",ITHit.WebDAV.Client.AjaxFileBrowser.Commands.BaseRequestCommand,{Href:null,_Initialize:function(){if(this.Href===null)throw new ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions.AjaxFileBrowserException("Param `Href` is required in LoadUploadProgressCommand.");this.Href=this._CommandsController.NormalizeUrl(this.Href)},_ExecuteInternal:function(){var sEncodedAbsoluteUrl=this._CommandsController.GetAbsolutePath(ITHit.WebDAV.Client.Encoder.Encode(this.Href),
true);var oReports=null;try{oReports=this._CommandsController.WebDavSession.GetUploadProgress(sEncodedAbsoluteUrl)}catch(oException){this.AddError(oException)}this._TriggerFinish(oReports)}})})();
(function(){var self=ITHit.DefineClass("ITHit.WebDAV.Client.AjaxFileBrowser.Commands.LoadSupportedFeaturesCommand",ITHit.WebDAV.Client.AjaxFileBrowser.Commands.BaseRequestCommand,{Href:null,_Initialize:function(){if(this.Href===null)throw new ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions.AjaxFileBrowserException("Params `Href` is required in LoadSupportedFeaturesCommand Command.");this.Href=this._CommandsController.NormalizeUrl(this.Href)},_ExecuteInternal:function(){var that=this;var sAbsoluteNewUrl=
this._CommandsController.GetAbsolutePath(this.Href);this.AddSessionRequest(this._CommandsController.WebDavSession.GetSupportedFeaturesAsync(sAbsoluteNewUrl,function(oAsyncResult){if(!oAsyncResult.IsSuccess)that.AddError(oAsyncResult.Error);that._TriggerFinish(oAsyncResult.Result)}))}})})();
(function(){var self=ITHit.DefineClass("ITHit.WebDAV.Client.AjaxFileBrowser.Commands.MoveCommand",ITHit.WebDAV.Client.AjaxFileBrowser.Commands.CopyCommand,{GetTitle:function(){return ITHit.Phrases.AjaxFileBrowser.Commands.Names.Move},GetProcessTitle:function(){var sFolderName=self.GetNameFromHref(this.Href);return ITHit.Phrases.AjaxFileBrowser.Commands.Process.Move.Paste(sFolderName)},_ExecuteInternal:function(){var that=this;ITHit.WebDAV.Client.AjaxFileBrowser.Commands.LoadItemCommand.LoadInline(this,
this.Href,false,function(oItem){that._Item=oItem;ITHit.WebDAV.Client.AjaxFileBrowser.Commands.LoadItemCommand.LoadInline(that,that.ToFolderHref,false,function(oFolderItem){that._FolderItem=oFolderItem;self.MoveInline(that,that._Item,that._FolderItem,that.NewName,that.Overwrite,function(){that._TriggerFinish()})})})},_UnExecuteInternal:function(){if(this._Item===null||this._FolderItem===null)return;var that=this;var sDestinationFolderPath=ITHit.WebDAV.Client.HierarchyItem.GetFolderParentUri(this._Item.Href);
ITHit.WebDAV.Client.AjaxFileBrowser.Commands.LoadItemCommand.LoadInline(this,sDestinationFolderPath,false,function(oDestinationFolderItem){if(!oDestinationFolderItem){that._TriggerFinishUnExecute();return}ITHit.WebDAV.Client.AjaxFileBrowser.Commands.LoadItemCommand.LoadInline(that,that._FolderItem.Href+that._Item.DisplayName,false,function(oSourceFolderItem){if(!oSourceFolderItem){that._TriggerFinishUnExecute();return}self.MoveInline(that,oSourceFolderItem,oDestinationFolderItem,that.Overwrite,that._Item.DisplayName,
function(){that._TriggerFinishUnExecute()})})})}},{MoveInline:function(oCommand,oItem,oParentItem,sNewName,bOverwrite,fCallback){sNewName=sNewName||"";bOverwrite=!ITHit.Utils.IsUndefined(bOverwrite)?bOverwrite:null;var sName=(sNewName||oItem.DisplayName)+(oItem instanceof ITHit.WebDAV.Client.AjaxFileBrowser.Folder?"/":"");var sEncodedName=sName;oCommand.AddSessionRequest(oItem.Item.MoveToAsync(oParentItem.Item,sEncodedName,bOverwrite,null,function(oAsyncResult){oCommand.SetUpdatedUrl(oItem.Href,self.UPDATE_TYPE_REMOVE);
oCommand.SetUpdatedUrl(oParentItem.Href+sName,self.UPDATE_TYPE_ADD);if(oAsyncResult.IsSuccess)fCallback.call(oCommand,oAsyncResult.Result);else{var bIsItemExistsError=oAsyncResult.Error&&oAsyncResult.Error instanceof ITHit.WebDAV.Client.Exceptions.PreconditionFailedException;if(bOverwrite===false&&bIsItemExistsError);else{if(bIsItemExistsError)oAsyncResult.Error.Message=ITHit.Phrases.AjaxFileBrowser.Interface.ItemAlreadyExists;oCommand.AddError(oAsyncResult.Error)}fCallback.call(oCommand,null)}}))}})})();
(function(){var self=ITHit.DefineClass("ITHit.WebDAV.Client.AjaxFileBrowser.Commands.MoveQueueCommand",ITHit.WebDAV.Client.AjaxFileBrowser.Commands.CopyQueueCommand,{_CreateCommand:function(sHref){return this._CommandsCollection.CreateForQueue(this,"MoveCommand",{Href:sHref,ToFolderHref:this.ToFolderHref})},_NeedOverwriteAsk:function(sUrl,sFutureUrl){return this._OverwriteAction===self.OVERWRITE_ASK},_ValidateCommand:function(oCommand){var sFutureUrl=oCommand.GetFutureUrl();if(sFutureUrl.indexOf(oCommand.Href)===
0){var isFolder=oCommand.Href.substr(oCommand.Href.length-1,1)==="/";var sMessage=isFolder?ITHit.Phrases.AjaxFileBrowser.Interface.MoveFolderToSubfolderRestriction:ITHit.Phrases.AjaxFileBrowser.Interface.MoveFileToSameDirectoryRestriction;oCommand.AddError(sMessage);return false}return true}})})();
(function(){var self=ITHit.DefineClass("ITHit.WebDAV.Client.AjaxFileBrowser.Commands.PropertiesUpdate",ITHit.WebDAV.Client.AjaxFileBrowser.Commands.BaseRequestCommand,{Href:null,PropertiesToUpdate:null,PropertiesToDelete:null,_Initialize:function(){if(this.Href===null||this.PropertiesToUpdate===null&&this.PropertiesToDelete===null)throw new ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions.AjaxFileBrowserException("Params `Href` and `PropertiesToUpdate` or `PropertiesToDelete` is required in PropertiesUpdate.");
this.Href=this._CommandsController.NormalizeUrl(this.Href)},_ExecuteInternal:function(){var that=this;ITHit.WebDAV.Client.AjaxFileBrowser.Commands.LoadItemCommand.LoadInline(this,this.Href,false,function(oItem){if(!oItem){that._TriggerFinish(false);return}that.AddSessionRequest(oItem.Item.UpdatePropertiesAsync(that.PropertiesToUpdate,that.PropertiesToDelete,null,function(oAsyncResult){if(!oAsyncResult.IsSuccess)that.AddError(oAsyncResult.Error);that._TriggerFinish(oAsyncResult.Result)}))})}})})();
(function(){var self=ITHit.DefineClass("ITHit.WebDAV.Client.AjaxFileBrowser.Commands.RenameCommand",ITHit.WebDAV.Client.AjaxFileBrowser.Commands.BaseRequestCommand,{Href:null,NewName:null,ReturnException:false,_Item:null,_ParentItem:null,GetTitle:function(){return ITHit.Phrases.AjaxFileBrowser.Commands.Names.Rename},GetProcessTitle:function(){var sFolderName=self.GetNameFromHref(this.Href);return ITHit.Phrases.AjaxFileBrowser.Commands.Process.Rename.Paste(sFolderName)},IsEditable:function(){return true},
GetFutureUrl:function(){var isFolder=this.Href.substr(this.Href.length-1,1)==="/";var sParentFolderUrl=ITHit.WebDAV.Client.HierarchyItem.GetFolderParentUri(this.Href);return sParentFolderUrl+this.NewName+(isFolder?"/":"")},_Initialize:function(){if(this.Href===null||this.NewName===null)throw new ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions.AjaxFileBrowserException("Params `Href` and `NewName` is required in RenameCommand.");this.Href=this._CommandsController.NormalizeUrl(this.Href);this.NewName=
/\/$/.test(this.Href)?this._CommandsController.NormalizeFolderName(this.NewName):this._CommandsController.NormalizeFileName(this.NewName)},_ExecuteInternal:function(){if(!this._CommandsController.ValidateName(this,this.NewName)){this._TriggerFinish();return}var that=this;ITHit.WebDAV.Client.AjaxFileBrowser.Commands.LoadItemCommand.LoadInline(this,this.Href,false,function(oItem){if(!oItem){that._TriggerFinish();return}that._Item=oItem;if(oItem.DisplayName===that.NewName){that._TriggerFinish();return}var sParentUrl=
ITHit.WebDAV.Client.HierarchyItem.GetFolderParentUri(that.Href);ITHit.WebDAV.Client.AjaxFileBrowser.Commands.LoadItemCommand.LoadInline(that,sParentUrl,false,function(oParentItem){if(!oParentItem){that._TriggerFinish();return}that._ParentItem=oParentItem;self.RenameInline(that,that._Item,that._ParentItem,that.NewName,function(){that._TriggerFinish()})})})},_UnExecuteInternal:function(){if(this._Item===null||this._ParentItem===null)return;var that=this;ITHit.WebDAV.Client.AjaxFileBrowser.Commands.LoadItemCommand.LoadInline(this,
this._ParentItem.Href+this.NewName,false,function(oItem){if(!oItem){that._TriggerFinishUnExecute();return}if(oItem)self.RenameInline(that,oItem,that._ParentItem,that._Item.DisplayName,function(){that._TriggerFinishUnExecute()});else that._TriggerFinishUnExecute()})}},{RenameInline:function(oCommand,oItem,oParentItem,sNewName,fCallback){ITHit.WebDAV.Client.AjaxFileBrowser.Commands.MoveCommand.MoveInline(oCommand,oItem,oParentItem,sNewName,null,fCallback)}})})();
(function(){var self=ITHit.DefineClass("ITHit.WebDAV.Client.AjaxFileBrowser.Commands.SearchCommand",ITHit.WebDAV.Client.AjaxFileBrowser.Commands.BaseRequestCommand,{Href:null,Query:null,QueryObject:null,EnableContains:true,GetTitle:function(){return ITHit.Phrases.AjaxFileBrowser.Commands.Names.Search},GetProcessTitle:function(){return ITHit.Phrases.AjaxFileBrowser.Commands.Process.Search.Paste(this.Query)},NormalizeQuery:function(sQuery){sQuery=sQuery.replace(/^\s+|\s+$/g,"");sQuery=sQuery.replace(/([_%\\])/g,
"\\$1");sQuery=sQuery.replace(/\*/g,"%");sQuery=sQuery.replace(/\?/g,"_");if(sQuery&&/^".+"$/.test(sQuery)===false)sQuery=sQuery.replace(/%?$/,"%");sQuery=sQuery.replace(/^"|"$/g,"");return sQuery},_Initialize:function(){if(this.Href===null||this.Query===null)throw new ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions.AjaxFileBrowserException("Param `Href`, `Query` is required in SearchCommand.");this.Query=this.NormalizeQuery(this.Query);this.Href=this._CommandsController.NormalizeFolderUrl(this.Href)},
_ExecuteInternal:function(){if(this.Query===""){this._TriggerFinish([]);return}var that=this;ITHit.WebDAV.Client.AjaxFileBrowser.Commands.LoadItemCommand.LoadInline(this,this.Href,false,function(oItem){if(!oItem){that._TriggerFinish(null,[]);return}if(!(oItem instanceof ITHit.WebDAV.Client.AjaxFileBrowser.Folder)){that.AddError(new ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions.AjaxFileBrowserException(ITHit.Phrases.AjaxFileBrowser.Exceptions.TrySearchByResource));that._TriggerFinish(null,[]);return}this.QueryObject=
new ITHit.WebDAV.Client.SearchQuery(that.Query);this.QueryObject.SelectProperties=this._CommandsController.ChildrenProperties;this.QueryObject.EnableContains=this.EnableContains;that.AddSessionRequest(oItem.Item.SearchByQueryAsync(this.QueryObject,function(oAsyncResult){var aItems=[];if(!oAsyncResult.IsSuccess)that.AddError(oAsyncResult.Error);else{for(var i=0,l=oAsyncResult.Result.length;i<l;i++)aItems.push(oAsyncResult.Result[i]instanceof ITHit.WebDAV.Client.Folder?new ITHit.WebDAV.Client.AjaxFileBrowser.Folder(oAsyncResult.Result[i]):
new ITHit.WebDAV.Client.AjaxFileBrowser.Resource(oAsyncResult.Result[i]));for(var i=0,l=aItems.length;i<l;i++)that._CommandsController.ResourcesCollection.Set(aItems[i].Href,aItems[i])}that._TriggerFinish(oItem,aItems)}))})}})})();
(function(){var self=ITHit.DefineClass("ITHit.WebDAV.Client.AjaxFileBrowser.Commands.VersionDelete",ITHit.WebDAV.Client.AjaxFileBrowser.Commands.BaseRequestCommand,{Href:null,VersionHref:null,_Initialize:function(){if(this.Href===null||this.VersionHref===null)throw new ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions.AjaxFileBrowserException("Params `Href` and `VersionHref` is required in VersionDelete.");this.Href=this._CommandsController.NormalizeUrl(this.Href);this.VersionHref=this._CommandsController.NormalizeUrl(this.VersionHref)},
_ExecuteInternal:function(){var that=this;ITHit.WebDAV.Client.AjaxFileBrowser.Commands.LoadItemCommand.LoadInline(this,this.Href,false,function(oItem){if(!oItem){that._TriggerFinish(false);return}var sVersionAbsoluteHref=that._CommandsController.GetAbsolutePath(that.VersionHref,true);that.AddSessionRequest(oItem.Item.VersionDeleteAsync(sVersionAbsoluteHref,function(oAsyncResult){if(!oAsyncResult.IsSuccess)that.AddError(oAsyncResult.Error);that._TriggerFinish(oAsyncResult.Result)}))})}})})();
(function(){var self=ITHit.DefineClass("ITHit.WebDAV.Client.AjaxFileBrowser.Commands.VersionUpdate",ITHit.WebDAV.Client.AjaxFileBrowser.Commands.BaseRequestCommand,{Href:null,ToHref:null,_Initialize:function(){if(this.Href===null||this.ToHref===null)throw new ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions.AjaxFileBrowserException("Params `Href` and `ToHref` is required in VersionUpdate.");this.Href=this._CommandsController.NormalizeUrl(this.Href);this.ToHref=this._CommandsController.NormalizeUrl(this.ToHref)},
_ExecuteInternal:function(){var that=this;ITHit.WebDAV.Client.AjaxFileBrowser.Commands.LoadItemCommand.LoadInline(this,this.Href,false,function(oItem){if(!oItem){that._TriggerFinish(false);return}that.AddSessionRequest(oItem.Item.VersionUpdateAsync(that.ToHref,function(oAsyncResult){if(!oAsyncResult.IsSuccess)that.AddError(oAsyncResult.Error);that._TriggerFinish(oAsyncResult.Result)}))})}})})();
(function(){var self=ITHit.DefineClass("ITHit.WebDAV.Client.AjaxFileBrowser.Commands.CommandsCollection",null,{_CommandsController:null,HistoryList:null,HistoryPosition:0,HistoryMaxLength:8,_QueueCommand:null,_LazyUpdateUrls:null,_LastExecutedCommand:null,constructor:function(oCommandsController){this._CommandsController=oCommandsController;this.HistoryList=[];this._LazyUpdateUrls={}},BeginQueue:function(oParams){this._QueueCommand=this.Create("QueueCommand",oParams);return this._QueueCommand},EndQueue:function(){if(this._QueueCommand&&
this._QueueCommand.GetLength()>0)this._QueueCommand.Execute();return this._QueueCommand},Create:function(mCommand,oParams){oParams=oParams||{};if(ITHit.Utils.IsString(mCommand)){if(mCommand.indexOf(".")===-1)mCommand="ITHit.WebDAV.Client.AjaxFileBrowser.Commands."+mCommand;mCommand=ITHit.GetNamespace(mCommand);if(!mCommand)throw new ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions.AjaxFileBrowserException("Not found class `"+mCommand+"` for create command.");}if(ITHit.Utils.IsFunction(mCommand))mCommand=
new mCommand(this._CommandsController,this,oParams);if(this._QueueCommand!==null)this._QueueCommand.Add(mCommand);else{if(mCommand.IsEditable()){if(this.HistoryPosition<this.HistoryList.length)this.HistoryList.splice(this.HistoryPosition,this.HistoryList.length-this.HistoryPosition);if(this.HistoryList.length>=this.HistoryMaxLength)this.HistoryList.splice(0,1);this.HistoryList.push(mCommand);this.HistoryPosition++}this._SubscribeOnCommand(mCommand)}return mCommand},CreateForQueue:function(oQueueCommand,
mCommand,oParams){var oPreviousQueueCommand=this._QueueCommand;this._QueueCommand=oQueueCommand;var oCommand=this.Create(mCommand,oParams);this._QueueCommand=oPreviousQueueCommand;return oCommand},GetLastExecutedCommand:function(){return this._LastExecutedCommand},IsFirst:function(){return this.HistoryPosition===0||this.HistoryList.length===0},IsLast:function(){return this.HistoryPosition>=this.HistoryList.length},Undo:function(){if(this.IsFirst())return;this.HistoryPosition--;this.HistoryList[this.HistoryPosition].UnExecute();
ITHit.Events.DispatchEvent(this,"OnUndo")},Redo:function(){if(this.IsLast())return;this.HistoryPosition[this.HistoryPosition].Execute();this.HistoryPosition++;ITHit.Events.DispatchEvent(this,"OnRedo")},_SubscribeOnCommand:function(oCommand){var that=this;ITHit.Events.AddListener(oCommand,"OnStart",function(){if(that._QueueCommand===oCommand)that._QueueCommand=null;ITHit.Events.DispatchEvent(this,"OnCommandStart",[oCommand])},this);ITHit.Events.AddListener(oCommand,"OnProgress",function(oProgressInfo){ITHit.Events.DispatchEvent(this,
"OnCommandProgress",[oCommand,oProgressInfo])},this);ITHit.Events.AddListener(oCommand,"OnFinish",function(aParams,aErrors){this._LastExecutedCommand=oCommand;ITHit.Events.DispatchEvent(this,"OnCommandFinish",[oCommand,aParams,aErrors])},this);ITHit.Events.AddListener(oCommand,"OnSuccess",function(){ITHit.Events.DispatchEvent(this,"OnCommandSuccess",[oCommand].concat(arguments));if(oCommand.IsEditable())this._LazyUpdate()},this);ITHit.Events.AddListener(oCommand,"OnError",function(aErrors){ITHit.Events.DispatchEvent(this,
"OnCommandError",[oCommand,aErrors]);if(oCommand.IsEditable())this._LazyUpdate()},this);ITHit.Events.AddListener(oCommand,"OnAbort",function(){ITHit.Events.DispatchEvent(this,"OnCommandAbort",[oCommand].concat(arguments));if(oCommand.IsEditable())this._LazyUpdate()},this);ITHit.Events.AddListener(oCommand,"OnUndo",function(){ITHit.Events.DispatchEvent(this,"OnCommandUndo",[oCommand].concat(arguments));if(oCommand.IsEditable())this._LazyUpdate()},this)},AddLazyUpdateUrl:function(sUrl){this._LazyUpdateUrls[sUrl]=
true},_LazyUpdate:function(){var oToUpdateUrls=this._LazyUpdateUrls;this._LazyUpdateUrls={};for(var sUrl in oToUpdateUrls){if(!oToUpdateUrls.hasOwnProperty(sUrl))continue;var isFolder=sUrl.substr(sUrl.length-1,1)==="/";var oCollection=isFolder?this._CommandsController.FoldersCollection:this._CommandsController.ResourcesCollection;oCollection.SetDeprecated(sUrl)}}})})();
(function(){var self=ITHit.DefineClass("ITHit.WebDAV.Client.AjaxFileBrowser.Commands.CommandsController",null,{Session:null,WebDavSession:null,BaseUrl:null,Host:null,ChildrenProperties:null,NotAllowedCharacters:null,ResourcesCollection:null,FoldersCollection:null,_CommandsCollections:null,_IsInitialize:false,constructor:function(){this.ChildrenProperties=[];this.HistoryList=[];this._LazyUpdateUrls={};this._CommandsCollections={};this.ResourcesCollection=new ITHit.WebDAV.Client.AjaxFileBrowser.Commands.ItemsCollection;
this.FoldersCollection=new ITHit.WebDAV.Client.AjaxFileBrowser.Commands.ItemsCollection;this._CreateMainCollection()},HasCors:function(){return location.protocol+"//"+location.host+"/"!==this.Host},CreateCollection:function(sName){if(this._CommandsCollections[sName])throw new ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions.AjaxFileBrowserException("Commands collection with name `"+sName+"` is already exists.");return this._CommandsCollections[sName]=new ITHit.WebDAV.Client.AjaxFileBrowser.Commands.CommandsCollection(this)},
CheckToLazyInit:function(fCallback){if(this._IsInitialize){fCallback();return}this._IsInitialize=true;this.LoadRootUrl(function(){fCallback()})},SetRootUrl:function(sAbsoluteUrl){this.Host=this.NormalizeHostName(sAbsoluteUrl);this.BaseUrl=ITHit.WebDAV.Client.AjaxFileBrowser.UrlUtils.GetRelativePath(sAbsoluteUrl);this.ResourcesCollection.RemoveAll();this.FoldersCollection.RemoveAll();try{this.Session=new ITHit.WebDAV.Client.AjaxFileBrowser.Session(this.Host)}catch(e){throw new ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions.AjaxFileBrowserException(ITHit.Phrases.AjaxFileBrowser.Exceptions.SessionNotStarted);
}this.WebDavSession=this.Session.GetWebDavSession();ITHit.Events.DispatchEvent(this,"OnBeforeUpdateRootUrl",[this.Host,this.BaseUrl])},LoadRootUrl:function(fCallback){fCallback=fCallback||function(){};var that=this;this._FixSafariAuth(function(){that.Create("LoadSupportedFeaturesCommand",{Href:that.GetRootUrl(),OnError:function(){that._IsInitialize=false},OnSuccess:function(oFeatures){ITHit.Events.DispatchEvent(that,"OnFetchFeatures",[oFeatures]);that.Create("LoadItemCommand",{Href:that.GetRootUrl(),
OnError:function(){that._IsInitialize=false},OnFinish:function(oItem){ITHit.Events.DispatchEvent(that,"OnUpdateRootUrl",[that.Host,that.BaseUrl]);fCallback(oItem)}}).Execute()}}).Execute()})},GetRootUrl:function(){return this.GetAbsolutePath(this.BaseUrl,true)},_FixSafariAuth:function(fCallback){if(!this.HasCors()){fCallback();return}var oIframe=document.createElement("IFRAME");oIframe.style.display="none";oIframe.src=this.GetAbsolutePath(this.BaseUrl);oIframe.onload=function(){oIframe.parentNode.removeChild(oIframe);
fCallback()};document.body.appendChild(oIframe)},SetCredentials:function(sUser,sPassword){this.Session.SetCredentials(sUser,sPassword)},BeginQueue:function(oParams){return this._GetMainCollection().BeginQueue(oParams)},EndQueue:function(){return this._GetMainCollection().EndQueue()},GetLastExecutedCommand:function(){return this._GetMainCollection().GetLastExecutedCommand()},Create:function(mCommand,oParams){return this._GetMainCollection().Create(mCommand,oParams)},CreateForQueue:function(oQueueCommand,
mCommand,oParams){return this._GetMainCollection().CreateForQueue(oQueueCommand,mCommand,oParams)},IsFirst:function(){return this._GetMainCollection().IsFirst()},IsLast:function(){return this._GetMainCollection().IsLast()},Undo:function(){this._GetMainCollection().Undo()},Redo:function(){this._GetMainCollection().Redo()},NormalizeHostName:function(sUrl){var aResults=sUrl.match(/^(http[s]?:\/\/[^\/]+)/);return aResults!==null?aResults[0]+"/":null},NormalizeUrl:function(sUrl){sUrl=ITHit.WebDAV.Client.AjaxFileBrowser.UrlUtils.GetRelativePath(sUrl);
sUrl=sUrl.replace(this.Host,"");sUrl=sUrl.replace(/\\/g,"/");return sUrl.replace(/^\/?/,"/")},NormalizeFileUrl:function(sUrl){return this.NormalizeUrl(sUrl).replace(/\/$/,"")},NormalizeFolderUrl:function(sUrl){return this.NormalizeFileUrl(sUrl)+"/"},NormalizeFileName:function(sName){sName=sName.replace(/^\s+|\s+$/g,"");return sName},NormalizeFolderName:function(sName){sName=this.NormalizeFileName(sName);sName=sName.replace(/(?:^\s+|\s+$)/g,"");return sName},ValidateName:function(oCommand,sName){if(sName===
""){oCommand.AddError(ITHit.Phrases.AjaxFileBrowser.Interface.SpecifyItemName);return false}if(this.NotAllowedCharacters){var oRegExp=new RegExp("["+this.NotAllowedCharacters+"]","g");if(oRegExp.test(sName)){var sMessage=ITHit.Phrases.AjaxFileBrowser.Interface.FileNameSpecialCharactersRestriction.Paste(this.NotAllowedCharacters.replace(/\\?(.)/g,"$1 "));oCommand.AddError(sMessage);return false}}return true},GetAbsolutePath:function(sUrl,bDoNotEncode){return this.Session.GetAbsolutePath(sUrl,bDoNotEncode)},
AddLazyUpdateUrl:function(sUrl){this._GetMainCollection().AddLazyUpdateUrl(sUrl)},_CreateMainCollection:function(){var oCommandsCollection=this.CreateCollection(self.COLLECTION_MAIN);ITHit.Events.AddListener(oCommandsCollection,"OnCommandStart",function(oCommand){ITHit.Events.DispatchEvent(this,"OnCommandStart",[oCommand])},this);ITHit.Events.AddListener(oCommandsCollection,"OnCommandProgress",function(oCommand,oProgressInfo){ITHit.Events.DispatchEvent(this,"OnCommandProgress",[oCommand,oProgressInfo])},
this);ITHit.Events.AddListener(oCommandsCollection,"OnCommandFinish",function(oCommand,aParams,aErrors){ITHit.Events.DispatchEvent(this,"OnCommandFinish",[oCommand,aParams,aErrors])},this);ITHit.Events.AddListener(oCommandsCollection,"OnCommandSuccess",function(){ITHit.Events.DispatchEvent(this,"OnCommandSuccess",arguments)},this);ITHit.Events.AddListener(oCommandsCollection,"OnCommandError",function(oCommand,aErrors){ITHit.Events.DispatchEvent(this,"OnCommandError",[oCommand,aErrors])},this);ITHit.Events.AddListener(oCommandsCollection,
"OnCommandAbort",function(oCommand){ITHit.Events.DispatchEvent(this,"OnCommandAbort",[oCommand])},this);ITHit.Events.AddListener(oCommandsCollection,"OnUndo",function(){ITHit.Events.DispatchEvent(this,"OnUndo",arguments)},this);ITHit.Events.AddListener(oCommandsCollection,"OnRedo",function(){ITHit.Events.DispatchEvent(this,"OnRedo",arguments)},this)},_GetMainCollection:function(){return this._CommandsCollections[self.COLLECTION_MAIN]}},{COLLECTION_MAIN:"main"})})();
(function(){var self=ITHit.DefineClass("ITHit.WebDAV.Client.AjaxFileBrowser.Settings.BaseSettings",null,{_Id:null,_RootNode:null,_Settings:null,_IsRendered:false,_Controller:null,constructor:function(oController){this._Controller=oController},SetSettings:function(oSettings){this._Settings=oSettings;this._SetInternal(oSettings);if(this._IsRendered)this._SetInternalAfterRender(oSettings)},TriggerRender:function(){if(this._IsRendered)return;this._IsRendered=true;this._SetInternalAfterRender(this._Settings)},
SetId:function(mParam){if(this._RootNode!==null)return;if(ITHit.Utils.IsString(mParam)){this._Id=mParam;this._RootNode=document.getElementById(mParam)}else if(ITHit.Utils.IsDOMObject(mParam)){if(!mParam.id)mParam.id="ithit_root_"+(new Date).getTime();this._Id=mParam.id;this._RootNode=mParam}else throw new ITHit.WebDAV.Client.Exceptions.InvalidConfigException(ITHit.Phrases.AjaxFileBrowser.Exceptions.WrongElementIdOrObject);},GetId:function(){return this._Id},SetRootNode:function(oNode){this.SetId(oNode)},
GetRootNode:function(){return this._RootNode},_SetInternal:function(oSettings){this.SetLanguagePack(oSettings.Phrases);this.SetId(oSettings.Id)},SetLanguagePack:function(oPhrases){},SetResumeUploadSupported:function(bIsSupported){},_SetInternalAfterRender:function(oSettings){if(!ITHit.Utils.IsUndefined(oSettings.ResumeUploadSupported))this.SetResumeUploadSupported(oSettings.ResumeUploadSupported)}},{NormalizeObjectSettings:function(oSettings,oArguments){if(!ITHit.Utils.IsObjectStrict(oSettings)||
ITHit.Utils.IsDOMObject(oSettings)){if(oArguments.length<2)throw new ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions.InvalidConfigException("To few arguments.");if(oArguments.length>4)throw new ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions.InvalidConfigException("To many arguments.");oSettings={Id:oSettings,Url:oArguments[1],Style:oArguments[2],ClassName:oArguments[3]}}if(!oSettings.Id)throw new ITHit.WebDAV.Client.Exceptions.AjaxFileBrowserException(ITHit.Phrases.AjaxFileBrowser.Exceptions.EmptyElementParameter);
return oSettings}})})();
(function(){var self=ITHit.DefineClass("ITHit.WebDAV.Client.AjaxFileBrowser.Settings.DesktopSettings",ITHit.WebDAV.Client.AjaxFileBrowser.Settings.BaseSettings,{SetLanguagePack:function(oPhrases){ITHit.Phrases.LoadLocalizedJSON(ITHit.WebDAV.Client.AjaxFileBrowser.Phrases.EN,oPhrases)},SetPanelsVisible:function(oPanels){var oApiMapping={Folders:"SetShowFolders",FilesView:"SetShowFilesView",Toolbar:"SetShowToolbar",AddressBar:"SetShowAddressBar",UploadPanel:"SetShowUploadPanel",UploadProgressPanel:"SetShowUploadProgressPanel"};
for(var sPanelName in oApiMapping){if(!oApiMapping.hasOwnProperty(sPanelName))continue;if(oPanels[sPanelName]&&!ITHit.Utils.IsUndefined(oPanels[sPanelName].Show))this._Controller[oApiMapping[sPanelName]](!!oPanels[sPanelName].Show)}},SetMofifyInstructions:function(oPanels){oPanels=ITHit.WebDAV.Client.AjaxFileBrowser.CodeConstructor.Clone(oPanels);this._Controller._MofifyInstructions=oPanels;if(oPanels.FilesView)this._ProcessCustomColumns(oPanels.FilesView.Columns||[]);if(this._IsRendered)if(oPanels.FilesView){this._Controller._Grid().Views.Grid.SetRowFormatter(oPanels.FilesView.RowFormatter);
this._Controller._Grid().Views.Grid.SetCellFormatter(oPanels.FilesView.CellFormatter);this._Controller._Grid().Views.Grid.SetTableStructure(oPanels.FilesView)}},SetResumeUploadSupported:function(bIsSupported){this._Controller._upload.SetResumeSupported(bIsSupported)},_ProcessCustomColumns:function(aColumns){for(var i=0,l=aColumns.length;i<l;i++){var oColumn=aColumns[i];if(typeof oColumn.CustomProperty==="string"){var oNameParams=oColumn.CustomProperty.split(":");if(oNameParams.length!==2)throw new ITHit.Exception("Wrong format custom property `"+
oColumn.CustomProperty+"`. Need format: `myNamespace:myPropertyName`. Or use `CustomPropertyName` and `CustomPropertyNamespace` properties.");oColumn.CustomProperty=new ITHit.WebDAV.Client.PropertyName(oNameParams[1],oNameParams[0])}else if(oColumn.CustomPropertyName&&oColumn.CustomPropertyNamespace)oColumn.CustomProperty=new ITHit.WebDAV.Client.PropertyName(oColumn.CustomPropertyName,oColumn.CustomPropertyNamespace);if(oColumn.CustomProperty instanceof ITHit.WebDAV.Client.PropertyName)this._Controller._ChildrenProperties.push(oColumn.CustomProperty)}},
_SetInternal:function(oSettings){this._super(oSettings);this.SetMofifyInstructions(oSettings.Panels||{})},_SetInternalAfterRender:function(oSettings){this._super(oSettings);this.SetPanelsVisible(oSettings.Panels||{})}})})();ITHit.oNS=ITHit.Declare("ITHit.WebDAV.Client.AjaxFileBrowser");ITHit.oNS.Version="2.6.3.2280";
ITHit.oNS.Controller=function(mParam){this._ns=ITHit.WebDAV.Client.AjaxFileBrowser;this._ChildrenProperties=[];this._MofifyInstructions={};this._RefreshOnUpdateTimerId=null;this._SearchQuery=null;var oSettings=ITHit.WebDAV.Client.AjaxFileBrowser.Settings.DesktopSettings.NormalizeObjectSettings(mParam,arguments);this.Settings=new ITHit.WebDAV.Client.AjaxFileBrowser.Settings.DesktopSettings(this);this.Settings.SetSettings(oSettings);this.InitWithParams(oSettings);if(typeof oSettings.UseLocalStorage!=
"undefined")ITHit.oNS.LocalStorage.enabled=oSettings.UseLocalStorage;else ITHit.oNS.LocalStorage.enabled=true};ITHit.Extend(ITHit.oNS.Controller,ITHit.oNS.Render.RenderController);ITHit.oNS.Controller._Controllers=[];ITHit.oNS.Controller._ActiveController=null;ITHit.oNS.Controller._Counter=0;ITHit.oNS.Controller.prototype.GetIndex=function(){return this._index};
ITHit.oNS.Controller.prototype.InitWithParams=function(oSettings){var oNsUndefined=ITHit.Utils.IsUndefined;this.defaultParams={Url:oSettings.Url};var oConfig=ITHit.Config.AjaxFileBrowser;this._ElementsIdPrefix="ithit_";for(var prop in oConfig){if(!oConfig.hasOwnProperty(prop)||prop=="ProtectedProperties")continue;if(!oConfig.ProtectedProperties[prop])this[prop]=oNsUndefined(oSettings[prop])?oConfig[prop]:oSettings[prop];else this[prop]=oConfig[prop]}this.NotAllowedCharacters=this.NotAllowedCharacters.replace(/(\W)/g,
"\\$1");this._SharePointOpenOrEditDocs=this.IsSharePointOpenDocumentsCtrlAvailable();ITHit.Components.dojo.setBlankGif(this._ns.Utils.GetBlankGifPath());var sServerRoot=location.protocol+"//"+location.host+"/";var sBaseServerUrl=ITHit.WebDAV.Client.Encoder.Decode((oSettings.Url||sServerRoot).replace(/^\//,sServerRoot).replace(/\/?$/,"/"));this._Utils=new this._ns.UrlUtils(sBaseServerUrl);this._baseUrl=this._Utils.BasePath;this._RootHistoryUrl;this._RootNotOpened=true;this._NowOpenedFolder=null;this._index=
this._ns.Controller._Counter++;this._ClassId="ITHit.WebDAV.Client.AjaxFileBrowser.Controller_"+this._index;this._ns.Controller._Controllers[this._index]=this;var isBrowser=ITHit.DetectBrowser;this._DnDFilesSupported=(isBrowser.FF>=3.6||isBrowser.Safari>=5||isBrowser.Chrome>=4||isBrowser.IE>=10)&&!(isBrowser.iPad||isBrowser.iPhone);ITHit.Components.dojo._loadInit();this.History=new ITHit.WebDAV.Client.AjaxFileBrowser.HistoryNavigation.HistoryController(this._Utils.GetRelativePath(sBaseServerUrl));
this.History.SetEnabled(!!this.EnableHistoryNavigation);ITHit.Events.AddListener(this.History,"OnSetHash","_OnHistorySetHashHandler",this);ITHit.Events.AddListener(this.History,"OnUrlChange","_OnHistoryUrlChangeHandler",this);ITHit.Events.AddListener(this.History,"OnSearchQueryChange","_OnHistorySearchQueryChangeHandler",this);this._filter=new this._ns.Filter(this,ITHit.WebDAV.Client.ResourceType.Folder,this.ShowFolders);this._InitializeCommands(oSettings,sBaseServerUrl);this._InitializeItemsState(oSettings);
var that=this;setTimeout(function(){ITHit.Events.DispatchEvent(that,"OnInit")});this._InitializeRenderController(oSettings,sBaseServerUrl);this._InitializeInterfaceHandler()};
ITHit.oNS.Controller.prototype._InitializeCommands=function(oSettings,sBaseServerUrl){this.Commands=new ITHit.WebDAV.Client.AjaxFileBrowser.Commands.CommandsController;this.Commands.NotAllowedCharacters=this.NotAllowedCharacters;this.Commands.ChildrenProperties=this._ChildrenProperties;this.Commands.SetRootUrl(sBaseServerUrl);if(!ITHit.Utils.IsUndefined(oSettings.Credentials)&&!ITHit.Utils.IsUndefined(oSettings.Credentials.User)){var sPass=!ITHit.Utils.IsUndefined(oSettings.Credentials.Pass)?oSettings.Credentials.Pass:
"";this.Commands.SetCredentials(oSettings.Credentials.User,sPass)}if(!ITHit.Utils.IsUndefined(oSettings.FoldersCacheEnable)&&oSettings.FoldersCacheSize===0)oSettings.FoldersCacheEnable=false;if(!ITHit.Utils.IsUndefined(oSettings.FoldersCacheEnable))this.Commands.FoldersCollection.SetEnabled(oSettings.FoldersCacheEnable);if(!ITHit.Utils.IsUndefined(oSettings.FoldersCacheSize)){this.Commands.FoldersCollection.SetMaxSize(oSettings.FoldersCacheSize);this.Commands.ResourcesCollection.SetMaxSize(oSettings.FoldersCacheSize)}ITHit.Events.AddListener(this.Commands.FoldersCollection,
"OnDeprecated",function(sUrl){var oLastCommand=this.Commands.GetLastExecutedCommand();var oLastError=oLastCommand&&oLastCommand.HasErrors()?oLastCommand.GetErrors()[0]:null;if(oLastError&&oLastError instanceof ITHit.WebDAV.Client.Exceptions.WebDavHttpException&&oLastError.Status.Code===0)return;if(this._url===sUrl)this.Refresh();else if(this._Tree().IsOpenedItem(sUrl))this.Commands.Create("LoadFolderCommand",{Href:sUrl}).Execute()},this);ITHit.Events.AddListener(this.Commands.FoldersCollection,"OnRemove",
function(sUrl){if(this._url===sUrl||ITHit.WebDAV.Client.Encoder.DecodeURI(this._url)===sUrl){var sParentFolderUrl=ITHit.WebDAV.Client.HierarchyItem.GetFolderParentUri(this._url);this.OpenFolderAsync(sParentFolderUrl)}},this);ITHit.Events.AddListener(this.Commands,"OnFetchFeatures",function(oFeatures){this.SearchBar.Toggle(oFeatures.ItemOptions.Search)},this);this._session=new ITHit.WebDAV.Client.AjaxFileBrowser.Commands.CommandController;this._session.Session=this.Commands.Session};
ITHit.oNS.Controller.prototype._InitializeRenderController=function(oSettings,sBaseServerUrl){if(this.ShowContextHelp)this._ContextHelp=new ITHit.WebDAV.Client.AjaxFileBrowser.Render.ContextHelp(this.ShowContextHelp);var sClass=oSettings.ClassName||this.Settings.GetRootNode().className||ITHit.Config.AjaxFileBrowser.ClassName;this._control=new this._ns.Control(this,this.Settings.GetRootNode(),"",oSettings.Style,sClass,this._DnDFilesSupported,this._InterfaceHandler,this._ContextHelp);if(this.ShowContextHelp)this._ContextHelp._Initiate();
ITHit.WebDAV.Client.AjaxFileBrowser.Controller.baseConstructor.call(this);this.base=ITHit.WebDAV.Client.AjaxFileBrowser.Controller.base;this.Settings.TriggerRender();this._SetAddressBarValue(sBaseServerUrl);ITHit.Events.AddListener(this,"OnViewModeChanged",function(){ITHit.oNS.Render.MenuController.RefreshCheckedViewState(this._index)},this);this.SetViewMode(oSettings.ViewMode||oSettings.ViewModeDesktop||ITHit.WebDAV.Client.AjaxFileBrowser.Render.ViewModes.Details);ITHit.Events.AttachEvent(window,
"onbeforeunload",ITHit.Utils.MakeScopeClosure(this,"_OnClose"))};
ITHit.oNS.Controller.prototype._InitializeInterfaceHandler=function(){this._InterfaceHandler=new ITHit.WebDAV.Client.AjaxFileBrowser.Handlers.InterfaceHandlers(this);ITHit.Events.AddListener(this._InterfaceHandler,"OnGetAbsolutePath","OnGetAbsolutePathHandler",this);ITHit.Events.AddListener(this,"OnMenuPaste","OnPasteHandler",this._InterfaceHandler);ITHit.Events.AddListener(this,"OnMenuCopy","OnCopyHandler",this._InterfaceHandler);ITHit.Events.AddListener(this,"OnMenuCut","OnCutHandler",this._InterfaceHandler);
ITHit.Events.AddListener(this,"OnShortcutsPaste","OnPasteHandler",this._InterfaceHandler);ITHit.Events.AddListener(this,"OnShortcutsCopy","OnCopyHandler",this._InterfaceHandler);ITHit.Events.AddListener(this,"OnShortcutsCut","OnCutHandler",this._InterfaceHandler);ITHit.Events.AddListener(this,"_OnSelectedItemsChanged","OnSelectedItemsChangedHandler",this._InterfaceHandler);ITHit.Events.AddListener(this,"_OnSelectedFolderChanged","OnSelectedFolderChangedHandler",this._InterfaceHandler);this._InterfaceHandler.AddListener("OnGetSelectedItemsCount",
"GetSelectedCount",this._grid);this._InterfaceHandler.AddListener("OnGetSelectedGridItems","GetSelectedItems",this);ITHit.Events.AddListener(this.Commands,"OnCommandFinish","OnExecuteCommandHandler",this._InterfaceHandler);ITHit.Events.AddListener(this.Commands,"OnUndo","OnUndoHandler",this._InterfaceHandler);ITHit.Events.AddListener(this.Commands,"OnRedo","OnRedoHandler",this._InterfaceHandler);this._InterfaceHandler._Initiate()};
ITHit.oNS.Controller.prototype._InitializeItemsState=function(oSettings){this.SetSearchAutocompleteEnable(!ITHit.Utils.IsUndefined(oSettings.SearchAutocompleteEnable)?oSettings.SearchAutocompleteEnable:true);this.SetSearchDynamicEnable(!ITHit.Utils.IsUndefined(oSettings.SearchDynamicEnable)?oSettings.SearchDynamicEnable:true);var sHash=document.location.hash.replace("#","");if(this.OpenHistoryLink&&sHash){var self=this;setTimeout(function(){self.History.SetHash(sHash)})}else if(!ITHit.Utils.IsUndefined(oSettings.SelectedFolder))this.SetSelectedFolderAsync(oSettings.SelectedFolder,
false);if(!ITHit.Utils.IsUndefined(oSettings.SelectedItems))this.SetSelectedItemsAsync(oSettings.SelectedItems,false)};ITHit.oNS.Controller.prototype.SetSettings=function(oSettings){this.Settings.SetSettings(oSettings||{})};
ITHit.oNS.Controller.prototype.IsSharePointOpenDocumentsCtrlAvailable=function(){if(ITHit.DetectBrowser.IE)try{new ActiveXObject("SharePoint.OpenDocuments");return true}catch(e){}else{var plugins=navigator.plugins;var pluginName=ITHit.DetectBrowser.Mac?"SharePoint Browser Plug-in":"Microsoft Office";for(var i=0;i<plugins.length;i++)if(plugins[i].name.indexOf(pluginName)==0)return true}if(ITHit.DetectBrowser.Chrome)return true;return false};
ITHit.oNS.Controller.prototype.GetMsOfficeVersion=function(){if(ITHit.DetectBrowser.IE)try{new ActiveXObject("SharePoint.OpenDocuments.5");return 2013}catch(e){}else{var officeVer=-1;var plugins=navigator.plugins;for(var i=0;i<plugins.length;i++)if(plugins[i].name.indexOf("Microsoft Office")==0){var strVer=plugins[i].name.substr("Microsoft Office ".length,4);var newVer=parseInt(strVer);if(newVer>officeVer)officeVer=newVer}if(ITHit.DetectBrowser.Chrome)return 2013;return officeVer}return null};
ITHit.oNS.Controller.prototype.GetSharePointOpenDocumentsCtrl=function(){if(this._sharePointOpenDocuments==null)if(ITHit.DetectBrowser.IE)try{this._sharePointOpenDocuments=new ActiveXObject("SharePoint.OpenDocuments")}catch(e){}else{var objectPlugin={nodeName:"object",type:"application/x-sharepoint",style:{visibility:"hidden"},width:"0",height:"0"};this._sharePointOpenDocuments=ITHit.Utils.CreateDOMElement(objectPlugin);this.Settings.GetRootNode().appendChild(this._sharePointOpenDocuments)}return this._sharePointOpenDocuments};
ITHit.oNS.Controller.prototype.SetProgressRefreshTime=function(iTime){this._SetGetVar("ProgressRefreshTime",iTime);return this._upload.ChangeProgressRefreshTime(iTime)};ITHit.oNS.Controller.prototype.GetProgressRefreshTime=function(){return this._SetGetVar("ProgressRefreshTime")};ITHit.oNS.Controller.prototype.SetOnUploadAutoRefresh=function(bRefresh){this._SetGetVar("OnUploadAutoRefresh",bRefresh)};ITHit.oNS.Controller.prototype.GetOnUploadAutoRefresh=function(){return this._SetGetVar("OnUploadAutoRefresh")};
ITHit.oNS.Controller.prototype.SetShowImagePreview=function(bShow){this._SetGetVar("ShowImagePreview",bShow);ITHit.Events.DispatchEvent(this,"OnSetShowImagePreview",["OnSetShowImagePreview",bShow])};ITHit.oNS.Controller.prototype.GetShowImagePreview=function(){return this._SetGetVar("ShowImagePreview")};ITHit.oNS.Controller.prototype.SetFileIconsPath=function(sPath){this._SetGetVar("FileIconsPath",sPath);ITHit.Events.DispatchEvent(this,"OnSetFileIconsPath",["OnSetFileIconsPath",sPath])};
ITHit.oNS.Controller.prototype.GetFileIconsPath=function(){return this._SetGetVar("FileIconsPath")};ITHit.oNS.Controller.prototype.SetMsOfficeTemplatesPath=function(sPath){this._SetGetVar("MsOfficeTemplatesPath",sPath)};ITHit.oNS.Controller.prototype.GetMsOfficeTemplatesPath=function(){return this._SetGetVar("MsOfficeTemplatesPath")};ITHit.oNS.Controller.prototype.SetNotAllowedCharacters=function(sChars){this._SetGetVar("NotAllowedCharacters",sChars.replace(/(\W)/g,"\\$1"))};
ITHit.oNS.Controller.prototype.GetNotAllowedCharacters=function(){return this._SetGetVar("NotAllowedCharacters").replace(/\\(.)/g,"$1")};ITHit.oNS.Controller.prototype.SetImageTypes=function(sTypes){this._SetGetVar("ImageTypes",sTypes);ITHit.Events.DispatchEvent(this,"OnSetImageTypes",["OnSetImageTypes",sTypes])};ITHit.oNS.Controller.prototype.GetImageTypes=function(){return this._SetGetVar("ImageTypes")};
ITHit.oNS.Controller.prototype.SetSearchAutocompleteEnable=function(bIsEnable){this._SetGetVar("SearchAutocompleteEnable",!!bIsEnable)};ITHit.oNS.Controller.prototype.GetSearchAutocompleteEnable=function(){return this._SetGetVar("SearchAutocompleteEnable")};ITHit.oNS.Controller.prototype.SetSearchDynamicEnable=function(bIsEnable){this._SetGetVar("SearchDynamicEnable",!!bIsEnable)};ITHit.oNS.Controller.prototype.GetSearchDynamicEnable=function(){return this._SetGetVar("SearchDynamicEnable")};
ITHit.oNS.Controller.prototype.SetShowOnlyFilterFiles=function(sTypes){};ITHit.oNS.Controller.prototype._SetGetVar=function(sVariable,mValue){if(undefined!==mValue)this[sVariable]=mValue;return this[sVariable]};
ITHit.oNS.Controller.prototype.OnGetItemHandler=function(sUrl){if(this._CurrentItem&&(this._CurrentItem.Href===sUrl||ITHit.WebDAV.Client.Encoder.DecodeURI(this._CurrentItem.Href)===sUrl))return this._CurrentItem;var aItems=this._Grid().Items.Folders.concat(this._Grid().Items.Resources);for(var i=0,l=aItems.length;i<l;i++)if(aItems[i].Href===sUrl||ITHit.WebDAV.Client.Encoder.DecodeURI(aItems[i].Href)===sUrl)return aItems[i];throw new ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions.AjaxFileBrowserException("Not found item in DataViewAdapter.Items by url `"+
sUrl+"`");};ITHit.oNS.Controller.prototype.UploadCompliteHandler=function(sEvent,sUrl,sBaseUrl){if(!this.OnUploadAutoRefresh)return;var sPath=ITHit.Utils.IsStringNullOrEmpty(sBaseUrl)?sUrl:sBaseUrl;var sDir=ITHit.Decode(this._Utils.GetRelativePath(sPath).replace(/[^\/]+$/,""));if(sDir===this._url){if(this._UploadRefreshTimer){clearTimeout(this._UploadRefreshTimer);this._UploadRefreshTimer=null}this._UploadRefreshTimer=setTimeout(ITHit.Utils.MakeScopeClosure(this,"_RefreshOnUpdateTimer",sDir),500)}};
ITHit.oNS.Controller.prototype.RefreshOnUpdate=function(sDir){var sPath=sDir;if(/^http:\/\//i.test(sPath)||/^https:\/\//i.test(sPath))sPath=ITHit.WebDAV.Client.Encoder.Decode(this._Utils.GetRelativePath(sPath));this._RefreshOnUpdate(sPath)};ITHit.oNS.Controller.prototype._RefreshOnUpdate=function(sDir){if(this._RefreshOnUpdateTimerId)clearTimeout(this._RefreshOnUpdateTimerId);this._RefreshOnUpdateTimerId=setTimeout(ITHit.Utils.MakeScopeClosure(this,"_RefreshOnUpdateTimer",sDir),1E3)};
ITHit.oNS.Controller.prototype._RefreshOnUpdateTimer=function(sDir){if(sDir===this._url)this.Refresh()};ITHit.oNS.Controller.prototype._GetItem=function(sPath,silence,ignoreCache){var oLoadedItem=null;var that=this;this.Commands.Create("LoadItemSyncCommand",{Href:sPath,IgnoreCache:ignoreCache,OnError:function(aErrors){if(!silence)that.Errors.ShowCommandErrors(aErrors)},OnSuccess:function(oItem){oLoadedItem=oItem}}).Execute();return oLoadedItem};
ITHit.oNS.Controller.prototype.OpenFolder=function(sUrl,bDoNotUpdateGrid,bPreventSaveInHistory,bDoNotNotify){this._Utils.CheckUrlAgainstBase(sUrl);var that=this;var oLoadedItem=null;this.Commands.Create("LoadFolderSyncCommand",{Href:sUrl,IgnoreCache:this.FlushCacheOnOpenFolder,OnSuccess:function(oItem,aChildren){oLoadedItem=oItem;that._OpenFolderAsyncCallback(aChildren,sUrl,oItem,bDoNotUpdateGrid,bPreventSaveInHistory,bDoNotNotify)}}).Execute();return oLoadedItem};
ITHit.oNS.Controller.prototype.OpenFolderAsync=function(sUrl,bDoNotUpdateGrid,bPreventSaveInHistory,bDoNotNotify,fCallback){sUrl=ITHit.WebDAV.Client.AjaxFileBrowser.UrlUtils.GetRelativePath(sUrl).replace(/\/?$/,"/");if(!fCallback&&this._NowOpenedFolder===sUrl)return;this._NowOpenedFolder=sUrl;fCallback=fCallback||function(){};this._Utils.CheckUrlAgainstBase(sUrl);var that=this;this.Commands.Create("LoadFolderCommand",{Href:sUrl,IgnoreCache:this.FlushCacheOnOpenFolder,OnFinish:function(){that._NowOpenedFolder=
null},OnAbort:function(){fCallback.call(that,null)},OnSuccess:function(oItem,aChildren){that._OpenFolderAsyncCallback(aChildren,sUrl,oItem,bDoNotUpdateGrid,bPreventSaveInHistory,bDoNotNotify);fCallback.call(that,oItem)}}).Execute()};
ITHit.oNS.Controller.prototype._OpenFolderAsyncCallback=function(aChildren,sUrl,oItem,bDoNotUpdateGrid,bPreventSaveInHistory,bDoNotNotify){var oFiltered=this._filter.Run(aChildren);if(this._SearchQuery)bDoNotUpdateGrid=false;var oCurrentFolder=this._url&&!this._SearchQuery?this.Commands.ResourcesCollection.Get(this._url):null;this._SearchQuery=null;if(!bDoNotUpdateGrid&&!bDoNotNotify)if(ITHit.Events.DispatchEvent(this,"OnBeforeSelectedFolderChanged",[oCurrentFolder,oItem.Item,null])===false)return;
this.RenderGridItems(oItem,oFiltered,bDoNotUpdateGrid);if(this._RootHistoryUrl&&!bPreventSaveInHistory)this.History.SetUrl(this.Commands.GetAbsolutePath(oItem.Href,true));if(!this._RootHistoryUrl&&!bDoNotUpdateGrid)this._RootHistoryUrl=sUrl;if(this._RootNotOpened){this.EnterZone("General:OpenedRoot");this._RootNotOpened=false}ITHit.Events.DispatchEvent(this,"_OnSelectedFolderChanged");if(!bDoNotUpdateGrid&&!bDoNotNotify)ITHit.Events.DispatchEvent(this,"OnSelectedFolderChanged",[oCurrentFolder,oItem.Item,
null])};
ITHit.oNS.Controller.prototype.OpenSearchResultsAsync=function(sQuery,sUrl,bDoNotUpdateSearchBar){sUrl=sUrl||this._url;if(!bDoNotUpdateSearchBar)this.SearchBar.SetValue(sQuery);var that=this;var oCommand=this.Commands.Create("SearchCommand",{Href:sUrl,Query:sQuery,OnSuccess:function(oItem,aItems){if(ITHit.Events.DispatchEvent(that,"OnBeforeSelectedFolderChanged",[oItem.Item,null,oCommand.QueryObject])===false)return;that._url=oItem.Href;var oFiltered=that._filter.Run(aItems);that.RenderGridItems(oItem,oFiltered,
null,true);that.History.SetSearchQuery(sQuery,that.Commands.GetAbsolutePath(oItem.Href,true));if(!that._RootHistoryUrl)that._RootHistoryUrl=oItem.Href;that._Tree().DeselectNode();ITHit.Events.DispatchEvent(that,"_OnSelectedFolderChanged");ITHit.Events.DispatchEvent(that,"OnSelectedFolderChanged",[oItem.Item,null,oCommand.QueryObject])}});oCommand.Execute();this._SearchQuery=oCommand.QueryObject;return oCommand};
ITHit.oNS.Controller.prototype.GetSelectedItems=function(){var gridItems=this._Grid().GetSelectedItemsList(),items=[];for(var i=0,l=gridItems.length;i<l;i++)try{items.push(this.OnGetItemHandler(gridItems[i]))}catch(e){items.push(this._GetItem(gridItems[i],true))}return items};ITHit.oNS.Controller.prototype.GetSelectedTreeItem=function(){return this._Tree().GetSelectedItemsList()};
ITHit.oNS.Controller.prototype.SetSelectedItems=function(aSelected,bDoNotNotify){bDoNotNotify=bDoNotNotify!==false;return this._SetSelectedItems(aSelected,bDoNotNotify,false)};ITHit.oNS.Controller.prototype.SetSelectedItemsAsync=function(aSelected,bDoNotNotify,fCallback){bDoNotNotify=bDoNotNotify!==false;fCallback=fCallback||function(){};this._SetSelectedItems(aSelected,bDoNotNotify,false,fCallback)};
ITHit.oNS.Controller.prototype.OpenLocation=function(aSelected){this._SetSelectedItems([aSelected],false,true,function(){})};
ITHit.oNS.Controller.prototype._SetSelectedItems=function(aSelected,bDoNotNotify,bForceOpenFolder,fCallback){if(!(aSelected instanceof Array))aSelected=[aSelected];var aSelectedUrl=[];var oNsHierItem=ITHit.WebDAV.Client.HierarchyItem;for(var i=0,l=aSelected.length;i<l;i++){var mSelectedItem=aSelected[i];if(!(mSelectedItem instanceof oNsHierItem)){mSelectedItem=ITHit.WebDAV.Client.Encoder.Decode(ITHit.WebDAV.Client.AjaxFileBrowser.UrlUtils.GetRelativePath(ITHit.Trim(mSelectedItem)));if(!mSelectedItem&&
0!==mSelectedItem)continue;aSelectedUrl.push(mSelectedItem);if(!/\/$/.test(mSelectedItem))aSelectedUrl.push(mSelectedItem+"/")}else aSelectedUrl.push(ITHit.WebDAV.Client.Encoder.Decode(ITHit.WebDAV.Client.AjaxFileBrowser.UrlUtils.GetRelativePath(mSelectedItem.Href)))}if(aSelectedUrl.length===0)if(typeof fCallback==="function")fCallback.call(this,[]);else return[];var sPath=aSelectedUrl[0].replace(/[^\/]+?\/?$/,"");try{this._Utils.CheckUrlAgainstBase(sPath,this._url)}catch(e){if(typeof window.console!==
"undefined")console.error(e);return}this.Flags.DispatchSelectedItemsChanged=!bDoNotNotify;if(bForceOpenFolder||this._url!==sPath){var self=this;if(typeof fCallback==="function")this.SetSelectedFolderAsync(ITHit.WebDAV.Client.Encoder.Encode(sPath),bDoNotNotify,function(){self._SetSelectedItemsCallback(aSelectedUrl,bDoNotNotify,fCallback)});else{this.SetSelectedFolder(ITHit.WebDAV.Client.Encoder.Encode(sPath),bDoNotNotify);return this._SetSelectedItemsCallback(aSelectedUrl,bDoNotNotify,fCallback)}}else return this._SetSelectedItemsCallback(aSelectedUrl,
bDoNotNotify,fCallback)};ITHit.oNS.Controller.prototype._SetSelectedItemsCallback=function(aSelectedUrl,bDoNotNotify,fCallback){this._Grid().DeselectAll();this._Grid().SetSelectedByUrl(aSelectedUrl);if(!bDoNotNotify);if(typeof fCallback==="function")fCallback.call(this,[]);else return[]};ITHit.oNS.Controller.prototype.GetSelectedFolder=function(){var sUrl=this._Tree().GetSelectedNodeUrl();if(sUrl===null)return null;var item=this._GetItem(sUrl);if(!item)return null;return item.Item};
ITHit.oNS.Controller.prototype.SetSelectedFolder=function(mDestination,bDoNotNotify){bDoNotNotify=bDoNotNotify!==false;var sDestinationPath=mDestination;if(mDestination instanceof ITHit.WebDAV.Client.HierarchyItem)sDestinationPath=mDestination.Href;sDestinationPath=ITHit.WebDAV.Client.Encoder.Decode(ITHit.WebDAV.Client.AjaxFileBrowser.UrlUtils.GetRelativePath(sDestinationPath.replace(/\/?$/,"/")));var sCurrentPath=this._baseUrl;var aPath=sDestinationPath.replace(sCurrentPath,"").replace(/\/?$/,"").split("/");
var oTree=this._Tree();this._SetSelectedFolderNext(sCurrentPath,aPath,oTree,sDestinationPath);return this.OpenFolder(sDestinationPath,false,null,bDoNotNotify)};
ITHit.oNS.Controller.prototype._SetSelectedFolderNext=function(sCurrentPath,aPath,oTree,sDestinationPath){if(!aPath.length||aPath[0]==="")return;var sDirName=aPath.shift()+"/";if(!oTree.NodeExists(sCurrentPath+sDirName)){var self=this;var oItem=this.OpenFolder(sCurrentPath,true,false,false);if(!oItem)return;if(!oTree.NodeExists(sCurrentPath+sDirName)){try{throw new ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions.AjaxFileBrowserException(ITHit.Phrases.AjaxFileBrowser.Exceptions.NonExistentLocation.Paste(self.Commands.GetAbsolutePath(sCurrentPath+
sDirName,true)));}catch(e){ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.ShowMessage(e)}return}}this._SetSelectedFolderNext(sCurrentPath+sDirName,aPath,oTree,sDestinationPath)};
ITHit.oNS.Controller.prototype.SetSelectedFolderAsync=function(mDestination,bDoNotNotify,fCallback){bDoNotNotify=bDoNotNotify!==false;var sDestinationPath=mDestination;if(mDestination instanceof ITHit.WebDAV.Client.HierarchyItem)sDestinationPath=mDestination.Href;sDestinationPath=ITHit.WebDAV.Client.Encoder.Decode(ITHit.WebDAV.Client.AjaxFileBrowser.UrlUtils.GetRelativePath(sDestinationPath.replace(/\/?$/,"/")));this.OpenFolderAsync(sDestinationPath,null,null,bDoNotNotify,fCallback)};
ITHit.oNS.Controller.prototype.GetUploadProgress=function(sUrl){if(!sUrl)throw new this._ns.Exceptions.AjaxFileBrowserException(ITHit.Phrases.AjaxFileBrowser.Exceptions.WrongUrl.Paste(sUrl));return this._session.GetUploadProgress(sUrl)};ITHit.oNS.Controller.prototype.GetUploadProgressAsync=function(sUrl,fCallback){if(!sUrl)throw new this._ns.Exceptions.AjaxFileBrowserException(ITHit.Phrases.AjaxFileBrowser.Exceptions.WrongUrl.Paste(sUrl));return this._session.GetUploadProgressAsync(sUrl,fCallback)};
ITHit.oNS.Controller.prototype.GetSupportedFeaturesAsync=function(sUrl,fCallback){if(!sUrl)throw new this._ns.Exceptions.AjaxFileBrowserException(ITHit.Phrases.AjaxFileBrowser.Exceptions.WrongUrl.Paste(sUrl));return this._session.GetSupportedFeaturesAsync(sUrl,fCallback)};
ITHit.oNS.Controller.prototype.DeleteAsync=function(sUrl,oLockTokens,fCallback){if(!sUrl)throw new this._ns.Exceptions.AjaxFileBrowserException(ITHit.Phrases.AjaxFileBrowser.Exceptions.WrongUrl.Paste(sUrl));return this._session.DeleteAsync(sUrl,oLockTokens,fCallback)};
ITHit.oNS.Controller.prototype.CancelUploadAsync=function(sUrl,sLockToken,fCallback){if(!sUrl)throw new this._ns.Exceptions.AjaxFileBrowserException(ITHit.Phrases.AjaxFileBrowser.Exceptions.WrongUrl.Paste(sUrl));return this._session.CancelUploadAsync(sUrl,sLockToken,fCallback)};ITHit.oNS.Controller.prototype.OpenGridItem=function(oEvent,url){this._OpenGridItem(this._GetItem(url))};
ITHit.oNS.Controller.prototype._OpenGridItem=function(oItem){var sResourceType=oItem.ResourceType,clientNs=ITHit.WebDAV.Client;if(false===ITHit.Events.DispatchEvent(this,"OnOpenItem",oItem))return false;if(sResourceType==clientNs.ResourceType.Folder){var sUrl=clientNs.Encoder.Decode(clientNs.AjaxFileBrowser.UrlUtils.GetRelativePath(oItem.Href));this._grid.DeselectAll();this.OpenFolderAsync(sUrl)}else{var sEncodedUrl=oItem.Href.replace(/#/g,"%23");this.EditDocument(sEncodedUrl)}};
ITHit.oNS.Controller.ShowDetailedError=function(oEvent,iIndex){var oController=ITHit.WebDAV.Client.AjaxFileBrowser.Controller.GetByIndex(iIndex);oController._error.ShowDetailedError()};
ITHit.oNS.Controller.prototype.UploadFileDialog=function(sUrl,bDoNotCheckFileExistence){if(!ITHit.DetectBrowser.IE||ITHit.DetectBrowser.IE>=10){this._upload.UploadFile(sUrl);return}if(!this._dialog._uploadForm){this._dialog._uploadForm=this._upload.CreateForm(sUrl,ITHit.Components.dojo.byId("ithit_interface_uploadResourceFile"),bDoNotCheckFileExistence,ITHit.Components.dojo.byId("ithit_interface_uploadResource_subm"));var _this=this;ITHit.Events.AddListener(this._dialog._uploadForm,"OnProcessForm",
"CloseUploadFileDialog",this)}else this._dialog._uploadForm.ResetForm(sUrl,bDoNotCheckFileExistence);ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.ShowUploadResourceDialog(sUrl,-1==sUrl.search(/\/$/),this._Utils.GetAbsolutePath(sUrl))};ITHit.oNS.Controller.prototype.UploadFolder=function(sUrl){this._upload.UploadFolder(this._Utils.GetAbsolutePath(sUrl))};ITHit.oNS.Controller.CancelUploadFileDialog=function(iIndex){ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.HideUploadResourceDialog()};
ITHit.oNS.Controller.prototype.CloseUploadFileDialog=function(){if(!this._dialog._uploadForm.CheckProcess())return false;ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.HideUploadResourceDialog();ITHit.Events.RemoveListener(this._dialog._uploadForm,"OnProcessForm","CloseUploadFileDialog",this);this._dialog._uploadForm=null};
ITHit.oNS.Controller.prototype.DeleteItems=function(aUrls){if(!ITHit.Utils.IsArray(aUrls))aUrls=[aUrls];var that=this;this.Commands.BeginQueue({OnFinish:function(aFinishCommands,aErrors){var aDeletedUrls=[];for(var i=0,l=aFinishCommands.length;i<l;i++)if(!aFinishCommands[i].HasErrors())aDeletedUrls.push(aFinishCommands[i].Href);if(aDeletedUrls.length===0){that.Refresh();return}that._Grid().DeleteItems(aDeletedUrls);that._Tree().RemoveNodes(aDeletedUrls);if(aDeletedUrls.length!==aUrls.length){var aToSelect=
[];for(var i=aDeletedUrls.length,l=aUrls.length;i<l;i++)aToSelect.push(aUrls[i]);that._Grid().DeselectAll();that._Grid().SetSelectedByUrl(aToSelect)}}});for(var i=0,l=aUrls.length;i<l;i++)this.Commands.Create("DeleteCommand",{Href:aUrls[i]});return this.Commands.EndQueue()};ITHit.oNS.Controller.prototype.ItemExists=function(sUrl){return this._session.ItemExists(sUrl)};ITHit.oNS.Controller.prototype.ItemExistsAsync=function(sUrl,fCallback){return this._session.ItemExistsAsync(sUrl,fCallback)};
ITHit.oNS.Controller.prototype.PasteGridItems=function(){this.CopyMoveManager.PasteTo(this._url)};ITHit.oNS.Controller.prototype.OpenDocument=function(sUrl,forceDownload,sFileName){sFileName=sFileName||null;if(forceDownload&&this.DownloadWithVirtualLink(sUrl,sFileName)===true)return;if(forceDownload)sUrl+=(sUrl.indexOf("?")!==-1?"&":"?")+"download";if(this.PreventOpenDocumentCaching)sUrl+=(sUrl.indexOf("?")!==-1?"&":"?")+(new Date).getTime();window.open(this._Utils.GetAbsolutePath(sUrl))};
ITHit.oNS.Controller.prototype.DownloadWithVirtualLink=function(sUrl,sFileName){sFileName=sFileName||null;if(ITHit.DetectBrowser.IE||ITHit.DetectBrowser.FF)return false;var link=document.createElement("a");link.href=sUrl.indexOf("://")?sUrl:this.Commands.GetAbsolutePath(sUrl,true);link.download=sFileName||sUrl.substring(sUrl.lastIndexOf("/")+1,sUrl.length);if(link.click){link.click();return true}else if(document.createEvent){var e=document.createEvent("MouseEvents");e.initEvent("click",true,true);
link.dispatchEvent(e);return true}};ITHit.oNS.Controller.prototype.GetProperties=function(sUrl){var that=this;this.Commands.Create("LoadItemProperties",{Href:sUrl,OnSuccess:function(aItemProps){var aProps=[];for(var i=0,l=aItemProps.length;i<l;i++)aProps.push([aItemProps[i].Name.NamespaceUri,aItemProps[i].Name.Name,aItemProps[i].StringValue()]);that._ns.Render.Dialog.ViewProperties(sUrl,aProps,that._Utils.GetAbsolutePath(sUrl))}}).Execute()};
ITHit.oNS.Controller.prototype.GetVersions=function(sUrl){var that=this;this.Commands.Create("LoadItemVersions",{Href:sUrl,OnSuccess:function(aVersionList){var aRows=[];for(var i=0,l=aVersionList.length;i<l;i++){var aProps=[];for(var i2=0,l2=aVersionList[i].length;i2<l2;i2++){var oProperty=aVersionList[i][i2];var sValue="";if(oProperty instanceof Date)sValue=ITHit.WebDAV.Client.AjaxFileBrowser.Render.Utils.FormatDate(oProperty);else if(oProperty instanceof ITHit.WebDAV.Client.Property)sValue=oProperty.StringValue();
else sValue=oProperty.toString();aProps.push(sValue)}aRows.push(aProps)}that._ns.Render.Dialog.Versions(sUrl,aRows,that._Utils.GetAbsolutePath(sUrl))}}).Execute()};
ITHit.oNS.Controller.VersionUpdate=function(sUrl){var oNsCl=ITHit.WebDAV.Client,oNsController=oNsCl.AjaxFileBrowser.Controller,oController=oNsController.GetByIndex(oNsController._GetActive());var oNsDialog=ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog;var oGrid=oNsDialog.Versions._grid;if(1!=oGrid.GetSelectedCount())return false;var oGridItem=oGrid.GetSelectedItems()[0];var sToHrefUpdate=oGrid.GetValue(oGridItem,"VersionHref");oController.Commands.Create("VersionUpdate",{Href:sUrl,ToHref:sToHrefUpdate,
OnSuccess:function(bIsSuccess){oController.GetVersions(sUrl)}}).Execute()};
ITHit.oNS.Controller.VersionDelete=function(sUrl){var oNsCl=ITHit.WebDAV.Client,oNsController=oNsCl.AjaxFileBrowser.Controller,oController=oNsController.GetByIndex(oNsController._GetActive());var oNsDialog=ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog;var oGrid=oNsDialog.Versions._grid;var aGridItemList=oGrid.GetSelectedItems();oController.Commands.BeginQueue({OnSuccess:function(){oController.GetVersions(sUrl)}});for(var i=0,l=aGridItemList.length;i<l;i++){var oGridItem=oGrid.GetSelectedItems()[i];
var sVersionHref=oGrid.GetValue(oGridItem,"VersionHref");oController.Commands.Create("VersionDelete",{Href:sUrl,VersionHref:sVersionHref})}return oController.Commands.EndQueue()};
ITHit.oNS.Controller.VersionDownload=function(sUrl){var oNsCl=ITHit.WebDAV.Client,oNsController=oNsCl.AjaxFileBrowser.Controller,oController=oNsController.GetByIndex(oNsController._GetActive());var oNsDialog=oNsCl.AjaxFileBrowser.Render.Dialog;var oGrid=oNsDialog.Versions._grid;if(1!=oGrid.GetSelectedCount())return false;var oGridItem=oGrid.GetSelectedItems()[0];var sVersionHref=oGrid.GetValue(oGridItem,"VersionHref");var oItem=oController._GetItem(sUrl);var sVersionName=oGrid.GetValue(oGridItem,
"Name").toLowerCase();var sFileName=oItem.DisplayName.indexOf(".")!==-1?oItem.DisplayName.replace(/(\.[^.]+)$/,"_"+sVersionName+"$1"):oItem.DisplayName+"_"+sVersionName;oController.OpenDocument(sVersionHref,true,sFileName)};
ITHit.oNS.Controller.prototype.ShowItemInfo=function(sUrl){var oItem=this._GetItem(sUrl);if(!oItem)return false;this._ns.Render.Dialog.ShowItemInfo(oItem.Item.Href,oItem.DisplayName,oItem.ResourceType,oItem.ContentLength||0,oItem.CreationDate.toLocaleString(),oItem.LastModified.toLocaleString(),oItem.Item.AvailableBytes,oItem.Item.UsedBytes)};ITHit.oNS.Controller._SetActive=function(iIndex){ITHit.WebDAV.Client.AjaxFileBrowser.Controller._ActiveController=iIndex};ITHit.oNS.Controller._GetActive=function(iIndex){return ITHit.WebDAV.Client.AjaxFileBrowser.Controller._ActiveController};
ITHit.oNS.Controller.Parse=function(mElement){var oElement=document.body;var oNs=ITHit.WebDAV.Client.AjaxFileBrowser;if(mElement)if(ITHit.Utils.IsString(mElement)){oElement=document.getElementById(mElement);if(!oElement)throw oNs.Exceptions.AjaxFileBrowserException(ITHit.Phrases.AjaxFileBrowser.Exceptions.WrongElementIdOrObject);}else oElement=mElement;return ITHit.Components.dojo.parser.parse(oElement)[0].GetControl()};ITHit.oNS.Controller.GetByIndex=function(iIndex){return ITHit.WebDAV.Client.AjaxFileBrowser.Controller._Controllers[iIndex]};
ITHit.oNS.Controller.ChangeView=function(iIndex,iView){var oController=ITHit.oNS.Controller.GetByIndex(iIndex);oController.SetViewMode(iView)};
ITHit.oNS.Controller.OpenTreeFolder=function(oEvent,iIndex){var oNsController=ITHit.WebDAV.Client.AjaxFileBrowser.Controller,oTarget=oNsController._GetEventTarget(oEvent),oController=oNsController.GetByIndex(iIndex),oNode=oController._Tree().GetNodeByElement(oTarget),sUrl=encodeURI(oController._Tree().GetNodeUrl(oNode));oController.Flags.DispatchSelectedItemsChanged=true;oController.OpenFolderAsync(sUrl,false,false,false,function(){oController.SetTreeActive()})};
ITHit.oNS.Controller.OpenParentFolder=function(oEvent,iIndex){var oNsController=ITHit.WebDAV.Client.AjaxFileBrowser.Controller;var oController=oNsController.GetByIndex(iIndex);if(!oController._url||oController._url==oController._baseUrl)return false;oController.OpenFolderAsync(ITHit.WebDAV.Client.HierarchyItem.GetFolderParentUri(oController._url))};ITHit.oNS.Controller.prototype.CopyGridSelected=function(){var urls=this._grid.GetSelectedItemsList();this.CopyMoveManager.CopyItems(urls)};
ITHit.oNS.Controller.prototype.CutGridSelected=function(){var urls=this._grid.GetSelectedItemsList();this.CopyMoveManager.CutItems(urls)};ITHit.oNS.Controller._GetEventTarget=function(oEvent){return oEvent.srcElement?oEvent.srcElement:oEvent.target};
ITHit.oNS.Controller.ShowTreeContextMenu=function(oEvent,iIndex){var oNsController=ITHit.WebDAV.Client.AjaxFileBrowser.Controller,oTarget=oNsController._GetEventTarget(oEvent),oController=oNsController.GetByIndex(iIndex),oMenu=oController._contextMenu,oNode=oController._Tree().GetNodeByElement(oTarget),sUrl=encodeURI(oController._Tree().GetNodeUrl(oNode)),oItem=oController._GetItem(sUrl);oMenu.ShowTreeContextMenu(oEvent,oTarget,oItem,sUrl)};
ITHit.oNS.Controller.TreeMouseDown=function(oEvent,iIndex){var oNsController=ITHit.WebDAV.Client.AjaxFileBrowser.Controller,oTarget=oNsController._GetEventTarget(oEvent),oController=oNsController.GetByIndex(iIndex),oNodeUrl=encodeURI(oController._Tree().GetNodeUrl(oController._Tree().GetNodeByElement(oTarget))),oNodeItem=oController._GetItem(oNodeUrl);if(!oNodeItem)return false;oController._DragDrop.MouseDown(oEvent,oTarget,oNsController._GetDragDropDataFromItems(oNodeItem))};
ITHit.oNS.Controller.prototype._OnGridMouseDownHandler=function(event,url){var selectedUrls=this._grid.GetSelectedItemsList();if(selectedUrls.length&&!this._grid.IsSelected(url))if(event.ctrlKey===false&&event.metaKey===false&&event.shiftKey===false){selectedUrls=[url];this._SetSelectedItemsCallback(selectedUrls)}else return false;if(!selectedUrls.length)selectedUrls.push(url);var dndData=this._GetDragDropDataFromItems_New(selectedUrls),target=ITHit.WebDAV.Client.AjaxFileBrowser.Controller._GetEventTarget(event);
this._DragDrop.MouseDown(event,target,dndData)};ITHit.oNS.Controller.prototype._GetDragDropDataFromItems_New=function(urls){if(!ITHit.Utils.IsArray(urls))urls=[urls];var item,dndData=[];for(var i=0,l=urls.length;i<l;i++){try{item=this.OnGetItemHandler(urls[i])}catch(e){item=this._GetItem(urls[i],true)}dndData.push({Name:item.DisplayName,Url:item.Href,ResourceType:item.ResourceType})}return dndData};
ITHit.oNS.Controller._GetDragDropDataFromItems=function(aItems){if(!ITHit.Utils.IsArray(aItems))aItems=[aItems];var aSource=[];for(var i=0,l=aItems.length;i<l;i++)aSource.push({Name:aItems[i].DisplayName,Url:aItems[i].Href,ResourceType:aItems[i].ResourceType});return aSource};
ITHit.oNS.Controller.prototype.OnGetDragDropTargetDataHandler=function(event,elem){if(-1==elem.className.indexOf("dnd_target"))return false;var treeNode=this._Tree().GetNodeByElement(elem),url;if(treeNode)url=encodeURI(this._Tree().GetNodeUrl(treeNode));else url=this._grid.GetUrlByElement(elem);if(!url)url=this._url;var item=this._GetItem(url);return ITHit.WebDAV.Client.AjaxFileBrowser.Controller._GetDragDropDataFromItems(item)[0]};
ITHit.oNS.Controller.OnDragOverHandler=function(event){if(ITHit.DetectBrowser.IE&&ITHit.DetectBrowser.IE<10)return false;var dt=event.dataTransfer;if(!dt)return;var dtTypes=dt.types;if(dtTypes){if(dtTypes.contains&&!dtTypes.contains("Files"))return;if(dtTypes.indexOf&&-1==dtTypes.indexOf("Files"))return}dt.dropEffect="copy";return false};ITHit.oNS.Controller.PreviousDragTarget;
ITHit.oNS.Controller.OnDragEnterHandler=function(event){if(ITHit.DetectBrowser.IE&&ITHit.DetectBrowser.IE<10)return false;var nsBrowser=ITHit.WebDAV.Client.AjaxFileBrowser,elem=nsBrowser.Controller._GetEventTarget(event),dropTarget=nsBrowser.Render.DragDrop.DragHelpers.FindTargetNode(elem);if(dropTarget&&nsBrowser.Controller.PreviousDragTarget!=dropTarget){dropTarget.className+=" drag_over";nsBrowser.Controller.PreviousDragTarget=dropTarget}return false};
ITHit.oNS.Controller.OnDragLeaveHandler=function(event){if(ITHit.DetectBrowser.IE&&ITHit.DetectBrowser.IE<10)return false;var nsBrowser=ITHit.WebDAV.Client.AjaxFileBrowser,elem=nsBrowser.Controller._GetEventTarget(event),dropTarget=nsBrowser.Render.DragDrop.DragHelpers.FindTargetNode(elem);nsBrowser.Controller.PreviousDragTarget=null;if(dropTarget)dropTarget.className=dropTarget.className.replace(" drag_over","");return false};
ITHit.oNS.Controller.OnFilesDropHandler=function(event,index){if(ITHit.DetectBrowser.IE&&ITHit.DetectBrowser.IE<10){ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.ShowMessage(ITHit.Phrases.AjaxFileBrowser.Interface.DropFilesIEUnsupported);return false}var nsClient=ITHit.WebDAV.Client,nsBrowser=nsClient.AjaxFileBrowser,nsController=nsBrowser.Controller,controller=nsController.GetByIndex(index),targetElem=nsBrowser.Render.DragDrop.DragHelpers.FindTargetNode(nsController._GetEventTarget(event)),dragTarget=
controller.OnGetDragDropTargetDataHandler(event,targetElem),dragTargetUrl=nsBrowser.UrlUtils.GetRelativePath(dragTarget.Url);if(!dragTarget)return false;if(dragTarget.ResourceType==ITHit.WebDAV.Client.ResourceType.Folder)dragTargetUrl=dragTargetUrl.replace(/\/?$/,"/");else dragTargetUrl=nsClient.HierarchyItem.GetFolderParentUri(dragTargetUrl);dragTargetUrl=ITHit.DecodeHost(controller._Utils.GetAbsolutePath(dragTargetUrl));var dropObject=new nsBrowser.UploadDropObjectAdapter(dragTargetUrl,event.dataTransfer,
function(dropObject){controller._upload._SubmitHandler(event,dropObject);if(targetElem)targetElem.className=targetElem.className.replace(" drag_over","")})};
ITHit.oNS.Controller.prototype.OnDragSuccessHandler=function(event,action,sourceData,targetData){var itemsUrlToCutOrCopy=[],targetUrl=targetData.Url,clientNs=ITHit.WebDAV.Client,moveFlag=action==clientNs.AjaxFileBrowser.Render.DragDrop.DragInfo.Actions.Move;if(targetData.ResourceType!=clientNs.ResourceType.Folder)targetUrl=clientNs.HierarchyItem.GetFolderParentUri(targetUrl);targetUrl=clientNs.Encoder.Decode(clientNs.AjaxFileBrowser.UrlUtils.GetRelativePath(targetUrl));for(var i=0,l=sourceData.length;i<
l;i++)itemsUrlToCutOrCopy.push(sourceData[i].Url);if(moveFlag)this.CopyMoveManager.CutItems(itemsUrlToCutOrCopy);else this.CopyMoveManager.CopyItems(itemsUrlToCutOrCopy);this.CopyMoveManager.PasteTo(targetUrl);return true};ITHit.oNS.Controller.prototype.OnDragFailHandler=function(event,action,sourceData,targetData){if(!targetData)return};ITHit.oNS.Controller.prototype.OnDragStartHandler=function(){this.EnterZone("Actions:InternalDragAndDrop")};ITHit.oNS.Controller.prototype.OnDragEndHandler=function(){this.LeaveZone("Actions:InternalDragAndDrop")};
ITHit.oNS.Controller.prototype.OnBoxSelectionStartHandler=function(event){this.EnterZone("Actions:BoxSelection");this._Grid().DeselectAll()};ITHit.oNS.Controller.prototype.OnBoxSelectHandler=function(beginX,beginY,endX,endY){this._Grid().SetSelectedByBoxArea(beginX,beginY,endX,endY)};ITHit.oNS.Controller.prototype.OnBoxSelectionEndHandler=function(){this.LeaveZone("Actions:BoxSelection")};ITHit.oNS.Controller.prototype.OnGetSelectionContextHandler=function(){return this._Grid().GetScrollerNode()};
ITHit.oNS.Controller.prototype.OnScrollTopHandler=function(top){return this._Grid().SetScrollTop(top)};ITHit.oNS.Controller.prototype.OnScrollLeftHandler=function(left){return this._Grid().SetScrollLeft(left)};ITHit.oNS.Controller.prototype._OnHistorySetHashHandler=function(sHash){this._SetAddressBarValue(ITHit.WebDAV.Client.Encoder.Decode(sHash))};
ITHit.oNS.Controller.prototype._OnHistoryUrlChangeHandler=function(sUrl){var preventSaveInHistory=false;if(!sUrl){if(!this._RootHistoryUrl)return;sUrl=this._RootHistoryUrl;preventSaveInHistory=true}var sAbsoluteUrl=sUrl.indexOf("://")===-1?this.Commands.GetAbsolutePath(sUrl,true):sUrl;if(this.CheckNaviagtionToAnotherServer(sAbsoluteUrl)){this.NavigateToAnotherServer(sAbsoluteUrl);return}this.OpenFolderAsync(sUrl,false,preventSaveInHistory)};
ITHit.oNS.Controller.prototype._OnHistorySearchQueryChangeHandler=function(sSearchQuery,sUrl){this.OpenSearchResultsAsync(sSearchQuery,sUrl)};ITHit.oNS.Controller.prototype.OnGetAbsolutePathHandler=function(url){return this._Utils.GetAbsolutePath(url)};
ITHit.oNS.Controller.ShowRightPaneContextMenu=function(oEvent,iIndex){var oNsController=ITHit.WebDAV.Client.AjaxFileBrowser.Controller,oTarget=oNsController._GetEventTarget(oEvent),oController=oNsController.GetByIndex(iIndex);oController._grid.DeselectAll();var oItem=oController._GetItem(oController._url,true);if(oItem)oController._contextMenu.ShowRightPaneContextMenu(oEvent,oTarget,oItem)};
ITHit.oNS.Controller.prototype.EditDocument=function(sUrl){if(!this._SharePointOpenOrEditDocs&&!this.EnablePlugins)return false;var ext=ITHit.Trim(sUrl.substr(sUrl.lastIndexOf(".")+1));if(!ext)return false;var fileFormatsNs=ITHit.WebDAV.Client.AjaxFileBrowser.FileFormats;if(fileFormatsNs.ProtectedExtentions.join("|").indexOf(ext)>=0){ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.ShowMessage(ITHit.Phrases.AjaxFileBrowser.Interface.ProtectedForRunningFileExtension.Paste(ext));return false}if(!/^https?:\/\//.test(sUrl))sUrl=
this._Utils.Host+sUrl.replace(/^\//,"");if(this._SharePointOpenOrEditDocs&&-1!=fileFormatsNs.MsOfficeEditExtensions.join("|").indexOf(ext))this.SharePointEditDocument(sUrl);else if(this.EnablePlugins){if(this._JavaEditApplet)this._JavaEditApplet.Destruct();this._JavaEditApplet=new ITHit.WebDAV.Client.AjaxFileBrowser.Plugins.JavaEditDocument(this.PluginsPath,sUrl,this._baseUrl,false,this.Settings.GetRootNode())}};
ITHit.oNS.Controller.prototype.OpenFolderInFM=function(sUrl){if(!/^https?:\/\//.test(sUrl))sUrl=this._Utils.Host+sUrl.replace(/^\//,"");if(ITHit.DetectBrowser.IE&&ITHit.DetectBrowser.IE<11){if(this._httpFolder==null){var span={nodeName:"span",style:{display:"none",behavior:"url(#default#httpFolder)"}};this._httpFolder=ITHit.Utils.CreateDOMElement(span);this.Settings.GetRootNode().appendChild(this._httpFolder)}var res=this._httpFolder.navigate(sUrl);if(res!="OK"){var fr=ITHit.Phrases.AjaxFileBrowser.Interface;
var html='<table cellspacing="10" style="width:100%">'+'<tr><td colspan="2"><b>'+fr.FailedToOpenWinExplorer+"</b></td></tr>"+'<tr><td style="width:60px; vertical-align:top" nowrap="">URL: </td><td nowrap="">'+sUrl+"</td></tr>"+'<tr><td nowrap="">'+fr.Error+'</td><td nowrap="">'+res+"</td></tr>"+'<tr><td colspan="2">'+fr.WebFoldersUpdate.Paste("http://www.microsoft.com/downloads/details.aspx?familyid=17C36612-632E-4C04-9382-987622ED1D64&displaylang=en")+"</td></tr>"+'<tr><td colspan="2" style="padding-top: 15px; text-align: right; ">'+
'<button type="button" ihDojoType="dijit.form.Button" class="ihDialogButton" iconClass="iconCancel" onclick="ITHit.WebDAV.Client.AjaxFileBrowser.Controller.HideDialog();" >'+fr.Close+"</button>"+"</td></tr>"+"</table>";this.ShowDialog(html,{width:"500px"},"Error")}}else if(this.EnablePlugins){if(this._JavaEditApplet)this._JavaEditApplet.Destruct();this._JavaEditApplet=new ITHit.WebDAV.Client.AjaxFileBrowser.Plugins.JavaEditDocument(this.PluginsPath,sUrl,this._baseUrl,true,this.Settings.GetRootNode())}};
ITHit.oNS.Controller.prototype.OpenContainingFolderInFM=function(sUrl){return this.OpenFolderInFM(sUrl.substring(0,sUrl.lastIndexOf("/")))};
ITHit.oNS.Controller.prototype.GetMsOfficeSchemaByExtension=function(sExt){sExt=sExt.toLowerCase();switch(sExt){case "docx":case "doc":case "docm":case "dot":case "dotm":case "dotx":case "odt":return"ms-word";case "xltx":case "xltm":case "xlt":case "xlsx":case "xlsm":case "xlsb":case "xls":case "xll":case "xlam":case "xla":case "ods":return"ms-excel";case "pptx":case "pptm":case "ppt":case "ppsx":case "ppsm":case "pps":case "ppam":case "ppa":case "potx":case "potm":case "pot":case "odp":return"ms-powerpoint";case "accdb":case "mdb":return"ms-access";
case "xsn":case "xsf":return"ms-infopath";case "pub":return"ms-publisher";case "vstx":case "vstm":case "vst":case "vssx":case "vssm":case "vssm":case "vss":case "vsl":case "vsdx":case "vsdm":case "vsd":case "vdw":return"ms-visio";case "mpp":case "mpt":return"ms-project"}};
ITHit.oNS.Controller.prototype.SharePointEditDocument=function(sUrl){if(!this._SharePointOpenOrEditDocs)return false;try{if(this.GetMsOfficeVersion()>=2013){var ext=ITHit.Trim(sUrl.substr(sUrl.lastIndexOf(".")+1));var url=this.GetMsOfficeSchemaByExtension(ext)+":ofe|u|"+sUrl;window.location.href=url}else{var sho=this.GetSharePointOpenDocumentsCtrl();if(sho)if(!sho.EditDocument(sUrl)){ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.ShowMessage(ITHit.Phrases.AjaxFileBrowser.Interface.CannotEditFile);
return false}}}catch(e){return false}};
ITHit.oNS.Controller.prototype.SharePointNewDocument=function(sTemplateIndex,sSaveUrl){if(!this._SharePointOpenOrEditDocs)return false;var msOfficeVersion=this.GetMsOfficeVersion();if(msOfficeVersion>=2013)sTemplateIndex+="_13";else sTemplateIndex+="_07";var sTemplate=ITHit.WebDAV.Client.AjaxFileBrowser.DocTemplates[sTemplateIndex];if(!sTemplate)throw new ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions.AjaxFileBrowserException(ITHit.Phrases.AjaxFileBrowser.Exceptions.WrongTemplateIndex);var sPath=
this.MsOfficeTemplatesPath;var oRegExp=new RegExp("^https?://");if(!oRegExp.test(sPath))sPath=this._Utils.Host+sPath.replace(/^\//,"");if(!oRegExp.test(sSaveUrl))sSaveUrl=this._Utils.Host+sSaveUrl.replace(/^\//,"");var sTemplatePath=sPath+sTemplate;try{if(msOfficeVersion>=2013){var ext=ITHit.Trim(sTemplatePath.substr(sTemplatePath.lastIndexOf(".")+1));var url=this.GetMsOfficeSchemaByExtension(ext)+":nft|u|"+sTemplatePath+"|s|"+sSaveUrl;window.location.href=url}else{var sho=this.GetSharePointOpenDocumentsCtrl();
if(sho)if(!sho.CreateNewDocument(sTemplatePath,sSaveUrl)){ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.ShowMessage(ITHit.Phrases.AjaxFileBrowser.Interface.CannotCreateDocument);return false}}}catch(e){return false}};ITHit.oNS.Controller.CheckFolderExistence=function(sUrl,sName){sName=sName.replace(/(?:^\s+|\s+$)/g,"");var oNsController=ITHit.WebDAV.Client.AjaxFileBrowser.Controller,oController=oNsController.GetByIndex(oNsController._GetActive()),oItem=oController._GetItem(sUrl+sName,true);return!!oItem};
ITHit.oNS.Controller.OnRightPaneClick=function(oEvent,iIndex){var oController=ITHit.WebDAV.Client.AjaxFileBrowser.Controller.GetByIndex(iIndex);if(oEvent.shiftKey||oEvent.ctrlKey)return;oController.SetTreeInactive();oController._grid.DeselectAll()};
ITHit.oNS.Controller.InterfaceHandler=function(event,index,method){var interfaceHandler=ITHit.WebDAV.Client.AjaxFileBrowser.Controller.GetByIndex(index)._InterfaceHandler;if(!interfaceHandler[method])throw new ITHit.WebDAV.Client.AjaxFileBrowser.Exceptions.AjaxFileBrowserException(ITHit.Phrases.AjaxFileBrowser.Exceptions.WrongInterfaceHandler.Paste(method));interfaceHandler[method](event)};
ITHit.oNS.Controller.RenameItem=function(sUrl,sNewName){var oNsController=ITHit.WebDAV.Client.AjaxFileBrowser.Controller;var oController=oNsController.GetByIndex(oNsController._GetActive());var oCommand=oController.Commands.Create("RenameCommand",{Href:sUrl,NewName:encodeURIComponent(sNewName),ReturnException:true,OnError:function(aErrors){ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.Rename(sUrl,oCommand.NewName);oController.Errors.ShowCommandErrors(aErrors);ITHit.Components.dijit._DialogLevelManager.hide(ITHit.Components.dijit.byId("ithit_interface_renameItem"))}});
if(oController._url===sUrl){var sFutureUrl=oCommand.GetFutureUrl();var isFolder=sFutureUrl.substr(sFutureUrl.length-1,1)==="/";oController._url=isFolder?sFutureUrl:ITHit.WebDAV.Client.HierarchyItem.GetFolderParentUri(sFutureUrl)}oCommand.Execute();return!oCommand.HasErrors()};
ITHit.oNS.Controller.CreateFolder=function(sUrl,sName){var oNsController=ITHit.WebDAV.Client.AjaxFileBrowser.Controller;var oController=oNsController.GetByIndex(oNsController._GetActive());var oCommand=oController.Commands.Create("CreateFolderCommand",{Href:sUrl,Name:sName,OnError:function(aErrors){ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.NewFolder(sUrl,oCommand.Name);oController.Errors.ShowCommandErrors(aErrors);ITHit.Components.dijit._DialogLevelManager.hide(ITHit.Components.dijit.byId("ithit_interface_newFolder"))},
OnSuccess:function(){ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.CloseNewFolder()}});oCommand.Execute();return!oCommand.HasErrors()};ITHit.oNS.Controller.prototype.CreateFolderAsync=function(sUrl,fCallback){this._session.CreateFolderAsync(sUrl,null,fCallback)};
ITHit.oNS.Controller.SetCopyMoveAction=function(sAction){var oNsController=ITHit.WebDAV.Client.AjaxFileBrowser.Controller;var oController=oNsController.GetByIndex(oNsController._GetActive());ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.CopyMoveOverwriteHide();oController.CopyMoveManager.SetOverwriteAction(sAction)};ITHit.oNS.Controller.prototype.OpenRewriteUploadFileDialog=function(sUrl){ITHit.WebDAV.Client.AjaxFileBrowser.Controller._SetActive(this._index);ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.RewriteUploadFile(sUrl)};
ITHit.oNS.Controller.SetRewriteUploadFileAction=function(sAction){var oNsController=ITHit.WebDAV.Client.AjaxFileBrowser.Controller,oController=oNsController.GetByIndex(oNsController._GetActive());ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.RewriteUploadFileHide();oController._upload.SetRewriteUploadFileAction(sAction)};
ITHit.oNS.Controller.Refresh=function(){var oNsController=ITHit.WebDAV.Client.AjaxFileBrowser.Controller;var oController=oNsController.GetByIndex(oNsController._GetActive());var sUrl=oController._url;if(!sUrl)return;oController.Refresh()};
ITHit.oNS.Controller.prototype.Refresh=function(fCallback){if(!this._url)return;var that=this;var prev=this.FlushCacheOnOpenFolder;this.FlushCacheOnOpenFolder=true;this.OpenFolderAsync(this._url,null,null,null,function(){that.FlushCacheOnOpenFolder=prev;if(fCallback)fCallback.apply(this,arguments)})};
ITHit.oNS.Controller.DeleteGridItems=function(sUrl){var oNs=ITHit.WebDAV.Client.AjaxFileBrowser;var oNsController=oNs.Controller;var oController=oNsController.GetByIndex(oNsController._GetActive());var aUrl=[];if(!sUrl)aUrl=oController._Grid().GetSelectedItemsList();else aUrl.push(sUrl);oController._Grid().DeselectAll();oController.DeleteItems(aUrl)};
ITHit.oNS.Controller.DeleteTreeNode=function(oEvent){var oNsController=ITHit.WebDAV.Client.AjaxFileBrowser.Controller;var oController=oNsController.GetByIndex(oNsController._GetActive());var oTarget=oController._GetEventTarget(oEvent)};ITHit.oNS.Controller.ToggleTreeView=function(iIndex){var oController=ITHit.WebDAV.Client.AjaxFileBrowser.Controller.GetByIndex(iIndex);oController.base.ToggleTreeView.call(oController)};
ITHit.oNS.Controller.ShowVersionsDialog=function(sUrl){var oNsController=ITHit.WebDAV.Client.AjaxFileBrowser.Controller;var oController=oNsController.GetByIndex(oNsController._GetActive());oController.GetVersions(sUrl)};ITHit.oNS.Controller.ShowPropertiesDialog=function(sUrl){var oNsController=ITHit.WebDAV.Client.AjaxFileBrowser.Controller;var oController=oNsController.GetByIndex(oNsController._GetActive());oController.GetProperties(sUrl)};
ITHit.oNS.Controller.EditPropertyDialog=function(){var oNsDialog=ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog;var oGrid=oNsDialog.ViewProperties._grid;if(1!=oGrid.GetSelectedCount())return false;var oItem=oGrid.GetSelectedItems()[0];var sNamespace=oGrid.GetValue(oItem,"Namespace");var sName=oGrid.GetValue(oItem,"Name");var mValue=oGrid.GetValue(oItem,"Value");oNsDialog.UpdateProperty(sNamespace,sName,mValue)};
ITHit.oNS.Controller.AddOrUpdateProperty=function(sUrl,sNamespace,sName,sValue){if(!sName||/([^\w\-\.]|^[0-9\-\.])/.test(sName)||!sNamespace||/([^\w\-\.]|^[0-9\-\.])/.test(sNamespace)){ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.ShowMessage(ITHit.Phrases.AjaxFileBrowser.Interface.PropertyNameRestriction);return false}var oNs=ITHit.WebDAV.Client,oNsController=oNs.AjaxFileBrowser.Controller,oController=oNsController.GetByIndex(oNsController._GetActive()),oProp=new oNs.Property(new oNs.PropertyName(sName,
sNamespace),sValue);oController.Commands.Create("PropertiesUpdate",{Href:sUrl,PropertiesToUpdate:[oProp],OnSuccess:function(oItem){ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.CloseAddProperty();ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.CloseUpdateProperty();oController.GetProperties(sUrl)}}).Execute();return false};
ITHit.oNS.Controller.DeleteProperties=function(sUrl){var oNs=ITHit.WebDAV.Client,oNsController=oNs.AjaxFileBrowser.Controller,oNsPropName=oNs.PropertyName,oController=oNsController.GetByIndex(oNsController._GetActive()),oGrid=oNs.AjaxFileBrowser.Render.Dialog.ViewProperties._grid;if(!oGrid.GetSelectedCount())return false;var aItems=oGrid.GetSelectedItems();var aProps=[];for(var i=0,l=aItems.length;i<l;i++)aProps.push(new oNsPropName(oGrid.GetValue(aItems[i],"Name"),oGrid.GetValue(aItems[i],"Namespace")));
oController.Commands.Create("PropertiesUpdate",{Href:sUrl,PropertiesToDelete:aProps,OnSuccess:function(oItem){ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.HideDeletePropertiesDialog();oController.GetProperties(sUrl)}}).Execute();return true};ITHit.oNS.Controller.OnResizeDataViewArea=function(index){var grid=ITHit.WebDAV.Client.AjaxFileBrowser.Controller.GetByIndex(index)._Grid();if(grid)grid.OnResizeViewArea()};ITHit.oNS.Controller.prototype.ShowUploadErrors=function(sUrl){this._error.ShowErrors(this._upload.GetErrors(sUrl))};
ITHit.oNS.Controller.ShowUploadErrors=function(iIndex,sUrl){var oNsController=ITHit.WebDAV.Client.AjaxFileBrowser.Controller;var oController=oNsController.GetByIndex(iIndex);oController.ShowUploadErrors(sUrl)};ITHit.oNS.Controller.ShowThumb=function(oImg,iSize){ITHit.WebDAV.Client.AjaxFileBrowser.Render.RenderController.ShowThumbnail(oImg,iSize)};
ITHit.oNS.Controller.IconLoaded=function(oImage){if(ITHit.DetectBrowser.IE&&ITHit.DetectBrowser.IE<7)ITHit.WebDAV.Client.AjaxFileBrowser.Utils.FixPNG(oImage);ITHit.WebDAV.Client.AjaxFileBrowser.Render.Utils.ResourceIcons.SaveIconInfo(oImage,true)};ITHit.oNS.Controller.IconNotFound=function(oImage){ITHit.WebDAV.Client.AjaxFileBrowser.Render.Utils.ResourceIcons.SaveIconInfo(oImage,false)};
ITHit.oNS.Controller.EnterZone=function(index,zone){var controller=ITHit.WebDAV.Client.AjaxFileBrowser.Controller.GetByIndex(index);controller.EnterZone(zone)};ITHit.oNS.Controller.prototype.EnterZone=function(zone){this._Shortcuts.EnterZone(zone)};ITHit.oNS.Controller.LeaveZone=function(index,zone){var controller=ITHit.WebDAV.Client.AjaxFileBrowser.Controller.GetByIndex(index);controller._Shortcuts.LeaveZone(zone)};ITHit.oNS.Controller.prototype.LeaveZone=function(zone){this._Shortcuts.LeaveZone(zone)};
ITHit.oNS.Controller.prototype.CheckNaviagtionToAnotherServer=function(sUrl){var oTmpUtils=new this._ns.UrlUtils(sUrl);return oTmpUtils.Host!==this.Commands.Host||oTmpUtils.BasePath.indexOf(this.Commands.BaseUrl)!==0};
ITHit.oNS.Controller.prototype.NavigateToAnotherServer=function(sUrl){this._NowOpenedFolder=null;var that=this;this.Commands.SetRootUrl(sUrl);this.Commands.LoadRootUrl(function(oItem){if(!oItem)if(ITHit.DetectBrowser.IE>=7&&ITHit.DetectBrowser.IE<=9)ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.ShowCustomDialog(ITHit.Phrases.AjaxFileBrowser.Interface.CrossDomainRequestsIssueIE,false,ITHit.Phrases.AjaxFileBrowser.Interface.CrossDomainRequestsIssueTitle);else ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.ShowCustomDialog(ITHit.Phrases.AjaxFileBrowser.Interface.CrossDomainRequestsIssue,
false,ITHit.Phrases.AjaxFileBrowser.Interface.CrossDomainRequestsIssueTitle);else that._ChangeRootElementCallback(sUrl,oItem)})};ITHit.oNS.Controller.prototype.OnAddressBarKeyDown=function(oEvent){if(ITHit.Components.dojo.keys.ENTER==oEvent.keyCode){var oElement=oEvent.target||oEvent.srcElement;this.OpenFolderFromInterface(oElement.value);ITHit.Components.dojo.stopEvent(oEvent)}};ITHit.oNS.Controller.prototype.SetUrl=function(sUrl){this.NavigateToAnotherServer(sUrl)};
ITHit.oNS.Controller.prototype.GetUrl=function(){return this.defaultParams.Url};ITHit.oNS.Controller.prototype.HistoryGoBack=function(){this.History.Back()};
ITHit.oNS.Controller.prototype._ChangeRootElementCallback=function(sUrl,oFolder){if(oFolder===false){ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.ShowMessage(ITHit.Phrases.AjaxFileBrowser.Interface.NonExistentLocation);return}this._Tree().RemoveNodes([this._Utils.BasePath]);var oTmpUtils=new this._ns.UrlUtils(sUrl);this._baseUrl=oTmpUtils.BasePath;this._Utils=oTmpUtils;this._Tree().SetRootNode(this._baseUrl);this.SetSelectedFolderAsync(sUrl)};
ITHit.oNS.Controller.prototype.OpenFolderFromInterface=function(sAddress){this.History.SetHash(ITHit.WebDAV.Client.Encoder.Encode(sAddress))};ITHit.oNS.Controller.prototype.GetSession=function(){return this.Commands.Session.GetWebDavSession()};ITHit.oNS.Controller.prototype.GetIisDetected=function(){return this.Commands.Session.GetIisDetected()};ITHit.oNS.Controller.prototype.GetTransferManager=function(){return this._upload};ITHit.oNS.Controller.prototype.GetProgressManager=function(){return this._upload.UploadManager};
ITHit.oNS.Controller.prototype.GetMenuManager=function(){return this._contextMenu};ITHit.oNS.Controller.prototype.ShowDialog=function(html,newStyle,title){ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.ShowCustomDialog(html,newStyle,title);ITHit.WebDAV.Client.AjaxFileBrowser.Controller._SetActive(this._index)};ITHit.oNS.Controller.prototype.HideDialog=function(){ITHit.WebDAV.Client.AjaxFileBrowser.Render.Dialog.HideCustomDialog()};
ITHit.oNS.Controller.HideDialog=function(){var controllerNs=ITHit.WebDAV.Client.AjaxFileBrowser.Controller;controllerNs.GetByIndex(controllerNs._GetActive()).HideDialog()};ITHit.oNS.Controller.BuyNow=function(){var oWin=window.open("http://www.webdavsystem.com/pricing#ajaxbrowser","_blank");oWin.focus()};ITHit.oNS.Controller.SetActiveState=function(iIndex){ITHit.WebDAV.Client.AjaxFileBrowser.Controller.GetByIndex(iIndex).SetActiveState()};ITHit.oNS.Controller.prototype.SetActiveState=function(){this._State.SetActiveState()};
ITHit.oNS.Controller.prototype.toString=function(){return this._ClassId};ITHit.oNS.Controller.prototype._OnClose=function(event){var queueEmpty=this.GetProgressManager().IsQueueEmpty();var msg=ITHit.Phrases.AjaxFileBrowser.Interface.UploadInProgressWarning;if(!queueEmpty){if(typeof event=="undefined")event=window.event;if(ITHit.DetectBrowser.Chrome||ITHit.DetectBrowser.Safari)return msg;else event.returnValue=msg}};ITHit.Temp={};
function InitAjaxFileBrowser(){let htmlRequestPath="";document.querySelectorAll('meta[name="thinfinity-detection"]').forEach(elem=>{let dn=elem.getAttribute("data-name");let dv=elem.getAttribute("data-value");if(dn==="HTMLREQUESTPATH")htmlRequestPath=dv;document.head.removeChild(elem)});let pathName=location.pathname;let proxyPath="";if(htmlRequestPath.length>0&&pathName.length>0&&pathName!="/"){paths=pathName.split("/").filter(t=>{return t!==""});if(paths.length>0){let len=paths.length;htmlRequestPath=
htmlRequestPath.split("/").filter(t=>{return t!==""});if(htmlRequestPath.length>0)htmlRequestPath=htmlRequestPath[0].toLowerCase();let i=0,found=false;while(i<len&&!found)if(paths[i].toLowerCase()===htmlRequestPath)found=true;else i++;proxyPath=`/${paths.splice(0,i).join("/")}`}}else proxyPath=pathName.endsWith("/ft/")?pathName.substr(0,pathName.length-4):pathName;if(proxyPath==="/")proxyPath="";var webDavServerPath=decodeURI(window.location.href);var webDavRoot=decodeURI(location.origin+proxyPath);
var settings={Id:"AjaxFileBrowserContainer",Url:webDavServerPath,Style:"height: 100%; width: 100%",FileIconsPath:webDavRoot+"/icons/",MsOfficeTemplatesPath:webDavRoot+"/templates/",SelectedFolder:webDavServerPath,UseLocalStorage:false,Panels:{Folders:{Show:true},FilesView:{Show:true},Toolbar:{Show:true,Items:[{"Id":"ViewsButton",Show:false},{"Id":"EditButton",Show:false},{"Id":"FileManagerButton",Show:false},{"Id":"VersionsButton",Show:false},{"Id":"CustomPropButton",Show:false}]},AddressBar:{Show:false},
UploadPanel:{Show:true},UploadProgressPanel:{Show:true}}};if(typeof window.filemanConsts!=="undefined"&&ITHit?.oNS?.Phrases?.EN)ITHit.oNS.Phrases.EN={...ITHit.oNS.Phrases.EN,...filemanConsts};var ajaxFileBrowser=new ITHit.WebDAV.Client.AjaxFileBrowser.Controller(settings);ITHit.Events.AddListener(ajaxFileBrowser.GetMenuManager(),"OnShowMenu",function(menu,aContextMenuHierarchyItems){var m=menu.Children.length-1;while(m>-1){switch(menu.Children[m].Id){case "OpenFolderInFM":case "OpenContainingFolderInFM":case "EditDocument":case "CustomProperties":case "Versions":menu.Children.splice(m,
1);break;case "View":if(menu.Children[m].Children[0].Id=="ElargeIcons")menu.Children[m].Children.splice(0,1);break}if(menu.Children[m].Type=="MenuSeparator"&&(m==0||m==menu.Children.Length-1||menu.Children[m-1].Type=="MenuSeparator"))menu.Children.splice(m,1);m--}});ITHit.Events.AddListener(ajaxFileBrowser,"OnOpenItem",function(oHierarchyItem){if(oHierarchyItem.Item.ResourceType!="Folder")return false})}
window.onload=function(){if(location.search!=""){location.href=location.href.replace(location.search,"");return}var url=window.location.href.split("#");if(url.length>1)window.location.href=url[0];else InitAjaxFileBrowser()};
