/* Thinfinity(c) Remote Desktop Server v7.0.3.114 */
/*
 zlib.js 2012 - imaya [ https://github.com/imaya/zlib.js ] The MIT License  jQuery blockUI plugin
 Version 2.70.0-2014.11.23
 Requires jQuery v1.7 or later

 Examples at: http://malsup.com/jquery/block/
 Copyright (c) 2007-2013 M. Alsup
 Dual licensed under the MIT and GPL licenses:
 http://www.opensource.org/licenses/mit-license.php
 http://www.gnu.org/licenses/gpl.html

 Thanks to Amir-Hossein Sobhi for some excellent contributions!
 jQuery Form Plugin
 version: 4.3.0
 Requires jQuery v1.7.2 or later
 Project repository: https://github.com/jquery-form/form

 Copyright 2017 Kevin Morris
 Copyright 2006 M. Alsup

 Dual licensed under the LGPL-2.1+ or MIT licenses
 https://github.com/jquery-form/form#license

 This library is free software; you can redistribute it and/or
 modify it under the terms of the GNU Lesser General Public
 License as published by the Free Software Foundation; either
 version 2.1 of the License, or (at your option) any later version.
 This library is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 Lesser General Public License for more details.
 jQuery AjaxQ - AJAX request queueing for jQuery

 Version: 0.0.1
 Date: July 22, 2008

 Copyright (c) 2008 Oleg Podolsky (oleg.podolsky@gmail.com)
 Licensed under the MIT (MIT-LICENSE.txt) license.

 http://plugins.jquery.com/project/ajaxq
 http://code.google.com/p/jquery-ajaxq/
 @overview es6-promise - a tiny implementation of Promises/A+.
 @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 @license   Licensed under MIT license
            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 @version   v4.2.8+1e68dce6
*/
Object.defineProperty(window,"productId",{"enumerable":true,"configurable":false,"get":function(){return"ZSC"}});Object.defineProperty(window,"cookiePrefix",{"enumerable":true,"configurable":false,"get":function(){return"ZSC"}});Object.defineProperty(window,"fromBroker",{"enumerable":true,"configurable":false,"get":function(){return false}});Object.defineProperty(window,"productName",{"enumerable":true,"configurable":false,"get":function(){return"zAnywhere"}});
(function(){var _binding=[{"base":"common","propName":"defaultSettings","scraper":false,"search":"customSettings"},{"base":"settings","propName":"customSettings","scraper":true},{"base":"editorSettings","propName":"customProfileDefaults","scraper":true}];var _warn=console.warn||console.log;function initialize(){if(window.cookiePrefix)_binding.forEach(function(item){if(window.userSettings&&(userSettings[window.cookiePrefix]&&userSettings[window.cookiePrefix][item.propName]||userSettings[item.base]&&
userSettings[item.base][item.search])){_warn("Loading settings ["+item.base+"] from deprecated customSettings instead of web.settings.");var _get=userSettings[window.cookiePrefix]&&userSettings[window.cookiePrefix][item.propName]?userSettings[window.cookiePrefix][item.propName]:userSettings[item.base][item.search];if(!window[item.propName])Object.defineProperty(window,item.propName,{"enumerable":true,"configurable":false,"get":function(){return _get}});else _warn("Cannot create web settings, ["+_definePropertyName+
"] property is already defined")}else if(window[item.base])if(item.scraper)if(window[item.base][window.cookiePrefix])if(!window[item.propName])Object.defineProperty(window,item.propName,{"enumerable":true,"configurable":false,"get":function(){return window[item.base][window.cookiePrefix]}});else _warn("Cannot create web settings, ["+_definePropertyName+"] property is already defined");else _warn(JSON.stringify(window[item.base])+" definitions is empty for this scraper ["+window.cookiePrefix+"], please complete the requested info.");
else{if(!window[item.propName])Object.defineProperty(window,item.propName,{"enumerable":true,"configurable":false,"get":function(){return window[item.base]}})}else _warn(item.base+" is not defined, please check web.settings file in DB folder")});else _warn("cookiePrefix is not defined");window.addEventListener("load",function(){if(typeof customSettings!="undefined")Object.defineProperty(customSettings,"defaultValues",{"enumerable":true,"configurable":false,"get":function(){return{"mobile":{"gestures":Thinfinity&&
Thinfinity.Mobile?Thinfinity.Mobile.defaultTouchGestures:[]}}}})})}initialize()})();
(function(){function StatusAPI(){var _ref=this;var _wnd=null;var _propKey="__#statusapi__";var _variables={};var _variablesDef={};function initialize(){_wnd=getTopWindow(window);var instance=_wnd[_propKey];if(instance)_ref=instance;else createInstance()}function getTopWindow(wnd){if(wnd.parent&&wnd.parent!=wnd)try{var hasError=true;if(wnd.parent.location.href){hasError=false;return getTopWindow(wnd.parent)}}catch(error){hasError=true}finally{if(hasError)return wnd}else return wnd}function createInstance(){attachHandlers();
defineProperties();_wnd[_propKey]=_ref}function attachHandlers(){window.addEventListener("addStatusAPIVariables",function(e){if(e&&e.detail)add(e.detail)})}function add(variables){if(variables){if(!variables.forEach)variables=[variables];var newOnes=false;variables.forEach(function(variable){if(_variables[variable.name]===undefined){newOnes=true;_variablesDef[variable.name]=variable;_variablesDef[variable.name].__attached={};Object.defineProperty(_variables,variable.name,{"enumerable":true,"configurable":false,
"get":variable.get})}else helper.console.log(helper.string.format("This variable is already registered [{0}]",variable.name),arguments)});if(newOnes)window.dispatchEvent(new CustomEvent("newStatusAPIVariables",null))}}function getValue(name){if(_variablesDef[name])return _variablesDef[name].get();else return undefined}function dump(name){var variablesToAdd=[];for(var kvp in _variablesDef){var variable=_variablesDef[kvp];if(name===undefined||!variable.__attached[name]){variablesToAdd.push(variable);
if(name!==undefined)variable.__attached[name]=true}}return variablesToAdd}function defineProperties(){Object.defineProperty(_ref,"add",{"enumerable":true,"configurable":false,"writable":false,"value":add});Object.defineProperty(_ref,"get",{"enumerable":true,"configurable":false,"writable":false,"value":getValue});Object.defineProperty(_ref,"dump",{"enumerable":true,"configurable":false,"writable":false,"value":dump});Object.defineProperty(_ref,"variables",{"enumerable":true,"configurable":false,"get":function(){return _variables}})}
initialize();return _ref}try{Thinfinity!=undefined}catch(e){Thinfinity={}}Thinfinity.StatusAPI=new StatusAPI})();
(function(){function setup($){$.fn._fadeIn=$.fn.fadeIn;var noOp=$.noop||function(){};var msie=/MSIE/.test(navigator.userAgent);var ie6=/MSIE 6.0/.test(navigator.userAgent)&&!/MSIE 8.0/.test(navigator.userAgent);var mode=document.documentMode||0;var setExpr=$.isFunction(document.createElement("div").style.setExpression);$.blockUI=function(opts){install(window,opts)};$.unblockUI=function(opts){remove(window,opts)};$.growlUI=function(title,message,timeout,onClose){var $m=$('<div class="growlUI"></div>');
if(title)$m.append("<h1>"+title+"</h1>");if(message)$m.append("<h2>"+message+"</h2>");if(timeout===undefined)timeout=3E3;var callBlock=function(opts){opts=opts||{};$.blockUI({message:$m,fadeIn:typeof opts.fadeIn!=="undefined"?opts.fadeIn:700,fadeOut:typeof opts.fadeOut!=="undefined"?opts.fadeOut:1E3,timeout:typeof opts.timeout!=="undefined"?opts.timeout:timeout,centerY:false,showOverlay:false,onUnblock:onClose,css:$.blockUI.defaults.growlCSS})};callBlock();var nonmousedOpacity=$m.css("opacity");$m.mouseover(function(){callBlock({fadeIn:0,
timeout:3E4});var displayBlock=$(".blockMsg");displayBlock.stop();displayBlock.fadeTo(300,1)}).mouseout(function(){$(".blockMsg").fadeOut(1E3)})};$.fn.block=function(opts){if(this[0]===window){$.blockUI(opts);return this}var fullOpts=$.extend({},$.blockUI.defaults,opts||{});this.each(function(){var $el=$(this);if(fullOpts.ignoreIfBlocked&&$el.data("blockUI.isBlocked"))return;$el.unblock({fadeOut:0})});return this.each(function(){if($.css(this,"position")=="static"){this.style.position="relative";
$(this).data("blockUI.static",true)}this.style.zoom=1;install(this,opts)})};$.fn.unblock=function(opts){if(this[0]===window){$.unblockUI(opts);return this}return this.each(function(){remove(this,opts)})};$.blockUI.version=2.7;$.blockUI.defaults={message:"<h1>Please wait...</h1>",title:null,draggable:true,theme:false,css:{padding:0,margin:0,width:"30%",top:"40%",left:"35%",textAlign:"center",color:"#000",border:"3px solid #aaa",backgroundColor:"#fff",cursor:"wait"},themedCSS:{width:"30%",top:"40%",
left:"35%"},overlayCSS:{backgroundColor:"#000",opacity:.6,cursor:"wait"},cursorReset:"default",growlCSS:{width:"350px",top:"10px",left:"",right:"10px",border:"none",padding:"5px",opacity:.6,cursor:"default",color:"#fff",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px","border-radius":"10px"},iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",forceIframe:false,baseZ:1E3,centerX:true,centerY:true,allowBodyStretch:true,bindEvents:true,
constrainTabKey:true,fadeIn:200,fadeOut:400,timeout:0,showOverlay:true,focusInput:true,focusableElements:":input:enabled:visible",onBlock:null,onUnblock:null,onOverlayClick:null,quirksmodeOffsetHack:4,blockMsgClass:"blockMsg",ignoreIfBlocked:false};var pageBlock=null;var pageBlockEls=[];function applyStyle(elem,style){for(var v in style)elem.style[v]=style[v]}function install(el,opts){var css,themedCSS;var full=el==window;var msg=opts&&opts.message!==undefined?opts.message:undefined;opts=$.extend({},
$.blockUI.defaults,opts||{});if(opts.ignoreIfBlocked&&$(el).data("blockUI.isBlocked"))return;opts.overlayCSS=$.extend({},$.blockUI.defaults.overlayCSS,opts.overlayCSS||{});css=$.extend({},$.blockUI.defaults.css,opts.css||{});if(opts.onOverlayClick)opts.overlayCSS.cursor="pointer";themedCSS=$.extend({},$.blockUI.defaults.themedCSS,opts.themedCSS||{});msg=msg===undefined?opts.message:msg;if(full&&pageBlock)remove(window,{fadeOut:0});if(msg&&typeof msg!="string"&&(msg.parentNode||msg.jquery)){var node=
msg.jquery?msg[0]:msg;var data={};$(el).data("blockUI.history",data);data.el=node;data.parent=node.parentNode;data.display=node.style.display;data.position=node.style.position;if(data.parent)data.parent.removeChild(node)}$(el).data("blockUI.onUnblock",opts.onUnblock);var z=opts.baseZ;var lyr1,lyr2,lyr3,s;if(msie||opts.forceIframe){lyr1=$('<iframe class="blockUI" src="'+opts.iframeSrc+'"></iframe>');applyStyle(lyr1[0],{"z-index":z++,"display":"none","border":"none","margin":0,"padding":0,"position":"absolute",
"width":"100%","height":"100%","top":0,"left":0})}else{lyr1=$('<div class="blockUI"></div>');applyStyle(lyr1[0],{"display":"none"})}if(opts.theme){lyr2=$('<div class="blockUI blockOverlay ui-widget-overlay"></div>');applyStyle(lyr2[0],{"z-index":z++,"display":"none"})}else{lyr2=$('<div class="blockUI blockOverlay" ></div>');applyStyle(lyr2[0],{"z-index":z++,"display":"none","border":"none","margin":0,"padding":0,"width":"100%","height":"100%","top":0,"left":0})}if(opts.theme&&full){s='<div class="blockUI '+
opts.blockMsgClass+' blockPage ui-dialog ui-widget ui-corner-all">';if(opts.title)s+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(opts.title||"&nbsp;")+"</div>";s+='<div class="ui-widget-content ui-dialog-content"></div>';s+="</div>";s=$(s);applyStyle(s[0],{"z-index":z+10,"display":"none","position":"fixed"})}else if(opts.theme){s='<div class="blockUI '+opts.blockMsgClass+' blockElement ui-dialog ui-widget ui-corner-all">';if(opts.title)s+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+
(opts.title||"&nbsp;")+"</div>";s+='<div class="ui-widget-content ui-dialog-content"></div>';s+="</div>";s=$(s);applyStyle(s[0],{"z-index":z+10,"display":"none","position":"absolute"})}else if(full){s=$('<div class="blockUI '+opts.blockMsgClass+' blockPage"></div>');applyStyle(s[0],{"z-index":z+10,"display":"none","position":"fixed"})}else{s=$('<div class="blockUI '+opts.blockMsgClass+' blockElement"></div>');applyStyle(s[0],{"z-index":z+10,"display":"none","position":"absolute"})}lyr3=s;if(msg)if(opts.theme){lyr3.css(themedCSS);
lyr3.addClass("ui-widget-content")}else lyr3.css(css);if(!opts.theme)lyr2.css(opts.overlayCSS);lyr2.css("position",full?"fixed":"absolute");if(msie||opts.forceIframe)lyr1.css("opacity",0);var layers=[lyr1,lyr2,lyr3],$par=full?$("body"):$(el);$.each(layers,function(){this.appendTo($par)});if(opts.theme&&opts.draggable&&$.fn.draggable)lyr3.draggable({handle:".ui-dialog-titlebar",cancel:"li"});var expr=setExpr&&(!$.support.boxModel||$("object,embed",full?null:el).length>0);if(ie6||expr){if(full&&opts.allowBodyStretch&&
$.support.boxModel)$("html,body").css("height","100%");if((ie6||!$.support.boxModel)&&!full){var t=sz(el,"borderTopWidth"),l=sz(el,"borderLeftWidth");var fixT=t?"(0 - "+t+")":0;var fixL=l?"(0 - "+l+")":0}$.each(layers,function(i,o){var s=o[0].style;s.position="absolute";if(i<2){if(full)s.setExpression("height","Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.support.boxModel?0:"+opts.quirksmodeOffsetHack+') + "px"');else s.setExpression("height",'this.parentNode.offsetHeight + "px"');
if(full)s.setExpression("width",'jQuery.support.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"');else s.setExpression("width",'this.parentNode.offsetWidth + "px"');if(fixL)s.setExpression("left",fixL);if(fixT)s.setExpression("top",fixT)}else if(opts.centerY){if(full)s.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"');
s.marginTop=0}else if(!opts.centerY&&full){var top=opts.css&&opts.css.top?parseInt(opts.css.top,10):0;var expression="((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+top+') + "px"';s.setExpression("top",expression)}})}if(msg){if(opts.theme)lyr3.find(".ui-widget-content").append(msg);else lyr3.append(msg);if(msg.jquery||msg.nodeType)$(msg).show()}if((msie||opts.forceIframe)&&opts.showOverlay)lyr1.show();if(opts.fadeIn){var cb=opts.onBlock?opts.onBlock:
noOp;var cb1=opts.showOverlay&&!msg?cb:noOp;var cb2=msg?cb:noOp;if(opts.showOverlay)lyr2._fadeIn(opts.fadeIn,cb1);if(msg)lyr3._fadeIn(opts.fadeIn,cb2)}else{if(opts.showOverlay)lyr2.show();if(msg)lyr3.show();if(opts.onBlock)opts.onBlock.bind(lyr3)()}bind(1,el,opts);if(full){pageBlock=lyr3[0];pageBlockEls=$(opts.focusableElements,pageBlock);if(opts.focusInput)setTimeout(focus,20)}else{center(lyr3[0],opts.centerX,opts.centerY);$(window).on("resize",function(){center(lyr3[0],opts.centerX,opts.centerY)})}if(opts.timeout){var to=
setTimeout(function(){if(full)$.unblockUI(opts);else $(el).unblock(opts)},opts.timeout);$(el).data("blockUI.timeout",to)}}function remove(el,opts){var count;var full=el==window;var $el=$(el);var data=$el.data("blockUI.history");var to=$el.data("blockUI.timeout");if(to){clearTimeout(to);$el.removeData("blockUI.timeout")}opts=$.extend({},$.blockUI.defaults,opts||{});bind(0,el,opts);if(opts.onUnblock===null){opts.onUnblock=$el.data("blockUI.onUnblock");$el.removeData("blockUI.onUnblock")}var els;if(full)els=
$("body").children().filter(".blockUI").add("body > .blockUI");else els=$el.find(">.blockUI");if(opts.cursorReset){if(els.length>1)els[1].style.cursor=opts.cursorReset;if(els.length>2)els[2].style.cursor=opts.cursorReset}if(full)pageBlock=pageBlockEls=null;if(opts.fadeOut){count=els.length;els.stop().fadeOut(opts.fadeOut,function(){if(--count===0)reset(els,data,opts,el)})}else reset(els,data,opts,el)}function reset(els,data,opts,el){var $el=$(el);if($el.data("blockUI.isBlocked"))return;els.each(function(i,
o){if(this.parentNode)this.parentNode.removeChild(this)});if(data&&data.el){data.el.style.display=data.display;data.el.style.position=data.position;data.el.style.cursor="default";if(data.parent)data.parent.appendChild(data.el);$el.removeData("blockUI.history")}if($el.data("blockUI.static"))$el.css("position","static");if(typeof opts.onUnblock=="function")opts.onUnblock(el,opts);var body=$(document.body),w=body.width(),cssW=body[0].style.width;body.width(w-1).width(w);body[0].style.width=cssW}function bind(b,
el,opts){var full=el==window,$el=$(el);if(!b&&(full&&!pageBlock||!full&&!$el.data("blockUI.isBlocked")))return;$el.data("blockUI.isBlocked",b);if(!full||!opts.bindEvents||b&&!opts.showOverlay)return;var events="mousedown mouseup keydown keypress keyup touchstart touchend touchmove";if(b)$(document).bind(events,opts,handler);else $(document).unbind(events,handler)}function handler(e){if(e.type==="keydown"&&e.keyCode&&e.keyCode==9)if(pageBlock&&e.data.constrainTabKey){var els=pageBlockEls;var fwd=!e.shiftKey&&
e.target===els[els.length-1];var back=e.shiftKey&&e.target===els[0];if(fwd||back){setTimeout(function(){focus(back)},10);return false}}var opts=e.data;var target=$(e.target);if(target.hasClass("blockOverlay")&&opts.onOverlayClick)opts.onOverlayClick(e);if(target.parents("div."+opts.blockMsgClass).length>0)return true;return target.parents().children().filter("div.blockUI").length===0}function focus(back){if(!pageBlockEls)return;var e=pageBlockEls[back===true?pageBlockEls.length-1:0];if(e)e.focus()}
function center(el,x,y){var p=el.parentNode,s=el.style;if(p){var l=(p.offsetWidth-el.offsetWidth)/2-sz(p,"borderLeftWidth");var t=(p.offsetHeight-el.offsetHeight)/2-sz(p,"borderTopWidth");if(x)s.left=l>0?l+"px":"0";if(y)s.top=t>0?t+"px":"0"}}function sz(el,p){return parseInt($.css(el,p),10)||0}}if(typeof define==="function"&&define.amd&&define.amd.jQuery)define(["jquery"],setup);else setup(jQuery)})();
!function(r){"function"==typeof define&&define.amd?define(["jquery"],r):"object"==typeof module&&module.exports?module.exports=function(e,t){return void 0===t&&(t="undefined"!=typeof window?require("jquery"):require("jquery")(e)),r(t),t}:r(jQuery)}(function(q){var m=/\r?\n/g,S={};S.fileapi=void 0!==q('<input type="file">').get(0).files,S.formdata=void 0!==window.FormData;var _=!!q.fn.prop;function o(e){var t=e.data;e.isDefaultPrevented()||(e.preventDefault(),q(e.target).closest("form").ajaxSubmit(t))}
function i(e){var t=e.target,r=q(t);if(!r.is("[type=submit],[type=image]")){var a=r.closest("[type=submit]");if(0===a.length)return;t=a[0]}var n,o=t.form;"image"===(o.clk=t).type&&(void 0!==e.offsetX?(o.clk_x=e.offsetX,o.clk_y=e.offsetY):"function"==typeof q.fn.offset?(n=r.offset(),o.clk_x=e.pageX-n.left,o.clk_y=e.pageY-n.top):(o.clk_x=e.pageX-t.offsetLeft,o.clk_y=e.pageY-t.offsetTop)),setTimeout(function(){o.clk=o.clk_x=o.clk_y=null},100)}function N(){var e;q.fn.ajaxSubmit.debug&&(e="[jquery.form] "+
Array.prototype.join.call(arguments,""),window.console&&window.console.log?window.console.log(e):window.opera&&window.opera.postError&&window.opera.postError(e))}q.fn.attr2=function(){if(!_)return this.attr.apply(this,arguments);var e=this.prop.apply(this,arguments);return e&&e.jquery||"string"==typeof e?e:this.attr.apply(this,arguments)},q.fn.ajaxSubmit=function(M,e,t,r){if(!this.length)return N("ajaxSubmit: skipping submit process - no element selected"),this;var O,a,n,o,X=this;"function"==typeof M?
M={success:M}:"string"==typeof M||!1===M&&0<arguments.length?(M={url:M,data:e,dataType:t},"function"==typeof r&&(M.success=r)):void 0===M&&(M={}),O=M.method||M.type||this.attr2("method"),n=(n=(n="string"==typeof(a=M.url||this.attr2("action"))?q.trim(a):"")||window.location.href||"")&&(n.match(/^([^#]+)/)||[])[1],o=/(MSIE|Trident)/.test(navigator.userAgent||"")&&/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",M=q.extend(!0,{url:n,success:q.ajaxSettings.success,type:O||q.ajaxSettings.type,
iframeSrc:o},M);var i={};if(this.trigger("form-pre-serialize",[this,M,i]),i.veto)return N("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(M.beforeSerialize&&!1===M.beforeSerialize(this,M))return N("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var s=M.traditional;void 0===s&&(s=q.ajaxSettings.traditional);var u,c,C=[],l=this.formToArray(M.semantic,C,M.filtering);if(M.data&&(c=q.isFunction(M.data)?M.data(l):M.data,M.extraData=c,u=q.param(c,s)),M.beforeSubmit&&!1===
M.beforeSubmit(l,this,M))return N("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[l,this,M,i]),i.veto)return N("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var f=q.param(l,s);u&&(f=f?f+"&"+u:u),"GET"===M.type.toUpperCase()?(M.url+=(0<=M.url.indexOf("?")?"&":"?")+f,M.data=null):M.data=f;var d,m,p,h=[];M.resetForm&&h.push(function(){X.resetForm()}),M.clearForm&&h.push(function(){X.clearForm(M.includeHidden)}),!M.dataType&&M.target?
(d=M.success||function(){},h.push(function(e,t,r){var a=arguments,n=M.replaceTarget?"replaceWith":"html";q(M.target)[n](e).each(function(){d.apply(this,a)})})):M.success&&(q.isArray(M.success)?q.merge(h,M.success):h.push(M.success)),M.success=function(e,t,r){for(var a=M.context||this,n=0,o=h.length;n<o;n++)h[n].apply(a,[e,t,r||X,X])},M.error&&(m=M.error,M.error=function(e,t,r){var a=M.context||this;m.apply(a,[e,t,r,X])}),M.complete&&(p=M.complete,M.complete=function(e,t){var r=M.context||this;p.apply(r,
[e,t,X])});var v=0<q("input[type=file]:enabled",this).filter(function(){return""!==q(this).val()}).length,g="multipart/form-data",x=X.attr("enctype")===g||X.attr("encoding")===g,y=S.fileapi&&S.formdata;N("fileAPI :"+y);var b,T=(v||x)&&!y;!1!==M.iframe&&(M.iframe||T)?M.closeKeepAlive?q.get(M.closeKeepAlive,function(){b=w(l)}):b=w(l):b=(v||x)&&y?function(e){for(var r=new FormData,t=0;t<e.length;t++)r.append(e[t].name,e[t].value);if(M.extraData){var a=function(e){var t,r,a=q.param(e,M.traditional).split("&"),
n=a.length,o=[];for(t=0;t<n;t++)a[t]=a[t].replace(/\+/g," "),r=a[t].split("="),o.push([decodeURIComponent(r[0]),decodeURIComponent(r[1])]);return o}(M.extraData);for(t=0;t<a.length;t++)a[t]&&r.append(a[t][0],a[t][1])}M.data=null;var n=q.extend(!0,{},q.ajaxSettings,M,{contentType:!1,processData:!1,cache:!1,type:O||"POST"});M.uploadProgress&&(n.xhr=function(){var e=q.ajaxSettings.xhr();return e.upload&&e.upload.addEventListener("progress",function(e){var t=0,r=e.loaded||e.position,a=e.total;e.lengthComputable&&
(t=Math.ceil(r/a*100)),M.uploadProgress(e,r,a,t)},!1),e});n.data=null;var o=n.beforeSend;return n.beforeSend=function(e,t){M.formData?t.data=M.formData:t.data=r,o&&o.call(this,e,t)},q.ajax(n)}(l):q.ajax(M),X.removeData("jqxhr").data("jqxhr",b);for(var j=0;j<C.length;j++)C[j]=null;return this.trigger("form-submit-notify",[this,M]),this;function w(e){var t,r,l,f,o,d,m,p,a,n,h,v,i=X[0],g=q.Deferred();if(g.abort=function(e){p.abort(e)},e)for(r=0;r<C.length;r++)t=q(C[r]),_?t.prop("disabled",!1):t.removeAttr("disabled");
(l=q.extend(!0,{},q.ajaxSettings,M)).context=l.context||l,o="jqFormIO"+(new Date).getTime();var s=i.ownerDocument,u=X.closest("body");if(l.iframeTarget?(n=(d=q(l.iframeTarget,s)).attr2("name"))?o=n:d.attr2("name",o):(d=q('<iframe name="'+o+'" src="'+l.iframeSrc+'" />',s)).css({position:"absolute",top:"-1000px",left:"-1000px"}),m=d[0],p={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},
abort:function(e){var t="timeout"===e?"timeout":"aborted";N("aborting upload... "+t),this.aborted=1;try{m.contentWindow.document.execCommand&&m.contentWindow.document.execCommand("Stop")}catch(e){}d.attr("src",l.iframeSrc),p.error=t,l.error&&l.error.call(l.context,p,t,e),f&&q.event.trigger("ajaxError",[p,l,t]),l.complete&&l.complete.call(l.context,p,t)}},(f=l.global)&&0==q.active++&&q.event.trigger("ajaxStart"),f&&q.event.trigger("ajaxSend",[p,l]),l.beforeSend&&!1===l.beforeSend.call(l.context,p,
l))return l.global&&q.active--,g.reject(),g;if(p.aborted)return g.reject(),g;(a=i.clk)&&(n=a.name)&&!a.disabled&&(l.extraData=l.extraData||{},l.extraData[n]=a.value,"image"===a.type&&(l.extraData[n+".x"]=i.clk_x,l.extraData[n+".y"]=i.clk_y));var x=1,y=2;function b(t){var r=null;try{t.contentWindow&&(r=t.contentWindow.document)}catch(e){N("cannot get iframe.contentWindow document: "+e)}if(r)return r;try{r=t.contentDocument?t.contentDocument:t.document}catch(e){N("cannot get iframe.contentDocument: "+
e),r=t.document}return r}var c=q("meta[name=csrf-token]").attr("content"),T=q("meta[name=csrf-param]").attr("content");function j(){var e=X.attr2("target"),t=X.attr2("action"),r=X.attr("enctype")||X.attr("encoding")||"multipart/form-data";i.setAttribute("target",o),O&&!/post/i.test(O)||i.setAttribute("method","POST"),t!==l.url&&i.setAttribute("action",l.url),l.skipEncodingOverride||O&&!/post/i.test(O)||X.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),l.timeout&&(v=setTimeout(function(){h=
!0,A(x)},l.timeout));var a=[];try{if(l.extraData)for(var n in l.extraData)l.extraData.hasOwnProperty(n)&&(q.isPlainObject(l.extraData[n])&&l.extraData[n].hasOwnProperty("name")&&l.extraData[n].hasOwnProperty("value")?a.push(q('<input type="hidden" name="'+l.extraData[n].name+'">',s).val(l.extraData[n].value).appendTo(i)[0]):a.push(q('<input type="hidden" name="'+n+'">',s).val(l.extraData[n]).appendTo(i)[0]));l.iframeTarget||d.appendTo(u),m.attachEvent?m.attachEvent("onload",A):m.addEventListener("load",
A,!1),setTimeout(function e(){try{var t=b(m).readyState;N("state = "+t),t&&"uninitialized"===t.toLowerCase()&&setTimeout(e,50)}catch(e){N("Server abort: ",e," (",e.name,")"),A(y),v&&clearTimeout(v),v=void 0}},15);try{i.submit()}catch(e){document.createElement("form").submit.apply(i)}}finally{i.setAttribute("action",t),i.setAttribute("enctype",r),e?i.setAttribute("target",e):X.removeAttr("target"),q(a).remove()}}T&&c&&(l.extraData=l.extraData||{},l.extraData[T]=c),l.forceSync?j():setTimeout(j,10);
var w,S,k,D=50;function A(e){if(!p.aborted&&!k){if((S=b(m))||(N("cannot access response document"),e=y),e===x&&p)return p.abort("timeout"),void g.reject(p,"timeout");if(e===y&&p)return p.abort("server abort"),void g.reject(p,"error","server abort");if(S&&S.location.href!==l.iframeSrc||h){m.detachEvent?m.detachEvent("onload",A):m.removeEventListener("load",A,!1);var t,r="success";try{if(h)throw"timeout";var a="xml"===l.dataType||S.XMLDocument||q.isXMLDoc(S);if(N("isXml="+a),!a&&window.opera&&(null===
S.body||!S.body.innerHTML)&&--D)return N("requeing onLoad callback, DOM not available"),void setTimeout(A,250);var n=S.body?S.body:S.documentElement;p.responseText=n?n.innerHTML:null,p.responseXML=S.XMLDocument?S.XMLDocument:S,a&&(l.dataType="xml"),p.getResponseHeader=function(e){return{"content-type":l.dataType}[e.toLowerCase()]},n&&(p.status=Number(n.getAttribute("status"))||p.status,p.statusText=n.getAttribute("statusText")||p.statusText);var o,i,s,u=(l.dataType||"").toLowerCase(),c=/(json|script|text)/.test(u);
c||l.textarea?(o=S.getElementsByTagName("textarea")[0])?(p.responseText=o.value,p.status=Number(o.getAttribute("status"))||p.status,p.statusText=o.getAttribute("statusText")||p.statusText):c&&(i=S.getElementsByTagName("pre")[0],s=S.getElementsByTagName("body")[0],i?p.responseText=i.textContent?i.textContent:i.innerText:s&&(p.responseText=s.textContent?s.textContent:s.innerText)):"xml"===u&&!p.responseXML&&p.responseText&&(p.responseXML=F(p.responseText));try{w=E(p,u,l)}catch(e){r="parsererror",p.error=
t=e||r}}catch(e){N("error caught: ",e),r="error",p.error=t=e||r}p.aborted&&(N("upload aborted"),r=null),p.status&&(r=200<=p.status&&p.status<300||304===p.status?"success":"error"),"success"===r?(l.success&&l.success.call(l.context,w,"success",p),g.resolve(p.responseText,"success",p),f&&q.event.trigger("ajaxSuccess",[p,l])):r&&(void 0===t&&(t=p.statusText),l.error&&l.error.call(l.context,p,r,t),g.reject(p,"error",t),f&&q.event.trigger("ajaxError",[p,l,t])),f&&q.event.trigger("ajaxComplete",[p,l]),
f&&!--q.active&&q.event.trigger("ajaxStop"),l.complete&&l.complete.call(l.context,p,r),k=!0,l.timeout&&clearTimeout(v),setTimeout(function(){l.iframeTarget?d.attr("src",l.iframeSrc):d.remove(),p.responseXML=null},100)}}}var F=q.parseXML||function(e,t){return window.ActiveXObject?((t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&"parsererror"!==t.documentElement.nodeName?t:null},L=q.parseJSON||function(e){return window.eval("("+
e+")")},E=function(e,t,r){var a=e.getResponseHeader("content-type")||"",n=("xml"===t||!t)&&0<=a.indexOf("xml"),o=n?e.responseXML:e.responseText;return n&&"parsererror"===o.documentElement.nodeName&&q.error&&q.error("parsererror"),r&&r.dataFilter&&(o=r.dataFilter(o,t)),"string"==typeof o&&(("json"===t||!t)&&0<=a.indexOf("json")?o=L(o):("script"===t||!t)&&0<=a.indexOf("javascript")&&q.globalEval(o)),o};return g}},q.fn.ajaxForm=function(e,t,r,a){if(("string"==typeof e||!1===e&&0<arguments.length)&&(e=
{url:e,data:t,dataType:r},"function"==typeof a&&(e.success=a)),(e=e||{}).delegation=e.delegation&&q.isFunction(q.fn.on),e.delegation||0!==this.length)return e.delegation?(q(document).off("submit.form-plugin",this.selector,o).off("click.form-plugin",this.selector,i).on("submit.form-plugin",this.selector,e,o).on("click.form-plugin",this.selector,e,i),this):(e.beforeFormUnbind&&e.beforeFormUnbind(this,e),this.ajaxFormUnbind().on("submit.form-plugin",e,o).on("click.form-plugin",e,i));var n={s:this.selector,
c:this.context};return!q.isReady&&n.s?(N("DOM not ready, queuing ajaxForm"),q(function(){q(n.s,n.c).ajaxForm(e)})):N("terminating; zero elements found by selector"+(q.isReady?"":" (DOM not ready)")),this},q.fn.ajaxFormUnbind=function(){return this.off("submit.form-plugin click.form-plugin")},q.fn.formToArray=function(e,t,r){var a=[];if(0===this.length)return a;var n,o,i,s,u,c,l,f,d,m,p=this[0],h=this.attr("id"),v=(v=e||void 0===p.elements?p.getElementsByTagName("*"):p.elements)&&q.makeArray(v);if(h&&
(e||/(Edge|Trident)\//.test(navigator.userAgent))&&(n=q(':input[form="'+h+'"]').get()).length&&(v=(v||[]).concat(n)),!v||!v.length)return a;for(q.isFunction(r)&&(v=q.map(v,r)),o=0,c=v.length;o<c;o++)if((m=(u=v[o]).name)&&!u.disabled)if(e&&p.clk&&"image"===u.type)p.clk===u&&(a.push({name:m,value:q(u).val(),type:u.type}),a.push({name:m+".x",value:p.clk_x},{name:m+".y",value:p.clk_y}));else if((s=q.fieldValue(u,!0))&&s.constructor===Array)for(t&&t.push(u),i=0,l=s.length;i<l;i++)a.push({name:m,value:s[i]});
else if(S.fileapi&&"file"===u.type){t&&t.push(u);var g=u.files;if(g.length)for(i=0;i<g.length;i++)a.push({name:m,value:g[i],type:u.type});else a.push({name:m,value:"",type:u.type})}else null!=s&&(t&&t.push(u),a.push({name:m,value:s,type:u.type,required:u.required}));return e||!p.clk||(m=(d=(f=q(p.clk))[0]).name)&&!d.disabled&&"image"===d.type&&(a.push({name:m,value:f.val()}),a.push({name:m+".x",value:p.clk_x},{name:m+".y",value:p.clk_y})),a},q.fn.formSerialize=function(e){return q.param(this.formToArray(e))},
q.fn.fieldSerialize=function(n){var o=[];return this.each(function(){var e=this.name;if(e){var t=q.fieldValue(this,n);if(t&&t.constructor===Array)for(var r=0,a=t.length;r<a;r++)o.push({name:e,value:t[r]});else null!=t&&o.push({name:this.name,value:t})}}),q.param(o)},q.fn.fieldValue=function(e){for(var t=[],r=0,a=this.length;r<a;r++){var n=this[r],o=q.fieldValue(n,e);null==o||o.constructor===Array&&!o.length||(o.constructor===Array?q.merge(t,o):t.push(o))}return t},q.fieldValue=function(e,t){var r=
e.name,a=e.type,n=e.tagName.toLowerCase();if(void 0===t&&(t=!0),t&&(!r||e.disabled||"reset"===a||"button"===a||("checkbox"===a||"radio"===a)&&!e.checked||("submit"===a||"image"===a)&&e.form&&e.form.clk!==e||"select"===n&&-1===e.selectedIndex))return null;if("select"!==n)return q(e).val().replace(m,"\r\n");var o=e.selectedIndex;if(o<0)return null;for(var i=[],s=e.options,u="select-one"===a,c=u?o+1:s.length,l=u?o:0;l<c;l++){var f=s[l];if(f.selected&&!f.disabled){var d=(d=f.value)||(f.attributes&&f.attributes.value&&
!f.attributes.value.specified?f.text:f.value);if(u)return d;i.push(d)}}return i},q.fn.clearForm=function(e){return this.each(function(){q("input,select,textarea",this).clearFields(e)})},q.fn.clearFields=q.fn.clearInputs=function(r){var a=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var e=this.type,t=this.tagName.toLowerCase();a.test(e)||"textarea"===t?this.value="":"checkbox"===e||"radio"===e?this.checked=!1:"select"===t?
this.selectedIndex=-1:"file"===e?/MSIE/.test(navigator.userAgent)?q(this).replaceWith(q(this).clone(!0)):q(this).val(""):r&&(!0===r&&/hidden/.test(e)||"string"==typeof r&&q(this).is(r))&&(this.value="")})},q.fn.resetForm=function(){return this.each(function(){var t=q(this),e=this.tagName.toLowerCase();switch(e){case "input":this.checked=this.defaultChecked;case "textarea":return this.value=this.defaultValue,!0;case "option":case "optgroup":var r=t.parents("select");return r.length&&r[0].multiple?
"option"===e?this.selected=this.defaultSelected:t.find("option").resetForm():r.resetForm(),!0;case "select":return t.find("option").each(function(e){if(this.selected=this.defaultSelected,this.defaultSelected&&!t[0].multiple)return t[0].selectedIndex=e,!1}),!0;case "label":var a=q(t.attr("for")),n=t.find("input,select,textarea");return a[0]&&n.unshift(a[0]),n.resetForm(),!0;case "form":return"function"!=typeof this.reset&&("object"!=typeof this.reset||this.reset.nodeType)||this.reset(),!0;default:return t.find("form,input,label,select,textarea").resetForm(),
!0}})},q.fn.enable=function(e){return void 0===e&&(e=!0),this.each(function(){this.disabled=!e})},q.fn.selected=function(r){return void 0===r&&(r=!0),this.each(function(){var e,t=this.type;"checkbox"===t||"radio"===t?this.checked=r:"option"===this.tagName.toLowerCase()&&(e=q(this).parent("select"),r&&e[0]&&"select-one"===e[0].type&&e.find("option").selected(!1),this.selected=r)})},q.fn.ajaxSubmit.debug=!1});
jQuery.ajaxq=function(queue,options){if(typeof document.ajaxq=="undefined")document.ajaxq={q:{},r:null};if(typeof document.ajaxq.q[queue]=="undefined")document.ajaxq.q[queue]=[];if(typeof options!="undefined"){var optionsCopy={};for(var o in options)optionsCopy[o]=options[o];options=optionsCopy;var originalCompleteCallback=options.complete;options.error=function(e){};options.complete=function(request,status){document.ajaxq.q[queue].shift();document.ajaxq.r=null;if(originalCompleteCallback)originalCompleteCallback(request,
status);if(document.ajaxq.q[queue].length>0)document.ajaxq.r=jQuery.ajax(document.ajaxq.q[queue][0])};document.ajaxq.q[queue].push(options);if(document.ajaxq.q[queue].length==1)document.ajaxq.r=jQuery.ajax(document.ajaxq.q[queue][0])}else{if(document.ajaxq.r){document.ajaxq.r.abort();document.ajaxq.r=null}document.ajaxq.q[queue]=[]}};var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};
$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};$jscomp.arrayFromIterator=function(a){for(var b,d=[];!(b=a.next()).done;)d.push(b.value);return d};$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))};
Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(a){if(void 0===a||null===a)throw new TypeError("Cannot convert first argument to object");for(var b=Object(a),d=1;d<arguments.length;d++){var e=arguments[d];if(void 0!==e&&null!==e){e=Object(e);for(var h=Object.keys(Object(e)),c=0,f=h.length;c<f;c++){var n=h[c],l=Object.getOwnPropertyDescriptor(e,n);void 0!==l&&l.enumerable&&(b[n]=e[n])}}}return b}});
var jsPanel={version:"3.11.3",date:"2019-11-25 21:49",id:0,ziBase:100,zi:100,modalcount:0,autopositionSpacing:5,pbTreshold:.556,lastbeforeclose:!1,template:'<div class="jsPanel">\n                <div class="jsPanel-hdr">\n                    <div class="jsPanel-headerbar">\n                        <div class="jsPanel-headerlogo"></div>\n                        <div class="jsPanel-titlebar">\n                            <h3 class="jsPanel-title"></h3>\n                        </div>\n                        <div class="jsPanel-controlbar">\n                            <div class="jsPanel-btn jsPanel-btn-smallify"><span class="jsglyph jsglyph-chevron-up"></span></div>\n                            <div class="jsPanel-btn jsPanel-btn-smallifyrev"><span class="jsglyph jsglyph-chevron-down"></span></div>\n                            <div class="jsPanel-btn jsPanel-btn-minimize"><span class="jsglyph jsglyph-minimize"></span></div>\n                            <div class="jsPanel-btn jsPanel-btn-normalize"><span class="jsglyph jsglyph-normalize"></span></div>\n                            <div class="jsPanel-btn jsPanel-btn-maximize"><span class="jsglyph jsglyph-maximize"></span></div>\n                            <div class="jsPanel-btn jsPanel-btn-close"><span class="jsglyph jsglyph-close"></span></div>\n                        </div>\n                    </div>\n                    <div class="jsPanel-hdr-toolbar"></div>\n                </div>\n                <div class="jsPanel-content jsPanel-content-nofooter"></div>\n                <div class="jsPanel-minimized-box"></div>\n                <div class="jsPanel-ftr"></div>\n               </div>',
replacementTemplate:'<div class="jsPanel-replacement">\n                            <div class="jsPanel-hdr">\n                                <div class="jsPanel-headerbar">\n                                    <div class="jsPanel-titlebar">\n                                        <h3 class="jsPanel-title"></h3>\n                                    </div>\n                                    <div class="jsPanel-controlbar">\n                                        <div class="jsPanel-btn jsPanel-btn-normalize"><span class="jsglyph jsglyph-normalize"></span></div>\n                                        <div class="jsPanel-btn jsPanel-btn-maximize"><span class="jsglyph jsglyph-maximize"></span></div>\n                                        <div class="jsPanel-btn jsPanel-btn-close"><span class="jsglyph jsglyph-close"></span></div>\n                                    </div>\n                                </div>\n                            </div>\n                          </div>',
themes:"default primary info success warning danger".split(" "),mdbthemes:["secondary","elegant","stylish","unique","special"],controls:"close maximize normalize minimize smallify smallifyrev".split(" "),tplHeaderOnly:'<div class="jsPanel">\n                        <div class="jsPanel-hdr">\n                            <div class="jsPanel-headerbar">\n                                <div class="jsPanel-headerlogo"></div>\n                                <div class="jsPanel-titlebar">\n                                    <h3 class="jsPanel-title"></h3>\n                                </div>\n                                <div class="jsPanel-controlbar">\n                                    <div class="jsPanel-btn jsPanel-btn-close"><span class="jsglyph jsglyph-close"></span></div>\n                                </div>\n                            </div>\n                            <div class="jsPanel-hdr-toolbar"></div>\n                        </div>\n                    </div>',
tplContentOnly:'<div class="jsPanel">\n                        <div class="jsPanel-content jsPanel-content-noheader jsPanel-content-nofooter"></div>\n                        <div class="jsPanel-minimized-box"></div>\n                     </div>',activePanels:{list:[],getPanel:function(a){return"string"===typeof a?document.getElementById(a).jspanel.noop():document.getElementById(this.list[a]).jspanel.noop()}},closeOnEscape:!1,isIE:function(){return-1!==navigator.appVersion.indexOf("Trident")}(),isEdge:function(){return-1!==
navigator.appVersion.indexOf("Edge")}(),addConnector:function(a){var b=a.option.paneltype.connectorBG||null;a[0].classList.contains("jsPanel-tooltip-top")?(a.append('<div class="jsPanel-connector jsPanel-connector-top">'),jQuery(".jsPanel-connector-top",a).css("border-top-color",b||this.calcConnectorBg(a,"top")),a.option.position.offsetY=a.option.position.offsetY-10||-10):a[0].classList.contains("jsPanel-tooltip-bottom")?(a.append('<div class="jsPanel-connector jsPanel-connector-bottom">'),jQuery(".jsPanel-connector-bottom",
a).css("border-bottom-color",b||this.calcConnectorBg(a,"bottom")),a.option.position.offsetY=a.option.position.offsetY+10||10):a[0].classList.contains("jsPanel-tooltip-left")?(a.append('<div class="jsPanel-connector jsPanel-connector-left">'),jQuery(".jsPanel-connector-left",a).css("border-left-color",b||this.calcConnectorBg(a,"left")),a.option.position.offsetX=a.option.position.offsetX-12||-12):a[0].classList.contains("jsPanel-tooltip-right")?(a.append('<div class="jsPanel-connector jsPanel-connector-right">'),
jQuery(".jsPanel-connector-right",a).css("border-right-color",b||this.calcConnectorBg(a,"right")),a.option.position.offsetX=a.option.position.offsetX+12||12):a[0].classList.contains("jsPanel-tooltip-lefttopcorner")?(a.append('<div class="jsPanel-connector jsPanel-connector-lefttopcorner">'),jQuery(".jsPanel-connector-lefttopcorner",a).css("background-color",b||this.calcConnectorBg(a,"lefttopcorner"))):a[0].classList.contains("jsPanel-tooltip-righttopcorner")?(a.append('<div class="jsPanel-connector jsPanel-connector-righttopcorner">'),
jQuery(".jsPanel-connector-righttopcorner",a).css("background-color",b||this.calcConnectorBg(a,"righttopcorner"))):a[0].classList.contains("jsPanel-tooltip-rightbottomcorner")?(a.append('<div class="jsPanel-connector jsPanel-connector-rightbottomcorner">'),jQuery(".jsPanel-connector-rightbottomcorner",a).css("background-color",b||this.calcConnectorBg(a,"rightbottomcorner"))):a[0].classList.contains("jsPanel-tooltip-leftbottomcorner")?(a.append('<div class="jsPanel-connector jsPanel-connector-leftbottomcorner">'),
jQuery(".jsPanel-connector-leftbottomcorner",a).css("background-color",b||this.calcConnectorBg(a,"leftbottomcorner"))):a[0].classList.contains("jsPanel-tooltip-lefttop")?(a.append('<div class="jsPanel-connector jsPanel-connector-lefttop">'),jQuery(".jsPanel-connector-lefttop",a).css("border-left-color",b||this.calcConnectorBg(a,"lefttop")),a.option.position.offsetX=a.option.position.offsetX-12||-12):a[0].classList.contains("jsPanel-tooltip-leftbottom")?(a.append('<div class="jsPanel-connector jsPanel-connector-leftbottom">'),
jQuery(".jsPanel-connector-leftbottom",a).css("border-left-color",b||this.calcConnectorBg(a,"leftbottom")),a.option.position.offsetX=a.option.position.offsetX-12||-12):a[0].classList.contains("jsPanel-tooltip-topleft")?(a.append('<div class="jsPanel-connector jsPanel-connector-topleft">'),jQuery(".jsPanel-connector-topleft",a).css("border-top-color",b||this.calcConnectorBg(a,"topleft")),a.option.position.offsetY=a.option.position.offsetY-10||-10):a[0].classList.contains("jsPanel-tooltip-topright")?
(a.append('<div class="jsPanel-connector jsPanel-connector-topright">'),jQuery(".jsPanel-connector-topright",a).css("border-top-color",b||this.calcConnectorBg(a,"topright")),a.option.position.offsetY=a.option.position.offsetY-10||-10):a[0].classList.contains("jsPanel-tooltip-righttop")?(a.append('<div class="jsPanel-connector jsPanel-connector-righttop">'),jQuery(".jsPanel-connector-righttop",a).css("border-right-color",b||this.calcConnectorBg(a,"righttop")),a.option.position.offsetX=a.option.position.offsetX+
12||12):a[0].classList.contains("jsPanel-tooltip-rightbottom")?(a.append('<div class="jsPanel-connector jsPanel-connector-rightbottom">'),jQuery(".jsPanel-connector-rightbottom",a).css("border-right-color",b||this.calcConnectorBg(a,"rightbottom")),a.option.position.offsetX=a.option.position.offsetX+12||12):a[0].classList.contains("jsPanel-tooltip-bottomleft")?(a.append('<div class="jsPanel-connector jsPanel-connector-bottomleft">'),jQuery(".jsPanel-connector-bottomleft",a).css("border-bottom-color",
b||this.calcConnectorBg(a,"bottomleft")),a.option.position.offsetY=a.option.position.offsetY+10||10):a[0].classList.contains("jsPanel-tooltip-bottomright")&&(a.append('<div class="jsPanel-connector jsPanel-connector-bottomright">'),jQuery(".jsPanel-connector-bottomright",a).css("border-bottom-color",b||this.calcConnectorBg(a,"bottomright")),a.option.position.offsetY=a.option.position.offsetY+10||10)},addCustomTheme:function(a){-1===this.themes.indexOf(a)&&this.themes.push(a)},ajax:function(a){var b=
a.option.contentAjax,d=a.option.contentSize;b.then&&(b.then[0]&&(b.done=b.then[0]),b.then[1]&&(b.fail=b.then[1]));jQuery.ajax(b).done(function(d,h,c){b.autoload&&a.content.append(d);jQuery.isFunction(b.done)&&b.done.call(a,d,h,c,a)}).fail(function(d,h,c){jQuery.isFunction(b.fail)&&b.fail.call(a,d,h,c,a)}).always(function(e,h,c){jQuery.isFunction(b.always)&&b.always.call(a,e,h,c,a);a.hasClass("jsPanel-contextmenu")&&jsPanel.checkContextmenuOverflow(a);"string"===typeof d&&d.match(/auto/i)?(e=d.split(" "),
e=Object.assign({},jQuery.jsPanel.resizedefaults,{width:e[0],height:e[1]}),b.autoresize&&a.resize(e),a.hasClass("jsPanel-contextmenu")||b.autoreposition&&a.reposition()):!jQuery.isPlainObject(d)||"auto"!==d.width&&"auto"!==d.height||(e=Object.assign({},jQuery.jsPanel.resizedefaults,d),b.autoresize&&a.resize(e),a.hasClass("jsPanel-contextmenu")||b.autoreposition&&a.reposition())});a.data("ajaxURL",b.url)},applyBuiltInTheme:function(a,b){a[0].classList.add("jsPanel-theme-"+b.color);a.header[0]&&a.header[0].classList.add("jsPanel-theme-"+
b.color);"filled"===b.filling?a.content.css("background","")[0].classList.add("jsPanel-content-filled"):"filledlight"===b.filling&&a.content.css("background","")[0].classList.add("jsPanel-content-filledlight");a.option.headerToolbar||a.content.css({borderTop:"1px solid "+a.header.title.css("color")})},applyArbitraryTheme:function(a,b){a.header.css("background-color",b.colors[0]);jQuery(".jsPanel-headerlogo, .jsPanel-title, .jsPanel-controlbar .jsPanel-btn .jsglyph, .jsPanel-hdr-toolbar",a).css({color:b.colors[3]});
a.option.headerToolbar?a.header.toolbar.css({boxShadow:"0 0 1px "+b.colors[3]+" inset",width:"calc(100% + 4px)",marginLeft:"-1px"}):a.content.css({borderTop:"1px solid "+b.colors[3]});"filled"===b.filling?a.content.css({backgroundColor:b.colors[0],color:b.colors[3]}):"filledlight"===b.filling&&a.content.css({backgroundColor:b.colors[1]})},applyBootstrapTheme:function(a,b){a.addClass("panel panel-"+b.bstheme+" card card-inverse card-"+b.bstheme);a.header[0]&&(a.header[0].classList.add("panel-heading"),
a.header.title[0].classList.add("panel-title"));if("mdb"===b.bs){var d=b.bstheme+"-color";b.mdbStyle&&(d+="-dark");a.removeClass("panel panel-"+b.bstheme);a[0].classList.add(d)}a.content[0].classList.add("panel-body");a.content.css("border-top-color",function(){return a.header.css("border-top-color")});a.footer.addClass("panel-footer card-footer");d="transparent"===jQuery(".panel-heading",a).css("background-color")?a.css("background-color").replace(/\s+/g,""):jQuery(".panel-heading",a).css("background-color").replace(/\s+/g,
"");var e=this.calcColors(d);jQuery(".jsPanel-headerlogo, .jsPanel-title, .jsPanel-controlbar .jsPanel-btn, .jsPanel-hdr-toolbar",a.header).css("color",e[3]);a.option.headerToolbar?a.header.toolbar.css({boxShadow:"0 0 1px "+e[3]+" inset",width:"calc(100% + 4px)",marginLeft:"-1px"}):a.content.css({borderTop:"1px solid "+e[3]});"filled"===b.filling?a.content.css({backgroundColor:d,color:e[3]}):"filledlight"===b.filling&&a.content.css({backgroundColor:e[1],color:"#000000"})},applyThemeBorder:function(a,
b){var d=a.option.border.split(" ");a.css({borderWidth:d[0],borderStyle:d[1],borderColor:d[2]});if(b.bs){var e="transparent"===jQuery(".panel-heading",a).css("background-color")?a.css("background-color").replace(/\s+/g,""):jQuery(".panel-heading",a).css("background-color").replace(/\s+/g,"");d[2]?a.css("border-color",d[2]):a.css("border-color",e)}else-1===this.themes.indexOf(b.color)&&(d[2]?a.css("border-color",d[2]):a.css("border-color",b.colors[0]))},calcColors:function(a){var b=this.color(a),d=
this.lighten(a,.81),e=this.darken(a,.5);a=this.perceivedBrightness(a)<=this.pbTreshold?"#ffffff":"#000000";var h=this.perceivedBrightness(d)<=this.pbTreshold?"#ffffff":"#000000",c=this.perceivedBrightness(e)<=this.pbTreshold?"#000000":"#ffffff";return[b.hsl.css,d,e,a,h,c]},calcConnectorBg:function(a,b){var d=a.content.css("background-color"),e=a.footer.css("background-color"),h=a.header.css("background-color");if(b.match(/^(top|topleft|topright|lefttopcorner|righttopcorner|leftbottom|rightbottom)$/))return"none"!==
a.footer.css("display")?e:0<parseFloat(a.option.contentSize.height)?d:h;if(b.match(/^(bottom|bottomleft|bottomright|leftbottomcorner|rightbottomcorner)$/))if(a.option.headerRemove){if(0<parseFloat(a.option.contentSize.height))return d;if("none"!==a.footer.css("display"))return e}else return h;else{if(b.match(/^(lefttop|righttop)$/))return a.option.headerRemove?d:h;if(b.match(/^(left|right)$/)){if(0<parseFloat(a.option.contentSize.height))return d;if(!a.option.headerRemove)return h;if("none"!==a.footer.css("display"))return e}}},
clearTheme:function(a){this.themes.concat(this.mdbthemes).forEach(function(b){a.removeClass("panel card card-inverse jsPanel-theme-"+b+" panel-"+b+" card-"+b+" "+b+"-color");a.header.removeClass("panel-heading jsPanel-theme-"+b)});a.content.removeClass("panel-body jsPanel-content-filled jsPanel-content-filledlight");a.css({borderWidth:"",borderStyle:"",borderColor:""});jQuery(".jsPanel-hdr, .jsPanel-content",a).css({background:""});jQuery(".jsPanel-headerlogo, .jsPanel-title, .jsPanel-controlbar .jsPanel-btn .jsglyph, .jsPanel-hdr-toolbar, .jsPanel-content",
a).css({color:""});a.header.title.removeClass("panel-title");a.header.toolbar.css({boxShadow:"",width:"",marginLeft:""});a.css({borderTop:"",borderTopColor:""});a.footer.removeClass("panel-footer card-footer")},close:function(a,b){for(var d=[],e=1;e<arguments.length;++e)d[e-1]=arguments[e];var h=function(a,b){for(var d=[],e=1;e<arguments.length;++e)d[e-1]=arguments[e];d=n;e=a.option.position;if(e.autoposition||"string"===typeof e&&e.match(/DOWN|RIGHT|UP|LEFT/i)){e=jQuery(a).parent();var h=document.getElementById(c).className.match(/left-top|center-top|right-top|left-center|center|right-center|left-bottom|center-bottom|right-bottom/);
h&&(jsPanel.lastbeforeclose={parent:e,"class":h[0]})}a.closeChildpanels().remove();if(!jQuery("#"+c).length){e=jsPanel.activePanels.list.indexOf(c);-1<e&&jsPanel.activePanels.list.splice(e,1);jsPanel.remMinReplacement(a);"modal"===a.option.paneltype&&jsPanel.removeModalBackdrop(a);a.option.paneltype.tooltip&&f.classList.remove("hasTooltip");jQuery(document).trigger("jspanelclosed",c);jQuery(document).trigger("jspanelstatuschange",c);if(jsPanel.lastbeforeclose){var l=jsPanel.lastbeforeclose.parent;
l=jQuery("."+jsPanel.lastbeforeclose["class"],l);var A=jsPanel.lastbeforeclose["class"]}l&&(l.each(function(a,b){b.classList.remove(A)}),l.each(function(b,c){jsPanel.position(c,a.option.position)}));jsPanel.lastbeforeclose=!1;!0===d[2]?jQuery.noop():jQuery.isFunction(a.option.onclosed)&&a.option.onclosed.call(a,a);d[0]&&jQuery.isFunction(d[0])&&d[0].call(a,a);jsPanel.resetZis()}},c=a.attr("id"),f=this.setTrigger(a.option.position);e=a.option.delayClose;var n=d;jQuery(document).trigger("jspanelbeforeclose",
c);if(jQuery.isFunction(a.option.onbeforeclose))if(!0===d[1])jQuery.noop();else if(!1===a.option.onbeforeclose.call(a,a))return a;e?"number"===typeof e&&0<e?window.setTimeout(function(){h(a,d[0],d[2])},e):h(a,d[0],d[2]):h(a,d[0],d[2])},closeChildpanels:function(a){jQuery(".jsPanel",a).each(function(a,d){d.jspanel.close()});return a},closePanels:function(a){jQuery(".jsPanel-"+a).each(function(a,d){d.jspanel&&d.jspanel.close()})},calcPositionFactors:function(a){"body"===a.option.container?(a.hf=parseInt(a.css("left"),
10)/(jQuery(window).outerWidth()-a.outerWidth()),a.vf=parseInt(a.css("top"),10)/(jQuery(window).outerHeight()-a.outerHeight())):(a.hf=parseInt(a.css("left"),10)/(a.parent().outerWidth()-a.outerWidth()),a.vf=parseInt(a.css("top"),10)/(a.parent().outerHeight()-a.outerHeight()))},color:function(a){var b=a.toLowerCase();a={};var d=/^rgba?\(([0-9]{1,3}),([0-9]{1,3}),([0-9]{1,3}),?(0|1|0\.[0-9]{1,2}|\.[0-9]{1,2})?\)$/gi;var e=/^hsla?\(([0-9]{1,3}),([0-9]{1,3}%),([0-9]{1,3}%),?(0|1|0\.[0-9]{1,2}|\.[0-9]{1,2})?\)$/gi;
var h={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgrey:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",
darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",
grey:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",
lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",
orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",
snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"};h[b]&&(b=h[b]);null!==b.match(/^#?([0-9a-f]{3}|[0-9a-f]{6})$/gi)?(b=b.replace("#",""),1===b.length%2?(d=String(b.substr(0,1))+b.substr(0,1),e=String(b.substr(1,1))+b.substr(1,1),b=String(b.substr(2,1))+b.substr(2,1),a.rgb={r:parseInt(d,16),g:parseInt(e,16),b:parseInt(b,
16)},a.hex="#"+d+e+b):(a.rgb={r:parseInt(b.substr(0,2),16),g:parseInt(b.substr(2,2),16),b:parseInt(b.substr(4,2),16)},a.hex="#"+b),b=this.rgbToHsl(a.rgb.r,a.rgb.g,a.rgb.b),a.hsl=b,a.rgb.css="rgb("+a.rgb.r+","+a.rgb.g+","+a.rgb.b+")"):b.match(d)?(d=d.exec(b),a.rgb={css:b,r:d[1],g:d[2],b:d[3]},a.hex=this.rgbToHex(d[1],d[2],d[3]),b=this.rgbToHsl(d[1],d[2],d[3]),a.hsl=b):b.match(e)?(d=e.exec(b),b=d[1]/360,e=d[2].substr(0,d[2].length-1)/100,h=d[3].substr(0,d[3].length-1)/100,b=this.hslToRgb(b,e,h),a.rgb=
{css:"rgb("+b[0]+","+b[1]+","+b[2]+")",r:b[0],g:b[1],b:b[2]},a.hex=this.rgbToHex(a.rgb.r,a.rgb.g,a.rgb.b),a.hsl={css:"hsl("+d[1]+","+d[2]+","+d[3]+")",h:d[1],s:d[2],l:d[3]}):(a.hex="#f5f5f5",a.rgb={css:"rgb(245,245,245)",r:245,g:245,b:245},a.hsl={css:"hsl(0,0%,96.08%)",h:0,s:"0%",l:"96.08%"});return a},configIconfont:function(a){var b="remove fullscreen resize-full minus chevron-up chevron-down".split(" "),d="times fa-window-close;arrows-alt fa-window-maximize;expand fa-window-restore;minus fa-window-minimize;chevron-up;chevron-down".split(";"),
e="close fullscreen fullscreen_exit call_received expand_less expand_more".split(" "),h=a.option.headerControls.iconfont,c=a.header.headerbar;"bootstrap"===h||"glyphicon"===h?this.controls.forEach(function(a,d){jQuery(".jsPanel-btn-"+a+" span",c).removeClass().addClass("glyphicon glyphicon-"+b[d])}):"font-awesome"===h?this.controls.forEach(function(a,b){jQuery(".jsPanel-btn-"+a+" span",c).removeClass().addClass("fa fa-"+d[b])}):"material-icons"===h?this.controls.forEach(function(a,b){jQuery(".jsPanel-btn-"+
a+" span",c).removeClass().addClass("material-icons").text(e[b])}):Array.isArray(h)&&this.controls.forEach(function(a,b){jQuery(".jsPanel-btn-"+a+" span",c).removeClass().addClass("custom-control-icon "+h[b])})},configToolbar:function(a,b,d){a.forEach(function(a){if("object"===typeof a){var e=jQuery(a.item);"string"===typeof a.btntext&&e.append(a.btntext);"string"===typeof a.btnclass&&a.btnclass.split(" ").forEach(function(a){e[0].classList.add(a)});b.append(e);if(jQuery.isFunction(a.callback))e.on(a.event||
"click",d,a.callback)}})},contentReload:function(a,b){a.option.content?a.content.empty().append(a.option.content):a.option.contentAjax?(a.content.empty(),this.ajax(a)):a.option.contentIframe&&(a.content.empty(),this.iframe(a));b&&jQuery.isFunction(b)&&b.call(a,a);return a},contentResize:function(a,b){var d=a.footer[0].classList.contains("active")?a.header.outerHeight()+a.footer.outerHeight():a.header.outerHeight(),e=parseInt(a.css("border-top-width"),10)+parseInt(a.css("border-bottom-width"),10);
a.content.css({height:a.outerHeight()-d-e});b&&jQuery.isFunction(b)&&b.call(a,a);return a},createMinimizedReplacement:function(a){var b=jQuery(this.replacementTemplate),d=a.header.title.css("color"),e=a.header.title[0].textContent;var h="transparent"===a.header.css("background-color")?a.css("background-color"):a.header.css("background-color");a.css("left","-9999px").data("status","minimized");b.css("background-color",h).prop("id",a.prop("id")+"-min").find("h3").css("color",d).prop("title",e).html(e);
a.header.logo.children().length&&jQuery(".jsPanel-headerbar",b).prepend(a.header.logo.clone());a=a.option.headerControls.iconfont;"font-awesome"===a?(jQuery(".jsglyph.jsglyph-normalize",b).removeClass().addClass("fa fa-expand fa-window-restore"),jQuery(".jsglyph.jsglyph-maximize",b).removeClass().addClass("fa fa-arrows-alt fa-window-maximize"),jQuery(".jsglyph.jsglyph-close",b).removeClass().addClass("fa fa-times fa-window-close")):"bootstrap"===a||"glyphicon"===a?(jQuery(".jsglyph.jsglyph-normalize",
b).removeClass().addClass("glyphicon glyphicon-resize-full"),jQuery(".jsglyph.jsglyph-maximize",b).removeClass().addClass("glyphicon glyphicon-fullscreen"),jQuery(".jsglyph.jsglyph-close",b).removeClass().addClass("glyphicon glyphicon-remove")):"material-icons"===a?(jQuery(".jsglyph.jsglyph-normalize",b).removeClass().addClass("material-icons").text("call_made"),jQuery(".jsglyph.jsglyph-maximize",b).removeClass().addClass("material-icons").text("fullscreen"),jQuery(".jsglyph.jsglyph-close",b).removeClass().addClass("material-icons").text("close")):
Array.isArray(a)&&(jQuery(".jsglyph.jsglyph-normalize",b).removeClass().addClass("custom-control-icon "+a[2]),jQuery(".jsglyph.jsglyph-maximize",b).removeClass().addClass("custom-control-icon "+a[1]),jQuery(".jsglyph.jsglyph-close",b).removeClass().addClass("custom-control-icon "+a[0]));jQuery(".jsPanel-btn span",b).css({color:d});return b},darken:function(a,b){var d=this.color(a).hsl,e=parseFloat(d.l);return"hsl("+d.h+","+d.s+","+(e-e*b+"%)")},dblclickhelper:function(a,b){if("string"===typeof a)if("maximize"===
a||"normalize"===a)"normalized"===b.data("status")?b.maximize():b.normalize();else if("minimize"===a||"smallify"===a||"close"===a)b[a]()},dragit:function(a,b){b=void 0===b?{}:b;var d="string"===typeof a?document.querySelector(a):a.jquery?a[0]:a;var e=a.jquery?a:d,h,c=Object.assign({},jQuery.jsPanel.defaults.dragit,b),f=c.containment,n,l=d.parentElement,G=window.getComputedStyle(d,null).getPropertyValue("position"),v=l.tagName.toLowerCase(),y=d.querySelector(".jsPanel-content"),t,z,A=[];if(jsPanel.isIE){var u=
document.createEvent("CustomEvent");var w=document.createEvent("CustomEvent");var k=document.createEvent("CustomEvent");u.initCustomEvent("dragstart",!0,!0,{});w.initCustomEvent("drag",!0,!0,{});k.initCustomEvent("dragstop",!0,!0,{})}else u=new Event("dragstart"),w=new Event("drag"),k=new Event("dragstop");var x=c.handles?d.querySelectorAll(c.handles):[d];"number"===typeof f?f=[].concat(f,f,f,f):"[object Array]"===Object.prototype.toString.call(f)&&(2===f.length?f=f.concat(f):3===f.length&&(f[3]=
f[1]));if("[object Array]"===Object.prototype.toString.call(f)){var g=f;c.containment="body"===v?f="window":f="parent"}f&&"body"===v&&(c.containment=f="window");for(var p={$jscomp$loop$prop$i$16:0};p.$jscomp$loop$prop$i$16<x.length;p={$jscomp$loop$prop$i$16:p.$jscomp$loop$prop$i$16},p.$jscomp$loop$prop$i$16++)jsPanel.evtStart.forEach(function(a){return function(b){x[a.$jscomp$loop$prop$i$16].addEventListener(b,function(a){a.preventDefault();if(a.button&&0<a.button)return!1;A=Array.prototype.slice.call(document.querySelectorAll("iframe"));
A.length&&A.forEach(function(a){a.style.pointerEvents="none"});var b=d.getBoundingClientRect(),r=l.getBoundingClientRect(),m=window.getComputedStyle(l,null),k=m.getPropertyValue("position"),p=parseInt(m.getPropertyValue("border-left-width"),10),H=parseInt(m.getPropertyValue("border-right-width"),10),P=parseInt(m.getPropertyValue("border-top-width"),10);m=parseInt(m.getPropertyValue("border-bottom-width"),10);var x=a.touches?a.touches[0].pageX:a.pageX,y=a.touches?a.touches[0].pageY:a.pageY,C=window.scrollX||
window.pageXOffset,M=window.scrollY||window.pageYOffset,q;if("fixed"===G){var E=b.left;var F=b.top}else"body"===v||"static"===k?(E=b.left,F=b.top):"body"!==v&&(E=b.left-r.left-p+l.scrollLeft,F=b.top-r.top-P+l.scrollTop);if("body"===v&&f)if("fixed"===G){var Q=q=0;var I=document.documentElement.clientWidth-b.width;var J=document.documentElement.clientHeight-b.height}else q=C,Q=M,I=document.documentElement.clientWidth-b.width+C,J=document.documentElement.clientHeight-b.height+M;else"parent"===f?"static"===
k?(q=r.left+p+C,Q=r.top+P+M,I=q+r.width-b.width-p-H,J=Q+r.height-b.height-P-m):(Q=q=0,I=r.width-b.width-p-H,J=r.height-b.height-P-m):"window"===f&&("static"===k?(q=C,Q=M,I=document.documentElement.clientWidth-b.width+C,J=document.documentElement.clientHeight-b.height+M):(q=-r.left-p,Q=-r.top-P,I=document.documentElement.clientWidth-r.left-b.width-H,J=document.documentElement.clientHeight-r.top-b.height-m));g&&(q+=g[3],Q+=g[0],I-=g[1],J-=g[2]);var K=parseFloat(d.style.left)-b.left,D=parseFloat(d.style.top)-
b.top;l!==document.body&&(K+=r.left,D+=r.top);n=function(b){a.preventDefault();if(c.disableOnMaximized&&"maximized"===jQuery(d).data("status"))return!1;h||(document.dispatchEvent(u),d.style.opacity=c.opacity,"function"===typeof c.start&&c.start.call(e,e,{left:E,top:F}));h=1;document.dispatchEvent(w);t=p+E+(b.touches?b.touches[0].pageX:b.pageX)-x+K;z=P+F+(b.touches?b.touches[0].pageY:b.pageY)-y+D;t<=q?t=q:t>=I&&(t=I);z<=Q?z=Q:z>=J&&(z=J);"x"===c.axis?d.style.left=t+"px":("y"!==c.axis&&(d.style.left=
t+"px"),d.style.top=z+"px");if(c.grid&&Array.isArray(c.grid)){1===c.grid.length&&(c.grid[1]=c.grid[0]);b=parseFloat(d.style.left);var f=parseFloat(d.style.top),g=b%c.grid[0],r=f%c.grid[1];d.style.left=g<c.grid[0]/2?b-g+"px":b+(c.grid[0]-g)+"px";d.style.top=r<c.grid[1]/2?f-r+"px":f+(c.grid[1]-r)+"px"}window.getSelection().removeAllRanges();"function"===typeof c.drag&&c.drag.call(e,e,{left:parseFloat(e.css("left")),top:parseFloat(e.css("top"))})};jsPanel.evtMove.forEach(function(a){document.addEventListener(a,
n,!1)})},!1)}}(p));jsPanel.evtEnd.forEach(function(b){document.addEventListener(b,function(){jsPanel.evtMove.forEach(function(a){document.removeEventListener(a,n,!1)});h&&(y.style.pointerEvents="inherit",document.dispatchEvent(k),d.style.opacity=1,h=void 0,jsPanel.calcPositionFactors(a),"function"===typeof c.stop&&c.stop.call(e,e,{left:parseFloat(e.css("left")),top:parseFloat(e.css("top"))}));A.length&&A.forEach(function(a){a.style.pointerEvents="inherit"})},!1)});return e},resizeit:function(a,b){b=
void 0===b?{}:b;var d="string"===typeof a?document.querySelector(a):a.jquery?a[0]:a;var e=a.jquery?a:d,h,c=Object.assign({},jQuery.jsPanel.defaults.resizeit,b),f=c.containment,n,l=window.getComputedStyle(d,null),G=l.getPropertyValue("position"),v=parseInt(l.getPropertyValue("border-left-width"),10),y=parseInt(l.getPropertyValue("border-top-width"),10),t=parseInt(l.getPropertyValue("border-right-width"),10),z=parseInt(l.getPropertyValue("border-bottom-width"),10),A=d.parentElement,u=A.tagName.toLowerCase(),
w=d.querySelector(".jsPanel-content"),k="function"===typeof c.maxWidth?c.maxWidth():c.maxWidth,x="function"===typeof c.maxHeight?c.maxHeight():c.maxHeight,g="function"===typeof c.minWidth?c.minWidth():c.minWidth,p="function"===typeof c.minHeight?c.minHeight():c.minHeight,C=[];if(jsPanel.isIE){var K=document.createEvent("CustomEvent");var D=document.createEvent("CustomEvent");var B=document.createEvent("CustomEvent");K.initCustomEvent("dragstart",!0,!0,{});D.initCustomEvent("drag",!0,!0,{});B.initCustomEvent("dragstop",
!0,!0,{})}else K=new Event("dragstart"),D=new Event("drag"),B=new Event("dragstop");"number"===typeof f?f=[].concat(f,f,f,f):"[object Array]"===Object.prototype.toString.call(f)&&(2===f.length?f=f.concat(f):3===f.length&&(f[3]=f[1]));if("[object Array]"===Object.prototype.toString.call(f)){var r=f;c.containment="body"===u?f="window":f="parent"}f&&"body"===u&&(c.containment=f="window");c.handles.split(",").forEach(function(a){var b=document.createElement("DIV");b.className="jsPanel-resizeit-handle jsPanel-resizeit-"+
a.trim();b.style.zIndex=90;d.appendChild(b)});var m=d.getElementsByClassName("jsPanel-resizeit-handle");for(l={$jscomp$loop$prop$i$18:0};l.$jscomp$loop$prop$i$18<m.length;l={$jscomp$loop$prop$i$18:l.$jscomp$loop$prop$i$18},l.$jscomp$loop$prop$i$18++)jsPanel.evtStart.forEach(function(b){return function(l){m[b.$jscomp$loop$prop$i$18].addEventListener(l,function(b){b.preventDefault();if(b.button&&0<b.button)return!1;C=Array.prototype.slice.call(document.querySelectorAll("iframe"));C.length&&C.forEach(function(a){a.style.pointerEvents=
"none"});var m=d.getBoundingClientRect(),l=A.getBoundingClientRect(),L=window.getComputedStyle(A,null),S=L.getPropertyValue("position"),M=parseInt(L.getPropertyValue("border-left-width"),10),q=parseInt(L.getPropertyValue("border-top-width"),10);L=parseInt(L.getPropertyValue("border-bottom-width"),10);var E=b.pageX||b.touches[0].pageX,F=b.pageY||b.touches[0].pageY,Q=window.scrollX||window.pageXOffset,I=m.width,J=m.height,H=b.target,B=1E4,N=1E4,R=1E4,O=1E4;w.style.pointerEvents="none";if("fixed"===
G){var V=m.left-v-t;var W=m.top-y-z}else"body"===u||"static"===S?(V=m.left-v-t,W=m.top-y-z):"body"!==u&&(V=m.left-l.left-M+A.scrollLeft-v-t,W=m.top-l.top-q+A.scrollTop-y-z);"body"===u&&f?(B=document.documentElement.clientWidth-m.left-v-t,R=document.documentElement.clientHeight-m.top-y-z,N=m.width+m.left-v-t,O=m.height+m.top-y-z):"parent"===f?"static"===S?(B=l.width-m.left-v-Q,R=l.height+l.top-m.top+y-q-L,N=m.width+(m.left-l.left)-M,O=m.height+(m.top-l.top)-q):(B=A.clientWidth-(m.left-l.left)+v,R=
A.clientHeight-(m.top-l.top)+y,N=m.width+(m.left-l.left)-M-v-t,O=d.clientHeight+(m.top-l.top)-y-y-z):"window"===f&&(B=document.documentElement.clientWidth-m.left-v-t,R=document.documentElement.clientHeight-m.top-y-z,N=m.left+m.width-v-t,O=m.top+m.height-y-z);r&&(N-=r[3],O-=r[0],B-=r[1],R-=r[2]);b=window.getComputedStyle(d);var T=parseFloat(b.width)-m.width,U=parseFloat(b.height)-m.height,X=parseFloat(b.left)-m.left,Y=parseFloat(b.top)-m.top;A!==document.body&&(X+=l.left,Y+=l.top);n=function(b){b.preventDefault();
h||(document.dispatchEvent(K),"function"===typeof c.start&&c.start.call(e,e,{width:I,height:J}));h=1;document.dispatchEvent(D);if(H.classList.contains("jsPanel-resizeit-e"))b=I+(b.pageX||b.touches[0].pageX)-E+T,b>=B&&(b=B),b>=k?b=k:b<=g&&(b=g),d.style.width=b+"px";else if(H.classList.contains("jsPanel-resizeit-se")){var f=I+(b.pageX||b.touches[0].pageX)-E+T;b=J+(b.pageY||b.touches[0].pageY)-F+U;f>=B&&(f=B);b>=R&&(b=R);f>=k?f=k:f<=g&&(f=g);b>=x?b=x:b<=p&&(b=p);d.style.width=f+"px";d.style.height=b+
"px"}else H.classList.contains("jsPanel-resizeit-s")?(b=J+(b.pageY||b.touches[0].pageY)-F+U,b>=R&&(b=R),b>=x?b=x:b<=p&&(b=p),d.style.height=b+"px"):H.classList.contains("jsPanel-resizeit-w")?(f=I+E-(b.pageX||b.touches[0].pageX)+T,f<=k&&f>=g&&f<=N&&(d.style.left=V+M+(b.pageX||b.touches[0].pageX)-E+X+"px"),f>=N&&(f=N),f>=k?f=k:f<=g&&(f=g),d.style.width=f+"px"):H.classList.contains("jsPanel-resizeit-n")?(f=J+F-(b.pageY||b.touches[0].pageY)+U,f<=x&&f>=p&&f<=O&&(d.style.top=W+q+(b.pageY||b.touches[0].pageY)-
F+Y+"px"),f>=O&&(f=O),f>=x?f=x:f<=p&&(f=p),d.style.height=f+"px"):H.classList.contains("jsPanel-resizeit-sw")?(f=J+(b.pageY||b.touches[0].pageY)-F+U,f>=R&&(f=R),f>=x?f=x:f<=p&&(f=p),d.style.height=f+"px",f=I+E-(b.pageX||b.touches[0].pageX)+T,f<=k&&f>=g&&f<=N&&(d.style.left=V+M+(b.pageX||b.touches[0].pageX)-E+X+"px"),f>=N&&(f=N),f>=k?f=k:f<=g&&(f=g),d.style.width=f+"px"):H.classList.contains("jsPanel-resizeit-nw")?(f=J+F-(b.pageY||b.touches[0].pageY)+U,f<=x&&f>=p&&f<=O&&(d.style.top=W+q+(b.pageY||
b.touches[0].pageY)-F+Y+"px"),f>=O&&(f=O),f>=x?f=x:f<=p&&(f=p),d.style.height=f+"px",f=I+E-(b.pageX||b.touches[0].pageX)+T,f<=k&&f>=g&&f<=N&&(d.style.left=V+M+(b.pageX||b.touches[0].pageX)-E+X+"px"),f>=N&&(f=N),f>=k?f=k:f<=g&&(f=g),d.style.width=f+"px"):H.classList.contains("jsPanel-resizeit-ne")&&(f=J+F-(b.pageY||b.touches[0].pageY)+U,f<=x&&f>=p&&f<=O&&(d.style.top=W+q+(b.pageY||b.touches[0].pageY)-F+Y+"px"),f>=O&&(f=O),f>=x?f=x:f<=p&&(f=p),d.style.height=f+"px",b=I+(b.pageX||b.touches[0].pageX)-
E+T,b>=B&&(b=B),b>=k?b=k:b<=g&&(b=g),d.style.width=b+"px");jsPanel.contentResize(a);window.getSelection().removeAllRanges();"function"===typeof c.resize&&c.resize.call(e,e,{width:parseFloat(e.css("width")),height:parseFloat(e.css("height"))})};jsPanel.evtMove.forEach(function(a){document.addEventListener(a,n,!1)});window.addEventListener("mouseout",function(a){null===a.relatedTarget&&jsPanel.evtMove.forEach(function(a){document.removeEventListener(a,n,!1)})},!1)},!1)}}(l));jsPanel.evtEnd.forEach(function(b){document.addEventListener(b,
function(b){if(b.target.classList&&b.target.classList.contains("jsPanel-resizeit-handle")){var f,g;b=b.target.className;b.match(/jsPanel-resizeit-nw|jsPanel-resizeit-w|jsPanel-resizeit-sw/i)&&(f=!0);b.match(/jsPanel-resizeit-nw|jsPanel-resizeit-n|jsPanel-resizeit-ne/i)&&(g=!0);if(c.grid&&Array.isArray(c.grid)){1===c.grid.length&&(c.grid[1]=c.grid[0]);b=parseFloat(d.style.width);var m=parseFloat(d.style.height),l=b%c.grid[0],r=m%c.grid[1],k=parseFloat(d.style.left),p=parseFloat(d.style.top),E=k%c.grid[0],
F=p%c.grid[1];d.style.width=l<c.grid[0]/2?b-l+"px":b+(c.grid[0]-l)+"px";d.style.height=r<c.grid[1]/2?m-r+"px":m+(c.grid[1]-r)+"px";f&&(d.style.left=E<c.grid[0]/2?k-E+"px":k+(c.grid[0]-E)+"px");g&&(d.style.top=F<c.grid[1]/2?p-F+"px":p+(c.grid[1]-F)+"px")}jsPanel.contentResize(a)}jsPanel.evtMove.forEach(function(a){document.removeEventListener(a,n,!1)});h&&(w.style.pointerEvents="inherit",document.dispatchEvent(B),h=void 0,("smallified"===jQuery(d).data("status")||"smallifiedMax"===jQuery(d).data("status"))&&
jQuery(d).height()>jQuery(d).header.height()&&(jQuery(d).hideControls([".jsPanel-btn-normalize",".jsPanel-btn-smallifyrev"]),jQuery(d).data("status","normalized"),jQuery(document).trigger("jspanelnormalized"),jQuery(document).trigger("jspanelstatuschange")),jsPanel.calcPositionFactors(a),"function"===typeof c.stop&&c.stop.call(e,e,{width:parseFloat(e.css("width")),height:parseFloat(e.css("height"))}));C.length&&C.forEach(function(a){a.style.pointerEvents="inherit"})},!1)});return e},exportPanels:function(a,
b){a=void 0===a?".jsPanel":a;b=void 0===b?"jspanels":b;var d=[],e=jQuery(".jsPanel").not(".jsPanel-tooltip, .jsPanel-hint, .jsPanel-modal").filter(a);e.each(function(a,b){"normalized"!==jQuery(b).data("status")&&jQuery(".jsPanel-btn-normalize",b).trigger("click")});e.each(function(a,b){var c=jQuery(b).data("container");var e=jQuery(b).offset();var h=jQuery(b).position();if("minimized"===jQuery(b).data("status")){"body"===c.toLowerCase()?(c=jQuery(b).data("paneltop")-jQuery(window).scrollTop(),e=jQuery(b).data("panelleft")-
jQuery(window).scrollLeft()):(c=jQuery(b).data("paneltop"),e=jQuery(b).data("panelleft"));h=jQuery(b).data("panelwidth");var G=jQuery(b).data("panelheight")}else"body"===c.toLowerCase()?(c=Math.floor(e.top-jQuery(window).scrollTop()),e=Math.floor(e.left-jQuery(window).scrollLeft())):(c=Math.floor(h.top),e=Math.floor(h.left)),h=jQuery(b).css("width"),G=jQuery(".jsPanel-content",b).css("height");c={status:jQuery(b).data("status"),id:jQuery(b).prop("id"),headerTitle:jQuery(".jsPanel-title",b).html(),
custom:jQuery(b).data("custom"),content:jQuery(b).data("content"),contentSize:{width:h,height:G},position:{my:"left-top",at:"left-top",offsetX:e,offsetY:c}};jQuery(b).data("ajaxURL")&&(c.contentAjax={url:jQuery(b).data("ajaxURL"),autoload:!0});if(jQuery(b).data("iframeDOC")||jQuery(b).data("iframeSRC"))c.contentIframe={src:jQuery(b).data("iframeSRC")||"",srcdoc:jQuery(b).data("iframeDOC")||""};d.push(c);switch(c.status){case "minimized":jQuery(".jsPanel-btn-minimize",b).trigger("click");break;case "maximized":jQuery(".jsPanel-btn-maximize",
b).trigger("click");break;case "smallified":jQuery(".jsPanel-btn-smallify",b).trigger("click");break;case "smallifiedMax":jQuery(".jsPanel-btn-smallify",b).trigger("click")}});window.localStorage.setItem(b,JSON.stringify(d));return d},front:function(a,b){a.css("z-index",this.setZi(a));this.resetZis();jQuery(document).trigger("jspanelfronted",a.prop("id"));if(jQuery.isFunction(a.option.onfronted)){if(!1===a.option.onfronted.call(a,a))return a;a.option.onfronted.call(a,a)}b&&jQuery.isFunction(b)&&b.call(a,
a);return a},getThemeDetails:function(a){var b={color:!1,colors:!1,filling:!1,bs:!1,bstheme:!1};"filled"===a.substr(-6,6)?(b.filling="filled",b.color=a.substr(0,a.length-6)):"filledlight"===a.substr(-11,11)?(b.filling="filledlight",b.color=a.substr(0,a.length-11)):(b.filling="",b.color=a);b.colors=this.calcColors(b.color);b.color.match("-")&&(a=b.color.split("-"),b.bs=a[0],b.bstheme=a[1],b.mdbStyle=a[2]||void 0);return b},getTopmostPanel:function(){var a=[];jQuery(".jsPanel:not(.jsPanel-tooltip):not(.jsPanel-hint)").each(function(b,
d){a.push(d)});a.sort(function(a,d){return jQuery(d).css("z-index")-jQuery(a).css("z-index")});return a[0].getAttribute("id")},headerTitle:function(a,b){return b?(a.header.title.empty().append(b),a):a.header.title.html()},headerControl:function(a,b,d){b?this.setControlStatus(a,b,void 0===d?"enable":d):this.controls.forEach(function(b){jsPanel.setControlStatus(a,b)});return a},hslToRgb:function(a,b,d){if(0===b)d=b=a=d;else{var e=function(a,b,c){0>c&&(c+=1);1<c&&--c;return c<1/6?a+6*(b-a)*c:.5>c?b:
c<2/3?a+(b-a)*(2/3-c)*6:a},h=.5>d?d*(1+b):d+b-d*b,c=2*d-h;d=e(c,h,a+1/3);b=e(c,h,a);a=e(c,h,a-1/3)}return[Math.round(255*d),Math.round(255*b),Math.round(255*a)]},iframe:function(a){var b=jQuery("<iframe></iframe>"),d=a.option.contentIframe;d.srcdoc&&(b.prop("srcdoc",d.srcdoc),a.data("iframeDOC",d.srcdoc));d.src&&(b.prop("src",d.src),a.data("iframeSRC",d.src));"auto"===a.option.contentSize.width||d.width?b.prop("width",d.width):b.css("width","100%");"auto"===a.option.contentSize.height||d.height?b.prop("height",
d.height):b.css("height","100%");d.name&&b.prop("name",d.name);d.sandbox&&b.prop("sandox",d.sandbox);d.id&&b.prop("id",d.id);jQuery.isPlainObject(d.style)&&b.css(d.style);"string"===typeof d.classname?b.addClass(d.classname):jQuery.isFunction(d.classname)&&b.addClass(d.classname());a.content.append(b)},importPanels:function(a,b){var d=a["default"]||{},e;JSON.parse(localStorage[void 0===b?"jspanels":b]).forEach(function(b){e="string"===typeof b.custom.config?jQuery.extend(!0,{},d,a[b.custom.config],
b):jQuery.extend(!0,{},d,b);jQuery.jsPanel(e)})},insertModalBackdrop:function(a){var b=0===jQuery(".jsPanel-modal-backdrop").length?"jsPanel-modal-backdrop":"jsPanel-modal-backdrop jsPanel-modal-backdrop-multi";a='<div id="jsPanel-modal-backdrop-'+a.attr("id")+'" class="'+b+'" style="z-index:'+(this.modalcount+9999)+'"></div>';jQuery("body").append(a);this.modalcount+=1},removeModalBackdrop:function(a){var b=jQuery("#jsPanel-modal-backdrop-"+a.attr("id"));b[0].classList.add("jsPanel-modal-backdrop-out");
a=1E3*parseFloat(b.css("animation-duration"),10);window.setTimeout(function(){b.remove()},a);--this.modalcount},lighten:function(a,b){var d=this.color(a).hsl,e=parseFloat(d.l);return"hsl("+d.h+","+d.s+","+(e+(100-e)*b+"%)")},maximize:function(a,b,d){d=void 0===d?!0:d;var e=a.option.maximizedMargin,h=a[0].parentNode,c=a.attr("id");jQuery.isPlainObject(e)&&(e=["number"===typeof e.top?e.top:5,"number"===typeof e.right?e.right:5,"number"===typeof e.bottom?e.bottom:5,"number"===typeof e.left?e.left:5]);
"number"===typeof e?e=[].concat(e,e,e,e):jQuery.isArray(e)&&2===e.length?e=e.concat(e):jQuery.isArray(e)&&3===e.length&&(e[3]=e[1]);"normalized"===a.data("status")&&a.updateCachedData();jQuery(document).trigger("jspanelbeforemaximize",c);if(jQuery.isFunction(a.option.onbeforemaximize)&&!1===a.option.onbeforemaximize.call(a,a))return a;a.css("overflow","visible");h===document.body?(a.css({width:document.documentElement.clientWidth-e[3]-e[1]+"px",height:document.documentElement.clientHeight-e[0]-e[2]+
"px",left:e[3]+"px",top:e[0]+"px"}),!1===a.option.position.fixed&&a.css({left:window.pageXOffset+e[3]+"px",top:window.pageYOffset+e[0]+"px"})):a.css({width:h.clientWidth-e[3]-e[1]+"px",height:h.clientHeight-e[0]-e[2]+"px",left:e[3]+"px",top:e[0]+"px"});a.contentResize().data("status","maximized");d&&a.css("z-index",this.setZi(a));a.hideControls([".jsPanel-btn-maximize",".jsPanel-btn-smallifyrev"]);this.remMinReplacement(a);jQuery(document).trigger("jspanelmaximized",c);jQuery(document).trigger("jspanelstatuschange",
c);jQuery.isFunction(a.option.onmaximized)&&a.option.onmaximized.call(a,a);b&&jQuery.isFunction(b)&&b.call(a,a);return a},minimize:function(a,b){var d=a.attr("id");if("minimized"===a.data("status"))return a;jQuery(document).trigger("jspanelbeforeminimize",d);if(jQuery.isFunction(a.option.onbeforeminimize)&&!1===a.option.onbeforeminimize.call(a,a))return a;var e=a.data("status");"normalized"===e?a.updateCachedData():"smallified"===e&&(a.cachedData.top=a.css("top"),a.cachedData.left=a.css("left"));
e=this.createMinimizedReplacement(a);var h=jQuery(a.option.container).closest(".jsPanel-content");if(h.length){var c=".jsPanel-minimized-box";a.option.minimizeTo&&("string"===typeof a.option.minimizeTo?(c=a.option.minimizeTo,jQuery(c).append(e)):jQuery(c,h.parent()).append(e))}else h="#jsPanel-replacement-container",a.option.minimizeTo&&("string"===typeof a.option.minimizeTo&&(h=a.option.minimizeTo),jQuery(h).append(e));jQuery(document).trigger("jspanelminimized",d);jQuery(document).trigger("jspanelstatuschange",
d);jQuery.isFunction(a.option.onminimized)&&a.option.onminimized.call(a,a);b&&jQuery.isFunction(b)&&b.call(a,a);jQuery(".jsPanel-btn-normalize",e).css("display","block").on("click",function(){return a.normalize()});"disabled"===a[0].dataset.btnnormalize?jQuery(".jsPanel-btn-normalize",e).css({pointerEvents:"none",opacity:.5,cursor:"default"}):"removed"===a[0].dataset.btnnormalize&&jQuery(".jsPanel-btn-normalize",e).remove();jQuery(".jsPanel-btn-maximize",e).on("click",function(){return a.maximize()});
"disabled"===a[0].dataset.btnmaximize?jQuery(".jsPanel-btn-maximize",e).css({pointerEvents:"none",opacity:.5,cursor:"default"}):"removed"===a[0].dataset.btnmaximize&&jQuery(".jsPanel-btn-maximize",e).remove();jQuery(".jsPanel-btn-close",e).on("click",function(){return a.close()});"disabled"===a[0].dataset.btnclose&&jQuery(".jsPanel-btn-close",e).css({pointerEvents:"none",opacity:.5,cursor:"default"});return a},normalize:function(a,b){var d=a.attr("id");if("normalized"===a.data("status"))return a;
jQuery(document).trigger("jspanelbeforenormalize",d);if(jQuery.isFunction(a.option.onbeforenormalize)&&!1===a.option.onbeforenormalize.call(a,a))return a;if("smallified"===a.data("status"))return a.smallify(),jQuery(document).trigger("jspanelnormalized",d),jQuery(document).trigger("jspanelstatuschange",d),jQuery.isFunction(a.option.onnormalized)&&a.option.onnormalized.call(a,a),a;a.css({left:a.cachedData.left,top:a.cachedData.top,width:a.cachedData.width,height:a.cachedData.height,zIndex:function(){jsPanel.setZi(a)},
overflow:"visible"}).data("status","normalized").contentResize();a.hideControls([".jsPanel-btn-normalize",".jsPanel-btn-smallifyrev"]);this.remMinReplacement(a);jQuery(document).trigger("jspanelnormalized",d);jQuery(document).trigger("jspanelstatuschange",d);jQuery.isFunction(a.option.onnormalized)&&a.option.onnormalized.call(a,a);b&&jQuery.isFunction(b)&&b.call(a,a);return a},noscroll:function(a){a.preventDefault()},perceivedBrightness:function(a){a=this.color(a).rgb;return a.r/255*.2627+a.g/255*
.678+a.b/255*.0593},position:function(a,b){function d(a){var b={};-1<G.indexOf(a)?b.left=window.pageXOffset:-1<v.indexOf(a)?b.left=window.pageXOffset+document.documentElement.clientWidth/2:-1<y.indexOf(a)?b.left=window.pageXOffset+document.documentElement.clientWidth:b.left=window.pageXOffset;-1<t.indexOf(a)?b.top=window.pageYOffset:-1<z.indexOf(a)?b.top=window.pageYOffset+window.innerHeight/2:-1<A.indexOf(a)?b.top=window.pageYOffset+window.innerHeight:b.top=window.pageYOffset;return b}function e(a){var b=
{},c=f(g.of);-1<G.indexOf(a)?b.left=c.left:-1<v.indexOf(a)?b.left=c.left+c.width/2:-1<y.indexOf(a)?b.left=c.left+c.width:b.left=c.left;-1<t.indexOf(a)?b.top=c.top:-1<z.indexOf(a)?b.top=c.top+c.height/2:-1<A.indexOf(a)?b.top=c.top+c.height:b.top=c.top;return b}function h(a){var b={},c=p.getBoundingClientRect();-1<G.indexOf(a)?b.left=0:-1<v.indexOf(a)?b.left=c.width/2:-1<y.indexOf(a)?b.left=c.width:b.left=0;-1<t.indexOf(a)?b.top=0:-1<z.indexOf(a)?b.top=c.height/2:-1<A.indexOf(a)?b.top=c.height:b.top=
0;return b}function c(a){var b={},c=p.getBoundingClientRect(),d=document.querySelector(g.of).getBoundingClientRect(),e=d.left-c.left;c=d.top-c.top;-1<G.indexOf(a)?b.left=e:-1<v.indexOf(a)?b.left=e+d.width/2:-1<y.indexOf(a)?b.left=e+d.width:b.left=e;-1<t.indexOf(a)?b.top=c:-1<z.indexOf(a)?b.top=c+d.height/2:-1<A.indexOf(a)?b.top=c+d.height:b.top=c;return b}function f(a){a=a.jquery?a[0].getBoundingClientRect():"string"===typeof a?document.querySelector(a).getBoundingClientRect():a.getBoundingClientRect();
return{width:Math.round(a.width),height:Math.round(a.height),left:Math.round(a.left+window.pageXOffset),top:Math.round(a.top+window.pageYOffset)}}var n=0,l=0,G=["left-top","left-center","left-bottom"],v=["center-top","center","center-bottom"],y=["right-top","right-center","right-bottom"],t=["left-top","center-top","right-top"],z=["left-center","center","right-center"],A=["left-bottom","center-bottom","right-bottom"];if("string"===typeof b){var u=b.match(/\b[a-z]{4,6}-{1}[a-z]{3,6}\b/);var w=b.match(/DOWN|UP|RIGHT|LEFT/);
var k=b.match(/[+-]?\d+\.?\d*%?/g);u=jQuery.isArray(u)?{my:u[0],at:u[0]}:{my:"center",at:"center"};jQuery.isArray(w)&&(u.autoposition=w[0]);jQuery.isArray(k)&&(u.offsetX=k[0],2===k.length&&(u.offsetY=k[1]));b=u}else{w=0===b.left||b.left;k=0===b.top||b.top;u=0===b.right||b.right;var x=0===b.bottom||b.bottom;w&&k?(b.my="left-top",b.at="left-top",b.offsetX=b.left,b.offsetY=b.top):w&&x?(b.my="left-bottom",b.at="left-bottom",b.offsetX=b.left,b.offsetY=-b.bottom):u&&k?(b.my="right-top",b.at="right-top",
b.offsetX=-b.right,b.offsetY=b.top):u&&x&&(b.my="right-bottom",b.at="right-bottom",b.offsetX=-b.right,b.offsetY=-b.bottom)}var g=Object.assign({my:"center",at:"center",offsetX:0,offsetY:0,modify:!1,fixed:"true"},b);w="string"===typeof a?document.querySelector(a):a.jquery?a[0]:a;if("boolean"===typeof b&&!1===b)return w.style.opacity=1,w;var p=w.parentElement||document.body;g.of||(p===document.body?g.of="window":g.of=p);k=f(w);"string"===typeof g.offsetX&&"%"===g.offsetX.slice(-1)?g.offsetX="window"===
g.of?window.innerWidth*(parseInt(g.offsetX,10)/100):p.clientWidth*(parseInt(g.offsetX,10)/100):"string"===typeof g.offsetX?g.offsetX=parseFloat(g.offsetX):jQuery.isFunction(g.offsetX)&&(g.offsetX=parseInt(g.offsetX.call(a,a),10));"string"===typeof g.offsetY&&"%"===g.offsetY.slice(-1)?g.offsetY="window"===g.of?window.innerHeight*(parseInt(g.offsetY,10)/100):p.clientHeight*(parseInt(g.offsetY,10)/100):"string"===typeof g.offsetY?g.offsetY=parseFloat(g.offsetY):jQuery.isFunction(g.offsetY)&&(g.offsetY=
parseInt(g.offsetY.call(a,a),10));-1<G.indexOf(g.my)?n=0:-1<v.indexOf(g.my)?n=k.width/2:-1<y.indexOf(g.my)&&(n=k.width);-1<t.indexOf(g.my)?l=0:-1<z.indexOf(g.my)?l=k.height/2:-1<A.indexOf(g.my)&&(l=k.height);if(p===document.body)if("window"===g.of)if(k=d(g.at),g.fixed){var C=k.left-n+g.offsetX-window.pageXOffset;var K=k.top-l+g.offsetY-window.pageYOffset}else C=k.left-n+g.offsetX,K=k.top-l+g.offsetY;else k=e(g.at),C=k.left-n+g.offsetX,K=k.top-l+g.offsetY;else k="string"===typeof g.of?document.querySelector(g.of):
g.of.jquery?g.of[0]:g.of,k=p===k?h(g.at):c(g.at),C=k.left-n+g.offsetX,K=k.top-l+g.offsetY;if(g.autoposition){var D=[];if(g.my===g.at)var B=g.my;w.classList.add(B);D=Array.prototype.slice.call(p.getElementsByClassName(B));"DOWN"===g.autoposition?D.forEach(function(a,b){0<b&&(K+=D[--b].getBoundingClientRect().height+jsPanel.autopositionSpacing)}):"UP"===g.autoposition?D.forEach(function(a,b){0<b&&(K-=D[--b].getBoundingClientRect().height+jsPanel.autopositionSpacing)}):"RIGHT"===g.autoposition?D.forEach(function(a,
b){0<b&&(C+=D[--b].getBoundingClientRect().width+jsPanel.autopositionSpacing)}):"LEFT"===g.autoposition&&D.forEach(function(a,b){0<b&&(C-=D[--b].getBoundingClientRect().width+jsPanel.autopositionSpacing)})}n={left:C,top:K};(g.minLeft||0===g.minLeft)&&"number"===typeof g.minLeft&&n.left<g.minLeft&&(n.left=g.minLeft);(g.maxLeft||0===g.maxLeft)&&"number"===typeof g.maxLeft&&n.left>g.maxLeft&&(n.left=g.maxLeft);(g.minTop||0===g.minTop)&&"number"===typeof g.minTop&&n.top<g.minTop&&(n.top=g.minTop);(g.maxTop||
0===g.maxTop)&&"number"===typeof g.maxTop&&n.top>g.maxTop&&(n.top=g.maxTop);"function"===typeof g.modify&&(n=g.modify.call(n,n));w.style.position="absolute";w.style.left=n.left+"px";w.style.top=n.top+"px";"window"===g.of&&g.fixed&&p===document.body&&(w.style.position="fixed");return w},remMinReplacement:function(a){jQuery('[id^="'+a.prop("id")+'-min"]').remove()},reposition:function(a,b,d){b=void 0===b?a.option.position:b;if("minimized"!==a.data("status")){a.option.position=b;if(a.option.paneltype.tooltip){var e=
a.attr("class").split(" ");jQuery.each(e,function(b,c){0===c.indexOf("jsPanel-tooltip-")&&a.removeClass(c)});this.setTooltipClass(a);jQuery(".jsPanel-connector",a).remove();a.option.paneltype.connector&&this.addConnector(a)}this.position(a,b)}d&&jQuery.isFunction(d)&&d.call(a,a);return a},resetZis:function(){var a=[];jQuery(".jsPanel:not(.jsPanel-modal):not(.jsPanel-hint)").each(function(b,d){a.push(d)});a.sort(function(a,d){return jQuery(a).css("z-index")-jQuery(d).css("z-index")}).forEach(function(a,
d){(jsPanel.zi+=1)>jQuery(a).css("z-index")&&jQuery(a).css("z-index",jsPanel.ziBase+d)});this.zi=this.ziBase-1+a.length},resize:function(a,b){if("minimized"!==a.data("status")){if(jQuery.isFunction(a.option.onbeforeresize)&&!1===a.option.onbeforeresize.call(a,a))return a;if(jQuery.isPlainObject(b)){var d=jQuery.extend({},!1,jQuery.jsPanel.resizedefaults,b);d.width&&"auto"===d.width?(a.content.css("width","auto"),a.css("width","auto"),a.css("width",a.outerWidth())):d.width&&a.css("width",d.width);
d.height&&"auto"===d.height?(a.content.css("height","auto"),a.css("height","auto")):d.height&&a.css("height",d.height);var e=a.outerWidth();var h=a.outerHeight();d.minwidth&&e<d.minwidth&&a.css("width",d.minwidth);d.maxwidth&&e>d.maxwidth&&a.css("width",d.maxwidth);d.minheight&&h<d.minheight&&a.css("height",d.minheight);d.maxheight&&h>d.maxheight&&a.css("height",d.maxheight);this.contentResize(a);if(jQuery.isFunction(a.option.onresized)&&!1===a.option.onresized.call(a,a))return a;d.callback&&jQuery.isFunction(d.callback)&&
d.callback.call(a,a)}}return a},rgbToHsl:function(a,b,d){a/=255;b/=255;d/=255;var e=Math.max(a,b,d),h=Math.min(a,b,d),c=(e+h)/2;if(e===h)var f=h=0;else{var n=e-h;h=.5<c?n/(2-e-h):n/(e+h);switch(e){case a:f=(b-d)/n+(b<d?6:0);break;case b:f=(d-a)/n+2;break;case d:f=(a-b)/n+4}f/=6}f*=360;h=100*h+"%";c=100*c+"%";return{css:"hsl("+f+","+h+","+c+")",h:f,s:h,l:c}},rgbToHex:function(a,b,d){a=Number(a).toString(16);b=Number(b).toString(16);d=Number(d).toString(16);1===a.length&&(a="0"+a);1===b.length&&(b=
"0"+b);1===d.length&&(d="0"+d);return"#"+a+b+d},setControlStatus:function(a,b,d){d=void 0===d?"enable":d;var e=a.header.headerbar;a=a[0];"disable"===d?"removed"!==a.getAttribute("data-btn"+b)&&(a.setAttribute("data-btn"+b,"disabled"),jQuery(".jsPanel-btn-"+b,e).css({pointerEvents:"none",opacity:.4,cursor:"default"})):"enable"===d?"removed"!==a.getAttribute("data-btn"+b)&&(a.setAttribute("data-btn"+b,"enabled"),jQuery(".jsPanel-btn-"+b,e).css({pointerEvents:"auto",opacity:1,cursor:"pointer"})):"remove"===
d&&(jQuery(".jsPanel-btn-"+b,e).remove(),a.setAttribute("data-btn"+b,"removed"))},setTooltipClass:function(a){var b=a.option.position.my+a.option.position.at;"center-bottomcenter-top"===b?a[0].classList.add("jsPanel-tooltip-top"):"left-bottomright-top"===b?a[0].classList.add("jsPanel-tooltip-righttopcorner"):"left-centerright-center"===b?a[0].classList.add("jsPanel-tooltip-right"):"left-topright-bottom"===b?a[0].classList.add("jsPanel-tooltip-rightbottomcorner"):"center-topcenter-bottom"===b?a[0].classList.add("jsPanel-tooltip-bottom"):
"right-topleft-bottom"===b?a[0].classList.add("jsPanel-tooltip-leftbottomcorner"):"right-centerleft-center"===b?a[0].classList.add("jsPanel-tooltip-left"):"right-bottomleft-top"===b?a[0].classList.add("jsPanel-tooltip-lefttopcorner"):"centercenter"===b?a[0].classList.add("jsPanel-tooltip-center"):"right-topleft-top"===b?a[0].classList.add("jsPanel-tooltip-lefttop"):"right-bottomleft-bottom"===b?a[0].classList.add("jsPanel-tooltip-leftbottom"):"left-bottomleft-top"===b?a[0].classList.add("jsPanel-tooltip-topleft"):
"right-bottomright-top"===b?a[0].classList.add("jsPanel-tooltip-topright"):"left-topright-top"===b?a[0].classList.add("jsPanel-tooltip-righttop"):"left-bottomright-bottom"===b?a[0].classList.add("jsPanel-tooltip-rightbottom"):"left-topleft-bottom"===b?a[0].classList.add("jsPanel-tooltip-bottomleft"):"right-topright-bottom"===b&&a[0].classList.add("jsPanel-tooltip-bottomright")},setTooltipMode:function(a,b){"semisticky"===a.option.paneltype.mode?a.hover(function(){return jQuery.noop()},function(){a.close();
b.classList.remove("hasTooltip")}):"sticky"===a.option.paneltype.mode?jQuery.noop():jQuery(b).mouseout(function(){a.close();b.classList.remove("hasTooltip")})},setTrigger:function(a){a=a.of||"window";return"string"===typeof a?document.querySelector(a):a.jquery?a[0]:a},setZi:function(a){a[0].classList.contains("jsPanel-modal")||(this.zi+=1)>a.css("z-index")&&a.css("z-index",this.zi)},smallify:function(a,b){var d=a.attr("id");if("normalized"===a.data("status")||"maximized"===a.data("status")){if("smallified"!==
a.data("status")&&"smallifiedMax"!==a.data("status")){jQuery(document).trigger("jspanelbeforesmallify",d);if(jQuery.isFunction(a.option.onbeforesmallify)&&!1===a.option.onbeforesmallify.call(a,a))return a;a.smallify.height=a.outerHeight();a.css("overflow","hidden");a.animate({height:a.header.headerbar.outerHeight()+"px"},{done:function(){"maximized"===a.data("status")?(a.hideControls([".jsPanel-btn-maximize",".jsPanel-btn-smallify"]),a.data("status","smallifiedMax"),jQuery(document).trigger("jspanelsmallifiedmax",
d)):(a.hideControls([".jsPanel-btn-normalize",".jsPanel-btn-smallify"]),a.data("status","smallified"),jQuery(document).trigger("jspanelsmallified",d));jQuery.isFunction(a.option.onsmallified)&&a.option.onsmallified.call(a,a);jQuery(document).trigger("jspanelstatuschange",d)}})}}else if("minimized"!==a.data("status")){jQuery(document).trigger("jspanelbeforeunsmallify",d);if(jQuery.isFunction(a.option.onbeforeunsmallify)&&!1===a.option.onbeforeunsmallify.call(a,a))return a;a.css("overflow","visible");
a.animate({height:a.smallify.height},{done:function(){"smallified"===a.data("status")?(a.hideControls([".jsPanel-btn-normalize",".jsPanel-btn-smallifyrev"]),a.data("status","normalized"),jQuery(document).trigger("jspanelnormalized",d)):(a.hideControls([".jsPanel-btn-maximize",".jsPanel-btn-smallifyrev"]),a.data("status","maximized"),jQuery(document).trigger("jspanelmaximized",d));a.contentResize();jQuery(document).trigger("jspanelunsmallified",d);jQuery(document).trigger("jspanelstatuschange",d);
jQuery.isFunction(a.option.onunsmallified)&&a.option.onunsmallified.call(a,a)}})}a.css("z-index",this.setZi(a));b&&jQuery.isFunction(b)&&b.call(a,a);return a},toolbarAdd:function(a,b,d,e){"header"===b?(a.header.toolbar[0].classList.add("active"),jQuery.isArray(d)?this.configToolbar(d,a.header.toolbar,a):jQuery.isFunction(d)?a.header.toolbar.append(d(a.header)):a.header.toolbar.append(d)):"footer"===b&&(a.content[0].classList.remove("jsPanel-content-nofooter"),a.footer[0].classList.add("active"),"none"===
a.option.theme&&a.footer.css({background:"transparent",borderTop:"none"}),jQuery.isArray(d)?this.configToolbar(d,a.footer,a):jQuery.isFunction(d)?a.footer.append(d(a.footer)):a.footer.append(d));this.contentResize(a);e&&jQuery.isFunction(e)&&e.call(a,a);return a},contextmenu:function(a,b,d){("string"===typeof a?document.querySelector(a):a.jquery?jQuery(a)[0]:a).addEventListener("contextmenu",function(a){a.preventDefault();a.stopPropagation();jsPanel.closePanels("contextmenu");var e=a.clientX+(window.scrollX||
window.pageXOffset),c=a.clientY+(window.scrollY||window.pageYOffset),f=Object.assign({},jQuery.jsPanel.defaults,jQuery.jsPanel.contextmenudefaults,b,{container:"body",position:!1}),n=jQuery.jsPanel(f).css({position:"absolute",left:e,top:c}).addClass("jsPanel-contextmenu").on("mouseleave",function(a){n.close()}).on("click",function(a){a.stopPropagation()});jQuery(a.target).closest(".jsPanel-modal")&&n.css("z-index",jQuery(a.target).closest(".jsPanel-modal").css("z-index"));n[0].cmEvent=a;jsPanel.checkContextmenuOverflow(n);
d&&jQuery.isFunction(d)&&d.call(n,n)},!1)},checkContextmenuOverflow:function(a){var b=a[0].cmEvent.clientX,d=a[0].cmEvent.clientY,e=a.outerWidth(),h=a.outerHeight(),c=window.innerHeight-(d+h);0>window.innerWidth-(b+e)&&a.css("left",b+(window.scrollX||window.pageXOffset)-e);0>c&&a.css("top",d+(window.scrollY||window.pageYOffset)-h)}};
"ontouchend"in window?(jsPanel.evtStart=["touchstart","mousedown"],jsPanel.evtMove=["touchmove","mousemove"],jsPanel.evtEnd=["touchend","mouseup"]):(jsPanel.evtStart=["mousedown"],jsPanel.evtMove=["mousemove"],jsPanel.evtEnd=["mouseup"]);
(function(a){a.jsPanel=function(b){var d,e=b||{},h=e.config||{};b=a.extend(!0,{},h,e);var c=e.template?a(e.template):h.template?a(h.template):a(jsPanel.template);delete b.config;a.isArray(b.maximizedMargin)&&!0===b.maximizedMargin[4]&&(b.maximizedMargin.pop(),b.dragit&&(e=b.dragit.containment||b.maximizedMargin,b.dragit=a.extend({},!0,b.dragit,{containment:e})),b.resizeit&&(e=b.resizeit.containment||b.maximizedMargin,b.resizeit=a.extend({},!0,b.resizeit,{containment:e})));b.position&&a.isFunction(b.position)&&
(b.position=b.position());"tooltip"===b.paneltype&&(b.paneltype={tooltip:!0});b.paneltype?"modal"===b.paneltype?c.option=a.extend(!0,{},a.jsPanel.defaults,a.jsPanel.modaldefaults,b):b.paneltype.tooltip?c.option=a.extend(!0,{},a.jsPanel.defaults,a.jsPanel.tooltipdefaults,b):"hint"===b.paneltype&&(c.option=a.extend(!0,{},a.jsPanel.defaults,a.jsPanel.hintdefaults,b)):c.option=a.extend(!0,{},a.jsPanel.defaults,b);var f=c.option;b=f.autoclose;var n=f.border;e=f.callback;h=f.closeOnEscape;var l=f.container,
G=f.content,v=f.contentAjax,y=f.contentIframe,t=f.contentOverflow,z=f.contentSize,A=f.custom,u=f.dblclicks,w=f.draggable,k=f.dragit,x=f.footerToolbar,g=f.headerControls,p=f.headerLogo,C=f.headerRemove,K=f.headerTitle,D=f.headerToolbar,B=f.id,r=f.onwindowresize,m=f.panelSize,L=f.paneltype,S=f.position,H=f.resizable,P=f.resizeit,Z=f.rtl,aa=f.setstatus,ba=f.show,M=f.theme;if(L.tooltip){var q=jsPanel.setTrigger(S);if(q.classList.contains("hasTooltip"))return!1}"string"===typeof B?d=B:"function"===typeof B&&
(d=B());if(0<a("#"+d).length)return console.warn("jsPanel Error: No jsPanel created - id attribute passed with option.id already exists in document"),a("#"+d)[0].jspanel.front(),!1;c[0].id=d;c.data("custom",A);c.header=a(".jsPanel-hdr",c);c.header.headerbar=a(".jsPanel-headerbar",c.header);c.header.logo=a(".jsPanel-headerlogo",c.header.headerbar);c.header.title=a(".jsPanel-title",c.header.headerbar);c.header.controls=a(".jsPanel-controlbar",c.header.headerbar);c.header.toolbar=a(".jsPanel-hdr-toolbar",
c.header);c.content=a(".jsPanel-content",c);c.footer=a(".jsPanel-ftr",c);c.data("status","initialized");c.cachedData={};c.close=function(a){for(var b=[],d=0;d<arguments.length;++d)b[d-0]=arguments[d];return jsPanel.close.apply(jsPanel,[c].concat($jscomp.arrayFromIterable(b)))};c.closeChildpanels=function(){return jsPanel.closeChildpanels(c)};c.contentReload=function(a){return jsPanel.contentReload(c,a)};c.contentResize=function(a){return jsPanel.contentResize(c,a)};c.front=function(a){return jsPanel.front(c,
a)};c.headerControl=function(a,b){return jsPanel.headerControl(c,a,b)};c.headerTitle=function(a){return jsPanel.headerTitle(c,a)};c.hideControls=function(a){Array.prototype.slice.call(c.header.controls[0].getElementsByClassName("jsPanel-btn")).forEach(function(a){a&&(a.style.display="block")});a.forEach(function(a){c.header.controls[0].querySelector(a)&&(c.header.controls[0].querySelector(a).style.display="none")})};c.maximize=function(a){return jsPanel.maximize(c,a)};c.minimize=function(a){return jsPanel.minimize(c,
a)};c.normalize=function(a){return jsPanel.normalize(c,a)};c.reposition=function(a,b){return jsPanel.reposition(c,a,b)};c.resize=function(b,d,e){b=void 0===b?a.jsPanel.resizedefaults.width:b;d=void 0===d?a.jsPanel.resizedefaults.height:d;e=void 0===e?a.jsPanel.resizedefaults.callback:e;var f={},g=b;a.isPlainObject(g)?"content"===g.resize&&(String(g.height).match(/[^0-9\.]/)||(g.height+="px"),String(g.width).match(/[^0-9\.]/)||(g.width+="px"),g.height="calc("+g.height+" + "+(c.header.outerHeight()+
"px + ")+c.css("border-top-width")+" + "+c.css("border-bottom-width")+")",g.width="calc("+g.width+" + "+c.css("border-left-width")+" + "+c.css("border-right-width")+")"):(f.width=b,f.height=d,f.callback=e,g=a.extend({},!1,a.jsPanel.resizedefaults,f));jsPanel.resize(c,g);return c};c.setTheme=function(b,d){b=void 0===b?M.toLowerCase().replace(/ /g,""):b;b=b.toLowerCase().replace(/ /g,"");jsPanel.clearTheme(c);if("none"===M)return c.css("background-color","white"),c;var e=jsPanel.getThemeDetails(b);
e.bs?jsPanel.applyBootstrapTheme(c,e):-1<jsPanel.themes.indexOf(e.color)?jsPanel.applyBuiltInTheme(c,e):jsPanel.applyArbitraryTheme(c,e);n?jsPanel.applyThemeBorder(c,e):c.css({borderWidth:"",borderStyle:"",borderColor:""});d&&a.isFunction(d)&&d.call(c,c);return c};c.smallify=function(a){return jsPanel.smallify(c,a)};c.toolbarAdd=function(a,b,d){return jsPanel.toolbarAdd(c,a,b,d)};c.updateCachedData=function(){c.cachedData.top=c.css("top");c.cachedData.left=c.css("left");c.cachedData.width=c.css("width");
c.cachedData.height=c.css("height")};c.dragit=function(b){"disable"===b?a(k.handles,c).css("pointer-events","none"):a(k.handles,c).css("pointer-events","auto");return c};c.resizeit=function(b){"disable"===b?a(".jsPanel-resizeit-handle",c).css("pointer-events","none"):a(".jsPanel-resizeit-handle",c).css("pointer-events","auto");return c};a(".jsPanel-btn-close",c).on("click",function(a){a.preventDefault();if(a.button&&0<a.button)return!1;jsPanel.close(c)});a(".jsPanel-btn-minimize",c).on("click",function(a){a.preventDefault();
if(a.button&&0<a.button)return!1;jsPanel.minimize(c)});a(".jsPanel-btn-maximize",c).on("click",function(a){a.preventDefault();if(a.button&&0<a.button)return!1;jsPanel.maximize(c)});a(".jsPanel-btn-normalize",c).on("click",function(a){a.preventDefault();if(a.button&&0<a.button)return!1;jsPanel.normalize(c)});a(".jsPanel-btn-smallify, .jsPanel-btn-smallifyrev",c).on("click",function(a){a.preventDefault();if(a.button&&0<a.button)return!1;jsPanel.smallify(c)});c.appendTo(a(l)[0]);jsPanel.activePanels.list.push(d);
a(document).trigger("jspanelloaded",d);c.data("container",l);c.setTheme();C?(c.header.remove(),c.content[0].classList.add("jsPanel-content-noheader"),jsPanel.controls.forEach(function(a){c[0].setAttribute("data-btn"+a,"removed")})):("closeonly"===g.controls?jsPanel.controls.forEach(function(a){"close"!==a&&jsPanel.setControlStatus(c,a,"remove")}):"none"===g.controls?jsPanel.controls.forEach(function(a){jsPanel.setControlStatus(c,a,"remove")}):jsPanel.controls.forEach(function(a){"disable"===g[a]?
jsPanel.setControlStatus(c,a,"disable"):"remove"===g[a]?jsPanel.setControlStatus(c,a,"remove"):c[0].setAttribute("data-btn"+a,"enabled")}),p&&("string"===typeof p&&"<"!==p.substring(0,1)?c.header.logo.append('<img src="'+p+'" alt="logo">'):c.header.logo.append(p)));(C||1>a(".jsPanel-hdr").length)&&c.content.css("border","none");jsPanel.configIconfont(c);"modal"===L?(jsPanel.insertModalBackdrop(c),c[0].classList.add("jsPanel-modal"),c.css("z-index",jsPanel.modalcount+9999)):"hint"===L?(c[0].classList.add("jsPanel-hint"),
c.css("z-index",1E4)):L.tooltip&&(q=jsPanel.setTrigger(S),c[0].classList.add("jsPanel-tooltip"),jsPanel.setTooltipClass(c),L.solo&&jsPanel.closePanels("tooltip"),jsPanel.setTooltipMode(c,q),a(q).closest(".jsPanel-modal")&&(c[0].style.zIndex=a(q).closest(".jsPanel-modal").css("z-index")));L.tooltip&&q.classList.add("hasTooltip");D&&!C&&c.toolbarAdd("header",D);x&&c.toolbarAdd("footer",x);G&&(c.content.append(G),c.data("content",G));v&&(c.option.contentAjax="string"===typeof v?{url:v,autoload:!0,autoresize:!0,
autoreposition:!0}:Object.assign({autoresize:!0,autoreposition:!0},v),jsPanel.ajax(c));a.isPlainObject(y)&&(y.src||y.srcdoc)&&jsPanel.iframe(c);L.connector&&jsPanel.addConnector(c);f=q=m||z;if("string"===typeof q){q=q.trim().split(/\s{1,}/);for(f=0;f<q.length;f++)q[f].match(/^\d{1,}$/)&&(q[f]=parseInt(q[f],10));f={width:q[0]||a.jsPanel.defaults.contentSize.width,height:q[1]||a.jsPanel.defaults.contentSize.height}}0===f.height&&(f.height="0");m?(c.css({width:f.width,height:f.height}),c.contentResize()):
c.content.css({width:f.width,height:f.height});c.css({width:function(){return 0<a(".jsPanel-content",c).length?c.content.outerWidth()+"px":z.width||a.jsPanel.defaults.contentSize.width},zIndex:function(){jsPanel.setZi(c)}});c.content.css("width","100%");S&&(jsPanel.position(c,S),jsPanel.calcPositionFactors(c));c.css("opacity",1);c.data("status","normalized");a(document).trigger("jspanelstatuschange",d);if(!L&&u){if(u.title)c.header.headerbar.on("dblclick",function(a){a.preventDefault();jsPanel.dblclickhelper(u.title,
c)});if(u.content)c.content.on("dblclick",function(a){a.preventDefault();jsPanel.dblclickhelper(u.content,c)});if(u.footer)c.footer.on("dblclick",function(a){a.preventDefault();jsPanel.dblclickhelper(u.footer,c)})}"string"===typeof t?c.content.css("overflow",t):a.isPlainObject(t)&&c.content.css({"overflow-y":t.vertical||t["overflow-y"],"overflow-x":t.horizontal||t["overflow-x"]});a.ui&&a.ui.draggable&&!k.disableui?a.isPlainObject(w)?c.draggable(w):"disabled"===w?(a(".jsPanel-headerlogo, .jsPanel-titlebar, .jsPanel-ftr",
c).css("cursor","default"),c.draggable({disabled:!0})):a(".jsPanel-headerlogo, .jsPanel-titlebar, .jsPanel-ftr",c).css("cursor","default"):k?(jsPanel.dragit(c,k),k.disable&&c.dragit("disable")):a(".jsPanel-headerlogo, .jsPanel-titlebar, .jsPanel-ftr",c).css("cursor","default");a.ui&&a.ui.resizable&&!P.disableui?a.isPlainObject(H)?c.resizable(H):"disabled"===H&&(c.resizable({disabled:!0}),a(".ui-icon-gripsmall-diagonal-se, .ui-resizable-handle.ui-resizable-sw",c).css({"background-image":"none","text-indent":-9999}),
a(".ui-resizable-handle",c).css({cursor:"inherit"})):P&&(jsPanel.resizeit(c,P),P.disable&&c.resizeit("disable"));!0===Z.rtl&&(a(".jsPanel-hdr, .jsPanel-headerbar, .jsPanel-titlebar, .jsPanel-controlbar, .jsPanel-hdr-toolbar, .jsPanel-ftr",c).addClass("jsPanel-rtl"),[c.header.title,c.content,a("*",c.header.toolbar),a("*",c.footer)].forEach(function(a){a.prop("dir","rtl");Z.lang&&a.prop("lang",Z.lang)}),a(".ui-icon-gripsmall-diagonal-se",c).css({backgroundImage:"none",textIndent:-9999}));"string"===
typeof ba&&c.addClass(ba).css("opacity",1);c.header.title.empty().prepend(K);c.updateCachedData();"string"===typeof aa&&("maximize smallify"===aa?c.maximize().smallify():c[aa]());"number"===typeof b&&0<b&&window.setTimeout(function(){c&&c.close()},b);a.ui&&a.ui.resizable&&(c.on("resize",function(){return jsPanel.contentResize(c)}),c.on("resizestop",function(){if("smallified"===c.data("status")||"smallifiedMax"===c.data("status"))c.hideControls([".jsPanel-btn-normalize",".jsPanel-btn-smallifyrev"]),
c.data("status","normalized"),a(document).trigger("jspanelnormalized",d),a(document).trigger("jspanelstatuschange",d);jsPanel.calcPositionFactors(c)}));if(a.ui&&a.ui.draggable)c.on("dragstop",function(){return jsPanel.calcPositionFactors(c)});jsPanel.evtStart.forEach(function(b){c.on(b,function(b){b.target.classList.contains("jsglyph-close")||b.target.classList.contains("jsglyph-minimize")||(b=a(b.target).closest(".jsPanel").css("z-index"),!c[0].classList.contains("jsPanel-modal")&&b<=jsPanel.zi&&
c.front())})});h&&c[0].setAttribute("data-closeonescape","true");r&&a(window).resize(function(b){if(b.target===window){var d=c.data("status");if("maximized"===d&&!a.isFunction(r))c.maximize(!1,!1);else if("normalized"===d||"smallified"===d||"maximized"===d)a.isFunction(r)?r.call(c,b,c):c.reposition({left:function(){var b="body"===this.option.container?(a(window).outerWidth()-this.outerWidth())*this.hf:(this.parent().outerWidth()-this.outerWidth())*this.hf;return 0>=b?0:b},top:function(){var b="body"===
this.option.container?(a(window).outerHeight()-this.outerHeight())*this.vf:(this.parent().outerHeight()-this.outerHeight())*this.vf;return 0>=b?0:b}})}});c[0].jspanel={options:c.option,close:function(a){for(var b=[],d=0;d<arguments.length;++d)b[d-0]=arguments[d];jsPanel.close(c,b[0]||!1,b[1]||!1,b[2]||!1)},normalize:function(a){return jsPanel.normalize(c,a)},maximize:function(a){return jsPanel.maximize(c,a)},minimize:function(a){return jsPanel.minimize(c,a)},smallify:function(a){return jsPanel.smallify(c,
a)},front:function(a){return jsPanel.front(c,a)},closeChildpanels:function(){return jsPanel.closeChildpanels(c)},reposition:function(a,b){return jsPanel.reposition(c,a,b)},resize:function(a,b,d){return c.resize(a,b,d)},contentResize:function(a){return jsPanel.contentResize(c,a)},contentReload:function(a){return jsPanel.contentReload(c,a)},headerTitle:function(a){return jsPanel.headerTitle(c,a)},headerControl:function(a,b){return jsPanel.headerControl(c,a,b)},toolbarAdd:function(a,b,d){return jsPanel.toolbarAdd(c,
a,b,d)},setTheme:function(a,b){return c.setTheme(a,b)},noop:function(){return c},dragit:function(a){return c.dragit(a)},resizeit:function(a){return c.resizeit(a)}};e&&a.isFunction(e)?e.call(c,c):a.isArray(e)&&e.forEach(function(b){a.isFunction(b)&&b.call(c,c)});return c};a.jsPanel.defaults={autoclose:!1,border:!1,callback:!1,closeOnEscape:!1,container:"body",content:!1,contentAjax:!1,contentIframe:!1,contentOverflow:"hidden",contentSize:{width:400,height:200},custom:!1,dblclicks:!1,delayClose:0,draggable:{handle:"div.jsPanel-headerlogo, div.jsPanel-titlebar, div.jsPanel-ftr",
opacity:.8},dragit:{axis:!1,containment:!1,grid:!1,handles:".jsPanel-headerlogo, .jsPanel-titlebar, .jsPanel-ftr.active",opacity:.8,start:!1,drag:!1,stop:!1,disable:!1,disableui:!1},footerToolbar:!1,headerControls:{close:!1,maximize:!1,minimize:!1,normalize:!1,smallify:!1,controls:"all",iconfont:"jsglyph"},headerLogo:!1,headerRemove:!1,headerTitle:"jsPanel",headerToolbar:!1,id:function(){return"jsPanel-"+(jsPanel.id+=1)},maximizedMargin:[5,5,5,5],minimizeTo:!0,onbeforeclose:!1,onbeforemaximize:!1,
onbeforeminimize:!1,onbeforenormalize:!1,onbeforesmallify:!1,onbeforeunsmallify:!1,onclosed:!1,onmaximized:!1,onminimized:!1,onnormalized:!1,onbeforeresize:!1,onresized:!1,onsmallified:!1,onunsmallified:!1,onfronted:!1,onwindowresize:!1,paneltype:!1,position:"center",resizable:{handles:"n, e, s, w, ne, se, sw, nw",autoHide:!1,minWidth:40,minHeight:40},resizeit:{containment:!1,grid:!1,handles:"n, e, s, w, ne, se, sw, nw",minWidth:40,minHeight:40,maxWidth:1E4,maxHeight:1E4,start:!1,resize:!1,stop:!1,
disable:!1,disableui:!1},rtl:!1,setstatus:!1,show:!1,template:!1,theme:"default"};a.jsPanel.modaldefaults={draggable:!1,dragit:!1,headerControls:{controls:"closeonly"},position:"center",resizable:!1,resizeit:!1,onwindowresize:!0};a.jsPanel.tooltipdefaults={draggable:!1,dragit:!1,headerControls:{controls:"closeonly"},position:{fixed:!1},resizable:!1,resizeit:!1};a.jsPanel.hintdefaults={autoclose:8E3,draggable:!1,dragit:!1,headerControls:{controls:"closeonly"},resizable:!1,resizeit:!1};a.jsPanel.contextmenudefaults=
{draggable:!1,resizable:!1,dragit:!1,resizeit:!1,headerRemove:!0,headerControls:{controls:"none"}};a.jsPanel.resizedefaults={width:"auto",height:"auto",minwidth:!1,maxwidth:!1,minheight:!1,maxheight:!1,resize:!1,callback:!1};a(document).ready(function(){document.body.addEventListener("click",function(b){1>a(b.target).closest(".jsPanel").length&&!b.target.classList.contains("hasTooltip")&&(jsPanel.closePanels("tooltip"),a(".hasTooltip").removeClass("hasTooltip"));jsPanel.closePanels("contextmenu")},
!1);a("body").css("-ms-overflow-style","scrollbar").append('<div id="jsPanel-replacement-container">');window.addEventListener("keydown",function(b){var d=b.key||b.code;"Escape"!==d&&"Esc"!==d||jsPanel.activePanels.list.sort(function(a,b){return document.getElementById(b).style.zIndex-document.getElementById(a).style.zIndex}).some(function(d){d=a("#"+d);var e=d.parent().closest(".jsPanel");if(jsPanel.closeOnEscape||d[0].getAttribute("data-closeonescape"))return e.length&&("closeparent"===jsPanel.closeOnEscape||
d[0].getAttribute("data-closeonescape"))||b.shiftKey?jsPanel.activePanels.getPanel(e[0].id).close():jsPanel.activePanels.getPanel(d[0].id).close(),!0})},!1)})})(jQuery);if(!Element.prototype.matches)Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector;
if(!Element.prototype.closest)Element.prototype.closest=function(s){var el=this;if(!document.documentElement.contains(el))return null;do{if(el.matches(s))return el;el=el.parentElement||el.parentNode}while(el!==null&&el.nodeType===1);return null};
if(!Array.prototype.find){Object.defineProperty(Array.prototype,"_customFind",{value:function(predicate){if(this==null)throw new TypeError('"this" is null or not defined');if(typeof predicate!=="function")throw new TypeError("predicate must be a function");var o=Object(this);var len=o.length>>>0;var thisArg=arguments[1];var k=0;var result=null;var kValue;while(k<len&&result==null){var kValue=o[k];if(predicate.call(thisArg,kValue,k,o))result={"index":k,"value":kValue};else k++}return result||{}}});
Object.defineProperty(Array.prototype,"find",{value:function(predicate){return this._customFind(predicate)["value"]}});Object.defineProperty(Array.prototype,"findIndex",{value:function(predicate){return this._customFind(predicate)["index"]||-1}})}if(window.NodeList&&!NodeList.prototype.forEach)NodeList.prototype.forEach=function(callback,thisArg){thisArg=thisArg||window;for(var i=0;i<this.length;i++)callback.call(thisArg,this[i],i,this)};
if(!String.prototype.startsWith)String.prototype.startsWith=function(searchString,position){position=position||0;return this.substr(position,searchString.length)===searchString};
if(!String.prototype.endsWith)String.prototype.endsWith=function(searchString,position){var subjectString=this.toString();if(typeof position!=="number"||!isFinite(position)||Math.floor(position)!==position||position>subjectString.length)position=subjectString.length;position-=searchString.length;var lastIndex=subjectString.indexOf(searchString,position);return lastIndex!==-1&&lastIndex===position};
if(!String.prototype.replaceAll)String.prototype.replaceAll=function(str,newStr){if(str==null||str==undefined)return this.toString();if(Object.prototype.toString.call(str).toLowerCase()==="[object regexp]")if(str.global)return this.replace(str,newStr);else throw new TypeError("String.prototype.replaceAll called with a non-global RegExp argument");str=str.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return this.replace(new RegExp(str,"g"),newStr)};
if(!Object.values)Object.defineProperty(Object.__proto__,"values",{"configurable":false,"writable":false,"value":function(predicate){return Object.keys(predicate).map(function(k){return predicate[k]})}});
if(!String.prototype.padStart)String.prototype.padStart=function padStart(targetLength,padString){targetLength=targetLength>>0;padString=String(typeof padString!=="undefined"?padString:" ");if(this.length>=targetLength)return String(this);else{targetLength=targetLength-this.length;if(targetLength>padString.length)padString+=padString.repeat(targetLength/padString.length);return padString.slice(0,targetLength)+String(this)}};
if(!String.prototype.padEnd)String.prototype.padEnd=function padEnd(targetLength,padString){targetLength=targetLength>>0;padString=String(typeof padString!=="undefined"?padString:" ");if(this.length>targetLength)return String(this);else{targetLength=targetLength-this.length;if(targetLength>padString.length)padString+=padString.repeat(targetLength/padString.length);return String(this)+padString.slice(0,targetLength)}};
(function(){if(typeof window.CustomEvent==="function")return false;function CustomEvent(event,params){params=params||{bubbles:false,cancelable:false,detail:undefined};var evt=document.createEvent("CustomEvent");evt.initCustomEvent(event,params.bubbles,params.cancelable,params.detail);return evt}CustomEvent.prototype=window.Event.prototype;window.CustomEvent=CustomEvent})();(function(){if(!Number.isNaN)Number.isNaN=function(value){return typeof value==="number"&&isNaN(value)}})();
(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?module.exports=factory():typeof define==="function"&&define.amd?define(factory):global.ES6Promise=factory()})(this,function(){function objectOrFunction(x){var type=typeof x;return x!==null&&(type==="object"||type==="function")}function isFunction(x){return typeof x==="function"}var _isArray=void 0;if(Array.isArray)_isArray=Array.isArray;else _isArray=function(x){return Object.prototype.toString.call(x)==="[object Array]"};
var isArray=_isArray;var len=0;var vertxNext=void 0;var customSchedulerFn=void 0;var asap=function asap(callback,arg){queue[len]=callback;queue[len+1]=arg;len+=2;if(len===2)if(customSchedulerFn)customSchedulerFn(flush);else scheduleFlush()};function setScheduler(scheduleFn){customSchedulerFn=scheduleFn}function setAsap(asapFn){asap=asapFn}var browserWindow=typeof window!=="undefined"?window:undefined;var browserGlobal=browserWindow||{};var BrowserMutationObserver=browserGlobal.MutationObserver||browserGlobal.WebKitMutationObserver;
var isNode=typeof self==="undefined"&&typeof process!=="undefined"&&{}.toString.call(process)==="[object process]";var isWorker=typeof Uint8ClampedArray!=="undefined"&&typeof importScripts!=="undefined"&&typeof MessageChannel!=="undefined";function useNextTick(){return function(){return process.nextTick(flush)}}function useVertxTimer(){if(typeof vertxNext!=="undefined")return function(){vertxNext(flush)};return useSetTimeout()}function useMutationObserver(){var iterations=0;var observer=new BrowserMutationObserver(flush);
var node=document.createTextNode("");observer.observe(node,{characterData:true});return function(){node.data=iterations=++iterations%2}}function useMessageChannel(){var channel=new MessageChannel;channel.port1.onmessage=flush;return function(){return channel.port2.postMessage(0)}}function useSetTimeout(){var globalSetTimeout=setTimeout;return function(){return globalSetTimeout(flush,1)}}var queue=new Array(1E3);function flush(){for(var i=0;i<len;i+=2){var callback=queue[i];var arg=queue[i+1];callback(arg);
queue[i]=undefined;queue[i+1]=undefined}len=0}function attemptVertx(){try{var vertx=Function("return this")().require("vertx");vertxNext=vertx.runOnLoop||vertx.runOnContext;return useVertxTimer()}catch(e){return useSetTimeout()}}var scheduleFlush=void 0;if(isNode)scheduleFlush=useNextTick();else if(BrowserMutationObserver)scheduleFlush=useMutationObserver();else if(isWorker)scheduleFlush=useMessageChannel();else if(browserWindow===undefined&&typeof require==="function")scheduleFlush=attemptVertx();
else scheduleFlush=useSetTimeout();function then(onFulfillment,onRejection){var parent=this;var child=new this.constructor(noop);if(child[PROMISE_ID]===undefined)makePromise(child);var _state=parent._state;if(_state){var callback=arguments[_state-1];asap(function(){return invokeCallback(_state,child,callback,parent._result)})}else subscribe(parent,child,onFulfillment,onRejection);return child}function resolve$1(object){var Constructor=this;if(object&&typeof object==="object"&&object.constructor===
Constructor)return object;var promise=new Constructor(noop);resolve(promise,object);return promise}var PROMISE_ID=Math.random().toString(36).substring(2);function noop(){}var PENDING=void 0;var FULFILLED=1;var REJECTED=2;function selfFulfillment(){return new TypeError("You cannot resolve a promise with itself")}function cannotReturnOwn(){return new TypeError("A promises callback cannot return that same promise.")}function tryThen(then$$1,value,fulfillmentHandler,rejectionHandler){try{then$$1.call(value,
fulfillmentHandler,rejectionHandler)}catch(e){return e}}function handleForeignThenable(promise,thenable,then$$1){asap(function(promise){var sealed=false;var error=tryThen(then$$1,thenable,function(value){if(sealed)return;sealed=true;if(thenable!==value)resolve(promise,value);else fulfill(promise,value)},function(reason){if(sealed)return;sealed=true;reject(promise,reason)},"Settle: "+(promise._label||" unknown promise"));if(!sealed&&error){sealed=true;reject(promise,error)}},promise)}function handleOwnThenable(promise,
thenable){if(thenable._state===FULFILLED)fulfill(promise,thenable._result);else if(thenable._state===REJECTED)reject(promise,thenable._result);else subscribe(thenable,undefined,function(value){return resolve(promise,value)},function(reason){return reject(promise,reason)})}function handleMaybeThenable(promise,maybeThenable,then$$1){if(maybeThenable.constructor===promise.constructor&&then$$1===then&&maybeThenable.constructor.resolve===resolve$1)handleOwnThenable(promise,maybeThenable);else if(then$$1===
undefined)fulfill(promise,maybeThenable);else if(isFunction(then$$1))handleForeignThenable(promise,maybeThenable,then$$1);else fulfill(promise,maybeThenable)}function resolve(promise,value){if(promise===value)reject(promise,selfFulfillment());else if(objectOrFunction(value)){var then$$1=void 0;try{then$$1=value.then}catch(error){reject(promise,error);return}handleMaybeThenable(promise,value,then$$1)}else fulfill(promise,value)}function publishRejection(promise){if(promise._onerror)promise._onerror(promise._result);
publish(promise)}function fulfill(promise,value){if(promise._state!==PENDING)return;promise._result=value;promise._state=FULFILLED;if(promise._subscribers.length!==0)asap(publish,promise)}function reject(promise,reason){if(promise._state!==PENDING)return;promise._state=REJECTED;promise._result=reason;asap(publishRejection,promise)}function subscribe(parent,child,onFulfillment,onRejection){var _subscribers=parent._subscribers;var length=_subscribers.length;parent._onerror=null;_subscribers[length]=
child;_subscribers[length+FULFILLED]=onFulfillment;_subscribers[length+REJECTED]=onRejection;if(length===0&&parent._state)asap(publish,parent)}function publish(promise){var subscribers=promise._subscribers;var settled=promise._state;if(subscribers.length===0)return;var child=void 0,callback=void 0,detail=promise._result;for(var i=0;i<subscribers.length;i+=3){child=subscribers[i];callback=subscribers[i+settled];if(child)invokeCallback(settled,child,callback,detail);else callback(detail)}promise._subscribers.length=
0}function invokeCallback(settled,promise,callback,detail){var hasCallback=isFunction(callback),value=void 0,error=void 0,succeeded=true;if(hasCallback){try{value=callback(detail)}catch(e){succeeded=false;error=e}if(promise===value){reject(promise,cannotReturnOwn());return}}else value=detail;if(promise._state!==PENDING);else if(hasCallback&&succeeded)resolve(promise,value);else if(succeeded===false)reject(promise,error);else if(settled===FULFILLED)fulfill(promise,value);else if(settled===REJECTED)reject(promise,
value)}function initializePromise(promise,resolver){try{resolver(function resolvePromise(value){resolve(promise,value)},function rejectPromise(reason){reject(promise,reason)})}catch(e){reject(promise,e)}}var id=0;function nextId(){return id++}function makePromise(promise){promise[PROMISE_ID]=id++;promise._state=undefined;promise._result=undefined;promise._subscribers=[]}function validationError(){return new Error("Array Methods must be provided an Array")}var Enumerator=function(){function Enumerator(Constructor,
input){this._instanceConstructor=Constructor;this.promise=new Constructor(noop);if(!this.promise[PROMISE_ID])makePromise(this.promise);if(isArray(input)){this.length=input.length;this._remaining=input.length;this._result=new Array(this.length);if(this.length===0)fulfill(this.promise,this._result);else{this.length=this.length||0;this._enumerate(input);if(this._remaining===0)fulfill(this.promise,this._result)}}else reject(this.promise,validationError())}Enumerator.prototype._enumerate=function _enumerate(input){for(var i=
0;this._state===PENDING&&i<input.length;i++)this._eachEntry(input[i],i)};Enumerator.prototype._eachEntry=function _eachEntry(entry,i){var c=this._instanceConstructor;var resolve$$1=c.resolve;if(resolve$$1===resolve$1){var _then=void 0;var error=void 0;var didError=false;try{_then=entry.then}catch(e){didError=true;error=e}if(_then===then&&entry._state!==PENDING)this._settledAt(entry._state,i,entry._result);else if(typeof _then!=="function"){this._remaining--;this._result[i]=entry}else if(c===Promise$2){var promise=
new c(noop);if(didError)reject(promise,error);else handleMaybeThenable(promise,entry,_then);this._willSettleAt(promise,i)}else this._willSettleAt(new c(function(resolve$$1){return resolve$$1(entry)}),i)}else this._willSettleAt(resolve$$1(entry),i)};Enumerator.prototype._settledAt=function _settledAt(state,i,value){var promise=this.promise;if(promise._state===PENDING){this._remaining--;if(state===REJECTED)reject(promise,value);else this._result[i]=value}if(this._remaining===0)fulfill(promise,this._result)};
Enumerator.prototype._willSettleAt=function _willSettleAt(promise,i){var enumerator=this;subscribe(promise,undefined,function(value){return enumerator._settledAt(FULFILLED,i,value)},function(reason){return enumerator._settledAt(REJECTED,i,reason)})};return Enumerator}();function all(entries){return(new Enumerator(this,entries)).promise}function race(entries){var Constructor=this;if(!isArray(entries))return new Constructor(function(_,reject){return reject(new TypeError("You must pass an array to race."))});
else return new Constructor(function(resolve,reject){var length=entries.length;for(var i=0;i<length;i++)Constructor.resolve(entries[i]).then(resolve,reject)})}function reject$1(reason){var Constructor=this;var promise=new Constructor(noop);reject(promise,reason);return promise}function needsResolver(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");}function needsNew(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");
}var Promise$2=function(){function Promise(resolver){this[PROMISE_ID]=nextId();this._result=this._state=undefined;this._subscribers=[];if(noop!==resolver){typeof resolver!=="function"&&needsResolver();this instanceof Promise?initializePromise(this,resolver):needsNew()}}Promise.prototype.catch=function _catch(onRejection){return this.then(null,onRejection)};Promise.prototype.finally=function _finally(callback){var promise=this;var constructor=promise.constructor;if(isFunction(callback))return promise.then(function(value){return constructor.resolve(callback()).then(function(){return value})},
function(reason){return constructor.resolve(callback()).then(function(){throw reason;})});return promise.then(callback,callback)};return Promise}();Promise$2.prototype.then=then;Promise$2.all=all;Promise$2.race=race;Promise$2.resolve=resolve$1;Promise$2.reject=reject$1;Promise$2._setScheduler=setScheduler;Promise$2._setAsap=setAsap;Promise$2._asap=asap;function polyfill(){var local=void 0;if(typeof global!=="undefined")local=global;else if(typeof self!=="undefined")local=self;else try{local=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment");
}var P=local.Promise;if(P){var promiseToString=null;try{promiseToString=Object.prototype.toString.call(P.resolve())}catch(e){}if(promiseToString==="[object Promise]"&&!P.cast)return}local.Promise=Promise$2}Promise$2.polyfill=polyfill;Promise$2.Promise=Promise$2;Promise$2.polyfill();return Promise$2});
function AgentInfo(){var p={};var asyncCallbacks={};var apaSupported=false;var _self=this;var _surface={isTouchable:undefined,key:"__#thinfinity.touch.data__",callbacks:[]};function initialize(){p=getBrowserInfo();if(this.__proto__==null)if(Object.getPrototypeOf)this.__proto__=Object.getPrototypeOf(this);else this.__proto__=this.constructor.prototype;this.__proto__.getAgentKey=function(){var result;if(p["isIOS"])result="IOS_";else if(p["isAndroid"])result="ANDROID_";else if(p["isPlaybook"])result=
"PLAYBOOK_";else if(p["isHPTablet"])result="WEBOS_";else if(p["isChromeOS"])result="CHROMEOS_";else if(p["isMac"])result="MAC_";else if(p["isSymbian"])result="SYMBIAN_";else result="PC_";if(p["isFirefox"])result+="FIREFOX";else if(p["isOpera"])result+="OPERA";else if(p["isSafari"])result+="SAFARI";else if(p["isChrome"])result+="CHROME";else if(p["isMSIE"])result+="MSIE";else if(p["isTrident"])result+="TRIDENT";else if(p["isNokiaBrowser"])result+="NOKIA";else if(p["isChromium"])result+="CHROMIUM";
return result};this.__proto__.browserFromAgent=function(agentStr){var result;var params=getBrowserInfo(agentStr);if(params["isFirefox"])result="Mozilla Firefox";else if(params["isOpera"])result="Opera";else if(params["isSafari"])result="Safari";else if(params["isChrome"])result="Google Chrome";else if(params["isMSIE"])result="MS Internet Explorer";else if(params["isNokiaBrowser"])result="Nokia Browser";else if(params["isTrident"])result="Trident (MSIE >= 11, like Gecko)";else if(params["isChromium"])result=
"CHROMIUM";result+=" on ";if(params["isIOS"])result+="iOS"+(iosVersion==7)?" 7":"";else if(params["isAndroid"])result+="Android";else if(params["isPlaybook"])result+="BlackBerry Playbook";else if(params["isChromeOS"])result+="Chrome OS";else if(params["isHPTablet"])result+="Web OS";else if(params["isMac"])result+="Mac";else if(params["isSymbian"])result+="Symbian";else result+="PC";return result};getInitizationData();touchableDetection();try{window.dispatchEvent(new CustomEvent("addStatusAPIVariables",
{"detail":[{"name":"supportH264","title":"Support H264","get":function(){return p.h264},"index":100},{"name":"isMobile","title":"Mobile","get":function(){return p.isMobile},"index":110},{"name":"isTouch","title":"Touch","get":function(){return p.isTouch},"index":120},{"name":"browserInfo","title":"Browser","get":function(){var binfo=[];if(p.isWindows)binfo.push("Windows");else if(p.isMac)binfo.push("Mac");if(p.isChrome)binfo.push("Chrome: "+p.chromeVersion);else if(p.isOpera)binfo.push("Opera");else if(p.isSafari)binfo.push("Safari");
else if(p.isSafari)binfo.push("Safari");else if(p.isMSIE)binfo.push("IE "+p.msieVersion);else if(p.isFirefox)binfo.push("Firefox");binfo=binfo.join(", ");return binfo},"index":130}]}))}catch(error){}}(function autoplayAudioSupported(callback){if(isFirefox())callback(false);else{var audioFile="data:audio/mpeg;base64,/+MYxAAAAANIAAAAAExBTUUzLjk4LjIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";var audioElem=document.createElement("audio");audioElem.muted=true;audioElem.preload="auto";
audioElem.src=audioFile;var startPlayPromise=audioElem.play();if(!!startPlayPromise)startPlayPromise.then(function(){audioElem=null;callback(true)}).catch(function(error){audioElem=null;callback(false)});else callback(false)}})(response=>{apaSupported=response});function touchableDetection(){if(window.sessionStorage){let tempData=sessionStorage.getItem(_surface.key);if(tempData)try{tempData=JSON.parse(tempData);if(tempData.hasOwnProperty("isTouchable"))_surface.isTouchable=tempData.isTouchable}catch(error){}if(_surface.isTouchable||
p.isTouch)p.isTouch=true;else if(!p.isMobile){var waitForTouchDevice=function(){return new Promise(resolve=>{var _touchDetection=function(e){if(e?.sourceCapabilities?.firesTouchEvents===true){p.isTouch=true;window.sessionStorage.setItem(_surface.key,JSON.stringify({isTouchable:true}));window.removeEventListener("touchstart",_touchDetection,{passive:false});resolve()}};window.addEventListener("touchstart",_touchDetection,{passive:false})})};waitForTouchDevice().then(r=>{_surface.callbacks.forEach(fn=>
{try{fn()}catch(error){console.log(`Cannot execute callback: ${error.message||error}`)}});_surface.callbacks=null})}}}function detectTouch(callback){if(_surface.isTouchable===true)callback();else _surface.callbacks.push(callback)}function isFirefox(){var m=window.navigator.userAgent.match(/firefox/gi);return m&&m.length!=-1}function detectFirefox(userAgent,params){params["isFirefox"]=userAgent.indexOf("firefox")!=-1;params["firefoxVersion"]=0;if(/firefox[\/\s](\d+\.\d+)/.test(userAgent))params["firefoxVersion"]=
new Number(RegExp.$1)}function getOSVersion(userAgent){var osReg=new RegExp(/Windows NT [0-9]+.[0-9]+;/gi);var numReg=new RegExp(/[0-9]+/gi);var fgroup=userAgent.match(osReg);if(fgroup)try{var osnum=fgroup[0].match(numReg);if(osnum){osnum=parseInt(osnum[0],10);if(osnum<10)return 7;else return 10}}catch(error){}return"unknown"}function getMSIEBrowserVersion(userAgent){try{var tempVersion=/edge\/(([0-9]+).)*/.exec(userAgent)||0;return parseFloat(tempVersion[0].replace("edge/","").replace(/ /g,"").replace(/;/g,
""))}catch(error){return 0}}function detectIE(userAgent,params){var reg=/(msie) ([\w.]+)/.exec(userAgent);params["msieVersion"]=0;params["msieOSVersion"]="";params["msieHTMLVersion"]=0;params["isWindowsPhone"]=false;var ieTest=/(msie) ([0-9\.]+)/i.exec(userAgent);params["isMSIE"]=!!(ieTest&&ieTest[1]=="msie");if(params["isMSIE"])params["msieVersion"]=parseFloat(ieTest[2]);else if(userAgent.indexOf("trident")!=-1){ieTest=/rv:([0-9\.]+)/i.exec(userAgent);if(ieTest){params["isMSIE"]=true;params["msieVersion"]=
parseFloat(ieTest[1])}}else if(/(windows nt 10.0)/i.exec(userAgent)&&/(edge)/i.exec(userAgent)){params["isMSIE"]=true;params["msieVersion"]=12}else if(/(windows phone 10.0)/i.exec(userAgent)&&/(edge)/i.exec(userAgent)){params["isMSIE"]=true;params["msieVersion"]=12;params["isWindowsPhone"]=true}if(params.isMSIE)params.msieHTMLVersion=getMSIEBrowserVersion(userAgent);params["msieOSVersion"]=getOSVersion(userAgent)}function checkPolyfillObjectURL(){window.URL=window.URL||window.webkitURL;return window.URL?
true:false}function checkTypedArrays(){var result=false;if(!window.Uint32Array&&!window.Uint16Array&&!window.Uint8Array)return result;var test=null;var testU8=null;var testU16=null;var testU32=null;var i;try{test=new ArrayBuffer(16);testU8=new Uint8ClampedArray(test,8,8);testU16=new Uint16Array(test,8,4);testU32=new Uint32Array(test,8,2);for(i=0;i<testU8.length;++i)testU8[i]=171;for(i=0;i<testU16.length;++i)testU16[i]=43947;for(i=0;i<testU32.length;++i)testU32[i]=2880154539;result=true}catch(err){result=
false}finally{testU8=null;testU16=null;testU32=null;test=null}return result}function checkTransferableObjects(){var result;var workerScript;var objectUrl;var trArr;var trWork;try{if(!window.URL)throw"";workerScript=new Blob(["onmessage = function (oEvent) {}"],{type:"text/javascript"});objectUrl=window.URL.createObjectURL(workerScript);trArr=new ArrayBuffer(1);trWork=new Worker(objectUrl);trWork.postMessage(trArr,[trArr]);result=trArr.byteLength?false:true}catch(err){result=false}finally{trWork=null;
trArr=null;window.URL.revokeObjectURL(objectUrl)}return result}function checkAsmJsWorkersSupportAsync(scriptUrl,params){var worker;try{if(!params["hasTypedArrays"]||!_self.hasTransferableObjects)throw"";worker=new Worker(scriptUrl);worker.onmessage=function(oEvent){params["supportsAsmJsWorkers"]=true;params["supportsRFXDecoder"]=true;worker=null;callAsyncDetectionCallback("OnAsmJsWorkersTested")};worker.onerror=function(oEvent){params["supportsAsmJsWorkers"]=false;params["supportsRFXDecoder"]=false;
worker=null;callAsyncDetectionCallback("OnAsmJsWorkersTested")};worker.postMessage("test")}catch(err){params["supportsAsmJsWorkers"]=false;params["supportsRFXDecoder"]=false;worker=null;callAsyncDetectionCallback("OnAsmJsWorkersTested")}}function getIphoneModel(){var retModel={"name":"","resolution":"","majorVersion":0};try{var dpr=window.devicePixelRatio||1;var h=window.screen.height*dpr;var w=window.screen.width*dpr;if(w==320&&h==480)retModel={"name":["1","2g","3","3g","3gs"],"resolution":"320x480",
"majorVersion":3};else if(w==640&&h==960)retModel={"name":["4","4s"],"resolution":"640x960","majorVersion":4};else if(w==640&&h==1136)retModel={"name":["5","5s","5c"],"resolution":"640x1136","majorVersion":5};else if(w==750&&h==1334)retModel={"name":["6"],"resolution":"750x1134","majorVersion":6};else if(w==1080&&h==1920)retModel={"name":["6plus"],"resolution":"1080x1920","majorVersion":6}}catch(error){}return retModel}function getBrowserInfo(userAgent){var params={};if(typeof userAgent!="string")userAgent=
navigator.userAgent;params["agentStr"]=userAgent=userAgent.toLowerCase();var isTrident=userAgent.indexOf("trident")!=-1;params["protocol"]=document.location.protocol=="https:"?"https":"http";params["majorVersion"]=parseInt(navigator.appVersion,10);params["isWindows"]=userAgent.indexOf("windows")!=-1;params["isMac"]=userAgent.indexOf("macintosh")!=-1;params["isLinux"]=userAgent.indexOf("linux")!=-1;params["isIOS"]=(userAgent.indexOf("iphone")!=-1||userAgent.indexOf("ipod")!=-1||userAgent.indexOf("ipad")!=
-1||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)&&!isTrident;params["iosVersion"]=params["isIOS"]?/os (([0-9]+)_)*./.exec(userAgent)||0:0;if(params["iosVersion"]!=0)try{params["iosBuildVersion"]=params["iosVersion"][0].replace("os","").replace(/_/g,".").replace(/ /g,"");var tempIosVersion=params["iosVersion"][0].replace("os","").replace(/ /g,"");if(tempIosVersion.indexOf("_")!=-1)tempIosVersion=parseInt(tempIosVersion.substring(0,tempIosVersion.indexOf("_")),10);params["iosVersion"]=
tempIosVersion}catch(error){params["iosVersion"]=params["iosBuildVersion"]=params["iosVersion"][params["iosVersion"].length-1]}params["ipadModel"]=0;if(params["isIOS"])try{var ipadModel=1;if(window.ondevicemotion)window.ondevicemotion=function(e){if(event.acceleration)ipadModel+=window.devicePixelRatio;params["ipadModel"]=ipadModel;window.ondevicemotion=null};else params.ipadModel="pro"}catch(error){params["ipadModel"]=0}params["isIphone"]=(userAgent.indexOf("iphone")!=-1||userAgent.indexOf("ipod")!=
-1)&&!isTrident;if(params["isIphone"]==true)params["iphoneModel"]=getIphoneModel();params["isIpod"]=userAgent.indexOf("ipod")!=-1;params["isAndroid"]=userAgent.indexOf("android")!=-1&&!isTrident;params["isHPTablet"]=userAgent.indexOf("hp-tablet")!=-1;params["isPlaybook"]=userAgent.indexOf("playbook")!=-1;params["isChromeOS"]=userAgent.indexOf(" cros ")!=-1;if(params["isChromeOS"]==true)try{var tempChromeVersion=/android (([0-9]+).)*./.exec(userAgent)||0;params["chromeOSVersion"]=tempChromeVersion[0].replace("android",
"").replace(/ /g,"").replace(/;/g,"")}catch(error){params["chromeOSVersion"]="0"}else params["chromeOSVersion"]="0";params["isYandex"]=userAgent.indexOf("yabrowser")!=-1;detectIE(userAgent,params);params["isSymbian"]=userAgent.indexOf("symbian")!=-1;params["isWindowMobile"]=userAgent.indexOf("iemobile")!=-1||userAgent.indexOf("windows phone")!=-1;params["isOpera"]=userAgent.indexOf("opera")!=-1||userAgent.indexOf("opr/")!=-1;params["isChrome"]=!params["isOpera"]&&(userAgent.indexOf("chrome")!=-1||
userAgent.indexOf("crios")!=-1)&&params["isMSIE"]==false;params["isChromium"]=false;if(params["isChrome"])try{var getChromeVersion=function(){var tempChromeVersion=/chrome\/(([0-9]+).)*/.exec(userAgent)||0;return tempChromeVersion[0].replace("chrome/","").replace(/ /g,"").replace(/;/g,"")};var getCriosVersion=function(){var tempChromeVersion=/crios\/(([0-9]+).)*/.exec(userAgent)||0;return params["chromeVersion"]=tempChromeVersion[0].replace("crios/","").replace(/ /g,"").replace(/;/g,"")};var tempChromeVersion=
"";if(params["isIOS"]){tempChromeVersion=/crios\/(([0-9]+).)*/.exec(userAgent)||0;if(tempChromeVersion){params.isChrome=true;params.isSafari=false;params["chromeVersion"]=getCriosVersion()}else{params.isIOS=false;params.isSafari=false;params["chromeVersion"]=getChromeVersion()}}else{tempChromeVersion=/chrome\/(([0-9]+).)*/.exec(userAgent)||0;if(tempChromeVersion){params.isChrome=true;params.isSafari=false;params["chromeVersion"]=getChromeVersion()}else{params.isIOS=false;params.isSafari=false}}}catch(error){params["chromeVersion"]=
"0"}else params["chromeVersion"]="0";params["isDragon"]=userAgent.indexOf("dragon")!=-1&&params["isChrome"]==true;if(params["isDragon"])try{var tempDragonVersion=/dragon\/(([0-9]+).)*/.exec(userAgent)||0;params["dragonVersion"]=tempDragonVersion[0].replace("dragon/","").replace(/ /g,"").replace(/;/g,"")}catch(error){params["dragonVersion"]="0"}else params["dragonVersion"]="0";params["isNokiaBrowser"]=userAgent.indexOf("nokiabrowser")!=-1;detectFirefox(userAgent,params);params["isSafari"]=!(params["isNokiaBrowser"]||
params["isChrome"]||params["isOpera"]||params["isFirefox"]||params["isMSIE"])&&(userAgent.indexOf("safari")!=-1||params["isIOS"]);if(params["isSafari"]&&params["isAndroid"]){params["isSafari"]=false;params["isChromium"]=true}if(params.isMSIE&&params.msieVersion>=11&&params.isWindows){params.isIOS=false;params.isAndroid=false;params.isSafari=false;params.isChrome=false;params.isFirefox=false}params["isMobile"]=!params["isChromeOS"]&&(params["isIOS"]||params["isAndroid"]||params["isHPTablet"]||params["isPlaybook"]||
params["isSymbian"]||params["isWindowMobile"]);params["isTouch"]=!!("ontouchstart"in window)||navigator.pointerEnabled&&navigator.maxTouchPoints>0||navigator.msPointerEnabled&&navigator.msMaxTouchPoints>0||false;params["hasObjectURL"]=checkPolyfillObjectURL();params["hasArrayBuffers"]=!!window.ArrayBuffer;params["hasTypedArrays"]=params["hasArrayBuffers"]?checkTypedArrays():false;params["hasWorkers"]=!!window.Worker;params["hasTransferableObjects"]=null;window.requestAnimationFrame=window.requestAnimationFrame||
window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(callback){setTimeout(callback,0)};params["supportsAsmJsWorkers"]=false;params["supportsRFXDecoder"]=false;if(params["isWindowsPhone"]==true){params["isAndroid"]=false;params["isChromium"]=false;params["isChromeOS"]=false;params["chromeVersion"]="0"}params["isTabletMode"]=false;params["timeZone"]=-(new Date).getTimezoneOffset()/60;params["h264"]=!(params.isMSIE&&params.msieVersion<15);params["gfx"]=
!(params.isMSIE&&params.msieVersion<15)&&!params["isSafari"];return params}function supportsFullScreen(element){var response=false;if(element==null||element==undefined)element=document.documentElement;if(element){if(element.requestFullscreen)response=true;else if(element.mozRequestFullScreen)response=true;else if(element.webkitRequestFullscreen)response=true;else if(element.msRequestFullscreen)response=true;if(response&&!(p.isMac&&(p.isOpera||p.isChrome)||p.isChrome))response=window.top===(typeof element.defaultView!=
"undefined"?element.defaultView:typeof element.ownerDocument!="undefined"&&typeof element.ownerDocument.defaultView!="undefined"?element.ownerDocument.defaultView:window)}return response}function callAsyncDetectionCallback(event){if(asyncCallbacks.hasOwnProperty(event)){var callbacks=asyncCallbacks[event];for(var i=0;i<callbacks.length;++i)callbacks[i].callback.apply(callbacks[i].self)}}function addAsyncDetectionCallback(event,self,callback){if(!asyncCallbacks.hasOwnProperty(event))asyncCallbacks[event]=
[];asyncCallbacks[event].push({self:self,callback:callback})}function runAsyncDetections(){checkAsmJsWorkersSupportAsync("common/workers/test.js",p)}function supportHTML5(){try{var canvas=document.createElement("canvas");return typeof canvas.getContext!="undefined"?true:false}catch(error){return false}}function updateProperty(){if(arguments&&arguments.length>0)for(var key in arguments[0])if(p[key]!=undefined){console.log(`Forcing property value - ${key}:${arguments[0][key]}`);p[key]=arguments[0][key]}}
function getInitizationData(){if(window.Thinfinity&&window.Thinfinity.InitializationData){var data=window.Thinfinity.InitializationData.get("AGENTINFO");if(data)updateProperty(data)}}function setInitializationData(data){if(window.Thinfinity&&window.Thinfinity.InitializationData){window.Thinfinity.InitializationData.update("AGENTINFO",data);updateProperty(data)}}function getTransferableObjects(){if(p["hasTransferableObjects"]!=null)return p["hasTransferableObjects"];else{p["hasTransferableObjects"]=
p["hasWorkers"]?checkTransferableObjects():false;return p["hasTransferableObjects"]}}function compareVersions(versionA,versionB){var result=0;if(versionA!=versionB){var aVA=versionA.split(".");var aVB=versionB.split(".");var m=Math.min(aVA.length,aVB.length);var i=0;while(result==0&&i<m){result=parseInt(aVA[i],10)-parseInt(aVB[i],10);i++}if(result==0)if(m<aVB.length)result=-1;else if(m<aVA.length)result=1}return result}function isNewerThan(versionA,versionB){return compareVersions(versionA,versionB)>
0}function isOlderThan(versionA,versionB){return compareVersions(versionA,versionB)<0}function isSameVersion(versionA,versionB){return compareVersions(versionA,versionB)==0}function getBrowserName(){return p["isChrome"]?"chrome":p["isMSIE"]?"edge":p["isFirefox"]?"firefox":p["isOpera"]?"opera":p["isSafari"]?"safari":p["isDragon"]?"dragon":p["isSymbian"]?"symbian":p["isChromium"]?"android":"unknown"}function supportOggFormat(callback){let checkOgg=()=>{return new Promise(resolve=>{try{let audioCtx=
new AudioContext;let chunk=[79,103,103,83,0,2,0,0,0,0,0,0,0,0,26,50,0,0,0,0,0,0,253,79,48,95,1,19,79,112,117,115,72,101,97,100,1,2,56,1,68,172,0,0,0,0,0,79,103,103,83,0,0,0,0,0,0,0,0,0,0,26,50,0,0,1,0,0,0,101,92,227,247,1,51,79,112,117,115,84,97,103,115,35,0,0,0,108,105,98,111,112,117,115,32,117,110,107,110,111,119,110,44,32,108,105,98,111,112,117,115,101,110,99,32,117,110,107,110,111,119,110,0,0,0,0,79,103,103,83,0,4,245,37,0,0,0,0,0,0,26,50,0,0,2,0,0,0,167,37,66,36,14,255,144,241,237,233,235,241,
233,230,255,111,230,255,158,252,127,12,20,204,98,190,27,223,60,146,131,102,2,15,67,177,166,86,254,172,19,81,160,245,25,129,89,47,50,163,219,19,109,120,142,210,182,207,246,96,150,241,199,58,105,62,202,178,179,170,86,30,188,185,17,125,250,117,60,173,73,126,157,36,135,211,204,180,173,211,208,122,17,193,32,51,107,80,2,34,51,119,59,119,122,228,213,149,184,223,154,232,140,57,182,203,52,207,211,36,98,208,10,24,250,149,166,251,147,123,156,163,173,143,250,145,224,120,23,125,163,194,207,224,192,202,60,103,
42,44,254,187,54,251,212,135,145,105,136,31,138,157,19,34,160,226,180,201,223,78,96,54,7,249,255,203,49,105,182,182,227,80,120,30,161,20,0,0,0,1,244,148,122,129,74,111,98,98,85,129,123,61,74,124,255,58,194,191,58,194,183,89,45,128,75,96,0,2,208,1,30,72,209,111,46,227,119,148,51,34,19,209,3,214,235,0,191,149,3,214,235,55,120,147,57,153,131,41,216,133,47,110,252,30,102,202,17,96,192,212,74,97,193,185,149,214,165,55,204,141,161,39,104,96,131,64,197,153,0,109,233,199,117,124,93,47,177,243,68,148,182,
182,43,232,172,62,79,64,103,124,59,16,176,139,36,116,143,10,233,116,192,152,166,143,138,30,14,114,190,123,33,196,102,217,98,212,101,134,196,141,110,118,204,91,173,171,117,146,22,179,162,139,248,0,164,124,99,112,66,94,122,216,1,59,239,84,22,187,179,205,107,221,59,195,94,43,229,106,122,130,205,203,197,229,216,150,12,0,54,121,110,118,234,14,145,117,155,220,93,226,115,230,100,69,147,31,164,71,109,96,182,38,45,17,124,179,250,89,128,21,231,11,68,164,87,1,82,7,252,101,151,201,103,98,50,196,172,95,172,137,
244,140,185,12,251,106,121,57,240,172,205,112,121,55,113,123,117,114,14,246,44,246,80,110,187,121,212,147,237,241,69,46,235,178,140,192,114,121,219,97,150,55,23,151,4,19,37,221,162,241,61,214,150,232,163,86,135,190,154,29,191,84,40,136,48,81,232,230,206,213,92,99,105,182,199,80,230,91,49,85,148,56,51,176,67,233,100,20,152,213,3,194,183,146,123,49,23,37,51,223,66,43,116,115,57,11,16,159,43,198,68,239,150,143,76,54,72,36,151,188,185,201,243,25,74,132,117,71,202,195,63,131,194,48,50,155,61,136,31,247,
56,18,115,168,185,134,226,172,72,246,95,76,122,39,70,231,227,240,139,51,142,65,27,172,31,127,26,249,69,186,117,31,134,51,185,45,156,37,81,149,93,90,145,164,18,197,255,189,61,219,209,159,198,123,70,168,110,107,55,49,69,2,145,2,54,105,13,77,53,59,233,160,247,10,184,137,144,157,27,184,33,242,229,145,106,155,166,123,149,252,38,119,8,151,118,97,60,197,181,145,118,161,103,159,136,110,183,175,184,61,238,153,244,76,74,102,163,131,108,1,86,11,0,34,130,169,169,103,192,103,90,100,153,238,171,117,44,143,177,
252,6,14,193,55,13,24,140,103,2,252,205,240,15,204,12,174,97,179,126,240,140,76,251,90,229,42,205,20,183,121,43,250,243,148,162,226,230,127,110,202,103,62,84,198,232,113,45,3,185,90,52,180,220,120,20,123,231,143,102,132,221,227,46,11,221,92,73,71,207,133,131,128,108,39,45,205,14,68,70,83,178,18,26,232,179,88,43,29,39,175,76,153,80,31,221,61,228,239,130,217,80,157,95,149,43,230,177,106,69,153,0,54,129,100,65,23,60,6,5,156,187,33,183,107,89,142,117,165,31,198,138,24,134,177,177,79,130,139,181,20,106,
195,13,6,48,183,205,179,81,124,3,217,236,124,255,20,87,9,235,73,59,248,226,54,59,126,110,190,126,88,4,64,155,85,254,70,122,234,122,185,239,144,58,75,144,234,252,40,103,44,173,139,243,37,30,197,11,208,244,201,78,57,181,34,58,66,91,165,70,64,196,34,184,32,243,173,104,63,51,109,186,218,178,226,79,176,10,183,19,52,247,113,211,140,239,52,244,33,154,168,83,172,166,222,82,223,108,166,207,68,109,11,193,128,141,218,147,36,180,69,173,15,193,112,36,86,48,198,241,67,246,134,17,195,246,35,125,42,247,80,142,127,
67,146,2,204,117,227,203,160,208,164,141,226,73,131,203,89,215,80,206,22,64,116,155,137,197,119,87,161,46,235,231,82,13,34,234,228,38,36,87,38,128,236,101,183,25,108,53,79,248,133,242,140,107,88,86,134,80,66,142,109,53,219,109,14,186,81,42,117,47,82,243,50,54,15,170,90,56,21,199,82,16,161,241,123,72,63,62,163,209,12,31,212,150,210,215,178,241,71,151,143,179,155,102,109,228,230,244,8,18,22,3,155,197,62,212,148,68,154,244,10,193,22,55,170,207,168,185,21,247,110,197,218,207,242,149,240,249,252,37,177,
219,167,13,34,187,105,57,130,73,87,49,150,29,217,251,190,247,255,45,237,202,156,26,231,13,114,170,231,116,139,117,34,252,122,95,146,78,177,167,231,24,42,55,50,9,201,224,173,201,153,204,5,219,147,104,132,124,52,219,74,43,212,159,1,133,74,12,85,195,232,231,16,59,190,98,1,38,222,164,52,113,31,42,114,164,222,154,74,242,83,188,163,162,135,59,127,5,217,90,27,91,124,33,248,239,98,58,218,127,220,136,110,10,42,73,102,64,136,249,116,68,153,103,4,165,210,111,143,119,75,182,97,70,93,171,221,238,231,202,111,160,
111,35,126,254,88,190,125,160,69,85,223,230,225,180,189,57,32,75,148,91,58,163,14,73,51,254,2,14,203,168,109,141,29,225,52,108,13,52,54,155,172,191,153,125,225,190,93,114,36,205,35,48,60,144,215,202,204,57,18,118,14,147,161,143,250,45,143,65,224,84,216,197,96,210,10,160,52,230,209,109,39,45,143,132,126,114,74,7,31,45,60,252,46,164,87,128,38,225,187,169,63,243,221,220,205,167,103,27,124,115,184,21,55,115,9,104,162,39,189,176,22,175,89,189,148,187,215,107,84,90,202,96,131,199,111,39,240,230,122,137,
238,212,15,81,108,118,198,133,91,18,173,171,194,116,15,160,216,183,167,172,194,114,23,77,12,35,252,66,192,98,21,37,29,73,204,83,118,198,102,166,91,251,66,117,97,61,99,143,7,122,149,189,148,253,25,208,151,150,243,6,100,162,152,176,5,48,164,119,86,58,245,188,191,183,200,22,172,239,95,114,138,173,251,199,248,157,90,192,93,89,206,229,84,82,30,98,19,18,42,202,29,25,67,54,159,146,188,236,148,60,203,55,58,66,217,113,253,79,13,35,253,91,16,44,172,36,2,68,183,244,69,53,110,61,228,149,12,101,61,86,211,122,
152,68,69,145,7,208,57,93,91,31,14,142,163,8,156,22,154,142,187,80,192,100,221,184,249,185,221,133,74,153,67,105,189,186,185,71,82,216,226,52,69,238,44,106,34,236,199,68,141,131,252,47,9,213,11,17,31,234,115,186,222,147,77,196,1,20,144,89,226,207,65,128,12,138,213,175,85,7,180,28,136,198,216,55,103,59,153,110,195,193,202,20,207,134,44,128,190,3,83,166,125,130,68,218,106,38,193,95,81,156,99,85,107,98,64,2,211,235,176,1,12,218,141,40,150,220,170,57,94,8,152,53,103,130,141,102,224,130,59,206,3,235,14,
113,74,193,197,94,27,181,221,167,150,81,193,14,212,232,101,104,157,4,81,119,11,93,45,61,71,223,11,119,162,156,228,63,156,110,148,177,85,23,17,42,67,142,58,118,112,199,215,24,54,251,43,175,137,161,32,161,38,78,231,249,136,68,235,249,180,77,33,156,93,173,217,26,1,118,224,21,60,169,159,66,169,87,192,50,254,4,228,152,169,23,180,10,164,178,30,164,3,243,173,244,55,40,116,202,182,116,100,72,55,138,241,235,49,128,145,104,26,254,141,101,16,125,54,239,45,0,103,215,218,31,158,215,97,104,87,45,146,18,164,252,
46,0,101,234,211,183,62,130,57,238,51,209,85,67,128,33,10,167,149,176,189,237,244,99,28,6,121,119,183,32,108,88,245,165,153,181,153,51,71,142,71,9,254,24,204,95,196,3,34,188,225,84,206,7,157,159,242,174,188,170,39,240,133,52,129,88,151,44,11,187,239,245,192,18,57,182,161,133,110,12,178,128,144,89,47,206,243,222,2,181,137,29,228,181,133,20,98,135,210,56,218,162,123,139,111,230,228,247,76,252,228,136,149,129,131,122,162,43,132,165,118,77,140,168,89,122,250,225,65,90,60,4,213,71,237,205,210,26,28,95,
200,94,132,72,92,199,126,37,136,87,152,226,172,36,201,191,110,86,50,81,47,120,59,16,239,108,46,205,194,93,52,186,95,147,174,128,220,217,105,108,121,193,48,136,206,71,204,66,41,138,178,222,215,79,118,140,0,211,58,124,81,11,172,174,187,101,221,124,8,153,242,136,5,118,42,243,208,188,71,30,65,251,218,131,101,220,112,41,115,252,123,16,18,142,20,151,239,200,161,5,196,168,112,249,82,169,130,132,202,135,92,139,251,183,70,215,34,226,65,223,212,213,179,64,131,213,250,216,43,171,150,142,239,108,66,194,246,48,
69,195,166,24,197,224,63,195,5,132,131,214,218,65,5,146,98,195,112,121,192,145,72,229,193,182,53,210,7,12,139,143,19,184,151,117,4,234,212,36,199,100,106,187,168,212,115,48,201,239,33,29,26,162,94,117,137,84,143,238,144,66,142,98,58,93,26,107,90,79,113,171,146,158,1,153,111,48,232,126,120,114,61,159,191,106,154,157,96,31,42,60,238,188,203,88,125,154,239,97,228,120,220,241,123,235,22,13,220,205,19,30,15,6,28,22,183,3,162,191,200,195,184,187,45,32,173,180,77,168,212,79,102,50,219,27,163,123,144,24,
159,103,219,188,46,143,193,254,38,63,214,137,122,213,196,137,150,245,153,179,28,192,211,251,96,189,109,178,132,117,42,171,74,154,52,219,86,12,55,5,2,104,233,229,132,1,86,57,143,55,83,23,178,187,254,245,145,51,179,59,197,118,49,14,253,189,219,135,37,5,212,84,240,53,195,147,88,233,45,252,237,3,66,200,165,255,189,214,71,44,75,18,92,222,194,51,169,62,216,113,47,205,166,12,163,100,48,104,75,19,83,64,204,83,149,194,229,93,223,65,104,147,59,158,254,203,9,62,15,107,42,92,117,149,128,51,205,11,64,206,187,
145,23,126,41,65,25,52,165,152,139,26,81,72,107,223,223,242,122,115,111,52,220,27,84,55,141,92,36,146,136,97,237,196,168,69,217,252,1,18,158,161,218,100,186,252,112,152,148,116,30,118,133,8,19,138,136,50,109,180,225,221,171,138,140,219,194,53,216,152,237,58,114,57,229,39,122,170,168,222,46,144,55,199,30,234,6,104,86,64,18,42,111,80,207,57,64,129,234,56,237,117,138,130,110,141,39,137,4,247,52,96,244,134,213,135,140,218,54,183,195,243,179,113,29,191,92,164,183,88,197,60,35,214,3,250,149,205,165,204,
225,46,78,40,73,140,172,237,47,100,173,190,91,223,153,191,51,195,26,216,89,96,130,128,185,188,248,244,201,200,104,240,102,108,127,66,99,252,236,110,251,25,95,24,56,98,14,214,59,187,86,208,197,42,209,229,146,232,66,41,110,113,70,4,253,7,12,91,77,148,216,255,143,24,185,34,65,159,146,201,102,177,177,142,179,41,10,206,251,72,186,196,24,168,77,134,146,242,141,78,238,183,67,137,11,223,163,196,28,202,50,87,39,1,169,80,58,139,27,84,17,89,200,179,56,36,116,252,114,165,6,179,6,71,137,123,67,7,148,163,133,82,
23,107,43,58,198,65,72,174,130,245,38,3,254,68,169,70,116,99,149,186,84,114,147,213,100,103,222,56,189,156,225,96,58,156,0,17,86,213,8,134,46,136,30,11,11,247,97,229,80,0,12,226,247,49,102,152,8,183,31,4,151,11,188,3,11,27,5,19,184,6,190,213,104,188,0,0,7,65,195,30,60,0,0,223,109,64,130,237,214,14,160,176,40,27,216,147,27,9,68,165,25,73,146,192,72,249,89,190,220,55,61,146,249,212,81,61,64,162,97,161,102,79,186,150,13,37,121,24,189,69,247,56,202,2,217,206,0,99,86,203,165,149,53,174,201,202,97,113,
32,107,121,77,196,192,220,62,146,75,38,210,88,35,210,226,150,186,27,238,84,82,247,52,113,63,254,158,156,69,244,95,139,53,75,133,21,198,31,199,92,44,187,3,32,2,140,106,179,80,119,149,201,194,55,184,167,183,20,50,194,81,62,181,146,157,140,71,120,8,43,173,184,74,116,148,116,108,246,12,70,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,13,6,137,177,239,236,22,3,42,144,166,108,232,130,10,93,18,206,254,91,121,192,138,188,92,92,122,195,226,212,169,31,
80,106,16,4,149,101,83,203,7,200,64,216,252,84,87,224,52,63,5,67,56,252,142,223,73,194,52,119,31,134,214,12,196,135,1,136,3,131,169,176,171,247,16,0,0,0,0,0,0,0,5,42,130,161,75,5,183,162,118,19,150,78,89,249,239,152,208,143,151,199,114,90,242,137,175,148,247,102,96,66,224,163,67,83,165,204];let ab=new ArrayBuffer(chunk.length*Uint8Array.BYTES_PER_ELEMENT);let view=new Uint8Array(ab);chunk.forEach((elem,idx)=>{view[idx]=elem});view=null;audioCtx.decodeAudioData(ab,()=>{resolve(true)},()=>{resolve(false)})}catch(err){resolve(false)}})};
if(window.localStorage){let tempData=localStorage.getItem(_ogg.key);if(tempData)try{tempData=JSON.parse(tempData);if(tempData.hasOwnProperty("supportOgg"))_ogg.supportOgg=tempData.supportOgg;callback(_ogg.supportOgg)}catch(error){}else checkOgg().then(res=>{localStorage.setItem(_ogg.key,JSON.stringify({supportOgg:res}));callback(res)})}else checkOgg().then(res=>{callback(res)})}initialize();Object.defineProperty(this,"gfx",{enumerable:true,"configurable":false,"value":p["gfx"]});Object.defineProperty(this,
"h264",{enumerable:true,"configurable":false,"value":p["h264"]});Object.defineProperty(this,"agentStr",{enumerable:true,"configurable":false,"value":p["agentStr"]});Object.defineProperty(this,"protocol",{enumerable:true,"configurable":false,"get":function(){return p["protocol"]}});Object.defineProperty(this,"majorVersion",{enumerable:true,"configurable":false,"value":p["majorVersion"]});Object.defineProperty(this,"isWindows",{enumerable:true,"configurable":false,"value":p["isWindows"]});Object.defineProperty(this,
"isMac",{enumerable:true,"configurable":false,"value":p["isMac"]});Object.defineProperty(this,"isIOS",{enumerable:true,"configurable":false,"value":p["isIOS"]});Object.defineProperty(this,"iosVersion",{enumerable:true,"configurable":false,"value":p["iosVersion"]});Object.defineProperty(this,"ipadModel",{enumerable:true,"configurable":false,"get":function(){return p["ipadModel"]}});Object.defineProperty(this,"iosBuildVersion",{enumerable:true,"configurable":false,"value":p["iosBuildVersion"]});Object.defineProperty(this,
"isIphone",{enumerable:true,"configurable":false,"value":p["isIphone"]});if(p["isIphone"]==true)Object.defineProperty(this,"iphoneModel",{enumerable:true,"configurable":false,"value":p["iphoneModel"]});Object.defineProperty(this,"isIpod",{enumerable:true,"configurable":false,"value":p["isIpod"]});Object.defineProperty(this,"isAndroid",{enumerable:true,"configurable":false,"value":p["isAndroid"]});Object.defineProperty(this,"isHPTablet",{enumerable:true,"configurable":false,"value":p["isHPTablet"]});
Object.defineProperty(this,"isPlaybook",{enumerable:true,"configurable":false,"value":p["isPlaybook"]});Object.defineProperty(this,"isChromeOS",{enumerable:true,"configurable":false,"value":p["isChromeOS"]});Object.defineProperty(this,"chromeOSVersion",{enumerable:true,"configurable":false,"value":p["chromeOSVersion"]});Object.defineProperty(this,"isSymbian",{enumerable:true,"configurable":false,"value":p["isSymbian"]});Object.defineProperty(this,"isFirefox",{enumerable:true,"configurable":false,
"value":p["isFirefox"]});Object.defineProperty(this,"isOpera",{enumerable:true,"configurable":false,"value":p["isOpera"]});Object.defineProperty(this,"isChrome",{enumerable:true,"configurable":false,"value":p["isChrome"]});Object.defineProperty(this,"chromeVersion",{enumerable:true,"configurable":false,"value":p["chromeVersion"]});Object.defineProperty(this,"isNokiaBrowser",{enumerable:true,"configurable":false,"value":p["isNokiaBrowser"]});Object.defineProperty(this,"isSafari",{enumerable:true,"configurable":false,
"value":p["isSafari"]});Object.defineProperty(this,"isMSIE",{enumerable:true,"configurable":false,"value":p["isMSIE"]});Object.defineProperty(this,"isYandex",{enumerable:true,"configurable":false,"value":p["isYandex"]});Object.defineProperty(this,"isDragon",{enumerable:true,"configurable":false,"value":p["isDragon"]});Object.defineProperty(this,"dragonVersion",{enumerable:true,"configurable":false,"value":p["dragonVersion"]});Object.defineProperty(this,"isChromium",{enumerable:true,"configurable":false,
"value":p["isChromium"]});Object.defineProperty(this,"msieVersion",{enumerable:true,"configurable":false,"value":p["msieVersion"]});Object.defineProperty(this,"msieOSVersion",{enumerable:true,"configurable":false,"value":p["msieOSVersion"]});Object.defineProperty(this,"msieHTMLVersion",{enumerable:true,"configurable":false,"value":p["msieHTMLVersion"]});Object.defineProperty(this,"browserName",{enumerable:true,"configurable":false,"get":getBrowserName});Object.defineProperty(this,"firefoxVersion",
{enumerable:true,"configurable":false,"value":p["firefoxVersion"]});Object.defineProperty(this,"isWindowsPhone",{enumerable:true,"configurable":false,"value":p["isWindowsPhone"]});Object.defineProperty(this,"isMobile",{enumerable:true,"configurable":false,"get":function(){return p["isMobile"]}});Object.defineProperty(this,"isTouch",{enumerable:true,"configurable":false,"get":function(){return p["isTouch"]}});Object.defineProperty(this,"getAgentKey",{enumerable:true,"configurable":false,"value":getAgentKey});
Object.defineProperty(this,"browserFromAgent",{enumerable:true,"configurable":false,"value":browserFromAgent});Object.defineProperty(this,"hasObjectURL",{enumerable:true,"configurable":false,"value":p["hasObjectURL"]});Object.defineProperty(this,"hasArrayBuffers",{enumerable:true,"configurable":false,"value":p["hasArrayBuffers"]});Object.defineProperty(this,"hasTypedArrays",{enumerable:true,"configurable":false,"value":p["hasTypedArrays"]});Object.defineProperty(this,"hasWorkers",{enumerable:true,
"configurable":false,"value":p["hasWorkers"]});Object.defineProperty(this,"hasTransferableObjects",{enumerable:true,"configurable":false,"get":function(){return getTransferableObjects()}});Object.defineProperty(this,"supportsAsmJsWorkers",{enumerable:true,"configurable":false,"get":function(){return p["supportsAsmJsWorkers"]}});Object.defineProperty(this,"supportsRFXDecoder",{enumerable:true,"configurable":false,"get":function(){return p["supportsRFXDecoder"]}});Object.defineProperty(this,"supportsFullScreen",
{enumerable:true,"configurable":false,"value":supportsFullScreen});Object.defineProperty(this,"addAsyncDetectionCallback",{enumerable:true,"configurable":false,"value":addAsyncDetectionCallback});Object.defineProperty(this,"runAsyncDetections",{enumerable:true,"configurable":false,"value":runAsyncDetections});Object.defineProperty(this,"supportHTML5",{enumerable:true,"configurable":false,"get":function(){return supportHTML5()}});Object.defineProperty(this,"supportAudioAutoPlay",{enumerable:true,"configurable":false,
"get":function(){return apaSupported}});Object.defineProperty(this,"detectTouch",{enumerable:true,"configurable":false,writable:false,"value":detectTouch});Object.defineProperty(this,"isTabletMode",{enumerable:true,"configurable":false,"get":function(){return p["isTabletMode"]}});Object.defineProperty(this,"timeZone",{enumerable:true,"configurable":false,"get":function(){return p["timeZone"]}});Object.defineProperty(this,"compareVersions",{enumerable:true,"configurable":false,"value":compareVersions});
Object.defineProperty(this,"isOlderThan",{enumerable:true,"configurable":false,"value":isOlderThan});Object.defineProperty(this,"isNewerThan",{enumerable:true,"configurable":false,"value":isNewerThan});Object.defineProperty(this,"isSameVersion",{enumerable:true,"configurable":false,"value":isSameVersion});Object.defineProperty(this,"supportOggFormat",{enumerable:true,"configurable":false,"value":supportOggFormat});Object.defineProperty(this,"__setInitializationData__",{enumerable:true,"configurable":false,
"writable":false,"value":setInitializationData});return this}var agentInfo=null;try{agentInfo=new AgentInfo}catch(error){}if(typeof agentInfo=="undefined"||agentInfo==null){agentInfo=new Object;agentInfo["supportHTML5"]=false}
function Helper(){var GLOBAL_VAR={console:{logDebug:false,logWarning:true,logInfo:true,logError:true,logException:true,logFatal:true},"class":{"name":"help","privateREF#":null,"ref#":null}};var _plugins={};function initialize(assignElem){try{if(GLOBAL_VAR.console.logDebug)if(window.console!=undefined&&window.console.log!=undefined)window.console.log("Initializing "+GLOBAL_VAR["class"]["name"]+" class. - "+(new Date).toString());GLOBAL_VAR["class"]["privateREF#"]=assignElem;var ajax=new Ajax;var color=
new Color;var console=new Console;var dom=new Dom;var object=new ObjectExtend;var datetime=new Datetime;var dictionary=new Dictionary;var polyfills=new Polyfills;var printObject=new Printer;var size=new Size;var storage=new Storage;var string=new StringExtend;var style=new Style;var url=new URL;var utils=new Utils;new WebSocketObject(assignElem);Object.defineProperty(assignElem,"ajax",{"enumerable":true,"configurable":false,"get":function(){return ajax}});Object.defineProperty(assignElem,"color",
{"enumerable":true,"configurable":false,"get":function(){return color}});Object.defineProperty(assignElem,"console",{"enumerable":true,"configurable":false,"get":function(){return console}});Object.defineProperty(assignElem,"dom",{"enumerable":true,"configurable":false,"get":function(){return dom}});Object.defineProperty(assignElem,"object",{"enumerable":true,"configurable":false,"get":function(){return object}});Object.defineProperty(assignElem,"datetime",{"enumerable":true,"configurable":false,
"get":function(){return datetime}});Object.defineProperty(assignElem,"dictionary",{"enumerable":true,"configurable":false,"get":function(){return dictionary}});Object.defineProperty(assignElem,"printer",{"enumerable":true,"configurable":false,"get":function(){return printObject}});Object.defineProperty(assignElem,"url",{"enumerable":true,"configurable":false,"get":function(){return url}});Object.defineProperty(assignElem,"size",{"enumerable":true,"configurable":false,"get":function(){return size}});
Object.defineProperty(assignElem,"storage",{"enumerable":true,"configurable":false,"get":function(){return storage}});Object.defineProperty(assignElem,"string",{"enumerable":true,"configurable":false,"get":function(){return string}});Object.defineProperty(assignElem,"style",{"enumerable":true,"configurable":false,"get":function(){return style}});Object.defineProperty(assignElem,"utils",{"enumerable":true,"configurable":false,"get":function(){return utils}});Object.defineProperty(assignElem,"registerPlugin",
{"enumerable":true,"configurable":false,"writable":false,"value":registerPlugin});Object.defineProperty(assignElem,"unregisterPlugin",{"enumerable":true,"configurable":false,"writable":false,"value":unregisterPlugin});if(GLOBAL_VAR.console.logDebug)if(window.console!=undefined&&window.console.log!=undefined)window.console.log(GLOBAL_VAR["class"]["name"]+" class was Initialized. - "+(new Date).toString())}catch(error){genericLog(error,arguments)}}function getFunctionName(args){try{var fName="";if(args!=
null&&args!=undefined&&args.callee!=undefined){var calleeName=args.callee&&args.callee.name?args.callee.name:"[anonymous]";var callerName=args.callee&&args.callee.caller&&args.callee.caller.name?args.callee.caller.name:"[anonymous]";fName=calleeName+" from "+callerName}return fName}catch(error){return"[unknown]"}}function genericLog(error){if(typeof window["console"]!="undefined"){function convertMessageToString(message){try{var retMsg=GLOBAL_VAR["class"]["privateREF#"]["datetime"].getFormattedDatetime(new Date)+
" - ";if(message!=undefined&&message!=null){if(message.Message!=undefined)retMsg+=" Message: "+message.Message;else if(message.message!=undefined)retMsg+=" Message: "+message.message;if(message.Stack!=undefined)retMsg+=" Stack: "+message.Stack;else if(message.stack!=undefined)retMsg+=" Stack: "+message.stack;if(message.Description!=undefined)retMsg+=" Description: "+message.Description;else if(message.description!=undefined)retMsg+=" Description: "+message.description;else if(typeof message=="string")retMsg+=
" "+message}}catch(error){if(typeof window.agentInfo!="undefined"&&agentInfo.supportHTML5)return message&&typeof message.message!="undefined"?message.message:message.toString();else;}return retMsg}if(window["console"].hasOwnProperty("error"))window.console.error(convertMessageToString(error));else if(window["console"].hasOwnProperty("warn"))window.console.warn(convertMessageToString(error));else if(window["console"].hasOwnProperty("log"))window.console.log(convertMessageToString(error))}}function registerPlugin(name,
plugin){if(name&&name!=""&&_plugins[name]==undefined){for(var n in GLOBAL_VAR["class"]["privateREF#"])if(n.toLowerCase()==name.toLowerCase())return false;_plugins[name]=new plugin;Object.defineProperty(GLOBAL_VAR["class"]["privateREF#"],name,{"enumerable":true,"configurable":false,"get":function(){return _plugins[name]}});return true}else return false}function unregisterPlugin(name,plugin){if(name&&name!=""&&_plugins[name]!=undefined){delete _plugins[name];delete GLOBAL_VAR["class"]["privateREF#"][name];
return true}else return false}function Ajax(){var _className=getFunctionName(arguments);var _headers={};var _responseTypes=Object.freeze({"BLANK":"","TEXT":"text","ARRAYBUFFER":"arraybuffer","BLOB":"blob","DOCUMENT":"document","JSON":"json","MSSTREAM":"ms-stream"});var _HTTPStatusCodeDescription=Object.freeze({400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",
409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",419:"Page Expired",420:"Method Failure",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Reserved for WebDAV",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",430:"Request Header Fields Too Large",431:"Request Header Fields Too Large",
440:"Login Time-out",444:"No Response",449:"Retry With",450:"Blocked by Windows Parental Controls",451:"Unavailable For Legal Reasons",494:"Request header too large",495:"SSL Certificate Error",496:"SSL Certificate Required",497:"HTTP Request Sent to HTTPS Port",498:"Invalid Token",499:"Client Closed Request",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",
508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required",520:"Web Server Returned an Unknown Error",521:"Web Server Is Down",522:"Connection Timed Out",523:"Origin Is Unreachable",524:"A Timeout Occurred",525:"SSL Handshake Failed",526:"Invalid SSL Certificate",527:"Railgun Error",561:"Unauthorized"});var _default={"async":true,"type":_responseTypes.BLANK,"timeout":3E4,"credentials":false};var _queues={};var states={"READY":0,"SETUP":1,"SENT":2,"PROCESS":3,
"COMPLETED":4};var _rePP=RegExp(/\?|&/);var _normalizeResponse=agentInfo.isMSIE&&agentInfo.msieVersion<12;function addHeaderValue(header,value){_headers[header]=value}function removeHeaderValue(header){delete _headers[header]}function shiftQueue(qname){if(qname&&_queues[qname]){_queues[qname].shift();setTimeout(execXMLHttpRequest,1,qname)}}function normalizeResponse(callback){if(callback)return function(response,status,xmlhttp){try{if(typeof response!=="object")callback(JSON.parse(response),status,
xmlhttp);else callback(response,status,xmlhttp)}catch(error){if(xmlhttp.error)xmlhttp.error(error.message,xmlhttp)}};else return undefined}function xmlHttpRequest(method,jData){var xmlhttp=new XMLHttpRequest;var responseType="";var async=typeof jData.async!="undefined"?jData.async:_default.async;if(async!==false)responseType=(jData.dataType||jData.type||jData.responseType||_default.type).toLowerCase();var qname=typeof jData.queueName!="undefined"?jData.queueName:null;xmlhttp.withCredentials=typeof jData.withCredentials!=
"undefined"?jData.withCredentials:_default.credentials;var url=jData.url;xmlhttp.success=_normalizeResponse&&responseType===_responseTypes.JSON?normalizeResponse(jData.success):jData.success;xmlhttp.error=jData.error;xmlhttp.abort=jData.abort;xmlhttp.readystatechange=jData.readystatechange;xmlhttp.onreadystatechange=function(e){var evt=e.target;if(evt.readyState===states.COMPLETED)if(evt.status===200){shiftQueue(evt.queuename);clearTimeout(xmlhttp.timeoutId);delete xmlhttp.timeoutId;if(!evt.aborted)if(xmlhttp.success)xmlhttp.success(evt.response,
evt.status,xmlhttp)}else{shiftQueue(evt.queuename);clearTimeout(xmlhttp.timeoutId);delete xmlhttp.timeoutId;var err={};try{err.message=evt.response?evt.response.error.message:evt.responseText}catch(error){}err.message=err.message||_HTTPStatusCodeDescription[evt.status]||"Unknown error";if(!evt.aborted&&xmlhttp.error)xmlhttp.error(err,evt.status,xmlhttp);else if(evt.aborted)if(xmlhttp.abort)xmlhttp.abort(err,evt.status,xmlhttp);else if(xmlhttp.error)xmlhttp.error(err,evt.status,xmlhttp)}if(xmlhttp.readystatechange)xmlhttp.readystatechange(evt.readyState,
evt.status,xmlhttp)};xmlhttp.params={"async":async,"method":method,"url":url,"contentType":jData.contentType,"data":jData.data,"timeout":typeof jData.timeout!="undefined"?jData.timeout:_default.timeout,"responseType":responseType,"noHeaders":jData.noHeaders,"beforeSend":jData.beforeSend};try{if(qname){if(!_queues[qname])_queues[qname]=[];xmlhttp.queuename=qname;_queues[qname].push({"xmlhttp":xmlhttp});execXMLHttpRequest(qname)}else executeXMLHttpRequest(xmlhttp)}catch(error){if(jData.error)jData.error(error,
-1,xmlhttp);return xmlhttp}return xmlhttp}function execXMLHttpRequest(qname){if(_queues[qname]&&_queues[qname].length>0){var xmlhttp=_queues[qname][0].xmlhttp;if(xmlhttp.readyState===states.READY)executeXMLHttpRequest(xmlhttp)}}function executeXMLHttpRequest(xmlhttp){var params=xmlhttp.params;xmlhttp.open(params.method,params.url,params.async);if(params.async){xmlhttp.responseType=params.responseType;if(params.timeout>0){xmlhttp.timeout=params.timeout;xmlhttp.timeoutId=setTimeout(function(){if(!xmlhttp.aborted){xmlhttp.aborted=
true;if(xmlhttp.abort)xmlhttp.abort()}},params.timeout);params.timeout=null}}var data=typeof params.data!="undefined"?params.data:null;if(params.method==="POST"){var contentType=null;if(params.contentType)contentType=params.contentType;else if(data!==null&&!(data instanceof FormData))if(GLOBAL_VAR["class"]["privateREF#"].object.getDataTypeOf(data)=="json")contentType="application/json";else contentType="application/x-www-form-urlencoded; charset=UTF-8";if(contentType!=null){xmlhttp.setRequestHeader("Content-Type",
contentType);if(contentType=="application/json"&&data!=null&&typeof data=="object")data=JSON.stringify(data)}}if(params.noHeaders!==true)for(var header in _headers)xmlhttp.setRequestHeader(header,_headers[header]);if(params.beforeSend&&params.beforeSend instanceof Function)params.beforeSend(xmlhttp);if(data!=null)xmlhttp.send(data);else xmlhttp.send()}function jsonP(jData){var script=document.createElement("script");script.async=true;script.defer=true;script.type="text/javascript";if(jData.charset)script.charset=
jData.charset;script.onload=function(e){if(jData.success)jData.success(e)};script.error=jData.error}function get(jData){return xmlHttpRequest("GET",jData)}function post(jData){return xmlHttpRequest("POST",jData)}function releaseQueue(queueName){if(_queues[queueName]&&_queues[queueName].length>0)_queues[queueName].forEach(function(elem){elem.xmlhttp.aborted=true;if(elem.xmlhttp.abort)elem.xmlhttp.abort()})}Object.defineProperty(this,"addHeaderValue",{"enumerable":true,"configurable":false,"writable":false,
"value":addHeaderValue});Object.defineProperty(this,"removeHeaderValue",{"enumerable":true,"configurable":false,"writable":false,"value":removeHeaderValue});Object.defineProperty(this,"jsonP",{"enumerable":true,"configurable":false,"writable":false,"value":jsonP});Object.defineProperty(this,"get",{"enumerable":true,"configurable":false,"writable":false,"value":get});Object.defineProperty(this,"post",{"enumerable":true,"configurable":false,"writable":false,"value":post});Object.defineProperty(this,
"releaseQueue",{"enumerable":true,"configurable":false,"writable":false,"value":releaseQueue});Object.defineProperty(this,"queueLength",{"enumerable":true,"configurable":false,"writable":false,"value":function(queueName){return _queues[queueName]?_queues[queueName].length:0}});Object.defineProperty(this,"responseType",{"enumerable":true,"configurable":false,"get":function(){return _responseTypes}});Object.defineProperty(this,"httpStatusCodeDescription",{"enumerable":true,"configurable":false,"get":function(){return _HTTPStatusCodeDescription}});
if(GLOBAL_VAR.console.logDebug)if(window.console!=undefined&&window.console.log!=undefined)window.console.log("Initializing "+_className+" class. - "+(new Date).toString());return this}function Color(){var _className=getFunctionName(arguments);var COLOR_LIGHT_BOTTOMLIMIT=144;function getRGBStruct(r,g,b,a){var aux=GLOBAL_VAR["class"]["privateREF#"]["string"].sprintf('{ "r": %s, "g": %s, "b": %s, "a": %s }',Math.round(r||0),Math.round(g||0),Math.round(b||0),a||1);return JSON.parse(aux)}function toRGB(color){if(typeof color==
"object"&&typeof color.r!="undefined"&&typeof color.g!="undefined"&&color.b!="undefined"){if(typeof color.a=="undefined")color.a=1;return color}var rgba=getRGBStruct();if(/^#[A-Fa-f0-9]{3}$/.test(color)){rgba.r=parseInt(color.substr(1,1),16);rgba.g=parseInt(color.substr(2,1),16);rgba.b=parseInt(color.substr(3,1),16)}else if(/^#[A-Fa-f0-9]{6}$/.test(color)){rgba.r=parseInt(color.substr(1,2),16);rgba.g=parseInt(color.substr(3,2),16);rgba.b=parseInt(color.substr(5,2),16)}else{var res=/rgba?\((\d+), ?(\d+), ?(\d+)(, ?(\.?\d+))?\)/.exec(color);
if(res!=null){rgba.r=parseInt(res[1],10);rgba.g=parseInt(res[2],10);rgba.b=parseInt(res[3],10);if(res.length==6)rgba.a=parseFloat(res[5])}}if(isNaN(rgba.a))rgba.a=1;return rgba}function averageColor(col1,col2){var RGB1=toRGB(col1);var RGB2=toRGB(col2);var rgba=getRGBStruct((RGB1.r+RGB2.r)/2,(RGB1.g+RGB2.g)/2,(RGB1.b+RGB2.b)/2,(RGB1.a+RGB2.a)/2);return toHexColor(rgba)}function toHexColor(){var toHex=function(n){return("0"+n.toString(16)).substr(-2)};if(arguments[0]instanceof Object){var c=arguments[0];
return"#"+toHex(c.r)+toHex(c.g)+toHex(c.b)}else if(arguments.length>2)return"#"+toHex(arguments[0])+toHex(arguments[1])+toHex(arguments[2]);else if(arguments.length===1){var c=toRGB(arguments[0]);return"#"+toHex(c.r)+toHex(c.g)+toHex(c.b)}return"#000"}function shift(color,shiftValue){var rgb=toRGB(color);if(shiftValue==1)return{"r":rgb.g,"g":rgb.b,"b":rgb.r};else return{"r":rgb.b,"g":rgb.r,"b":rgb.g}}function combine(mode,col1,col2){var RGB1=toRGB(col1);var RGB2=toRGB(col2);var rgba=getRGBStruct((RGB1.r+
RGB2.r)%256,(RGB1.g+RGB2.g)%256,(RGB1.b+RGB2.b)%256,(RGB1.a+RGB2.a)/2);return toHexColor(rgba)}function getTextColor(color){var rgb=toRGB(color);var avg=(rgb.r+rgb.g+rgb.b)/3;return avg>COLOR_LIGHT_BOTTOMLIMIT||Math.max(rgb.r,Math.max(rgb.g*1.8,rgb.b))>COLOR_LIGHT_BOTTOMLIMIT&&avg>COLOR_LIGHT_BOTTOMLIMIT?"#000000":"#fcfcfc"}function isLightColor(color){var rgb=toRGB(color);helper.console.log(JSON.stringify(rgb));return(rgb.r+rgb.g|+rgb.b)/3>COLOR_LIGHT_BOTTOMLIMIT}Object.defineProperty(this,"toRGB",
{"enumerable":true,"configurable":false,"writable":false,"value":toRGB});Object.defineProperty(this,"toHexColor",{"enumerable":true,"configurable":false,"writable":false,"value":toHexColor});Object.defineProperty(this,"averageColor",{"enumerable":true,"configurable":false,"writable":false,"value":averageColor});Object.defineProperty(this,"shift",{"enumerable":true,"configurable":false,"writable":false,"value":shift});Object.defineProperty(this,"combine",{"enumerable":true,"configurable":false,"writable":false,
"value":combine});Object.defineProperty(this,"getTextColor",{"enumerable":true,"configurable":false,"writable":false,"value":getTextColor});Object.defineProperty(this,"isLightColor",{"enumerable":true,"configurable":false,"writable":false,"value":isLightColor});if(GLOBAL_VAR.console.logDebug)if(window.console!=undefined&&window.console.log!=undefined)window.console.log("Initializing "+_className+" class. - "+(new Date).toString());return this}function Console(){var LOCAL_VAR={"class":{"name":"console"},
"console":{"log":null,"error":null,"info":null,"warn":null,"exception":null,"fatal":null},"msgLogAvailable":null,"msgLogger":null,"logConsole":null,"preserveLog":{"log":[],"available":false},"externalLog":false};try{function initialize(){try{if(GLOBAL_VAR.console.logDebug)if(window.console!=undefined&&window.console.log!=undefined)window.console.log("Initializing "+LOCAL_VAR["class"]["name"]+" class. - "+(new Date).toString());if(typeof Thinfinity!=="undefined"&&typeof Thinfinity.LogConsole!="undefined")LOCAL_VAR.logConsole=
Thinfinity.LogConsole;if(typeof MsgLogger!="undefined"){LOCAL_VAR.msgLogAvailable=true;LOCAL_VAR.msgLogger=new MsgLogger}else LOCAL_VAR.msgLogAvailable=false;for(var collection in LOCAL_VAR.console)LOCAL_VAR.console[collection]=window.console[collection]!==undefined?collection:LOCAL_VAR.console.log!=null?LOCAL_VAR.console.log:"alert";if(GLOBAL_VAR.console.logDebug)if(window.console!=undefined&&window.console.log!=undefined)window.console.log(LOCAL_VAR["class"]["name"]+" class was Initialized. - "+
(new Date).toString())}catch(error){genericLog(error,arguments)}}function getISOTime(){var now=new Date;if(typeof now.toISOString!="undefined"){var ret=now.toISOString();ret=ret.substr(ret.indexOf("T")+1,12);return ret}else return("0"+now.getUTCHours()).substr(-2)+":"+("0"+now.getUTCMinutes()).substr(-2)+":"+("0"+now.getUTCSeconds()).substr(-2)+"."+now.getUTCMilliseconds()}function remoteLog(value){LOCAL_VAR.externalLog=value}function log(message,args,collection,exceptionStack){try{var isLocal=arguments.length>=
5;var fnName=getFunctionName(args);if(fnName!="")fnName="Caller: "+fnName+" - ";var msg=getISOTime()+": ";if(message!=undefined&&message!=null){if(message.message!=undefined)msg+=" Message: "+message.message;else if(message.Message!=undefined)msg+=" Message: "+message.Message;if(message.stack!=undefined)msg+=" Stack: "+message.stack;else if(message.Stack!=undefined)msg+=" Stack: "+message.Stack;if(message.description!=undefined)msg+=" Description: "+message.description;else if(message.Description!=
undefined)msg+=" Description: "+message.Description;else if(typeof message=="string")msg+=" "+message}if(exceptionStack!=undefined&&exceptionStack!=null){if(exceptionStack.message!=undefined)msg+=" Message: "+exceptionStack.message;else if(exceptionStack.Message!=undefined)msg+=" Message: "+exceptionStack.Message;if(exceptionStack.stack!=undefined)msg+=" Stack: "+exceptionStack.stack;else if(exceptionStack.Stack!=undefined)msg+=" Stack: "+exceptionStack.Stack;if(exceptionStack.description!=undefined)msg+=
" Description: "+exceptionStack.description;else if(exceptionStack.Description!=undefined)msg+=" Description: "+exceptionStack.Description}if(LOCAL_VAR.console[collection]!="alert"){if(LOCAL_VAR["preserveLog"]["available"]==true)LOCAL_VAR["preserveLog"]["log"].push({"fName":fnName,"msg":msg,"collection":collection});window.console[LOCAL_VAR.console[collection]](fnName+msg)}else if(collection=="error"||collection=="exception"||collection=="fatal")alert(fnName+msg);if(LOCAL_VAR.logConsole)LOCAL_VAR.logConsole.send(collection,
fnName,msg,exceptionStack);if(!isLocal&&LOCAL_VAR.externalLog==true&&LOCAL_VAR.msgLogAvailable)switch(collection){case "error":case "exception":case "fatal":msgLogError(fnName+msg,collection);break;default:msgLogDebug(fnName+msg,collection);break}}catch(error){genericLog(error,arguments)}}function msgLogDebug(value,extraClass){try{var addISOTime=arguments.length>1&&arguments[1];if(addISOTime)value=getISOTime()+": "+value;if(LOCAL_VAR.msgLogAvailable)LOCAL_VAR.msgLogger.log(value,extraClass);else log(value,
null,"log",null,null)}catch(error){genericLog(error,arguments)}}function msgLogError(value,extraClass){try{var addISOTime=arguments.length>1&&arguments[1];if(addISOTime)value=getISOTime()+": "+value;if(LOCAL_VAR.msgLogAvailable)LOCAL_VAR.msgLogger.log("ERROR: "+value,extraClass);else{log(value,null,"error",null,null);return value}}catch(error){genericLog(error,arguments)}}function switchLogStatus(logsName,enabled){var response=true;try{logsName=logsName.toString().toLowerCase();if(logsName.indexOf("debug")!=
-1)GLOBAL_VAR["console"]["logDebug"]=enabled;if(logsName.indexOf("log")!=-1)GLOBAL_VAR["console"]["logDebug"]=enabled;if(logsName.indexOf("info")!=-1)GLOBAL_VAR["console"]["logInfo"]=enabled;if(logsName.indexOf("warning")!=-1)GLOBAL_VAR["console"]["logWarning"]=enabled;if(logsName.indexOf("warn")!=-1)GLOBAL_VAR["console"]["logWarning"]=enabled;if(logsName.indexOf("error")!=-1)GLOBAL_VAR["console"]["logError"]=enabled;if(logsName.indexOf("fatal")!=-1)GLOBAL_VAR["console"]["logFatal"]=enabled;if(logsName.indexOf("exception")!=
-1)GLOBAL_VAR["console"]["logException"]=enabled;if(logsName.indexOf("ex")!=-1)GLOBAL_VAR["console"]["logException"]=enabled}catch(error){response=false}return response}initialize();Object.defineProperty(this,"debug",{"enumerable":false,"configurable":false,"value":function(message,args){if(GLOBAL_VAR.console.logDebug)log(message,args,"log")}});Object.defineProperty(this,"log",{"enumerable":false,"configurable":false,"value":function(message,args){if(GLOBAL_VAR.console.logDebug)log(message,args,"log")}});
Object.defineProperty(this,"warning",{"enumerable":false,"configurable":false,"value":function(warn,args){if(GLOBAL_VAR.console.logWarning)log(warn,args,"warn")}});Object.defineProperty(this,"warn",{"enumerable":false,"configurable":false,"value":function(warn,args){if(GLOBAL_VAR.console.logWarning)log(warn,args,"warn")}});Object.defineProperty(this,"error",{"enumerable":false,"configurable":false,"value":function(message,exception,args){if(GLOBAL_VAR.console.logError)log(message,args,"error",exception)}});
Object.defineProperty(this,"fatal",{"enumerable":false,"configurable":false,"value":function(message,exception,args){if(GLOBAL_VAR.console.logFatal)log(message,args,"fatal",exception)}});Object.defineProperty(this,"exception",{"enumerable":false,"configurable":false,"value":function(message,exception,args){if(GLOBAL_VAR.console.logException)log(exception,args,"exception",exception)}});Object.defineProperty(this,"info",{"enumerable":false,"configurable":false,"value":function(info,args){if(GLOBAL_VAR.console.logInfo)log(info,
args,"info")}});Object.defineProperty(this,"msgDebug",{"enumerable":false,"configurable":false,"value":function(value){if(GLOBAL_VAR.console.logDebug)msgLogDebug(value)}});Object.defineProperty(this,"msgError",{"enumerable":false,"configurable":false,"value":function(value){if(GLOBAL_VAR.console.logError)msgLogDebug(value)}});genericLog=this.error;Object.defineProperty(this,"on",{"enumerable":false,"configurable":false,"value":function(logsName){switchLogStatus(logsName,true)}});Object.defineProperty(this,
"off",{"enumerable":false,"configurable":false,"value":function(logsName){switchLogStatus(logsName,false)}});Object.defineProperty(this,"remoteLog",{"enumerable":false,"configurable":false,"get":function(){return LOCAL_VAR.externalLog},"set":function(value){LOCAL_VAR.externalLog=value}});Object.defineProperty(this,"getLog",{"enumerable":true,"configurable":false,"value":function(){return LOCAL_VAR["preserveLog"]["log"]}});Object.defineProperty(this,"preserveLog",{"enumerable":true,"configurable":false,
"get":function(){return LOCAL_VAR["preserveLog"]["available"]},"set":function(value){return LOCAL_VAR["preserveLog"]["available"]=value}});return this}catch(error){genericLog(error,arguments)}}function Datetime(){var _className=getFunctionName(arguments);function getFormattedDatetime(datetime){return datetimeToString(datetime,"yyyy/mm/dd HH:MM:ss.f")}function getFormattedDate(datetime){return datetimeToString(datetime,"yyyy/mm/dd")}function getFormattedTime(datetime){return datetimeToString(datetime,
"HH:MM:ss")}function getDatetime(datetime,format){return datetimeToString(datetime,format)}function datetimeToString(datetime,format,utc){try{var dateFormat=function(){var token=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[FfoSZ]|"[^"]*"|'[^']*'/g,timezone=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,timezoneClip=/[^-+\dA-Z]/g,pad=function(val,len){val=String(val);len=len||2;while(val.length<len)val="0"+val;return val};
return function(date,mask,utc){var dF=dateFormat;if(arguments.length==1&&Object.prototype.toString.call(date)=="[object String]"&&!/\d/.test(date)){mask=date;date=undefined}if(!date instanceof Date)date=new Date;if(isNaN(date))throw SyntaxError("invalid date");mask=String(dF.masks[mask]||mask||dF.masks["default"]);if(mask.slice(0,4)=="UTC:"){mask=mask.slice(4);utc=true}var _=utc?"getUTC":"get",d=date[_+"Date"](),D=date[_+"Day"](),m=date[_+"Month"](),y=date[_+"FullYear"](),H=date[_+"Hours"](),M=date[_+
"Minutes"](),s=date[_+"Seconds"](),F=date[_+"Milliseconds"](),o=utc?0:date.getTimezoneOffset(),flags={d:d,dd:pad(d),ddd:dF.i18n.dayNames[D],dddd:dF.i18n.dayNames[D+7],m:m+1,mm:pad(m+1),mmm:dF.i18n.monthNames[m],mmmm:dF.i18n.monthNames[m+12],yy:String(y).slice(2),yyyy:y,h:H%12||12,hh:pad(H%12||12),H:H,HH:pad(H),M:M,MM:pad(M),s:s,ss:pad(s),f:pad(F,3),F:pad(F>99?Math.round(F/10):F),t:H<12?"a":"p",tt:H<12?"am":"pm",T:H<12?"A":"P",TT:H<12?"AM":"PM",Z:utc?"UTC":(String(date).match(timezone)||[""]).pop().replace(timezoneClip,
""),o:(o>0?"-":"+")+pad(Math.floor(Math.abs(o)/60)*100+Math.abs(o)%60,4),S:["th","st","nd","rd"][d%10>3?0:(d%100-d%10!=10)*d%10]};return mask.replace(token,function($0){return $0 in flags?flags[$0]:$0.slice(1,$0.length-1)})}}();dateFormat.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",
isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};dateFormat.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]};return dateFormat(datetime,format,utc)}catch(Error){return Error}}function zeropad(n){return String("00"+n).slice(-2)}
function completeTimeToString(datetime){try{var d=new Date;d.setTime(datetime);s=zeropad(d.getMonth()+1)+"/"+zeropad(d.getDate())+" "+d.getHours()+":"+zeropad(d.getMinutes());return s}catch(error){return error}}Object.defineProperty(this,"getFormattedDatetime",{"enumerable":true,"configurable":false,"writable":false,"value":getFormattedDatetime});Object.defineProperty(this,"getFormattedDate",{"enumerable":true,"configurable":false,"writable":false,"value":getFormattedDate});Object.defineProperty(this,
"getFormattedTime",{"enumerable":true,"configurable":false,"writable":false,"value":getFormattedTime});Object.defineProperty(this,"getDatetime",{"enumerable":true,"configurable":false,"writable":false,"value":getDatetime});if(GLOBAL_VAR.console.logDebug)if(window.console!=undefined&&window.console.log!=undefined)window.console.log("Initializing "+_className+" class. - "+(new Date).toString());return this}function Dictionary(){var _className=getFunctionName(arguments);var _defaultDictionaries=null;
var _defaultDictionariesIgnoreCase=null;var _ignoreCase=false;function defaultDictionaries(dictionaries){_defaultDictionaries=[];_defaultDictionariesIgnoreCase=[];if(dictionaries)for(var i=0;i<dictionaries.length;i++){var _dic={};for(var key in dictionaries[i])_dic[key.toLowerCase()]=dictionaries[i][key];_defaultDictionaries.push(dictionaries[i]);_defaultDictionariesIgnoreCase.push(_dic)}}function getValue(key,dictionaries){if(key){if(dictionaries)for(var i=0;i<dictionaries.length;i++)if(dictionaries[i])if(dictionaries[i].hasOwnProperty(key))return dictionaries[i][key];
else if(_ignoreCase)for(var _key in dictionaries[i])if(_key.toLowerCase()==key.toLowerCase())return dictionaries[i][_key];if(_defaultDictionaries)for(var i=0;i<_defaultDictionaries.length;i++)if(_defaultDictionaries[i].hasOwnProperty(key))return _defaultDictionaries[i][key];else if(_ignoreCase&&_defaultDictionariesIgnoreCase[i].hasOwnProperty(key.toLowerCase()))return _defaultDictionariesIgnoreCase[i][key.toLowerCase()];return""}else return""}Object.defineProperty(this,"items",{"enumerable":true,
"configurable":false,"set":function(dictionaries){defaultDictionaries(dictionaries)}});Object.defineProperty(this,"ignoreCase",{"enumerable":true,"configurable":false,"set":function(value){_ignoreCase=value}});Object.defineProperty(this,"getValue",{"enumerable":true,"configurable":false,"writable":false,"value":getValue});if(GLOBAL_VAR.console.logDebug)if(window.console!=undefined&&window.console.log!=undefined)window.console.log("Initializing "+_className+" class. - "+(new Date).toString());return this}
function Dom(){var _className=getFunctionName(arguments);var _useOn=document.addEventListener==undefined;var _domStateEvents={"order":["loading","interactive","complete"],"lastState":-1,"handlers":{"loading":[],"interactive":[],"complete":[]}};var _shortcutTrim=null;function byId(id){return document.getElementById(id)}function setContent(elem,content){switch(elem.nodeName){case "DIV":case "SPAN":case "P":case "LABEL":case "LI":case "A":case "OPTION":case "BUTTON":elem.innerHTML=content;break;case "INPUT":case "CHECKBOX":case "RADIO":elem.value=
content;break;default:elem.nodeName=="OPTION"||typeof elem.value=="undefined"?elem.innerHTML=content:elem.value=content;break}}function createJsonElement(json){if(_shortcutTrim==null)_shortcutTrim=GLOBAL_VAR["class"]["privateREF#"].string.trim;var elem=document.createElement(json["type"]);if(json["attributes"])for(var attr in json["attributes"])if(["innerHTML","innerText"].indexOf(attr)==-1&&(attr=="class"||typeof elem[attr]!="undefined"||json.type==="label"&&attr==="for"))if(attr==="style"){var s=
json["attributes"][attr].replace(/ /g,"").split(";");s.forEach(function(item){var kvp=item.split(":");elem.style[kvp[0]]=kvp[1]})}else elem.setAttribute(attr,json["attributes"][attr]);else elem[attr]=json["attributes"][attr];var content=json["content"];if(typeof content!=="undefined"){var regExp=new RegExp("HTML{1}[a-zA-Z]*Element{1}");var type=GLOBAL_VAR["class"]["privateREF#"].object.getTypeOf(content);if(content instanceof HTMLElement||regExp.exec(type)!=null&&regExp.exec(type).length>0)elem.appendChild(content);
else setContent(elem,content)}var events=json["events"];for(var eventName in events){var _handler=typeof events[eventName]==="function"?events[eventName]:events[eventName]&&typeof events[eventName].handler==="function"?events[eventName].handler:null;var _evtAttr=typeof events[eventName]==="object"&&events[eventName]&&events[eventName].options?events[eventName].options:false;addEvent(elem,eventName,_handler,_evtAttr)}if(json["style"])GLOBAL_VAR["class"]["privateREF#"]["style"].add(elem,json["style"]);
return elem}function appendJsonElement(json){var elem=createJsonElement(json);if(json["parentElement"])json["parentElement"].appendChild(elem);return elem}function prependJsonElement(json){var elem=createJsonElement(json);if(json["parentElement"])json["parentElement"].insertBefore(elem,json["parentElement"].firstChild);return elem}function createElement(type,attributesCollection,content,events){if(GLOBAL_VAR["class"]["privateREF#"]["object"].getTypeOf(type)=="object")return createJsonElement(type);
else{var elem=document.createElement(type);if(attributesCollection)for(var a in attributesCollection)elem.setAttribute(a,attributesCollection[a]);if(content)if(GLOBAL_VAR["class"]["privateREF#"]["object"].getTypeOf(content)=="object")elem.appendChild(content);else elem.innerHTML=content;if(events)for(var eventName in events)addEvent(elem,eventName,events[eventName]);return elem}}function appendElement(parentElement,type,attributesCollection,content,events){if((typeof parentElement=="undefined"||typeof parentElement.nodeType==
"undefined")&&GLOBAL_VAR["class"]["privateREF#"]["object"].getTypeOf(parentElement)=="object")return appendJsonElement(parentElement);else{var elem=createElement(type,attributesCollection,content,events);parentElement.appendChild(elem);return elem}}function prependElement(parentElement,type,attributesCollection,content,events){if((typeof parentElement=="undefined"||typeof parentElement.nodeType=="undefined")&&GLOBAL_VAR["class"]["privateREF#"]["object"].getTypeOf(parentElement)=="object")return prependJsonElement(parentElement);
else{var elem=createElement(type,attributesCollection,content,events);parentElement.insertBefore(elem,parentElement.firstChild);return elem}}function addEvent(element,events,delegHandler,evtAttr){if(element){if(!(events instanceof Array))events=events.split(",");events=normalizeEventsName(events);var _addEvent=function(elem){if(typeof elem==="string")elem=document.getElementById(elem);if(elem)events.forEach(function(eventName){if(elem.addEventListener!=undefined)elem.addEventListener(eventName,delegHandler,
evtAttr||false);else elem.attachEvent(eventName,delegHandler,evtAttr||false)})};if(element instanceof Array||element instanceof NodeList)for(var i=0,t=element.length;i<t;i++)_addEvent(element[i]);else _addEvent(element)}}function removeEvent(element,events,delegHandler,evtAttr){if(element){if(!(events instanceof Array))events=[events];events=normalizeEventsName(events);var _removeEvent=function(elem){if(typeof elem==="string")elem=document.getElementById(elem);if(elem)events.forEach(function(eventName){if(elem.removeEventListener!=
undefined)elem.removeEventListener(eventName,delegHandler,evtAttr||false);else elem.detachEvent(eventName,delegHandler,evtAttr||false)})};if(element instanceof Array||element instanceof NodeList)for(var i=0,t=element.length;i<t;i++)_removeEvent(element[i]);else _removeEvent(element)}}function triggerEvent(element,event,args){var customEvent=null;event=normalizeEventName(event);if(window.CustomEvent)try{element.dispatchEvent(new window.CustomEvent(event,args))}catch(e){GLOBAL_VAR["class"]["privateREF#"]["console"].error(e.message,
e,arguments)}else{customEvent=document.createEventObject();customEvent.eventType=event;element.fireEvent(event,customEvent)}customEvent=null;return element}function normalizeEventsName(events){for(var i=0,t=events.length;i<t;i++)events[i]=normalizeEventName(events[i]);return events}function normalizeEventName(event){event=event.trim();var hasOn=event.substr(0,2)=="on";if(_useOn&&!hasOn)event="on"+event;else if(hasOn&&!_useOn)event=event.substring(2,event.length);hasOn=null;return event}window.document.onreadystatechange=
function(){var rn=document.readyState;var rs=convertStateToInt(rn);if(_domStateEvents.lastState<rs)for(var i=0;i<rs;i++)fireStateEvent(_domStateEvents.order[i]);_domStateEvents.lastState=rs;fireStateEvent(rn)};function convertStateToInt(rs){return _domStateEvents.order.indexOf(rs)}function documentLoading(callback){var en="loading";_domStateEvents.handlers[en].push(callback);checkDocumenEvent(en)}function documentInteractive(callback){var en="interactive";_domStateEvents.handlers[en].push(callback);
checkDocumenEvent(en)}function documentComplete(callback){var en="complete";_domStateEvents.handlers[en].push(callback);checkDocumenEvent(en)}function checkDocumenEvent(rs){if(convertStateToInt(rs)<=_domStateEvents.lastState)fireStateEvent(rs)}function fireStateEvent(name){if(_domStateEvents.handlers[name].length>0)while(_domStateEvents.handlers[name].length>0)try{_domStateEvents.handlers[name].shift()({"current":document.readyState,"eventName":name})}catch(error){if(GLOBAL_VAR.console.logError)console.log(error.message+
"\r\n"+error.stack)}}function loadScript(url,success,error){var script=document.createElement("script");script.type="text/javascript";script.onload=success;script.onerror=error;script.src=url;document.head.appendChild(script)}function loadFile(url){return new Promise(function(resolve,reject){var script=document.createElement("script");script.type="text/javascript";script.onload=resolve;script.onerror=reject;script.src=url;document.head.appendChild(script)})}function fillElements(elems){if(elems){var elem=
null,name=null;for(var kvp in elems){name=elems[kvp];if(!name||name==="")name=kvp;elem=document.getElementById(name);if(!elem){elem=document.getElementsByClassName(name);if(elem.length>0)elem=elem[0]}elems[kvp]=elem}}}function decodeText(value){var _auxTextArea=document.createElement("textarea");_auxTextArea.innerHTML=value;return _auxTextArea.value}Object.defineProperty(this,"byId",{"enumerable":false,"configurable":false,"writable":false,"value":byId});Object.defineProperty(this,"createElement",
{"enumerable":false,"configurable":false,"writable":false,"value":createElement});Object.defineProperty(this,"appendElement",{"enumerable":false,"configurable":false,"writable":false,"value":appendElement});Object.defineProperty(this,"prependElement",{"enumerable":false,"configurable":false,"writable":false,"value":prependElement});Object.defineProperty(this,"addEvent",{"enumerable":false,"configurable":false,"writable":false,"value":addEvent});Object.defineProperty(this,"removeEvent",{"enumerable":false,
"configurable":false,"writable":false,"value":removeEvent});Object.defineProperty(this,"triggerEvent",{"enumerable":false,"configurable":false,"writable":false,"value":triggerEvent});Object.defineProperty(this,"createJsonElement",{"enumerable":false,"configurable":false,"writable":false,"value":createJsonElement});Object.defineProperty(this,"appendJsonElement",{"enumerable":false,"configurable":false,"writable":false,"value":appendJsonElement});Object.defineProperty(this,"prependJsonElement",{"enumerable":false,
"configurable":false,"writable":false,"value":prependJsonElement});Object.defineProperty(this,"loading",{"enumerable":false,"configurable":false,"writable":false,"value":function(callback){return documentLoading(callback)}});Object.defineProperty(this,"interactive",{"enumerable":false,"configurable":false,"writable":false,"value":function(callback){return documentInteractive(callback)}});Object.defineProperty(this,"ready",{"enumerable":false,"configurable":false,"writable":false,"value":function(callback){return documentComplete(callback)}});
Object.defineProperty(this,"complete",{"enumerable":false,"configurable":false,"writable":false,"value":function(callback){return documentComplete(callback)}});Object.defineProperty(this,"loadScript",{"enumerable":false,"configurable":false,"writable":false,"value":function(url,success,error){return loadScript(url,success,error)}});Object.defineProperty(this,"loadFile",{"enumerable":false,"configurable":false,"writable":false,"value":function(url){return loadFile(url)}});Object.defineProperty(this,
"fillElements",{"enumerable":false,"configurable":false,"writable":false,"value":function(elems){return fillElements(elems)}});Object.defineProperty(this,"decodeText",{"enumerable":false,"configurable":false,"writable":false,"value":function(value){return decodeText(value)}});if(GLOBAL_VAR.console.logDebug)if(window.console!=undefined&&window.console.log!=undefined)window.console.log("Initializing "+_className+" class. - "+(new Date).toString());return this}function ObjectExtend(){var _className=
getFunctionName(arguments);var _REEvalFnRetrieve=/function/ig;function EnumeratorClass(){var _self=this;var _keys=[];var _ikeys={};var _values={};function initialize(values){if(typeof values[0]=="string")for(var v in values)addEnumValue(values[v],parseInt(v));else{var jsonDef=values[0];for(var key in jsonDef)addEnumValue(key,jsonDef[key]);jsonDef=null}}function addEnumValue(key,value){_keys.push(key);_ikeys[value]=key;if(_self[key]==undefined){_values[key]=value;Object.defineProperty(_self,key,{"enumerable":true,
"configurable":false,"get":function(){return _values[key]}})}}function hasValue(value){return Object.values(_self).indexOf(value)!=-1}function getKey(value){return _ikeys[value]}function toArray(){return _keys}if(arguments&&arguments.length>0)initialize(arguments[0]);else throw new Error("Cannot define new enum without arguments");Object.defineProperty(_self,"hasValue",{"enumerable":false,"configurable":false,"writable":false,"value":hasValue});Object.defineProperty(_self,"getKey",{"enumerable":false,
"configurable":false,"writable":false,"value":getKey});Object.defineProperty(_self,"toArray",{"enumerable":false,"configurable":false,"writable":false,"value":toArray});return Object.freeze?Object.freeze(_self):_self}function convertTo(value,type){try{type=type.toLowerCase();switch(type){case "number":case "float":value=parseFloat(value);break;case "integer":case "int":value=parseInt(value,10);break;case "datetime":case "date":case "time":value=new Date(value);break;case "json":value=JSON.parse(value);
break;case "string":value=value.toString();break;case "bool":case "boolean":if(typeof value=="string"&&["0","1"].indexOf(value)!=-1||typeof value=="number"&&value>=0&&value<=1)value=toBoolean(value);break;case "array":value=toArray(value);break;case "object":break;case "hexadecimal":value=toHexadecimal(value);break}}catch(error){helper.console.error(error.message,error,arguments)}return value}function isObject(elem){if(elem instanceof Object)if(elem instanceof Function||elem instanceof Array||elem instanceof
Date||elem instanceof String)return false;else return true;else return false}function isArray(array){try{if(array!=null&&array!=undefined&&array.hasOwnProperty("length")&&array instanceof Array)return true;else return Array.isArray(array)}catch(error){return false}}function isBoolean(value){if(value!=null)if(value==1||value==0)return true;else if(value.toString().toUpperCase()=="TRUE"||value.toString().toUpperCase()=="FALSE")return true;else if(typeof value=="boolean")return true;else return false;
else return false}function isNumber(n){if(n==undefined||n==null)return false;else return!isNaN(parseFloat(n))&&isFinite(n)&&n-parseFloat(n)+1>=0}var _HTMLElements=["HTMLDocument","HTMLBodyElement","HTMLAnchorElement","HTMLDivElement","HTMLIFrameElement","HTMLFrameElement","HTMLElement","HTMLImageElement","HTMLInputElement","HTMLFormElement","HTMLHeadElement","HTMLTableElement","HTMLCanvasElement","HTMLScriptElement","HTMLParagraphElement","HTMLSpanElement","HTMLStyleElement","HTMLHtmlElement","HTMLParamElement",
"HTMLPhraseElement","HTMLSelectElement","HTMLTableCaptionElement","HTMLTableCellElement","HTMLTableColElement","HTMLTableDataCellElement","HTMLTableHeaderCellElement","HTMLTableRowElement","HTMLTableSectionElement","HTMLTextAreaElement","HTMLAppletElement","HTMLAreaElement","HTMLAreasCollection","HTMLAudioElement","HTMLBaseElement","HTMLBaseFontElement","HTMLBGSoundElement","HTMLBlockElement","HTMLBRElement","HTMLButtonElement","HTMLCollection","HTMLDataListElement","HTMLDDElement","HTMLDirectoryElement",
"HTMLDListElement","HTMLDTElement","HTMLEmbedElement","HTMLFieldSetElement","HTMLFontElement","HTMLFrameSetElement","HTMLHeadingElement","HTMLHRElement","HTMLIsIndexElement","HTMLLabelElement","HTMLLegendElement","HTMLLIElement","HTMLLinkElement","HTMLMapElement","HTMLMarqueeElement","HTMLMediaElement","HTMLMenuElement","HTMLMetaElement","HTMLModElement","HTMLNextIdElement","HTMLObjectElement","HTMLOListElement","HTMLOptGroupElement","HTMLOptionElement","HTMLPreElement","HTMLProgressElement","HTMLQuoteElement",
"HTMLSourceElement","HTMLTitleElement","HTMLTrackElement","HTMLUListElement","HTMLUnknownElement","HTMLVideoElement"];var _nodeTypes={1:"ELEMENT_NODE",2:"ATTRIBUTE_NODE",3:"TEXT_NODE",4:"CDATA_SECTION_NODE",5:"ENTITY_REFERENCE_NODE",6:"ENTITY_NODE",7:"PROCESSING_INSTRUCTION_NODE",8:"COMMENT_NODE",9:"DOCUMENT_NODE",10:"DOCUMENT_TYPE_NODE",11:"DOCUMENT_FRAGMENT_NODE",12:"NOTATION_NODE"};function getTypeOfHTMLElement(elem){if(elem&&elem.nodeType&&elem.nodeName){var elemType=null;for(var i=0,t=_HTMLElements.length;i<
t;i++){elemType=_HTMLElements[i];if(window[elemType]&&elem instanceof window[elemType])return elemType}return getTypeOfNode(elem)||"HTMLElement"}else if(isWindowElem(elem))return"window";else return null}function getTypeOfNode(elem){if(elem&&elem.nodeType){for(var k in Node)if(elem.nodeType===Node[k])return _nodeTypes[elem.nodeType];return null}else return null}function isWindowElem(elem){if(elem){var cname=elem.constructor?elem.constructor.toString().toLowerCase():"";if(cname.indexOf("window")!=
-1)return true;else return elem.location&&elem.navigator&&elem.document&&getTypeOfHTMLElement(elem.document)==="HTMLDocument"}return false}function getTypeOf(elem){var t=null;try{if(elem!==null&&elem!==undefined)if(elem instanceof Function)return"function";else if(typeof elem=="object"){if(elem instanceof Date)return"date";else if(isArray(elem))return"array";else if(elem instanceof HTMLElement||elem.nodeType&&elem.nodeName)return"HTMLElement";else if(isWindowElem(elem))return"window";if(t!=null)return t;
else return elem.constructor&&elem.constructor.name?elem.constructor.name.toLowerCase():"object"}else if(typeof elem=="number"||isNumber(elem))return"number";else return(typeof elem).toString();else return elem===null?"null":"undefined"}catch(Error){return false}}function getDataTypeOf(value){var type=getTypeOf(value);function isJSON(value){try{if(value){if(typeof value=="string")JSON.parse(value);else if(typeof value=="object")JSON.stringify(value);return true}else return false}catch(error){return false}}
switch(type){case "function":case "array":case "datetime":break;case "number":type=value%1===0?"integer":"float";break;case "boolean":break;case "object":type=isJSON(value)==true?"json":type;break;case "string":function isHexadecimal(value){var pattern=/[A-Fa-f0-9]*/;var reg=new RegExp(pattern);var ret=reg.exec(value)[0].toString();if(ret.length==value.toString().length)return true;else return false}type=isHexadecimal(value)==true?"hexadecimal":type;if(type!="hexadecimal"){type=isBoolean(value)==
true?"boolean":type;if(type!="boolean")if(value.substr(0,1)=="{"&&value.substr(value.length-1,1)=="}")type=isJSON(value)==true?"json":type}break;case "HTMLCollection":case "HTMLElement":case "window":break;default:type=value==null?"null":typeof value;break}return type}function toBoolean(value){if(isNumber(value))if(value==1)return true;else return false;else if(typeof value=="boolean")return value;else if(typeof value=="string")if(value.toUpperCase().indexOf("TRUE")!=-1)return true;else return false;
else return false}function toArray(value){if(value==null||value=="")return[];else if(value instanceof Array)return value;else if(value instanceof String)if(value.indexOf(";")!=-1)return value.split(";");else return value.split(",");else return[value]}function toHexadecimal(value){if(value!=undefined&&value!=null){var hex="";for(var i=0;i<value.length;i++)hex+=""+value.charCodeAt(i).toString(16);return hex}else return null}function checkPath(obj,path){if(path.length==0&&obj!=null&&obj!=undefined)return true;
else if(obj!=null&&obj!=undefined&&obj[path[0]]!=null&&obj[path[0]]!=undefined){var remain=path.splice(0,1);return checkPath(obj[remain],path)}else return false}function existsPath(obj,path,separatorOpt){if(obj!=undefined&&path!=null&&path!=""){var finalPath=path.replace(/\[/g,".").replace(/\]/g,"");if(finalPath.substr(0,1)==".")finalPath=finalPath.substr(1,finalPath.length);if(finalPath.substr(finalPath.length-1,1)==".")finalPath=finalPath.substr(0,finalPath.length-1);var pathArray=finalPath.split(".");
return checkPath(obj,pathArray)}else return false}function getObjectValue(obj,path){try{if(path.length==0)return obj;else if(obj!=null&&obj!=undefined){var remain=path.splice(0,1);return getObjectValue(obj[remain],path)}else return null}catch(error){return null}}function generatePath(obj){var response=[];function _generatePath(obj,path){var fPath=path!=""?path+".":"";for(var attrib in obj)switch(getTypeOf(obj[attrib])){case "object":response.push(fPath+attrib);_generatePath(obj[attrib],fPath+attrib);
break;case "array":response.push(fPath+attrib);for(var i=0;i<obj[attrib].length;i++)switch(getTypeOf(obj[attrib][i])){case "object":case "array":_generatePath(obj[attrib][i],fPath+attrib+"["+i.toString()+"]");break;default:response.push(fPath+attrib+"["+i.toString()+"]");break}break;default:response.push(fPath+attrib);break}}_generatePath(obj,"");return response}function checkPathValue(obj,path,value,separatorOpt){if(obj!=undefined&&path!=null&&path!=""){var finalPath=path.replace(/\[/g,".").replace(/\]/g,
"");if(finalPath.substr(0,1)==".")finalPath=finalPath.substr(1,finalPath.length);if(finalPath.substr(finalPath.length-1,1)==".")finalPath=finalPath.substr(0,finalPath.length-1);var pathArray=finalPath.split(".");var validPaths=generatePath(obj);return validPaths.indexOf(path)!=-1&&getObjectValue(obj,pathArray)==value}else return false}function hasPath(obj,path){if(obj!=undefined&&path!=null&&path!=""){var validPaths=generatePath(obj);return validPaths.indexOf(path)!=-1}else return false}function validateTypeOf(value,
type,restricted){var isValid=false;restricted=restricted==undefined?false:restricted;type=type.toLowerCase();var foundType=getDataTypeOf(value);var rules={"float":{"types":["float","double","real"],"exceptions":[{"types":["integer"],"match":function(value){return!restricted?"float":""}}]},"hexadecimal":{"types":["hexadecimal","hexa","hex"]},"integer":{"types":["integer","int"]},"boolean":{"types":["boolean","bool"],"exceptions":[{"types":["integer","number"],"range":{"min":0,"max":1}},{"types":["string"],
"equalTo":["true","false"]}]},"function":{"types":["function","func","void","procedure"]},"string":{"types":["string","str"],"exceptions":[{"types":["*"],"match":function(value){return typeof value}}]},"datetime":{"types":["datetime","date","time"]},"array":{"types":["array"]},"object":{"types":["object","obj"]},"json":{"types":["json"]}};if(type=="string"&&foundType=="json"&&typeof value=="string")return true;var fnFindRule=function(r){if(r&&rules[r])return rules[r];else for(var n in rules)if(rules[n].types.indexOf(r)!=
-1)return rules[n];return null};var fnVerifyRule=function(r){r=fnFindRule(r);if(!r)return false;if(r.types.indexOf(foundType)!=-1)if(!restricted)return true;else return typeof value==type;else{if(r.exceptions)for(var i=0;i<r.exceptions.length;i++){var exc=r.exceptions[i];if(exc.types.length==1&&exc.types[0]=="*"||exc.types.indexOf(foundType)!=-1)if(exc.range&&exc.range.min<=value&&value<=exc.range.max&&(!restricted||typeof value==type))return true;else if(exc.equalTo&&exc.equalTo.indexOf(value)!=
-1&&(!restricted||typeof value==type))return true;else if(exc.match&&exc.match(value)==type&&(!restricted||typeof value==type))return true}return false}};return fnVerifyRule(type)}function isDOMNode(obj){if(obj==null)return false;return obj instanceof Object&&typeof obj.outerHTML!="undefined"||typeof obj==="object"&&obj.nodeType===1&&typeof obj.style==="object"&&typeof obj.ownerDocument==="object"}function parseByMatched(attributes,target){try{if(attributes!=null&&attributes!=undefined&&target!=null&&
target!=undefined){var ar=getArrayAttributesFromObject(attributes,[],"",1);for(var i=0;i<ar.length;i++)if(target.hasOwnProperty([ar[i]])){var origPath=ar[i];if(target[origPath]){if(target[origPath]!==attributes[origPath])if(target[origPath]instanceof Window||isDOMNode(target[origPath]))target[origPath]=attributes[origPath];else if(attributes[origPath]&&(attributes[origPath]instanceof Array||attributes[origPath].constructor&&attributes[origPath].constructor.name=="Array"))target[origPath]=attributes[origPath];
else if((!attributes[origPath].constructor||attributes[origPath].constructor.name==="Object")&&(target[origPath]instanceof Object||(target[origPath].constructor&&target[origPath].constructor.name=="Object"||GLOBAL_VAR["class"]["privateREF#"]["object"].getTypeOf(target[origPath])==="object")))parseByMatched(attributes[origPath],target[origPath]);else target[origPath]=attributes[origPath]}else target[origPath]=attributes[origPath]}}}catch(error){return error}return target}function getArrayAttributesFromObject(attributes,
array,base,deep){if(deep==undefined)deep=-1;return getArrayAttributesFromObjectInternal(attributes,array,base,deep,0)}function getArrayAttributesFromObjectInternal(attributes,array,base,deep,count){try{if(attributes)for(var attr in attributes){var type="string";if(attributes[attr]!=null){try{if(attributes[attr]&&attributes[attr].window&&attributes[attr].window===attributes[attr].frames)type="window";else if(attributes[attr].nodeType==undefined||attributes[attr].nodeType==null||typeof attributes[attr].nodeType!=
"number")type=typeof attributes[attr]}catch(error){type="unknown"}switch(type){case "object":if(attributes.length==undefined)array.push(base+attr);if(deep==-1||deep<=count)getArrayAttributesFromObjectInternal(attributes[attr],array,base+attr+".",deep,count);break;case "window":default:array.push(base+attr);break}}}}catch(error){return error}return array}function getAttribute(prop,source){try{var str="";if(prop&&source)for(var attr in source)if(attr.toUpperCase()==prop.toUpperCase())return str+="['"+
attr+"']";else{var type="string";if(source[attr]!=null&&(source[attr].nodeType==undefined||source[attr].nodeType==null||typeof source[attr].nodeType!="number"))type=typeof source[attr];switch(type){case "object":var name=getAttribute(prop,source[attr]);if(name!="")return str+="['"+attr+"']"+name;break;case "function":case "number":case "string":case "boolean":default:break}}}catch(error){return error}return str}function clone(obj){try{if(obj==null||typeof obj!="object")return obj;else if(typeof obj==
"object"&&obj.nodeType!=undefined&&obj.nodeType==1)return obj;else if(obj.scopeName&&obj.scopeName=="HTML"&&obj.document&&obj.document.mimeType&&obj.document.mimeType.indexOf("HTML")!=-1)return obj;else{var temp;if(obj instanceof Date)temp=obj;else{try{temp=new obj.constructor}catch(Error){temp={}}for(var key in obj)if(key.substring(0,1)=="#")temp[key]=obj[key];else temp[key]=clone(obj[key])}return temp}}catch(error){GLOBAL_VAR["class"]["privateREF#"]["console"].log("Cannot clone this object. ["+
JSON.stringify(obj)+"]");return obj}}function evaluate(obj,path,separator){if(obj!=undefined&&path!=null&&path!=""){if(separator==undefined||separator==""||separator==null)separator=".";var spl=path.toString().split(separator);var cValue=obj;for(var prop in spl){spl[prop]=spl[prop].replace(/\[|\]/g,"");if(typeof cValue!="string"&&cValue[spl[prop]]!=undefined){cValue=cValue[spl[prop]];if(spl[prop]==spl[spl.length-1])return cValue!=undefined&&cValue!=null?true:false}else return false}return false}else return false}
function evalExists(obj,path,separator){if(obj!=undefined&&path!=null&&path!=""){if(separator==undefined||separator==""||separator==null)separator=".";var spl=path.toString().split(separator);var cValue=obj;for(var prop in spl){spl[prop]=spl[prop].replace(/\[|\]/g,"");if(typeof cValue!="string"&&typeof cValue[spl[prop]]!="undefined"){cValue=cValue[spl[prop]];if(spl[prop]==spl[spl.length-1])return typeof cValue!="undefined"?true:false}else return false}return false}else return false}function getObjectKeyCaseInsensitive(obj,
key){const lc=key.toLowerCase();return Object.keys(obj).find(k=>k.toLowerCase()===lc)}function getValue(obj,path,defaultResponse,options){if(obj!=undefined&&path!=null&&path!=""){path=path.toString().replace(/\[/g,".").replace(/\[|\]/g,"");if(path[0]==".")path=path.substr(1,path.length);var spl=path.split(".");var cValue=obj;let ig=options&&options.ignoreCase;let len=spl.length;let last=spl[len-1];let prop=null;let oProp=null;for(let i=0,t=len;i<t;i++){prop=oProp=spl[i];if(ig===true)prop=getObjectKeyCaseInsensitive(cValue,
oProp);if(prop&&cValue[prop]!=undefined){cValue=cValue[prop];if(oProp==last)return cValue!=undefined?cValue:typeof defaultResponse!="undefined"?defaultResponse:undefined;let to=typeof cValue;if(["string","number","boolean","function"].indexOf(typeof cValue)!=-1)return typeof defaultResponse!="undefined"?defaultResponse:undefined}else return typeof defaultResponse!="undefined"?defaultResponse:undefined}}return typeof defaultResponse!="undefined"?defaultResponse:undefined}function setValue(obj,path,
value,options={switchTypes:false}){if(path){if(!obj)obj={};path=path.toString().replace(/\[/g,".").replace(/\[|\]/g,"");if(path[0]==".")path=path.substr(1,path.length);var spl=path.split(".");var cValue=obj;var tObj=null;var l=spl.length;let idx=0,c=true;let prop=null;while(idx<l&&c){prop=spl[idx];if(cValue[prop]==undefined)if(["string","number","boolean","function"].indexOf(typeof cValue)!==-1)if(options.switchTypes){tObj[spl[idx-1]]={};cValue[prop]={}}else c=false;else cValue[prop]={};tObj=cValue;
cValue=cValue[prop];idx++}if(c)tObj[prop]=value}return obj}function deleteValue(obj,path){if(path){if(!obj)obj={};path=path.toString().replace(/\[/g,".").replace(/\[|\]/g,"");if(path[0]==".")path=path.substr(1,path.length);var spl=path.split(".");var cValue=obj;var tObj=null;var l=spl.length-1;for(var prop in spl)if(cValue[spl[prop]]==undefined)return obj;else{tObj=cValue;cValue=cValue[spl[prop]]}try{delete tObj[spl[prop]]}catch(error){GLOBAL_VAR["class"]["privateREF#"]["console"].log("Cannot delete property ["+
ptath+"]. "+error.message)}}return obj}function validate(object){return typeof object!="undefined"&&object!=null}function extendObject(obj,attributes,extendArrays){try{if(validate(attributes)==true&&validate(obj)==false)obj={};obj=extendObjectAttributes(attributes,obj,typeof extendArrays!="boolean"?false:extendArrays);return obj}catch(error){return error.message}}function goOver(json,attributes){for(var prop in attributes)if(attributes[prop]instanceof Array&&json[prop]instanceof Array)for(var i=0;i<
attributes[prop].length;i++){if(typeof attributes[prop][i]=="object"||attributes[prop][i]instanceof Array)goOver(json[prop][i],attributes[prop][i])}else if(attributes[prop]instanceof Array&&typeof json[prop]=="undefined"){json[prop]={};json[prop]=clone(attributes[prop])}else if(typeof attributes[prop]=="object"){if(!json[prop])json[prop]={};goOver(json[prop],attributes[prop])}else if(typeof json[prop]!==typeof attributes[prop]){if(!evalExists(json,prop))json[prop]=clone(attributes[prop])}else if(typeof json[prop]==
"undefined")json[prop]=undefined}function jsonsBalance(json1,json2){try{if(validate(json1)&&validate(json2)){if(json1===json2)return;goOver(json1,json2);goOver(json2,json1);return}}catch(error){return error.message}}function compareJsonBranches(json1,json2){try{if(validate(json1)&&validate(json2)){if(json1===json2)return;var paths1=generatePath(json1);var paths2=generatePath(json2);if(paths1 instanceof Array&&paths2 instanceof Array&&paths1.length==paths2.length){paths1=paths1.sort();paths2=paths2.sort();
for(var i=0;i<paths1.length;i++)if(paths1[i]!=paths2[i])return false;return true}else return false}else return false}catch(error){console.log(error.message);return false}}function extendObjectAttributes(source,target,extendArrays){try{if(source==target)return target;if(target==null)target={};if(source instanceof Array&&!extendArrays)target=clone(source);else for(var prop in source)if(source[prop]instanceof Array)if(extendArrays&&target[prop]instanceof Array)for(var a=0;a<source[prop].length;a++){var idx=
target[prop].indexOf(source[prop][a]);if(idx==-1)try{target[prop].push(clone(source[prop][a]))}catch(e){console.warning(e.message+"  - Assigning target directly");target[prop]=source[prop]}else extendObjectAttributes(source[prop][idx],target[prop][a],extendArrays)}else target[prop]=source[prop];else if(source[prop]instanceof Window||isDOMNode(source[prop]))target[prop]=source[prop];else if(typeof source[prop]!="object")target[prop]=source[prop];else{if(target[prop]===undefined)target[prop]=null;target[prop]=
extendObjectAttributes(source[prop],target[prop],extendArrays)}return target}catch(error){return error.message}}function merge(source,target,override){try{if(source==target)return target;if(target==null){target=clone(source);return target}for(var prop in source)if(typeof source[prop]!="object"||source[prop]instanceof Array){if(target[prop]===undefined||override||override==undefined)target[prop]=source[prop]}else if(source[prop]instanceof Window||isDOMNode(source[prop]))target[prop]=source[prop];else{if(target[prop]===
undefined)target[prop]=null;target[prop]=merge(source[prop],target[prop],override)}return target}catch(error){return error.message}}function applyAttributes(source,attributes){try{if(source==attributes)return source;if(source==null)return source;for(var prop in source)if(typeof source[prop]!="object"||source[prop]instanceof Array){if(attributes[prop]!=undefined)source[prop]=attributes[prop]}else if(attributes[prop]instanceof Window||isDOMNode(attributes[prop]))source[prop]=attributes[prop];else if(attributes[prop]!=
undefined)source[prop]=applyAttributes(source[prop],attributes[prop]);return source}catch(error){return error.message}}function setAttribute(elem,keyValueAttributes,deep){deep=isNumber(deep)?deep:0;var recursive=function(elem,keyValueAttributes,count){if(elem){for(var attrib in keyValueAttributes)if(elem.nodeType==1&&elem.setAttribute)elem.setAttribute(attrib,keyValueAttributes[attrib]);if(count<deep&&elem.childNodes&&elem.childNodes.length>0){count++;for(var i=0;i<elem.childNodes.length;i++)recursive(elem.childNodes[i],
keyValueAttributes,count)}}};recursive(elem,keyValueAttributes,0)}function equals(a,b){if(arguments.length>2&&getDataTypeOf(arguments[2])=="json")return equalsWithOptions.apply(null,arguments);try{var p;var tap;var i;if(a==null&&b==null)return true;if(a==null&&b!=null||b==null)return false;if(a==undefined&&b==undefined)return true;if(a==undefined&&b!=undefined||b==undefined)return false;for(p in a)if(typeof b[p]=="undefined"&&typeof a[p]!="undefined")return false;else{tap=typeof a[p];switch(tap){case "object":if(tap!=
typeof b[p])return false;else if(a[p]instanceof HTMLElement){if(a[p]!==b[p])return false}else{tap=getTypeOf(a[p]);if(tap!=getTypeOf(b[p]))return false;else switch(tap){case "date":if(a[p].getTime()!=b[p].getTime())return false;break;case "array":if(a[p].length!=b[p].length)return false;else for(i=0;i<a[p].length;i++)if(!equals(a[p][i],b[p][i]))return false;break;default:if(!equals(a[p],b[p]))return false}}break;case "function":if(a[p].toString()!=b[p].toString())return false;break;default:if(a[p]!=
b[p])return false}}for(p in b)if(typeof a[p]=="undefined"&&typeof b[p]!="undefined")return false;return true}catch(e){GLOBAL_VAR["class"]["privateREF#"]["console"].log("Error comparing data objects: "+e.message);return false}finally{i=tap=p=null}}function equalsWithOptions(a,b,options){let d=false;let ds=[];let r=false;d=options?.differencies?true:false;try{var p;var tap;var i;if(a==null&&b==null)return true;if(a==null&&b!=null||b==null){if(!d)return r;ds.push("A is null")}if(a==undefined&&b==undefined)return true;
if(a==undefined&&b!=undefined||b==undefined){if(!d)return r;ds.push("A or B is undefined")}for(p in a)if(typeof b[p]=="undefined"&&typeof a[p]!="undefined"){if(!d)return r;ds.push(`B property is undefined prop: "${p}"`)}else{tap=typeof a[p];switch(tap){case "object":if(tap!=typeof b[p]){if(!d)return r;ds.push(`B prop: "${p}", is not a type of 'Object'`)}else if(a[p]instanceof HTMLElement){if(a[p]!==b[p]){if(!d)return r;ds.push(`B prop: "${p}", is not a type of 'HTMLElement'`)}}else{tap=getTypeOf(a[p]);
if(tap!=getTypeOf(b[p])){if(!d)return r;ds.push(`A prop: "${p}", type: "${tap}", is not the same that property B, type: "${getTypeOf(b[p])}"`)}else switch(tap){case "date":if(a[p].getTime()!=b[p].getTime()){if(!d)return r;ds.push(`Property value of A is different than B, prop: "${p}"`)}break;case "array":if(a[p].length!=b[p].length){if(!d)return r;ds.push(`Arrays have differents length, prop: "${p}",  A:${a[p].length}, B:"${b[p].length}"`)}else for(i=0;i<a[p].length;i++){let eq=equalsWithOptions(a[p][i],
b[p][i],options);if(eq!==true){if(!d)return r;ds=ds.concat(eq)}}break;default:let eq=equalsWithOptions(a[p],b[p],options);if(eq!==true){if(!d)return r;ds=ds.concat(eq)}}}break;case "function":if(a[p].toString()!=b[p].toString()){if(!d)return r;ds.push(`B Prop: "${p}" is not a "function"`)}break;default:if(a[p]!=b[p]){if(!d)return r;ds.push(`Prop: "${p}" is not equal`)}}}for(p in b)if(typeof a[p]=="undefined"&&typeof b[p]!="undefined"){if(!d)return r;ds.push(`Prop: "${p}" is undefined in A object, but exists in B object`)}if(!r)r=
d&&ds.length==0||!d?true:false}catch(e){let msg=`Error comparing data objects: ${e.message}`;GLOBAL_VAR["class"]["privateREF#"]["console"].log(msg);if(!d)return r;ds.push(msg);r=false}finally{i=tap=p=null}return r?r:d?ds:false}function toNumber(value,options){if(typeof options=="undefined")options={"type":"int","base":10,"defaultValue":null};else{options.type=typeof options.type!="undefined"?options.type.toLowerCase():"int";if(typeof options.base=="undefined")options.base=10;if(typeof options.defaultValue==
"undefined")options.defaultValue=null}if(isNumber(value))if(options.type=="int"||options.type=="integer")return parseInt(value,options.value);else return parseFloat(value);else if(typeof defaultValue!="undefined")return defaultValue;return value}function createEnum(){return new EnumeratorClass(arguments)}function evalObject(textScript,scope){if(getDataTypeOf(textScript)==="json")return JSON.parse(textScript);else if(!textScript.match(_REEvalFnRetrieve))return window[textScript];else{var script=document.createElement("script");
script.type="text/javascript";script.text=textScript;if(scope)scope.appendChild(script);else document.body.appendChild(script);window.setTimeout(function(){document.body.removeChild(script)},10)}}function createFunctionFromStr(params,strFn){if(params instanceof Array)params.push(strFn);return Function.apply(this,params)}function jsonToArray(json){var result=[];return Object.keys(json)}function jsonToString(jsonObj,firstParams,encode){var str="";var encFn=encode===true?encodeURIComponent:function(value){return value};
firstParams=firstParams===true?"?":firstParams===false?"&":typeof firstParams!="undefined"?firstParams:"&";for(var kvp in jsonObj){str+=firstParams+kvp+"="+encFn(jsonObj[kvp]);firstParams="&"}return str}function jsonMap(target,source,map,options={useBothKey:true,removeChildren:true}){if(!target)return null;if(source&&map)if(getDataTypeOf(map)=="json")for(let kvp in map){let values=map[kvp];if(!(values instanceof Array))values=[values];if(options.useBothKey)values=[kvp].concat(values);if(values){let propValue=
null;let idx=0,len=values.length;while(!propValue&&idx<len&&propValue==undefined){propValue=getValue(source,values[idx],undefined);if(propValue==undefined)propValue=source[values[idx]];idx++}if(propValue!=undefined)if(typeof target[kvp]==="object"&&typeof propValue==="object")merge(propValue,target[kvp],true);else setValue(target,kvp,propValue)}}else throw new Error(`Map object is not a JSON Object`);return target}Object.defineProperty(this,"getTypeOf",{"enumerable":false,"configurable":false,"writable":false,
"value":getTypeOf});Object.defineProperty(this,"getDataTypeOf",{"enumerable":false,"configurable":false,"writable":false,"value":getDataTypeOf});Object.defineProperty(this,"validateTypeOf",{"enumerable":false,"configurable":false,"writable":false,"value":validateTypeOf});Object.defineProperty(this,"getHTMLType",{"enumerable":false,"configurable":false,"writable":false,"value":getTypeOfHTMLElement});Object.defineProperty(this,"getTypeOfNode",{"enumerable":false,"configurable":false,"writable":false,
"value":getTypeOfNode});Object.defineProperty(this,"validate",{"enumerable":false,"configurable":false,"writable":false,"value":validate});Object.defineProperty(this,"convertTo",{"enumerable":false,"configurable":false,"writable":false,"value":convertTo});Object.defineProperty(this,"toNumber",{"enumerable":false,"configurable":false,"writable":false,"value":toNumber});Object.defineProperty(this,"isNumber",{"enumerable":false,"configurable":false,"writable":false,"value":isNumber});Object.defineProperty(this,
"existPath",{"enumerable":false,"configurable":false,"writable":false,"value":existsPath});Object.defineProperty(this,"existsPath",{"enumerable":false,"configurable":false,"writable":false,"value":existsPath});Object.defineProperty(this,"getValue",{"enumerable":false,"configurable":false,"writable":false,"value":getValue});Object.defineProperty(this,"setValue",{"enumerable":false,"configurable":false,"writable":false,"value":setValue});Object.defineProperty(this,"deleteValue",{"enumerable":false,
"configurable":false,"writable":false,"value":deleteValue});Object.defineProperty(this,"parseAttributes",{"enumerable":false,"configurable":false,"writable":false,"value":function(target,attributes){return parseByMatched(attributes,target)}});Object.defineProperty(this,"extend",{"enumerable":false,"configurable":false,"writable":false,"value":extendObject});Object.defineProperty(this,"jsonsBalance",{"enumerable":false,"configurable":false,"writable":false,"value":jsonsBalance});Object.defineProperty(this,
"jsonMap",{"enumerable":false,"configurable":false,"writable":false,"value":jsonMap});Object.defineProperty(this,"compareJsonBranches",{"enumerable":false,"configurable":false,"writable":false,"value":compareJsonBranches});Object.defineProperty(this,"merge",{"enumerable":false,"configurable":false,"writable":false,"value":merge});Object.defineProperty(this,"applyAttributes",{"enumerable":false,"configurable":false,"writable":false,"value":applyAttributes});Object.defineProperty(this,"clone",{"enumerable":false,
"configurable":false,"writable":false,"value":clone});Object.defineProperty(this,"evaluate",{"enumerable":false,"configurable":false,"writable":false,"value":evaluate});Object.defineProperty(this,"exist",{"enumerable":false,"configurable":false,"writable":false,"value":evalExists});Object.defineProperty(this,"exists",{"enumerable":false,"configurable":false,"writable":false,"value":evalExists});Object.defineProperty(this,"setAttribute",{"enumerable":false,"configurable":false,"writable":false,"value":setAttribute});
Object.defineProperty(this,"equals",{"enumerable":false,"configurable":false,"writable":false,"value":equals});Object.defineProperty(this,"checkPathValue",{"enumerable":false,"configurable":false,"writable":false,"value":checkPathValue});Object.defineProperty(this,"hasPath",{"enumerable":false,"configurable":false,"writable":false,"value":hasPath});Object.defineProperty(this,"createEnum",{"enumerable":false,"configurable":false,"writable":false,"value":createEnum});Object.defineProperty(this,"eval",
{"enumerable":false,"configurable":false,"writable":false,"value":evalObject});Object.defineProperty(this,"createFunction",{"enumerable":false,"configurable":false,"writable":false,"value":createFunctionFromStr});Object.defineProperty(this,"jsonToArray",{"enumerable":false,"configurable":false,"writable":false,"value":jsonToArray});Object.defineProperty(this,"jsonToString",{"enumerable":false,"configurable":false,"writable":false,"value":jsonToString});Object.defineProperty(this,"getFunctionName",
{"enumerable":false,"configurable":false,"writable":false,"value":getFunctionName});if(GLOBAL_VAR.console.logDebug)if(window.console!=undefined&&window.console.log!=undefined)window.console.log("Initializing "+_className+" class. - "+(new Date).toString());return this}function Polyfills(){var _className=getFunctionName(arguments);if(typeof window.btoa=="undefined"){var btoa=null;if(typeof window.Base64!="undefined"&&typeof window.Base64.encode!="undefined")btoa=Base64.encode;else if(typeof window.jQuery!=
"undefined"&&typeof window.jQuery.base64!="undefined"&&typeof window.jQuery.base64.encode!="undefined")btoa=jQuery.base64.encode;if(btoa!=null)Object.defineProperty(window,"btoa",{"enumerable":true,"writable":false,"configurable":false,"value":function(data){return btoa(data)}})}if(typeof window.crypto==="undefined")window.crypto=window.msCrypto;if(GLOBAL_VAR.console.logDebug)if(window.console!=undefined&&window.console.log!=undefined)window.console.log("Initializing "+_className+" class. - "+(new Date).toString())}
function Printer(){var _className=getFunctionName(arguments);function supportPrint(){var response=false;if(window.agentInfo)if(agentInfo.isWindows)switch(true){case agentInfo.isOpera:case agentInfo.isChrome:case agentInfo.isSafari:case agentInfo.isYandex:response=true;break;case agentInfo.isMSIE:case agentInfo.isFirefox:case agentInfo.isNokiaBrowser:default:response=false;break}else if(agentInfo.isMac)switch(true){case agentInfo.isOpera:case agentInfo.isChrome:case agentInfo.isSafari:case agentInfo.isYandex:response=
true;break;case agentInfo.isFirefox:case agentInfo.isNokiaBrowser:case agentInfo.isSymbian:default:response=false;break}else if(agentInfo.isIOS)switch(true){case agentInfo.isSafari:case agentInfo.isOpera:case agentInfo.isChrome:case agentInfo.isFirefox:case agentInfo.isNokiaBrowser:case agentInfo.isSymbian:default:response=false;break}else if(agentInfo.isChromeOS)response=false;else if(agentInfo.isPlaybook)response=false;else if(agentInfo.isHPTablet)response=false;else if(agentInfo.isAndroid)response=
false;else if(agentInfo.isIphone)response=false;else response=false;else{helper.console.warning("AgentInfo class is not defined",arguments);response=false}return response}function supportPrintMethods(){var response={"PREVIEW":false,"DIRECT":false};if(window.agentInfo)if(agentInfo.isWindows)switch(true){case agentInfo.isChrome:case agentInfo.isFirefox:case agentInfo.isSafari:case agentInfo.isOpera:case agentInfo.isYandex:response.PREVIEW=true;response.DIRECT=true;break;case agentInfo.isMSIE:response.PREVIEW=
true;response.DIRECT=false;break;case agentInfo.isNokiaBrowser:default:response.PREVIEW=false;response.DIRECT=false;break}else if(agentInfo.isMac)switch(true){case agentInfo.isOpera:case agentInfo.isChrome:case agentInfo.isSafari:case agentInfo.isYandex:response.PREVIEW=true;response.DIRECT=true;break;case agentInfo.isFirefox:case agentInfo.isNokiaBrowser:case agentInfo.isSymbian:default:response.PREVIEW=false;response.DIRECT=false;break}else if(agentInfo.isIOS)switch(true){case agentInfo.isSafari:if(agentInfo.ipadModel<=
2){response.PREVIEW=true;response.DIRECT=true}else if(agentInfo.ipadModel==3){response.PREVIEW=true;response.DIRECT=true}else{response.PREVIEW=true;response.DIRECT=false}break;case agentInfo.isChrome:response.PREVIEW=true;response.DIRECT=true;break;case agentInfo.isOpera:case agentInfo.isFirefox:case agentInfo.isNokiaBrowser:case agentInfo.isSymbian:default:response.PREVIEW=false;response.DIRECT=false;break}else if(agentInfo.isChromeOS){response.PREVIEW=false;response.DIRECT=false}else if(agentInfo.isPlaybook){response.PREVIEW=
false;response.DIRECT=false}else if(agentInfo.isHPTablet){response.PREVIEW=false;response.DIRECT=false}else if(agentInfo.isAndroid){response.PREVIEW=true;response.DIRECT=true}else if(agentInfo.isIphone){response.PREVIEW=false;response.DIRECT=false}else{response.PREVIEW=false;response.DIRECT=false}else{helper.console.warning("AgentInfo class is not defined",arguments);response.PREVIEW=false;response.DIRECT=false}return response}Object.defineProperty(this,"supportPrint",{"enumerable":true,"configurable":false,
"get":function(){return supportPrint()}});Object.defineProperty(this,"printMethods",{"enumerable":true,"configurable":false,"get":function(){return supportPrintMethods()}});if(GLOBAL_VAR.console.logDebug)if(window.console!=undefined&&window.console.log!=undefined)window.console.log("Initializing "+_className+" class. - "+(new Date).toString());return this}function Size(){var _className=getFunctionName(arguments);var _isMSIE=false;function round(value,decimals){var strValue;try{if(value!=null&&value!=
undefined&&(value!=""||value.toString()=="0")&&value.toString().toUpperCase()!="NAN"){strValue=parseFloat(value).toFixed(decimals);if(decimals==undefined||decimals==null||decimals==0)strValue=parseInt(strValue,10)}else strValue=""}catch(error){}return strValue}function isMSIE(){var userAgent=window.navigator.userAgent.toLowerCase();var isMSIE=false;var reg=/(msie) ([\w.]+)/.exec(userAgent);var ieTest=/(msie) ([0-9\.]+)/i.exec(userAgent);isMSIE=!!(ieTest&&ieTest[1]=="msie");if(!isMSIE&&userAgent.indexOf("trident")!=
-1&&/rv:([0-9\.]+)/i.exec(userAgent))isMSIE=true;return isMSIE}_isMSIE=isMSIE();function getCleanValue(value){var retValue=0;try{if(GLOBAL_VAR["class"]["privateREF#"]["object"]["isNumber"](value))retValue=parseFloat(value);else if(typeof(value=="string")){var exampleValue=round(1,2);var hasPoint=true;var re=new RegExp("[+-]?[0-9]*[.,][0-9]*|[+-]?[0-9]*");if(exampleValue.indexOf(",")!=-1)hasPoint=false;var regExpExec=re.exec(value);if(regExpExec!=null&&regExpExec[0]!=undefined&&regExpExec[0]!=""&&
regExpExec[0]!=null){var retValue=regExpExec[0];if(hasPoint)retValue=retValue.replace(",",".");else retValue=retValue.replace(".",",");retValue=parseFloat(retValue)}else retValue=value}else retValue=value}catch(error){retValue=value}return retValue}function getElementWidth(elem,includingMargin){var retValue=0;try{if(elem)if(elem.window&&elem.document&&elem.document.documentElement)retValue=elem.document.documentElement.clientWidth||elem.document.documentElement.offsetWidth;else if(window.getComputedStyle&&
elem.nodeType!=9&&window.getComputedStyle(elem,null)!=null){var tempWidth=window.getComputedStyle(elem,null).getPropertyValue("width");if(tempWidth.indexOf("px")>-1)retValue=getCleanValue(tempWidth);else if(tempWidth.indexOf("%")>-1)retValue=getElementWidth(elem.parentElement)*parseInt(getCleanValue(tempWidth),10)/100;else if(tempWidth.indexOf("auto")>-1)retValue=getElementWidth(elem.parentElement);else retValue=tempWidth}else if(elem.offsetWidth!=undefined&&elem.offsetWidth!=0)retValue=elem.offsetWidth;
else if(elem.clientWidth!=undefined&&elem.clientWidth!=0)retValue=elem.clientWidth;else if(_isMSIE==false&&elem.ownerDocument&&elem.ownerDocument.documentElement)retValue=elem.ownerDocument.documentElement.clientWidth||elem.ownerDocument.documentElement.offsetWidth;else if(elem.currentStyle)if(elem.currentStyle.width&&elem.currentStyle.width.indexOf("px")>-1)retValue=parseInt(elem.currentStyle.width.replace("px",""),10);else if(elem.currentStyle.width&&elem.currentStyle.width.indexOf("%")>-1)retValue=
getElementWidth(elem.parentElement)*parseInt(elem.currentStyle.width.replace("%",""),10)/100;else{if(elem.currentStyle.width&&elem.currentStyle.width.indexOf("auto")>-1)retValue=getElementWidth(elem.parentElement)}else if(elem.documentElement&&elem.documentElement.offsetWidth)retValue=elem.documentElement.offsetWidth;else if(elem.parentElement)retValue=getElementWidth(elem.parentElement);else retValue=0;else if(window.document.body.clientWidth!=undefined)retValue=window.document.body.clientWidth;
else if(window.document.body.offsetWidth!=undefined)retValue=window.document.body.offsetWidth;else retValue=MYREFERENCES.DefaultWidth;if(includingMargin===true){var css=window.getComputedStyle(elem,null);if(css){var ar=["marginLeft","marginRight","left","right"];for(var i=0;i<ar.length;i++){var rv=css[ar[i]];if(rv!="auto"&&rv!="")retValue+=parseFloat(getCleanValue(rv))}}}}catch(error){genericLog(error,arguments);retValue=0}return retValue}function getElementHeight(elem,includingMargin){var retValue=
0;try{if(elem)if(elem.window&&elem.document&&elem.document.documentElement)retValue=elem.document.documentElement.clientHeight||elem.document.documentElement.offsetHeight;else if(window.getComputedStyle&&elem.nodeType!=9&&window.getComputedStyle(elem,null)!=null){var tempHeight=window.getComputedStyle(elem,null).getPropertyValue("height");if(tempHeight.indexOf("px")>-1)retValue=getCleanValue(tempHeight);else if(tempHeight.indexOf("%")>-1)retValue=getElementHeight(elem.parentElement)*parseInt(getCleanValue(tempHeight),
10)/100;else if(tempHeight.indexOf("auto")>-1)retValue=getElementHeight(elem.parentElement);else retValue=tempHeight}else if(elem.offsetHeight!=undefined&&elem.offsetHeight!=0)retValue=elem.offsetHeight;else if(elem.clientHeight!=undefined&&elem.clientHeight!=0)retValue=elem.clientHeight;else if(_isMSIE==false&&elem.ownerDocument&&elem.ownerDocument.documentElement)retValue=elem.ownerDocument.documentElement.clientHeight||elem.ownerDocument.documentElement.offsetHeight;else if(elem.currentStyle)if(elem.currentStyle.height&&
elem.currentStyle.height.indexOf("px")>-1)retValue=parseInt(elem.currentStyle.height.replace("px",""),10);else if(elem.currentStyle.height&&elem.currentStyle.height.indexOf("%")>-1)retValue=getElementHeight(elem.parentElement)*parseInt(elem.currentStyle.height.replace("%",""),10)/100;else{if(elem.currentStyle.height&&elem.currentStyle.height.indexOf("auto")>-1)retValue=getElementHeight(elem.parentElement)}else if(elem.documentElement&&elem.documentElement.scrollHeight)retValue=elem.documentElement.scrollHeight;
else if(elem.parentElement)retValue=getElementHeight(elem.parentElement);else retValue=0;else if(window.document.body.clientHeight!=undefined)retValue=window.document.body.clientHeight;else if(window.document.body.offsetHeight!=undefined)retValue=window.document.body.offsetHeight;else retValue=MYREFERENCES.DefaultHeight;if(includingMargin===true){var css=window.getComputedStyle(elem,null);if(css){var ar=["marginTop","marginBottom","top","bottom"];for(var i=0;i<ar.length;i++){var rv=css[ar[i]];if(rv!=
"auto"&&rv!="")retValue+=parseFloat(getCleanValue(rv))}}}}catch(error){genericLog(error,arguments);retValue=0}return retValue}function getElementSize(elem,includingMargin){try{var _w;var _h;_w=getElementWidth(elem,includingMargin);_h=getElementHeight(elem,includingMargin);if(_w==undefined)_w=window.screen.width;if(_h==undefined)_h=window.screen.height;return{"width":_w,"height":_h}}catch(error){genericLog(error,arguments);return{"width":0,"height":0}}}Object.defineProperty(this,"getWidth",{"enumerable":true,
"configurable":false,"writable":false,"value":getElementWidth});Object.defineProperty(this,"getHeight",{"enumerable":true,"configurable":false,"writable":false,"value":getElementHeight});Object.defineProperty(this,"get",{"enumerable":true,"configurable":false,"writable":false,"value":getElementSize});Object.defineProperty(this,"cleanValue",{"enumerable":true,"configurable":false,"writable":false,"value":getCleanValue});if(GLOBAL_VAR.console.logDebug)if(window.console!=undefined&&window.console.log!=
undefined)window.console.log("Initializing "+_className+" class. - "+(new Date).toString());return this}function SessionStorage(){var _className=getFunctionName(arguments);var _supportSessionStorage=true;function initialize(){try{_supportSessionStorage=window.sessionStorage?true:false}catch(error){_supportSessionStorage=false}}function get(key){var tempData=null;if(_supportSessionStorage){tempData=sessionStorage.getItem(key);if(tempData)try{tempData=JSON.parse(tempData)}catch(error){GLOBAL_VAR["class"]["privateREF#"]["console"].error(error.message,
error,arguments);return error}}return tempData}function add(key,value){if(_supportSessionStorage&&key)try{sessionStorage.setItem(key,JSON.stringify(value))}catch(error){GLOBAL_VAR["class"]["privateREF#"]["console"].error(error.message,error,arguments)}}function remove(key){if(_supportSessionStorage&&key)sessionStorage.removeItem(key)}function clear(){if(_supportSessionStorage)sessionStorage.clear()}initialize();Object.defineProperty(this,"get",{"enumerable":true,"configurable":false,"writable":false,
"value":get});Object.defineProperty(this,"set",{"enumerable":true,"configurable":false,"writable":false,"value":add});Object.defineProperty(this,"add",{"enumerable":true,"configurable":false,"writable":false,"value":add});Object.defineProperty(this,"remove",{"enumerable":true,"configurable":false,"writable":false,"value":remove});Object.defineProperty(this,"clear",{"enumerable":true,"configurable":false,"writable":false,"value":clear});if(GLOBAL_VAR.console.logDebug)if(window.console!=undefined&&
window.console.log!=undefined)window.console.log("Initializing "+_className+" class. - "+(new Date).toString());return this}function Storage(){var _className=getFunctionName(arguments);var _noop=function(){};var _supportLocalStorage=true;var _eventName="storage";var _handlers={};_handlers[_eventName]={};var _listening=false;function initialize(){try{_supportLocalStorage=window.localStorage?true:false;if(!_supportLocalStorage)_off=_on=clear=remove=add=get=_noop}catch(error){_supportLocalStorage=false}}
function get(key){var tempData=null;tempData=localStorage.getItem(key);if(tempData)try{tempData=JSON.parse(tempData)}catch(error){GLOBAL_VAR["class"]["privateREF#"]["console"].error(error.message,error,arguments);return error}return tempData}function add(key,value){if(key)try{return localStorage.setItem(key,JSON.stringify(value))}catch(error){GLOBAL_VAR["class"]["privateREF#"]["console"].error(error.message,error,arguments)}}function remove(key){if(key)return localStorage.removeItem(key)}function clear(){return localStorage.clear()}
function on(key,handler){if(key&&handler)if(handler instanceof Function){if(!_listening)window.addEventListener(_eventName,localStorageChange,{passive:true});if(!_handlers[_eventName][key])_handlers[_eventName][key]=[];_handlers[_eventName][key].push(handler);_listening=true;return true}else return false;else return false}function off(key,handler){if(key&&handler)if(handler instanceof Function){if(_handlers[_eventName][key]){let idx=_handlers[_eventName][key].indexOf(handler);if(idx!=-1)_handlers[_eventName][key].splice(idx,
1)}else return false;return true}else return false;else return false}function localStorageChange(e){if(_handlers[_eventName][e.key])_handlers[_eventName][e.key].forEach(hnd=>{try{hnd(e)}catch(err){}})}initialize();Object.defineProperty(this,"get",{"enumerable":true,"configurable":false,"writable":false,"value":get});Object.defineProperty(this,"set",{"enumerable":true,"configurable":false,"writable":false,"value":add});Object.defineProperty(this,"add",{"enumerable":true,"configurable":false,"writable":false,
"value":add});Object.defineProperty(this,"remove",{"enumerable":true,"configurable":false,"writable":false,"value":remove});Object.defineProperty(this,"clear",{"enumerable":true,"configurable":false,"writable":false,"value":clear});var ss=new SessionStorage;Object.defineProperty(this,"session",{"enumerable":true,"configurable":false,"get":function(){return ss}});Object.defineProperty(this,"on",{enumerable:true,configurable:false,writeble:false,value:on});Object.defineProperty(this,"off",{enumerable:true,
configurable:false,writeble:false,value:off});if(GLOBAL_VAR.console.logDebug)if(window.console!=undefined&&window.console.log!=undefined)window.console.log("Initializing "+_className+" class. - "+(new Date).toString());return this}function StringExtend(){var _className=getFunctionName(arguments);if(!String.prototype.trimLeft)String.prototype.trimLeft=function(){return this.replace(/^\s+/,"")};if(!String.prototype.ltrim)String.prototype.ltrim=function(){return this.replace(/^\s+/,"")};if(!String.prototype.trimRight)String.prototype.trimRight=
function(){return this.replace(/\s+$/,"")};if(!String.prototype.rtrim)String.prototype.rtrim=function(){return this.replace(/\s+$/,"")};if(!String.prototype.trim)String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")};function trim(str){return typeof str=="string"?str.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""):str}function leftTrim(str){return typeof str=="string"?str.replace(/^\s+/,""):str}function rightTrim(str){return typeof str=="string"?str.replace(/\s+$/,
""):str}function formatStr(format,values){var args=Array.prototype.slice.call(arguments,1);return format.replace(/{(\d+)}/g,function(match,number){return typeof args[number]!="undefined"?args[number]:match})}function sprintf(format,values){var arg=arguments;var i=1;if(format!=null&&typeof format!="undefined")return format.replace(/%((%)|s)/g,function(m){return m[2]||arg[i++]});else return format}function hasWord(text,word){var i=text.indexOf(word);return i==-1?false:function(tl){return(i==0||text[i-
1]==" ")&&(text.length==tl||text[tl]==" ")}(i+word.length)}Object.defineProperty(this,"trim",{"enumerable":true,"configurable":false,"writable":false,"value":trim});Object.defineProperty(this,"ltrim",{"enumerable":true,"configurable":false,"writable":false,"value":leftTrim});Object.defineProperty(this,"rtrim",{"enumerable":true,"configurable":false,"writable":false,"value":rightTrim});Object.defineProperty(this,"format",{"enumerable":true,"configurable":false,"writable":false,"value":formatStr});
Object.defineProperty(this,"sprintf",{"enumerable":true,"configurable":false,"writable":false,"value":sprintf});Object.defineProperty(this,"hasWord",{"enumerable":true,"configurable":false,"writable":false,"value":hasWord});if(GLOBAL_VAR.console.logDebug)if(window.console!=undefined&&window.console.log!=undefined)window.console.log("Initializing "+_className+" class. - "+(new Date).toString());return this}function Style(){var _className=getFunctionName(arguments);var _dynamicStyleSheet=null;var _gref=
GLOBAL_VAR["class"]["privateREF#"];function parsingAttributes(attribute,value){var attrib={};if(!window.agentInfo)if(GLOBAL_VAR.class["privateREF#"].console)GLOBAL_VAR.class["privateREF#"].console.warning("AgentInfo class is not defined.",arguments);else window.console.log("AgentInfo class is not defined");else try{switch(attribute.toUpperCase()){case "OPACITY":case "FILTER":if(agentInfo.isMSIE){if(value>1)value/=100;attrib["name"]="opacity";attrib["value"]=value}else{attrib["name"]="filter";if(value<
1&&value%1!=0)value*=100;attrib["value"]="alpha(opacity="+value+")"}break;case "FLOAT":case "CSSFLOAT":case "STYLEFLOAT":if(agentInfo.isMSIE)attrib={"name":"styleFloat","value":value};else attrib={"name":"cssFloat","value":value};break;default:attrib={"name":attribute,"value":value};break}}catch(error){return error}return attrib}function add(elems,style){if(elems){var isElem=true;if(!(elems.forEach instanceof Function)){elems=[elems];isElem=false}elems.forEach(function(elem){try{if(GLOBAL_VAR["class"]["privateREF#"]["object"].validate(style)==
true&&GLOBAL_VAR["class"]["privateREF#"]["object"].validate(elem)==true)if(typeof style=="string"&&style.indexOf(":")==-1){var splStyle=GLOBAL_VAR["class"]["privateREF#"]["string"].trim(style).split(" ");var curClass=elem.className.split(" ");for(var i=0;i<splStyle.length;i++){var added=true;for(var k=0;k<curClass.length;k++)if(curClass[k]==splStyle[i]){added=false;break}if(added==true){elem.className=(elem.className+" "+splStyle[i]).replace(/ +/g," ").trim();added=false}}}else if(typeof style=="string"&&
style.indexOf(":")!=-1){var splStyle=GLOBAL_VAR["class"]["privateREF#"]["string"].trim(style).split(":");splStyle[1]=splStyle[1].replace(/[;|,]/g,"");if(GLOBAL_VAR["class"]["privateREF#"].object.evaluate(elem,"style."+splStyle[0])==true)elem.style[splStyle[0]]=splStyle[1]}else if(typeof style=="object")for(var attrib in style){var lAttrib=attrib.substring(0,1).toLowerCase()+attrib.substring(1,attrib.length);if(GLOBAL_VAR["class"]["privateREF#"].object.evaluate(elem,"style."+[lAttrib])==true){elem.style[lAttrib]=
style[attrib];if(elem.style[lAttrib]!=style[attrib]){var text=elem.style.cssText;var start=text.search(lAttrib);if(start==-1)if(text=="")text=attrib+":"+style[attrib];else text+=";"+attrib+":"+style[attrib];else{var end=text.substr(start).search(";");if(end==-1)text=text.replace(text.substr(start),attrib+":"+style[attrib]);else text=text.replace(text.substr(start,end),attrib+":"+style[attrib])}elem.style.cssText=text}}}}catch(error){return error}});return isElem?elems[0]:elems}}function remove(elems,
toRemove){if(elems){var isElem=true;if(!(elems.forEach instanceof Function)){elems=[elems];isElem=false}elems.forEach(function(elem){if(GLOBAL_VAR["class"]["privateREF#"]["object"].validate(toRemove)==true&&GLOBAL_VAR["class"]["privateREF#"]["object"].validate(elem)==true)if(typeof toRemove=="string"&&toRemove.indexOf(":")==-1){var rmvClasses=GLOBAL_VAR["class"]["privateREF#"]["string"].trim(toRemove).split(/ +/g);var curClasses=GLOBAL_VAR["class"]["privateREF#"]["string"].trim(elem.className).split(/ +/g);
var p;for(var i=0;i<rmvClasses.length;i++){p=curClasses.indexOf(rmvClasses[i]);if(p!=-1)curClasses.splice(p,1)}elem.className=curClasses.join(" ")}});return isElem?elems[0]:elems}}function addAll(elem,style){if(GLOBAL_VAR["class"]["privateREF#"]["object"].validate(style)==true&&GLOBAL_VAR["class"]["privateREF#"]["object"].validate(elem)==true){add(elem,style);for(var i=0;i<elem.childNodes.length;i++)addAll(elem.childNodes[i],style)}}function removeAll(elem,style){if(GLOBAL_VAR["class"]["privateREF#"]["object"].validate(style)==
true&&GLOBAL_VAR["class"]["privateREF#"]["object"].validate(elem)==true){remove(elem,style);for(var i=0;i<elem.childNodes.length;i++)removeAll(elem.childNodes[i],style)}}function replace(elems,oldStyle,newStyle){if(elems){var isElem=true;if(!(elems.forEach instanceof Function)){elems=[elems];isElem=false}elems.forEach(function(elem){remove(elem,oldStyle);add(elem,newStyle)});return isElem?elems[0]:elems}}function hasClass(elem,className){if(elem&&className&&elem instanceof HTMLElement&&typeof className==
"string"){var splClasses=GLOBAL_VAR["class"]["privateREF#"]["string"].trim(className).split(/ +/g);var count=0;for(var i=0;i<splClasses.length;i++)if(GLOBAL_VAR["class"]["privateREF#"]["string"].hasWord(elem.className,splClasses[i]))count++;return count==splClasses.length}return false}function hasAnyClass(elem,classes){if(elem&&classes&&elem instanceof HTMLElement&&typeof classes=="string"){var splClasses=GLOBAL_VAR["class"]["privateREF#"]["string"].trim(classes).split(/ +/g);for(var i=0;i<splClasses.length;i++)if(GLOBAL_VAR["class"]["privateREF#"]["string"].hasWord(elem.className,
splClasses[i]))return true;return false}return false}function hasAnyParentsClass(elem,classes){if(!elem)return false;else if(hasAnyClass(elem,classes))return true;else return hasAnyParentsClass(elem.parentElement,classes)}function getAttribute(elem,attribute){var value=undefined;var obj=GLOBAL_VAR["class"]["privateREF#"]["object"];try{if(obj.validate(elem)&&obj.validate(attribute)){if(obj.exists(elem,"currentStyle")==true){attribute=attribute.replace(/\-(\w)/g,function(strMatch,p1){return p1.toUpperCase()});
return elem.currentStyle[attribute]}if(obj.exists(document,"defaultView.getComputedStyle")){value=document.defaultView.getComputedStyle(elem,"");if(value!=null)return value.getPropertyValue(attribute)}if(obj.exists(elem,"style."+attribute)==true)return elem.style[attribute]}return value}catch(error){return error}}function getComputedStyleProperty(elem,prop){var value;if(elem.currentStyle)value=elem.currentStyle[styleProp];else if(window.getComputedStyle)value=document.defaultView.getComputedStyle(elem,
null).getPropertyValue(prop);return value}function getCSSRule(rulePath){var ruleName=rulePath.toLowerCase();var styleSheet;var i,ii;var cssRule,cssRuleInner=null;var cssRules,cssRulesInner;if(document.styleSheets)for(i=0;i<document.styleSheets.length;i++){styleSheet=document.styleSheets[i];try{styleSheet.cssRules||styleSheet.rules}catch(error){continue}if(styleSheet.cssRules)cssRules=styleSheet.cssRules;else cssRules=styleSheet.rules;if(cssRules)for(ii=0;ii<cssRules.length;ii++){cssRule=cssRules[ii];
if(cssRule)if(cssRule.selectorText){let selectors=cssRule.selectorText.split(",");if(selectors.find(r=>{return _gref.string.trim(r.toLowerCase())==ruleName}))return cssRule}else if(cssRule.styleSheet){if(cssRule.styleSheet.cssRules)cssRulesInner=cssRule.styleSheet.cssRules;else cssRulesInner=cssRule.styleSheet.rules;if(cssRulesInner)for(jj=0;jj<cssRulesInner.length;jj++){cssRuleInner=cssRulesInner[jj];if(cssRuleInner)if(cssRuleInner.selectorText)if(cssRuleInner.selectorText.toLowerCase()==ruleName)return cssRuleInner}}}}return null}
function addCSSRule(rulepath,style){if(!_dynamicStyleSheet){_dynamicStyleSheet=document.createElement("style");_dynamicStyleSheet.type="text/css";var idx=document.styleSheets.length;document.getElementsByTagName("head")[0].appendChild(_dynamicStyleSheet);_dynamicStyleSheet=document.styleSheets[idx]}var cssRules=null;if(_dynamicStyleSheet.cssRules)cssRules=_dynamicStyleSheet.cssRules;else cssRules=_dynamicStyleSheet.rules;_dynamicStyleSheet.insertRule(rulepath+"{"+style+"}",cssRules.length)}function removeCSSRule(rulepath){ruleName=
ruleName.toLowerCase();var styleSheet;var i,ii;var cssRule=null;var cssRules;if(document.styleSheets)for(i=0;i<document.styleSheets.length;i++){styleSheet=document.styleSheets[i];if(styleSheet.cssRules)cssRules=styleSheet.cssRules;else cssRules=styleSheet.rules;if(cssRules)for(var k=0;k<cssRules.length;k++){cssRule=cssRules[k];if(cssRule.selectorText)if(cssRule.selectorText.toLowerCase()==ruleName){cssRules.splice(k,1);return}}}}function changeCSSRule(rule,attribute,value){if(typeof rule=="string")rule=
getCSSRule(rule);if(rule)rule.style[attribute]=value;else GLOBAL_VAR["class"]["privateREF#"]["console"].log("rule '"+rule+"' not found",arguments)}function getCSSRuleAttributes(rule){if(typeof rule=="string")rule=getCSSRule(rule);if(rule==null)return null;else return rule.style}function getCSSRuleAttribute(rule,attrname){var attr=null;if(typeof rule=="string")rule=getCSSRule(rule);var styles=getCSSRuleAttributes(rule);if(styles!=null)attr=styles.getPropertyValue(attrname);return attr}function showElem(elems,
display){if(elems){if(!(elems instanceof Array))elems=[elems];var _show=function(elem){if(typeof elem=="string")elem=document.getElementById(elem);if(elem){if(getAttribute(elem,"display")=="none"&&display!==false){if(typeof display=="undefined")display="inherit";elem.style.display=display}if(elem.style.visibility!="visible")elem.style.visibility="visible"}};elems.forEach(_show)}}function hideElem(elems,display){if(elems){if(!(elems instanceof Array))elems=[elems];var _hide=function(elem){if(typeof elem==
"string")elem=document.getElementById(elem);if(elem){if(getAttribute(elem,"display")!="none"&&display!==false){if(typeof display=="undefined")display="none";elem.style.display=display}if(elem.style.visibility!="hidden")elem.style.visibility="hidden"}};elems.forEach(_hide)}}Object.defineProperty(this,"add",{"enumerable":true,"configurable":false,"writable":false,"value":add});Object.defineProperty(this,"addClass",{"enumerable":true,"configurable":false,"writable":false,"value":add});Object.defineProperty(this,
"remove",{"enumerable":true,"configurable":false,"writable":false,"value":remove});Object.defineProperty(this,"removeClass",{"enumerable":true,"configurable":false,"writable":false,"value":remove});Object.defineProperty(this,"replace",{"enumerable":true,"configurable":false,"writable":false,"value":replace});Object.defineProperty(this,"hasClass",{"enumerable":true,"configurable":false,"writable":false,"value":hasClass});Object.defineProperty(this,"hasAnyClass",{"enumerable":true,"configurable":false,
"writable":false,"value":hasAnyClass});Object.defineProperty(this,"hasAnyParentsClass",{"enumerable":true,"configurable":false,"writable":false,"value":hasAnyParentsClass});Object.defineProperty(this,"getAttribute",{"enumerable":true,"configurable":false,"writable":false,"value":getAttribute});Object.defineProperty(this,"getComputedStyle",{"enumerable":true,"configurable":false,"writable":false,"value":getComputedStyleProperty});Object.defineProperty(this,"getCSSRule",{"enumerable":true,"configurable":false,
"writable":false,"value":getCSSRule});Object.defineProperty(this,"addCSSRule",{"enumerable":true,"configurable":false,"writable":false,"value":addCSSRule});Object.defineProperty(this,"removeCSSRule",{"enumerable":true,"configurable":false,"writable":false,"value":removeCSSRule});Object.defineProperty(this,"changeCSSRule",{"enumerable":true,"configurable":false,"writable":false,"value":changeCSSRule});Object.defineProperty(this,"getCSSRuleAttributes",{"enumerable":true,"configurable":false,"writable":false,
"value":getCSSRuleAttributes});Object.defineProperty(this,"getCSSRuleAttribute",{"enumerable":true,"configurable":false,"writable":false,"value":getCSSRuleAttribute});Object.defineProperty(this,"show",{"enumerable":true,"configurable":false,"writable":false,"value":showElem});Object.defineProperty(this,"hide",{"enumerable":true,"configurable":false,"writable":false,"value":hideElem});if(GLOBAL_VAR.console.logDebug)if(window.console!=undefined&&window.console.log!=undefined)window.console.log("Initializing "+
_className+" class. - "+(new Date).toString());return this}function URL(){var _className=getFunctionName(arguments);var _gref=GLOBAL_VAR["class"]["privateREF#"];function gup(name,optionalWindow,defaultValue){var regex=new RegExp("[\\?&]"+name.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]")+"=([^&#]*)","ig");var wnd="";try{wnd=typeof optionalWindow!="undefined"&&optionalWindow!=null&&optionalWindow.location&&optionalWindow.location.href?optionalWindow.location.href:window.location.href}catch(error){wnd=
window.location.href}var results=regex.exec(wnd);regex=null;return results==null?typeof defaultValue!="undefined"?defaultValue:"":results[1]}function getParam(parseUrl,name,params){if(params)params=params.replace(/ /g,"").replace(/\\/g,"-").split("-");if(parseUrl&&parseUrl.parameters&&name)for(var i=0;i<parseUrl.parameters.length;i++)if(parseUrl.parameters[i].name.toLowerCase()==name.toLowerCase()){var rParam=parseUrl.parameters[i];if(params){if(params.indexOf("lc")!=-1&&rParam)rParam=rParam.toLowerCase();
if(params.indexOf("uc")!=-1&&rParam)rParam=rParam.toUpperCase()}return rParam}return null}function toUrl(parseUrl,params){var fUrl="";if(parseUrl){if(typeof params==="undefined")params=[];else if(!(params instanceof Array))params=params.replace(/ /g,"").replace(/\\/g,"-").replace(/\//g,"-").split("-");if(params.indexOf("lp")!=-1)fUrl=parseUrl.lastPath;else if(params.indexOf("bp")!=-1)fUrl=parseUrl.brokerPath;else{if(parseUrl.protocol)fUrl+=parseUrl.protocol+"://";if(parseUrl.hostname)fUrl+=parseUrl.hostname;
if(parseUrl.port)fUrl+=":"+parseUrl.port;if(params.indexOf("vp")!=-1){if(fUrl.substr(fUrl.length-1,1)!="/")fUrl+="/"}else if(parseUrl.virtualPath){if(parseUrl.virtualPath.substr(0,1)!="/"&&fUrl.substr(fUrl.length-1,1)!="/")fUrl+="/";fUrl+=parseUrl.virtualPath}if(params.indexOf("r")===-1&&parseUrl.resource){if(fUrl.substr(fUrl.length-1,1)!="/")fUrl+="/";fUrl+=parseUrl.resource}if(params.indexOf("a")===-1)for(var i=0;i<parseUrl.parameters.length;i++)if(typeof parseUrl.parameters[i].value!="undefined")fUrl+=
(i==0?"?":"&")+parseUrl.parameters[i].name+"="+parseUrl.parameters[i].value;else fUrl+=(i==0?"?":"&")+parseUrl.parameters[i].name;if(params.indexOf("o")!=-1)fUrl=fUrl.replace(parseUrl.protocol+"://"+parseUrl.hostname+(parseUrl.port&&parseUrl.port!=""?":"+parseUrl.port:""),"");if(params.indexOf("p")!=-1)fUrl=fUrl.replace(parseUrl.protocol+"://","");if(params.indexOf("h")!=-1)fUrl=fUrl.split("#")[0]}}return fUrl}function parseUrl(url){var ret=null;var port=null;var prot=null;var host=null;var baseURL=
null;var parameters=[];var virtualPath=null;var lastPath=null;var brokerPath=null;var resource=null;var hash=null;var res;try{if(url){url=_gref.string.trim(url.toString());if(url.indexOf("://")!=-1){res=url.split("://");prot=res[0];url=res[1]}url=url.replace(/[/]+/g,"/");var colon=url.indexOf(":");if(colon!==-1&&colon<url.indexOf("/")){res=null;var re=new RegExp(":[0-9]*");res=re.exec(url);if(res!=null){port=res[0].replace(":","");host=url.substring(0,res.index);url=url.substring(res.index+res[0].length,
url.length)}}if(host===null){var slashIdx=url.indexOf("/");if(slashIdx!==-1){host=url.substr(0,slashIdx);url=url.substr(slashIdx)}else{host=url;url=""}}baseURL=url;if(baseURL&&baseURL.indexOf("#")!==-1){let hashes=baseURL.split("#");baseURL=hashes[0];hash=hashes[1]}if(baseURL&&baseURL.indexOf("?")!=-1){var params=baseURL.substr(baseURL.indexOf("?")+1,baseURL.length);virtualPath=baseURL.substr(0,baseURL.indexOf("?"));params=params.split("&");for(var i=0;i<params.length;i++){var param=params[i].split("=");
parameters.push({"name":param[0],"value":param[1]})}}else virtualPath=baseURL;if(virtualPath&&virtualPath.indexOf(".")!=-1){var lbs=virtualPath.lastIndexOf("/");var tempVirtualPath=virtualPath.substr(0,lbs+1);resource=virtualPath.substr(lbs+1,virtualPath.length-lbs);virtualPath=tempVirtualPath;tempVirtualPath=null}}if(host=="")host=null;if(baseURL=="")baseURL=null;if(virtualPath){var tvp=_gref.string.trim(virtualPath);var lvp=tvp.substr(0,tvp.lastIndexOf("/")).split("/");var i=lvp.length-1;lastPath=
lvp[i]!==""?lvp[i]+"/":i-1>0&&lvp[i-1]!==""?lvp[i-1]+"/":"";var bp=tvp;if(!bp.endsWith("/"))bp=tvp.substr(0,tvp.lastIndexOf("/"));bp=bp.split("/");if(bp.length>0){bp.pop();brokerPath=bp.join("/");if(!brokerPath.endsWith("/"))brokerPath+="/";if(brokerPath.endsWith(lastPath))brokerPath=brokerPath.substring(0,brokerPath.length-lastPath.length)}else brokerPath="/"}else{brokerPath="/";lastPath=""}var origin=(prot?`${prot}://`:"")+(host?host+(port?`:${port}`:""):"");ret={origin,port,"protocol":prot,"hostname":host,
"baseurl":baseURL,parameters,virtualPath,brokerPath,lastPath,resource,hash,"toUrl":function(params){return toUrl(this,params)},"getParam":function(name,params){return getParam(this,name,params)}}}catch(error){return error}return ret}function getTopWindow(wnd){if(wnd.parent&&wnd.parent!=wnd)try{var hasError=true;if(wnd.parent.location.href){hasError=false;return getTopWindow(wnd.parent)}}catch(error){hasError=true}finally{if(hasError)return wnd}else return wnd}Object.defineProperty(this,"gup",{"enumerable":true,
"configurable":false,"writable":false,"value":gup});Object.defineProperty(this,"getTopWindow",{"enumerable":true,"configurable":false,"writable":false,"value":getTopWindow});Object.defineProperty(this,"parseUrl",{"enumerable":true,"configurable":false,"writable":false,"value":parseUrl});Object.defineProperty(this,"toUrl",{"enumerable":true,"configurable":false,"writable":false,"value":toUrl});if(GLOBAL_VAR.console.logDebug)if(window.console!=undefined&&window.console.log!=undefined)window.console.log("Initializing "+
_className+" class. - "+(new Date).toString());return this}function Utils(){var _className=getFunctionName(arguments);function getCookie(name){var re=new RegExp(name+"=([^;]+)");var value=re.exec(document.cookie);return value!=null?unescape(value[1]):null}function removeCookie(name,path){var d=new Date(1);document.cookie=GLOBAL_VAR["class"]["privateREF#"].string.format("{0}=; expires={1}; path={2}",name,d.toString(),path||"/")}function uuidv4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,
function(c){var r=Math.random()*16|0,v=c=="x"?r:r&3|8;return v.toString(16)})}function getGUID(){return"{"+uuidv4().toUpperCase()+"}"}function getNewGWSID(){return generateGUID(32)}function generateGUID(len){var str="".padEnd(len,"x");return str.replace(/[xy]/g,function(c){var r=Math.random()*16|0,v=c=="x"?r:r&3|8;return v.toString(16)}).toUpperCase()}function maskToGUID(mask){if(mask&&typeof mask==="string")return mask.replace(/[xy]/g,function(c){var r=Math.random()*16|0,v=c=="x"?r:r&3|8;return v.toString(16)});
else return null}Object.defineProperty(this,"getCookie",{"enumerable":true,"configurable":false,"writable":false,"value":getCookie});Object.defineProperty(this,"getGUID",{"enumerable":true,"configurable":false,"writable":false,"value":getGUID});Object.defineProperty(this,"getNewUUIDv4GUID",{"enumerable":true,"configurable":false,"writable":false,"value":uuidv4});Object.defineProperty(this,"getNewGWSID",{"enumerable":true,"configurable":false,"writable":false,"value":getNewGWSID});Object.defineProperty(this,
"generateGUID",{"enumerable":true,"configurable":false,"writable":false,"value":generateGUID});Object.defineProperty(this,"maskToGUID",{"enumerable":true,"configurable":false,"writable":false,"value":maskToGUID});Object.defineProperty(this,"removeCookie",{"enumerable":true,"configurable":false,"writable":false,"value":removeCookie});if(GLOBAL_VAR.console.logDebug)if(window.console!=undefined&&window.console.log!=undefined)window.console.log("Initializing "+_className+" class. - "+(new Date).toString());
return this}function WebSocketObject(owner){var _className=getFunctionName(arguments);var _webSocket=null;var _opening=false;var _wsObjects=[];function getWSConstructor(){return"WebSocket"in window?WebSocket:MozWebSocket}function checkPendings(){_opening=false;if(_wsObjects.length>0)resolveWebSocket.apply(null,_wsObjects.shift())}function resolveWebSocket(url,binaryType,resolve,reject){var _ws;var _eventHandler=function(e){if(_ws){_ws.removeEventListener("open",_eventHandler);_ws.removeEventListener("close",
_eventHandler);_ws.removeEventListener("error",_eventHandler);try{var str="";var values=["type"];var srcValues=["readyState","url","binaryType","protocol"];values.forEach(function(item){str+=item+": "+e[item]+"\n\r"});srcValues.forEach(function(item){str+=item+": "+e.srcElement[item]+"\n\r"});GLOBAL_VAR.class["privateREF#"].console.log("Type:["+e.type+"], message: "+str,arguments)}catch(err){}}checkPendings()};try{GLOBAL_VAR.class["privateREF#"].console.log("New WebSocket connection: "+url,arguments);
_ws=new _webSocket(url);if(binaryType&&typeof _ws.binaryType!="undefined")_ws.binaryType=binaryType;_ws.addEventListener("open",_eventHandler);_ws.addEventListener("close",_eventHandler);_ws.addEventListener("error",_eventHandler);resolve(_ws)}catch(e){reject(e)}}function getNewWebSocket(url,binaryType){return new Promise(function(resolve,reject){if(!_opening){_opening=true;resolveWebSocket(url,binaryType,resolve,reject)}else _wsObjects.push([url,binaryType,resolve,reject])})}_webSocket=getWSConstructor();
Object.defineProperty(owner,"webSocket",{"enumerable":true,"configurable":false,"writable":false,"value":getNewWebSocket});if(GLOBAL_VAR.console.logDebug)if(window.console!=undefined&&window.console.log!=undefined)window.console.log("Initializing "+_className+" class. - "+(new Date).toString())}function arrayExtract(a,fn){var result=[];var i=a.length-1;while(i>=0){if(fn(a[i]))result=result.concat(a.splice(i,1));i--}return result}function stringRepeat(s,count){if(s==null)throw new TypeError("can't convert "+
s+" to object");var str=""+s;count=+count;if(count!=count)count=0;if(count<0)throw new RangeError("repeat count must be non-negative");if(count==Infinity)throw new RangeError("repeat count must be less than infinity");count=Math.floor(count);if(str.length==0||count==0)return"";if(str.length*count>=1<<28)throw new RangeError("repeat count must not overflow maximum string size");var rpt="";for(;;){if((count&1)==1)rpt+=str;count>>>=1;if(count==0)break;str+=str}return rpt}if(window.agentInfo&&(window.agentInfo.isMSIE||
window.agentInfo.isSafari)){var _getBoundingClientRect=HTMLElement.prototype.getBoundingClientRect;HTMLElement.prototype._getBoundingClientRect=_getBoundingClientRect;HTMLElement.prototype.getBoundingClientRect=function(){var bcr=this._getBoundingClientRect();bcr.x=bcr.left;bcr.y=bcr.top;return bcr}}if(!Array.extract)Object.defineProperty(Array.prototype,"extract",{"enumerable":false,"configurable":false,"writable":false,"value":function(fn){return arrayExtract(this,fn)}});if(!String.repeat)Object.defineProperty(String.prototype,
"repeat",{"enumerable":false,"configurable":false,"writable":false,"value":function(count){return stringRepeat(this,count)}});GLOBAL_VAR["class"]["ref#"]=this;initialize(this);return this}if(typeof window.helper==="undefined")var helper=new Helper;
(function(){function Environment(){var _ref=this;if(typeof window["agentInfo"]=="undefined")return;var _isEmbedded=false;try{_isEmbedded=window.top!=window}catch(error){_isEmbedded=true}var _currentDevicePixelRatio=1;var _initialDevicePixelRatio=typeof window.agentInfo=="undefined"||!agentInfo.isMobile?1:window.devicePixelRatio||1;var _detectedWidth=window.screen.availWidth;var _availWidth=window.screen.availWidth;var _detectedHeight=window.screen.availHeight;var _availHeight=window.screen.availHeight;
var _screenWidth=window.screen.availWidth;var _screenHeight=window.screen.availHeight;var _screenRawWidth=_screenWidth;var _screenRawHeight=_screenHeight;var _getWidth=typeof window.helper!="undefined"?function(elem){return helper.size.getWidth(elem)}:function(elem){return $(elem).width()};var _getHeight=typeof window.helper!="undefined"?function(elem){return helper.size.getHeight(elem)}:function(elem){return $(elem).height()};var _winWidth=_getWidth(window);var _winHeight=_getHeight(window);var _viewportWidth=
_detectedWidth;var _viewportHeight=_detectedHeight;var _deviceWidth=window.screen.width;var _deviceHeight=window.screen.height;var _sizeCalculationHolderElem=null;var _sizeCalculationHolderElemId="sizeCalculationHolder";var _xzoom=100;var _xzoomfn=null;var _supportsFullScreenMode=agentInfo.supportHTML5&&!(agentInfo.isIOS&&agentInfo.ipadModel==="pro")&&agentInfo.supportsFullScreen(document.documentElement);var _fullScreenAvailable=false;var _isFullscreen=false;var _environmentReady=false;var _resolutionModes=
{"fittobrowser":0,"fittoscale":1,"fittoscreen":2,"fixed":3};var _resolutionMode=_resolutionModes.fittobrowser;var _watchDog={"intervalId":null,"intervalTime":50,"width":null,"height":null,"isChanging":false,"isRunning":false,"currentDate":null,"lastEvent":null,"waitTime":window.agentInfo&&agentInfo.isMobile?500:50,"updateTime":window.agentInfo&&agentInfo.isMobile?100:50,"count":0};var _commandHandlerList=[];var _isResizingRunning=false;var _holderElemReady=false;var _orientationMedia=null;var _margin=
{"left":0,"top":0,"right":0,"bottom":0,"infullscreen":false,"notinfullscreen":false,"original":{"left":0,"top":0,"right":0,"bottom":0}};var _savedValues={"currentDevicePixelRatio":null,"detectedWidth":null,"availWidth":null,"detectedHeight":null,"availHeight":null,"screenWidth":null,"screenHeight":null,"screenRawWidth":null,"screenRawHeight":null,"winWidth":null,"winHeight":null,"viewportWidth":null,"viewportHeight":null};var _crop={"width":0,"height":0,"infullscreen":false,"notinfullscreen":false,
"original":{"width":0,"height":0}};var _mobileLimits={"_320x320":320*320,"_640x480":640*480,"_960x600":960*600,"_2048x1024":2048*1024};var _isIEMobileMode=false;var _zoomValues=[25,33.5,50,67,75,80,90,100,110,125,150,175,200,250,300,400,500,600,700,800,900,1E3,2E3,3E3,4E3,1E4];var _initialOrientation=null;function initialize(){applyPixelRatioRule(undefined,function(){return _initialDevicePixelRatio},function(value){_initialDevicePixelRatio=value});_isIEMobileMode=agentInfo.isMSIE&&agentInfo.isWindowsPhone&&
typeof window.matchMedia!="undefined";appendSizeCalculationHolder();var bodyReady=function(){if(document.body){document.body.appendChild(_sizeCalculationHolderElem);_holderElemReady=true;if(!agentInfo.isMobile){_isFullscreen=isFullscreen();assignZoomFn();_orientationMedia="landscape";if(_detectedWidth==0&&_detectedHeight==0)startWatchDog()}attachEvents();updateSizeValues();_initialOrientation=getOrientation();_environmentReady=true}else setTimeout(bodyReady,25)};helper.dom.loading(bodyReady);try{window.dispatchEvent(new CustomEvent("addStatusAPIVariables",
{"detail":[{"name":"size","title":"Size","get":function(){return _detectedWidth+"x"+_detectedHeight},"index":55}]}));window.dispatchEvent(new CustomEvent("addStatusAPIVariables",{"detail":[{"name":"zoom","title":"Zoom","get":function(){return _xzoom},"index":56}]}));window.dispatchEvent(new CustomEvent("addStatusAPIVariables",{"detail":[{"name":"rsize","title":"RSize","get":function(){return window.screen.width+"x"+window.screen.height},"index":56}]}))}catch(error){}}function getMatchMedia(){return window.matchMedia("(orientation: portrait)").matches?
"portrait":"landscape"}function getWndOrientation(){return typeof window.orientation=="undefined"||Math.abs(window.orientation)==90?"landscape":"portrait"}function getOrientation(){if(agentInfo.isMobile)if(_holderElemReady)if(window.matchMedia&&(agentInfo.isIOS&&agentInfo.ipadModel>=2||agentInfo.isWindowsPhone))return getMatchMedia();else if(agentInfo.isAndroid&&agentInfo.chromeVersion>"50")return getWndOrientation();else{var h=_getHeight(_sizeCalculationHolderElem);var w=_getWidth(_sizeCalculationHolderElem);
if(agentInfo.isAndroid&&!agentInfo.isChrome&&!agentInfo.isFirefox&&agentInfo.agentStr.indexOf("android 4.2.2")!=-1){var sw=window.screen.width;var sh=window.screen.height;if(sw==w){w=2;h=1}else if(sh==w){w=1;h=2}else{var wDif=Math.abs(sw-w);var hDif=Math.abs(sh-h);if(wDif>300||hDif>300)if(wDif>hDif){w=2;h=1}else{w=1;h=2}}}return w>=h?"landscape":"portrait"}else if(window.matchMedia)return getMatchMedia();else return getWndOrientation();else return _orientationMedia}function applyPixelRatioRule(dpr,
getDpr,setDpr){if(typeof setDpr==="undefined"||!(setDpr instanceof Function))setDpr=function(value){_currentDevicePixelRatio=value};if(typeof dpr!="undefined")setDpr(dpr);else{var vdpr=null;var cdpr=getDpr();if(agentInfo.isMobile){var w=window.screen.availWidth;var h=window.screen.availHeight;if(w<=320&&h<=320)vdpr=2;else if(w<=320&&h>=640||w*h<_mobileLimits._320x320||w>=640&&h<=320)vdpr=1;else if(cdpr>1&&(w<=480&&h<=640||h<=480&&w<=640||w*h<_mobileLimits._640x480)){if(!(agentInfo.isIOS&&agentInfo.isIphone&&
agentInfo.iosVersion==4))vdpr=1}else if(w>2048||h>2048||w*h>_mobileLimits._2048x1024);else if((w>=600&&h>=960||w>=960&&h>=600||w*h>_mobileLimits._960x600)&&cdpr>1)vdpr=1;else if((w<=1024&&h<=768||w<=768&&h<=1024)&&cdpr>1)vdpr=1;else if(cdpr>2)vdpr=2;else vdpr=window.devicePixelRatio||1}else vdpr=1;if(vdpr)setDpr(vdpr)}}function appendSizeCalculationHolder(){_sizeCalculationHolderElem=document.createElement("div");_sizeCalculationHolderElem.id=_sizeCalculationHolderElemId;_sizeCalculationHolderElem.style.height=
"100%";_sizeCalculationHolderElem.style.width="100%";_sizeCalculationHolderElem.style.backgroundColor="transparent";_sizeCalculationHolderElem.style.opacity="0.5";_sizeCalculationHolderElem.style.position="fixed";_sizeCalculationHolderElem.style.margin="0px";_sizeCalculationHolderElem.style.padding="0px";_sizeCalculationHolderElem.style.top="0px";_sizeCalculationHolderElem.style.left="0px";_sizeCalculationHolderElem.style.right="0px";_sizeCalculationHolderElem.style.bottom="0px";_sizeCalculationHolderElem.style.zIndex=
-9999999}function attachEvents(){window.addEventListener("resize",onresize,false)}function assignZoomFn(){var zoom=null;if(_isEmbedded)_xzoomfn=function(){return 100};else if(agentInfo.isFirefox)_xzoomfn=function(){var mediaQueryBinarySearch=function(property,unit,a,b,maxIter,epsilon){var matchMedia;var head,style,div;if(window.matchMedia)matchMedia=window.matchMedia;else{head=document.getElementsByTagName("head")[0];style=document.createElement("style");head.appendChild(style);div=document.createElement("div");
div.className="mediaQueryBinarySearch";div.style.display="none";document.body.appendChild(div);matchMedia=function(query){style.sheet.insertRule("@media "+query+"{.mediaQueryBinarySearch "+"{text-decoration: underline} }",0);var matched=getComputedStyle(div,null).textDecoration=="underline";style.sheet.deleteRule(0);return{matches:matched}}}var ratio=binarySearch(a,b,maxIter);if(div){head.removeChild(style);document.body.removeChild(div)}return ratio;function binarySearch(a,b,maxIter){var mid=(a+
b)/2;if(maxIter<=0||b-a<epsilon)return mid;var query="("+property+":"+mid+unit+")";if(matchMedia(query).matches)return binarySearch(mid,b,maxIter-1);else return binarySearch(a,mid,maxIter-1)}};return mediaQueryBinarySearch("min--moz-device-pixel-ratio","",0,10,20,1E-4)*100};else if(agentInfo.isMSIE)_xzoomfn=function(){return screen.deviceXDPI/screen.logicalXDPI*100};else if(window===window.top)if(agentInfo.isSafari)_xzoomfn=function(){return window.outerWidth/window.innerWidth*100};else _xzoomfn=
function(){return window.outerWidth/window.innerWidth*100};else if(agentInfo.isChrome)_xzoomfn=function(){if(window.devicePixelRatio!=1&&Math.abs(_getWidth(window)-window.screen.availWidth)>window.screen.availWidth*.01)return window.devicePixelRatio*100;else return window.outerWidth===window.screen.availWidth?window.devicePixelRatio*100:100};else _xzoomfn=function(){return 100}}function updateRealDevicePixelRatio(){if(document.hidden)_currentDevicePixelRatio=1;else{var rawXzoom=_xzoomfn();var dif=
999;if(_zoomValues.indexOf(rawXzoom)==-1){var i=0;while(rawXzoom>_zoomValues[i])i++;if(i==0)rawXzoom=_zoomValues[i];else rawXzoom=Math.abs(_zoomValues[i-1]-rawXzoom)<Math.abs(_zoomValues[i]-rawXzoom)?_zoomValues[i-1]:_zoomValues[i]}_xzoom=rawXzoom;_currentDevicePixelRatio=Math.floor(_xzoom)/100}}function setResolutionMode(value){switch(value.toString().toLowerCase()){case "1":case "fittoscale":_resolutionMode=_resolutionModes.fittoscale;break;case "2":case "fittoscreen":_resolutionMode=_resolutionModes.fittoscreen;
break;case "3":case "fixed":_resolutionMode=_resolutionModes.fixed;break;case "0":case "fittobrowser":default:_resolutionMode=_resolutionModes.fittobrowser;break}}function updateSizeValues(){if(agentInfo.isMobile){var orin=getOrientation();var max=Math.max(window.screen.width,window.screen.height);var min=Math.min(window.screen.width,window.screen.height);if(agentInfo.isIOS&&agentInfo.ipadModel==="pro"&&_holderElemReady)if(orin==="portrait"){max=window.screen.height;min=window.screen.width}else if(orin===
"landscape"){max=window.screen.height;min=window.screen.width}_deviceWidth=orin==="portrait"?min:max;_deviceHeight=orin==="portrait"?max:min;_screenRawWidth=_deviceWidth-_crop.width;_screenRawHeight=_deviceHeight-_crop.height;_screenHeight=_screenRawHeight*_currentDevicePixelRatio;_screenWidth=_screenRawWidth*_currentDevicePixelRatio;if(_holderElemReady){_viewportWidth=_getWidth(_sizeCalculationHolderElem)-_crop.width;_viewportHeight=_getHeight(_sizeCalculationHolderElem)-_crop.height}if(_supportsFullScreenMode)if(agentInfo.isMSIE&&
_isIEMobileMode){if(agentInfo.msieVersion>=11)if(getOrientation()=="portrait"){_detectedWidth=(screen.width||1)-_crop.width;_availWidth=_detectedWidth*_currentDevicePixelRatio-(_margin.left+_margin.right);_detectedHeight=(screen.height||1)-_crop.height;_availHeight=_detectedHeight*_currentDevicePixelRatio-(_margin.top+_margin.bottom)}else{_detectedHeight=(screen.width||1)-_crop.height;_availHeight=_detectedHeight*_currentDevicePixelRatio-(_margin.left+_margin.right);_detectedWidth=(screen.height||
1)-_crop.width;_availWidth=_detectedWidth*_currentDevicePixelRatio-(_margin.top+_margin.bottom)}}else if(_holderElemReady){_detectedWidth=_getWidth(_sizeCalculationHolderElem)-_crop.width;_detectedHeight=_getHeight(_sizeCalculationHolderElem)-_crop.height}else{_detectedWidth=_screenRawWidth;_detectedHeight=_screenRawHeight}else{_detectedWidth=_getWidth(window)-_crop.width;_detectedHeight=_getHeight(window)-_crop.height}if(!_holderElemReady){_viewportWidth=_detectedWidth;_viewportHeight=_detectedHeight}_availWidth=
_detectedWidth*_currentDevicePixelRatio-(_margin.left+_margin.right);_availHeight=_detectedHeight*_currentDevicePixelRatio-(_margin.top+_margin.bottom)}else{updateRealDevicePixelRatio();_deviceWidth=window.screen.width;_deviceHeight=window.screen.height;if(_isFullscreen){_screenWidth=window.screen.width-_crop.width;_screenHeight=window.screen.height-_crop.height}else{_screenWidth=window.screen.availWidth-_crop.width;_screenHeight=window.screen.availHeight-_crop.height}_screenRawWidth=_screenWidth;
_screenRawHeight=_screenHeight;_detectedWidth=_getWidth(window)-_crop.width;_availWidth=_detectedWidth*_currentDevicePixelRatio-(_margin.left+_margin.right);_detectedHeight=_getHeight(window)-_crop.height;_availHeight=_detectedHeight*_currentDevicePixelRatio-(_margin.top+_margin.bottom);if(_holderElemReady&&!_isFullscreen){_viewportWidth=_getWidth(_sizeCalculationHolderElem)-_crop.width;_viewportHeight=_getHeight(_sizeCalculationHolderElem)-_crop.height}else{_viewportWidth=_detectedWidth;_viewportHeight=
_detectedHeight}}}function setElement(elem){if(typeof elem!="undefined"){_sizeCalculationHolderElem=elem;if(_sizeCalculationHolderElem.id==undefined||_sizeCalculationHolderElem=="")_sizeCalculationHolderElem.id=_sizeCalculationHolderElemId;else _sizeCalculationHolderElemId=_sizeCalculationHolderElemId.id}}function environmentReady(fCallback){if(_environmentReady&&_holderElemReady){updateSizeValues();fCallback()}else{var count=0;var tempInterval=setInterval(function(){if(count<25){if(_environmentReady&&
_holderElemReady){clearInterval(tempInterval);updateSizeValues();fCallback()}}else{clearInterval(tempInterval);var str="Cannot trigger environment ready event";var ex=new Error(str);helper.console.error(str,ex);_environmentReady=false;_holderElemReady=false;updateSizeValues();fCallback()}count++},25)}}function isFullscreen(){return _getWidth(window)==_deviceWidth&&_getHeight(window)==_deviceHeight}function addEvent(event,handler){if(event==undefined||event==null||event=="")return"Event is undefined or null.";
if(handler==undefined||handler==null||handler=="")return"Handler is undefined or null.";event=event.toLowerCase();var item={"event":event,"handler":handler};var isContained=false;if(_commandHandlerList[event]==undefined)_commandHandlerList[event]=[];else for(var i=0;i<_commandHandlerList[event].length;i++)if(_commandHandlerList[event][i].handler==item.handler){isContained=true;break}if(!isContained)_commandHandlerList[event].push(item);return true}function removeEvent(event,handler){var ret=false;
if(event==undefined||event==null||event=="")return"Event is undefined or null.";if(handler==undefined||handler==null||handler=="")return"Handler is undefined or null.";event=event.toLowerCase();var item={"event":event,"handler":handler};if(_commandHandlerList[event]==undefined)return"Cannot find event. Event is not in the command list.";else for(var i=0;i<_commandHandlerList[event].length;i++)if(_commandHandlerList[event][i].handler.toString()==item.handler.toString()){_commandHandlerList[event].splice(i,
1);ret=true}return ret}function setDevicePixelRatio(dpr){_initialDevicePixelRatio=dpr;_currentDevicePixelRatio=dpr;updateSizeValues()}function getCurrentWidth(){return(_holderElemReady?_getWidth(_sizeCalculationHolderElem):_screenRawWidth)-_crop.width}function getCurrentHeight(){return(_holderElemReady?_getHeight(_sizeCalculationHolderElem):_screenRawHeight)-_crop.height}function startWatchDog(e){_watchDog.currentDate=(new Date).getTime();_watchDog.lastEvent=e;watchDesktopSize()}function watchDesktopSize(){if(!_watchDog.isRunning&&
!_watchDog.isChanging){_watchDog.isRunning=true;_watchDog.count=0;triggerEvent(["resizestart"]);var elem=_holderElemReady?_sizeCalculationHolderElem:window;_watchDog.intervalId=setInterval(function(){if(_watchDog.height!=_getHeight(elem)||_watchDog.width!=_getWidth(elem)){_watchDog.height=_getHeight(elem);_watchDog.width=_getWidth(elem);stopWatchDog();changeScreenSize()}else{_watchDog.count++;if(_watchDog.count>10&&_watchDog.height==_getHeight(window)&&_watchDog.width==_getWidth(window)){stopWatchDog();
changeScreenSize()}}},_watchDog.intervalTime)}}function stopWatchDog(){clearInterval(_watchDog.intervalId);_watchDog.intervalId=null;_watchDog.isRunning=false}function changeScreenSize(){if(_watchDog.isChanging==false){_watchDog.isChanging=true;var cHeight=null;var originalHeight=cHeight;var maxWaitTime=1E3;function updateScreenSize(){_isFullscreen=!!document.fullscreenElement;if(_isFullscreen){if(_crop.notinfullscreen){_crop.width=_crop.original.width;_crop.height=_crop.original.height}if(_margin.notinfullscreen){_margin.left=
_margin.original.left;_margin.top=_margin.original.top;_margin.right=_margin.original.right;_margin.bottom=_margin.original.bottom}if(window.Thinfinity.InitializationData){var cropfs=helper.object.getValue(Thinfinity.InitializationData.get("ENVIRONMENT"),"crop.infullscreen",null);if(cropfs){_crop.infullscreen=true;_crop.width=cropfs.width;_crop.height=cropfs.height}var marginfs=helper.object.getValue(Thinfinity.InitializationData.get("ENVIRONMENT"),"margin.infullscreen",null);if(marginfs){_margin.infullscreen=
true;_margin.left=marginfs.left;_margin.top=marginfs.top;_margin.right=marginfs.right;_margin.bottom=marginfs.bottom}}}else{if(_crop.infullscreen){_crop.width=_crop.original.width;_crop.height=_crop.original.height}if(_margin.infullscreen){_margin.left=_margin.original.left;_margin.top=_margin.original.top;_margin.right=_margin.original.right;_margin.bottom=_margin.original.bottom}if(window.Thinfinity.InitializationData){var cropfs=helper.object.getValue(Thinfinity.InitializationData.get("ENVIRONMENT"),
"crop.notinfullscreen",null);if(cropfs){_crop.notinfullscreen=true;_crop.width=cropfs.width;_crop.height=cropfs.height}var marginfs=helper.object.getValue(Thinfinity.InitializationData.get("ENVIRONMENT"),"margin.notinfullscreen",null);if(marginfs){_margin.notinfullscreen=true;_margin.left=marginfs.left;_margin.top=marginfs.top;_margin.right=marginfs.right;_margin.bottom=marginfs.bottom}}}_watchDog.height=null;_watchDog.width=null;_watchDog.isChanging=false;updateSizeValues();triggerEvent(["resize",
"resizeComplete","resizeend"]);if(agentInfo.isMobile){var orin=getOrientation();if(_initialOrientation!=orin){_initialOrientation=orin;triggerEvent(["orientationChange"])}}triggerEvent(_isFullscreen?"enterfullscreen":"exitfullscreen")}function waitForSizeChanged(){var fHeight=_getHeight(window);if(fHeight!=_winHeight&&fHeight==cHeight)setTimeout(function(){updateScreenSize()},_watchDog.waitTime);else{cHeight=fHeight;if(maxWaitTime<(new Date).getTime()-_watchDog.currentDate)setTimeout(function(){updateScreenSize()},
_watchDog.waitTime);else setTimeout(function(){waitForSizeChanged()},_watchDog.updateTime)}}waitForSizeChanged()}}function updateDevicePixelRatio(){applyPixelRatioRule(undefined,function(value){_currentDevicePixelRatio=value});updateSizeValues()}function launchFullscreenMode(elem){try{_isFullscreen=true;if(!elem)elem=document.documentElement;if(elem.requestFullscreen)elem.requestFullscreen().then(()=>{_isFullscreen=!!document.fullscreenElement});else if(elem.mozRequestFullScreen)elem.mozRequestFullScreen();
else if(elem.webkitRequestFullscreen)elem.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);else if(elem.msRequestFullscreen)elem.msRequestFullscreen();else if(typeof window.ActiveXObject!="undefined"){var wscript=new ActiveXObject("WScript.Shell");if(wscript!=null)wscript.SendKeys("{F11}")}else{_isFullscreen=false;helper.console.log("Your browser do not support FullScreen Mode")}}catch(error){_isFullscreen=false}}function exitFullscreenMode(elem){_isFullscreen=false;try{if(document.fullscreenElement){if(!elem)elem=
document.documentElement;if(elem.exitFullscreen)elem.exitFullscreen();else if(document.exitFullscreen)document.exitFullscreen().then(()=>{_isFullscreen=!!document.fullscreenElement});else if(elem.cancelFullscreen)elem.cancelFullscreen();else if(document.cancelFullscreen)document.cancelFullscreen();else if(elem.mozCancelFullScreen)elem.mozCancelFullScreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else if(elem.webkitExitFullscreen)elem.webkitExitFullscreen();else if(document.webkitExitFullscreen)document.webkitExitFullscreen();
else if(elem.webkitCancelFullscreen)elem.webkitCancelFullscreen();else if(document.webkitCancelFullscreen)document.webkitCancelFullscreen();else if(elem.msExitFullscreen)elem.msExitFullscreen();else if(document.msExitFullscreen)document.msExitFullscreen();else if(elem.msCancelFullscreen)elem.msCancelFullscreen();else if(document.msCancelFullscreen)document.msCancelFullscreen();else{_isFullscreen=true;logDebug("Your browser do not support FullScreen Mode")}}}catch(error){_isFullscreen=!!document.fullscreenElement}}
function onresize(e){_isFullscreen=isFullscreen();updateSizeValues(e);triggerEvent(["resize"]);startWatchDog(e)}function triggerEvent(eventNames){var atLeastOne=false;if(eventNames){if(typeof eventNames=="string")eventNames=[eventNames];for(var k=0;k<eventNames.length;k++)if(_commandHandlerList[eventNames[k].toLowerCase()]!=undefined)for(var i=0;i<_commandHandlerList[eventNames[k].toLowerCase()].length;i++){try{_commandHandlerList[eventNames[k].toLowerCase()][i]["handler"](_watchDog.lastEvent)}catch(error){}atLeastOne=
true}}return atLeastOne}function crop(sizes){if(!sizes)return _crop;else{helper.object.parseAttributes(_crop,sizes);_crop.original.width=_crop.width;_crop.original.height=_crop.height;updateSizeValues();startWatchDog()}}function getScaleAndLayout(){var dpr=parseInt(window.devicePixelRatio*100,10);var cdpr=parseInt(_currentDevicePixelRatio*100,10);if(dpr>cdpr){var fw=_screenRawWidth*100/_xzoom;var sal=fw*window.devicePixelRatio/(fw*_currentDevicePixelRatio)*100;return parseInt(sal/25,10)*25}else return 100}
function lookFor(wnd,key,onlyCurrentWindow){let getParent=function(wnd){try{if(wnd&&wnd.parent&&wnd.parent!=wnd&&wnd.parent.location.href)return wnd.parent}catch(error){return null}};var web7Info=null;try{if(wnd){web7Info=wnd[key];if(!onlyCurrentWindow)while(!web7Info&&wnd){wnd=getParent(wnd);if(wnd)web7Info=wnd[key]}}}catch(error){}return web7Info}function getEnvironmentInformation(){var wndp=null;var wb=true;var crossDomain,embeddedCross=false;try{if(!(parent&&parent.document))crossDomain=true}catch(error){crossDomain=
true}try{if(!window.top.document)embeddedCross=true}catch(error){embeddedCross=true}if(window.parent&&window!=window.parent)try{if(window.parent.location.href)wndp=window.parent;wb=wndp&&wndp.location.host==window.location.host&&wndp.location.protocol==window.location.protocol&&window.location.pathname.endsWith(wndp.location.pathname)}catch(error){wndp=window}else wndp=window;var mw=wndp!=window&&wndp==top?wndp:window;var inFullScreen=crossDomain||embeddedCross?false:isFullscreen();let wfe=window.frameElement==
null||window.frameElement.getAttribute("__webV7_frame__")!==null;let cReferrer=wfe?window.parent.document.referrer:document.referrer;var inw=wfe&&(mw.opener&&mw!=mw.opener||mw.document.referrer==mw.document.location.href||wndp==window&&window.document.referrer.indexOf("oturl")!=-1);let fIndex=undefined;let webV7=lookFor(window,"__webV7__",false);if(webV7)fIndex=inw=false;else{let twnd=helper.url.getTopWindow(window);if(twnd.opener==null&&(window.cookiePrefix==="VNC"||twnd.document.referrer===location.origin+
Thinfinity.global.variables.basePath)){inw=true;fIndex=false}}var referrer=inw?"":cReferrer;var sameOrigin=helper.url.parseUrl(referrer).toUrl("-vp-a-p")===helper.url.parseUrl(window.location).toUrl("-vp-a-p");var info={"withBroker":wb,"referrer":referrer,"fromIndex":inFullScreen||inw?false:typeof fIndex!="undefined"?fIndex:sameOrigin,"mainWindow":mw,"inFullScreen":inFullScreen,"inNewWindow":inw,"embedded":crossDomain||embeddedCross?false:mw!==window};Object.defineProperty(info,"webV7",{enumerable:true,
configurable:false,get:()=>{return lookFor(window,"__webV7__",true)}});return info}initialize();Object.defineProperty(_ref,"fixDevicePixelRatio",{"enumerable":true,"configurable":false,"writable":false,"value":function(){updateDevicePixelRatio()}});Object.defineProperty(_ref,"currentOrientation",{"enumerable":true,"configurable":false,"get":function(){return getOrientation()}});Object.defineProperty(_ref,"currentDevicePixelRatio",{"enumerable":true,"configurable":false,"get":function(){return _currentDevicePixelRatio},
"set":function(dpr){setDevicePixelRatio(dpr)}});Object.defineProperty(_ref,"initialDevicePixelRatio",{"enumerable":true,"configurable":false,"get":function(){return _initialDevicePixelRatio}});_ref.margin={};Object.defineProperty(_ref.margin,"left",{"enumerable":true,"configurable":false,"get":function(){return _margin.left},"set":function(value){_margin.left=_margin.original.left=value;updateSizeValues()}});Object.defineProperty(_ref.margin,"top",{"enumerable":true,"configurable":false,"get":function(){return _margin.top},
"set":function(value){_margin.top=_margin.original.top=value;updateSizeValues()}});Object.defineProperty(_ref.margin,"right",{"enumerable":true,"configurable":false,"get":function(){return _margin.right},"set":function(value){_margin.right=_margin.original.right=value;updateSizeValues()}});Object.defineProperty(_ref.margin,"bottom",{"enumerable":true,"configurable":false,"get":function(){return _margin.bottom},"set":function(value){_margin.bottom=_margin.original.bottom=value;updateSizeValues()}});
Object.defineProperty(_ref,"detectedWidth",{"enumerable":true,"configurable":false,"get":function(){return parseInt(_detectedWidth,10)}});Object.defineProperty(_ref,"detectedHeight",{"enumerable":true,"configurable":false,"get":function(){return parseInt(_detectedHeight,10)}});Object.defineProperty(_ref,"availWidth",{"enumerable":true,"configurable":false,"get":function(){return parseInt(_availWidth,10)}});Object.defineProperty(_ref,"availHeight",{"enumerable":true,"configurable":false,"get":function(){return parseInt(_availHeight,
10)}});Object.defineProperty(_ref,"rawWidth",{"enumerable":true,"configurable":false,"get":function(){return _screenRawWidth}});Object.defineProperty(_ref,"rawHeight",{"enumerable":true,"configurable":false,"get":function(){return _screenRawHeight}});Object.defineProperty(_ref,"width",{"enumerable":true,"configurable":false,"get":function(){return parseInt(_screenWidth,10)}});Object.defineProperty(_ref,"height",{"enumerable":true,"configurable":false,"get":function(){return parseInt(_screenHeight,
10)}});Object.defineProperty(_ref,"currentWidth",{"enumerable":true,"configurable":false,"get":function(){return getCurrentWidth()}});Object.defineProperty(_ref,"currentHeight",{"enumerable":true,"configurable":false,"get":function(){return getCurrentHeight()}});Object.defineProperty(_ref,"viewportWidth",{"enumerable":true,"configurable":false,"get":function(){return _viewportWidth}});Object.defineProperty(_ref,"viewportHeight",{"enumerable":true,"configurable":false,"get":function(){return _viewportHeight}});
if(typeof _ref["devicePixelRatio"]==undefined)Object.defineProperty(_ref,"devicePixelRatio",{"enumerable":true,"configurable":false,"get":function(){return _currentDevicePixelRatio}});Object.defineProperty(_ref,"scaleAndLayout",{"enumerable":true,"configurable":false,"get":function(){return getScaleAndLayout()}});Object.defineProperty(_ref,"resolutionMode",{"enumerable":true,"configurable":false,"get":function(){return _resolutionMode},"set":function(value){setResolutionMode(value)}});Object.defineProperty(_ref,
"setElement",{"enumerable":true,"configurable":false,"value":function(elem){setElement(elem)}});Object.defineProperty(_ref,"ready",{"enumerable":true,"configurable":false,"writable":false,"value":environmentReady});Object.defineProperty(_ref,"isFullscreen",{"enumerable":true,"configurable":false,"get":function(){return _isFullscreen}});Object.defineProperty(_ref,"supportsFullScreen",{"enumerable":true,"configurable":false,"get":function(){return _supportsFullScreenMode}});Object.defineProperty(_ref,
"fullScreenAvailable",{"enumerable":true,"configurable":false,"get":function(){return _fullScreenAvailable},"set":function(value){_fullScreenAvailable=value}});Object.defineProperty(_ref,"requestFullscreen",{"enumerable":true,"configurable":false,"writable":false,"value":launchFullscreenMode});Object.defineProperty(_ref,"exitFullscreen",{"enumerable":true,"configurable":false,"writable":false,"value":exitFullscreenMode});Object.defineProperty(_ref,"on",{"enumerable":true,"configurable":false,"writable":false,
"value":addEvent});Object.defineProperty(_ref,"off",{"enumerable":true,"configurable":false,"writable":false,"value":removeEvent});Object.defineProperty(_ref,"webapp",{"enumerable":true,"configurable":false,"get":function(){return typeof window.navigator.standalone!="undefined"?window.navigator.standalone:false}});Object.defineProperty(_ref,"trigger",{"enumerable":true,"configurable":false,"writable":false,"value":function(eventNames){return triggerEvent(eventNames)}});Object.defineProperty(_ref,
"update",{"enumerable":true,"configurable":false,"writable":false,"value":function(){return updateSizeValues()}});Object.defineProperty(_ref,"crop",{"enumerable":true,"configurable":false,"get":function(){return{"width":_crop.width,"height":_crop.height}},"set":function(sizes){return crop(sizes)}});Object.defineProperty(_ref,"xZoom",{"enumerable":true,"configurable":false,"get":function(){return _xzoom}});Object.defineProperty(_ref,"getEnvironmentInformation",{"enumerable":true,"configurable":false,
"writable":false,"value":getEnvironmentInformation});return _ref}try{Thinfinity!=undefined}catch(e){Thinfinity={}}Thinfinity.Environment=Environment})();window.environment=new Thinfinity.Environment;
(function(){const _swstate={"installing":0,"installed":1,"activating":2,"activated":3,"redundant":4};if(Object.freeze)Object.freeze(_swstate);function ServiceWorkerRegistrator(){var _ref=this;var _isAvailable=false;var _notSupportedMsg="Service Workers are not supported by your browser.";var _notSupportedHandler=function(){return _notSupportedMsg};var _notSupportedPromise=function(){return new Promise((resolve,reject)=>{reject(_notSupportedMsg)})};let _controller=null;function initialize(){if("serviceWorker"in
window.navigator)_isAvailable=true;else console.warn(`Service Worker is not available in your browser. "serviceWorker" is not in window.navigator object.`)}function initializeNewService(workerUrl,options){return new Promise(function(resolve,reject){if(options===undefined)options={};window.navigator.serviceWorker.register(workerUrl,options).then(()=>{getInstalledService(options.scope).then(resolve).catch(reject)}).catch(function(error){console.warn("Service worker registration failed:",error);_notSupportedMsg=
error;reject(error)})})}function unregisterService(clientURL,matchCase){return new Promise((resolve,reject)=>{clientURL=normalizeScope(clientURL);getInstalledService(clientURL).then(result=>{if(result&&result.unregister)result.unregister().then(resolve).catch(reject);else if(matchCase===false)unregisterServiceUnMatchCase(clientURL).then(resolve).catch(reject)}).catch(reject)})}function unregisterServiceUnMatchCase(clientURL){return new Promise((resolve,reject)=>{navigator.serviceWorker.getRegistrations().then(registrations=>
{if(registrations){clientURL=clientURL.toLowerCase();let proms=[];registrations.forEach(reg=>{let scope=reg.scope.replace(location.origin,"");if(scope.toLowerCase()===clientURL)proms.push(reg.unregister())});Promise.all(proms).then(resolve).catch(reject)}})})}function normalizeScope(scope){if(scope){if(scope==="/")return scope;let scopes=scope.split("/").filter(s=>s!=="");if(scopes.length==1)return`/${scopes[0]}/`;else return null}else return null}function getInstalledService(clientURL){return new Promise(function(resolve,
reject){if(clientURL!=="")navigator.serviceWorker.getRegistration(clientURL).then(resolve).catch(reject);else reject("Invalid clientURL")})}function getController(){return new Promise((resolve,reject)=>{if(navigator.serviceWorker.controller)resolve(navigator.serviceWorker.controller);else{console.warn(`Controller is not running, please wait...`);let timeoutId=null;timeoutId=setTimeout(()=>{reject(`ServiceWorker is not controlling the page..., trying to reload...`)},45E3);navigator.serviceWorker.ready.then(e=>
{clearTimeout(timeoutId);resolve(navigator.serviceWorker.controller)}).catch(err=>{clearTimeout(timeoutId);reject(null)})}})}function sendMessage(msg,port){return new Promise((resolve,reject)=>{let sendMsg=(msg,port)=>{_controller.postMessage(msg,port)};if(!_controller)getController().then(controller=>{_controller=controller;sendMsg(msg,port);resolve(true)}).catch(err=>{console.warn(`Cannot send message, controller is not ready yet, ${err.message||err}`);reject(err)});else{sendMsg(msg,port);resolve(true)}})}
initialize();Object.defineProperty(_ref,"isSupported",{"enumerable":true,"configurable":false,"get":_isAvailable?()=>{return true}:_notSupportedHandler});Object.defineProperty(_ref,"initializeNewService",{"enumerable":true,"configurable":false,"writable":false,"value":_isAvailable?initializeNewService:_notSupportedPromise});Object.defineProperty(_ref,"unregisterService",{"enumerable":true,"configurable":false,"writable":false,"value":_isAvailable?unregisterService:_notSupportedPromise});Object.defineProperty(_ref,
"getInstalledService",{"enumerable":true,"configurable":false,"writable":false,"value":_isAvailable?getInstalledService:_notSupportedPromise});Object.defineProperty(_ref,"sendMessage",{"enumerable":true,"configurable":false,"writable":false,"value":_isAvailable?sendMessage:_notSupportedPromise});return _ref}try{Thinfinity!==undefined}catch(e){Thinfinity={}}if(Thinfinity.Service===undefined)Thinfinity.Service={};Thinfinity.Service.Worker=new ServiceWorkerRegistrator;Object.defineProperty(Thinfinity.Service.Worker,
"state",{"enumerable":true,"configurable":false,"get":function(){return _swstate}})})();
(function(){var _ref=this;function initialize(){try{let basepath="<%=@BASEURL%>";if(window?.Thinfinity?.Service?.Worker?.unregisterService){let proms=[];let vRoot="/";let pathnames=window.location.pathname.split("/").filter(f=>{return f!==""});let vp=null;if(pathnames.length>0){if(basepath!=="/"){basepath=basepath.split("/").filter(f=>{return f!==""});basepath=basepath.pop();let idx=pathnames.findIndex(p=>{return p.toLowerCase()==basepath.toLowerCase()});if(idx!==null)pathnames=pathnames.splice(idx+
1)}vp=pathnames.length>0?`/${pathnames.pop()}/`:null;if(pathnames.length>0)vRoot=`/${pathnames.join("/")}/`}proms.push(Thinfinity.Service.Worker.unregisterService(vRoot,false));if(vp)proms.push(Thinfinity.Service.Worker.unregisterService(vp,false));Promise.all(proms).then(result=>{if(result[0]==true){if(window?.indexedDB)window.indexedDB.deleteDatabase("thinfinity.indexeddb.wvpn");console.log(`Service worker was successful uninstall for ${vRoot} scope, and IndexedDB was removed also.`)}if(result[1]==
true){console.log(`Service worker was successful uninstall for ${vp} scope.`);if(Thinfinity?.WAG?.Rules?.remove)Thinfinity.WAG.Rules.remove()}}).catch(err=>{console.log(`Cannot unregister Service Worker: ${err.message||err}`)})}}catch(error){console.log(`Cannot unregister service worker. ${error.message||error}`)}}initialize()})();
(function(){function Events(args){var _ref=this;var _events=[];var _args={fireEventArgs:{async:1}};var _noop=function(){};function initialize(){helper.object.parseAttributes(_args,args);if(!args.owner)args.owner=_ref;if(args.events)for(var name in args.events)on(name,args.events[name])}function on(events,handler){if(events==undefined||events==null||events=="")return"Event is undefined or null.";if(!(events instanceof Array))events=events.split(",");if(handler==undefined||handler==null||handler=="")return"Handler is undefined or null.";
events.forEach(function(eventName){if(_events[eventName]==undefined)_events[eventName]=[];_events[eventName].push(handler)});return args.owner}function off(events,handler){if(events==undefined||events==null||events=="")return"Event is undefined or null.";if(!(events instanceof Array))events=events.split(",");if(handler==undefined||handler==null||handler=="")return"Handler is undefined or null.";events.forEach(function(eventName){if(_events[eventName])for(var i=_events[eventName].length-1;i>=0;i--)if(_events[eventName][i]===
handler)_events[eventName].splice(i,1)});return args.owner}function fireEvent(){var name=null;var data=null;var jArgs=null;name=arguments[0];var response=[];if(_events[name]&&_events[name].length>0){if(arguments.length<=3){data=[arguments[1]];jArgs=arguments[2]}else{var len=arguments.length;jArgs=arguments[len-1];data=[];for(let i=1,t=len-1;i<t;i++)data.push(arguments[i])}if(!jArgs)jArgs=_args.fireEventArgs;for(var i=0;i<_events[name].length;i++)try{if(jArgs.async===false||jArgs.async===0)response[i]=
_events[name][i].apply(null,data);else{var time=parseInt(jArgs.async,10);if(time.toString()==="NaN")time=1;setTimeout(function(args){if(_events[name]&&_events[name][args[0]])response[i]=_events[name][args[0]].apply(null,data);if(i==_events[name].length-1)if(jArgs.callback)jArgs.callback(getResponse(response))},time,[i])}}catch(error){console.warn("Uncaught error: "+error.message,arguments);response[i]=error.message}}return getResponse(response)}function getResponse(a){Object.defineProperty(a,"preventExecution",
{"enumerable":true,"configurable":false,"get":function(){return a.find(function(elem){return elem===true})}});return a}function hasHandler(event){return _events[event]&&_events[event].length>0}function dispose(){_events=[];delete args.owner.on;delete args.owner.off;delete _ref["fireEvent"];on=off=fireEvent=_noop}initialize();let override=args.owner===_ref;Object.defineProperty(args.owner,"on",{"enumerable":true,"configurable":override,"value":on});Object.defineProperty(args.owner,"off",{"enumerable":true,
"configurable":override,"value":off});Object.defineProperty(_ref,"hasHandler",{"enumerable":true,"configurable":override,"value":hasHandler});Object.defineProperty(_ref,"dispose",{"enumerable":true,"configurable":override,"writable":override,"value":dispose});Object.defineProperty(_ref,"fireEvent",{"enumerable":true,"configurable":override,"value":fireEvent});return _ref}try{Thinfinity!=undefined}catch(e){Thinfinity={}}Thinfinity.Events=Events})();
function JSLogAPI(Server){var _TVNC=Server;this._log=function(msgType,msgText,msgDest){if(typeof msgDest=="undefined"||msgDest=="")msgDest="*";var cmd="cmd=jslogapi"+"&dest="+escape(msgDest)+"&type="+escape(msgType)+"&text="+escape(msgText);_TVNC.sendCmd(cmd)};this.logDebug=function(text,dest){this._log("debug",text,dest)};this.logInfo=function(text,dest){this._log("info",text,dest)};this.logError=function(text,dest){this._log("error",text,dest)};this.logWarning=function(text,dest){this._log("warning",
text,dest)};this.errorReport=function(reportData){this._log("report",reportData)}}function getISOTime(){var now=new Date;if(typeof now.toISOString!="undefined"){var ret=now.toISOString();ret=ret.substr(ret.indexOf("T")+1,12);return ret}else return("0"+now.getUTCHours()).substr(-2)+":"+("0"+now.getUTCMinutes()).substr(-2)+":"+("0"+now.getUTCSeconds()).substr(-2)+"."+now.getUTCMilliseconds()}
function logDebug(value){value=getISOTime()+": "+value;if(typeof MsgLogger=="undefined"){if(window.console&&window.console.log)window.console.log(value)}else logDebugW(value)}function logError(value){value=getISOTime()+": "+value;if(typeof MsgLogger=="undefined"){if(window.console&&window.console.error){window.console.error(value);return value}}else logErrorW(value)}var oMsgLogger=null;function logDebugW(value){if(!oMsgLogger)oMsgLogger=new MsgLogger;oMsgLogger.log(value)}
function logErrorW(value){logDebugW("ERROR: "+value)}
(function(){function TabFocusHook(args){var _ref=this;var _tabFocusHook=this;var _focusAttached=false;var _visibilityChange=null;var _hasFocus=null;var fireEvent=null;var _states=helper.object.createEnum({"BLUR":"blur","FOCUS":"focus"});var _lastState={"focus":null,"visible":null,"visibility":null,name:null,evt:null};var _vstates=helper.object.createEnum({"VISIBLE":"visible","HIDDEN":"hidden"});var _evisibility=helper.object.createEnum({"VISIBLE":"visible","HIDDEN":"hidden","OCCLUDED":"occluded",
"UNKNOWN":"unknown"});var _lastDocumentVisibility=null;var te=null;function initialize(){te=new Thinfinity.Events({"owner":_ref});fireEvent=te.fireEvent;_lastState.focus=!isHidden()?_states.FOCUS:_states.BLUR;_lastState.visible=document.visibilityState;_lastState.visibility=getVisibilityName(_lastState.visible,_lastState.focus);observeDocumentVisibility()}function getVisibilityName(visibility,focus){if(visibility===_vstates.VISIBLE)return focus===_states.FOCUS?_evisibility.VISIBLE:_evisibility.OCCLUDED;
else if(visibility===_vstates.HIDDEN)return isMinimized()?_evisibility.HIDDEN:_evisibility.OCCLUDED;else return _evisibility.UNKNOWN}function isMinimized(){return window.screenX<-window.screen.availWidth&&window.screenY<-window.screen.availHeight}function visibilityChange(e,callback){e=e||window.event;e.stopPropagation();e.preventDefault();var v=true;var h=false;var map={"pageshow":v,"focus":v,"focusin":v,"blur":h,"focusout":h,"pagehide":h,"visibilitychange":v};if(e.type in map){if(document.visibilityState!==
_lastDocumentVisibility){if(document.visibilityState===_vstates.VISIBLE)notify("visible",_vstates.VISIBLE,e);else notify("visible",_vstates.HIDDEN,e);_lastDocumentVisibility=document.visibilityState}_hasFocus=map[e.type]&&!isHidden()&&document.hasFocus();if(_hasFocus)notify("focus",_states.FOCUS,e);else notify("focus",_states.BLUR,e);notify("visibility","visibility",e,getVisibilityName(_lastState.visible,_lastState.focus));if(callback)callback()}map=h=v=null;return false}function isHidden(){return document.hidden}
function notify(propName,evtName,e,value){var lv=value||evtName;if(_lastState[propName]!=lv){e.visibilityState=value||evtName;_lastState.evt=e;_lastState.name=evtName;fireEvent(evtName,e,{"async":false})}_lastState[propName]=lv}function observeDocumentVisibility(callback){if(!_focusAttached){_focusAttached=true;_visibilityChange=function(e){visibilityChange(e,callback)};var hidden="hidden";if(hidden in document)document.addEventListener("visibilitychange",_visibilityChange,false);else if(hidden==
"mozHidden")document.addEventListener("mozvisibilitychnage",_visibilityChange,false);else if(hidden=="webkitHidden")document.addEventListener("webkitvisibilitychange",_visibilityChange,false);else if(hidden=="msHidden")document.addEventListener("msvisibilitychange",_visibilityChange,false);else if("onfocusin"in document)document.onfocusin=document.onfocusout=_visibilityChange;window.onpageshow=window.onpagehide=window.onfocus=window.onblur=_visibilityChange;if(document[hidden]!==undefined)_visibilityChange({"type":document[hidden]?
"blur":"focus","stopPropagation":function(){return},"preventDefault":function(){return}})}else if(_lastState.name)fireEvent(_lastState.name,_lastState.evt,{"async":false});else{let evtName=document.hasFocus()?"focus":"blur";fireEvent(evtName,window.event||{},{"async":false})}if(callback)callback()}function unobserveDocumentVisibility(){var hidden="hidden";if(hidden in document)document.removeEventListener("visibilitychange",_visibilityChange,false);else if(hidden=="mozHidden")document.removeEventListener("mozvisibilitychnage",
_visibilityChange,false);else if(hidden=="webkitHidden")document.removeEventListener("webkitvisibilitychange",_visibilityChange,false);else if(hidden=="msHidden")document.removeEventListener("msvisibilitychange",_visibilityChange,false);else if("onfocusin"in document){_visibilityChange=function(){};document.onfocusin=document.onfocusout=null}_visibilityChange=function(){};window.onpageshow=window.onpagehide=window.onfocus=window.onblur=null;_focusAttached=false;te.dispose()}initialize();Object.defineProperty(_tabFocusHook,
"start",{"enumerable":true,"configurable":false,"writable":false,"value":observeDocumentVisibility});Object.defineProperty(_tabFocusHook,"stop",{"enumerable":true,"configurable":false,"writable":false,"value":unobserveDocumentVisibility});Object.defineProperty(_tabFocusHook,"isHidden",{"enumerable":true,"configurable":false,"get":isHidden});return _ref}try{Thinfinity!=undefined}catch(e){Thinfinity={}}Thinfinity.TabFocusHook=new TabFocusHook})();
var HTML5Storage=new function(){var _storageType={"LOCAL":"localStorage","SESSION":"sessionStorage"};var _self=this;var _defaultStorage=_storageType.LOCAL;var _isSupported=function(){return _supports(_defaultStorage)};var _getStorageTypes=function(){return JSON.parse(JSON.stringify(_storageType))};var _supports=function(storageName){try{return storageName in window&&window[storageName]instanceof Storage}catch(err){return false}};var _read=function(storageName,storageType){if(typeof storageType=="undefined")storageType=
_defaultStorage;if(!_supports(storageType))return null;var storage=window[storageType];try{return storage.getItem(storageName)}catch(err){}return null};var _remove=function(storageName,storageType){if(typeof storageType=="undefined")storageType=_defaultStorage;if(!_supports(storageType))return;var storage=window[storageType];try{storage.removeItem(storageName)}catch(err){}};var _write=function(storageName,value,storageType){if(typeof storageType=="undefined")storageType=_defaultStorage;if(!_supports(storageType))return;
var storage=window[storageType];try{storage.setItem(storageName,value)}catch(err){}};var _readObject=function(storageName,storageType){try{var objData=JSON.parse(_read(storageName,storageType));if(objData!=null&&typeof objData!="undefined")return objData}catch(err){}return null};var _writeObject=function(storageName,value,storageType){try{_write(storageName,JSON.stringify(value),storageType)}catch(err){}};Object.defineProperty(this,"isSupported",{"enumerable":true,"configurable":false,"value":_isSupported});
Object.defineProperty(this,"read",{"enumerable":true,"configurable":false,"writable":false,"value":_read});Object.defineProperty(this,"readObject",{"enumerable":true,"configurable":false,"writable":false,"value":_readObject});Object.defineProperty(this,"remove",{"enumerable":true,"configurable":false,"writable":false,"value":_remove});Object.defineProperty(this,"storageType",{"enumerable":true,"configurable":false,"get":_getStorageTypes});Object.defineProperty(this,"supports",{"enumerable":true,"configurable":false,
"writable":false,"value":_supports});Object.defineProperty(this,"write",{"enumerable":true,"configurable":false,"writable":false,"value":_write});Object.defineProperty(this,"writeObject",{"enumerable":true,"configurable":false,"writable":false,"value":_writeObject});return this};
var base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(input){var output="";var chr1,chr2,chr3,enc1,enc2,enc3,enc4;var i=0;input=base64._utf8_encode(input);while(i<input.length){chr1=input.charCodeAt(i++);chr2=input.charCodeAt(i++);chr3=input.charCodeAt(i++);enc1=chr1>>2;enc2=(chr1&3)<<4|chr2>>4;enc3=(chr2&15)<<2|chr3>>6;enc4=chr3&63;if(isNaN(chr2))enc3=enc4=64;else if(isNaN(chr3))enc4=64;output=output+this._keyStr.charAt(enc1)+this._keyStr.charAt(enc2)+
this._keyStr.charAt(enc3)+this._keyStr.charAt(enc4)}return output},decode:function(input){var output="";var chr1,chr2,chr3;var enc1,enc2,enc3,enc4;var i=0;input=input.replace(/[^A-Za-z0-9\+\/=]/g,"");while(i<input.length){enc1=this._keyStr.indexOf(input.charAt(i++));enc2=this._keyStr.indexOf(input.charAt(i++));enc3=this._keyStr.indexOf(input.charAt(i++));enc4=this._keyStr.indexOf(input.charAt(i++));chr1=enc1<<2|enc2>>4;chr2=(enc2&15)<<4|enc3>>2;chr3=(enc3&3)<<6|enc4;output=output+String.fromCharCode(chr1);
if(enc3!=64)output=output+String.fromCharCode(chr2);if(enc4!=64)output=output+String.fromCharCode(chr3)}output=base64._utf8_decode(output);return output},_utf8_encode:function(string){string=string.replace(/\r\n/g,"\n");var utftext="";for(var n=0;n<string.length;n++){var c=string.charCodeAt(n);if(c<128)utftext+=String.fromCharCode(c);else if(c>127&&c<2048){utftext+=String.fromCharCode(c>>6|192);utftext+=String.fromCharCode(c&63|128)}else{utftext+=String.fromCharCode(c>>12|224);utftext+=String.fromCharCode(c>>
6&63|128);utftext+=String.fromCharCode(c&63|128)}}return utftext},_utf8_decode:function(utftext){var string="";var i=0;var c=c1=c2=0;while(i<utftext.length){c=utftext.charCodeAt(i);if(c<128){string+=String.fromCharCode(c);i++}else if(c>191&&c<224){c2=utftext.charCodeAt(i+1);string+=String.fromCharCode((c&31)<<6|c2&63);i+=2}else{c2=utftext.charCodeAt(i+1);c3=utftext.charCodeAt(i+2);string+=String.fromCharCode((c&15)<<12|(c2&63)<<6|c3&63);i+=3}}return string}};
(function(){function VisualEffect(args){var _ref=this;var _args={"id":null,"container":null,"btnCancelId":"cancelRecnx","allowReconnectionDialog":true,"reconnection":{"timeout":2E4},"events":{"onCancel":null}};var _elements={"wall":null,"panel":null,"button":null};function initialize(args){helper.object.parseAttributes(_args,args,"MATCH");if(supportGrayScale())helper.style.replace(_args.container,"grayscale","color")}function supportGrayScale(){var supportGrayscale=false;switch(true){case agentInfo.isMSIE&&
agentInfo.msieVersion<=10:break;default:supportGrayscale=true;break}return supportGrayscale}function getNextHighestZindex(obj){var highestIndex=0;var currentIndex=0;var elArray=Array();if(obj)elArray=obj.getElementsByTagName("*");else elArray=document.getElementsByTagName("*");for(var i=0;i<elArray.length;i++){if(elArray[i].currentStyle)currentIndex=parseFloat(elArray[i].currentStyle["zIndex"]);else if(window.getComputedStyle)currentIndex=parseFloat(document.defaultView.getComputedStyle(elArray[i],
null).getPropertyValue("z-index"));if(!isNaN(currentIndex)&&currentIndex>highestIndex)highestIndex=currentIndex}return highestIndex+1}function toGrayScale(connectionLost){if(!_elements.wall){_elements.wall=helper.dom.appendJsonElement({"parentElement":_args.container,"type":"div","attributes":{"id":_args.id,"class":"reconnectDivId in","style":helper.string.format("z-index:{0};",getNextHighestZindex(document.body))}});if(supportGrayScale())helper.style.replace(_args.container,"color","grayscale")}if(connectionLost&&
_args.allowReconnectionDialog&&!_elements.panel)setAbortPanel();return true}function setAbortPanel(){_elements.panel=helper.dom.appendJsonElement({"parentElement":_args.container,"type":"div","attributes":{"style":helper.string.format("-webkit-box-shadow: 1px 1px 15px #000;-moz-box-shadow: 1px 1px 15px #000; position:absolute; top:50%; left:50%; transform:translate3d(-50%, -50%, 0); ;z-index:{0}; padding:20px;;-moz-border-radius: 7px;border-radius: 7px; font-size:14px; font-weight:normal; text-align:center",
getNextHighestZindex(document.body)),"class":"popup connectionLost"},"content":consts.connLostReconnecting+"</br>"});_elements.button=helper.dom.appendJsonElement({"parentElement":_elements.panel,"type":"button","attributes":{"id":_args.btnCancelId,"class":"p-button"},"events":{"click":function(e){if(helper.object.existsPath(_args,"events.onCancel"))try{_args.events.onCancel(e)}catch(error){helper.console.error(error.message,error,arguments)}}},"content":consts.abort})}function toColor(){if(_elements.wall){helper.style.replace(_elements.wall,
"in","out");helper.style.replace(_args.container,"grayscale","color");if(_elements.panel){_args.container.removeChild(_elements.panel);_elements.button=null;_elements.panel=null}_args.container.removeChild(_elements.wall);_elements.wall=null}return true}initialize(args);Object.defineProperty(_ref,"toGrayScale",{"enumerable":true,"configurable":false,"value":toGrayScale});Object.defineProperty(_ref,"toColor",{"enumerable":true,"configurable":false,"value":toColor});return this}try{Thinfinity!=undefined}catch(e){Thinfinity=
{}}Thinfinity.VisualEffect=VisualEffect})();
(function(){function Popups(){var _ref=this;var _establishingDialogDefProp={};var _SPLASHDIALOG_ID="establishingConnection";var splashDialogBackgroundStyles=helper.object.createEnum("NONE","TRANSPARENT","TRANSLUCID","OPAQUE");var _SPLASHDIALOG_BCK_STYLE=splashDialogBackgroundStyles.NONE;var _establishingDialog={"timeout":1E3,"timeoutId":null};var _splashDialog={"background":null,"container":null,"body":null,"h2":null,"h4":null,"img":null,"btnClose":null};var _kbUnbound=false;var _PARENTOBJECT=null;
var _POPUPDIALOG=null;var _CLOSE_DIALOG=2;var _UNBLOCKING=false;var _defaultBlockUIValues={"css":{"padding":0,"margin":0,"width":"100%","height":"100%","top":"0px","left":"0px","textAlign":"center","backgroundColor":"transparent","border":"none","cursor":"auto","z-index":"900000"},"overlayCSS":{"backgroundColor":"transparent"},"centerX":true,"centerY":true,"events":{}};var _growls={"dialogs":[],"top":15,"height":30,"type":helper.object.createEnum("MESSAGE","INFO","WARNING","ERROR")};var _consts=helper.object.createEnum({"YES":1,
"NO":0});var _offlineIcons={"icons":["alertIco","disconnectedIco"],"elems":[]};function initialize(){helper.dom.interactive(function(){if(!_PARENTOBJECT)_PARENTOBJECT=document.body;_splashDialog.container=document.getElementById(_SPLASHDIALOG_ID);_splashDialog.container?attachSplashDialog():createSplashDialog();setOfflineIcons()})}function setOfflineIcons(){for(var i=0,t=_offlineIcons.icons.length;i<t;i++){var icon=_offlineIcons.icons[i];if(!document.getElementById(icon))_offlineIcons.elems.push(helper.dom.appendJsonElement({"parentElement":document.body,
"type":"div","attributes":{"id":icon,"class":"offline-Icons "+icon}}))}}function getBtnId(){return"ACTION_BTN_"+helper.utils.generateGUID(10)}function popupDialog(owner,noPropagateEvents){this.owner=owner||(typeof THIN!="undefined"?THIN:typeof TVNC!="undefined"?TVNC:null);this.opened=false;this.currentParent=null;this.parentDialog=null;this.dlgId="";this.noPropagateEvents=typeof noPropagateEvents!=="undefined"?noPropagateEvents:true;this.captureKeyboard=false;this.verticalMiddle=false;establishingDialogHide();
this.block=function(jData){if(arguments.length>1&&!isJsonData(jData))jData={"id":arguments[0],"message":arguments[1],"parentElement":arguments[2],"events":{"block":arguments.length>3?arguments[3]:null,"unblock":arguments.length>4?arguments[4]:null}};if(jData){if(jData.message&&jData.message instanceof HTMLElement)jData.message=jData.message.outerHTML;jData=helper.object.extend(helper.object.clone(_defaultBlockUIValues),jData,false);var defaultKey=false;if(jData.buttons&&jData.buttons.length>0)defaultKey=
jData.buttons.find(function(elem){return typeof elem.defaultKey!=="undefined"});jData.onBlock=function(){self.hideCursor();self.dlgId=jData.id;self.checkSize();$(self.msg).css({"visibility":"visible"});if(self.captureKeyboard||defaultKey)self.bindKeyboard(jData.buttons);if(jData.events.block instanceof Function)jData.events.block()};jData.onUnblock=function(){if(jData.parentElement&&!!_POPUPDIALOG&&_POPUPDIALOG.opened&&typeof _POPUPDIALOG.unblockAction!="undefined")_POPUPDIALOG.unblockAction();if(jData.events.unblock instanceof
Function)jData.events.unblock()};if(jData.parentElement){if(_UNBLOCKING==false){self.currentParent=jData.parentElement;self.parentDialog=_POPUPDIALOG;$(jData.parentElement).block(jData)}}else{self.currentParent=null;self.parentDialog=_POPUPDIALOG?_POPUPDIALOG.parentDialog:null;$.blockUI(jData)}}else{helper.console.warning(helper.string.format("Cannot initialize popup, {0} is undefined or null.","jData"),arguments);return}_POPUPDIALOG=this;_POPUPDIALOG.opened=true};this.unblock=function(callback){var _e=
window.event;_UNBLOCKING=true;if(typeof callback=="undefined"&&_POPUPDIALOG&&_POPUPDIALOG.unblockAction)callback=_POPUPDIALOG.unblockAction;if(!this.currentParent)$.unblockUI({onUnblock:function(){try{self.showCursor(_e);self.unbindKeyboard();if(callback)callback();restoreHooks();if(typeof _SESSIONCONTROLLER!="undefined")_SESSIONCONTROLLER.activate()}catch(error){helper.console.warning(helper.string.format("Cannot close popup - error: {0}",error.message||error),arguments)}finally{_UNBLOCKING=false}}});
else $(this.currentParent).unblock({onUnblock:function(){try{self.showCursor(_e);self.unbindKeyboard();$(self.currentParent).focus();if(self.notParentOrTop())restoreHooks();if(callback)callback()}catch(error){helper.console.warning(helper.string.format("Cannot close popup - error: {0}",error.message||error),arguments)}finally{_UNBLOCKING=false}}});if(_POPUPDIALOG)_POPUPDIALOG=_POPUPDIALOG.parentDialog};this.hideCursor=function(){var owner=this.owner;if(owner&&owner.overrideCursor===false&&owner.vncdiv&&
owner.cursorCanvas){owner.vncdiv.style.cursor="default";owner.cursorCanvas.style.visibility="hidden"}};this.showCursor=function(e){var owner=this.owner;if(owner&&owner.overrideCursor===false&&owner.vncdiv&&owner.cursorCanvas){if(e)owner.mouseMoveAsync.position={"x":e.pageX,"y":e.pageY};setTimeout(function(){owner.vncdiv.style.cursor="none";owner.cursorCanvas.style.visibility="visible";owner.cursorCanvas.style.display="block"},100)}};this.notParentOrTop=function(){var getTopElemFromOwner=function(self){return self.owner&&
self.owner.containerId?document.getElementById(self.owner.containerId):null};return!this.currentParent||this.currentParent==getTopElemFromOwner(this)};this.checkSize=function(){var divButtons=$("#"+this.dlgId+" .divbuttons")[0];var divBody=$("#"+this.dlgId+" .messageBody")[0];if(divButtons&&divButtons.scrollWidth>divButtons.offsetWidth||divBody&&divBody.scrollWidth>divBody.offsetWidth){var sw1=!divButtons?0:Math.ceil(divButtons.scrollWidth/10+1)*10;var sw2=!divBody?0:Math.ceil(divBody.scrollWidth/
10+1)*10;var sw=Math.max(sw1,sw2);var diff=sw-divButtons.offsetWidth;$(divButtons).width(sw);$(divBody).width(sw);var w=parseInt($(divButtons).parent().width(),10)+diff+"px !important";$(divButtons).parent().attr("style","width:"+w);$("#"+_POPUPDIALOG.dlgId).attr("style","max-width: 100%; width: "+w)}if(this.verticalMiddle){var d=document.getElementById(_POPUPDIALOG.dlgId);if(d){var h=d.offsetHeight;var s=document.body.clientHeight;$("#"+_POPUPDIALOG.dlgId).css({"top":(h>s?0:(s-h)*.35)<<0+"px"})}}};
this.bindKeyboard=function(defaultButtons){if(this.owner!=null&&!_kbUnbound&&this.notParentOrTop()){disableHooks();if(typeof _SESSIONCONTROLLER!="undefined"&&_SESSIONCONTROLLER.isActive())_SESSIONCONTROLLER.deactivate()}var dlg=$("#"+this.dlgId);dlg.focus();dlg.bind("keydown",function(e){if(defaultButtons){if(self.noPropagateEvents){e.stopPropagation();e.preventDefault()}var handler=defaultButtons.find(function(elem){return elem.defaultKey&&(elem.defaultKey===e.keyCode||elem.defaultKey instanceof
Array&&elem.defaultKey.indexOf(e.keyCode)!=-1)});if(handler)try{handler.action()}catch(error){helper.console.warning(helper.string.format("Cannot complete execution of the default handler [Button:{0}]",handler.value),arguments)}}else{if(e.target.tagName=="INPUT"||e.target.tagName=="TEXTAREA")return;if(self.noPropagateEvents){e.stopPropagation();e.preventDefault()}var selectedBtn=$("#"+self.dlgId+" .divbuttons .selected");switch(e.keyCode){case 13:$(".divbuttons .selected").click();break;case 32:$(".divbuttons .selected").click();
case 27:$("#PopupTBBtnClose").click();break;case 9:case 39:case 40:var nextElement=selectedBtn.next("a");if(nextElement[0]){selectedBtn.removeClass("selected");nextElement.addClass("selected")}else{selectedBtn.removeClass("selected");$(".divbuttons a").first().addClass("selected")}break;case 37:case 38:var prevElement=selectedBtn.prev("a");if(prevElement[0]){selectedBtn.removeClass("selected");prevElement.addClass("selected")}else{selectedBtn.removeClass("selected");$(".divbuttons a").first().addClass("selected")}break}}})};
this.unbindKeyboard=function(){if(self.dlgId!="")$("#"+self.dlgId).unbind("keydown")};var self=this;return this}function createSplashDialog(){var basePath=helper.object.getValue(Thinfinity.global,"variables.basePath","/");_splashDialog.background=helper.dom.appendJsonElement({"parentElement":_PARENTOBJECT,"type":"div","attributes":{"id":_SPLASHDIALOG_ID+"_bck","class":"popup establishingConnection-background hidden "+getBackgroundStyleClass(_SPLASHDIALOG_BCK_STYLE)}});_splashDialog.container=helper.dom.appendJsonElement({"parentElement":_PARENTOBJECT,
"type":"div","attributes":{"id":_SPLASHDIALOG_ID,"class":"popup establishingConnection noDisplay"}});_splashDialog.body=helper.dom.appendJsonElement({"parentElement":_splashDialog.container,"type":"div","attributes":{"class":"msgBody"}});_splashDialog.h2=helper.dom.appendJsonElement({"parentElement":_splashDialog.body,"type":"h2","attributes":{"class":"title"},"content":consts.establishingConn});_splashDialog.img=helper.dom.appendJsonElement({"parentElement":_splashDialog.body,"type":"img","attributes":{"id":"ecWaiting",
"src":basePath+"common/images/core/loading.gif","class":"loading"},"content":consts.establishingConn});_splashDialog.h4=helper.dom.appendJsonElement({"parentElement":_splashDialog.body,"type":"h4","attributes":{"class":"message"},"content":"&nbsp"});_splashDialog.btnClose=helper.dom.appendJsonElement({"parentElement":_splashDialog.body,"type":"a","content":"Close","attributes":{"class":"popuplink selected","href":"#"},"events":{"touchend, click":function(e){suppressMouseTouchEvent(e);window.close();
if(document.referrer&&location.href!=document.referrer)location.href=document.referrer}}});helper.dom.addEvent(_splashDialog.container,"transitionend",transitionEnd,false)}function transitionEnd(e){clearTimeout(_establishingDialog.timeoutId);if(!helper.style.hasClass(_splashDialog.container,"noDisplay")){_splashDialog.h2.innerHTML="";_splashDialog.h4.innerHTML="";helper.style.add(_splashDialog.img,"hidden");helper.style.replace(_splashDialog.container,"show hidden","noDisplay")}}function getBackgroundStyleClass(value){var _className=
value;switch(value){case splashDialogBackgroundStyles.NONE:_className="";break;case splashDialogBackgroundStyles.TRANSPARENT:_className="transparent";break;case splashDialogBackgroundStyles.TRANSLUCID:_className="translucid";break;case splashDialogBackgroundStyles.OPAQUE:_className="opaque";break}return _className}function setBackgroundStyle(value){helper.style.remove(_splashDialog.background,getBackgroundStyleClass(_SPLASHDIALOG_BCK_STYLE));helper.style.remove(_splashDialog.container,getBackgroundStyleClass(_SPLASHDIALOG_BCK_STYLE));
_SPLASHDIALOG_BCK_STYLE=value;helper.style.add(_splashDialog.background,getBackgroundStyleClass(_SPLASHDIALOG_BCK_STYLE));helper.style.add(_splashDialog.container,getBackgroundStyleClass(_SPLASHDIALOG_BCK_STYLE))}function attachSplashDialog(){_splashDialog.body=_splashDialog.container.querySelector(".msgBody");_splashDialog.h2=_splashDialog.body.querySelector(".title");_splashDialog.img=_splashDialog.body.querySelector(".ecWaiting");_splashDialog.h4=_splashDialog.body.querySelector(".message");_splashDialog.btnClose=
_splashDialog.body.querySelector(".btnClose");helper.dom.addEvent(_splashDialog.btnClose,["touchend","click"],function(e){suppressMouseTouchEvent(e);window.close();if(document.referrer&&location.href!=document.referrer)location.href=document.referrer})}function establishingDialogShow(title,text,animated,closeButton){if(_splashDialog.container){helper.style.add(_splashDialog.img,"display:"+(animated?"inline-block":"none")+";");helper.style.remove(_splashDialog.img,"hidden");helper.style.add(_splashDialog.btnClose,
"display:"+(closeButton?"inline-block":"none")+";");_splashDialog.h2.innerHTML=title;_splashDialog.h4.innerHTML=text;helper.style.replace(_splashDialog.container,"noDisplay hidden","show");if(_SPLASHDIALOG_BCK_STYLE!==splashDialogBackgroundStyles.NONE)helper.style.replace(_splashDialog.background,"hidden","show")}}function establishingDialogHide(){if(_splashDialog.container&&helper.style.hasClass(_splashDialog.container,"show")){clearTimeout(_establishingDialog.timeoutId);_establishingDialog.timeoutId=
setTimeout(transitionEnd,_establishingDialog.timeout);helper.style.replace(_splashDialog.container,"show","hidden");if(_SPLASHDIALOG_BCK_STYLE!==splashDialogBackgroundStyles.NONE)helper.style.replace(_splashDialog.background,"show","hidden")}}function isJsonData(data){return["json","object"].indexOf(helper.object.getDataTypeOf(data))>=0}function choiceDialog(jData){if(arguments.length>1&&!isJsonData(jData)){jData={"parentElement":arguments[0],"class":arguments[1],"id":arguments[2],"iconType":arguments[3],
"title":arguments[4],"message":arguments[5],"buttons":[],"preAction":arguments.length>9?arguments[9]:false,"noPropagateEvents":arguments.length>10?arguments[10]:false,"events":{"block":arguments.length>11?arguments[11]:null}};if(arguments[6]){var v=arguments[6][0].split(":")[0];var c=arguments[6][0].split(":")[1];jData.buttons.push({"value":v,"class":c?c:"","action":arguments[7],"id":getBtnId()});if(arguments[6].length>1){v=arguments[6][1].split(":")[0];c=arguments[6][1].split(":")[1];jData.buttons.push({"value":v,
"class":c?c:"","action":arguments[8],"id":getBtnId()})}}}if(jData){var titleRow="";var header="";var classes="popup";if(helper.object.getHTMLType(jData.message))jData.message=jData.message.outerHTML;if(jData.iconType==""||jData.iconType==null||typeof jData.iconType=="undefined")jData.iconType="disconnectedIco";if((typeof jData.title=="undefined"||typeof jData.title=="null"||jData.title=="")&&jData.title!="none")jData.title=window.document.title;if(jData.class!="")classes+=" "+jData.class;var container=
helper.dom.createJsonElement({"type":"div","attributes":{"class":classes,"tabindex":0,"id":jData.id}});if(jData.title!="none"){var header=helper.dom.appendJsonElement({"parentElement":container,"type":"div","attributes":{"class":"header"}});var h3=helper.dom.appendJsonElement({"parentElement":header,"type":"h3","content":jData.title})}var alertBody=helper.dom.appendJsonElement({"parentElement":container,"type":"div","attributes":{"class":"alertBody"}});var title=helper.dom.appendJsonElement({"parentElement":alertBody,
"type":"div","attributes":{"id":jData.iconType},"content":"&nbsp;"});if(helper.object.getHTMLType(jData.message))alertBody.appendChild(jData.message);else alertBody.innerHTML+=jData.message;var br=helper.dom.appendJsonElement({"parentElement":container,"type":"br"});var buttons=helper.dom.appendJsonElement({"parentElement":container,"type":"div","attributes":{"class":"divbuttons"}});var context=jData.parentElement&&jData.parentElement.ownerDocument?jData.parentElement.ownerDocument:document;var strAction;
var eBlock=null;var onBlockCallBack=function(){for(var i=0;i<jData.buttons.length;i++)if(jData.buttons[i]&&jData.buttons[i].action instanceof Function){var id=jData.buttons[i].id;helper.dom.addEvent(context.getElementById(id),["touchend","click"],detectTouchWrapper(jData.buttons[i].action))}if(eBlock)eBlock()};var hasSelected=false;for(var i=0;i<jData.buttons.length;i++){if(!jData.buttons[i].class)jData.buttons[i].class="";if(!hasSelected&&jData.buttons[i].class.indexOf("selected")!=-1)hasSelected=
true}for(var i=0;i<jData.buttons.length;i++){strAction=null;if(typeof jData.buttons[i].action==="string")if(jData.buttons[i].action=="")jData.buttons[i].action=function(){unblockDialog()};else{var errorMsg="Use event function instead of 'string function name'";helper.console.warning(errorMsg,arguments);alert(errorMsg)}else if(typeof jData.buttons[i].action==="function"){var fnTemp=null;if(jData.preAction){fnTemp=function(fn){unblockDialog();fn()}.bind(null,jData.buttons[i].action);jData.buttons[i].action=
fnTemp}else{fnTemp=function(fn){fn();unblockDialog()}.bind(null,jData.buttons[i].action);jData.buttons[i].action=fnTemp}}else jData.buttons[i].action=function(){unblockDialog()};if(i==0&&!hasSelected){if(!jData.buttons[i].class)jData.buttons[i].class="";jData.buttons[i].class+=" selected"}if(jData.buttons[i].id!=="undefined")jData.buttons[i].id=getBtnId();var anchor=helper.dom.appendJsonElement({"parentElement":buttons,"type":"a","attributes":{"class":"popuplink "+(jData.buttons[i].class?jData.buttons[i].class:
""),"id":jData.buttons[i].id},"content":jData.buttons[i].value});if(i+1<jData.buttons.length)helper.dom.appendJsonElement({"parentElement":buttons,"type":"span","content":"&nbsp;"})}helper.dom.appendJsonElement({"parentElement":buttons,"type":"input","attributes":{"type":"text","class":"hiddenInput"}});jData.message=container;var popup=new popupDialog(null,jData.noPropagateEvents);if(!jData.events)jData.events={};if(jData.events.block)eBlock=jData.events.block;jData.events.block=onBlockCallBack;popup.block(jData);
return popup}else{helper.console.warning(helper.string.format("Cannot initialize {0}, {1} is undefined or null.","choiceDialog","jData"),arguments);return}}function alertDialog(jData){if(arguments.length>1&&!isJsonData(jData)||arguments.length===1&&helper.object.getTypeOf(arguments[0])==="string"){jData={"parentElement":arguments[4],"class":arguments[3],"id":arguments[2],"title":arguments[1],"message":arguments[0],"buttons":[],"noPropagateEvents":arguments.length>8?arguments[8]:false};var txt=typeof arguments[7]!=
"undefined"&&arguments[7]!=""?arguments[7]:arguments[6]&&!/.*mozilla.*/.exec(navigator.userAgent.toLowerCase())?consts.Close:consts.ok;if(arguments[5])jData.buttons.push({"value":txt,"action":arguments[5]})}if(jData){if(jData.message&&jData.message instanceof HTMLElement)jData.message=jData.message.outerHTML;var classes="popup";if((typeof jData.title=="undefined"||typeof jData.title=="null"||jData.title=="")&&jData.title!="none")jData.title=window.document.title;if(typeof jData.id=="undefined"||typeof jData.id==
"null"||jData.id=="")jData.id="alertDlg";if(jData.buttons.length==0)jData.buttons.push({"value":consts.ok,"action":"","id":getBtnId()});else if(typeof jData.buttons[0].action=="undefined"||!jData.buttons[0].action)jData.buttons[0].action="";if(jData.buttons[0].id!=="undefined")jData.buttons[0].id=getBtnId();var callback=typeof jData.buttons[0].action!==""?jData.buttons[0].action:"";if(jData.class!=""&&typeof jData.class!="undefined")classes+=" "+jData.class;var container=helper.dom.createJsonElement({"type":"div",
"attributes":{"class":classes,"tabindex":0,"id":jData.id}});if(jData.title!="none"){var header=helper.dom.appendJsonElement({"parentElement":container,"type":"div","attributes":{"class":"header"}});var h3=helper.dom.appendJsonElement({"parentElement":header,"type":"h3","content":jData.title})}var alertBody=helper.dom.appendJsonElement({"parentElement":container,"type":"div","attributes":{"class":"alertBody"}});var title=helper.dom.appendJsonElement({"parentElement":alertBody,"type":"div","attributes":{"id":"alertIco"},
"content":"&nbsp;"});if(helper.object.getHTMLType(jData.message))alertBody.appendChild(jData.message);else alertBody.innerHTML+=jData.message;var br=helper.dom.appendJsonElement({"parentElement":container,"type":"br"});var buttons=helper.dom.appendJsonElement({"parentElement":container,"type":"div","attributes":{"class":"divbuttons"}});var anchor=helper.dom.appendJsonElement({"parentElement":buttons,"type":"a","attributes":{"class":"popuplink selected","id":jData.buttons[0].id},"content":jData.buttons[0].value});
if(typeof callback==="string"&&callback=="")callback=function(){Thinfinity.Popups.unblock()};jData.message=container;var eBlock=null;var onBlockCallBack=function(){var context=null;if(typeof callback==="function"){if(jData.parentElement&&jData.parentElement.ownerDocument)context=jData.parentElement.ownerDocument;else context=document;helper.dom.addEvent(context.getElementById(jData.buttons[0].id),["touchend","click"],detectTouchWrapper(callback,this))}else if(typeof callback==="string"&&callback!==
""){var errorMsg="Use event function instead of 'string function name'";helper.console.warning(errorMsg,arguments);alert(errorMsg)}if(eBlock)eBlock()};var popup=new popupDialog(null,jData.noPropagateEvents);if(!jData.events)jData.events={};if(jData.events.block)eBlock=jData.events.block;jData.events.block=onBlockCallBack;popup.block(jData)}else{helper.console.warning(helper.string.format("Cannot initialize {0}, {1} is undefined or null.","alertDialog","jData"),arguments);return}}function messageDialog(jData){if(arguments.length>
1&&!isJsonData(jData))jData={"owner":arguments.length>5?arguments[5]:null,"parentElement":arguments[4],"class":arguments[3],"id":arguments[2],"title":arguments[1],"message":arguments[0],"standard":false,"events":{"block":arguments.length>6?arguments[6]:null},"noPropagateEvents":arguments.length>8?arguments[8]:false};if(jData){if(jData.message&&jData.message instanceof HTMLElement)jData.message=jData.message.outerHTML;jData.owner=jData.owner||(typeof THIN!="undefined"?THIN:typeof TVNC!="undefined"?
TVNC:null);var classes="popup";if(typeof jData.title=="undefined"||typeof jData.title=="null"||jData.title=="")jData.title=window.document.title;if(typeof jData.id=="undefined"||typeof jData.id=="null"||jData.id=="")jData.id="mssgDlg";if(jData.class!=""&&typeof jData.class!="undefined")classes+=" "+jData.class;if(jData.standard){var standard=helper.dom.createJsonElement({"type":"div","attributes":{"class":"standard"}});var span=helper.dom.appendJsonElement({"parentElement":standard,"type":"span"});
if(helper.object.getHTMLType(jData.message))span.appendChild(jData.message);else span.innerHTML=jData.message}var container=helper.dom.createJsonElement({"type":"div","attributes":{"class":classes,"tabindex":0,"id":jData.id}});if(jData.title!="none"){var header=helper.dom.appendJsonElement({"parentElement":container,"type":"div","attributes":{"class":"header"}});var h3=helper.dom.appendJsonElement({"parentElement":header,"type":"h3","content":jData.title})}var alertBody=helper.dom.appendJsonElement({"parentElement":container,
"type":"div","attributes":{"class":"alertBody"}});if(helper.object.getHTMLType(jData.message))alertBody.appendChild(jData.message);else alertBody.innerHTML+=jData.message;jData.message=container;var eBlock=null;var popup=new popupDialog(jData.owner,jData.noPropagateEvents);var onBlockCallBack=function(){if(eBlock)eBlock()};if(!jData.events)jData.events={};if(jData.events.block)eBlock=jData.events.block;jData.events.block=onBlockCallBack;popup.block(jData)}else{helper.console.warning(helper.string.format("Cannot initialize {0}, {1} is undefined or null.",
"messageDialog","jData"),arguments);return}}function growlDialog(jData){if(jData){var ht=_growls.top+_growls.height;var top=_growls.top+ht*_growls.dialogs.length;var type=helper.object.getValue(jData,"type",_growls.type.MESSAGE);var extraClass=_growls.type.getKey(type).toLowerCase();var destroy=function(e,container){return new Promise(function(resolve){if(e){e.preventDefault();e.stopPropagation();var src=e.srcElement||e.target;container=src.className.indexOf("growlDialogContainer")!=-1?src:src.parentElement}if(container.destroyed){resolve();
return}var nTop=container.nTop;helper.style.replace(container,"visible","hidden");setTimeout(function(){if(container?.parentElement)container.parentElement.removeChild(container);var dialog=null;var ridx=-1;for(var i=0,t=_growls.dialogs.length;i<t;i++){dialog=_growls.dialogs[i];if(dialog===container)ridx=i;else if(dialog.nTop>=nTop){dialog.nTop=_growls.dialogs[i].nTop-ht;dialog.style.top=dialog.nTop+"px"}}_growls.dialogs.splice(ridx,1);setTimeout(resolve,250)},500);container.destroyed=true})};var updateMessage=
function(msg){if(messageContainer){messageContainer.innerHTML=msg;messageContainer.title=msg}};var growlDialogContainer=helper.dom.createJsonElement({"type":"div","attributes":{"class":"growlDialogContainer hidden "+extraClass,"style":"top:"+top+"px","nTop":top}});helper.dom.addEvent(growlDialogContainer,["touchend","click"],function(e){suppressMouseTouchEvent(e);destroy(e);if(helper.object.existsPath(jData,"events.click"))jData.events.click(e)},false);var messageContainer=helper.dom.appendJsonElement({"parentElement":growlDialogContainer,
"type":"div","attributes":{"class":"messageContainer","title":jData.message.replace(/<[^>]*>/g,"")},"content":jData.message});var xContainer=helper.dom.appendJsonElement({"parentElement":growlDialogContainer,"type":"div","attributes":{"class":"xContainer thin-cancel-circled"}});document.body.appendChild(growlDialogContainer);helper.style.replace(growlDialogContainer,"hidden","visible");_growls.dialogs.push(growlDialogContainer);growlDialogContainer.destroyed=false;var obj={};Object.defineProperty(obj,
"destroy",{"enumerable":true,"configurable":false,"writable":false,"value":function(){return destroy(null,growlDialogContainer)}});Object.defineProperty(obj,"destroyed",{"enumerable":true,"configurable":false,"get":function(){return growlDialogContainer.destroyed}});Object.defineProperty(obj,"message",{"enumerable":true,"configurable":false,"set":updateMessage});return obj}else return null}function unblockGrowls(){if(_growls&&_growls.dialogs){_growls.dialogs.forEach(function(elem){helper.style.replace(elem,
"visible","hidden");elem.parentElement.removeChild(elem)});_growls.dialogs=[]}}function unblockDialog(callback){if(typeof _POPUPDIALOG!=="undefined"&&_POPUPDIALOG!==null)_POPUPDIALOG.unblock(callback)}function disableHooks(){if(typeof THIN!="undefined"&&!_kbUnbound&&typeof THIN.unbindKeyboardEvents!="undefined"){var parentElem=_POPUPDIALOG&&_POPUPDIALOG.dlgId?document.getElementById(_POPUPDIALOG.dlgId):null;if(parentElem&&parentElem.parentElement)helper.dom.addEvent(parentElem.parentElement,"click",
cancelClickPropagation);THIN.unbindKeyboardEvents();_kbUnbound=true}}function restoreHooks(){if(typeof THIN!="undefined"&&_kbUnbound&&typeof THIN.bindKeyboardEvents!="undefined"){var parentElem=_POPUPDIALOG&&_POPUPDIALOG.dlgId?document.getElementById(_POPUPDIALOG.dlgId):null;if(parentElem&&parentElem.parentElement)helper.dom.removeEvent(parentElem.parentElement,"click",cancelClickPropagation);THIN.bindKeyboardEvents();_kbUnbound=false}}function cancelClickPropagation(e){e.stopPropagation()}function suppressMouseTouchEvent(e){try{if(window["TouchEvent"]&&
e&&e instanceof TouchEvent){if(e.preventDefault)e.preventDefault();if(e.stopPropagation)e.stopPropagation()}}catch(err){helper.console.warning("[suppressMouseTouchEvent] Failed while trying to handle touch and mouse events. ",arguments)}}function detectTouchWrapper(callback,ctx){return function(e){suppressMouseTouchEvent(e);callback.apply(ctx,arguments)}}function unblockAll(){$.unblockUI()}initialize();Object.defineProperty(_establishingDialogDefProp,"show",{"enumerable":true,"configurable":false,
"writable":false,"value":establishingDialogShow});Object.defineProperty(_establishingDialogDefProp,"hide",{"enumerable":true,"configurable":false,"writable":false,"value":establishingDialogHide});Object.defineProperty(_establishingDialogDefProp,"backgroundStyle",{"enumerable":true,"configurable":false,"get":function(){return _SPLASHDIALOG_BCK_STYLE},"set":setBackgroundStyle});Object.defineProperty(_ref,"establishing",{"enumerable":true,"configurable":false,"get":function(){return _establishingDialogDefProp}});
Object.defineProperty(_ref,"CONSTS",{"enumerable":false,"configurable":false,"get":function(){return _consts}});Object.defineProperty(_ref,"popup",{"enumerable":true,"configurable":false,"writable":false,"value":popupDialog});Object.defineProperty(_ref,"choice",{"enumerable":true,"configurable":false,"writable":false,"value":choiceDialog});Object.defineProperty(_ref,"alert",{"enumerable":true,"configurable":false,"writable":false,"value":alertDialog});Object.defineProperty(_ref,"message",{"enumerable":true,
"configurable":false,"writable":false,"value":messageDialog});Object.defineProperty(_ref,"growl",{"enumerable":true,"configurable":false,"writable":false,"value":growlDialog});Object.defineProperty(_ref.growl,"type",{"enumerable":true,"configurable":false,"get":function(){return _growls.type}});Object.defineProperty(_ref.growl,"unblockAll",{"enumerable":true,"configurable":false,"writable":false,"value":unblockGrowls});Object.defineProperty(_ref,"unblock",{"enumerable":true,"configurable":false,"writable":false,
"value":unblockDialog});Object.defineProperty(_ref,"unblockDialogs",{"enumerable":true,"configurable":false,"writable":false,"value":unblockAll});Object.defineProperty(_ref,"disableHooks",{"enumerable":true,"configurable":false,"writable":false,"value":disableHooks});Object.defineProperty(_ref,"restoreHooks",{"enumerable":true,"configurable":false,"writable":false,"value":restoreHooks});Object.defineProperty(_establishingDialogDefProp,"backgroundStyles",{"enumerable":true,"configurable":false,"get":function(){return splashDialogBackgroundStyles}})}
try{Thinfinity!=undefined}catch(e){Thinfinity={}}if(!Thinfinity.Popups)Thinfinity.Popups=new Popups})();function csHTMLComponent(){}
csHTMLComponent.prototype={extend:function(ext){for(var e in ext)this[e]=ext[e]},createElement:function(type,attrColl,content){var elem=document.createElement(type);if(attrColl)for(var a in attrColl)if(a==="style"){var s=attrColl[a].replace(/ /g).split(";");s.forEach(function(item){var kvp=item.split(":");elem.style[kvp[0]]=kvp[1]})}else elem.setAttribute(a,attrColl[a]);elem.className+=" preventTouchExecution";if(content)elem.innerHTML=content;return elem},appendElement:function(parentElement,type,
attrColl,content){var elem=this.createElement(type,attrColl,content);parentElement.appendChild(elem);return elem},prependElement:function(parentElement,type,attrColl,content){var elem=this.createElement(type,attrColl,content);$(parentElement).prepend(elem);return elem}};csToolbar.prototype=new csHTMLComponent;
function csToolbar(id,jInfo,thinrdp){if(typeof id=="undefined")return;if(typeof jInfo=="undefined")return;var self=this;this.id=id;this.buttons=[];this.closeMenuTimer=null;this.buttonSelected=null;this.closeSubmenuTimer=null;this.optionSelected=null;this.itemClass="";this.tb=null;var thinrdp=typeof THIN!="undefined"?THIN:thinrdp;this.refreshLayout=function(){var w=20;var elems=self.buttons;for(e=0;e<self.buttons.length;e++){if($(self.buttons[e]).css("display")!="none")w+=$(self.buttons[e]).outerWidth(true);
self.buttons[e].mouseIn=0}$("#"+self.id).width(w)};this.attachEvents=function(elem,eventsObj){if(eventsObj.type==="action"){elem.event=eventsObj.event;let handler=function(e){e.preventDefault();e.stopPropagation();self.hideMenus();if(this.event)this.event(e)};$(elem).on("click",handler);$(elem).on("touchend",handler)}else if(eventsObj.type==="onoff"){elem.events=eventsObj.events;let handler=function(e){e.preventDefault();e.stopPropagation();self.hideMenus();if($(this).hasClass("pressed")){$(this).removeClass("pressed");
if(typeof this.events.toggle!="undefined"&&typeof this.events.toggle!="undefined")this.events.toggle(this);else if(typeof this.events!="undefined"&&typeof this.events.release!="undefined")this.events.release(this)}else{$(this).addClass("pressed");if(typeof this.events.toggle!="undefined"&&typeof this.events.toggle!="undefined")this.events.toggle(this);else if(typeof this.events!="undefined"&&typeof this.events.press!="undefined")this.events.press(this)}};$(elem).on("click",handler);$(elem).on("touchend",
handler)}else if(eventsObj.type==="submenu"){$(elem).addClass("subMenu");self.addSubMenu(elem,eventsObj.options);elem.events=eventsObj.events;$(elem).on("mouseenter touchend",function(){if(typeof this.events!="undefined"&&typeof this.events.mouseenter!="undefined")this.events.mouseenter(this);self.activeSubmenu(this)}).on("mouseleave",function(){this.mouseIn--})}};this.addMenu=function(id,options){var menu=this.appendElement(document.body,"DIV",{"id":id+"_sm","class":"toolbarMenu","style":"display:none"});
$(menu).on("mouseenter",function(){if(self.buttonSelected)self.buttonSelected.mouseIn++}).on("mouseleave",function(){if(self.buttonSelected)self.buttonSelected.mouseIn--});for(var op=0;op<options.length;op++){var opt=this.appendElement(menu,"DIV",{"id":options[op].id?options[op].id:id+"_sm_"+op},options[op].text);if(typeof options[op].attributes!="undefined")for(var at in options[op].attributes)$(opt).attr(at,options[op].attributes[at]);if(opt.className.indexOf("preventTouchExecution")==-1)opt.className+=
" preventTouchExecution";this.attachEvents(opt,options[op])}};this.clickMenuButton=function(button){button.pressed=!button.pressed;if(!button.pressed)self.releaseMenuButton(button);else{if(self.buttonSelected)self.releaseMenuButton(self.buttonSelected);self.activeMenuButton(button)}};this.activeMenuButton=function(button){$(button).addClass("pressed");$("#"+$(button).attr("id")+"_sm").css("left",$(button).offset().left-(document.body.scrollLeft||window.pageXOffset)).show();button.mouseIn=1;self.buttonSelected=
button;self.closeMenuTimer=window.setInterval(function(){if(!self.isOnMenu())self.releaseMenuButton(self.buttonSelected)},300)};this.releaseMenuButton=function(button){if(self.closeMenuTimer)window.clearInterval(self.closeMenuTimer);if(button){$(button).removeClass("pressed");$("#"+$(button).attr("id")+"_sm").hide();button.mouseIn=0;button.pressed=false}self.buttonSelected=null};this.hideMenus=function(){if(this.optionSelected)this.releaseSubmenu(this.optionSelected);if(this.buttonSelected)this.releaseMenuButton(this.buttonSelected)};
this.isOnMenu=function(){return self.buttonSelected!=null&&self.buttonSelected.mouseIn>0||this.isOnSubmenu()};this.addSubMenu=function(option,subOptions){var id=$(option).attr("id")+"_sm";var menu=this.appendElement(document.body,"DIV",{"id":id,"class":"toolbarMenu","style":"display:none"});$(menu).on("mouseenter",function(){if(self.optionSelected)self.optionSelected.mouseIn++}).on("mouseleave",function(){if(self.optionSelected)self.optionSelected.mouseIn--});for(var op=0;op<subOptions.length;op++){var opt=
this.appendElement(menu,"DIV",{"id":subOptions[op].id?subOptions[op].id:id+"_"+op},subOptions[op].text);this.attachEvents(opt,subOptions[op]);if(typeof subOptions[op].attributes!="undefined")for(var at in subOptions[op].attributes)$(opt).attr(at,subOptions[op].attributes[at]);if(opt.className.indexOf("preventTouchExecution")==-1)opt.className+=" preventTouchExecution"}};this.activeSubmenu=function(option){$(option).addClass("pressed");$("#"+$(option).attr("id")+"_sm").css("left",$(option).offset().left+
$(option).outerWidth(true)-(document.body.scrollLeft||window.pageXOffset)).css("top",$(option).offset().top-(document.body.scrollTop||window.pageYOffset)).show();option.mouseIn=1;if(self.optionSelected)self.releaseSubmenu(self.optionSelected);self.optionSelected=option;self.closeSubmenuTimer=window.setInterval(function(){if(!self.isOnSubmenu())self.releaseSubmenu(self.optionSelected)},300)};this.releaseSubmenu=function(option){if(self.closeSubmenuTimer)window.clearInterval(self.closeSubmenuTimer);
if(option){$(option).removeClass("pressed");$("#"+$(option).attr("id")+"_sm").hide();option.mouseIn=0;option.pressed=false}self.optionSelected=null};this.isOnSubmenu=function(){return self.optionSelected!=null&&self.optionSelected.mouseIn>0};this.addButton=function(btnObj){if(self.itemClass!=""){var attr=btnObj.attributes["class"];if(typeof attr!="undefined")btnObj.attributes["class"]=self.itemClass+" "+attr;else btnObj.attributes["class"]=self.itemClass}var button=this.appendElement(self.tb,"DIV",
btnObj.attributes,btnObj.html);if(btnObj.type==="tbsubmenu"){button.pressed=false;this.addMenu(btnObj.attributes.id,btnObj.options);let handlerClick=function(){self.clickMenuButton(this)};$(button).on("click",handlerClick).on("touchend",handlerClick).on("mouseleave",function(){this.mouseIn--}).on("mouseenter",function(){if(self.buttonSelected&&self.buttonSelected!=this)self.clickMenuButton(this);else this.mouseIn++})}else if(typeof btnObj.events!="undefined"){button.events={};for(var ev=0;ev<btnObj.events.length;ev++){let events=
[];if(btnObj.events[ev].name==="click")events.push("touchend","mouseup");else events.push(btnObj.events[ev].name);events.forEach(en=>{button.events[en]=btnObj.events[ev].action;$(button).on(en,function(e){button.events[e.type](e)})})}}self.buttons.push(button)};this.addButtons=function(buttons){if(!!buttons)for(var b=0;b<buttons.length;b++)this.addButton(buttons[b])};this.purgeOptions=function(buttons,restrictions){for(var tbr=0;tbr<restrictions.length;tbr++){var tbPath=restrictions[tbr].split(".");
var n=0;while(n<buttons.length&&buttons[n].attributes.id!=tbPath[0])n++;if(n<buttons.length)if(tbPath.length==1)buttons.splice(n,1);else{var elements=buttons[n].options;var level=1;while(typeof elements!="undefined"&&level<tbPath.length){n=0;while(n<elements.length&&elements[n].id!=tbPath[level])n++;if(n<elements.length&&level<tbPath.length-1)elements=elements[n].options;level++}if(level==tbPath.length&&n<elements.length)elements.splice(n,1);else console.log("item related to toolbar restriction "+
tbPath.join(".")+" not found")}else console.log("item related to toolbar restriction "+tbPath.join(".")+" not found")}};this.removeOption=function(itemName){var optBtn=document.getElementById(itemName);if(optBtn){this.removeSubMenu(itemName);$(optBtn).off();optBtn.parentElement.removeChild(optBtn)}};this.removeSubMenu=function(itemName){var sm=document.getElementById(itemName+"_sm");if(sm){var options=$(sm).find("div");for(var d=options.length-1;d>=0;d--)this.removeOption(options[d].id);$(sm).off();
sm.parentElement.removeChild(sm)}};this.destroy=function(){if(this.tb==null)return;var options=$(this.tb).find("."+self.itemClass);for(var o=options.length-1;o>=0;o--)this.removeOption(options[o].getAttribute("id"));if(this.tb.parentElement!=null)this.tb.parentElement.removeChild(this.tb);this.tb=null};this.show=function(){self.tb.style.visibility="visible"};this.hide=function(){self.tb.style.visibility="hidden"};this.expand=function(){if(!this.isVisible())$("#tbRdpHandle"+self.id).click()};this.contract=
function(){if(this.isVisible())$("#tbRdpHandle"+self.id).click()};jInfo.attributes.id=id;this.tb=this.appendElement(document.body,"DIV",jInfo.attributes);if(typeof jInfo.itemClass!="undefined")self.itemClass=jInfo.itemClass;this.addButtons(jInfo.buttons);var tbRdpHandle=this.appendElement(this.tb,"DIV",{"id":"tbRdpHandle"+self.id,"class":"tbRdpHandle flppd"},"<hr/>");let handler=function(e){e.preventDefault();e.stopPropagation();if($("#tbRdpHandle"+self.id).hasClass("flppd")){$("#"+self.id).animate({"top":"0px"},
200);$("#tbRdpHandle"+self.id).removeClass("flppd")}else{$("#"+self.id).animate({"top":"-"+$("#"+self.id).outerHeight(true)+"px"},200);$("#tbRdpHandle"+self.id).addClass("flppd")}};$("#tbRdpHandle"+self.id).on("click",handler);$("#tbRdpHandle"+self.id).on("touchend",handler);this.isVisible=function(){return!$("#tbRdpHandle"+self.id).hasClass("flppd")};return this}csNavigatorControl.prototype=new csHTMLComponent;
function csNavigatorControl(settings){this.NCM_SIMPLE=0;this.NCM_WINDROSE=1;this.NCM_MINIM=2;var self=this;var mode=this.NCM_SIMPLE;this.visible=false;this.offset=1;for(var s in settings)this[s]=settings[s];this.setMode=function(m){if(m<this.NCM_SIMPLE||m>this.NCM_MINIM)return false;mode=m};this.move=function(x,y){if(!!this.onMove)this.onMove(x,y)};this.zoomIn=function(){if(!!this.onZoomIn)this.onZoomIn()};this.zoomOut=function(){if(!!this.onZoomOut)this.onZoomOut()};this.shrinkToBrowser=function(){if(!!this.onShrinkToBrowser)this.onShrinkToBrowser()};
this.actualPixels=function(){if(!!this.onActualPixels)this.onActualPixels()};this.insertPane=function(){var navControl=document.getElementById("navControl");if(!navControl){var navControl=this.createElement("div",{"id":"navControl","style":"display:none"},null);if(mode==this.NCM_WINDROSE)navControl.className="windrose"}else navControl.innerHTML="";if(mode!=this.NCM_MINIM){this.appendElement(navControl,"div",{"class":"navCtrl_button","id":"move_up"},null);this.appendElement(navControl,"div",{"class":"navCtrl_button",
"id":"move_left"},null)}this.appendElement(navControl,"div",{"class":"navCtrl_button","id":"zoom_out"},null);this.appendElement(navControl,"div",{"class":"navCtrl_button","id":"zoom_in"},null);this.appendElement(navControl,"div",{"class":"navCtrl_button","id":"zoom_shrink"},null);this.appendElement(navControl,"div",{"class":"navCtrl_button","id":"zoom_actual"},null);if(mode!=this.NCM_MINIM){this.appendElement(navControl,"div",{"class":"navCtrl_button","id":"move_right"},null);this.appendElement(navControl,
"div",{"class":"navCtrl_button","id":"move_down"},null)}document.body.appendChild(navControl);$("#move_up, #move_down, #move_left, #move_right, #zoom_in, #zoom_out, #zoom_shrink, #zoom_actual").bind("click",function(e){switch((e.target||e.srcElement).id){case "move_up":self.move(0,-self.offset);break;case "move_down":self.move(0,self.offset);break;case "move_left":self.move(-self.offset,0);break;case "move_right":self.move(self.offset,0);break;case "zoom_in":self.zoomIn();break;case "zoom_out":self.zoomOut();
break;case "zoom_shrink":self.shrinkToBrowser();break;case "zoom_actual":self.actualPixels();break}e.stopPropagation()})};this.show=function(){var z=this.onGetZIndex?this.onGetZIndex():99999999;$("#navControl").css("z-index",z).show();this.visible=true};this.hide=function(){$("#navControl").hide();this.visible=false};this.isVisible=function(){return this.visible};return this}
(function(){var protocols=helper.object.createEnum("WEBSOCKET","AJAX");var states=helper.object.createEnum("INITIALIZING","READY","SERVERCONNECTED","CONNECTING","RECONNECTING","CONNECTED","UNSTABLE","LOST","CLOSING","CLOSED");var errCodes=helper.object.createEnum({"TIMEOUT":-1,"RESTART":-2,"CONTINUE":100,"SWITCHING_PROTOCOLS":101,"OK":200,"CREATED":201,"ACCEPTED":202,"PARTIAL_INFORMATION":203,"NO_CONTENT":204,"RESET_CONTENT":205,"PARTIAL_CONTENT":206,"MULTIPLE_CHOICES":300,"MOVED_PERMANENTLY":301,
"MOVED_TEMPORARILY":302,"SEE_OTHER":303,"NOT_MODIFIED":304,"USE_PROXY":305,"BAD_REQUEST":400,"UNAUTHORIZED":401,"PAYMENT_REQUIRED":402,"FORBIDDEN":403,"NOT_FOUND":404,"METHOD_NOT_ALLOWED":405,"NOT_ACCEPTABLE":406,"PROXY_AUTHENTICATION_REQUIRED":407,"REQUEST_TIME_OUT":408,"CONFLICT":409,"GONE":410,"LENGTH_REQUIRED":411,"PRECONDITION_FAILED":412,"REQUEST_ENTITY_TOO_LARGE":413,"REQUEST_URL_TOO_LARGE":414,"UNSUPPORTED_MEDIA_TYPE":415,"SERVER_ERROR":500,"NOT_IMPLEMENTED":501,"BAD_GATEWAY":502,"OUT_OF_RESOURCES":503,
"GATEWAY_TIME_OUT":504,"HTTP_VERSION_NOT_SUPPORTED":505,"UNKNOWN":1006});var wsStates=helper.object.createEnum("CONNECTING","OPEN","CLOSING","CLOSED");var _decodeData=null;var _encodeData=null;var _comm=null;function Communication(args){var _ref=this;var _estimatedState=states.INITIALIZING;var _args={"protocol":protocols.WEBSOCKET,"withCredentials":false,"payload":false,"webSocket":{"maxTimeToOpen":1E4,"events":{"open":null,"message":null,"close":null,"error":null}},"methods":{"arraybufferToString":null},
"properties":null,"events":{"stateChange":null,"error":null}};var _protocol=null;var _ws=null;var _wsParams={"maxTimeId":null,"open":false,"closed":false,"url":null,"fastConnectTime":1E3};var _connection={"lastContactTime":null,"lostConnection":false,"unstableTime":1E4,"lostTime":25E3,"restartTime":33E3,"checkIntervalTime":1500,"maxPingTime":1500,"pingIntervalTime":15E3,"pingIntervalId":null,"pingTimeoutId":null,"wsReopenTime":2E3,"wsReopenTimeoutId":null,"unstableTimeoutId":null,"maxPing":1,"pingCount":0,
"state":states.INITIALIZING};var _timeoutDetected=false;var _pings={};var _arToStr=null;var _onmsg=null;var _noop=function(){};var _chunk={"success":function(){},"error":function(){},"url":null,"xhr":null,"id":null};var _lowNetworkDetection={"initTime":null,"openTime":null};var _commData;var _checkWorker=null;var _wsWOL={"enabled":false,"intervalId":null,"intervalTime":3E4};function initialize(){helper.object.parseAttributes(_args,args);_arToStr=_args.methods.arraybufferToString||function(data){var ar=
[];var len=data.byteLength;for(var i=0;i<len;i++)ar.push(String.fromCharCode(data[i]));return ar.join()};_onmsg=_args.webSocket.events.message;if(!_args.events.stateChange)_args.events.stateChange=_noop;if(!_args.events.error)_args.events.error=_noop;setProtocol(_args.protocol);initProtocolBuffer();_connection.state=states.READY;fireConnectionEvent(states.READY);_checkWorker=new Worker("<%=@BASEURL%>common/workers/thinfinity.communication.status.worker.js");_checkWorker.onmessage=function(e){if(e.data.cmd===
"check")checkStatus()}}function initProtocolBuffer(){if(typeof protobuf!="undefined"&&["RDP","FMX"].indexOf(window.cookiePrefix)!==-1){_commData=new protobuf.Type("CommandData");_commData.add(new protobuf.Field("type",1,"uint32"));_commData.add(new protobuf.Field("cmd",2,"string"));_commData.add(new protobuf.Field("data",3,"bytes"));let root=(new protobuf.Root).define("CommandData");root.add(_commData)}else helper.console.log(`Protocol Buffer is not available`);assignEncoder()}function assignEncoder(){if(!_encodeData)if(_commData)_encodeData=
(cmd,type,data)=>{var cd=_commData.create({"type":type==null?0:type,cmd,data});return _commData.encode(cd).finish()};else _encodeData=cmd=>{return cmd}}function setProtocol(value){switch(value){case protocols.AJAX:case protocols.WEBSOCKET:_protocol=value;break}return _protocol}function setEstimateState(value){if(_protocol===protocols.AJAX){if(states.hasValue(value))_estimatedState=value;if([states.CONNECTING,states.CONNECTED].indexOf(value)!=-1)checkingConnectionStatus()}return _estimatedState}function startAjax(){_connection.lastContactTime=
(new Date).getTime();_protocol=protocols.AJAX;setEstimateState(states.CONNECTING)}function restartAjax(state){if(_protocol===protocols.AJAX){if(state===undefined)state=Thinfinity.Communication.state.SERVERCONNECTED;_connection.lastContactTime=(new Date).getTime();setEstimateState(state)}}function sendAjax(params){if(_args.withCredentials!=undefined)params.withCredentials=_args.withCredentials;return helper.ajax[(params.method||"get").toLowerCase()](params)}function releaseQueue(queueName){helper.ajax.releaseQueue(queueName)}
function checkStatus(){if(_estimatedState>=states.CONNECTING&&_estimatedState<states.CLOSING){var elapsedTime=(new Date).getTime()-_connection.lastContactTime;if(elapsedTime<_connection.unstableTime){if(_timeoutDetected)cancelEchoPing();_timeoutDetected=false;clearTimeout(_connection.unstableTimeoutId);if(_connection.state!=states.CONNECTED){fireConnectionEvent(states.CONNECTED);_connection.state=states.CONNECTED}}else if(elapsedTime<_connection.lostTime){clearTimeout(_connection.wsReopenTimeoutId);
clearTimeout(_connection.unstableTimeoutId);if(_connection.state<states.UNSTABLE&&!_timeoutDetected){_connection.pingCount=0;_timeoutDetected=true;timeoutProcedure(reopen)}else if(_connection.state<states.UNSTABLE){_connection.pingCount=0;helper.console.warning("The connection has become unstable",arguments);fireConnectionEvent(states.UNSTABLE);_connection.state=states.UNSTABLE;unstableProcedure(reopen)}}else{if(_connection.state<states.LOST){fireConnectionEvent(states.LOST);_connection.state=states.LOST;
lostProcedure(reopen)}if(elapsedTime>_connection.restartTime){releaseOldWebSocket();stop();fireErrorEvent(states.getKey(states.LOST),errCodes.RESTART,errCodes.getKey(errCodes.RESTART))}}}else if(_estimatedState===states.CLOSED&&_args.properties.sessionEnd===true)_checkWorker.postMessage({"cmd":"stop"})}function checkingConnectionStatus(){_checkWorker.postMessage({"cmd":"start","value":_connection.checkIntervalTime})}function releaseOldWebSocket(){if(_ws&&!_wsWOL.enabled)try{_ws.onclose=function(){};
_ws.onerror=function(){};_ws.onmessage=function(){};_ws.close();_ws=null}catch(error){}}function webSocketStop(e){clearTimeout(_wsParams.maxTimeId);if(!_args.properties.sessionEnd){if(_wsParams.open){fireConnectionEvent(states.UNSTABLE);_connection.state=states.UNSTABLE;_connection.lastContactTime=(new Date).getTime()-_connection.restartTime}var cs={"code":errCodes.UNKNOWN,"message":errCodes.getKey(errCodes.UNKNOWN)};if(e.code){cs.code=e.code;cs.message=e.reason}if(!_wsParams.closed)if(_estimatedState!==
states.UNSTABLE)cs={"code":errCodes.RESTART,"message":errCodes.getKey(errCodes.RESTART)};_wsParams.closed=true;fireWSErrorEvent(errCodes.getKey(cs.code),cs.code,cs.message)}else{stop();_args.webSocket.events.close(e);if(!_wsParams.closed)fireConnectionEvent(states.CLOSED);_wsParams.closed=true}}function openWebSocket(url,fastConnectCallback){if(_estimatedState<=states.CLOSING){releaseOldWebSocket();helper.console.log("open new Web Socket",arguments);helper.webSocket(url,"arraybuffer").then(function(ws){_ws=
ws;_lowNetworkDetection.initTime=Date.now();_connection.pingCount=0;clearTimeout(_wsParams.maxTimeId);fireConnectionEvent(states.CONNECTING);_wsParams.url=url;_wsParams.maxTimeId=setTimeout(function(){helper.console.warning("WebSocket: is not responding...");if(!fastConnectCallback){if(!_wsParams.open){if(_ws)_ws.close();helper.console.warning("requesting to switch to Ajax mode.")}fireWSErrorEvent(errCodes.getKey(errCodes.TIMEOUT),errCodes.TIMEOUT,errCodes.getKey(errCodes.TIMEOUT))}else fastConnectCallback()},
fastConnectCallback?_wsParams.fastConnectTime:_args.webSocket.maxTimeToOpen);_ws.onopen=function(){helper.console.log("onopen",arguments);_wsParams.open=true;_wsParams.closed=false;_connection.lastContactTime=(new Date).getTime();checkingConnectionStatus();_lowNetworkDetection.openTime=Date.now();_lowNetworkDetection.speed=_lowNetworkDetection.openTime-_lowNetworkDetection.initTime;if(_lowNetworkDetection.speed>500)helper.console.warning("Low network access, detected latency: "+_lowNetworkDetection.speed.toString(),
arguments);clearTimeout(_wsParams.maxTimeId);fireConnectionEvent(states.CONNECTED);backToNormal();if(_args.webSocket.events.open)_args.webSocket.events.open();keepServerAlive()};_ws.onmessage=function(msg){_connection.lastContactTime=(new Date).getTime();if(_decodeData)msg=_decodeData(msg);if(msg?.data&&msg.data instanceof ArrayBuffer)if(msg.data.byteLength===11)try{if(_arToStr((new Zlib.RawInflate((new Uint8Array(msg.data)).subarray(7))).decompress())=="{}"){var t=(new Date).getTime();cancelEchoPing();
if(!_args.payload)return}}catch(error){}_onmsg(msg);msg=null};_ws.onerror=function(e){helper.console.warning(helper.string.format("onerror -- ws error - sessionEnd: {0}",_args.properties.sessionEnd),arguments);webSocketStop(e);stopServerAlive()};_ws.onclose=function(e){helper.console.warning(helper.string.format("Websocket has been closed. Code: {0} Reason: {1}",e.code,e.reason),arguments);webSocketStop(e);stopServerAlive()}}).catch(function(e){helper.console.warning(helper.string.format("onerror -- ws error - sessionEnd: {0}",
_args.properties.sessionEnd),arguments);webSocketStop(e)})}}function restartWebSocketFlow(state){if(_wsWOL.enabled)return;if(!_wsParams.closed){_wsParams.closed=true;fireConnectionEvent(states.CLOSING);fireConnectionEvent(states.CLOSED)}if(_ws)_ws.close();stop();_estimatedState=states.SERVERCONNECTED;reopen()}function setChunkHandlers(jData){_chunk.success=jData.success;_chunk.error=jData.error;_chunk.url=jData.url;_chunk.id=jData.id}function restart(protocol){if(protocol===undefined)protocol=_protocol;
switch(protocol){case protocols.AJAX:restartAjax();break;case protocols.WEBSOCKET:restartWebSocketFlow();break}}function reset(){if(_ws)_ws.close();stop();fireConnectionEvent(states.READY)}function getNextChunk(){if(_protocol===protocols.AJAX){if(_chunk.xhr)return;_chunk.xhr=helper.ajax.get({"url":_chunk.url,"withCredentials":_args.withCredentials,"dataType":"json","success":function(data){_chunk.xhr=null;_connection.lastContactTime=(new Date).getTime();_chunk.success(data)},"abort":function(e,status,
xhr){_chunk.xhr=null;if(_estimatedState<=states.UNSTABLE){_connection.lastContactTime=(new Date).getTime();_chunk.success({})}},"error":function(e,status,xhr){_chunk.xhr=null;_connection.lastContactTime=(new Date).getTime()-_connection.lostTime;_chunk.error(e,xhr)}})}}function sendWebSocket(cmd,type){if(_ws&&_estimatedState>=states.RECONNECTING&&_estimatedState<=states.CLOSING&&!_wsParams.closed)_ws.send(_encodeData(cmd,type))}function post(params){if(_args.withCredentials!=undefined)params.withCredentials=
_args.withCredentials;helper.ajax.post(params)}function wsClose(){if(_wsWOL.enabled)return;fireConnectionEvent(states.CLOSING);setTimeout(function(){fireConnectionEvent(states.CLOSED);if(_ws)_ws.close()},100)}function wsWOL(enabled){if(_wsWOL.enabled!==enabled)if(enabled){_wsWOL.enabled=true;stop();clearInterval(_wsWOL.intervalId);_wsWOL.intervalId=setInterval(function(){_ws.send("cmd=ping")},_wsWOL.intervalTime)}else{_wsWOL.enabled=false;_checkWorker.postMessage({"cmd":"start","value":_connection.checkIntervalTime})}}
function dispose(){releaseOldWebSocket();if(_chunk.xhr){_chunk.success=_noop;_chunk.error=_noop;_chunk.abort=_noop;_chunk.xhr.abort()}stop()}function stop(){clearTimeout(_wsParams.maxTimeId);_checkWorker.postMessage({"cmd":"stop"});cancelEchoPing()}function backToNormal(){clearTimeout(_connection.wsReopenTimeoutId);clearTimeout(_connection.unstableTimeoutId);clearTimeout(_connection.pingTimeoutId)}function fireConnectionEvent(state){if(state!=_estimatedState){_estimatedState=state;_args.events.stateChange(_estimatedState)}}
function sendWSPing(callback){if(_connection.pingCount<_connection.maxPing&&_connection.pingTimeoutId==null){_connection.pingCount++;if(_connection.state===states.UNSTABLE){var sp=_ws.readyState===wsStates.OPEN?"sending ping":"connection is not open";helper.console.warning("Unstable connection, "+sp+", readyState: "+wsStates.getKey(_ws.readyState))}if(_ws.readyState===wsStates.OPEN){_connection.pingTimeoutId=setTimeout(function(){_connection.pingTimeoutId=null;callback(false)},_connection.maxPingTime);
_ws.send("cmd=ping")}else callback(false)}}function sendAjaxPing(callback){if(_connection.pingCount<_connection.maxPing&&_connection.pingTimeoutId==null){_connection.pingCount++;_connection.pingTimeoutId=setTimeout(function(){_connection.pingTimeoutId=null;callback(false)},_connection.maxPingTime);helper.ajax.get({"url":"cmd?cmd=ping&id="+_chunk.id,"dataType":helper.ajax.responseType.TEXT,"cache":false,"timeout":_connection.maxPingTime,"withCredentials":_args.withCredentials,"success":function(data){clearTimeout(_connection.pingTimeoutId);
callback(true)},"error":function(e,status,xhr){callback(false)}})}}function cancelEchoPing(){_connection.pingCount=0;clearTimeout(_connection.pingTimeoutId);_connection.pingTimeoutId=null}function reopen(){if(!_args.properties.sessionEnd)return _protocol===protocols.AJAX?reopenAjax():reopenWS();else return false}function reopenWS(callback){if(_ws.readyState>wsStates.OPEN&&_connection.state<states.LOST){fireConnectionEvent(states.RECONNECTING);openWebSocket(_wsParams.url,callback)}}function reopenAjax(callback){fireConnectionEvent(states.RECONNECTING)}
function fireErrorEvent(name,code,message){try{_args.events.error(new CustomEvent(name,{"detail":{"code":code,"message":message}}))}catch(error){helper.console.warning("fireErrorEvent trough exception: "+error.message,arguments,error)}}function fireWSErrorEvent(name,code,message){_args.webSocket.events.error(new CustomEvent(name,{"detail":{"code":code,"message":message}}))}function timeoutProcedure(callback){sendPing(callback)}function unstableProcedure(callback){sendPing(callback)}function keepServerAlive(){clearInterval(_connection.pingIntervalId);
_connection.pingIntervalId=setInterval(function(){if(_protocol===protocols.WEBSOCKET)if(_ws?.readyState===wsStates.OPEN)_ws.send("cmd=ping")},_connection.pingIntervalTime)}function stopServerAlive(){clearInterval(_connection.pingIntervalId)}function sendPing(callback){if(_protocol===protocols.WEBSOCKET)if(!_wsParams.closed)sendWSPing(callback);else reopenWS(callback);else if(_protocol===protocols.AJAX)sendAjaxPing(function(response){if(response)_connection.lastContactTime=(new Date).getTime()})}function lostProcedure(callback){if(_protocol===
protocols.WEBSOCKET){if(_ws.readyState>=wsStates.CLOSING)reopen(callback)}else;}function createPing(name,jData){var name=name||helper.utils.generateGUID(12);if(_pings[name])clearInterval(_pings[name]);_pings[name]=setInterval(function(){sendAjax({url:jData.url,dataType:helper.ajax.responseType.DOCUMENT,cache:false,timeout:typeof(jData.timeout!="undefined")?jData.timeout:1E3,error:jData.error,success:jData.success})},jData.intervalTime);return name}function disposePing(name){stopServerAlive();if(name&&
_pings[name])clearInterval(_pings[name])}function recvPingResponse(){_connection.lastContactTime=(new Date).getTime()}function forceReconnect(){_connection.lastContactTime=(new Date).getTime()-_connection.unstableTime}initialize();Object.defineProperty(_ref,"state",{"enumerable":true,"configurable":false,"get":function(){return _estimatedState}});Object.defineProperty(_ref,"protocol",{"enumerable":true,"configurable":false,"get":function(){return _protocol},"set":function(value){return setProtocol(value)}});
Object.defineProperty(_ref,"restart",{"enumerable":true,"configurable":false,"writable":false,"value":restart});Object.defineProperty(_ref,"reset",{"enumerable":true,"configurable":false,"writable":false,"value":reset});Object.defineProperty(_ref,"get",{"enumerable":true,"configurable":false,"writable":false,"value":sendAjax});Object.defineProperty(_ref,"send",{"enumerable":true,"configurable":false,"writable":false,"value":sendAjax});Object.defineProperty(_ref,"post",{"enumerable":true,"configurable":false,
"writable":false,"value":post});Object.defineProperty(_ref,"releaseQueue",{"enumerable":true,"configurable":false,"writable":false,"value":releaseQueue});Object.defineProperty(_ref,"queueLength",{"enumerable":true,"configurable":false,"writable":false,"value":function(queueName){return helper.ajax.queueLength(queueName)}});Object.defineProperty(_ref,"getNextChunk",{"enumerable":true,"configurable":false,"writable":false,"value":getNextChunk});Object.defineProperty(_ref,"setChunkHandlers",{"enumerable":true,
"configurable":false,"writable":false,"value":setChunkHandlers});Object.defineProperty(_ref,"start",{"enumerable":true,"configurable":false,"writable":false,"value":startAjax});Object.defineProperty(_ref,"wsOpen",{"enumerable":true,"configurable":false,"writable":false,"value":function(url){return openWebSocket(url)}});Object.defineProperty(_ref,"wsSend",{"enumerable":true,"configurable":false,"writable":false,"value":sendWebSocket});Object.defineProperty(_ref,"binaryType",{"enumerable":true,"configurable":false,
"get":function(){return _ws?_ws.binaryType:undefined}});Object.defineProperty(_ref,"wsClose",{"enumerable":true,"configurable":false,"writable":false,"value":wsClose});Object.defineProperty(_ref,"wsWOL",{"enumerable":true,"configurable":false,"writable":false,"value":wsWOL});Object.defineProperty(_ref,"dispose",{"enumerable":true,"configurable":false,"writable":false,"value":dispose});Object.defineProperty(_ref,"createPing",{"enumerable":true,"configurable":false,"writable":false,"value":createPing});
Object.defineProperty(_ref,"disposePing",{"enumerable":true,"configurable":false,"writable":false,"value":disposePing});Object.defineProperty(_ref,"forceReconnect",{"enumerable":true,"configurable":false,"writable":false,"value":forceReconnect});Object.defineProperty(_ref,"serverConnected",{"enumerable":true,"configurable":false,"get":function(){return _estimatedState>=states.SERVERCONNECTED},"set":function(value){fireConnectionEvent(value?states.SERVERCONNECTED:states.READY)}});Object.defineProperty(_ref,
"connected",{"enumerable":true,"configurable":false,"get":function(){return _estimatedState>=states.SERVERCONNECTED&&_estimatedState<states.CLOSING}});Object.defineProperty(_ref,"recvPingResponse",{"enumerable":true,"configurable":false,"writable":false,"value":recvPingResponse});Object.defineProperty(_ref,"resetEncoding",{"enumerable":true,"configurable":false,"writable":false,"value":assignEncoder});_comm=_ref;return _ref}function registerEncoding(encoding){if(encoding){if(encoding.encode)_encodeData=
encoding.encode;if(encoding.decode)_decodeData=encoding.decode}}function unregisterEncoding(){_decodeData=_encodeData=null;if(_comm)_comm.resetEncoding()}Object.defineProperty(Communication,"protocol",{"enumerable":true,"configurable":false,"get":function(){return protocols}});Object.defineProperty(Communication,"state",{"enumerable":true,"configurable":false,"get":function(){return states}});Object.defineProperty(Communication,"errorCode",{"enumerable":true,"configurable":false,"get":function(){return errCodes}});
Object.defineProperty(Communication,"registerEncoding",{"enumerable":true,"configurable":false,"writable":false,"value":registerEncoding});Object.defineProperty(Communication,"unregisterEncoding",{"enumerable":true,"configurable":false,"writable":false,"value":unregisterEncoding});try{Thinfinity!=undefined}catch(e){Thinfinity={}}Thinfinity.Communication=Communication})();
(function(){function StatusInfo(args){var _ref=this;var _args={"container":null,"variables":null};var _statusContainer=null;var _header=null;var _close=null;var _body=null;var _update={"time":1E3,"intervalId":null};var _variables=[];var _idx=0;function initialize(){helper.object.parseAttributes(_args,args)}function initializeStatus(){if(!_args.container)_args.container=document.body;_statusContainer=helper.dom.appendJsonElement({"parentElement":_args.container,"type":"div","attributes":{"style":"position:absolute;zIndex:999999999;width:auto;height:auto;min-width:150px;min-height:45px;backgroundColor:#d6d6d6;top:20px;left:20px;display:none;"}});
_header=helper.dom.appendJsonElement({"parentElement":_statusContainer,"type":"div","attributes":{"style":"height:20px;margin:0px;top:0px;left:0px;backgroundColor:#3297d6;color:#ffffff;fontWeight:400;lineHeight:22px;fontSize:10pt;padding-left:5px;borderBottom: 1px solid #a7a7a7;"},"content":"Status"});_close=helper.dom.appendJsonElement({"parentElement":_header,"type":"div","attributes":{"style":"height: 14px; margin: 0px;top: 0px;marginRight: 6px;color: rgb(255, 255, 255);fontWeight: 400;lineHeight: 22px;fontSize: 10pt;paddingLeft: 5px;display: inline-block;float: right;"},
"events":{"click":hideStatus},"content":"X"});_body=helper.dom.appendJsonElement({"parentElement":_statusContainer,"type":"div","attributes":{"style":"width:100%;height:auto;"}});if(_args.variables)_args.variables.forEach(function(item){addVariable(item)});if(Thinfinity.Draggable)new Thinfinity.Draggable({"container":_statusContainer,"dragElem":_header});helper.dom.addEvent(window,"newStatusAPIVariables",getVariables);getVariables()}function getVariables(){if(Thinfinity.StatusAPI)addVariables(Thinfinity.StatusAPI.dump("STATUSINFO"))}
function addVariables(variables){if(variables instanceof Array)variables.forEach(function(item){addVariable(item)});else return addVariable(variables)}function addVariable(jData){var item={"name":jData.name,"title":jData.title,"index":jData.index||_idx,"get":jData.get,"obj":jData.obj,"style":jData.style,"draw":false};_variables.push(item);_idx=item.idx++;return drawVariable(item)}function appendRow(index,row){if(_body&&row){var bRow;var list=_body.querySelectorAll(".row");var i=0;while(!bRow&&i<list.length){if(index<
list[i].index)bRow=list[i];i++}if(bRow)_body.insertBefore(row,bRow);else _body.appendChild(row)}}function drawVariable(jData){if(!jData.elems){var _row=helper.dom.createJsonElement({"type":"div","attributes":{"style":"width:100%;height:20px;borderBottom:1px solid #cccccc;","class":"row","index":jData.index}});var _name=helper.dom.appendJsonElement({"parentElement":_row,"type":"div","attributes":{"style":"width:auto;display:inline-block;float:left;marginLeft:5px;marginRight:10px;fontSize:10pt;"},"content":jData.title+
" :"});var _value=helper.dom.appendJsonElement({"parentElement":_row,"type":"div","attributes":{"style":"width:auto;display:inline-block;float:right;marginRight:5px;fontSize:10pt;"},"content":jData.get?jData.get():"undefined"});jData.elems={"row":_row,"name":_name,"value":_value};jData.draw=false}if(_body)appendRow(jData.index,jData.elems.row);return _value}function removeVariable(name){for(var i=0,t=_variables.length;i<t;i++)if(_variables.name===name){_body.removeChild(_variables.row);_variables.splice(i,
1)}}function updateInfo(){clearInterval(_update.intervalId);_update.intervalId=setInterval(function(){refreshVariables()},_update.time);refreshVariables()}function refreshVariables(){_variables.forEach(function(item){if(!item.draw)drawVariable(item);var value=item.get?item.get():"undefined";item.elems.value.innerText=value;if(item.style)helper.style.add(item.elems.value,item.style(value))})}function showStatus(){if(!_statusContainer)initializeStatus();helper.style.add(_statusContainer,{"display":"block"});
updateInfo()}function hideStatus(){helper.style.add(_statusContainer,{"display":"none"});clearInterval(_update.intervalId)}initialize();Object.defineProperty(_ref,"show",{"enumerable":false,"configurable":false,"writable":false,"value":showStatus});Object.defineProperty(_ref,"hide",{"enumerable":false,"configurable":false,"writable":false,"value":hideStatus});Object.defineProperty(_ref,"add",{"enumerable":false,"configurable":false,"writable":false,"value":addVariables});Object.defineProperty(_ref,
"remove",{"enumerable":false,"configurable":false,"writable":false,"value":removeVariable});return _ref}try{Thinfinity!=undefined}catch(e){Thinfinity={}}Thinfinity.StatusInfo=new StatusInfo({})})();
(function(){var _MAC_CMD={"RELEASED":0,"PRESSED":1,"SENT":2};Object.freeze(_MAC_CMD);function DKeyboard(args){var _ref=this;var _args={parentElement:null,events:{keyboardEvent:null,hook:null},properties:null,methods:{sendKey:null,inputAllowed:null,sendText:null},clipboard:false};var _IMEKeyCode=229;var _IMEKeyPressed=false;var _IMEKeyboardAvailable=["virtualui","thinrdp"].indexOf(productId)!==-1;var _IMEKeyExceptions="\u00b4\u00a8`^";var _caret=null;var _currentEvent=null;var _forceKeyPress=false;
var _macCmd=0;var _lastCharCode=0;var _firefoxAltGr=false;var _MAC_Firefox_CMD={isPressed:false,isCmd:false};var fireEvent=null;var _te={};var _heapKeys={16:0,17:0,18:0,93:0};var _pressedKeys=[];var _altKeyPressed=false;var _noKeyDown=[{"key":44,"name":"PRINTSCREEN"}];var _lastKeyCode=null;var _kbdInput=null;var _allowToSwitchApps=false;function initialize(){helper.object.parseAttributes(_args,args);if(!_args.parentElement)_args.parentElement=document.body;fireEvent=(new Thinfinity.Events({"owner":_te,
"events":_args.events})).fireEvent;createInputElement()}function createInputElement(){if(agentInfo.isMac){_kbdInput=helper.dom.appendJsonElement({parentElement:_args.parentElement,type:"textarea",attributes:{id:"kbdMacInput",name:"kbdMacInput",tabindex:"0",autocapitalize:"off",autocorrect:"off",autocomplete:"off",spellcheck:"false",style:"color: #FFF; position: fixed; left: -2000px; top: 5px; overflow:hidden; width: 20px; height: 20px;"},content:"XXXX"});helper.dom.addEvent(_kbdInput,"focus",function(e){fireEvent("focus",
e)});helper.dom.addEvent(_kbdInput,"blur",function(e){e.mac=true;blur(e)});helper.dom.addEvent(_kbdInput,"keydown",macKeydown);helper.dom.addEvent(_kbdInput,"keypress",macKeypress);helper.dom.addEvent(_kbdInput,"keyup",macKeyup);if(_IMEKeyboardAvailable){helper.dom.addEvent(_kbdInput,"compositionstart",compositionStart);helper.dom.addEvent(_kbdInput,"compositionupdate",compositionUpdate);helper.dom.addEvent(_kbdInput,"compositionend",compositionEnd)}_kbdInput.focus()}else{var attributes={"id":"kbdWindowsInput",
"value":"","tabindex":"0","autocapitalize":"off","autocorrect":"off","autocomplete":"off","spellcheck":"false","style":"color: #000; fontSize:12px; position: fixed; left: -2000px; top: 5px; overflow:hidden; width: 20px; height: 20px;outline:1px;"};try{if(window.top.document)attributes.autofocus=true}catch(error){}_kbdInput=helper.dom.appendJsonElement({"parentElement":_args.parentElement,"type":"textarea","attributes":function(){var a={"id":"kbdWindowsInput","value":"","tabindex":"0","autocapitalize":"off",
"autocorrect":"off","autocomplete":"off","spellcheck":"false","style":"color: #000; fontSize:12px; position: fixed; left: -2000px; top: 5px; overflow:hidden; width: 20px; height: 20px;outline:1px;"};if(attributes.autofocus&&!_args.properties.isCrossDomain)a.autofocus="autofocus";return a}(),"events":{"focus":function(e){fireEvent("focus",{...e,...{mac:false}})},"blur":function(e){e.mac=false;blur(e)}}});helper.dom.addEvent(_kbdInput,"keydown",keydown);helper.dom.addEvent(_kbdInput,"keypress",keypress);
helper.dom.addEvent(_kbdInput,"keyup",keyup);if(_IMEKeyboardAvailable){helper.dom.addEvent(_kbdInput,"compositionstart",compositionStart);helper.dom.addEvent(_kbdInput,"compositionupdate",compositionUpdate);helper.dom.addEvent(_kbdInput,"compositionend",compositionEnd)}}}function noDetectedkeyDown(kc){return _noKeyDown.find(function(item){return kc===item.key})}function isIMEKey(e){return(e.which||e.keyCode)==_IMEKeyCode}function setCaret(cmd){if(_args.properties.hookKeyboard&&_kbdInput){_kbdInput.focus();
_caret=cmd}}function eventIndex(list,kcode){for(var k=0;k<list.length;k++)if(kcode==list[k].keyCode)return k;return-1}function containsKey(kcode){var result=false;for(var i=0;i<_pressedKeys.length;i++)if(_pressedKeys[i].keyCode==kcode){result=true;break}return result}function popEvent(kcode){var resultEvent=null;var EvIdx=eventIndex(_pressedKeys,kcode);if(EvIdx>-1){resultEvent=_pressedKeys[EvIdx];_pressedKeys.splice(EvIdx,1);popEvent(kcode)}return resultEvent}function isPrintableKey(keyCode){return keyCode>=
33&&keyCode<=126||keyCode>=193&&keyCode<=248}function isFunctionKey(keyCode){return keyCode>=112&&keyCode<=123||keyCode>=33&&keyCode<=40||keyCode>=45&&keyCode<=46||keyCode>=16&&keyCode<=20||keyCode>=91&&keyCode<=93||keyCode==13||keyCode==9||keyCode==8||keyCode==27||keyCode==144||keyCode==12||keyCode==224||keyCode==32||keyCode==145}function isAphaNumericKey(keyCode){return keyCode>=48&&keyCode<=57||keyCode>=65&&keyCode<=90||keyCode>=97&&keyCode<=122}function isControlCharacter(keyCode){return keyCode>=
0&&keyCode<=31}function isEditFunction(currentEvent){return currentEvent.ctrlKey&&(currentEvent.keyCode==67||currentEvent.keyCode==86||currentEvent.keyCode==88)&&_args.clipboard?.enable}function isNumPadKey(keyCode){var numBloq=agentInfo.isMac?12:144;switch(keyCode){case numBloq:case 111:case 106:case 109:case 107:return true;break;default:return false}}function getKeyCode(e){var kcode=e.which||e.keyCode;if(!(productId=="thinrdp"&&!_args.properties.kbdUnicode))if(kcode>=96&&kcode<=105)kcode-=48;if(agentInfo.isFirefox==
true)if(typeof e.key!="undefined"&&e.key.toLowerCase()=="dead")kcode=0;else if(kcode==0&&e.key!=undefined)kcode=e.key.charCodeAt();return kcode}function getCharCode(e){var cc=0;if(e.key!=undefined&&e.key.toLowerCase()!="dead"){var _cc=e.key.charCodeAt();if(e.keyCode==0||e.keyCode!=_cc||_cc>=58&&_cc<=63)cc=_cc}return cc}function getKeyEvent(e){var keybinfo={"type":e.type,"altKey":e.altKey,"ctrlKey":e.ctrlKey,"charCode":e.charCode,"keyCode":e.keyCode,"which":e.which,"shiftKey":e.shiftKey,"metaKey":e.metaKey};
if(_args.properties.kbdLogKeys===true)if(agentInfo.isMac);try{fireEvent("keyboardEvent",keybinfo)}catch(error){helper.console.warning("'keyboardEvent' calling attached method fail. message: "+error.message,error,arguments)}}function buildKeyEvent(e){var modificators=null;if(e.getModifierState)modificators={"alt":e.getModifierState("Alt"),"graph":e.getModifierState("AltGraph"),"ctrl":e.getModifierState("Control"),"meta":e.getModifierState("Meta")||e.getModifierState("OS"),"shift":e.getModifierState("Shift"),
"capsLock":e.getModifierState("CapsLock"),"scrollLock":e.getModifierState("Scroll"),"numLock":e.getModifierState("NumLock"),"location":e.location};else modificators={"alt":e.altKey,"graph":e.altGraphKey,"ctrl":e.ctrlKey,"meta":e.metaKey,"shift":e.shiftKey,"location":e.location};var buildKeyEventResult={"keyCode":getKeyCode(e),"timeStamp":e.timeStamp,"mod":modificators};if(agentInfo.isFirefox==true&&!_args.properties.kbdUnicode&&!isFunctionKey(e.keyCode))buildKeyEventResult["charCode"]=getCharCode(e);
buildKeyEventResult.isIMEKey=isIMEKey(e);return buildKeyEventResult}function loadKeyData(e){var charCode=agentInfo.isOpera?e.which:agentInfo.isFirefox&&e.charCode==0&&e.key!=undefined?e.key.charCodeAt():e.charCode;var IsZero=(e.keyCode||0)==0&&(charCode||0)==0;_forceKeyPress=!(isFunctionKey(e.keyCode)&&e.keyCode!=32)&&!e.altKey&&!e.ctrlKey;if(IsZero)return;if(_forceKeyPress||e.type=="keydown"){if(e.type=="keydown"&&_currentEvent&&!_forceKeyPress)popEvent(_currentEvent.keyCode);if(e.type=="keydown")_currentEvent=
null;var currentEvent=buildKeyEvent(e);if(e.type=="keydown"||e.type=="keypress"&&!_currentEvent){if(!containsKey(currentEvent.keyCode)){currentEvent.type=e.type;_pressedKeys.push(currentEvent)}if(e.type=="keypress"&&!_currentEvent)_currentEvent=currentEvent}if((isFunctionKey(e.keyCode)||(e.altKey||e.ctrlKey)&&e.altKey!=e.ctrlKey)&&!_forceKeyPress||!_args.properties.kbdUnicode){if(!isEditFunction(e)){sendKey(currentEvent,"down");e.stopPropagation();e.preventDefault()}}else if(e.type=="keydown"||!_currentEvent){_currentEvent=
currentEvent;_currentEvent.waitForKeyPress=true}}if(e.type=="keypress"&&_currentEvent){if(productId=="ZSC"&&isNumPadKey(_currentEvent.keyCode)==true)charCode=0;_currentEvent.charCode=charCode;_currentEvent.type=e.type;sendKey(_currentEvent,"down");_currentEvent.waitForKeyPress=false;e.stopPropagation();e.preventDefault();_forceKeyPress=false;_lastCharCode=charCode}else if(e.type=="keydown"){_forceKeyPress=(e.keyCode||0)==0&&(charCode||0)==0||(_lastCharCode||0)==0;_lastKeyCode=e.keyCode;_lastCharCode=
charCode}else;}function releaseKeyData(e){if(_currentEvent&&e.keyCode==_currentEvent.keyCode&&_currentEvent.waitForKeyPress){if(productId=="virtualui"&&_currentEvent.type=="keydown"&&isAphaNumericKey(e.keyCode)){sendKey(_currentEvent,"down");sendKey(_currentEvent,"up")}else;popEvent(e.keyCode);return}var keyDownEvent=popEvent(getKeyCode(e));var _sendKeyup=true;if(!keyDownEvent){_sendKeyup=false;if(noDetectedkeyDown(e.keyCode)){keyDownEvent=e;_sendKeyup=true;sendKey(keyDownEvent,"down")}}if(_sendKeyup){sendKey(keyDownEvent,
"up");e.stopPropagation();e.preventDefault()}}function sendKey(kevent,action){if(_args.properties.onlyKeyCode)_args.methods.sendKey(kevent.keyCode||0,0,action,kevent.mod.location);else _args.methods.sendKey(kevent.keyCode||0,kevent.charCode||0,action,(kevent.mod||kevent)["location"])}function keydown(e){if(_args.methods.inputAllowed(e)){if(_IMEKeyboardAvailable){if(!_IMEKeyPressed)_IMEKeyPressed=isIMEKey(e);if(_IMEKeyPressed)return true}loadKeyData(e);getKeyEvent(e);if(e.keyCode==18){_heapKeys["18"]++;
if(agentInfo.isFirefox&&e.ctrlKey)_firefoxAltGr=true}if(e.keyCode==32&&e.altKey)blur(e)}}function keypress(e){if(_args.methods.inputAllowed(e)){if(_IMEKeyboardAvailable&&_IMEKeyPressed)return true;loadKeyData(e);getKeyEvent(e)}}function keyup(e){if(_args.methods.inputAllowed(e)){if(_IMEKeyboardAvailable&&_IMEKeyPressed)return true;if(_allowToSwitchApps==true&&(e.keyCode==37||e.keyCode==39)&&e.ctrlKey==true&&e.altKey==true){var value="next";if(e.keyCode==37)value="previous";changeAppFocus(value);e.preventDefault();
e.stopPropagation();return}releaseKeyData(e);_lastKeyCode=0;getKeyEvent(e);if(e.keyCode==18)_heapKeys["18"]--;if(_firefoxAltGr&&[17,18].indexOf(e.keyCode)!=-1&&_heapKeys["18"]>0){_firefoxAltGr=false;_heapKeys["18"]--;var keyUpEvent=popEvent(18);sendKey(keyUpEvent,"up")}}}function compositionStart(e){if(_IMEKeyPressed||agentInfo.isFirefox&&agentInfo.isWindows||agentInfo.isMac){if(!agentInfo.isMSIE)_kbdInput.value="";if(agentInfo.isMac)_IMEKeyPressed=true;if(_caret){var pos=_caret.r;var size=_caret.rc;
helper.style.add(_kbdInput,{"visibility":"visible","zIndex":9999999,"left":pos.l+3+"px","top":pos.t+24+"px","width":"150px","height":20+"px","color":"#000"});size=pos=null}else helper.style.add(_kbdInput,{"visibility":"visible","zIndex":9999999,"left":"0px","top":"0px","width":"150px","height":20+"px","color":"#000"})}}function compositionUpdate(e){if(agentInfo.isMac&&e.data.length==1&&_IMEKeyExceptions.indexOf(e.data)!=-1)helper.style.add(_kbdInput,{"visibility":"visible","zIndex":0,"left":"-2000px",
"color":"#fff"})}function compositionEnd(e){if(_IMEKeyPressed||agentInfo.isFirefox&&agentInfo.isWindows){helper.style.add(_kbdInput,{"visibility":"visible","zIndex":0,"left":"-2000px","color":"#fff"});_args.methods.sendText(e.data);_kbdInput.value="";if(agentInfo.isMac||agentInfo.isWindows&&agentInfo.isMSIE)setTimeout(function(){if(agentInfo.isMac)_kbdInput.value="";_IMEKeyPressed=false},50);else _IMEKeyPressed=false;_kbdInput.focus();if(agentInfo.isMSIE){_kbdInput.parentElement.removeChild(_kbdInput);
fireEvent("onHook",false);_kbdInput.focus()}}}function blur(e){for(var keyCode in _heapKeys)_heapKeys[keyCode]=0;for(var i=0;i<_pressedKeys.length;i++){var pk=_pressedKeys[i];_args.methods.sendKey(pk.keyCode,pk.charCode||0,"up",pk.mod?pk.mod.location:0)}_pressedKeys=[];fireEvent("blur",e)}function focus(e){_heapKeys["18"]=0}function isFirefoxCmdKey(e){var kcode=getKeyCode(e);if(_MAC_Firefox_CMD.isPressed==true&&(kcode==67||kcode==86||kcode==88||e.charCode==99||e.charCode==118||e.charCode==120))return true;
else return false}function updateMacCmd(value){_macCmd=value}function macKeydown(e){if(_args.methods.inputAllowed(e)){var eloc=e.originalEvent?e.originalEvent.keyLocation||e.originalEvent.location:0;if(_IMEKeyboardAvailable){if(!_IMEKeyPressed||e.keyCode>=32&&e.keyCode<=126)_IMEKeyPressed=isIMEKey(e);if(_IMEKeyPressed)return true}var eloc=e.originalEvent?e.originalEvent.keyLocation||e.originalEvent.location:0;if(e.metaKey==false&&_macCmd!=_MAC_CMD.RELEASED){_macCmd=_MAC_CMD.RELEASED;_args.methods.sendKey(91,
0,"up",eloc)}var kcode=getKeyCode(e);if(kcode==93||agentInfo.isFirefox==true&&kcode==224&&e.key=="Meta"){_MAC_Firefox_CMD.isPressed=agentInfo.isFirefox?true:false;kcode=18}if(agentInfo.isFirefox==true)if(isFirefoxCmdKey(e)==true){_MAC_Firefox_CMD.isCmd=true;return}else{_MAC_Firefox_CMD.isCmd=false;if(_MAC_Firefox_CMD.isPressed==true&&e.keyCode!=224){_heapKeys["18"]++;_args.methods.sendKey(18,0,"down",eloc)}}if(isFunctionKey(kcode)||(e.altKey||e.ctrlKey)&&e.altKey!=e.ctrlKey)if(kcode==91||kcode==93){updateMacCmd(_MAC_CMD.PRESSED);
_lastKeyCode=kcode;return}else{if(kcode==18&&e.keyCode!=93&&e.keyCode!=224&&e.key!="Meta"){_heapKeys["17"]++;_args.methods.sendKey(17,0,"down",eloc);_heapKeys["18"]++;_args.methods.sendKey(18,0,"down",eloc)}else if(kcode>=16&&kcode<=18&&agentInfo.isFirefox==false){_heapKeys[kcode.toString()]++;if(kcode==18&&agentInfo.isFirefox==false)_args.methods.sendKey(kcode,0,"down",eloc)}else if(kcode==9&&e.altKey==true){_args.methods.sendKey(18,0,"down",eloc);_args.methods.sendKey(9,0,"down",eloc);_args.methods.sendKey(9,
0,"up",eloc);_args.methods.sendKey(18,0,"up",eloc);e.stopPropagation();e.preventDefault();return false}if(_heapKeys["18"]>0&&_args.properties.kbdUnicode==true)_lastKeyCode=kcode;else if(kcode!=18){_args.methods.sendKey(kcode,0,"down",eloc);if(!(productId=="thinrdp"&&!_args.properties.kbdUnicode&&e.altKey&&[219,221].indexOf(kcode)!=-1)){e.stopPropagation();e.preventDefault()}}}else if(_lastKeyCode==18||_heapKeys["18"]>0){_args.methods.sendKey(kcode,0,"down",eloc);if(agentInfo.isFirefox==false)_args.methods.sendKey(kcode,
0,"up",eloc);e.stopPropagation();e.preventDefault()}if(!e.altKey)_lastKeyCode=kcode;_altKeyPressed=e.altKey;if(!isMacModKey(e)){var elem=document.getElementById("kbdMacInput");elem.IMEPressed=isIMEKey(e)&&!elem.IMEPressed}getKeyEvent(e)}}function isMacModKey(e){return agentInfo.isMac&&(e.keyCode==16||e.keyCode==17||e.keyCode==18)}function macKeypress(e){if(_args.methods.inputAllowed(e)){var eloc=e.originalEvent?e.originalEvent.keyLocation||e.originalEvent.location:0;if(_IMEKeyboardAvailable&&_IMEKeyPressed)return true;
if(_macCmd!=_MAC_CMD.RELEASED&&agentInfo.isMac==true&&(agentInfo.isFirefox==true||agentInfo.isSafari==true))if(e.keyCode==99||e.keyCode==120||e.keyCode==118)return true;else{e.stopPropagation();e.preventDefault();return false}if(agentInfo.isFirefox==true&&isFirefoxCmdKey(e)==true)return;var eloc=e.originalEvent?e.originalEvent.keyLocation||e.originalEvent.location:0;var charCode=agentInfo.isOpera?e.which:e.charCode;var kcode=getKeyCode(e);if(_macCmd==_MAC_CMD.PRESSED)if(kcode!=67&&kcode!=86&&kcode!=
88){_args.methods.sendKey(_lastKeyCode,0,"down",eloc);updateMacCmd(_MAC_CMD.SENT);if(_args.properties.onlyKeyCode)_args.methods.sendKey(_lastKeyCode,0,"down",eloc);else _args.methods.sendKey(_lastKeyCode,charCode,"down",eloc)}else updateMacCmd(_MAC_CMD.RELEASED);else if(!e.altKey&&!_altKeyPressed)if(kcode!=0&&isFunctionKey(_lastKeyCode)||e.ctrlKey){e.stopPropagation();e.preventDefault();getKeyEvent(e);return}if(kcode>=16&&kcode<=18)_heapKeys[kcode.toString()]++;if(_args.properties.onlyKeyCode)_args.methods.sendKey(_lastKeyCode,
0,"down",eloc);else{if(productId=="ZSC"&&isNumPadKey(_lastKeyCode)==true)charCode=0;_lastCharCode=charCode;_pressedKeys.push({"keyCode":_lastKeyCode,"charCode":charCode});_args.methods.sendKey(_lastKeyCode,charCode,"down",eloc)}e.stopPropagation();e.preventDefault();getKeyEvent(e)}}function macKeyup(e){function resetInput(elem){elem.value="XXXX";if(elem.setSelectionRange)elem.setSelectionRange(0,elem.value.length);else{var r=elem.createTextRange();r.collapse(true);r.moveEnd("character",0);r.moveStart("character",
elem.value.length);r.select()}}if(_args.methods.inputAllowed(e)){var eloc=e.originalEvent?e.originalEvent.keyLocation||e.originalEvent.location:0;if(_IMEKeyboardAvailable&&_IMEKeyPressed)return true;var keyCode=e.keyCode;var kcode=getKeyCode(e);if(keyCode==93||agentInfo.isFirefox==true&&kcode==224&&e.key=="Meta"){keyCode=18;_MAC_Firefox_CMD.isPressed=false;if(_MAC_Firefox_CMD.isCmd==true){_MAC_Firefox_CMD.isCmd=false;_heapKeys={};return}}if(_allowToSwitchApps==true&&(e.keyCode==37||e.keyCode==39)&&
e.ctrlKey==true&&e.altKey==true){var value="next";if(e.keyCode==37)value="previous";changeAppFocus(value);e.preventDefault();e.stopPropagation();return}var eloc=e.originalEvent?e.originalEvent.keyLocation||e.originalEvent.location:0;if(keyCode==91||keyCode==93){if(_macCmd==_MAC_CMD.PRESSED&&_lastKeyCode==keyCode){_args.methods.sendKey(keyCode,0,"down",eloc);_args.methods.sendKey(keyCode,0,"up",eloc)}else if(_macCmd>=_MAC_CMD.PRESSED)_args.methods.sendKey(keyCode,0,"up",eloc);updateMacCmd(_MAC_CMD.RELEASED)}else if(keyCode==
18&&e.keyCode!=93&&(e.keyCode!=224&&e.key!="Meta")){if(_heapKeys[keyCode.toString()]<=0){_args.methods.sendKey(17,0,"down",eloc);_heapKeys["17"]++;_args.methods.sendKey(keyCode,0,"down",eloc);_heapKeys[keyCode.toString()]++}for(var k=0;k<_heapKeys[keyCode.toString()];k++){_args.methods.sendKey(keyCode,0,"up",eloc);_args.methods.sendKey(17,0,"up",eloc)}_heapKeys["17"]=0;_heapKeys[keyCode.toString()]=0;_lastKeyCode=0}else if(keyCode>=16&&keyCode<=18){if(_heapKeys[keyCode.toString()]<=0){_args.methods.sendKey(keyCode,
0,"down",eloc);_heapKeys[keyCode.toString()]++}for(var k=0;k<_heapKeys[keyCode.toString()];k++)_args.methods.sendKey(keyCode,0,"up",eloc);_heapKeys[keyCode.toString()]=0}else if(this.value!="XXXX"&&!this.IMEPressed){var str=this.value.replace("XXXX","");resetInput(this);for(var i=0;i<str.length;++i){key=str.charCodeAt(i);_args.methods.sendKey(0,key,"down",eloc);_args.methods.sendKey(0,key,"up",eloc);if(_args.properties.kbdLogKeys===true)logDebug("sendkey down and up : "+key+" ("+key+") - IMEPressed : "+
this.IMEPressed)}_lastKeyCode=0}else{_altKeyPressed=false;if(_lastKeyCode==18&&kcode!=18){_heapKeys[18]--;_args.methods.sendKey(18,0,"up",eloc)}else if(e.altKey)resetInput(this);var pEvent=popEvent(kcode);if(helper.object.existsPath(pEvent,"charCode")==true)_lastCharCode=pEvent.charCode;else _lastCharCode=0;if(pEvent!=null||!(_IMEKeyCode==_lastKeyCode)&&kcode!=0)_args.methods.sendKey(kcode,_lastCharCode,"up",eloc);else helper.console.log(helper.string.format("Missing keyup: {0}, lastCode: {1}",kcode,
_lastCharCode),arguments);_lastKeyCode=0;_lastCharCode=0}e.stopPropagation();e.preventDefault();getKeyEvent(e)}}function setSelectionRange(){if(_kbdInput){if(_kbdInput.value=="")_kbdInput.value="XXXX";if(_kbdInput.setSelectionRange)_kbdInput.setSelectionRange(0,_kbdInput.value.length);else if(_kbdInput.createTextRange){var r=_kbdInput.createTextRange();r.collapse(true);r.moveEnd("character",0);r.moveStart("character",_kbdInput.value.length);r.select()}_kbdInput.focus()}}function setFocus(){if(!document.hasFocus())document.body.focus();
if(_kbdInput)setTimeout(()=>{_kbdInput.focus()},250)}function dispose(){if(_kbdInput){_kbdInput.parentElement.removeChild(_kbdInput);_kbdInput=null}}initialize();Object.defineProperty(_ref,"focus",{enumerable:true,configurable:false,writable:false,value:setFocus});Object.defineProperty(_ref,"caret",{enumerable:true,configurable:false,get:function(){return _caret}});Object.defineProperty(_ref,"setSelectionRange",{enumerable:true,configurable:false,writable:false,value:setSelectionRange});Object.defineProperty(_ref,
"value",{enumerable:true,configurable:false,get:function(){return _kbdInput.value},set:function(value){return _kbdInput.value=value}});Object.defineProperty(_ref,"dispose",{enumerable:true,configurable:false,writable:false,value:dispose});if(agentInfo.isMac)Object.defineProperty(_ref,"updateMacCmd",{enumerable:true,configurable:false,writable:false,value:updateMacCmd});Object.defineProperty(_ref,"inputElement",{enumerable:true,configurable:false,get:function(){return _kbdInput}});Object.defineProperty(_ref,
"active",{enumerable:true,configurable:false,get:function(){return _active},set:function(value){_active=value}});return _ref}try{Thinfinity!=undefined}catch(e){Thinfinity={}}if(Thinfinity.Driver===undefined)Thinfinity.Driver={};Thinfinity.Driver.Keyboard=DKeyboard;Object.defineProperty(Thinfinity.Driver.Keyboard,"MAC_CMD",{enumerable:true,configurable:false,get:function(){return _MAC_CMD}})})();
(function(){function DMouse(args,oInterface){var _ref=this;var _noop=()=>{return null};var _args={container:null,device:null,useDblClick:false,allowOverrideCursor:true,extra:{getElementFromPoint:_noop,preventDefault:_noop}};var _methods=null;var _properties=null;var _oInterface=null;var _mousePress={"down":0,"event":{"x":null,"y":null,"button":null},"pressTime":500,"currentTime":null,"threshold":agentInfo.isMobile?45:25};var _enumMousePressStatus={"RELEASED":0,"PRESSED":1,"SENT":2};var _doubleClickThreshold=
200;var _clickDistThreshold=10;var _lastDownDblClick=false;var _mobileClickCallback=null;var _buttonDown=null;var _upClick={timeout:null,cacheX:null,cacheY:null,cacheButton:null};var _downClick={timeout:null,cacheX:null,cacheY:null,cacheButton:null};var _mouseX=0;var _mouseY=0;var _pageX=0;var _pageY=0;var _cursorCanvas=null;var _mouseLeave=false;var _overrideCursor=null;var wheelsEventNames=["DOMMouseScroll","mousewheel"];var _isBorderButton=false;var moveCursorCanvas=null;var _mouseMoveAsync={"position":{"x":parseInt(window.environment.currentWidth/
2,10),"y":parseInt(window.environment.currentHeight/2,10)},enable:true};var fireEvent=null;var _defaultEventsProps={"async":false};var _defaultZIndex=500;var _mouseMask=null;var _mouseMaskEffect=null;var _effect=false;var isRequesting=false;var requestAnimation=_noop;var _displaySize=null;var _defaultDPI=96;var _delayedCurSync={lastTime:null,minTime:2E3,enabled:productId==="thinvnc"};var _requireUserInteractionAction=false;function initialize(){helper.object.parseAttributes(_args,args);fireEvent=
(new Thinfinity.Events({"owner":_ref,"events":_args.events})).fireEvent;_oInterface=oInterface;_methods=_oInterface.methods;_properties=_oInterface.properties;_displaySize=_args.device.display;_oInterface.on("setCursor",setCursor);_oInterface.on("drawCursor",drawCursor);_oInterface.on("resetCursor",resetCursor);_oInterface.on("hideCursor",hideCursor);_oInterface.on("removeCursor",removeCursorCanvas);_oInterface.on("overrideCursor",function(o,n){setOverrideCursor(_properties.overrideCursor)});_oInterface.on("playbackStart",
function(){if(_oInterface.properties.isServerControlMouse)createMouseMask()});_oInterface.on("requireUserInteractionAction",requireUserInteractionAction);if(agentInfo.isMSIE&&agentInfo.msieVersion>=9)wheelsEventNames.push("wheel");if(agentInfo.isMobile)helper.dom.addEvent(_args.container,"touchstart",onTouchStartMobile,{"passive":false});helper.dom.addEvent(_args.container,wheelsEventNames,wheel,{"passive":false});helper.dom.addEvent(_args.container,"mousedown",onTouchStart,{"passive":false});helper.dom.addEvent(document,
"click",onDocumentClick,{"passive":false});helper.dom.addEvent(_args.container,"mouseup",onTouchEnd,{"passive":false});helper.dom.addEvent(_args.container,"mousemove",onTouchMove,{"passive":false});helper.dom.addEvent(_args.container,"mouseleave",onTouchLeave,{"passive":false});helper.dom.addEvent(_args.container,"mouseenter",onMouseEnter,{"passive":false});if(_properties.mousePressAsRightButton){helper.dom.addEvent(_args.container,"touchstart",onTouchDeviceStart,{"passive":true});helper.dom.addEvent(_args.container,
"touchmove",onTouchDeviceMove,{"passive":true});helper.dom.addEvent(_args.container,"touchend",onTouchDeviceEnd,{"passive":true})}requestAnimation=agentInfo.isMobile?window.requestAnimationFrame:helper.animationFrame.request;if(!_properties.overrideCursor)moveCursorCanvas=moveCursorCanvas_async;else moveCursorCanvas=function(){};setOverrideCursor(_properties.overrideCursor);if(agentInfo.isTouch){_oInterface.on("mouseMove",mouseMove);_oInterface.on("mouseDown",mouseDown);_oInterface.on("mouseUp",mouseUp)}}
function createMouseMask(){if(!_mouseMask)_mouseMask=helper.dom.appendJsonElement({parentElement:_args.container,type:"div",attributes:{id:"mouseMask",class:"clickEffect noTransition hidden",style:""}})}function requireUserInteractionAction(e){_requireUserInteractionAction=true}function dispatchUserInteractionGesture(e){_requireUserInteractionAction=false;_oInterface.__prototype__.fireEvent("userInteractionAction",e,{async:false})}function setCursor(o){let t=typeof o;if(t==="object")if(_properties.overrideCursor){_args.container.originalImage=
o;if(_properties.cursorVisible)_args.container.style.cursor=o.url;else _args.container.style.cursor="none";if(agentInfo.isSafari)_currentCursor.check()}else{_args.container.style.cursor="none";if(!_cursorCanvas)_cursorCanvas=createCursorCanvas(o);updateCursorCanvas(_cursorCanvas,o)}else if(_properties.overrideCursor)_args.container.style.cursor=o;else if(_cursorCanvas)if(["visible","hidden"].indexOf(o)!==-1)_cursorCanvas.style.visibility=o;else _cursorCanvas.style.display=o}function resetCursor(){if(_properties.overrideCursor){if(_args.container.style.cursor===
"none"&&_args.container.originalImage!=="")_args.container.style.cursor=_args.container.originalImage.cursor}else{if(_cursorCanvas)delete _cursorCanvas.mask;_cursorCanvas=null}}function drawCursor(item,imgpart){item.draw(_cursorCanvas.canvas.context,imgpart.x,imgpart.y)}function hideCursor(){if(_properties.overrideCursor)_args.container.style.cursor="none";else if(_cursorCanvas)_cursorCanvas.style.visibility="hidden"}function removeCursorCanvas(){if(_cursorCanvas){delete _cursorCanvas.mask;_cursorCanvas.innerHTML=
"";try{_args.container.removeChild(_cursorCanvas)}catch(err){}_cursorCanvas=null}}function createCursorCanvas(win){let hwnd=win.hwnd||0;let id=productId+"_canvas_"+hwnd;let div=document.getElementById(id);if(!div){div=document.createElement("div");div.style.position="absolute";div.style.display="inline-block"}if(!win.parent){if(!div.canvas){let canvas=document.createElement("canvas");canvas.style.left="0px";canvas.style.top="0px";canvas.width=win.width;canvas.height=win.height;canvas.style.position=
"absolute";canvas.style.zIndex=1;canvas.style.width=win.width;canvas.style.height=win.height;canvas.hwnd=hwnd;div.canvas=canvas;div.appendChild(canvas)}if(!div.canvas.context)div.canvas.context=div.canvas.getContext("2d",{willReadFrequently:true})}div.style.pointerEvents="none";var strValue="translateZ(0)";if(typeof div.style.msTransform!="undefined")div.style.msTransform=strValue;else if(typeof div.style.MozTransform!="undefined")div.style.MozTransform=strValue;else if(typeof div.style.OTransform!=
"undefined")div.style.OTransform=strValue;else if(typeof div.style.WebkitTransform!="undefined")div.style.WebkitTransform=strValue;div.id=id;if(helper.object.validate(win.parent)&&win.parent!=0){div.parent=win.parent;let parentDiv=document.getElementById(productId+"_canvas_"+win.parent);if(parentDiv)parentDiv.appendChild(div);else{div.style.display="none";div.style.visibility="hidden";_args.container.appendChild(div)}}else _args.container.appendChild(div);return div}function updateCursorCanvas(div,
win){if(win){let w=typeof win.width!=="undefined"&&win.width>0?win.width:win?.src?.width&&win.src.width>0?win.src.width:null;let h=typeof win.height!=="undefined"&&win.height>0?win.height:win?.src?.height&&win.src.height>0?win.src.height:null;let hx=win.dx||win.x||0;let hy=win.dy||win.y||0;if(w==null||h==null)return;div.style.zIndex=_properties.baseZIndex+(win.zidx||_defaultZIndex)*10;div.width=w;div.height=h;div.style.width=w+"px";div.style.height=h+"px";let cu=_properties.CUEnabled;if(w==0||h==
0){div.style.visibility="hidden";div.style.display="none"}else{if(cu||typeof win.imgs!="undefined")div.canvas.context.clearRect(0,0,w,h);if(!_properties.isServerControlMouse)if(!_properties.overrideCursor&&_mouseLeave&&productId!=="thinvnc")div.style.visibility="hidden";else{div.style.display="block";div.style.visibility="visible"}if(w!=div.canvas.width){div.canvas.width=w;div.canvas.style.width=w+"px";div.width=w;div.style.width=w+"px"}if(h!=div.canvas.height){div.canvas.height=h;div.canvas.style.height=
h+"px";div.height=h;div.style.height=h+"px"}if(win.src)if(cu)div.canvas.context.drawImage(win.src,0,0,w,h);else div.canvas.context.drawImage(win.src,hx,hy,w,h)}if(typeof win.className!="undefined")div.className=win.className;let canvas=div.canvas;if(!win.parent)canvas.style.pointerEvents="none";if(typeof hx!="undefined"){div.hotspotX=hx;div.hotspotY=hy;let x=win.left+hx;let y=win.top+hy;if(win.dpi){let s=_defaultDPI/win.dpi;_cursorCanvas.style.transform=`scale(${s})`;x*=s;y*=s;hy/=s;hx/=s}div.canvas.style.top=
-hy+"px";div.canvas.style.left=-hx+"px";if(!_delayedCurSync.enabled||Date.now()-_delayedCurSync.lastTime>_delayedCurSync.minTime){div.style.top=y+"px";div.style.left=x+"px"}}}}function createCache(timer,x,y,button){return{timeout:timer,cacheX:x,cacheY:y,cacheButton:button}}function clearCacheUp(){window.clearTimeout(_upClick.timeout);_upClick=createCache(null,null,null,null)}function clearCacheDown(){window.clearTimeout(_downClick.timeout);_downClick=createCache(null,null,null,null)}function singleClickUp(){cd=
_upClick;_methods.sendMouse(cd.cacheX,cd.cacheY,cd.cacheButton,"up");if((agentInfo.isMobile||agentInfo.isTabletMode)&&_mobileClickCallback){_mobileClickCallback(cd.cacheX,cd.cacheY,cd.cacheButton,"down");if(agentInfo.isTabletMode)_mobileClickCallback=null}clearCacheUp()}function singleClickDown(){cd=_downClick;_methods.sendMouse(cd.cacheX,cd.cacheY,cd.cacheButton,"down");clearCacheDown()}function sendMouse(X,Y,button,command){_delayedCurSync.lastTime=Date.now();if(command=="down"){if(_buttonDown!=
null)sendMouse(X,Y,_buttonDown,"up");_buttonDown=button}else if(command=="up")_buttonDown=null;if(_properties.mouseBufferAvailable===true)alert("Buffer mouse is not working");else if(!_args.useDblClick)_methods.sendMouse(X,Y,button,command);else if(command=="down"){var dist=Math.sqrt((_downClick.cacheX-X)*(_downClick.cacheX-X)+(_downClick.cacheY-Y)*(_downClick.cacheY-Y));if(_downClick.cacheButton==button&&_downClick.timeout&&dist<_clickDistThreshold){window.clearTimeout(_downClick.timeout);window.clearTimeout(_upClick.timeout);
if(productId=="ZSC"){_downClick.cacheX=X;_downClick.cacheY=Y;_lastDownDblClick=false;_downClick.cacheButton=0;_upClick.cacheButton=0;singleClickDown();singleClickUp()}_downClick.cacheX=X;_downClick.cacheY=Y;_downClick.cacheButton|=4;_upClick.cacheButton|=4;_lastDownDblClick=true;singleClickDown()}else if(_downClick.cacheButton!=button||dist>_clickDistThreshold){if(_downClick.timeout){window.clearTimeout(_downClick.timeout);singleClickDown()}_downClick=createCache(window.setTimeout(singleClickDown,
_doubleClickThreshold),X,Y,button)}}else if(command=="up"){var dist=Math.sqrt((_upClick.cacheX-X)*(_upClick.cacheX-X)+(_upClick.cacheY-Y)*(_upClick.cacheY-Y));if(_lastDownDblClick){_upClick.cacheX=X;_upClick.cacheY=Y;_lastDownDblClick=false;singleClickUp()}else if(_upClick.cacheButton!=button||dist>_clickDistThreshold){if(_upClick.timeout){window.clearTimeout(_upClick.timeout);singleClickUp()}_upClick=createCache(window.setTimeout(singleClickUp,_doubleClickThreshold),X,Y,button)}}else logError("sendMouse received unexpected command: "+
command)}function checkRemotePointer(x,y){if(_cursorCanvas){let aw=0,ah=0,th=4;if(agentInfo.isMobile){aw=_displaySize.width;ah=_displaySize.height;th=0}else{aw=window.environment.availWidth;ah=window.environment.availHeight}aw*=_properties.zoomFactor;ah*=_properties.zoomFactor;if(_mouseLeave&&!_properties.overrideCursor||(_args.container.style.cursor!="default"&&x<=th||x>=aw-th||y>=ah-th)){if(_args.container.style.cursor!="default")_args.container.style.cursor="default";if(_cursorCanvas.style.visibility===
"visible"&&!_properties.isServerControlMouse)_cursorCanvas.style.visibility="hidden"}else if(!_mouseLeave&&!_isBorderButton&&!_properties.overrideCursor&&_args.container.style.cursor!="none"&&productId!="ZSC"){_args.container.style.cursor="none";if(_cursorCanvas.style.visibility!=="visible")_cursorCanvas.style.visibility="visible"}}}function domElementOnTop(){var onTop=false;var elems=document.querySelectorAll(".blockUI.blockMsg.blockElement:not(.hidden), .systemPopup.systemDlg:not(.hidden)");var e=
0;while(!onTop&&e<elems.length){if(helper.style.getComputedStyle(elems[e],"display")!="none")onTop=true;e++}return onTop}function findPos(obj){var curleft=0;var curtop=0;do{curleft+=obj.offsetLeft;curtop+=obj.offsetTop}while(obj=obj.offsetParent);return[curleft,curtop]}function mouseDown(x,y,button){var e=arguments&&arguments.length>3?arguments[3]:null;if(!(agentInfo.isWindows&&agentInfo.isMSIE))_oInterface.__prototype__.fireEvent("setText",String.fromCharCode(32));if(!window.hasFocus)window.focus();
if(!document.hasFocus())document.body.focus();if(_properties.active&&_properties.mouseControl){var position=findPos(_args.container);var left=position[0];var top=position[1];if((agentInfo.isMobile==true||agentInfo.isTabletMode&&e&&_allowedTouchEvents.indexOf(e.type)!=-1)&&productId=="ZSC"){_mouseX=Math.round(x);_mouseY=Math.round(y)}else{var scale=_properties.scale;_mouseX=Math.round((x-left)/scale);_mouseY=Math.round((y-top)/scale)}sendMouse(_mouseX,_mouseY,button,"down");fireEvent("mouseDown",{x:_mouseX,
y:_mouseY,button:button},_defaultEventsProps)}if(_requireUserInteractionAction)dispatchUserInteractionGesture()}function mouseUp(x,y,button){var e=arguments&&arguments.length>3?arguments[3]:null;if(_properties.active&&_properties.mouseControl){var position=findPos(_args.container);var left=position[0];var top=position[1];if((agentInfo.isMobile==true||agentInfo.isTabletMode&&e&&_allowedTouchEvents.indexOf(e.type)!=-1)&&productId=="ZSC"){_mouseX=Math.round(x);_mouseY=Math.round(y)}else{var scale=_properties.scale;
_mouseX=Math.round((x-left)/scale);_mouseY=Math.round((y-top)/scale)}sendMouse(_mouseX,_mouseY,button,"up");fireEvent("mouseUp",{x:_mouseX,y:_mouseY,button:button},_defaultEventsProps)}}function mouseMove(x,y){if(_properties.active&&_properties.mouseControl){let position=findPos(_args.container);let left=position[0];let top=position[1];if(x<left)x=left;if(y<top)y=top;let zoomFactor=_properties.zoomFactor;let scale=_properties.scale;let mx=left+_displaySize.width*zoomFactor*scale;let my=top+_displaySize.height*
zoomFactor*scale;if(x>mx)x=mx;if(y>my)y=my;_mouseX=Math.round((x-left)/scale);_mouseY=Math.round((y-top)/scale);sendMouse(_mouseX,_mouseY,null,"move");moveCursorCanvas(x,y)}}function onMouseEnter(e){_mouseLeave=false;if(_properties.cursorVisible)if(!_properties.overrideCursor){if(_cursorCanvas){if(_cursorCanvas.style.visibility==="hidden")_cursorCanvas.style.visibility="visible";if(_cursorCanvas.style.display!=="block")_cursorCanvas.style.display="block";if(_args.container.style.cursor!=="none")_args.container.style.cursor=
"none"}}else _args.container.style.cursor=_args.container.originalImage?_args.container.originalImage.cursor:"default"}function onTouchDeviceStart(e){if(_properties.isServerControlMouse||!_properties.allowMouseCapture)return;var x=(e.changedTouches||e.touches)[0].pageX;var y=(e.changedTouches||e.touches)[0].pageY;_mousePress.down=_enumMousePressStatus.PRESSED;_mousePress.event.x=x;_mousePress.event.y=y;_mousePress.event.button=e.button;_mousePress.currentTime=(new Date).getTime()}function onTouchDeviceMove(e){if(_mousePress.down===
_enumMousePressStatus.PRESSED){if(_properties.isServerControlMouse||!_properties.allowMouseCapture)return;var x=typeof e.pageX!="undefined"?e.pageX:(e.changedTouches||e.touches)[0].pageX;var y=typeof e.pageY!="undefined"?e.pageY:(e.changedTouches||e.touches)[0].pageY;if(!isInsideOfArea(x-_mousePress.event.x,y-_mousePress.event.y,_mousePress.threshold))_mousePress.down=_enumMousePressStatus.RELEASED}}function onTouchDeviceEnd(e){if(_mousePress.down===_enumMousePressStatus.PRESSED){if(_properties.isServerControlMouse||
!_properties.allowMouseCapture)return;var button=2;if((new Date).getTime()-_mousePress.currentTime>_mousePress.pressTime){mouseDown(_pageX,_pageY,button);mouseUp(_pageX,_pageY,button)}}_mousePress.down=_enumMousePressStatus.RELEASED}function isInsideOfArea(x,y,rad){return Math.pow(x,2)+Math.pow(y,2)<=rad}function onDocumentClick(e){if(!document.hasFocus())fireEvent("documentClick",{},_defaultEventsProps)}function isTouchSource(e){return e?.sourceCapabilities?.firesTouchEvents===true}function onTouchStart(e){if(!_properties.allowMouseCapture||
_properties.isServerControlMouse||isTouchSource(e)||_args.extra.preventDefault(e)||!_properties.hookMouse&&agentInfo.isMobile)return;var overrideCursor=_properties.overrideCursor;if(domElementOnTop()){if(!overrideCursor&&_cursorCanvas&&_cursorCanvas.style.visibility==="visible")_cursorCanvas.style.visibility="hidden";return}else if(!overrideCursor&&_cursorCanvas&&_cursorCanvas.style.visibility==="hidden")_cursorCanvas.style.visibility="visible";var elem=_args.extra.getElementFromPoint(e);var evt=
null;if(elem){if(agentInfo.isMSIE){if(elem.switchMouseCursor!==false){evt=e.srcElement||e.target;if(evt)evt.style.cursor="default";if(_cursorCanvas&&_cursorCanvas.style.visibility==="visible")_cursorCanvas.style.visibility="hidden";if(!overrideCursor){_args.container.style.cursor="default";_cursorCanvas.canvas.style.cursor="default"}}}else if(elem.style.cursor!="none"&&_cursorCanvas&&_cursorCanvas.style.visibility==="visible")_cursorCanvas.style.visibility="hidden";return}else if(agentInfo.isMSIE&&
agentInfo.msieVersion<=10){evt=e.srcElement||e.target;if(evt)if(!overrideCursor&&productId!=="ZSC"&&(productId!=="thinrdp"||evt.style.cursor!==""&&evt.style.cursor!=="default"))evt.style.cursor="none"}else if(_cursorCanvas&&_cursorCanvas.style.visibility==="hidden")_cursorCanvas.style.visibility="visible";if(agentInfo.isMobile&&isTouchEvent(e)){var X,Y;if(productId==="ZSC"){X=serverMouseX(e,false);Y=serverMouseY(e,false)}else{X=(e.changedTouches||e.touches)[0].pageX;Y=(e.changedTouches||e.touches)[0].pageY}_pageX=
X;_pageY=Y;if((e.changedTouches||e.touches).length==1){var button=0;moveCursorCanvas(X,Y);mouseDown(X,Y,button)}else{var button=2;mouseDown(X,Y,button);mouseUp(X,Y,button)}}else{var pageX=agentInfo.isMobile?getMobileMouseLocationX(e):e.pageX;var pageY=agentInfo.isMobile?getMobileMouseLocationY(e):e.pageY;_pageX=pageX;_pageY=pageY;var button=e.button||0;_mousePress.down=_enumMousePressStatus.RELEASED;if(_properties.mousePressAsRightButton&&button<2){_mousePress.down=_enumMousePressStatus.PRESSED;_mousePress.event.x=
_pageX;_mousePress.event.y=_pageY;_mousePress.event.button=button;_mousePress.currentTime=(new Date).getTime()}else mouseDown(pageX,pageY,button)}if(e.preventDefault)e.preventDefault()}function onTouchMove(e){if(!_properties.allowMouseCapture||_properties.isServerControlMouse||isTouchSource(e)||_args.extra.preventDefault(e)||!_properties.hookMouse&&agentInfo.isMobile)return;var overrideCursor=_properties.overrideCursor;if(!overrideCursor)if(domElementOnTop()){if(_cursorCanvas&&_cursorCanvas.style.visibility!=
"hidden"){_cursorCanvas.style.visibility="hidden";if(_args.container.style.cursor==="none")_args.container.style.cursor="default"}return}else if(!_mouseLeave&&!_isBorderButton){if(_args.container.style.cursor!=="none"&&productId!=="ZSC")_args.container.style.cursor="none";if(_cursorCanvas&&_cursorCanvas.style.visibility=="hidden")_cursorCanvas.style.visibility="visible"}_isBorderButton=false;if(!overrideCursor){var elem=_args.extra.getElementFromPoint(e);if(elem)if(agentInfo.isMSIE){if(elem.switchMouseCursor!==
false){var evt=e.srcElement||e.target;if(evt)evt.style.cursor="default";if(_cursorCanvas&&_cursorCanvas.style.visibility==="visible")_cursorCanvas.style.visibility="hidden";_args.container.style.cursor="default";_cursorCanvas.canvas.style.cursor="default";return}}else if(elem.className.indexOf("borderButton")!=-1){_isBorderButton=true;if(_properties.cursorVisible){if(_args.container.style.cursor!="default")_args.container.style.cursor="default";if(_cursorCanvas.style.display!=="none")_cursorCanvas.style.display=
"none"}}else{if(elem.style.cursor!="none"){if(_cursorCanvas&&_cursorCanvas.style.visibility==="visible")_cursorCanvas.style.visibility="hidden";return}}else if(agentInfo.isMSIE){if(!overrideCursor){if(_cursorCanvas){if(_mouseLeave){_cursorCanvas.style.display="block";_mouseLeave=false}if(_cursorCanvas.style.visibility==="hidden")_cursorCanvas.style.visibility="visible"}if(productId!="ZSC"&&_args.container.style.cursor!=="none")_args.container.style.cursor="none"}if(agentInfo.msieVersion<=10){var evt=
e.srcElement||e.target;if(evt)if(productId!="ZSC"&&(productId!="thinrdp"||evt.style.cursor!=""&&evt.style.cursor!="default"))evt.style.cursor="none"}}else{if(_properties.cursorVisible&&_cursorCanvas&&_cursorCanvas.style.display==="none")_cursorCanvas.style.display="block";if(_cursorCanvas&&_cursorCanvas.style.visibility==="hidden")_cursorCanvas.style.visibility="visible"}}if(!_methods.inputAllowed())return;_pageX=typeof e.pageX!="undefined"?agentInfo.isMobile?getMobileMouseLocationX(e):e.pageX:(e.changedTouches||
e.touches)[0].pageX;_pageY=typeof e.pageY!="undefined"?agentInfo.isMobile?getMobileMouseLocationY(e):e.pageY:(e.changedTouches||e.touches)[0].pageY;var waitForPress=false;if(_properties.mousePressAsRightButton&&_mousePress.down===_enumMousePressStatus.PRESSED){waitForPress=true;if(!isInsideOfArea(_pageX-_mousePress.event.x,_pageY-_mousePress.event.y,_mousePress.threshold)){mouseDown(_mousePress.event.x,_mousePress.event.y,_mousePress.event.button);_mousePress.down=_enumMousePressStatus.SENT;waitForPress=
false}}var currentX=serverMouseX(e,false);var currentY=serverMouseY(e,false);var pageX=agentInfo.isMobile?getMobileMouseLocationX(e):e.pageX;var pageY=agentInfo.isMobile?getMobileMouseLocationY(e):e.pageY;if(_mouseX!=currentX||_mouseY!=currentY){_mouseX=currentX;_mouseY=currentY;if(!waitForPress){let _pos=null;if(agentInfo.isMobile&&isTouchEvent(e))_pos={x:(e.changedTouches||e.touches)[0].pageX,y:(e.changedTouches||e.touches)[0].pageY};else _pos={x:pageX,y:pageY};mouseMove(_pos.x,_pos.y)}}}function onTouchEnd(e){if(!_properties.allowMouseCapture||
_properties.isServerControlMouse||isTouchSource(e)||_args.extra.preventDefault(e)||!_properties.hookMouse&&agentInfo.isMobile)return;if(!_properties.overrideCursor)if(domElementOnTop()){if(_cursorCanvas&&_cursorCanvas.style.visibility==="visible")_cursorCanvas.style.visibility="hidden";return}else if(_cursorCanvas&&_cursorCanvas.style.visibility==="hidden")_cursorCanvas.style.visibility="visible";_pageX=typeof e.pageX!="undefined"?agentInfo.isMobile?getMobileMouseLocationX(e):e.pageX:(e.changedTouches||
e.touches)[0].pageX;_pageY=typeof e.pageY!="undefined"?agentInfo.isMobile?getMobileMouseLocationY(e):e.pageY:(e.changedTouches||e.touches)[0].pageY;var button=agentInfo.isMobile&&isTouchEvent(e)?0:e.button||0;var sendDeferredTime=0;if(_properties.mousePressAsRightButton&&_mousePress.down===_enumMousePressStatus.PRESSED){sendDeferredTime=25;if((new Date).getTime()-_mousePress.currentTime>_mousePress.pressTime)button=2;mouseDown(_mousePress.event.x,_mousePress.event.y,button);_mousePress.down=_enumMousePressStatus.SENT}setTimeout(function(x,
y,btn){mouseUp(x,y,btn)},sendDeferredTime,_pageX,_pageY,button);if(e.preventDefault)e.preventDefault()}function onTouchLeave(e){_mouseLeave=true;if(!_properties.allowMouseCapture||_properties.isServerControlMouse||isTouchSource(e)||_args.extra.preventDefault(e)||!_properties.hookMouse&&agentInfo.isMobile)return;var x=typeof e.pageX!="undefined"?agentInfo.isMobile?getMobileMouseLocationX(e):e.pageX:(e.changedTouches||e.touches)[0].pageX;var y=typeof e.pageY!="undefined"?agentInfo.isMobile?getMobileMouseLocationY(e):
e.pageY:(e.changedTouches||e.touches)[0].pageY;if(agentInfo.isMobile&&(productId=="virtualui"||productId=="thinrdp"||productId=="thinvnc"));else if(productId!="thinvnc"&&_cursorCanvas)_cursorCanvas.style.display="none";if(!_properties.overrideCursor){var efp=_args.extra.getElementFromPoint(e);if(efp&&efp.switchMouseCursor!==false){if(_cursorCanvas)_cursorCanvas.style.display="none";_args.container.style.cursor="default";efp=null}}if(_buttonDown!=null&&(x<5||y<5||x>$(_args.container).width()-5||y>
$(_args.container).height()-5)){_pageX=x;_pageY=y;mouseUp(_pageX,_pageY,_buttonDown);if(e.preventDefault)e.preventDefault()}else{let scale=_properties.scale;let fp=findPos(_args.container);if(x<0)x=0;else{let maxX=(_args.container.offsetWidth+fp[0])*scale;if(x>maxX)x=maxX}if(y<0)y=0;else{let maxY=(_args.container.offsetHeight+fp[1])*scale;if(y>maxY)y=maxY}mouseMove(x,y)}}function getMobileMouseLocationX(e){return e.pageX+_args.container.scrollLeft*_properties.zoomFactor}function getMobileMouseLocationY(e){return e.pageY+
_args.container.scrollTop*_properties.zoomFactor}function wheel(event){if(event.ctrlKey&&helper.object.getValue(self,"clientSettings.MouseWheelZoom",false))return true;var obj=_args.extra.getElementFromPoint(event);if(!obj){var offset=$(_args.container).offset();var s=_properties.scale;if(event.pageX>=offset.left&&event.pageX<=offset.left+$(_args.container).width()*s&&event.pageY>=offset.top&&event.pageY<=offset.top+$(_args.container).height()*s){var delta=0;var axis="y";if(!event)event=window.event;
if(typeof event.wheelDelta!="undefined"){delta=event.wheelDelta;if(typeof event.wheelDeltaY!="undefined")axis=Math.abs(event.wheelDeltaX)>Math.abs(event.wheelDeltaY)&&Math.abs(event.wheelDeltaX)>Math.abs(event.wheelDeltaZ)?"x":Math.abs(event.wheelDeltaY)>Math.abs(event.wheelDeltaZ||0)?"y":"z";if(agentInfo.isOpera)delta=-delta}else if(typeof event.delta!="undefined"){delta=event.delta;axis=Math.abs(event.deltaX)>Math.abs(event.deltaY)&&Math.abs(event.deltaX)>Math.abs(event.deltaZ)?"x":Math.abs(event.deltaY)>
Math.abs(event.deltaZ||0)?"y":"z"}else if(agentInfo.isMSIE&&typeof event.deltaX!="undefined"&&typeof event.deltaY!="undefined")if(event.deltaX!=0){delta=event.deltaX;axis="x"}else{delta=-event.deltaY;axis="y"}else if(typeof event.detail!="undefined"){delta=event.detail*-120;axis=event.axis==1?"x":event.axis==2?"y":"z"}if(!agentInfo.isMac){delta=Math[delta>0?"ceil":"floor"](delta/120)*120;if(delta>120)delta=120;else if(delta<-120)delta=-120}if(delta)if(axis=="y")_methods.sendWheel(delta,0);else{if(!agentInfo.isMSIE)delta=
-delta;_methods.sendWheel(0,delta)}event.stopPropagation();event.preventDefault()}}}function serverMouseX(e){var position=findPos(_args.container);var left=position[0];var scale=_properties.scale;if((agentInfo.isMobile||agentInfo.isTabletMode&&_allowedTouchEvents.indexOf(e.type)!=-1)&&isTouchEvent(e))return Math.floor(((e.changedTouches||e.touches)[0].pageX-left)/scale);else return Math.floor((e.pageX-left)/scale)}function serverMouseY(e){var position=findPos(_args.container);var top=position[1];
var scale=_properties.scale;if((agentInfo.isMobile||agentInfo.isTabletMode&&_allowedTouchEvents.indexOf(e.type)!=-1)&&isTouchEvent(e))return Math.floor(((e.changedTouches||e.touches)[0].pageY-top)/scale);else return Math.floor((e.pageY-top)/scale)}function isTouchEvent(e){e=e.originalEvent||e;if(e&&(e.changedTouches||e.touches)&&(e.changedTouches||e.touches).length>0)return true;return false}function onTouchStartMobile(e){e.preventDefault()}function moveCursorCanvas_sync(x,y,effect){if(!!_cursorCanvas){var position=
findPos(_args.container);var scale=_properties.scale;var cX=Math.round((x-position[0])/scale);var cY=Math.round((y-position[1])/scale);mouseCanvasX=cX;mouseCanvasY=cY;if(_cursorCanvas.style.left!=cX+"px"||_cursorCanvas.style.top!=cY+"px"){_cursorCanvas.style.left=cX+"px";_cursorCanvas.style.top=cY+"px";if(_properties.remotePointer&&!_properties.isServerControlMouse)checkRemotePointer(x,y)}if(_mouseMask&&effect){clearTimeout(_mouseMaskEffect);_mouseMask.style.left=mouseCanvasX+"px";_mouseMask.style.top=
mouseCanvasY+"px";helper.style.replace(_mouseMask,"hidden","runAnimation");_mouseMaskEffect=setTimeout(()=>{helper.style.replace(_mouseMask,"runAnimation","hidden")},200)}}}function mouseMoveCanvas_AnimationFrame(){if(!!_cursorCanvas&&(_mouseMoveAsync.position.x!=_cursorCanvas.rawLeft||_mouseMoveAsync.position.y!=_cursorCanvas.rawTop)){var position=findPos(_args.container);var scale=_properties.scale;var cX=Math.round((_mouseMoveAsync.position.x-position[0])/scale);var cY=Math.round((_mouseMoveAsync.position.y-
position[1])/scale);mouseCanvasX=cX;mouseCanvasY=cY;_cursorCanvas.rawLeft=_mouseMoveAsync.position.x;_cursorCanvas.rawTop=_mouseMoveAsync.position.y;_cursorCanvas.style.left=mouseCanvasX+"px";_cursorCanvas.style.top=mouseCanvasY+"px";if(_mouseMask&&_effect){clearTimeout(_mouseMaskEffect);_mouseMask.style.left=mouseCanvasX+"px";_mouseMask.style.top=mouseCanvasY+"px";helper.style.replace(_mouseMask,"hidden","runAnimation");_mouseMaskEffect=setTimeout(()=>{helper.style.replace(_mouseMask,"runAnimation",
"hidden")},150)}if(_properties.remotePointer)checkRemotePointer(_mouseMoveAsync.position.x,_mouseMoveAsync.position.y);_oInterface.__prototype__.fireEvent("onMouseAnimationFrameEnd")}if(!isRequesting){isRequesting=true;requestAnimation(()=>{isRequesting=false;mouseMoveCanvas_AnimationFrame()})}}function moveCursorCanvas_async(x,y){if(!!_cursorCanvas)_mouseMoveAsync.position={"x":x,"y":y}}function moveCursorCanvasExternal(x,y,effect){if(!!_cursorCanvas){if(_cursorCanvas.style.display!=="block"){_cursorCanvas.style.display=
"block";_cursorCanvas.style.visibility="visible"}let position=findPos(_args.container);let scale=_properties.scale;if(!_effect)_effect=effect;x=Math.round(x*scale+position[0]);y=Math.round(y*scale+position[1]);if(_mouseMoveAsync.enable)_mouseMoveAsync.position={x,y,effect};else moveCursorCanvas(x,y,effect)}}function setOverrideCursor(value){if(_args.allowOverrideCursor&&_overrideCursor!=value){_overrideCursor=value;if(_overrideCursor){moveCursorCanvas=function(){};if(helper.object.existsPath(_args.container,
"originalImage.cursor"))helper.style.add(_args.container,{"cursor":_args.container.originalImage.cursor});if(_cursorCanvas&&_cursorCanvas.canvas)_cursorCanvas.canvas.context.clearRect(0,0,_cursorCanvas.canvas.offsetWidth,_cursorCanvas.canvas.offsetWidth);helper.style.add(_cursorCanvas,{"display":"none"});removeProps()}else{_args.container.style.cursor="none";if(_properties.isServerControlMouse){moveCursorCanvas=moveCursorCanvas_sync;_mouseMoveAsync.enable=false}else{_mouseMoveAsync.enable=true;moveCursorCanvas=
moveCursorCanvas_async;requestAnimation(mouseMoveCanvas_AnimationFrame)}defineProps();if(!_cursorCanvas&&_args.container.originalImage)setCursor(_args.container.originalImage);helper.style.add(_cursorCanvas,{"display":"block"})}}}function defineProps(){if(!_properties.overrideCursor&&!_ref.moveCursorCanvas)Object.defineProperty(_ref,"moveCursorCanvas",{enumerable:true,configurable:false,writable:true,value:moveCursorCanvasExternal})}function removeProps(){if(_properties.overrideCursor&&_ref.moveCursorCanvas)delete _ref.moveCursorCanvas}
function dispose(){helper.dom.removeEvent(_args.container,"touchstart",onTouchStartMobile);helper.dom.removeEvent(_args.container,wheelsEventNames,wheel,{"passive":false});helper.dom.removeEvent(_args.container,"mousedown",onTouchStart,{"passive":false});helper.dom.removeEvent(_args.container,"mouseup",onTouchEnd,{"passive":false});helper.dom.removeEvent(_args.container,"mousemove",onTouchMove,{"passive":false});helper.dom.removeEvent(_args.container,"mouseleave",onTouchLeave,{"passive":false});helper.dom.removeEvent(_args.container,
"touchstart",onTouchDeviceStart,{"passive":true});helper.dom.removeEvent(_args.container,"touchmove",onTouchDeviceMove,{"passive":true});helper.dom.removeEvent(_args.container,"touchend",onTouchDeviceEnd,{"passive":true})}initialize();Object.defineProperty(_ref,"overrideCursor",{enumerable:true,configurable:false,get:function(){return _overrideCursor},set:setOverrideCursor});Object.defineProperty(_ref,"cursorCanvas",{enumerable:true,configurable:false,get:function(){return _cursorCanvas}});Object.defineProperty(_ref,
"dispose",{enumerable:true,configurable:false,writable:false,value:dispose});defineProps();return _ref}try{Thinfinity!=undefined}catch(e){Thinfinity={}}if(Thinfinity.Driver===undefined)Thinfinity.Driver={};Thinfinity.Driver.Mouse=DMouse})();
(function(){function ThinClipboard(args){var self=this;var ftPath="ft/";this.fileUpload={arrayJsonData:null,maxUploadCount:3,uploaded:0,nextUploadIdx:0,uploading:0,uploadErrors:null,filesUploading:null,uploadErrors:null,onClear:null,onFileAdd:null,onUploadFinish:null,progressBar:null,progressContainerID:"FUProgressContainer",init:function(startDrag){this.clear();if(typeof startDrag=="undefined")startDrag=true;if(startDrag&&window.File&&window.FileReader&&window.FileList&&window.Blob);},clear:function(){this.filesUploading=
new Array;if(this.progressBar!=null){for(var pb=0;pb<this.progressBar.length;pb++)if(this.progressBar[pb]){this.progressBar[pb].remove();delete this.progressBar[pb]}var fupc=document.getElementById(this.progressContainerID);if(fupc)fupc.parentElement.removeChild(fupc);document.getElementById("fileToUpload").form.reset()}this.progressBar=null;if(this.onClear)this.onClear()},add:function(file,path){this.filesUploading.push({"file":file,"path":path});if(this.onFileAdd)this.onFileAdd(file)},startNextUploads:function(){var startFrom=
this.nextUploadIdx;for(var i=startFrom;i<this.toUpload;i++){if(this.uploading>=this.maxUploadCount)break;this.uploadFile(this.filesUploading[i],i);this.nextUploadIdx++;this.uploading++}},startUploading:function(){if(this.uploading==0){this.uploaded=0;this.nextUploadIdx=0;this.uploadErrors=new Array;this.arrayJsonData=new Array}this.toUpload=this.filesUploading.length;for(var i=0;i<this.toUpload;i++)this.addProgress(this.filesUploading[i],i);this.startNextUploads()},uploadFile:function(fileItem,idx){if(typeof FormData!=
"undefined"){var fd=new FormData;fd.append("fileToUpload",fileItem.file);helper.ajax.post({"timeout":0,"url":"clip/"+encodeURIComponent(fileItem.path+(fileItem.path.length==0?"":"/")+fileItem.file.name),"beforeSend":function(xhr){if(typeof window.addEventListener!="undefined"){xhr.upload.addEventListener("progress",function(evt){if(!self.fileUpload.uploadProgress(evt,idx))xhr.abort()},false);xhr.addEventListener("load",function(evt){self.fileUpload.uploadComplete(evt,fileItem.file.name,idx)},false);
xhr.addEventListener("error",function(evt){self.fileUpload.uploadFailed(evt,fileItem.file.name,idx)},false);xhr.addEventListener("abort",function(evt){self.fileUpload.uploadCanceled(evt,idx)},false)}else if(typeof window.attachEvent!="undefined"){xhr.upload.attachEvent("progress",function(evt){if(!self.fileUpload.uploadProgress(evt,idx))xhr.abort()},false);xhr.attachEvent("load",function(evt){self.fileUpload.uploadComplete(evt,fileItem.file.name,idx)});xhr.attachEvent("error",function(evt){self.fileUpload.uploadFailed(evt,
fileItem.file.name,idx)});xhr.attachEvent("abort",function(evt){self.fileUpload.uploadCanceled(evt,idx)})}xhr.setRequestHeader("X-Request-Condition","no-webdav");xhr.setRequestHeader("X-Request-Sanitize","false");xhr.setRequestHeader("X-Request-UploadType","clip")},"data":fd})}},uploadProgress:function(evt,idx){if(!this.progressBar||!this.progressBar[idx]){logError("uploadProgress: progressBar not assigned.");return false}if(evt.lengthComputable){var pc=parseInt(evt.loaded/evt.total*100);this.progressBar[idx].maxValue=
100;this.progressBar[idx].setPos(pc)}else{this.progressBar[idx].maxValue=0;this.progressBar[idx].setMessage(thinRDPconsts.uploading)}return true},uploadComplete:function(evt,filename,idx){var fu=self.fileUpload;var src=evt.sourceElement||evt.target;if(src&&src.status!=200)if(!src.responseXML)if(typeof src.readyState=="undefined"||src.readyState!="complete"){fu.uploadFailed(evt,filename,idx);return}else this.progressBar[idx].setPos(100);else if(!src.responseText.match(/200 OK/)){fu.uploadFailed(evt,
filename,idx);return}$(window).trigger("uploadComplete");logDebug("uploadComplete "+idx);fu.uploading--;fu.uploaded++;if(fu.uploaded==fu.toUpload)fu.uploadFinish();else fu.startNextUploads()},uploadFailed:function(evt,filename,idx){var fu=self.fileUpload;$(window).trigger("uploadFailed",evt);var src=evt.sourceElement||evt.target;var sError=helper.string.sprintf("Error %s (%s) uploading '%s'",src.status,src.statusText,filename);fu.uploadErrors.push(sError);logDebug("upload failed "+idx+": "+sError);
this.progressBar[idx].setClass("failed");fu.uploading--;fu.uploaded++;if(fu.uploaded==fu.toUpload)fu.uploadFinish();else fu.startNextUploads()},uploadCanceled:function(evt,idx){var fu=self.fileUpload;$(window).trigger("uploadCanceled");logDebug("upload canceled "+idx);if(!this.progressBar||!this.progressBar[idx]){logError("uploadCanceled: progressBar not assigned.");return}this.progressBar[idx].setClass("failed");fu.uploading--;fu.uploaded++;if(fu.uploaded==fu.toUpload)fu.uploadFinish();else fu.startNextUploads()},
uploadFinish:function(){if(this.onUploadFinish)this.onUploadFinish(this);else{function clearFileUpload(){self.fileUpload.clear();Thinfinity.Popups.unblock()}clearFileUpload()}},progressContainer:function(){var fuc=document.getElementById(this.progressContainerID);if(!fuc)fuc=helper.dom.appendJsonElement({"parentElement":document.body,"type":"div","attributes":{"id":this.progressContainerID}});return fuc},addProgress:function(fileItem,idx){if(!this.progressBar)this.progressBar=new Array;if(idx<this.progressBar.length)return;
var fuc=this.progressContainer();var pb=new ProgressBar({"id":this.progressContainerID,"idx":idx,"fileName":fileItem.path+"/"+fileItem.file.name,"background-color":"#FF0","barHeight":"20px","mask":"<span class='upfilename'>"+fileItem.file.name+" ("+this.formatedSize(fileItem.file.size)+")</span><span class='upfilepercent'>$d%</span>"});pb.init();pb.setMessage(fileItem.file.name+" ("+this.formatedSize(fileItem.file.size)+")");this.progressBar[idx]=pb},formatedSize:function(val){var unit=" KB";if(val>
1048576){val=val/1048576;unit=" MB"}else val=val/1024;return Math.ceil(val*100)/100+unit}};var _ref=this;var _initialized=false;var _binded=false;var _type="clipboard";var _copyingTemplate=null;var _asyncCopy=false;var _args={inputElem:null,parentElement:null,canPasteFiles:true,properties:null,methods:{setSelectionRange:null,sendEvent:null,sendCmd:null,sendData:null,convertImgURLToBase64:null,getBasicHTMLImg:null,output:null,clearText:null,request:null},events:{copy:null,paste:null,cut:null,localPaste:null,
copyFiles:null}};var _clipboardSettings=null;var fireEvent=null;var _te={};var _untreatData=[];var _lastCopy={hash:null,types:[]};function initialize(){helper.object.parseAttributes(_args,args);if(args?.properties?.clipboard){helper.object.parseAttributes(_args,args.properties.clipboard);_clipboardSettings=args.properties.clipboard;synchronizeClipboard()}fireEvent=(new Thinfinity.Events({"owner":_te,"events":_args.events})).fireEvent;if(!agentInfo.isMac&&!_initialized)initText();bindEvents();var ct=
document.getElementById("copyingTemplate");if(ct)_copyingTemplate=ct;else if(!_copyingTemplate)_copyingTemplate=helper.dom.appendJsonElement({type:"div",parentElement:_args.parentElement,attributes:{id:"copyingTemplate",class:"copyingTemplate hidden"},content:consts.copyingMsg})}function synchronizeClipboard(){if(_clipboardSettings?.properties?.synchronizeClipboard){function isValidFormat(mimetype){return!mimetype.startsWith("image/")}navigator.permissions.query({name:"clipboard-read"}).then(permission=>
{if(permission.state==="denied")throw new Error("Not allowed to access to the clipboard.");else if(args.on){let textHash=null;var syncRemoteClipboard=e=>{let clipboardContentHandler=clipboardContents=>{_args.methods.sendEvent("cmd=cli&type=precli&action=paste&id="+_args.properties.sid);let promisesTypes=[];for(const item of clipboardContents)if(item.types)item.types.forEach(type=>{promisesTypes.push(item.getType(type))});Promise.all(promisesTypes).then(values=>{let promisesValues=[];let mimetypes=
[];if(values)values.forEach(res=>{if(res&&isValidFormat(res.type)){mimetypes.push(res.type);promisesValues.push(res.text())}else;});let arrayJsonData=[];Promise.all(promisesValues).then(values=>{let idx=0;values.forEach(text=>{arrayJsonData.push({mimetype:mimetypes[idx++],textdata:text})});let th=convertToHash(arrayJsonData.map(item=>{return item.textdata}).join(""));if(textHash!=th){textHash=th;_args.methods.sendData("cmd?id="+_args.properties.sid+"&cmd=cli&type=clipboard&action=clisync",encodeURIComponent(JSON.stringify(arrayJsonData)));
_args.methods.output({"cmd":"focus"})}})})};navigator.clipboard.read({unsanitized:["text/html"]}).then(clipboardContentHandler).catch(err=>{mustBeSynchronized=true;helper.console.log(`Cannot synchronize clipboard, ${err.message||err}`);args.__prototype__.fireEvent("requireUserInteractionAction")})};var syncLocalClipboard=obj=>{let textData=null;if(obj?.val)try{textData=JSON.parse(obj.val)}catch(err){helper.console.log(`Cannot synchronize local clipboard, invalid data.`)}if(textData){let clipItems=
{};let formatsCount=0;textData.forEach(item=>{if(ClipboardItem.supports(item.mimetype))if(item.mimetype.startsWith("image/"));else{clipItems[item.mimetype]=new Blob([item.textdata],{type:item.mimetype});formatsCount++}});if(formatsCount>0)navigator.clipboard.write([new ClipboardItem(clipItems)]).then(r=>{helper.console.log("Local clipboard was synchronized successfully!")}).catch(err=>{helper.console.log("Local clipboard cannot be synchronized.",err)})}};args.on("userInteractionAction",syncRemoteClipboard);
args.on("synchronizeRemoteClipboard",syncRemoteClipboard);args.on("synchronizeLocalClipboard",syncLocalClipboard);syncRemoteClipboard()}})}}function convertToHash(str){let maxLen=65;let arr=(new Array(maxLen)).fill(65);let pos=0;for(let i=0,t=Math.min(str.length-1,maxLen);i<t;i++){if(pos>maxLen)pos=0;arr[pos]+=str.charCodeAt(i);if(arr[pos]>127)arr[pos]=arr[pos]-128;pos++}return arr.join("")}function getHash(clipboardData,types){let hash="";let _types=[];if(clipboardData){let maxLen=65;let arr=(new Array(maxLen)).fill(65);
let pos=0;var convertToValue=function(str,arr){for(let i=0,t=str.length;i<t;i++){if(pos>maxLen)pos=0;arr[pos]+=str.charCodeAt(i);if(arr[pos]>127)arr[pos]=arr[pos]-128;pos++}};if(clipboardData instanceof DataTransfer)types.forEach(type=>{convertToValue(type+clipboardData.getData(type),arr)});else if(clipboardData instanceof Array)clipboardData.forEach(function(item){convertToValue(item.mimetype+item.textdata,arr);_types.push(item.mimetype)});else{convertToValue(types[0]+clipboardData,arr);_types=types}arr.forEach(function(v){hash+=
String.fromCharCode(v)})}return{hash,types:_types}}function isClipboardEmpty(clipboard){let isEmpty=true;if(clipboard)isEmpty=clipboard.files.length===0&&clipboard.items.length===0&&clipboard.types.length===0;return isEmpty}function bindEvents(){if(!_binded){if(!_args.inputElem)return;if(agentInfo.isMSIE)if(_args.methods.setSelectionRange)_args.methods.setSelectionRange();else{_args.inputElem.value="XXXX";_args.inputElem.setSelectionRange(0,3)}helper.dom.addEvent(_args.inputElem,"copy",copyHandler,
false);helper.dom.addEvent(_args.inputElem,"cut",cutHandler,false);helper.dom.addEvent(_args.inputElem,"paste",pasteHandler,false);helper.dom.addEvent(window,"focus",windowFocusHandler,false);if(!agentInfo.isMac)helper.dom.addEvent(_args.inputElem,"keydown",keydownHandler,false);_binded=true;_initialized=true}}function copyHandler(e){e.preventDefault();unbindEvents();var clipboardData=window.clipboardData!=undefined?window.clipboardData:e.clipboardData!=undefined?e.clipboardData:null;if(clipboardData){e.stopPropagation();
e.preventDefault();synccopy(clipboardData,false)}else bindEvents();setTimeout(function(){clear();setText("XXXX")},100)}function getFilesAndDirs(dt,finish){var dirScans=0;var dirScansDone=0;var queuedFiles=0;var addedFiles=0;var dataItems=new Array;var processFileEntry=function(item,dirPath){if(item.isDirectory){var directoryReader=item.createReader();readDirectory(directoryReader,dirPath+(dirPath.length==0?"":"/")+item.name)}else{queuedFiles++;item.file(function(file){dataItems.push({"path":dirPath,
"file":file});addedFiles++},function(){addedFiles++})}};var readDirectory=function(dirReader,dirPath){dirScans++;dirReader.readEntries(function(entries){entries.forEach(function(entry){processFileEntry(entry,dirPath)});if(entries.length>0)readDirectory(dirReader,dirPath);dirScansDone++})};if(dt&&dt.items)for(var i=0;i<dt.items.length;i++){var item=null;if(typeof dt.items[i].webkitGetAsEntry!="undefined")item=dt.items[i].webkitGetAsEntry();else if(typeof dt.items[i].getAsEntry!="undefined")item=dt.items[i].getAsEntry();
if(item)processFileEntry(item,"")}var finishInterval=setInterval(function(){if(dirScansDone>=dirScans&&addedFiles>=queuedFiles){clearInterval(finishInterval);finish(dataItems)}},20)}function pasteHandler(e){e.preventDefault();var arrayJsonData=[];e.stopPropagation();e.preventDefault();var clipboardData=window.clipboardData!=undefined?window.clipboardData:e.clipboardData!=undefined?e.clipboardData:null;if(isClipboardEmpty(clipboardData)||_lastCopy&&_lastCopy.hash===getHash(e.clipboardData,_lastCopy.types).hash)if(fireEvent("localPaste",
{},{"async":false}).preventExecution===true)return;_lastCopy=null;fireEvent("paste",{"cmd":"start"},{"async":false});var cmd="cmd=cli&type=precli&action=paste&id="+_args.properties.sid;_args.methods.sendEvent(cmd);if(clipboardData){var mimetype="text/plain";var filesToUpload=false;if(agentInfo.isMSIE&&agentInfo.msieVersion<=11){setText(clipboardData.getData("text"));arrayJsonData.push({"mimetype":mimetype,"textdata":clipboardData.getData("text")})}else{if(agentInfo.isSafari)if(clipboardData.types){clipboardData.types.length;
for(var i=0;i<clipboardData.types.length;i++){arrayJsonData.push({"mimetype":clipboardData.types[i],"textdata":clipboardData.getData(clipboardData.types[i])});if(arrayJsonData[arrayJsonData.length-1].textdata==undefined)arrayJsonData[arrayJsonData.length-1].textdata=""}var idx={"url":null,"image":null,"newItem":null};for(var i=0;i<arrayJsonData.length;i++){if(arrayJsonData[i].mimetype.substring(0,6)=="image/")idx.image=i;if(arrayJsonData[i].mimetype=="public.url")idx.url=i}if(idx.url!=null&&idx.image!=
null){arrayJsonData.push({"mimetype":"","textdata":undefined});idx.newItem=arrayJsonData.length-1;_args.methods.convertImgURLToBase64(arrayJsonData[idx.url].textdata,"image/png",function(mimetype,blob){if(blob!=null){var extension=arrayJsonData[idx.image].mimetype.substring(arrayJsonData[idx.image].mimetype.indexOf("/")+1,arrayJsonData[idx.image].mimetype.length);for(var i=arrayJsonData.length-1;i>=0;i--)if(arrayJsonData[i].mimetype.indexOf(extension)!=-1){arrayJsonData.splice(i,1);idx.newItem--}arrayJsonData[idx.newItem].mimetype=
mimetype;arrayJsonData[idx.newItem].textdata=blob}else{var response=_args.methods.getBasicHTMLImg(arrayJsonData[idx.url].textdata);if(response)arrayJsonData[idx.newItem]={"mimetype":"text/html","textdata":response};else arrayJsonData.splice(idx.newItem,1)}})}}else;else{for(var index=clipboardData.items.length-1;index>=0;index--){var item=clipboardData.items[index];if(item.kind==="file"){let hasEntry=null;try{if(typeof item.webkitGetAsEntry!="undefined")hasEntry=item.webkitGetAsEntry();else if(typeof item.getAsEntry!=
"undefined")hasEntry=item.getAsEntry()}catch(err){helper.console.debug(helper.string.format("Could not process item with getAsEntry '{0}' - type: '{1}'",item.kind,item.type),arguments)}if(hasEntry){if(!_args.canPasteFiles)continue;if(!filesToUpload){filesToUpload=true;if(self.fileUpload.uploading==0)self.fileUpload.init(false)}}else if(item.type.substring(0,6)=="image/"||item.type=="application/x-moz-file"){arrayJsonData.push({"mimetype":item.type,"item":item,"getTextData":async function(index){var blob=
arrayJsonData[index].item.getAsFile();if(agentInfo.isFirefox)arrayJsonData[index].mimetype=blob.type;var reader=new FileReader;reader.onload=function(event){arrayJsonData[index].textdata=event.target.result!=undefined?event.target.result:"";delete arrayJsonData[index].item;delete arrayJsonData[index].getTextData};reader.readAsDataURL(blob)}});arrayJsonData[arrayJsonData.length-1].getTextData(arrayJsonData.length-1)}}else if(item.kind==="string")try{mimetype=item.type;arrayJsonData.push({"mimetype":item.type,
"item":item,"getTextData":function(index){arrayJsonData[index].item.getAsString(function(elem){arrayJsonData[index].textdata=elem!=undefined?encodeURIComponent(elem):"";delete arrayJsonData[index].item;delete arrayJsonData[index].getTextData})}});arrayJsonData[arrayJsonData.length-1].getTextData(arrayJsonData.length-1)}catch(error){helper.console.warning(helper.string.format("Unknown kind: '{0}' - type: '{1}'",item.kind,item.type),arguments)}else helper.console.warning(helper.string.format("Unknown kind: '{0}' - type: '{1}'",
item.kind,item.type),arguments)}if(filesToUpload)getFilesAndDirs(clipboardData,function(fileList){function sendFiles(){var fileIndex=0;for(var fileItem of fileList){arrayJsonData.push({"mimetype":"application/octet-stream","textdata":{"index":fileIndex++,"filename":fileItem.file.name,"path":fileItem.path,"size":fileItem.file.size}});self.fileUpload.add(fileItem.file,fileItem.path)}self.fileUpload.startUploading();self.postPaste(arrayJsonData)}var url="cmd?id="+_args.properties.sid+"&cmd=cli&type="+
_type+"&action=canPasteFiles";var params={url,async:_asyncCopy,cache:false,dataType:"json",error:function(jqXHR,err){},success:function(obj){if(typeof obj=="string")obj=JSON.parse(obj);if(typeof obj.res!="undefined"&&obj.res===true)sendFiles();else{var msg=consts.pasteOperationInProgress;if(typeof obj.canRetry!="undefined"&&obj.canRetry===true)Thinfinity.Popups.choice({"parentElement":document.body,"id":"pasteRetryDlg","iconType":"alertIco","title":"Clipboard","message":msg,"buttons":[{"value":consts.ok,
"class":"","action":function(){_args.inputElem.focus()}},{"value":consts.retry,"class":"","action":sendFiles}]});else{if(typeof obj.disabled!="undefined"&&obj.disabled===true)msg=consts.clipboardFileTransferDisabled;Thinfinity.Popups.alert(msg,"Clipboard","","","",function(){Thinfinity.Popups.unblock();_args.inputElem.focus()},false)}}}};_args.methods.request(params)})}if(arrayJsonData.length==0&&!filesToUpload)setText(clipboardData.getData(mimetype))}if(!filesToUpload)var intrv=setInterval(function(){if(arrayJsonData.length>
0){for(var i=0;i<arrayJsonData.length;i++)if(typeof arrayJsonData[i].textdata=="undefined")return;clearInterval(intrv);postPaste(arrayJsonData)}},100)}if(arrayJsonData.length==0)if(agentInfo.isMac)postPaste({});else setTimeout(function(){postPaste({})},100)}function postPaste(arrayJsonData){_args.methods.sendData("cmd?id="+_args.properties.sid+"&cmd=cli&type=clipboard&action=paste",encodeURIComponent(JSON.stringify(arrayJsonData)));initText();if(agentInfo.isMac&&agentInfo.isChrome)_args.methods.output({"cmd":"focus"});
fireEvent("paste",{"cmd":"done"},{"async":false})}function cutHandler(e){e.preventDefault();unbindEvents();var clipboardData=window.clipboardData!=undefined?window.clipboardData:e.clipboardData!=undefined?e.clipboardData:null;if(clipboardData){e.stopPropagation();e.preventDefault();synccopy(clipboardData,true)}else bindEvents();setTimeout(function(){initText()},100)}function windowFocusHandler(e){if(_untreatData.length>0){if(_asyncCopy)_untreatData.forEach(function(item){writeClipboardData(null,item.clipContent,
item.eventName)});_untreatData=[]}}function keydownHandler(e){if(e.ctrlKey&&!e.altKey&&e.keyCode!=17&&agentInfo.isFirefox)if(e.keyCode==88||e.keyCode==86||e.keyCode==67){e.stopPropagation();return}}function setResponseToClipboard(clipboardData,clipContent,eventName){var hf=document.hasFocus();if(hf||!_asyncCopy)writeClipboardData(clipboardData,clipContent,eventName);else _untreatData.push({eventName,clipContent})}function writePNG(data){const img=new Image;const c=document.createElement("canvas");
const ctx=c.getContext("2d",{willReadFrequently:true});function setCanvasImage(path,callback){img.onload=function(){c.width=this.naturalWidth;c.height=this.naturalHeight;ctx.drawImage(this,0,0);c.toBlob(blob=>{callback(blob)},"image/png")};img.src=path}setCanvasImage("data:image/png;base64,"+data,imgBlob=>{_lastCopy=null;navigator.clipboard.write([new ClipboardItem({"image/png":imgBlob})]).then(res=>{delete img;delete c}).catch(e=>{helper.console.warning(e);delete img;delete c})})}function writeClipboardData(clipboardData,
clipContent,eventName){_lastCopy=null;try{if(typeof clipContent=="object"){var binData=[];for(var i=0;i<clipContent.length;i++){var content=clipContent[i];if(_asyncCopy){var blob=new Blob([content.textdata],{type:content.mimetype});binData.push(new ClipboardItem({[content.mimetype]:blob}))}else if(content.mimetype=="image/png")writePNG(content.textdata);else{var handled=false;if(content.mimetype=="application/json"){var clipData=JSON.parse(content.textdata);if(clipData.type)if(clipData.type=="fileList"&&
_clipboardSettings.properties.permissions.fileTransfer){var list=[];clipData.files.forEach(function(item){list.push({date:item.date,filename:item.filename,download:`clip/${item.filename}`,url:`clip/${item.filename}`,size:item.size})});fireEvent("copyFiles",list,{"async":false});handled=true;clipboardData.setData("text/plain","");_lastCopy=getHash("",["text/plain"])}}if(!handled){clipboardData.setData(content.mimetype,content.textdata);_lastCopy=getHash(content.textdata,[content.mimetype])}}}if(_asyncCopy)if(!document.hasFocus())fireEvent(eventName,
{"cmd":"err","msg":"DOMException: Document is not focused"},{"async":false});else navigator.clipboard.write(binData)}else{if(!_asyncCopy)clipboardData.setData("text/plain",clipContent);else navigator.clipboard.writeText(clipContent);_lastCopy=getHash(clipContent,["text/plain".mimetype])}fireEvent(eventName,{"cmd":"done"},{"async":false})}catch(err){helper.console.error("[Clipboard] Something went wrong while trying to set clipboard data.",err)}}function unbindEvents(){if(_binded==true){helper.dom.removeEvent(_args.inputElem,
"copy",copyHandler);helper.dom.removeEvent(_args.inputElem,"cut",cutHandler);helper.dom.removeEvent(_args.inputElem,"paste",pasteHandler);helper.dom.removeEvent(_args.inputElem,"keydown",keydownHandler);helper.dom.removeEvent(document,"focus",windowFocusHandler,false)}_binded=false}function initText(){clear();setText("XXXX")}function setText(text){_args.methods.output({"cmd":"settext","value":text});_args.methods.setSelectionRange()}function clear(){_args.methods.clearText()}function synccopy(clipboardData,
cut){var cmd="cmd=cli&type=precli&action="+(cut?"cut":"copy")+"&id="+_args.properties.sid;_args.methods.sendEvent(cmd);var result="";var url="cmd?id="+_args.properties.sid+"&cmd=cli&type="+_type;if(cut!=undefined&&cut)url+="&action=cut&dokey=true";else url+="&action=copy&dokey=true";var eventName=cut===true?"cut":"copy";if(fireEvent(eventName,{"cmd":"start"},{"async":false}).preventExecution!==true)helper.style.replace(_copyingTemplate,"hidden","visible");try{var params={url,async:_asyncCopy,cache:false,
dataType:"json",error:function(jqXHR,err){helper.style.replace(_copyingTemplate,"visible","hidden");bindEvents();if(fireEvent(eventName,{"cmd":"error","err":err},{"async":false}).preventExecution!==true)alert(helper.string.sprintf(consts.connectError,JSON.stringify(err)))},success:function(obj){try{bindEvents();if(obj&&typeof obj.types=="undefined")try{obj=JSON.parse(obj)}catch(error){}if(obj&&typeof obj.types!=="undefined"){var textVal="";for(var i=0;i<obj.types.length;i++)if(obj.types[i].mimetype==
"text/plain"){textVal=obj.types[i].textdata;break}if(textVal!="")setText(textVal);result=obj.types}else if(obj&&typeof obj.text!=="undefined"){setText(obj.text);result=obj.text}if(agentInfo.isMac)setText("XXXX")}catch(err){if(fireEvent(eventName,{"cmd":"error","err":err},{"async":false}).preventExecution!==true)alert(helper.string.sprintf(consts.connectError,err))}finally{helper.style.replace(_copyingTemplate,"visible","hidden")}setResponseToClipboard(clipboardData,result,eventName)}};_args.methods.request(params)}catch(e){bindEvents();
alert(e)}if(agentInfo.isMac)_args.methods.output({"cmd":"maccmd","value":"RELEASED"})}function dispose(){unbindEvents();_initialized=false}initialize();Object.defineProperty(_ref,"postPaste",{"enumerable":true,"configurable":false,"writable":false,"value":postPaste});Object.defineProperty(_ref,"setText",{"enumerable":true,"configurable":false,"writable":false,"value":setText});Object.defineProperty(_ref,"dispose",{"enumerable":true,"configurable":false,"writable":false,"value":dispose});Object.defineProperty(_ref,
"onCopy",{"enumerable":true,"configurable":false,"set":function(handler){_te.on("copy",handler)}});Object.defineProperty(_ref,"onPaste",{"enumerable":true,"configurable":false,"set":function(handler){_te.on("paste",handler)}});Object.defineProperty(_ref,"onCut",{"enumerable":true,"configurable":false,"set":function(handler){_te.on("cut",handler)}});Object.defineProperty(_ref,"onCopyFiles",{"enumerable":true,"configurable":false,"set":function(handler){_te.on("copyFiles",handler)}});Object.defineProperty(_ref,
"async",{"enumerable":true,"configurable":false,"get":function(){return _asyncCopy},"set":function(value){if(value&&!(navigator.clipboard&&window["ClipboardItem"])){value=false;var msg="";if(location.protocol==="http:")msg=`[Clipboard] Async clipboard is not supported for 'http (not secure)' protocol.`;else msg=`[Clipboard] Async clipboard not supported by current browser. Setting async to false.`;helper.console.warning(msg)}_asyncCopy=value;return _asyncCopy}});return _ref}try{Thinfinity!=undefined}catch(e){Thinfinity=
{}}Thinfinity.Clipboard=ThinClipboard})();
(function(){function PacketReceiver(args){var _ref=this;var _noop=function(){};var _args={properties:{async:false,asyncTimeout:10,checkPacketIndex:false,defaultFireEventArgs:{async:false}},methods:{getRawBinaryHandler:null,arraybufferToString:null},handlers:{0:null,1:null,2:null,3:null,5:null,6:null,7:null,8:null}};var _buffer="";var _soundBuffer="";var _te=null;var _process=null;var _handlers=null;function initialize(){helper.object.parseAttributes(_args,args);_te=new Thinfinity.Events({fireEventArgs:_args.defaultFireEventArgs,
owner:_ref});_process=_args.async===true?asyncProcess:syncProcess;_handlers=_args.handlers}function asyncProcess(data){window.setTimeout(function(){syncProcess(data)},_args.asyncTimeout)}function checkPacketIndex(pckIdx,groupIdx,eod){if(_lastPkt.idx==99&&pckIdx==0&&eod)_lastPkt.idx=-1;if(_lastPkt.idx==-1&&_lastPkt.reset){_lastPkt.reset=false;_lastPkt.idx=pckIdx-1}if(_lastPkt.idx+1!=pckIdx){let msg=null;if(_lastPkt.idx+1<pckIdx)msg=`Missing pkt: ${_lastPkt.idx+1} - last: ${_lastPkt.idx}, current: ${pckIdx}, groupIdx: ${groupIdx}`;
else msg=`Pkt treated - last: ${_lastPkt.idx}, current: ${pckIdx}, groupIdx: ${groupIdx}`;_te.fireEvent("warning",msg);if(eod)_lastPkt.idx=pckIdx;_te.fireEvent("restartConnection")}else if(eod)_lastPkt.idx=pckIdx;else if(_lastPkt.idx==-1)_lastPkt.idx=0}function syncProcess(data){if(typeof data=="object"){var arr=new Uint8Array(data);if(_args.checkPacketIndex)checkPacketIndex(((arr[2]-48)*10|0)+(arr[3]-48|0),((arr[4]-48)*100|0)+((arr[5]-48)*10|0)+(arr[6]-48|0),arr[1]-48);let processed=false;if(arr[0]==
0){var handlerImage=_args.methods.getRawBinaryHandler(arr[1],arr[2],arr[3]);if(handlerImage){handlerImage(data);processed=true}else{logDebug("No raw binary handler found for hid "+arr[1]+", opt1 "+arr[2]+", opt2 "+arr[3]);processed=false}}if(!processed)queueBinary(arr);arr=null}else if(data[0]=="{")_handlers[0](groupindex,arrayView,data);else{if(_args.checkPacketIndex)checkPacketIndex(parseInt(data.substr(2,2),10),parseInt(data.substr(4,3),10),parseInt(data[1],10));var datatype=data[0];var endofdata=
data[1];if(datatype=="2")_soundBuffer+=data.substring(7);else _buffer+=data.substring(7);if(endofdata=="0")return;if(datatype=="0")try{_handlers[0](null,null,_buffer);_buffer=""}catch(err){logError("ERROR: _buffer = "+_buffer);_buffer="";alert("websocket onmessage err: "+err)}else if(datatype=="1"){_handlers[3](_buffer);_buffer="";return}else if(datatype=="2"){_handlers[2](null,window.atob(_soundBuffer));_soundBuffer="";return}}data=null}function queueBinary(arr){var typeofdata=arr[0]-48|0;var handler=
_handlers[typeofdata];var groupindex=((arr[4]-48)*100|0)+((arr[5]-48)*10|0)+(arr[6]-48|0);var dataIndex=7;var arrayView=arr.subarray(dataIndex);if(typeofdata===2)groupindex=((arr[2]-48)*10|0)+(arr[3]-48|0);handler(groupindex,arrayView);arr=null;arrayView=null}function registerHandler(dataType,handler){if(typeof dataType!=="undefined"&&!_handlers[dataType])_handlers[dataType]=handler}initialize();Object.defineProperty(_ref,"process",{enumerable:true,configurable:false,writable:false,value:_process});
Object.defineProperty(_ref,"registerHandler",{enumerable:true,configurable:false,writable:false,value:registerHandler});return _ref}try{Thinfinity!=undefined}catch(e){Thinfinity={}}Thinfinity.PacketReceiver=PacketReceiver})();
(function(){const _options={"DO_NOT_FULL_EXTEND_OBJECT":2};Object.freeze(_options);function OInterface(args){var _ref=this;var _args={_defaultDescriptor:null,_defaultEventFire:null};var _disposeEvent=null;var _defaultDescriptor={configurable:false,writable:false,enumerable:true,readOnly:false};var _defaultEventFire={async:0};var _internalIndex=0;function initialize(){_disposeEvent=_ref.dispose;helper.object.parseAttributes(_args,args);if(_args.defaultDescriptor)helper.object.parseAttributes(_defaultDescriptor,
_args.defaultDescriptor);if(_args.defaultEventFire)helper.object.parseAttributes(_defaultEventFire,_args.defaultEventFire)}function proxyObject(own,o,p){if(!(o instanceof HTMLElement)){if(!o.__prototype__)o.__prototype__={};if(!o.__prototype__.isProxy){var _sharedOwners=[];Object.defineProperty(o.__prototype__,"isProxy",{enumerable:false,configurable:false,get:function(){return true}});Object.defineProperty(o.__prototype__,"sharedOwners",{enumerable:false,configurable:false,get:function(){return _sharedOwners},
set:function(owner){if(_sharedOwners.indexOf(owner)==-1)_sharedOwners.push(owner)}});Object.defineProperty(o.__prototype__,"path",{enumerable:false,configurable:false,get:function(){return p}});return new Proxy(o,{construct:function(target,args){return Reflect.construct(target,args)},apply:function(target,that,args){return Reflect.apply(target,that,args)},get:function(oTarget,sKey){return Reflect.get(oTarget,sKey)},set:function(oTarget,sKey,vValue){let ov=Reflect.get(oTarget,sKey);let r=Reflect.set(oTarget,
sKey,vValue);let n=(p?p+".":"")+sKey;if(ov!==n&&own){let nv=r?vValue:ov;own.__prototype__.fireEvent(n,ov,nv,_defaultEventFire);if(o.__prototype__.sharedOwners)o.__prototype__.sharedOwners.forEach(owner=>{owner.fireEvent(n,ov,nv,_defaultEventFire)})}return r},deleteProperty:function(oTarget,sKey){return Reflect.deleteProperty(oTarget,sKey)},enumerate:function(oTarget,sKey){return Reflect.enumerate(oTarget,sKey)},ownKeys:function(oTarget,sKey){return Reflect.ownKeys(oTarget,sKey)},has:function(oTarget,
sKey){return Reflect.has(oTarget,sKey)},defineProperty:function(oTarget,sKey,oDesc){return Reflect.defineProperty(oTarget,sKey,oDesc)},getOwnPropertyDescriptor:function(oTarget,sKey){return Reflect.getOwnPropertyDescriptor(oTarget,sKey)}})}else{if(typeof o?.__prototype__?.sharedOwners!=="undefined")o.__prototype__.sharedOwners=own.__prototype__;return o}}else return o}function copyEvents(o,t){if(o)for(let e in o)t[e]=o[e]}function getPointerObject(o,p){if(o){if(!(p instanceof Array))p=p.split(".");
let k=p.shift();if(k&&o.hasOwnProperty(k)){if(p.length===0)return{object:o,prop:k};return getPointerObject(o[k],p)}else return{object:o,prop:k}}else return null}function createObject(params){var proxyObject=function(own,o,p){if(!(o instanceof HTMLElement)){if(!o.__prototype__)o.__prototype__={};if(!o.__prototype__.isProxy){Object.defineProperty(o.__prototype__,"isProxy",{enumerable:false,configurable:false,get:function(){return true}});Object.defineProperty(o.__prototype__,"path",{enumerable:false,
configurable:false,get:function(){return p}});return new Proxy(o,{construct:function(target,args){Reflect.construct(target,args)},apply:function(target,that,args){return Reflect.apply(target,that,args)},get:function(oTarget,sKey){return Reflect.get(oTarget,sKey)},set:function(oTarget,sKey,vValue){let ov=Reflect.get(oTarget,sKey);let r=Reflect.set(oTarget,sKey,vValue);let n=(p?p+".":"")+sKey;if(ov!==n&&own)own.__prototype__.fireEvent(n,ov,r?vValue:ov,_defaultEventFire);return r},deleteProperty:function(oTarget,
sKey){return Reflect.deleteProperty(oTarget,sKey)},enumerate:function(oTarget,sKey){return Reflect.enumerate(oTarget,sKey)},ownKeys:function(oTarget,sKey){return Reflect.ownKeys(oTarget,sKey)},has:function(oTarget,sKey){return Reflect.has(oTarget,sKey)},defineProperty:function(oTarget,sKey,oDesc){return Reflect.defineProperty(oTarget,sKey,oDesc)},getOwnPropertyDescriptor:function(oTarget,sKey){return Reflect.getOwnPropertyDescriptor(oTarget,sKey)}})}else return o}else return o};var copyEvents=function(o,
t){if(o)for(let e in o)t[e]=o[e]};var getPropName=function(o,name){if(name.indexOf(".")!==-1){let s=name.split(".");return{n:s[s.length-1],p:name,ap:s.slice(0,s.length-1).join(".")}}else return{n:name}};var getFunctionName=function(fn){if(fn)return fn.name||helper.object.getFunctionName(fn);else{_internalIndex++;return"fn_"+_internalIndex.toString()}};var createProperty=function(mo,o,desc,obj,options){let type=helper.object.getTypeOf(desc).toUpperCase();let _p={};let t=null;switch(type){case "OBJECT":let k=
null;if(desc.source)k=typeof desc.source;else if(desc.value){k=typeof desc.value;desc.source=desc.value}if(k==="function"){_p={n:getFunctionName(desc.source),v:desc.source,w:!desc.ro,c:_defaultDescriptor.configurable,e:_defaultDescriptor.enumerable};if(desc.alias)_p.n=desc.alias}else if(k==="object"){_p.n=desc.alias;_p.g=function(){return desc.source};_p.s=desc.ro?null:function(value){return desc.source=value}}else{t=getPropName(o,desc.source);if(desc.alias){_p.n=desc.alias;mo.__prototype__.alias[desc.alias]=
desc.source}else{if(t.p&&t.n&&t.p!=t.n)mo.__prototype__.alias[t.n]=t.p;_p.n=t.n}_p.c=desc.configurable||_defaultDescriptor.configurable;_p.e=desc.enumerable||_defaultDescriptor.enumerable;if(desc.value){_p.v=desc.value;_p.w=desc.writable||_defaultDescriptor.writable}else{if(desc.get)_p.g=desc.get;else if(t.p)_p.g=function(){return helper.object.getValue(obj,t.p,undefined)};else _p.g=function(){return obj[t.n]};if(desc.set)_p.s=function(value){desc.set.call(this,arguments);mo.__prototype__.fireEvent(t.n,
undefined,value,_defaultEventFire)};else if(!(desc.ro===true)||typeof desc.ro==="undefined"&&!_defaultDescriptor.readOnly)if(t.p)_p.s=function(value){let ov=helper.object.getValue(obj,t.p,undefined);helper.object.setValue(obj,t.p,value);mo.__prototype__.fireEvent(mo.__prototype__.alias[_p.n]||_p.n,ov,value,_defaultEventFire);return helper.object.getValue(obj,t.p,undefined)};else _p.s=function(value){mo.__prototype__.fireEvent(_p.n,obj[_p.n],value,_defaultEventFire);obj[t.n]=value;return obj[t.n]};
_p.u=desc.onUpdate||desc.onChanged;if(obj){let ak=t.ap||t.n;if(typeof obj[ak]==="object")obj[ak]=proxyObject(mo,obj[ak],ak)}}}break;case "STRING":if(obj){t=getPropName(o,desc);if(t.p){_p.n=t.n;_p.g=function(){return helper.object.getValue(obj,t.p,undefined)}}else{_p.n=desc;_p.g=function(){return obj[_p.n]}}if(!_defaultDescriptor.readOnly)if(t.p)_p.s=function(value){let ov=helper.object.getValue(obj,t.n,undefined);helper.object.setValue(obj,t.n,value);mo.__prototype__.fireEvent(mo.__prototype__.alias[_p.n]||
_p.n,ov,value,_defaultEventFire);return helper.object.getValue(obj,t.n,undefined)};else _p.s=function(value){let ov=obj[_p.n];obj[_p.n]=value;mo.__prototype__.fireEvent(_p.n,ov,value,_defaultEventFire);return obj[_p.n]};_p.e=_defaultDescriptor.enumerable;_p.c=_defaultDescriptor.configurable}else return"Invalid";break;case "FUNCTION":_p={n:getFunctionName(desc),v:desc,c:_defaultDescriptor.configurable,e:_defaultDescriptor.enumerable};break}registerProperty(mo,t&&t.o?t.o:o,_p)};var registerProperty=
function(mo,o,prop){var descriptor={enumerable:prop.e,configurable:prop.c};if(prop.v){if(typeof prop.w!=="undefined")descriptor.writable=prop.w;descriptor.value=prop.v}else{if(prop.g)descriptor.get=prop.g;if(prop.s)descriptor.set=prop.s}Object.defineProperty(o,prop.n,descriptor);if(prop.u)mo.on(prop.n,prop.u)};var _masterObj=new Object;let te=new Thinfinity.Events({fireEventArgs:_defaultEventFire});_masterObj.__prototype__={};_masterObj.__prototype__.alias={};_masterObj.__prototype__.fireEvent=te.fireEvent;
_masterObj.__prototype__.disposeEventObj=te.dispose;_masterObj.__prototype__.backup={};_masterObj.__prototype__.clone=()=>{let avoidNames=["methods","properties","events"];let _cloneInterface={methods:{},properties:{},events:{}};for(let kvp in _masterObj)if(avoidNames.indexOf(kvp)===-1)_cloneInterface[kvp]=_masterObj[kvp];for(let kvp in _masterObj.methods)_cloneInterface.methods[kvp]=_masterObj.methods[kvp];_cloneInterface.properties=_masterObj.properties;_cloneInterface.events=_masterObj.events;
return _cloneInterface};Object.defineProperty(_masterObj,"on",{enumerable:true,configurable:false,writable:false,value:function(event,handler){te.on(_masterObj.__prototype__.alias[event]||event,handler)}});Object.defineProperty(_masterObj,"off",{enumerable:true,configurable:false,writable:false,value:function(event,handler){te.off(_masterObj.__prototype__.alias[event]||event,handler)}});let type=helper.object.getTypeOf(params).toUpperCase();switch(type){case "ARRAY":break;case "OBJECT":var props=
{};if(params.events)if(params.namespace===true){_masterObj.events=new Object;copyEvents(params.events,_masterObj.events)}else copyEvents(params.events,_masterObj);if(params.object&&params.properties&&params.properties.length>0){if(params.options.indexOf(_options.DO_NOT_FULL_EXTEND_OBJECT)===-1)params.object=proxyObject(_masterObj,params.object,null);let mp=_masterObj;if(params.namespace===true)mp=_masterObj.properties=new Object;params.properties.forEach(function(prop){createProperty(_masterObj,mp,
prop,params.object,params.options)})}let mm=_masterObj;if(params.namespace===true)mm=_masterObj.methods=new Object;if(params.methods&&params.methods.length>0)params.methods.forEach(function(method){createProperty(_masterObj,mm,method,null,params.options)});if(params.defaultValues)_masterObj.defaultValues=params.defaultValues;Object.defineProperty(props,"newProperty",{enumerable:true,configurable:false,writable:false,value:function(oProperty){if(oProperty instanceof Thinfinity.Object.Property){let mp=
params.namespace===true?_masterObj.properties:_masterObj;createProperty(_masterObj,mp,oProperty.property,params.object,params.options);_masterObj.__prototype__.fireEvent(oProperty.property.source,undefined,undefined,_defaultEventFire)}}});Object.defineProperty(props,"newMethod",{enumerable:true,configurable:false,writable:false,value:function(oMethod){if(oMethod instanceof Thinfinity.Object.Method){let mt=params.namespace===true?_masterObj.methods:_masterObj;createProperty(_masterObj,mt,oMethod.method,
null,params.options);_masterObj.__prototype__.fireEvent(oMethod.method.alias,undefined,undefined,_defaultEventFire)}}});break}Object.freeze(_masterObj.__prototype__);return{new:_masterObj,props}}function getPropName(o,name){if(name.indexOf(".")!==-1){let s=name.split(".");return{n:s[s.length-1],p:name,ap:s.slice(0,s.length-1).join(".")}}else return{n:name}}function getFunctionName(fn){if(fn)return fn.name||helper.object.getFunctionName(fn);else{_internalIndex++;return"fn_"+_internalIndex.toString()}}
function createProperty(mo,o,desc,obj,options){let type=helper.object.getTypeOf(desc).toUpperCase();let _p={};let t=null;switch(type){case "OBJECT":case "OMETHOD":case "OPROPERTY":let k=null;if(desc.source)k=typeof desc.source;else if(desc.value){k=typeof desc.value;desc.source=desc.value}if(k==="function"){_p={n:getFunctionName(desc.source),v:desc.source,w:!desc.ro,c:_defaultDescriptor.configurable,e:_defaultDescriptor.enumerable};if(desc.alias)_p.n=desc.alias}else if(k==="object"){_p.n=desc.alias;
_p.g=function(){return desc.source};_p.s=desc.ro?null:function(value){return desc.source=value}}else{t=getPropName(o,desc.source);if(desc.alias){_p.n=desc.alias;mo.__prototype__.alias[desc.alias]=desc.source}else{if(t.p&&t.n&&t.p!=t.n)mo.__prototype__.alias[t.n]=t.p;_p.n=t.n}_p.c=desc.configurable||_defaultDescriptor.configurable;_p.e=desc.enumerable||_defaultDescriptor.enumerable;if(desc.value){_p.v=desc.value;_p.w=desc.writable||_defaultDescriptor.writable}else{if(desc.get)_p.g=desc.get;else if(t.p)_p.g=
function(){return helper.object.getValue(obj,t.p,undefined)};else _p.g=function(){return obj[t.n]};if(desc.set)_p.s=function(value){desc.set.call(this,arguments);mo.__prototype__.fireEvent(t.n,undefined,value,_defaultEventFire)};else if(!(desc.ro===true)||typeof desc.ro==="undefined"&&!_defaultDescriptor.readOnly)if(t.p)_p.s=function(value){let ov=helper.object.getValue(obj,t.p,undefined);helper.object.setValue(obj,t.p,value);mo.__prototype__.fireEvent(mo.__prototype__.alias[_p.n]||_p.n,ov,value,
_defaultEventFire);return helper.object.getValue(obj,t.p,undefined)};else _p.s=function(value){mo.__prototype__.fireEvent(_p.n,obj[_p.n],value,_defaultEventFire);obj[t.n]=value;return obj[t.n]};_p.u=desc.onUpdate||desc.onChanged;if(obj){let ak=t.ap||t.n;if(typeof obj[ak]==="object")obj[ak]=proxyObject(mo,obj[ak],ak)}}}break;case "STRING":if(obj){t=getPropName(o,desc);if(t.p){_p.n=t.n;_p.g=function(){return helper.object.getValue(obj,t.p,undefined)}}else{_p.n=desc;_p.g=function(){return obj[_p.n]}}if(!_defaultDescriptor.readOnly)if(t.p)_p.s=
function(value){let ov=helper.object.getValue(obj,t.n,undefined);helper.object.setValue(obj,t.n,value);mo.__prototype__.fireEvent(mo.__prototype__.alias[_p.n]||_p.n,ov,value,_defaultEventFire);return helper.object.getValue(obj,t.n,undefined)};else _p.s=function(value){let ov=obj[_p.n];obj[_p.n]=value;mo.__prototype__.fireEvent(_p.n,ov,value,_defaultEventFire);return obj[_p.n]};_p.e=_defaultDescriptor.enumerable;_p.c=_defaultDescriptor.configurable}else return"Invalid";break;case "FUNCTION":_p={n:getFunctionName(desc),
v:desc,c:_defaultDescriptor.configurable,e:_defaultDescriptor.enumerable};break}registerProperty(mo,t&&t.o?t.o:o,_p)}function registerProperty(mo,o,prop){var descriptor={enumerable:prop.e,configurable:prop.c};if(prop.v){if(typeof prop.w!=="undefined")descriptor.writable=prop.w;descriptor.value=prop.v}else{if(prop.g)descriptor.get=prop.g;if(prop.s)descriptor.set=prop.s}Object.defineProperty(o,prop.n,descriptor);if(prop.u)mo.on(prop.n,prop.u)}function newObject(o){if(o)if(o instanceof OInterfaceConfig){let no=
createObject(o.config);return{new:no.new,original:o.config.object,props:no.props}}else;}function dispose(){_disposeEvent()}initialize();Object.defineProperty(_ref,"new",{enumerable:true,configurable:false,writable:false,value:newObject});Object.defineProperty(_ref,"dispose",{enumerable:true,configurable:false,writable:false,value:dispose});return _ref}function OProperty(oProp){var _ref=this;var _prop=null;var _minData=["source"];if(oProp)_prop={...oProp};else _prop={};_minData.forEach(v=>{if(!_prop[v])_prop[v]=
null});Object.defineProperty(_ref,"property",{enumerable:true,configurable:false,get:function(){return _prop}});return _ref}function OMethod(oMethod){var _ref=this;var _method=null;var _minData=["alias","value"];if(oMethod)_method={...oMethod};else _method={};_minData.forEach(v=>{if(!_method[v])_method[v]=null});Object.defineProperty(_ref,"method",{enumerable:true,configurable:false,get:function(){return _method}});return _ref}function OInterfaceConfig(config){var _ref=this;var _config=null;function initialize(){_config=
config}initialize();Object.defineProperty(_ref,"config",{enumerable:true,configurable:false,get:function(){return _config}});return _ref}try{Thinfinity!=undefined}catch(e){Thinfinity={}}if(!Thinfinity.Object)Thinfinity.Object={};Thinfinity.Object.Interface=OInterface;Thinfinity.Object.IConfig=OInterfaceConfig;Thinfinity.Object.Property=OProperty;Thinfinity.Object.Method=OMethod;Object.defineProperty(Thinfinity.Object.IConfig,"OPTIONS",{enumerable:true,configurable:false,get:function(){return _options}})})();
(function(){var _resolution=helper.object.createEnum("CUSTOM","FIT_TO_BROWSER","FIT_TO_SCREEN");function Device(args){var _ref=this;var _args={id:null,name:null,resolution:null,width:0,height:0,physicalWidth:0,physicalHeight:0,orientation:"landscape",desktopScaleFactor:1,deviceScaleFactor:1,external:false,mainDisplay:false,parentElement:null,url:"/display.controller.html",surface:{top:0,left:0},display:{width:0,height:0},window:{top:0,left:0},screen:{width:window.screen.width,height:window.screen.height},
sizeLimit:null,key:null,assigned:false};var _wpAssigned=false;var _oInterface=null;var _methods=null;var _outputInterface=null;var _ready=null;var _resolveObj=null;var _readyCallback=null;var _displayInfo=["id","width","height","physicalWidth","physicalHeight","orientation","desktopScaleFactor","deviceScaleFactor","external","mainDisplay","name","resolution","surface","window","display","screen","assigned"];var _offset={left:0,top:0};var _wndSkin={width:0,height:0};var _messages={reject:{interface:{set:"Interface not supported - TMD",
get:"Interface not supported - TMD - LGI",initializing:"Initializing interface",gettingContent:"    Getting content element",setting:"    Setting interface.",starting:"Starting interface."},load:"Element is null or undefined"},monitor:{openingTab:"Opening tab in: "}};var _remoteWnd=null;var _isEmbedded=false;var _scale=1;var _minZoomFactor=0;var _zoomFactor=1;var _hasFocus=false;var oInterface=null;var fireEvent=null;var _disposed=false;var _repaint=false;function initialize(){helper.object.parseAttributes(_args,
args);fireEvent=(new Thinfinity.Events({"owner":_ref,"events":args.events})).fireEvent;if(args.window&&helper.object.isNumber(args.window.top)&&helper.object.isNumber(args.window.left))_wpAssigned=true;postInitialize()}function postInitialize(){let msg=`Initializing "Thinfinity.Display.Device - name: ${_args.name}, `;_args.width-=_args.width%2;let w=_args.width;let h=_args.height;if(_args.resolution==2){w=window.screen.width;h=window.screen.height}assignDisplaySize(w,h);helper.console.log(msg,arguments);
if(_args.mainDisplay===true||_args.external===false){if(!_args.parentElement)_args.parentElement=document.body;_args.external=false}}function setInterface(){return new Promise((resolve,reject)=>{if(arguments&&arguments[0]instanceof Thinfinity.Display.Manager&&arguments[1]instanceof Object){_oInterface=arguments[1];if(arguments[2])helper.object.parseAttributes(_args.window,arguments[2]);createMonitorContainer().then(resolve).catch(reject)}else reject(_messages.reject.interface.set)})}function createOwnInterfaceInstance(oInterface){if(oInterface?.extra)helper.object.parseAttributes(_args,
oInterface.extra);let external=_args.external===true&&_args.mainDisplay!==true;var _avoidNames=["methods"];if(external)_avoidNames.push("properties");let _ownInterface={methods:{},properties:{}};for(let kvp in oInterface)if(_avoidNames.indexOf(kvp)===-1)_ownInterface[kvp]=oInterface[kvp];for(let kvp in oInterface.methods)_ownInterface.methods[kvp]=oInterface.methods[kvp];_ownInterface.methods.sendMouse=function(x,y,button,action){x+=_args.surface.left;y+=_args.surface.top;oInterface.methods.sendMouse(x,
y,button,action)};_ownInterface.methods.resize=function(id,size){_args.width=_args.physicalWidth=size.width-size.width%2;_args.height=_args.physicalHeight=size.height;assignDisplaySize(size.display.width,size.display.height);if(oInterface.methods.resize)oInterface.methods.resize()};if(external){_avoidNames=["scale","clipboard","zoomFactor","minZoomFactor","hasFocus","repaint"];try{for(let kvp in oInterface.properties)if(_avoidNames.indexOf(kvp)===-1)Object.defineProperty(_ownInterface.properties,
kvp,Object.getOwnPropertyDescriptor(oInterface.properties,kvp));if(oInterface.properties?.clipboard)_ownInterface.properties.clipboard=oInterface.properties.clipboard}catch(error){}}Object.defineProperty(_ownInterface.properties,"scale",{enumerable:true,configurable:false,get:function(){return _scale},set:function(value){_scale=value}});Object.defineProperty(_ownInterface.properties,"minZoomFactor",{enumerable:true,configurable:false,get:function(){return _minZoomFactor},set:function(value){_minZoomFactor=
value}});Object.defineProperty(_ownInterface.properties,"zoomFactor",{enumerable:true,configurable:false,get:function(){return _zoomFactor},set:function(value){_zoomFactor=value}});Object.defineProperty(_ownInterface.properties,"hasFocus",{enumerable:true,configurable:false,get:function(){return _hasFocus},set:function(value){_hasFocus=value}});Object.defineProperty(_ownInterface.properties,"repaint",{enumerable:true,configurable:false,get:function(){return _repaint},set:function(value){if(value!=
_repaint){_repaint=value;_oInterface.__prototype__.fireEvent("repaint",_repaint)}}});if(_ownInterface?.defaultValues)for(let kvp in _ownInterface.defaultValues)if(_ownInterface.properties[kvp])_ownInterface.properties[kvp]=_ownInterface.defaultValues[kvp];_properties=_ownInterface.properties;_methods=_ownInterface.methods;return _ownInterface}function assignDisplaySize(w,h){_args.display.width=w?w:_args.width;_args.display.height=h?h:_args.height}function getInterface(){return new Promise((resolve,
reject)=>{if(arguments&&arguments[0]instanceof Thinfinity.Display.Manager)var check=function(){if(_ready===true)resolve(_outputInterface);else if(_ready===false)reject(``);else if(!_readyCallback)_readyCallback=check()}();else reject(_messages.reject.interface.get)})}async function initializeInterface(elem){helper.console.log(_messages.reject.interface.initializing,arguments);return new Promise((resolve,reject)=>{helper.console.log(_messages.reject.interface.gettingContent,arguments);var cntWnd=elem instanceof
HTMLIFrameElement?elem.contentWindow:elem;helper.console.log(_messages.reject.interface.setting,arguments);oInterface=createOwnInterfaceInstance(_oInterface);cntWnd.Thinfinity.Display.Controller.setInterface(_ref,oInterface).then(()=>{_isEmbedded=_args.mainDisplay||_args.external!==true;helper.console.log(_messages.reject.interface.starting,arguments);if(oInterface.sizeLimit)if(!_args.sizeLimit)_args.sizeLimit=oInterface.sizeLimit;else helper.object.parseAttributes(_args.sizeLimit,oInterface.sizeLimit);
cntWnd.Thinfinity.Display.Controller.start({device:_ref,isEmbedded:_isEmbedded,sizeLimit:_args.sizeLimit,key:_args.key});cntWnd.Thinfinity.Display.Controller.getInterface(_ref).then(oInterface=>{_outputInterface=oInterface;Object.defineProperty(_ref,"processData",{enumerable:true,configurable:false,writable:false,value:_outputInterface.processData});Object.defineProperty(_ref,"processCmds",{enumerable:true,configurable:false,writable:false,value:processCmds});if(_outputInterface.processFrame)Object.defineProperty(_ref,
"processFrame",{enumerable:true,configurable:false,writable:false,value:_outputInterface.processFrame});var _continue=function(){_ready=true;resolve(true);if(_readyCallback)_readyCallback()};var _onMessageHandler=function(e){if(e&&e.data&&e.data.cmd==="CALLBACK-RESPONSE"){helper.dom.removeEvent(window,"message",_onMessageHandler);_continue()}};if(!_isEmbedded){helper.dom.addEvent(window,"message",_onMessageHandler,{passive:false});cntWnd.postMessage({cmd:"CALLBACK"},"*")}else _continue()}).catch(reject)}).catch(reject)})}
function processCmds(obj){if(obj?.cmd==="DS"){_args.display.width=obj.width;_args.display.height=obj.height;_args.surface.top=obj.top;_args.surface.left=obj.left;if(_args.mainDisplay){_properties.viewWidth=obj.width;_properties.viewHeight=obj.height}_args.assigned=true}_outputInterface.processCmds(obj)}async function onLoadHandler(elem){return new Promise((resolve,reject)=>{var _reject=err=>{_ready=false;let msg=err.message||err;helper.console.warning(msg,arguments);if(_readyCallback)_readyCallback();
reject(msg)};if(elem){elem.onload=function(){initializeInterface(elem).then(resolve).catch(_reject)};elem.onerror=e=>{_reject(e)};elem.onabort=e=>{_reject(e)}}else reject(_messages.reject.load)})}function onUnload(){if(!_disposed)_methods.removeDevice(_args.id)}async function createMonitorContainer(){return new Promise((resolve,reject)=>{let url=_args.url;let external=_args.external===true&&_args.mainDisplay!==true;if(external){let _features=`width=${_args.width+_wndSkin.width},height=${_args.height+
_wndSkin.height},left=${_args.window.left+_offset.left},top=${_args.window.top+_offset.top},menubar=yes,resizable=yes,scrollbars=yes,status=no,titlebar=yes,toolbar=yes`;helper.console.log(`${_messages.monitor.openingTab} ${_features}`,arguments);let wnd=window.open(url,"_blank",_features);if(wnd){_remoteWnd=wnd;onLoadHandler(wnd).then(response=>{_resolveObj={container:wnd,contentWindow:wnd,contentDocument:wnd.document};helper.dom.addEvent(wnd,"unload",onUnload,{passive:false});updateWindowPosition(true);
resolve(_resolveObj)}).catch(reject)}else reject({message:consts.displayPopupBlocked,code:2})}else if(Thinfinity.Display.Controller)initializeInterface(window).then(response=>{_remoteWnd=window;updateWindowPosition();_resolveObj={container:window,contentWindow:window,contentDocument:document};resolve(_resolveObj)}).catch(reject);else{let iframe=document.createElement("iframe");iframe.style.width="100%";iframe.style.height="100%";onLoadHandler(iframe).then(response=>{_remoteWnd=iframe.contentWindow;
_resolveObj={container:iframe,contentWindow:iframe.contentWindow,contentDocument:iframe.contentDocument};resolve(_resolveObj)}).catch(reject);iframe.src=url;iframe.style.position="absolute";iframe.style.backgroundColor="transparent";iframe.style.margin="0px";iframe.style.top="0px";iframe.style.left=`${_args.left}px`;iframe.style.zIndex=9999999999999;_args.parentElement.appendChild(iframe)}})}function getInfo(){let info={};updateWindowPosition();_displayInfo.forEach(function(prop){info[prop]=_args[prop]});
return info}function getSize(){return{width:_args.display.width||_args.width,height:_args.display.height||_args.height}}function setSize({width,height}=o){_args.physicalWidth=_args.width=width-width%2;_args.physicalHeight=_args.height=height}function updateWindowPosition(updateSize){if(_remoteWnd){if(updateSize)setSize({width:_remoteWnd.innerWidth,height:_remoteWnd.innerHeight});_args.window.top=_remoteWnd.screenY||_remoteWnd.screenTop;_args.window.left=_remoteWnd.screenX||_remoteWnd.screenLeft}}
function moveWndTo(left,top){if(_remoteWnd){_args.window.left=left;_args.window.top=top;if(!_isEmbedded&&_remoteWnd.moveTo)_remoteWnd.moveTo(left,top)}}function updateWindowPositionByName(name,value){let screenAxis=null;if(name==="left")screenAxis="screenX";else if(name==="top")screenAxis="screenY";if(screenAxis)if(_remoteWnd){_args.window[name]=value;_remoteWnd.moveTo(_args.window.left,_args.window.top)}else _args.window[name]=value}function dispose(){if(_resolveObj&&!_disposed){_disposed=true;_resolveObj.contentDocument.innerHTML=
"";if(_resolveObj.container instanceof HTMLIFrameElement)_resolveObj.container.parentElement.removeChild(_resolveObj.container);else if(!_isEmbedded)_resolveObj.container.close()}_resolveObj=null}initialize();Object.defineProperty(_ref,"id",{enumerable:true,configurable:false,get:function(){return _args.id},set:function(value){_args.id=value}});Object.defineProperty(_ref,"getInfo",{enumerable:true,configurable:false,writable:false,value:getInfo});Object.defineProperty(_ref,"size",{enumerable:true,
configurable:false,get:getSize,set:setSize});Object.defineProperty(_ref,"setInterface",{enumerable:true,configurable:false,writable:false,value:setInterface});Object.defineProperty(_ref,"getInterface",{enumerable:true,configurable:false,writable:false,value:getInterface});Object.defineProperty(_ref,"isWindowPositionAssigned",{enumerable:true,configurable:false,get:function(){return _wpAssigned}});Object.defineProperty(_ref,"mainDisplay",{enumerable:true,configurable:false,get:function(){return _args.mainDisplay}});
Object.defineProperty(_ref,"properties",{enumerable:true,configurable:false,get:function(){return oInterface.properties}});Object.defineProperty(_ref,"cursorCanvas",{enumerable:true,configurable:false,get:function(){return _outputInterface.cursorCanvas}});Object.defineProperty(_ref,"getMinZoomFactor",{enumerable:true,configurable:false,get:function(){return _outputInterface.getMinZoomFactor()}});var _surface={};Object.defineProperty(_ref,"surface",{enumerable:true,configurable:false,get:function(){return _surface}});
Object.defineProperty(_surface,"top",{enumerable:true,configurable:false,get:function(){return _args.surface.top},set:function(value){if(typeof value!=="undefined")_args.surface.top=value}});Object.defineProperty(_surface,"left",{enumerable:true,configurable:false,get:function(){return _args.surface.left},set:function(value){if(typeof value!=="undefined")_args.surface.left=value}});var _window={};Object.defineProperty(_ref,"window",{enumerable:true,configurable:false,get:function(){return _window}});
Object.defineProperty(_window,"top",{enumerable:true,configurable:false,get:function(){return _args.window.top},set:function(value){return updateWindowPositionByName("top",value)}});Object.defineProperty(_window,"left",{enumerable:true,configurable:false,get:function(){return _args.window.left},set:function(value){return updateWindowPositionByName("left",value)}});Object.defineProperty(_window,"moveTo",{enumerable:true,configurable:false,writable:false,value:moveWndTo});var _display={};Object.defineProperty(_ref,
"display",{enumerable:true,configurable:false,get:function(){return _display}});Object.defineProperty(_display,"width",{enumerable:true,configurable:false,get:function(){return _args.display.width}});Object.defineProperty(_display,"height",{enumerable:true,configurable:false,get:function(){return _args.display.height}});var _screen={};Object.defineProperty(_ref,"screen",{enumerable:true,configurable:false,get:function(){return _screen}});Object.defineProperty(_screen,"width",{enumerable:true,configurable:false,
get:function(){return _args.screen.width},set:function(value){return _args.screen.width=value}});Object.defineProperty(_screen,"height",{enumerable:true,configurable:false,get:function(){return _args.screen.height},set:function(value){return _args.screen.height=value}});Object.defineProperty(_ref,"width",{enumerable:true,configurable:false,get:function(){return _args.width}});Object.defineProperty(_ref,"height",{enumerable:true,configurable:false,get:function(){return _args.height}});Object.defineProperty(_ref,
"resolution",{enumerable:true,configurable:false,get:function(){return _args.resolution}});Object.defineProperty(_ref,"assigned",{enumerable:true,configurable:false,get:function(){return _args.assigned}});Object.defineProperty(_ref,"dispose",{enumerable:true,configurable:false,writable:false,value:dispose});return _ref}try{Thinfinity!=undefined}catch(e){Thinfinity={}}if(!Thinfinity.Display)Thinfinity.Display={};Thinfinity.Display.Device=Device;Object.defineProperty(Device,"RESOLUTION",{enumerable:true,
configurable:false,get:function(){return _resolution}})})();
(function(){var _eTypes={H264_RDP_SURFACE_CREATE:1,H264_RDP_SURFACE_DESTROY:2,H264_RDP_SURFACE_FRAME:3,RDP_CTX_CREATE:4,RDP_CTX_DESTROY:5,RDP_CTX_FRAME:6,RDP_CTX_CMDS:7,RDP_COMMANDS:8,GFX_RDP_SURFACE_CREATE:9,GFX_RDP_SURFACE_DESTROY:10,GFX_RDP_SURFACE_FRAME:11,GFX_RDP_INITIALIZE:12};var _eResponseCodes={SUCCESS:0,FAIL:1,POPUP_BLOCKED:2,UNSUPPORTED_INTERFACE:3,MONITOR_POSITION_IS_IN_USE:4,CANNOT_REGISTER_DEVICE:5,INVALID_SURFACE:6,IS_NOT_ADJACENT:7,UNKNOWN:8};var _eStates={NOT_INITIALIZE:0,READY:1,
DISPOSING:2,DISPOSED:3};Object.freeze(_eTypes);Object.freeze(_eResponseCodes);Object.freeze(_eStates);function Manager(config,args){var _ref=this;var _registeredDevices=[];var _last={focusId:null,focusValue:null};var _handlers={};var _db=null;var _dbSettings={name:"thinfinity.display.manager.store",store:"settings",ready:false,key:null,enabled:true};var _bufferControl={};var _blockedDevices=[];var _checkPacket=false;var _timeoutPromptId=null;var _timeoutPromptTextId=null;var _sizeLimit={max:{width:8096,
height:8096},min:{width:640,height:480}};var _prevInfo=null;var fireEvent=null;var feSettings={async:0};var _middlewares={sendFocus:null};var _origCallback=null;var _preserveConfiguration=false;var _maxRestoreTime=15E3;var _currentPromptTime=null;var _lastMergedInfo=null;var _graphicsReady=false;var _eState=_eStates.NOT_INITIALIZE;var _showCountdownTime=true;var _registeredDisplaysCmds={};var _mainDisplay=null;var _restoreSavedWindows=false;var _gfx=null;var _lastCursorCanvasId=null;var _eFitMode=
{"FIT_TO_BROWSER":"fittobrowser","FIT_TO_SCREEN":"fittoscreen","CUSTOM":"custom"};var _storageSessionData={};function initialize(){args.sizeLimit=_sizeLimit;if(_checkPacket){args.methods.processDataEcho=function(id,data){if(_bufferControl[id].q[data.p]===false)delete _bufferControl[id].q[data.p];else helper.console.log(`The packet was processed, but does not match with the original MonitorId: ${id}, Pkt: ${data.p}`,arguments);if(_bufferControl[id].q[data.p-1]===false)helper.console.warning(`Unprocessed pkt - MonitorId: ${id}, Pkt: ${data.p-
1}`,arguments)};_handlers[_eTypes.H264_RDP_SURFACE_FRAME]=function(id,data){if(_registeredDevices[id]){_bufferControl[id].q[_bufferControl[id].pkt]=false;_registeredDevices[id].processData(data);_bufferControl[id].pkt++}else helper.console.debug(`Cannot find device id: ${id}`,arguments)}}else _handlers[_eTypes.H264_RDP_SURFACE_FRAME]=function(id,data){if(_registeredDevices[id]?.processData)_registeredDevices[id].processData(data);else helper.console.warning(`Cannot find device id: ${id}`,arguments)};
_handlers[_eTypes.H264_RDP_SURFACE_CREATE]=_handlers[_eTypes.H264_RDP_SURFACE_DESTROY]=processEvent;_handlers[_eTypes.RDP_COMMANDS]=function(id,data){if(_registeredDevices[id]?.processCmds)return _registeredDevices[id].processCmds(data)};_handlers[_eTypes.GFX_RDP_INITIALIZE]=function(){if(Thinfinity?.Driver?.GFX){_gfx=new Thinfinity.Driver.GFX({methods:{frameEnd:frameId=>{args.methods.sendCmd("cmd=frameEnd&frame="+frameId)},processData:(id,data)=>{if(_registeredDevices[id]?.processData)_registeredDevices[id].processData(data)}}});
let gfxRepaintHandler=function(){helper.console.log("Repaint GFX surfaces");_gfx.repaint()};args.on("gfxRepaint",gfxRepaintHandler);_ref.on("addDevice",gfxRepaintHandler)}else{let msg=`Cannot initialize GFX Class, ${consts.technicalSupport}`;helper.console.warning(msg);throw new Error(msg);}};_handlers[_eTypes.GFX_RDP_SURFACE_FRAME]=function(id,data){_gfx.processCmd(data)};_handlers[_eTypes.GFX_RDP_SURFACE_CREATE]=function(id,data){_gfx.addSurface(data)};_handlers[_eTypes.GFX_RDP_SURFACE_DESTROY]=
function(id,data){_gfx.deleteSurface(data)};_middlewares.sendFocus=args.methods.sendFocus;args.methods.sendFocus=executeFocus;args.methods.resize=executeResize;args.methods.repaint=function(){if(_gfx)_gfx.repaint()};addHandlers();registerDisplayCommands();fireEvent=(new Thinfinity.Events({"owner":_ref,"events":args.events})).fireEvent;initializeDB();_showCountdownTime=!config?.shadowingSession;attachLocalEvents();_eState=_eStates.READY}function addHandlers(){helper.dom.addEvent(window,["beforeUnload",
"unload"],function(e){saveSettings();_registeredDevices.forEach(function(m){m.dispose()})},{passive:true})}function attachLocalEvents(){if(args?.on)args.on("localEvent",processLocalEvents)}function remoteLocalEvents(){if(args?.off)args.off("localEvent",processLocalEvents)}function processLocalEvents(data){let cmd=null;if(data.cmd)cmd=data.cmd.toLowerCase();switch(cmd){case "sessionstatus":_storageSessionData.sessionstatus=data.data;break}}function fireStorageData(name){if(args?.__prototype__?.fireEvent&&
_storageSessionData[name])args.__prototype__.fireEvent("localEvent",{cmd:"sessionstatus",data:_storageSessionData[name]})}function registerDisplayCommands(){registerDisplayCmd("DS",function(id,width,height,hwnd,left,top){let device=_registeredDevices.find(d=>{return d.id==id});if(device){helper.console.log(`DS id:${id},width:${width}, height:${height}`);_handlers[_eTypes.RDP_COMMANDS](id,{cmd:"DS",width,height,hwnd,left,top});fireEvent("desktopSize",id,width,height,hwnd,left,top,feSettings)}});registerDisplayCmd("GET_ZOOM_FACTOR",
function(value){return _registeredDevices[_mainDisplay.id].properties.zoomFactor});registerDisplayCmd("SET_ZOOM_FACTOR",function(value){return _registeredDevices[_mainDisplay.id].properties.zoomFactor=value});registerDisplayCmd("ZOOM_DESKTOP",function(value){return _handlers[_eTypes.RDP_COMMANDS](_mainDisplay.id,{cmd:"ZOOM_DESKTOP",value})});registerDisplayCmd("GET_SCALE",function(){return _registeredDevices[_mainDisplay.id].properties.scale});registerDisplayCmd("CURSOR_CANVAS",function(){return _registeredDevices[_mainDisplay.id].cursorCanvas});
registerDisplayCmd("GET_MIN_ZOOM_FACTOR",function(){return _registeredDevices[_mainDisplay.id].getMinZoomFactor});registerDisplayCmd("CENTER",function(){return _handlers[_eTypes.RDP_COMMANDS](_mainDisplay.id,{cmd:"CENTER"})});registerDisplayCmd("ZOOM_FACTOR_RESET",function(){return _handlers[_eTypes.RDP_COMMANDS](_mainDisplay.id,{cmd:"ZOOM_FACTOR_RESET"})});registerDisplayCmd("PLAYBACK_MOUSE_MOVE",function(id,data){if(id!==_lastCursorCanvasId){args.__prototype__.fireEvent("hideCursor");_lastCursorCanvasId=
id}return _handlers[_eTypes.RDP_COMMANDS](id,{cmd:"PLAYBACK_MOUSE_MOVE",data})})}async function sync(){return new Promise(resolve=>{if(_dbSettings.enabled&&_db)_db.ready(function(){resolve(true);return true});else{resolve(true);return true}})}function getKey(){return btoa(`${config.username}${config.model}`)}function initializeDB(){if(_dbSettings.enabled&&Thinfinity.IndexedDB&&config?.db!==false){_db=new Thinfinity.IndexedDB({name:_dbSettings.name,store:_dbSettings.store});_dbSettings.key=getKey();
_db.ready(function(){_dbSettings.ready=true})}}function getStoredConfiguration(){if(_dbSettings.enabled&&_dbSettings.ready&&_restoreSavedWindows)if(config?.canBeOverridden===true){let displaysInfo=_db.get(_dbSettings.key);if(displaysInfo)try{displaysInfo=JSON.parse(displaysInfo);if(displaysInfo.length===0)displaysInfo=null;else{let d0=displaysInfo[0];if(!d0.surface||!d0.display||!d0.window){helper.console.warning(`${consts.displayInvalidStoredData}`.arguments);clearCustomSettings();displaysInfo=null}if(displaysInfo){let md=
displaysInfo.find(d=>{return d.mainDisplay});if(!(md&&md.external!==true)){helper.console.warning(`${consts.displayInvalidStoredData}`.arguments);clearCustomSettings();displaysInfo=null}else{let i=displaysInfo.findIndex(d=>{return d.mainDisplay});displaysInfo.splice(i,1);displaysInfo.unshift(md);fireEvent("updateDisplaySize",md,feSettings);fireEvent("checkDistribution",displaysInfo,feSettings)}}}}catch(err){displaysInfo=null}return displaysInfo}else{clearCustomSettings();return null}else return null}
function saveSettings(){if(_dbSettings.enabled&&config?.canBeOverridden===true&&_eState===_eStates.READY)_db.add(_dbSettings.key,JSON.stringify(getDisplaysInOrder()))}function isAdjacentToTheRight(baseDisplay,newDisplay){return baseDisplay.surface.left+baseDisplay.display.width===newDisplay.surface.left&&(baseDisplay.surface.top<=newDisplay.surface.top&&newDisplay.surface.top<baseDisplay.display.height)}function isAdjacentToTheLeft(baseDisplay,newDisplay){return newDisplay.surface.left+newDisplay.display.width===
baseDisplay.surface.left&&(baseDisplay.surface.top<=newDisplay.surface.top&&newDisplay.surface.top<baseDisplay.display.height)}function isAdjacentToTheTop(baseDisplay,newDisplay){return newDisplay.surface.top+newDisplay.display.height===baseDisplay.surface.top&&(baseDisplay.surface.left<=newDisplay.surface.left&&newDisplay.surface.left<baseDisplay.display.width)}function isAdjacentToTheBottom(baseDisplay,newDisplay){return baseDisplay.surface.top+baseDisplay.display.height===newDisplay.surface.top&&
(baseDisplay.surface.left<=newDisplay.surface.left&&newDisplay.surface.left<baseDisplay.display.width)}function checkDisplaySurface(device,stopPosition){let res={code:_eResponseCodes.SUCCESS,id:null};if(device){let w=null,h=null;if(device.width<_sizeLimit.min.width)w=_sizeLimit.min.width;else if(device.width>_sizeLimit.max.width)w=_sizeLimit.max.width;if(device.height<_sizeLimit.min.height)h=_sizeLimit.min.height;else if(device.height>_sizeLimit.max.height)h=_sizeLimit.max.height;w=w||device.width;
h=h||device.height;if(device.size)device.size={width:w,height:h};else{device.physicalWidth=device.width=w;device.physicalHeight=device.height=h}w=device.width;h=device.height;let displays=getPurgeInfo();if(displays.length===0&&device.surface.top===0&&device.surface.left===0){res.id=0;return res}let attached=false;let valid=true;if(displays.length>0){let maxIdx=displays.length-1;if(typeof stopPosition!=="undefined")maxIdx=Math.min(maxIdx,stopPosition);let m=displays[0];let l=displays.length>0?displays[Math.min(displays.length-
1,maxIdx)]:null;if(isAdjacentToTheLeft(m,device)||isAdjacentToTheTop(m,device)){attached=true;res.id=0;valid=device.surface.left>=m.surface.left+m.width||device.surface.left+w<=m.surface.left||device.surface.top>=m.surface.top+m.height||device.surface.top+h<=m.surface.top}else if(isAdjacentToTheRight(l||m,device)||l&&isAdjacentToTheBottom(l,device)){attached=true;res.id=displays.length;valid=true}}if(!(attached&&valid)){let msg="";if(!attached){msg=consts.displayIsNotAdjacent;res.code=_eResponseCodes.IS_NOT_ADJACENT}if(!valid){msg+=
(msg.length>0?" ":"")+consts.displayInvalidSurface;if(res.code===_eResponseCodes.SUCCESS)res.code=_eResponseCodes.INVALID_SURFACE}res.message=msg;helper.console.warning(msg,arguments)}return res}}function getDisplaysInOrder(){var res=[];_registeredDevices.forEach(function(display){let m=display.getInfo();res.push(m)});return res.sort(function(a,b){return a.surface.top==b.surface.top?a.surface.left-b.surface.left:a.surface.top-b.surface.top})}function getMainDisplayId(){let md=_registeredDevices.find(d=>
{return d.mainDisplay});return md?.id||null}function clearCustomSettings(){return new Promise(function(resolve){if(_db)_db.resetDB(resolve);else resolve(true)})}function executeResize(){let mp=getPurgeInfo(true);if(mp.length>0){args.events.resize(mp);fireEvent("resize",mp);if(mp!==_prevInfo){_prevInfo=mp;if(_preserveConfiguration)saveSettings(mp)}}}function getPurgeInfo(isResize){let mp=getDisplaysInOrder();if(mp&&mp.length>0)mp.forEach(item=>{switch(args.properties.resolution){case _eFitMode.FIT_TO_BROWSER:if(args.properties.resizeDesktop&&
isResize){item.display.width=item.width;item.display.height=item.height}break;case _eFitMode.FIT_TO_SCREEN:if(!item.assigned){item.display.width=item.screen.width;item.display.height=item.screen.height}break;case _eFitMode.CUSTOM:break}});fireEvent("checkDistribution",mp,feSettings);return mp}function executeFocus(displayId,cmd,value){if(value!==false)_last.focusId=displayId;_middlewares.sendFocus.apply(null,arguments)}function getDisplay(id){return _registeredDevices.find(function(m){return m.id===
id})}function updateInternalIds(){_registeredDevices.forEach(function(d,i){d.id=i})}async function addDevice(displayDevice){let restoreDisplay=typeof arguments[1]!=="undefined"?arguments[1]:true;return new Promise(resolve=>{if(!(displayDevice&&displayDevice instanceof Thinfinity.Display.Device))displayDevice=new Thinfinity.Display.Device(displayDevice);if(displayDevice&&displayDevice instanceof Thinfinity.Display.Device){let res=null;if(config?.shadowingSession)res={code:_eResponseCodes.SUCCESS,id:displayDevice.id};
else res=checkDisplaySurface(displayDevice);if(res.code===_eResponseCodes.SUCCESS){displayDevice.id=res.id;_registeredDevices.splice(displayDevice.id,0,displayDevice);displayDevice.focus=false;if(displayDevice.mainDisplay)args.methods.disconnect=function(){fireEvent("disconnect")};displayDevice.setInterface(_ref,{...args,...{extra:{key:getKey()}}},displayDevice.window).then(function(response){displayDevice.elements=response;displayDevice.getInterface(_ref).then(function(rOutput){if(rOutput){displayDevice.output=
rOutput;if(_checkPacket)_bufferControl[displayDevice.id]={pkt:1,q:{}};updateInternalIds();if(!_mainDisplay&&displayDevice.mainDisplay)_mainDisplay=displayDevice;fireEvent("addDevice");if(!displayDevice.mainDisplay)fireStorageData("sessionstatus");resolve({res:true,id:displayDevice.id,message:"",code:_eResponseCodes.SUCCESS})}else{let message=consts.displayInterfaceNotSupported;helper.console.warning(message,arguments);shiftDevice(displayDevice.id);resolve({res:false,id:displayDevice.id,message,code:_eResponseCodes.UNSUPPORTED_INTERFACE})}}).catch(function(err){let res=
{...{res:false,id:displayDevice.id,code:_eResponseCodes.UNKNOWN},...err};res.message=res.message||arguments?.[0]?.message||arguments?.[0];helper.console.warning(`${res.message} ${arguments?.[0]?.stack||""}`,arguments);shiftDevice(displayDevice.id);resolve(res)})}).catch(function(err){res={...res,...{id:displayDevice.id},...err};res.code=err.code===_eResponseCodes.POPUP_BLOCKED?_eResponseCodes.POPUP_BLOCKED:_eResponseCodes.UNKNOWN;res.message=res.message||arguments?.[0]?.message||arguments?.[0];helper.console.warning(`${res.message} ${arguments?.[0]?.stack||
""}`,arguments);if(restoreDisplay){let d=shiftDevice(displayDevice.id);if(!_blockedDevices.find(function(item){return item.id===displayDevice.id}))_blockedDevices.push(d)}resolve(res)})}else{if(restoreDisplay){let d=shiftDevice(displayDevice.id);if(!_blockedDevices.find(function(item){return item.id===displayDevice.id}))_blockedDevices.push(d)}resolve(res)}}else{let message=consts.displayCannotRegisterDevice;helper.console.warning(message,arguments);shiftDevice(id);resolve({res:false,id,message,code:_eResponseCodes.CANNOT_REGISTER_DEVICE})}})}
async function restoreDevices(){return new Promise(function(resolve){_origCallback=function(){_origCallback=null;resolve(true)};shiftBlockedDevices()})}async function restoreConfigurationPrompt(){_timeoutPromptId=setTimeout(function(){Thinfinity.Popups.unblock();clearInterval(_timeoutPromptTextId);_origCallback()},_maxRestoreTime);_timeoutPromptTextId=setInterval(function(){let dlg=document.getElementById("dlgMessage");if(dlg){let s=parseInt((_maxRestoreTime-(Date.now()-_currentPromptTime))/1E3,10);
if(s>1)s=s.toString()+" "+consts.seconds;else s=s.toString()+" "+consts.second;dlg.innerHTML=helper.string.sprintf(consts.displayRestoreDevices,s)}},parseInt(_maxRestoreTime/1E3,10));await restoreDevices()}function shiftBlockedDevices(next){if(next!==false&&_blockedDevices.length>0){let bDev=_blockedDevices.shift()[0];showPromptPopup(bDev,shiftBlockedDevices)}else _origCallback()}function restoreDevice(device){return new Promise(function(resolve){addDevice(device,false).then(function(res){if(res&&
res.code!==_eResponseCodes.SUCCESS)r=false;resolve(r)}).catch(function(err){resolve(false)})})}function showPromptPopup(device,callback){let buttons=[{value:consts.open,class:"",action:function(e){helper.console.log(`Restoring devices`,arguments);clearTimeout(_timeoutPromptId);clearInterval(_timeoutPromptTextId);restoreDevice(device).then(function(res){if(callback)return callback(true)}).catch(function(err){if(callback)return callback(true)})}}];if(_showCountdownTime)buttons.push({value:consts.cancel,
class:"",action:function(e){helper.console.log(`Updating settings `,arguments);clearTimeout(_timeoutPromptId);clearInterval(_timeoutPromptTextId);if(callback)callback(false)}});let promptConfig={id:"dlgRestoreDevicePrompt",parentElement:"",class:"",iconType:"disconnectedIco",title:productName,message:`<span id="dlgMessage">${consts.displayRestoreDevices} ${_showCountdownTime?helper.string.sprintf(consts.displayPopupAutoClose,parseInt(_maxRestoreTime/1E3,10).toString()+" "+consts.seconds):""}</span>`,
buttons,noPropagateEvents:true};Thinfinity.Popups.choice(promptConfig);_currentPromptTime=Date.now()}function shiftDevice(id){helper.console.log(`Removing device ${id}`);let m=getDisplay(id);if(m){m.dispose();return _registeredDevices.splice(_registeredDevices.findIndex(function(m){return m.id===id}),1)}else return false}function removeDevice(id,silent){if(_eState===_eStates.READY)if(shiftDevice(id)){if(!silent){_registeredDevices.forEach(m=>{if(m.id>=id)m.id--});executeResize()}if(_lastMergedInfo)syncDisplayInfo(_lastMergedInfo,
true);fireEvent("removeDevice")}}function getOutputDevice(){let rd=!!_last.focusId&&_registeredDevices[_last.focusId]?_registeredDevices[_last.focusId]:getDisplay(0);return rd?rd.output:null}function focus(){let oDev=getOutputDevice();if(oDev?.setFocus)oDev.setFocus()}function setSelectionRange(){let oDev=getOutputDevice();if(oDev?.setSelectionRange)return oDev.setSelectionRange()}function textValue(){let oDev=getOutputDevice();if(oDev?.textValue)return oDev.textValue()}function updateMacCmd(){let oDev=
getOutputDevice();if(oDev?.updateMacCmd)return oDev.updateMacCmd()}function processData(id,eType,data){_handlers[eType](id,data)}function processEvent(id,data){helper.console.log(`Processing video event ${id} : ${data}`)}function registerDisplayCmd(cmd,handler){if(!_registeredDisplaysCmds[cmd])_registeredDisplaysCmds[cmd]=handler;else return false}function processDisplayCmd(cmd){if(_registeredDisplaysCmds[cmd])return _registeredDisplaysCmds[cmd].apply(null,[...arguments].splice(1));else return undefined}
function removeAllExternalDisplays(){_registeredDevices.forEach(d=>{if(!d.mainDisplay)d.dispose()})}function verifyInfo(src,tgt){var props=["width","left","id","surface"];if(src&&tgt)if(src.length!=tgt.length)return true;else src.forEach((srcItem,idx)=>{let tgtItem=tgt[idx];let d=false;props.forEach(p=>{if(srcItem[p]!==tgtItem[p])d=true});if(d)return true});else return true}async function syncDisplayInfo(displayInfo){if(_eState===_eStates.READY){let forced=arguments[1];if(displayInfo)if(forced||verifyInfo(_lastMergedInfo,
displayInfo)){helper.console.debug(`Sync display info ${JSON.stringify(displayInfo)}`);removeAllExternalDisplays();var proms=[];displayInfo.forEach(d=>{if(!d.mainDisplay){delete d.physicalHeight;delete d.physicalWidth;d.external=true;d.surface={left:d.left,top:d.top};proms.push(addDevice(new Thinfinity.Display.Device(d),true))}});let values=await Promise.all(proms);var blockedMsg=null;values.forEach(function(res){if(res&&res.code!==Thinfinity.Display.Manager.RESPONSE_CODES.SUCCESS)if(res.code===Thinfinity.Display.Manager.RESPONSE_CODES.POPUP_BLOCKED)blockedMsg=
res.message});_showCountdownTime=false;if(blockedMsg)values=await restoreDevices();restoreDevices().then(()=>{_lastMergedInfo=displayInfo;fireEvent("syncCompleted")})}}}function dispose(){_eState=_eStates.DISPOSING;_registeredDevices.forEach(m=>{removeDevice(m.id,true);m.dispose()});_eState=_eStates.DISPOSED;remoteLocalEvents();fireEvent("dispose")}initialize();Object.defineProperty(_ref,"addDevice",{enumerable:true,configurable:false,writable:false,value:addDevice});Object.defineProperty(_ref,"removeDevice",
{enumerable:true,configurable:false,writable:false,value:removeDevice});Object.defineProperty(_ref,"clearCustomSettings",{enumerable:true,configurable:false,writable:false,value:clearCustomSettings});Object.defineProperty(_ref,"getDisplaysInfo",{enumerable:true,configurable:false,writable:false,value:getPurgeInfo});Object.defineProperty(_ref,"getDisplaysInOrder",{enumerable:true,configurable:false,writable:false,value:getDisplaysInOrder});Object.defineProperty(_ref,"fireEvent",{enumerable:true,configurable:false,
writable:false,value:args.__prototype__.fireEvent});Object.defineProperty(_ref,"dispose",{enumerable:true,configurable:false,writable:false,value:dispose});Object.defineProperty(_ref,"preserveConfiguration",{enumerable:true,configurable:false,get:function(){return _preserveConfiguration},set:function(value){_preserveConfiguration=value}});Object.defineProperty(_ref,"sync",{enumerable:true,configurable:false,writable:false,value:sync});Object.defineProperty(_ref,"limits",{enumerable:true,configurable:false,
get:function(){return args.sizeLimit},set:function(value){return helper.object.parseAttributes(args.sizeLimit,value)}});Object.defineProperty(_ref,"getStoredConfiguration",{enumerable:true,configurable:false,writable:false,value:getStoredConfiguration});Object.defineProperty(_ref,"graphicsReady",{enumerable:true,configurable:false,writable:false,writable:false,value:function(){if(!_graphicsReady)executeResize();_graphicsReady=true}});Object.defineProperty(_ref,"restoreDevices",{enumerable:true,configurable:false,
writable:false,value:restoreConfigurationPrompt});Object.defineProperty(_ref,"state",{enumerable:true,configurable:false,get:function(){return _eState}});Object.defineProperty(_ref,"mainDisplayId",{enumerable:true,configurable:false,get:getMainDisplayId});Object.defineProperty(_ref,"processData",{enumerable:true,configurable:false,writable:false,value:processData});Object.defineProperty(_ref,"focus",{enumerable:true,configurable:false,writable:false,value:focus});Object.defineProperty(_ref,"setSelectionRange",
{enumerable:true,configurable:false,writable:false,value:setSelectionRange});Object.defineProperty(_ref,"textValue",{enumerable:true,configurable:false,writable:false,value:textValue});Object.defineProperty(_ref,"updateMacCmd",{enumerable:true,configurable:false,writable:false,value:updateMacCmd});Object.defineProperty(_ref,"processDisplayCmd",{enumerable:true,configurable:false,writable:false,value:processDisplayCmd});if(config?.shadowingSession)Object.defineProperty(_ref,"syncDisplayInfo",{enumerable:true,
configurable:false,writable:false,value:syncDisplayInfo});return _ref}try{Thinfinity!=undefined}catch(e){Thinfinity={}}if(!Thinfinity.Display)Thinfinity.Display={};Thinfinity.Display.Manager=Manager;Object.defineProperty(Thinfinity.Display.Manager,"EVENT_TYPES",{enumerable:true,configurable:false,get:function(){return _eTypes}});Object.defineProperty(Thinfinity.Display.Manager,"RESPONSE_CODES",{enumerable:true,configurable:false,get:function(){return _eResponseCodes}});Object.defineProperty(Thinfinity.Display.Manager,
"STATES",{enumerable:true,configurable:false,get:function(){return _eStates}})})();
(function(){function Font(){var _ref=this;var _anchor=null;var _font={"separation":1,"default":{"size":12,"style":"normal","weight":"normal","family":"Arial"}};function initialize(){try{if(window.document&&window.document.body){_anchor=document.createElement("a");_anchor.style.position="absolute";_anchor.style.top="-5000px";_anchor.style.left="-5000px";window.document.body.appendChild(_anchor)}else setTimeout(initialize,200)}catch(error){return error}}function getSize(text,font){try{var width=0;var height=
0;font=validateFont(font);var fs=font.size;for(var index=0;index<text.toString().length;index++){var letter=text.toString().substring(index+1,index);var size=calcSize(letter,font);width+=size.width+_font.separation;height=size.height>height?size.height:height}return{"width":width,"height":height}}catch(error){return error}}function getWidth(text,font){try{var width=0;font=validateFont(font);var fs=font.size;for(var index=0;index<text.toString().length;index++){var letter=text.toString().substring(index+
1,index);var w=calcSize(letter,font).width;width+=w+_font.separation}return width}catch(error){return error}}function getHeight(text,font){try{var height=0;font=validateFont(font);var fs=font.size;for(var index=0;index<text.toString().length;index++){var letter=text.toString().substring(index+1,index);var h=calcSize(letter,font).height;height=h>height?h:height}return height}catch(error){return error}}function getPhraseSize(text,font){try{var width=0;var height=0;font=validateFont(font);var fs=font.size;
var size={"width":0,"height":0};if(typeof text=="string"){var pattern=/<br>|<br\/>|\\n\\r|\\\\n\\\\r|\\n|\\\\n/g;var m=text.match(pattern);var newText=text;if(m!=null){var s=text.split(pattern);var w=0;var h=0;for(var index in s){var temp=calcSize(s[index],font);if(temp.width>w)w=temp.width;if(temp.height>h)h=temp.height}size.width=w;size.height=h*s.length}else size=calcSize(newText,font)}return size}catch(error){return error}}function getValue(value){try{if(helper.object.isNumber(value))return value;
else if(typeof(value=="string")){var re=new RegExp("[0-9]*");var regExpExec=re.exec(value);if(regExpExec!=null&&regExpExec[0]!=undefined&&regExpExec[0]!=""&&regExpExec[0]!=null)return helper.object.convertTo(regExpExec[0],"int")}}catch(error){return _font.default.size}}function getFontDescription(elem){if(elem)return{"fontSize":helper.style.getAttribute(elem,"font-size"),"fontFamily":helper.style.getAttribute(elem,"font-family"),"fontWeight":helper.style.getAttribute(elem,"font-weight"),"fontStyle":helper.style.getAttribute(elem,
"font-style")}}function validateFont(font){try{if(font==null||font==undefined)font={};else font=helper.object.clone(font);var dSize=_font.default.size;var dStyle=_font.default.style;var dFontName=_font.default.family;var dWeight=_font.default.weight;for(var prop in font)switch(prop.toUpperCase()){case "SIZE":case "FONTSIZE":font.size=font[prop];break;case "NAME":case "FONTNAME":case "FONTFAMILY":font.name=font[prop];break;case "WEIGHT":case "FONTWEIGHT":font.weight=font[prop];break;case "STYLE":case "FONTSTYLE":font.style=
font[prop];break}if(font.name==undefined)font.name=dFontName;else font.name=font.name.toLowerCase();if(font.style==undefined)font.style=dStyle;else font.style=font.style.toLowerCase();if(font.weight==undefined)font.weight=dWeight;else if(!helper.object.isNumber(font.weight))font.weight=font.weight.toLowerCase();if(font.size==undefined)font.size=dSize}catch(error){return error}return font}function calcSize(text,font){try{if(_anchor==null)initialize();_anchor.style.fontFamily=font.name;_anchor.style.fontSize=
font.size;_anchor.style.fontStyle=font.style;if(_anchor.style.fontWeight)_anchor.style.fontWeight=font.weight;_anchor.innerHTML=text;var size=helper.size.get(_anchor);return size}catch(error){return error}}initialize();Object.defineProperty(this,"get",{"enumerable":true,"configurable":false,"writeable":false,"value":getSize});Object.defineProperty(this,"getFont",{"enumerable":true,"configurable":false,"writeable":false,"value":getFontDescription});Object.defineProperty(this,"getWidth",{"enumerable":true,
"configurable":false,"writeable":false,"value":getWidth});Object.defineProperty(this,"getHeight",{"enumerable":true,"configurable":false,"writeable":false,"value":getHeight});Object.defineProperty(this,"getPhraseSize",{"enumerable":true,"configurable":false,"writeable":false,"value":getPhraseSize});helper.console.log(helper.string.format("Initializing {0} class - {1}","Font",(new Date).toString()),arguments);return this}if(typeof window.helperPlugins=="undefined")helperPlugins={};helperPlugins.Font=
Font;if(typeof window.helper!="undefined")helper.registerPlugin("font",Font)})();
(function(){function AnimationFrame(args){var _ref=this;var _args={fps:window.agentInfo?.isMobile?15:30,time:0};var _animationWorker=null;var _isRunning=false;var _hasFocus=true;var _callbackRequest=[];function initialize(args){try{_args.time=parseInt(1E3/_args.fps,10);_animationWorker=new Worker("<%=@BASEURL%>common/workers/animation.frame.worker.js");if(_animationWorker)_animationWorker.onmessage=e=>{if(e.data.cmd==="tick")runCallbacks()};if(typeof Thinfinity.TabFocusHook!=="undefined")initializeTabFocus();
helper.object.parseAttributes(_args,args)}catch(error){return error}}function startWorker(){if(!_isRunning){_isRunning=true;_animationWorker.postMessage({cmd:"start",value:_args.time})}}function stopWorker(){if(_isRunning){_isRunning=false;_animationWorker.postMessage({cmd:"stop"});runCallbacks()}}function runCallbacks(){let tempCB=_callbackRequest;_callbackRequest=[];tempCB.forEach(cb=>{cb()})}function initializeTabFocus(){Thinfinity.TabFocusHook.on("visible",function(e){checkState(true)}).on("focus",
function(e){checkState(true)}).on("hidden",function(e){checkState(false)}).on("blur",function(e){checkState(false)}).on("visibility",function(e){checkState(["visible"].indexOf(e.visibilityState)!==-1)})}function checkState(hasFocus){_hasFocus=hasFocus;if(_hasFocus)stopWorker();else startWorker()}function request(callback){if(_hasFocus)window.requestAnimationFrame(callback);else _callbackRequest.push(callback)}initialize();Object.defineProperty(_ref,"request",{"enumerable":true,"configurable":false,
"writeable":false,"value":request});helper.console.log(helper.string.format("Initializing {0} class - {1}","Font",(new Date).toString()),arguments);return _ref}if(typeof window.helperPlugins=="undefined")helperPlugins={};helperPlugins.AnimationFrame=AnimationFrame;if(typeof window.helper!="undefined")helper.registerPlugin("animationFrame",AnimationFrame)})();
function _0x20b8(){var _0x17bf3b=["KeyG","Numpad4","offsetHeight","KeyI","KeyB","undefined","Backquote","required","Insert","ArrowUp","7nVAsnb","Digit7","FnLock","screen","Numpad0","KeyZ","F12","NumpadComma","Cannot stop capturing SK","NumpadSubtract","helper","KeyQ","ShiftRight","width","KeyW","height","Digit9","unlock","5iQrLtX","getTopWindow","Backslash","exitfullscreen","NumpadMemoryAdd","Home","push","KeyF","Initializing {0} class - {1}","Cannot start capturing SK","KeyN","Minus","environment",
"console","Pause","systemKeys","lock","Digit2","Digit8","Escape","Environment is not defined","MetaRight","then","PrintScreen","Digit3","Your browser does not support capturing SK.","NumpadAdd","NumpadMemoryStore","Digit5","Tab","KeyJ","PageUp","NumpadMemoryClear","concat","cookiePrefix","F11","indexOf","document","KeyA","Numpad5","format","ShiftLeft","SystemKeys","251sBCQIF","1355662vKbiOE","Numpad1","1686000dYGvQL","url","IntlRo","211221NPhQku","2037510xzVAqh","9032malUpY","log","notRequired","enabled",
"registerPlugin","KeyS","BracketRight","KeyX","CapsLock","off","Slash","documentElement","ArrowDown","Numpad2","enterfullscreen","getValue","Numpad8","ControlLeft","NumpadMemoryRecall","BracketLeft","Comma","NumpadParenRight","Digit1","KeyM","helperPlugins","NumpadHash","214QkJgTa","KeyO","KeyC","End","Numpad9","1294404ZyYHcj","KeyL","Helper is not defined","NumpadClearEntry","NumpadMemorySubtract","AltLeft","settings","Digit0","NumpadEqual","Font","ScrollLock","Numpad7","KeyY","KeyR","Digit4","ControlRight",
"IntlBackslash","4977mzeJCY","navigator","ContextMenu","KeyT","keyboard","Quote","AltRight"];_0x20b8=function(){return _0x17bf3b};return _0x20b8()}function _0x29a8(_0x383d58,_0x33d6da){var _0x20b89e=_0x20b8();return _0x29a8=function(_0x29a8c8,_0x26c8a3){_0x29a8c8=_0x29a8c8-413;var _0x286dab=_0x20b89e[_0x29a8c8];return _0x286dab},_0x29a8(_0x383d58,_0x33d6da)}
(function(_0x47a0a4,_0x50c30f){var _0x2f294b=_0x29a8,_0x3b1a18=_0x47a0a4();while(!![])try{var _0x2005be=parseInt(_0x2f294b(477))/1*(-parseInt(_0x2f294b(511))/2)+parseInt(_0x2f294b(483))/3+-parseInt(_0x2f294b(516))/4*(-parseInt(_0x2f294b(434))/5)+-parseInt(_0x2f294b(484))/6*(-parseInt(_0x2f294b(416))/7)+parseInt(_0x2f294b(485))/8*(-parseInt(_0x2f294b(533))/9)+parseInt(_0x2f294b(480))/10+parseInt(_0x2f294b(478))/11;if(_0x2005be===_0x50c30f)break;else _0x3b1a18["push"](_0x3b1a18["shift"]())}catch(_0x29e14e){_0x3b1a18["push"](_0x3b1a18["shift"]())}})(_0x20b8,
374241),function(){var _0x2d189a=_0x29a8;function _0x2613fc(){var _0x3fc4f4=_0x29a8,_0x1dd07d=this,_0x55e1f2=!![],_0x3930e4=![],_0x59f6fa=![],_0x3788bd={"Alphanumeric":{"required":[_0x3fc4f4(546),_0x3fc4f4(436),_0x3fc4f4(504),_0x3fc4f4(491),_0x3fc4f4(505),_0x3fc4f4(523),_0x3fc4f4(507),_0x3fc4f4(451),_0x3fc4f4(458),_0x3fc4f4(530),_0x3fc4f4(462),"Digit6",_0x3fc4f4(417),_0x3fc4f4(452),_0x3fc4f4(432),"Equal",_0x3fc4f4(532),_0x3fc4f4(482),"IntlYen",_0x3fc4f4(472),_0x3fc4f4(544),_0x3fc4f4(513),"KeyD","KeyE",
_0x3fc4f4(441),_0x3fc4f4(540),"KeyH",_0x3fc4f4(543),_0x3fc4f4(464),"KeyK",_0x3fc4f4(517),_0x3fc4f4(508),_0x3fc4f4(444),_0x3fc4f4(512),"KeyP",_0x3fc4f4(427),_0x3fc4f4(529),_0x3fc4f4(490),_0x3fc4f4(536),"KeyU","KeyV",_0x3fc4f4(430),_0x3fc4f4(492),_0x3fc4f4(528),_0x3fc4f4(421),_0x3fc4f4(445),"Period",_0x3fc4f4(538),"Semicolon",_0x3fc4f4(495)],"notRequired":[]},"Functional":{"required":[_0x3fc4f4(521),_0x3fc4f4(539),"Backspace",_0x3fc4f4(493),_0x3fc4f4(535),_0x3fc4f4(502),_0x3fc4f4(531),"Enter","MetaLeft",
_0x3fc4f4(455),_0x3fc4f4(475),_0x3fc4f4(428),"Space",_0x3fc4f4(463)],"notRequired":[]},"Numpad":{"required":["NumLock",_0x3fc4f4(420),_0x3fc4f4(479),_0x3fc4f4(498),"Numpad3",_0x3fc4f4(541),_0x3fc4f4(473),"Numpad6",_0x3fc4f4(527),_0x3fc4f4(501),_0x3fc4f4(515),_0x3fc4f4(460),"NumpadDecimal","NumpadMultiply",_0x3fc4f4(425)],"notRequired":["NumpadBackspace","NumpadClear",_0x3fc4f4(519),_0x3fc4f4(423),_0x3fc4f4(524),_0x3fc4f4(510),_0x3fc4f4(438),_0x3fc4f4(466),_0x3fc4f4(503),_0x3fc4f4(461),_0x3fc4f4(520),
"NumpadParenLeft",_0x3fc4f4(506),"NumpadStar"]},"Arrowpad":{"required":["ArrowLeft",_0x3fc4f4(415),"ArrowRight",_0x3fc4f4(497)],"notRequired":[]},"FN":{"required":[_0x3fc4f4(453),"F1","F2","F3","F4","F5","F6","F7","F8","F9","F10",_0x3fc4f4(469),_0x3fc4f4(422),"Fn",_0x3fc4f4(418),_0x3fc4f4(457),_0x3fc4f4(526),_0x3fc4f4(448)],"notRequired":[]},"ControlPad":{"required":["Delete",_0x3fc4f4(514),_0x3fc4f4(439),_0x3fc4f4(414),"PageDown",_0x3fc4f4(465)],"notRequired":[]}},_0x59abfa=![],_0x5c6514=[],_0x36f202=
[],_0x3f2d3a=null,_0x31238d=![];function _0x2765dd(){var _0x1e2cdc=_0x3fc4f4;try{if(!window[_0x1e2cdc(446)])throw new Error(_0x1e2cdc(454));if(!window[_0x1e2cdc(426)])throw new Error(_0x1e2cdc(518));for(let _0x2902ef in _0x3788bd)_0x5c6514=_0x5c6514[_0x1e2cdc(467)](_0x3788bd[_0x2902ef][_0x1e2cdc(413)]),_0x36f202=_0x36f202[_0x1e2cdc(467)](_0x3788bd[_0x2902ef][_0x1e2cdc(487)]);try{if(window[_0x1e2cdc(468)]&&window[_0x1e2cdc(522)]){let _0x1cf1ae=helper["object"][_0x1e2cdc(500)](window["settings"][window["cookiePrefix"]],
_0x1e2cdc(449),null);if(_0x1cf1ae){let _0x3132ef=[];_0x1cf1ae["forEach"](_0x44276b=>{var _0x417285=_0x1e2cdc;if(_0x5c6514[_0x417285(470)](_0x44276b)!==-1)_0x3132ef["push"](_0x44276b);else if(_0x36f202[_0x417285(470)](_0x44276b)!==-1)_0x3132ef[_0x417285(440)](_0x44276b)}),_0x5c6514=_0x3132ef,_0x36f202=[],_0x55e1f2=!![]}}}catch(_0x417f05){}_0x3f2d3a=helper[_0x1e2cdc(481)][_0x1e2cdc(435)](window);if(_0x55e1f2)_0x2b03a2(_0x55e1f2)}catch(_0x549838){return _0x549838}}function _0x64aa7a(){var _0x1eb30c=
_0x3fc4f4;if(!_0x59abfa)try{_0x3f2d3a[_0x1eb30c(534)][_0x1eb30c(537)][_0x1eb30c(450)](_0x5c6514)[_0x1eb30c(456)](()=>{var _0x4bc84c=_0x1eb30c;_0x3930e4&&_0x3f2d3a[_0x4bc84c(534)][_0x4bc84c(537)][_0x4bc84c(450)](_0x36f202)[_0x4bc84c(456)](()=>{})["catch"](_0x5c43c3=>{debugger})}),_0x59abfa=!![]}catch(_0x184082){helper["console"][_0x1eb30c(486)](_0x1eb30c(443))}}function _0x3725bd(){var _0x2f3698=_0x3fc4f4;if(_0x59abfa)try{_0x3f2d3a[_0x2f3698(534)][_0x2f3698(537)][_0x2f3698(433)](_0x5c6514);if(_0x3930e4)_0x3f2d3a[_0x2f3698(534)][_0x2f3698(537)][_0x2f3698(433)](_0x36f202);
_0x59abfa=![]}catch(_0x1e0715){helper[_0x2f3698(447)][_0x2f3698(486)](_0x2f3698(424))}}function _0x2b03a2(_0x4ad05d){var _0x27fdb4=_0x3fc4f4;if(_0x3f2d3a?.["navigator"]?.[_0x27fdb4(537)]?.["lock"]){if(_0x59f6fa!=_0x4ad05d)if(_0x4ad05d){window[_0x27fdb4(446)]["on"](_0x27fdb4(499),_0x64aa7a),window["environment"]["on"](_0x27fdb4(437),_0x3725bd);if(environment["isFullscreen"]||_0x3f2d3a!==window&&_0x3f2d3a[_0x27fdb4(419)][_0x27fdb4(431)]===window["document"][_0x27fdb4(496)][_0x27fdb4(542)]&&_0x3f2d3a["screen"][_0x27fdb4(429)]===
window[_0x27fdb4(471)]["documentElement"]["offsetWidth"])_0x64aa7a();_0x59f6fa=_0x4ad05d}else window[_0x27fdb4(446)][_0x27fdb4(494)]("enterfullscreen",_0x64aa7a),window[_0x27fdb4(446)][_0x27fdb4(494)]("exitfullscreen",_0x3725bd),_0x3725bd(),_0x59f6fa=_0x4ad05d}else helper["console"]["warning"](_0x27fdb4(459));return _0x59f6fa}return _0x2765dd(),Object["defineProperty"](_0x1dd07d,_0x3fc4f4(488),{"enumerable":!![],"configurable":![],"get":function(){return _0x59f6fa},"set":_0x2b03a2}),helper[_0x3fc4f4(447)][_0x3fc4f4(486)](helper["string"][_0x3fc4f4(474)](_0x3fc4f4(442),
_0x3fc4f4(525),(new Date)["toString"]()),arguments),_0x1dd07d}typeof window[_0x2d189a(509)]==_0x2d189a(545)&&(helperPlugins={});helperPlugins[_0x2d189a(476)]=_0x2613fc;if(typeof window[_0x2d189a(426)]!=_0x2d189a(545))helper[_0x2d189a(489)](_0x2d189a(476),_0x2613fc)}();
function Theme(){var _themeKey="workspace_account_settings";var _eThemes=Object.freeze({LIGHT:"light-mode",DARK:"dark-mode",BLUE:"blue-mode"});var _eThemesClasses=Object.freeze({AUTOMATIC:"AUTOMATIC"});var _newVersionClass="V7";var _dataRead=false;var _eDefaultTheme=_eThemes.LIGHT;function getData(){let data=helper.storage.get(_themeKey);if((!data||!data.themeOverriden)&&!_dataRead)helper.ajax.get({"url":`${Thinfinity.global.variables.basePath}__base__/config/themes`,"dataType":helper.ajax.responseType.JSON,
"data":JSON.stringify({}),"async":false,"success":function(e){let themesData=JSON.parse(e).data;data={themeOverriden:false,themeVersion:themesData.themeVersion||_newVersionClass,themeName:themesData.defaultTheme||_eThemesClasses.AUTOMATIC,lightMode:themesData.lightMode||_eThemes.LIGHT,darkMode:themesData.darkMode||_eThemes.DARK};helper.storage.set(_themeKey,data);_dataRead=true},"error":function(e,status,xhr){if(!data){data={themeOverriden:false,themeVersion:_newVersionClass,themeName:_eThemesClasses.AUTOMATIC,
lightMode:_eThemes.LIGHT,darkMode:_eThemes.DARK};helper.storage.set(_themeKey,data)}}});return data}function setData(theme,themeName,themeVersion,overriden=true){let t={themeVersion};if(theme)t.theme=theme;if(themeName)t.themeName=themeName;t.themeOverriden=overriden;let d=getData();if(d)t={...t,...d};if(themeVersion===null)delete t.themeVersion;helper.storage.set(_themeKey,t);return t}function on(handler){if(handler instanceof Function)return helper.storage.on(_themeKey,handler);else return false}
function off(handler){if(handler instanceof Function)return helper.storage.off(_themeKey,handler);else return false}function applyBodyStyle(data){let applyThemeClass=({themeClass,oldClass})=>{if(themeClass==_eThemesClasses.AUTOMATIC&&window.matchMedia)themeClass=window.matchMedia("(prefers-color-scheme: dark)").matches?data.darkMode:data.lightMode;if(!!oldClass&&helper.style.hasClass(document.body,oldClass))helper.style.replace(document.body,oldClass,themeClass);else helper.style.addClass(document.body,
themeClass)};if(Object.getOwnPropertyNames(data).length>0){if(window.cookiePrefix)helper.style.add(document.body,window.cookiePrefix);var td=getData();if(td?.themeVersion)helper.style.add(document.body,td.themeVersion);else helper.style.remove(document.body,_newVersionClass);let themeClass=data.themeName;let oldClass=null;if(data instanceof StorageEvent){let nv=JSON.parse(data.newValue);if(nv){oldClass=JSON.parse(data.oldValue).themeName;themeClass=nv.themeName}}if(!oldClass&&themeClass==_eThemesClasses.AUTOMATIC)oldClass=
window.matchMedia("(prefers-color-scheme: dark)").matches?data.lightMode:data.darkMode;applyThemeClass({...{themeClass},...(oldClass?{oldClass}:{})});helper.style.remove(document.body,"non-visible")}}function applyTheme(options){let setStyle=data=>{if(!document.body)helper.dom.interactive(function(){applyBodyStyle(data)});else applyBodyStyle(data)};let ver=null;let d=getData();let tv=null;if(options){if(options.auto===true)on(setStyle);if(!(d?.themeName?.length>0))if(options.default?.length>0)d={themeName:options.default};
else d={themeName:_eDefaultTheme};if(options.hasOwnProperty("themeVersion")){ver=true;tv=options.themeVersion}else if(options.hasOwnProperty("version")){ver=true;tv=options.version}if(ver)d=setData(d.theme,d.themeName,tv)}if(d){setStyle(d);if(options?.callback)options.callback()}else return false}function getVersion(){let d=getData();if(d)return d?.themeVersion?d.themeVersion.toUpperCase():null;else null}function init(){if(window.matchMedia)window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",
function(e){applyBodyStyle(getData())})}Object.defineProperty(this,"get",{enumerable:true,configurable:false,writable:false,value:getData});Object.defineProperty(this,"version",{enumerable:true,configurable:false,get:function(){return getVersion()}});Object.defineProperty(this,"set",{enumerable:true,configurable:false,writable:false,value:setData});Object.defineProperty(this,"on",{enumerable:true,configurable:false,writable:false,value:on});Object.defineProperty(this,"off",{enumerable:true,configurable:false,
writable:false,value:off});Object.defineProperty(this,"apply",{enumerable:true,configurable:false,writable:false,value:applyTheme});Object.defineProperty(this,"themes",{enumerable:true,configurable:false,get:function(){return _eThemes}});Object.defineProperty(this,"default",{enumerable:true,configurable:false,get:function(){return _eDefaultTheme}});init();return this}try{Thinfinity!=undefined}catch(e){Thinfinity={}}Thinfinity.Theme=new Theme;
(function(){function MController(args){var _ref=this;var productId=null;var _args={id:null,name:null,device:null,sizeLimit:{min:{width:640,height:480},max:{width:8192,height:8192}},viewWidth:0,viewHeight:0};var _oInterface=null;var _methods=null;var _properties=null;var _output={textValue:null,setSelectionRange:null,updateMacCmd:null,processData:null,processCmds:null,processFrame:null,cursorCanvas:null,getMinZoomFactor:null};var _keyboardHandler=null;var _container=null;var _initialized=false;var _resizeTimeout=
false;var _waitToResize=500;var _registerdCmds=[];var _orphan={timeoutId:null,timeout:5E3,enabled:false,maxTimeoutBeforeClose:15E3};var _enumPictureType=helper.object.createEnum({CANVAS:0,H264:1,GFX:2});var _isEmbedded=true;var _currentCursor={"intervalId":null,"intervalTime":25,"count":0,"maxCount":20,"checkUpdate":function(){if(_container.style.cursor!=_container.originalImage.cursor)if(_currentCursor.count<=_currentCursor.maxCount){_container.style.cursor="none";_container.style.cursor=_container.originalImage.cursor}else{clearInterval(_currentCursor.intervalId);
helper.console.log(helper.string.format("Cannot assign current cursor image: {0}",_container.originalImage.cursor),arguments)}else if(_currentCursor.count>=_currentCursor.maxCount)clearInterval(_currentCursor.intervalId);_currentCursor.count++},"check":function(){_currentCursor.count=0;clearInterval(_currentCursor.intervalId);_currentCursor.intervalId=setInterval(_currentCursor.checkUpdate,_currentCursor.intervalTime)}};var _noop=function(){};var _messages={reject:{interface:{set:"Invalid interface data - TMC-SI",
get:"Invalid interface data - TMC-GI"}},error:{missingContainer:"Cannot find a valid container"},initializing:{start:"    Starting monitor controller.",ready:"    -- > Monitor controlled initialized"}};var _clipObj=null;var _mouseDriver=null;var _touchDriver=null;var wndTop=null;var _identify={timeout:5E3,timeoutId:null,containerElem:null,blockElem:null,idContainerElem:null,idElem:null};var _vncContainer=null;var _blockDisplayElem=null;var _deviceRef=null;var _bodyHeight=0;var _bodyWidth=0;var _sizeElem=
null;var _isLegacy=typeof legacyVersion!="undefined"?legacyVersion:true;var _setFocusHandler=_noop;let _webV7FrameElement=null;function initialize(){helper.dom.ready(function(){Thinfinity.Theme?.apply({auto:true});waiting();wndTop=helper.url.getTopWindow(window);if(!window.ThinVNC&&window.opener===null&&wndTop===window&&!Thinfinity?.Monitor?.Manager){clearTimeout(_orphan.timeoutId);_orphan.timeoutId=setTimeout(runOrphan,_orphan.timeout)}_output.getMinZoomFactor=getMinZoomFactor})}function getWebV7Frame(){if(_webV7FrameElement)return _webV7FrameElement;
else try{_webV7FrameElement=window.__webV7__&&window.frameElement?window.frameElement.parentElement:false}catch(err){_webV7FrameElement=false}return _webV7FrameElement}function canRunResize(){let res=true;let fe=getWebV7Frame();if(fe)try{let display=fe.style.getPropertyValue("display");if(display==="none")res=false}catch(error){}return res}function execScaled(){let r=setScaled(_properties.scaled);zoomDesktop();return r}function waiting(){if(Thinfinity?.Popups?.establishing&&!_isLegacy)Thinfinity.Popups.establishing.show(consts.loading,
consts.connecting,true,false)}function runOrphan(){let msg=consts.displayCancelled;helper.console.warning(msg,arguments);msg+=`</br><button id="btnClose" onclick="window.close();let btn = document.getElementById('btnClose'); btn.parentElement.removeChild(btn);">${consts.displayCloseTab}</button>`;document.body.innerText="";helper.dom.appendJsonElement({"parentElement":document.body,"type":"div","attributes":{"class":"bye"},"content":msg});setTimeout(function(){window.close()},_orphan.maxTimeoutBeforeClose)}
function setInterface(){return new Promise((resolve,reject)=>{if(arguments&&typeof arguments[0]==="object"&&typeof arguments[1]==="object"){_deviceRef=arguments[0];_deviceRef.screen.width=window.screen.width;_deviceRef.screen.height=window.screen.height;_oInterface=arguments[1];_methods=_oInterface.methods;_properties=_oInterface.properties;productId=_properties.productId;_oInterface.on("scaled",execScaled);resolve(true)}else reject(_messages.reject.interface.set)})}function getInterface(){return new Promise((resolve,
reject)=>{if(arguments&&arguments[0])resolve(_output);else reject(_messages.reject.interface.get)})}function initializeFocus(){Thinfinity.TabFocusHook.on("visible",function(e){_properties.hasFocus=true;_methods.sendFocus(_args.device.id,"tabvisible",true)}).on("hidden",function(e){_properties.hasFocus=false;_methods.sendFocus(_args.device.id,"tabvisible",false)}).on("focus",function(e){_properties.hasFocus=true;if(_keyboardHandler)_keyboardHandler.focus();_methods.sendFocus(_args.device.id,"focus",
true)}).on("blur",function(e){_properties.hasFocus=false;_methods.sendFocus(_args.device.id,"focus",false)}).on("visibility",function(e){_properties.hasFocus=["visible"].indexOf(e.visibilityState)!==-1;_methods.sendFocus(_args.device.id,"visibility",e.visibilityState)});if(_isEmbedded)setTimeout(function(){_properties.hasFocus=document.hasFocus();_methods.sendFocus(_args.device.id,"focus",document.hasFocus())},250)}function resize(){let wnd=window;let devInfo={width:wnd.environment.availWidth,height:wnd.environment.availHeight,
display:{width:_container.offsetWidth,height:_container.offsetHeight}};if(_args.sizeLimit?.min){let min=_args.sizeLimit.min;devInfo.width=Math.max(min.width,devInfo.width);devInfo.height=Math.max(min.height,devInfo.height)}helper.console.log(`Resize monitor - id ${_args.device.id}, info: ${JSON.stringify(devInfo)}`,arguments);_methods.resize(_args.device.id,devInfo)}function resizeHandler(){if(_resizeTimeout){clearTimeout(_resizeTimeout);_resizeTimeout=null}updateBodySize();zoomDesktop()}function resizeCompleteHandler(){if(_resizeTimeout)clearTimeout(_resizeTimeout);
_resizeTimeout=setTimeout(function(){resize();zoomDesktop()},_waitToResize)}function initializeResize(){setScaled(_properties.scaled);updateBodySize();zoomDesktop();window.environment.on("resize",resizeHandler);window.environment.on("resizeComplete",resizeCompleteHandler);if(!_isEmbedded)setTimeout(resize,1E3)}function registerCmds(cmd,handler){if(!_registerdCmds[cmd])_registerdCmds[cmd]=handler}function processCmds(obj){if(_registerdCmds[obj.cmd])return _registerdCmds[obj.cmd](obj)}function promptTextCountdown(constMsg,
time,callback){let getSprintfText=null;let _timeoutTextId=null;if(time){let _currentPromptTime=Date.now();getSprintfText=function(){let s=parseInt((time-(Date.now()-_currentPromptTime))/1E3,10);if(s>1)s=s.toString()+" "+consts.seconds;else s=s.toString()+" "+consts.second;return helper.string.sprintf(constMsg,s)};_timeoutTextId=setInterval(function(){let dlg=document.getElementById("dlgH264Message");if(dlg)dlg.innerHTML=getSprintfText();if(Date.now()-_currentPromptTime>=time){clearInterval(_timeoutTextId);
if(callback)callback()}},1E3)}else getSprintfText=function(){return helper.string.sprintf(constMsg)};Thinfinity.Popups.choice({id:"dlgDecoderError",parentElement:"",class:"",iconType:"disconnectedIco",title:productName,message:`<span id="dlgH264Message">${getSprintfText().toString()}</span>`,buttons:[{value:!time?consts.Close:consts.retry,class:"",action:function(e){clearInterval(_timeoutTextId);if(callback)callback()}}],noPropagateEvents:true});_currentPromptTime=Date.now()}function initializeVideoDriver(data){var videoDriverError=
null;if(_properties.enableH264)if(agentInfo.h264){if(helper.object.existsPath(window,"Thinfinity.Driver.Video")){let h264Key="#__Thinfinity.Video.Driver__"+(data.key||"");var h264Decoders=[Thinfinity.Driver.Video.DECODER_TYPES.TINYBSD,Thinfinity.Driver.Video.DECODER_TYPES.JMUXER,Thinfinity.Driver.Video.DECODER_TYPES.BSD,Thinfinity.Driver.Video.DECODER_TYPES.BSDWORKER];var _currentDecoderIdx=0;let getDecoder=function(){let d=helper.storage.get(h264Key);if(d){_currentDecoderIdx=d.cdi;return h264Decoders[_currentDecoderIdx]}else return h264Decoders[_currentDecoderIdx]};
let switchDecoder=function(){if(_currentDecoderIdx<h264Decoders.length-1){_currentDecoderIdx++;helper.storage.add(h264Key,{cdi:_currentDecoderIdx});promptTextCountdown(consts.h264DecodeError,3E3,function(){window.location.reload()})}else promptTextCountdown(consts.h264DecoderError,null,function(){helper.storage.clear(h264Key);if(_methods.disconnect)_methods.disconnect()})};_videoDriver=new Thinfinity.Driver.Video({"id":data.id,"container":_container,"player":"player","decoderType":getDecoder(),"methods":{"sendCmd":_methods.sendCmd,
"registerCanvas":_methods.registerCanvas},"events":{"pictureSize":function(width,height){},"processDataEcho":_methods.processDataEcho?function(data){_methods.processDataEcho(_args.device.id,data)}:_noop,"error":function(obj){videoDriverError=true;if(_isEmbedded){if(obj)switch(obj.code){case Thinfinity.Driver.Video.ERROR_CODE.NONE_PICTURE_PROCESSED:helper.console.warning(`Invalid decoder type, arrayBuffer data is not compatible with the current decoder.`);switchDecoder();break;default:break}setTimeout(function(){let oError=
{message:obj.msg||obj};_oInterface.__prototype__.fireEvent("onServerError",oError)},500)}}}});_output.processData=_videoDriver.processData}}else _videoDriver={"processData":function noop(){}};else if(_properties.enableGfx){_videoDriver=new Thinfinity.Driver.GFXProcessor({"id":data.id,"size":{width:data.device.width,height:data.device.height},"container":_container,"methods":{"sendCmd":_methods.sendCmd,"registerCanvas":_methods.registerCanvas,"repaint":()=>{_oInterface.__prototype__.fireEvent("gfxRepaint")}}});
_oInterface.on("repaint",()=>{if(_properties.repaint&&_properties.isShadowSession)_videoDriver.forceRepaint=true;_properties.repaint=false});_output.processData=_videoDriver.processData}else try{videoDriverError=false}catch(error){_oInterface.__prototype__.fireEvent("onServerError",{message:`Cannot start ctx driver. ${error.message}`});videoDriverError=true}return!videoDriverError}function preventDefault(e){if(e)if(helper.style.hasAnyClass(e.srcElement||e.target,"thin-allowcontrol preventTouchExecution")){e.preventDefault();
return true}}function showStdKdbHandler(){if(_properties.cursorCanvasY>=0)_keyboardHandler.inputElement.style.top=`${_properties.cursorCanvasY}px`;_keyboardHandler.focus(true)}function documentClickHandler(){if(!document.hasFocus()){document.body.focus();_keyboardHandler.focus()}}function initializeKeyboardDriver(data){if(!_keyboardHandler&&!agentInfo.isMobile){_keyboardHandler=new Thinfinity.Driver.Keyboard({parentElement:document.body,clipboard:_oInterface.properties.clipboard?.properties,methods:_methods,
properties:_properties,events:{keyboardEvent:function(){},hook:function(value){},focus:function(e){},blur:function(e){}}});_output.setSelectionRange=_keyboardHandler.setSelectionRange;_output.textValue=function(){return _keyboardHandler.inputElement.value};_output.updateMacCmd=agentInfo.isMac?_keyboardHandler.updateMacCmd:_noop;if(!agentInfo.isMobile)_oInterface.on("showStdKdb",showStdKdbHandler);_mouseDriver.on("documentClick",documentClickHandler);if(!agentInfo.isMobile){let isTouchEvt=false;_setFocusHandler=
()=>{if(!isTouchEvt)_keyboardHandler.focus()};if(_mouseDriver)_mouseDriver.on("mouseDown",_setFocusHandler);let isTap=false;if(_touchDriver)_touchDriver.ready(()=>{document.addEventListener("keydown",e=>{let iType=(e?.target?.type||e?.target?.nodeName||"").toUpperCase();if(["TEXT","PASSWORD","TEXTAREA"].indexOf(iType)!==-1)return true;if(_keyboardHandler.inputElement!==document.activeElement){isTouchEvt=false;_setFocusHandler()}});_touchDriver.on("tap",()=>{isTap=true});_touchDriver.on("release",
e=>{isTouchEvt=["touchstart","touchmove","touchend"].indexOf(e.type)!==-1;if(isTap)setTimeout(_setFocusHandler,250);isTap=false})})}}}function getElementFromPoint(e){let hasChildOfByClassName=(classname,child)=>{var elems=document.getElementsByClassName(classname);for(var i=0;i<elems.length;i++)if(elems[i].contains(child))return true;return false};var x,y;if((e.changedTouches||e.touches)&&(e.changedTouches||e.touches).length>0){x=(e.changedTouches||e.touches)[0].pageX-document.body.offsetLeft;y=(e.changedTouches||
e.touches)[0].pageY-document.body.offsetTop}else if(e.clientX!=undefined||e.pageX!=undefined){x=e.clientX||e.pageX-document.body.offsetLeft;y=e.clientY||e.pageY-document.body.offsetTop}else if(e.pointers!=undefined&&e.pointers.length>0){x=e.pointers[0].pageX-document.body.offsetLeft;y=e.pointers[0].pageY-document.body.offsetTop}var idMask=productId+"_canvas_";var selectedElement=document.elementFromPoint(x,y);if(selectedElement&&(!helper.style.hasClass(selectedElement,"__uselocalmouse__")&&!hasChildOfByClassName("__uselocalmouse__",
selectedElement)&&(selectedElement.tagName=="CANVAS"||selectedElement.name=="caret"||selectedElement.id=="caret"||selectedElement==_args.container||selectedElement.id.indexOf(idMask)!=-1||helper.style.hasClass(selectedElement,"ignoremouse"))))return null;else return selectedElement}function initializeMouseDriver(data){if(!_mouseDriver){_mouseDriver=new Thinfinity.Driver.Mouse({container:_container,device:data.device,extra:{getElementFromPoint,preventDefault}},_oInterface);Object.defineProperty(_output,
"cursorCanvas",{enumerable:true,configurable:false,get:()=>{return _mouseDriver?.cursorCanvas}})}}function initializeTouchDriver(data){if(!_touchDriver&&!agentInfo.isMobile&&Thinfinity?.Driver?.Touch){let moveCursorCanvas=_mouseDriver&&_mouseDriver.moveCursorCanvas?_mouseDriver.moveCursorCanvas:_noop;let _cOInterface=_oInterface.__prototype__.clone();_cOInterface.methods.sendMouse=function(x,y,button,action){moveCursorCanvas(x,y);_oInterface.methods.sendMouse(x,y,button,action)};var localGestures=
[...(helper.object.getValue(window,"customSettings.touch.gestures",[],{ignoreCase:true})??[]),...(helper.object.getValue(window.THIN,"clientSettings.mobile.gestures",null,{ignoreCase:true})??[]),...(helper.object.getValue(window.THIN?.rcParams,"mobile.gestures",null,{ignoreCase:true})??[]),...(helper.object.getValue(window,"customSettings.mobile.gestures",[],{ignoreCase:true})??[])];_touchDriver=new Thinfinity.Driver.Touch({container:_container,device:data.device,extra:{getElementFromPoint,waitForTouchDevice:()=>
{setTimeout(()=>{moveCursorCanvas=_mouseDriver&&_mouseDriver.moveCursorCanvas?_mouseDriver.moveCursorCanvas:_noop;_oInterface.methods.fireEvent("onTouchDeviceDetected")},200)},preventDefault},gestures:localGestures},_cOInterface)}}function initializeClipboard(){if(!_clipObj&&_oInterface.properties.clipboard?.properties?.enable&&Thinfinity.Clipboard&&_keyboardHandler)_clipObj=new Thinfinity.Clipboard({...{inputElem:_keyboardHandler.inputElement,parentElement:_container,canPasteFiles:_oInterface.properties.canPasteFiles},
..._oInterface})}function getEnvironmentValues(){let scale=agentInfo.isFirefox||agentInfo.isOpera||agentInfo.isChrome||agentInfo.isSafari||agentInfo.isIE9?getScale():1;let border=_properties.border;let crop={"widht":0,"height":0};if(productId==="thinrdp")crop=environment.crop||crop;let width=_container.offsetWidth*scale-(productId==="thinrdp"?crop.width/2:0)-(border.left+border.right);let height=_container.offsetHeight*scale-(productId==="thinrdp"?crop.height/2:0)-(border.top+border.bottom);return{scale,
border,width,height}}function center(){if(agentInfo.isMobile){_container.style.top="0px";_container.style.marginTop="0px";_container.style.left="0px";_container.style.marginLeft="0px"}else{let gev=getEnvironmentValues();if(_properties.centered&&_properties.scaled)if(gev.scale!=1)applyCenter(gev,_properties.centeredMode);else{_container.style.top="0px";_container.style.marginTop="0px";_container.style.left="0px";_container.style.marginLeft="0px"}else{let cm="";let lw=gev.width<=document.body.offsetWidth;
let lh=gev.height<=document.body.offsetHeight;if(lw&&lh)cm="both";else if(lw)cm="horizontal";else if(lh)cm="vertical";if(cm.length>0)applyCenter(gev,cm);else{_container.style.top="0px";_container.style.marginTop="0px";_container.style.left="0px";_container.style.marginLeft="0px";if(_properties.overflow)_container.parentElement.style.overflow=_properties.overflow}}}}function applyCenter({width,height,border}=obj,centeredMode){let ml=width/2;let mt=height/2;if(["horizontal","both"].indexOf(centeredMode)!==
-1){_container.style.left="50%";_container.style.marginLeft=-ml+"px"}else{_container.style.left=border.left;_container.style.marginLeft="0px"}if(["vertical","both"].indexOf(centeredMode)!==-1){_container.style.top="50%";_container.style.marginTop=-mt+"px"}else{_container.style.top=border.top;_container.style.marginTop="0px"}applyOverflow({width,height})}function applyOverflow({width,height}=obj){if(!width)width=1;if(!height)height=1;if(_properties.scaled)_container.parentElement.style.overflow="hidden";
else if(_properties.overflow&&(width-1>document.body.offsetWidth||height-1>document.body.offsetHeight))_container.parentElement.style.overflow=_properties.overflow;else _container.parentElement.style.overflow="hidden"}function updateDesktopSize(width,height){if(width&&!(agentInfo.isMobile&&_args.viewWidth>window.screen.width))_container.style.width=_vncContainer.style.width=width+"px";if(height&&!(agentInfo.isMobile&&_args.viewHeight>window.screen.height))_container.style.height=_vncContainer.style.height=
height+"px"}function updateBodySize(){let size=helper.size.get(_sizeElem);var border=_properties.border;_bodyHeight=size.height-(border.top+border.bottom+(productId==="thinrdp"?environment.crop.height:0));_bodyWidth=size.width-(border.left+border.right+(productId==="thinrdp"?environment.crop.width:0))}function setScaled(scaled,hwnd){var virtualui=productId=="webfmx"||productId=="virtualui";if(_properties.rdpMode&&!scaled)updateDesktopSize(_args.viewWidth,_args.viewHeight);applyOverflow(getEnvironmentValues());
if(_properties.fitmode==0||_properties.fitToBrowser==true)if(scaled){_container.parentElement.style.overflow="hidden";updateDesktopSize(_args.viewWidth,_args.viewHeight)}else{var tempWidth=0;var tempHeight=0;var mw=_args.viewWidth;var mh=_args.viewHeight;var border=_properties.border;if(window.environment.isFullscreen){tempWidth=border.left+Math.max(mw,_args.viewWidth)+border.right;tempHeight=border.top+Math.max(mh,_args.viewHeight)+border.bottom}else{tempWidth=border.left+Math.min(mw,_args.viewWidth)+
border.right;tempHeight=border.top+Math.min(mh,_args.viewHeight)+border.bottom}if(productId!="thinrdp")updateDesktopSize(tempWidth,tempHeight);if(_properties.overflow)_container.parentElement.style.overflow=_properties.overflow}else if(virtualui)if(_properties.fitmode==1){var tempWidth=0;var tempHeight=0;var maxSize=_properties.maxSize;var border=_properties.border;if(!agentInfo.isMobile){tempWidth=Math.max(maxSize.width,_args.viewWidth);tempHeight=Math.max(maxSize.height,_args.viewHeight);if(window.environment.isFullscreen==
true){tempWidth=Math.max(window.environment.rawWidth,tempWidth);tempHeight=Math.max(window.environment.rawHeight,tempHeight)}}else{tempWidth=border.left+Math.min(maxSize.width,_args.viewWidth)+border.right;tempHeight=border.top+Math.min(maxSize.height,_args.viewHeight)+border.bottom}updateDesktopSize(border.left+tempWidth+border.right,border.top+tempHeight+border.bottom);if(_args.viewHeight>window.environment.availHeight||_args.viewWidth>window.environment.availWidth)_container.parentElement.style.overflow=
"scroll";else if(_properties.overflow)_container.parentElement.style.overflow=_properties.overflow}else if(_properties.fitmode==2){_container.parentElement.style.overflow="hidden";updateDesktopSize(_args.viewWidth,_args.viewHeight)}if(!(virtualui||typeof hwnd=="undefined")&&(_properties.fitToBrowser||_properties.fitmode==0))if(_isEmbedded){var win={"left":0,"top":0,"width":_args.viewWidth,"height":_args.viewHeight,"hwnd":hwnd,"zidx":_properties.baseZIndex};_oInterface.__prototype__.fireEvent("createCanvas",
win)}_properties.scaled=scaled;_properties.scale=getScale()}function getScale(){if(!_properties.scaled)return _properties.zoomFactor;var c1=_bodyHeight/_args.viewHeight;var c2=_bodyWidth/_args.viewWidth;if(c1>1&&c2>1)return _properties.serverDPR.enabled?_properties.serverDPR.originalValue&&_properties.serverDPR.originalValue<1?Math.min(c1,c2):1:c2<c1?c2:c1;else{if(_properties.serverDPR.enabled&&_properties.zoomFactor>1)_properties.zoomFactor=1;return c2<c1?c2:c1}}function zoomFactorReset(){var c1=
_bodyHeight/((window.environment.height/window.environment.currentDevicePixelRatio-(window.environment.margin.top+window.environment.margin.bottom))*window.environment.currentDevicePixelRatio);var c2=_bodyWidth/((window.environment.width/window.environment.currentDevicePixelRatio-(window.environment.margin.left+window.environment.margin.right))*window.environment.currentDevicePixelRatio);_properties.minZoomFactor=c1>1&&c2>1?1:c2<c1?c2:c1;return _properties.minZoomFactor}function getMinZoomFactor(){_properties.minZoomFactor=
agentInfo.isMobile&&_properties.scaled?1:_properties.minZoomFactor;return _properties.minZoomFactor?_properties.minZoomFactor:zoomFactorReset()}function zoomDesktop(scale){if(canRunResize()){if(scale!=undefined){if(scale>=getMinZoomFactor())_properties.zoomFactor=scale;_properties.scale=scale}else _properties.scale=getScale();if(_properties.centered&&(!agentInfo.isMobile||_properties.scaled))center();var s=_container.style;var strTransformOrigin="top left";if(typeof s.msTransform!="undefined"){_container.style.msTransformOrigin=
strTransformOrigin;_container.style.msTransform="scale("+_properties.scale+")"}else if(typeof s.MozTransform!="undefined"){_container.style.MozTransformOrigin=strTransformOrigin;_container.style.MozTransform="scale("+_properties.scale+")"}else if(typeof s.OTransform!="undefined"){_container.style.OTransformOrigin=strTransformOrigin;_container.style.OTransform="scale("+_properties.scale+")"}else if(typeof s.WebkitTransform!="undefined"){_container.style.WebkitTransformOrigin=strTransformOrigin;_container.style.WebkitTransform=
"scale("+_properties.scale+")"}}}function initializeHandlers(){if(_isEmbedded)helper.dom.addEvent(window,["beforeUnload","unload"],function(e){_methods.removeDevice(_args.device.id);dispose()},{passive:false})}function getContainer(){let container=null;let containers=document.getElementsByClassName("render-container");if(containers&&containers.length)container=containers[0];else{container=document.getElementById("deskdiv");if(!container)container=document.getElementById("virtualui");if(!container)container=
document.getElementById("zsdiv");if(!container)throw new Error(_messages.error.missingContainer);}_vncContainer=container;return container}function initializeCommands(){let _clickEffectDown=false;registerCmds("DS",function(win){helper.console.log(`Device: ${_args.device.id+1}, processing DS, width: ${win.width}, height:${win.height}, current scale: ${_properties.scale}`);_properties.repaint=Thinfinity.TabFocusHook.isHidden;_args.viewWidth=win.width;_args.viewHeight=win.height;updateDesktopSize(win.width,
win.height);updateBodySize();setScaled(_properties.scaled,win.hwnd);zoomDesktop()});registerCmds("ZOOM_DESKTOP",function(win){zoomDesktop(win?.value||undefined)});registerCmds("CENTER",center);registerCmds("ZOOM_FACTOR_RESET",zoomFactorReset);registerCmds("PLAYBACK_MOUSE_MOVE",function(cmd){if(cmd.data.mouseEffectVisible&&!_clickEffectDown)_clickEffectDown=true;else if(!cmd.data.mouseEffectVisible)_clickEffectDown=false;_mouseDriver.moveCursorCanvas(cmd.data.x,cmd.data.y,_clickEffectDown)})}function sessionStatus(data){initializeClipboard()}
function asyncCopyHandler(h){if(h&&_clipObj)_clipObj.async=h}function contextMenuHandler(e){if(e)e.preventDefault();return false}function attachHandlers(){_oInterface.on("asyncCopy",asyncCopyHandler);_oInterface.on("localEvent",processLocalEvents);helper.dom.addEvent(_container,"contextmenu",contextMenuHandler,{passive:false})}function removeHandlers(){_oInterface.off("asyncCopy",asyncCopyHandler);_oInterface.off("localEvent",processLocalEvents);_oInterface.off("showStdKdb",showStdKdbHandler);helper.dom.removeEvent(_container,
"contextmenu",contextMenuHandler);helper.dom.removeEvent(window,"message",onMessageHandler);window.environment.off("resize",resizeHandler);window.environment.off("resizeComplete",resizeCompleteHandler);if(_touchDriver){_touchDriver.off("tap");_touchDriver.off("release")}if(_mouseDriver){_mouseDriver.off("mouseDown",_setFocusHandler);_mouseDriver.on("documentClick",documentClickHandler)}}function processLocalEvents(data){let cmd=null;if(data.cmd)cmd=data.cmd.toLowerCase();switch(cmd){case "identify":drawId(data.timeout||
_identify.timeout);break;case "connected":unblockDisplay();break;case "connectionrestored":case "connectionunstable":case "connectionLost":blockDisplay();break;case "disconnect":stop();break;case "servercmdresult":if(data.obj)if(_properties.pictureType===_enumPictureType.CANVAS){if(data.obj?.viewWidth){_args.viewWidth=data.obj.viewWidth;updateDesktopSize(_args.viewWidth)}if(data.obj?.viewHeight){_args.viewHeight=data.obj.viewHeight;updateDesktopSize(null,_args.viewHeight)}}break;case "sessionstatus":sessionStatus(data.data);
break}}function blockDisplay(){if(!_isEmbedded){if(!_blockDisplayElem)_blockDisplayElem=helper.dom.createJsonElement({type:"div",attributes:{class:"displayControllerBlocker"}});document.body.appendChild(_blockDisplayElem)}}function unblockDisplay(){if(!_isEmbedded)if(_blockDisplayElem)_blockDisplayElem.parentElement.removeChild(_blockDisplayElem)}function drawId(timeout){if(!_identify.containerElem){_identify.containerElem=helper.dom.appendJsonElement({type:"div",parentElement:document.body,attributes:{class:"displayController"}});
_identify.blockElem=helper.dom.appendJsonElement({type:"div",parentElement:_identify.containerElem,attributes:{class:"background"}});_identify.idContainerElem=helper.dom.appendJsonElement({type:"div",parentElement:_identify.containerElem,attributes:{class:"identifyContainer"+(_isEmbedded?" embedded":"")}});_identify.idElem=helper.dom.appendJsonElement({type:"div",parentElement:_identify.idContainerElem,attributes:{class:"identify"}})}else document.body.appendChild(_identify.containerElem);_identify.idElem.innerText=
_args.device.id+1;clearTimeout(_identify.timeoutId);_identify.timeoutId=setTimeout(function(){document.body.removeChild(_identify.containerElem)},timeout)}function start(data){helper.console.log(_messages.initializing.start,arguments);clearTimeout(_orphan.timeoutId);if(!_initialized){_initialized=true;_container=getContainer();_sizeElem=_container.parentElement.tagName=="BODY"?window:_container.parentElement;_args.viewWidth=data.device.width;_args.viewHeight=data.device.height;helper.object.parseAttributes(_args,
data);initializeCommands();attachHandlers();_isEmbedded=data.isEmbedded;initializeFocus();updateDesktopSize(data.device.width,data.device.height);initializeVideoDriver(data);initializeMouseDriver(data);initializeTouchDriver(data);initializeKeyboardDriver(data);initializeHandlers();initializeResize();if(!_isEmbedded){helper.dom.addEvent(window,"message",onMessageHandler,{passive:false});setTimeout(function(){Thinfinity.Popups.unblock();Thinfinity.Popups.establishing.hide()},1E3);execScaled()}_output.processCmds=
processCmds;helper.console.log(_messages.initializing.ready)}}function onMessageHandler(e){if(e&&e.data&&e.data.cmd==="CALLBACK"){e.source.postMessage({cmd:"CALLBACK-RESPONSE"},"*");helper.dom.removeEvent(window,"message",onMessageHandler)}}function stop(){Thinfinity.TabFocusHook.stop();removeHandlers();if(_touchDriver)_touchDriver.dispose();_touchDriver=null;_mouseDriver=null;_initialized=false}function dispose(){stop()}initialize();Object.defineProperty(_ref,"start",{enumerable:true,configurable:false,
writable:false,value:start});Object.defineProperty(_ref,"stop",{enumerable:true,configurable:false,writable:false,value:stop});Object.defineProperty(_ref,"dispose",{enumerable:true,configurable:false,writable:false,value:dispose});Object.defineProperty(_ref,"getInterface",{enumerable:true,configurable:false,writable:false,value:getInterface});Object.defineProperty(_ref,"setInterface",{enumerable:true,configurable:false,writable:false,value:setInterface});Object.defineProperty(_ref,"keyboardHandler",
{enumerable:true,configurable:false,get:function(){return _keyboardHandler}});return _ref}try{Thinfinity!=undefined}catch(e){Thinfinity={}}if(typeof Thinfinity.Display==="undefined")Thinfinity.Display={};Thinfinity.Display.Controller=new MController})();
(function(){var __instance__=null;var _awaitServ=[];var _permissions=null;function awaitService(){return new Promise(function(resolve,reject){if(__instance__)resolve(__instance__);else _awaitServ.push({"resolve":resolve,"reject":reject})})}function executeAwaitServ(){_awaitServ.forEach(function(prom){try{prom.resolve(__instance__)}catch(e){}});_awaitServ=null}function setPermissions(permissions){if(permissions&&helper.object.getDataTypeOf(permissions)==="json")_permissions=permissions}function Component(args){try{if(Thinfinity.Component.Extend)return new Thinfinity.Component.Extend(args)}catch(e){helper.console.warning("Cannot construct Thinfinity.Component",
arguments)}}function RegistrationServices(args){var _ref=this;var _args={"components":null,"constructors":null,"owner":null,"getAuthorization":null,"permissions":null};var _negotiationCommands={"registration":"component.require.registration","response":"component.registration.response","ready":"thinfinity.components.registration.services.ready"};var fireEvent=null;var _registeredObjects={};var _registeredComponents={};var _loadedComponents={};var _waitComponents={};var _registeredAPIS={};var _waitAPIs=
{};var _waitRegisteredComponents={};function initialize(args){helper.object.parseAttributes(_args,args);var te=new Thinfinity.Events({"owner":_ref,"events":_args.events});fireEvent=te.fireEvent;attachHandlers();defineExternalProperties();initializeComponents(_args.components);fireCustomEvent(_negotiationCommands.ready,null)}function attachHandlers(){helper.dom.addEvent(window,_negotiationCommands.registration,requireRegistration)}function detachHandlers(){helper.dom.removeEvent(window,_negotiationCommands.registration,
requireRegistration)}function fireCustomEvent(name,data){window.dispatchEvent(new CustomEvent(name,{"detail":data}))}function requireRegistration(){fireCustomEvent(_negotiationCommands.response,{"owner":_ref})}function registerComponent(component){if(component.name&&!_registeredComponents[component.name]){_registeredComponents[component.name]=component;return true}else{helper.console.warning("This component is already registered",arguments);return false}}function unregisterComponent(component){if(component.name&&
_registeredComponents[component.name]&&_registeredComponents[component.name]===component){delete _registeredComponents[component.name];return true}else{helper.console.warning("This component is not registered",arguments);return false}}function loadAPI(name){return new Promise(function(resolve){name=name.toUpperCase();if(_loadedComponents[name]){var comp=_loadedComponents[name];if(comp.api)helper.dom.loadFile(component.api).then(resolve).catch(reject);else reject(false)}else{if(!_waitComponents[name])_waitComponents[name]=
[];_waitComponents[name].push(function(){var comp=_loadedComponents[name];if(comp.api)helper.dom.loadFile(comp.api).then(resolve).catch(reject);else reject(false)})}})}function getAPI(name){return new Promise(function(resolve,reject){return loadAPI(name.toUpperCase()).then(function(){if(_registeredAPIS[name])resolve(_registeredAPIS[name]);else{if(!_waitAPIs[name])_waitAPIs[name]=[];_waitAPIs[name].push(resolve)}}).catch(reject)})}function checkForPendingAPIs(name){name=name.toUpperCase();if(_waitAPIs[name]){_waitAPIs[name].forEach(function(resolve){try{resolve(_registeredAPIS[name])}catch(e){}});
delete _waitAPIs[name]}}function checkForPendingComponent(name){name=name.toUpperCase();if(_waitComponents[name]){_waitComponents[name].forEach(function(resolve){try{resolve()}catch(e){}});delete _waitComponents[name]}}function checkForPendingRegisteredObjects(name){name=name.toUpperCase();if(_waitRegisteredComponents[name]){_waitRegisteredComponents[name].forEach(function(resolve){try{resolve(_registeredObjects[name])}catch(e){}});delete _waitRegisteredComponents[name]}}function loadScript(component,
name){return new Promise(function(resolve,reject){if(component.enabled!==false){var proms=[];var url=component.url;if(url)proms.push(helper.dom.loadFile(url));else helper.console.warning("Component initialization error, this components does not match with the minimal required parameters.",arguments);Promise.all(proms).then(function(){resolve({"name":name,"component":component})}).catch(reject)}else reject("Component is not enabled")})}function hasPermission(name){if(_permissions&&_permissions[name]){var perm=
_permissions[name];if(perm.required)return helper.object.getValue(_args.permissions,perm.required,false);else return true}else return true}function initializeComponents(components){for(var name in components){var component=components[name];name=name.toUpperCase();if(hasPermission(name)&&component.enabled!==false&&component.scrapers&&component.scrapers.indexOf(cookiePrefix)!==-1){component.name=name;if(component.files){var constructorComp=component.files.find(function(item){return item.isConstructor===
true});if(!constructorComp&&component.files.length>0)constructorComp=component.files[0];if(constructorComp){_loadedComponents[name]=component;_loadedComponents[name].loaded=false;loadComponent(name,constructorComp)}}}}}function loadComponent(name,component){loadScript(component,name).then(function(){_loadedComponents[name].loaded=true;if(_loadedComponents[name].events&&_loadedComponents[name].events.sucess)_loadedComponents[name].events.sucess();checkForPendingComponent(name)}).catch(function(msg){if(_loadedComponents[name].events&&
_loadedComponents[name].events.error)_loadedComponents[name].events.error(e)})}function registerObject(name,obj){name=name.toUpperCase();if(hasPermission(name))if(!_registeredObjects[name]){_registeredObjects[name]=obj;checkForPendingRegisteredObjects(name);return true}else{helper.console.warning("This object is already registered",arguments);return false}}function unregisterObject(name,obj){name=name.toUpperCase();if(_registeredObjects[name]&&_registeredObjects[name]===obj){delete _registeredObjects[name];
return true}else{helper.console.warning("This object is not registered",arguments);return false}}function getRegisteredObject(name){return _registeredObjects[name.toUpperCase()]}function getAsyncRegisteredObject(name){return new Promise(function(resolve,reject){if(_registeredObjects[name.toUpperCase()])resolve(_registeredObjects[name.toUpperCase()]);else{if(!_waitRegisteredComponents[name])_waitRegisteredComponents[name]=[];_waitRegisteredComponents[name].push(resolve)}})}function getPermissions(name){return new Promise(function(resolve,
reject){if(!(name instanceof Array))name=[name];var permissions=null;name.forEach(function(itemName){if(_args.permissions[itemName]){if(!permissions)permissions={};permissions[name]=_args.permissions[itemName]}else{itemName=itemName.toUpperCase();var key=Object.keys(_args.permissions).find(function(key){return key.toUpperCase()===itemName});if(_args.permissions[key]){if(!permissions)permissions={};permissions[itemName]=_args.permissions[key]}}});resolve(permissions)})}function getObjectConfig(name){return new Promise(function(resolve,
reject){if(name){name=name.toUpperCase();if(_loadedComponents[name])resolve(_loadedComponents[name]);else reject("This component is not loaded")}else reject("Name is null or undefined")})}function registerAPI(name,object){name=name.toUpperCase();if(hasPermission(name)){if(_registeredAPIS[name])_registeredAPIS[name]={};_registeredAPIS[name]=object;checkForPendingAPIs(name)}}function defineExternalProperties(){if(_args.owner){if(!_args.owner.registerComponentObject)Object.defineProperty(_args.owner,
"registerComponentObject",{"enumerable":false,"configurable":false,"writable":false,"value":registerObject});if(!_args.owner.unregisterComponentObject)Object.defineProperty(_args.owner,"unregisterComponentObject",{"enumerable":false,"configurable":false,"writable":false,"value":unregisterObject})}}function requirePanel(params){if(params&&params.constructorName&&_args.constructors[params.constructorName]){params.getAuthorization=_args.getAuthorization;return _args.constructors[params.constructorName](params)}}
function dispose(){var kvp=null;for(kvp in _registeredObjects)if(_registeredObjects[kvp]){if(_registeredObjects[kvp].destroy)_registeredObjects[kvp].destroy();if(_registeredObjects[kvp].dispose)_registeredObjects[kvp].dispose();unregisterObject(kvp,_registeredObjects[kvp])}for(kvp in _registeredComponents)if(_registeredComponents[kvp]){if(_registeredComponents[kvp].destroy)_registeredComponents[kvp].destroy();if(_registeredComponents[kvp].dispose)_registeredComponents[kvp].dispose();unregisterComponent(_registeredComponents[kvp])}detachHandlers();
_ref=null}initialize(args);Object.defineProperty(_ref,"register",{"enumerable":true,"configurable":false,"writable":false,"value":registerComponent});Object.defineProperty(_ref,"unregister",{"enumerable":true,"configurable":false,"writable":false,"value":unregisterComponent});Object.defineProperty(_ref,"registerObject",{"enumerable":true,"configurable":false,"writable":false,"value":registerObject});Object.defineProperty(_ref,"unregisterObject",{"enumerable":true,"configurable":false,"writable":false,
"value":unregisterObject});Object.defineProperty(_ref,"getRegisteredObject",{"enumerable":true,"configurable":false,"writable":false,"value":getRegisteredObject});Object.defineProperty(_ref,"getAsyncRegisteredObject",{"enumerable":true,"configurable":false,"writable":false,"value":getAsyncRegisteredObject});Object.defineProperty(_ref,"getPermissions",{"enumerable":true,"configurable":false,"writable":false,"value":getPermissions});Object.defineProperty(_ref,"getObjectConfig",{"enumerable":true,"configurable":false,
"writable":false,"value":getObjectConfig});Object.defineProperty(_ref,"registerAPI",{"enumerable":true,"configurable":false,"writable":false,"value":registerAPI});Object.defineProperty(_ref,"requirePanel",{"enumerable":true,"configurable":false,"writable":false,"value":requirePanel});Object.defineProperty(_ref,"getAPI",{"enumerable":true,"configurable":false,"writable":false,"value":getAPI});Object.defineProperty(_ref,"dispose",{"enumerable":true,"configurable":false,"writable":false,"value":dispose});
__instance__=_ref;executeAwaitServ();return _ref}try{Thinfinity!=undefined}catch(e){Thinfinity={}}Thinfinity.Component=Component;Object.defineProperty(Thinfinity.Component,"RegistrationServices",{"enumerable":false,"configurable":false,"writable":false,"value":RegistrationServices});Object.defineProperty(Thinfinity.Component,"setPermissions",{"enumerable":false,"configurable":false,"writable":false,"value":setPermissions});Object.defineProperty(Thinfinity.Component,"await",{"enumerable":false,"configurable":false,
"writable":false,"value":awaitService})})();
(function(){var _enumErrors=helper.object.createEnum({ERROR:-1,TIMEOUT:-2});function ComponentExtend(args){var _ref=this;var _args={"events":null};var _service=null;var _negotiationCommands={"registration":"component.require.registration","response":"component.registration.response"};var _name="thin.comp."+helper.utils.maskToGUID("xxx-x-xxx");var fireEvent=null;var _timeout={id:null,time:500,maxTries:25,count:0};var _registered=false;function initialize(args){helper.object.parseAttributes(_args,args);
var te=new Thinfinity.Events({"owner":_ref,"events":_args.events});fireEvent=te.fireEvent;attachHandlers();requireRegistration()}function attachHandlers(){helper.dom.addEvent(window,_negotiationCommands.response,registrationResponse)}function detachHandlers(){helper.dom.removeEvent(window,_negotiationCommands.response,registrationResponse)}function fireCustomEvent(name,data){window.dispatchEvent(new CustomEvent(name,data))}function requireRegistration(){if(!_registered){clearTimeout(_timeout.id);
fireCustomEvent(_negotiationCommands.registration,{});if(_timeout.maxTries===0||_timeout.count<_timeout.maxTries)_timeout.id=setTimeout(function(){requireRegistration()},_timeout.time);else registrationFails(_enumErrors.TIMEOUT,`Timeout, cannot 'require registration' service.`);_timeout.count++}}function registrationResponse(e){if(e.detail&&e.detail.owner&&e.detail.owner.register){_registered=true;clearTimeout(_timeout.id);_service=e.detail.owner;detachHandlers();var result=_service.register(_ref);
if(result===true)fireEvent("ready",{});else registrationFails(_enumErrors.ERROR,result)}}function registrationFails(code,message){fireEvent("fail",{code,message})}function requirePanel(params){if(_service)return _service.requirePanel(params);else helper.console.warning("Thinfinity.Component.RegistrationServices is not defined, please try later",arguments)}function getRegisteredObject(name){if(_service)return _service.getRegisteredObject(name);else helper.console.warning("Thinfinity.Component.RegistrationServices is not defined, please try later",
arguments)}function getAsyncRegisteredObject(name){return new Promise(function(resolve,reject){if(_service)resolve(_service.getRegisteredObject(name));else reject("Thinfinity.Component.RegistrationServices is not defined, please try later",arguments)})}function getObjectConfig(name){return new Promise(function(resolve,reject){if(_service)resolve(_service.getObjectConfig(name));else reject("Thinfinity.Component.RegistrationServices is not defined, please try later",arguments)})}function getPermissions(name){return new Promise(function(resolve,
reject){if(_service)resolve(_service.getPermissions(name));else reject("Thinfinity.Component.RegistrationServices is not defined, please try later",arguments)})}function destroy(){detachHandlers();var msg="disconnected";fireEvent("destroy",{"message":msg});fireEvent=null;_ref=null}Object.defineProperty(_ref,"requirePanel",{"enumerable":true,"configurable":false,"writable":false,"value":requirePanel});Object.defineProperty(_ref,"getRegisteredObject",{"enumerable":true,"configurable":false,"writable":false,
"value":getRegisteredObject});Object.defineProperty(_ref,"getAsyncRegisteredObject",{"enumerable":true,"configurable":false,"writable":false,"value":getAsyncRegisteredObject});Object.defineProperty(_ref,"getPermissions",{"enumerable":true,"configurable":false,"writable":false,"value":getPermissions});Object.defineProperty(_ref,"getObjectConfig",{"enumerable":true,"configurable":false,"writable":false,"value":getObjectConfig});Object.defineProperty(_ref,"name",{"enumerable":true,"configurable":false,
"get":function(){return _name}});Object.defineProperty(_ref,"eCodes",{"enumerable":true,"configurable":false,"get":function(){return _enumErrors}});Object.defineProperty(_ref,"destroy",{"enumerable":true,"configurable":false,"writable":false,"value":destroy});initialize(args);return this}try{Thinfinity!=undefined}catch(e){Thinfinity={}}if(Thinfinity.Component){Thinfinity.Component.Extend=ComponentExtend;if(!Thinfinity.Component.hasOwnProperty("eCodes"))Object.defineProperty(Thinfinity.Component,"eCodes",
{"enumerable":true,"configurable":false,"get":function(){return _enumErrors}})}})();
(function(){function TMenu(args){var _ref=this;var _isMobile=agentInfo.isMobile;var _eAlignmentTypes=helper.object.createEnum({HORIZONTAL:"horizontal",VERTICAL:"vertical"});var _args={"parentElement":null,"position":"left","visible":true,"draggable":true,"snap":true,"hookElement":null,"capturingMouse":null,"theme":"dark","initialLocation":null,"initialTacked":null,"autoTacked":null,"pinVisible":true,"autoIndexed":false,"oProperties":null,"data":null,"showCaptions":null,"events":{ready:null}};var _elems=
{"container":null,"pin":null,"pinContainer":null,"ulContainer":null,"bottomUlContainer":null,"separator":null,"collapseContainer":null,"subMenu":null,"headerBar":null,"menuIcon":null,"collapseIcon":null,"emptyContainer":null,"tackedContainer":null};let cp=window.cookiePrefix||"";var _key=`_ _ #thinfinity menu key# _ _${cp}`;var _settings={"pinSize":25,"threshold":_isMobile?25:1};var _defaultValues={"unit":"px","fontFamily":"Verdana","fontSize":"11pt","fontWeight":"100","fontStyle":"normal","fontSeparation":4,
"closeKeyCodes":[27],"initialPosX":0,"initialPosY":0,"align":_eAlignmentTypes.HORIZONTAL};var _data={"x":_defaultValues.initialPosX,"y":_defaultValues.initialPosY,"xpercent":0,"ypercent":0,"tacked":[],"toggled":[],"align":_defaultValues.align,"collapsed":false,"snapX":false,"snapY":false,"read":false};var _pos={"x":0,"y":0,"x1":0,"y1":0,"collisionx":null,"collisiony":null};var _leaving={"active":false,"timeoutId":null,"timeout":450};var _drag={"isDragging":false,"isDropped":false,"start":false};var _resizing=
false;var _snap={"threshold":!_isMobile?20:30,"left":0,"top":0,"right":0,"bottom":0,"x":false,"y":false,"detachThresholdMultiplier":2,setSnap:function(axis,state){if(typeof axis=="string"){this.x=axis=="x"?true:false;this.y=axis=="y"?true:false}else if(typeof axis=="boolean")this.x=this.y=axis;_data.snapX=this.x;_data.snapY=this.y}};var _dock={"threshold":!_isMobile?5:10,"iconSize":{"width":65,"height":44,"unit":_defaultValues.unit},"headerSize":12,"lastAlign":_defaultValues.align,"autoIndexed":false,
"firstTime":true};var _menuIcons={"visible":"thin-hide-sidebar","hidden":"thin-show-sidebar"};var _pinVisible=true;var _pinIcons={"extended":"cyb-angle-up","collapsed":"cyb-angle-down"};var _subMenu={"hook":false,"parentElem":null,"isClosing":false,"srcElem":null,"initPos":{"x":null,"y":null},"closeTimeout":5E3,"leaveTimeout":500,"timer":null};var _margin={"pinMenuBottom":3,"vertical":42,"horizontal":42,"menuText":90};var _size={"pinContainerHeight":28,"minSubWidth":80,"minMenuWidth":100};var _border=
{snapRadius:2,normalRadius:10,floatingRadius:30};var _time={"adjustSize":250,"freeSrcElem":50,"hold":500,"dblclick":450,"click":250};var _click={"times":0,"down":null,"threshold":!_isMobile?5:20,"dblclick":false,"position":{"x":0,"y":0},"timeoutId":null};var _isCollapsed=false;var _ready=false;var _toggles={};var _events={};var _autoIndex=0;var _uncollapsedTimeoutId=null;var _lastTime=0;var _warnWhenIsEmpty=true;var _disposed=false;var _currentWidth=()=>{return environment.currentWidth||environment.availWidth};
var _currentHeight=()=>{return environment.currentHeight||environment.availHeight};var fireEvent=null;var _defaultEventFire={async:25};var _showHeader={timeout:500,id:null};var _lastSize={width:0,height:0};function initialize(silent){if(!silent){helper.object.parseAttributes(_args,args);fireEvent=(new Thinfinity.Events({owner:_ref,events:_args.events})).fireEvent;if(!_args.hookElement)_args.hookElement=document;if(["left","right"].indexOf(_args.position)==-1)_args.position="left";if(!(_args.capturingMouse instanceof
Function))_args.capturingMouse=function(){};if(!_args.initialLocation)_args.initialLocation="top middle";_dock.autoIndexed=_args.autoIndexed===true?true:_dock.autoIndexed;if(Array.isArray(_args.initialTacked))_data.tacked=_args.initialTacked;if(!read()){var snapAxis=null,percentAxis=null;var locations=_args.initialLocation.split(" ");if(locations.length>0){_data.collapsed=true;let isTop=locations.indexOf("top")!==-1;let isLeft=locations.indexOf("left")!==-1;let isRight=locations.indexOf("right")!==
-1;let isBottom=locations.indexOf("bottom")!==-1;let isMiddle=locations.indexOf("middle")!==-1||locations.indexOf("center")!==-1;if(isMiddle&&!isTop&&!isLeft&&!isBottom&&!isRight){_data.snapX=_data.snapY=false;_data["ypercent"]=50;_data["xpercent"]=50;_data.x=0;_data.y=0;_data.align=_eAlignmentTypes.HORIZONTAL}else{if(isTop||isBottom){_data.align=_eAlignmentTypes.HORIZONTAL;_snap.y=_data.snapY=true;snapAxis="y";percentAxis="ypercent";if(isTop){_data[percentAxis]=0;_data[snapAxis]=0}else if(isBottom){_data[percentAxis]=
100;_data[snapAxis]=1}if(isMiddle)_data["xpercent"]=50}if(isLeft||isRight){_data.align=_eAlignmentTypes.VERTICAL;_snap.x=_data.snapX=true;snapAxis="x";percentAxis="xpercent";if(isRight){_data[percentAxis]=100;_data[snapAxis]=1}else if(isLeft){_data[percentAxis]=0;_data[snapAxis]=0}if(isMiddle)_data["ypercent"]=50}}_dock.lastAlign=_data.align}}if(!_args.parentElement)_args.parentElement=document.body;if(!_args.draggable){setPinX(_defaultValues.initialPosX);setPinY(_defaultValues.initialPosY)}_pinVisible=
_args.pinVisible===false?false:_pinVisible}buildMenu(silent);if(_args.oProperties){_args.data=normalize(_args.oProperties.properties);(function makeDockable(list){list.forEach(item=>{if(_args.autoTacked?.length>0){let id=item?.attributes?.id||null;let caption=item.caption||null;let icon=item?.attributes?.icon||null;if(!findItem(_args.autoTacked,id,caption,icon))item.dockable=true;else item.dockable=false}else item.dockable=true;if(item.items)makeDockable(item.items)})})(_args.data);addButtons(_args.data,
true)}environment.on("orientationChange",fixPosition);environment.on("resizestart",resizeStart);environment.on("resize",resize);environment.on("resizeend",resizeEnd);clearTimeout(_showHeader.id);checkPinMenuSize().then(()=>{_showHeader.id=setTimeout(()=>{if(_pinVisible)helper.style.remove(_elems.pinContainer,"initial-hidden");fireEvent("ready")},_showHeader.timeout);fixCaptionSize();fixPosition(true);adjustSizeAndPosition();updatePinMenuContainerValues();_disposed=false;_ready=true})}function checkPinMenuSize(){return new Promise(resolve=>
{let validateSize=()=>{return!(_elems.pinContainer.offsetWidth===0&&_elems.pinContainer.offsetHeight===0)};if(!validateSize()){let resizeObs=new ResizeObserver(()=>{if(validateSize()){resizeObs.unobserve(_elems.pinContainer);resolve()}});resizeObs.observe(_elems.pinContainer)}else resolve()})}function updateValuesFromCssRules(){}function findItem(list,id,caption,icon){let f=false;if(list&&list.length>0){let findBy=value=>{return list.find(v=>{return v.toUpperCase()==value})};if(id)f=findBy(id.toUpperCase());
if(!f&&caption)f=findBy(caption.toUpperCase());if(!f&&icon)f=findBy(icon.toUpperCase())}return f}function findProp(list,name){let propItem=null;if(list&&list.length>0){name=name.toUpperCase();let l=list.length;let i=0;while(!propItem&&i<l){let item=list[i];if(item?.attributes?.id?.toUpperCase()===name||item.action?.toUpperCase()===name||item.caption?.toUpperCase()===name||item?.attributes?.icon?.toUpperCase()===name)propItem=item;else if(item.items)propItem=findProp(item.items,name);i++}}return propItem}
function refresh(){if(_ready){_ready=false;write();dispose(true);initialize(true)}}function normalize(data){return data}function addElements(buttons){_args.data=_args.data.concat(buttons);addButtons(buttons)}function addButtons(buttons,silent){for(var i=0;i<buttons.length;i++)add(buttons,buttons[i],_elems.ulContainer,undefined,silent)}function setPinX(value,fromDrag){_data.x=value;if(fromDrag)_data.xpercent=_data.x*100/_currentWidth();helper.object.setValue(_elems,"pinContainer.style.left",value+
_defaultValues.unit)}function setPinY(value,fromDrag){_data.y=value;if(fromDrag)_data.ypercent=(_data.y+_elems.pinContainer.offsetHeight/2)*100/_currentHeight();helper.object.setValue(_elems,"pinContainer.style.top",value+_defaultValues.unit)}function read(){var temp=helper.storage.get(_key);if(temp)helper.object.parseAttributes(_data,temp);_dock.lastAlign=_data.align;_snap.x=_data.snapX;_snap.y=_data.snapY;_isCollapsed=_data.collapsed;_data.read=!!temp;return _data.read}function write(updatePerc){if(!_resizing)if(_elems?.pinContainer){_data.collapsed=
helper.style.hasClass(_elems.pinContainer,"collapsed");if(updatePerc||_data.collapsed){let w=_elems.pinContainer.offsetWidth||_lastSize.width;if(w)_data.xpercent=(_data.x+w/2)*100/_currentWidth();let h=_elems.pinContainer.offsetHeight||_lastSize.height;if(h)_data.ypercent=(_data.y+h/2)*100/_currentHeight()}let d={..._data};delete d.x;delete d.y;if(d.align==_eAlignmentTypes.VERTICAL)d.ypercent=50;else if(d.align==_eAlignmentTypes.HORIZONTAL)d.xpercent=50;helper.storage.set(_key,d)}}function getCoords(e){return{"x":typeof e.pageX!=
"undefined"?e.pageX:(e.changedTouches||e.touches)[0].pageX,"y":typeof e.pageY!="undefined"?e.pageY:(e.changedTouches||e.touches)[0].pageY}}function setSubmenuTimeout(timeout){_subMenu.timer=setTimeout(function(){closeSubMenus();_subMenu.timer=null},timeout||_subMenu.closeTimeout)}function clearSubmenuTimeout(){clearTimeout(_subMenu.timer)}function buildMenu(silent){if(_args.parentElement){var mousedown=function(e){e=e||window.event;e.stopPropagation();clearTimeout(_click.timeoutId);var pos=getCoords(e);
if(_drag.isDragging||_drag.start)return;if(_click.down!=null&&(new Date).getTime()-_click.down<_time.dblclick&&Math.abs(_click.position.x-pos.x)<_click.threshold&&Math.abs(_click.position.y-pos.y)<_click.threshold){_click.dblclick=true;_click.position.x=pos.x;_click.position.y=pos.y}else{_click.down=(new Date).getTime();_click.dblclick=false;_click.position.x=pos.x;_click.position.y=pos.y}_args.capturingMouse(true);_drag.start=true;_data.read=true;_pos.x1=pos.x;_pos.y1=pos.y;_drag.isDragging=false;
_drag.isDropped=false;_pos.collisionx=_pos.collisiony=null;if(e&&e.type&&e.type.indexOf("touch")!==-1){helper.dom.addEvent(_args.hookElement,"touchmove",ondrag,{"passive":false});helper.dom.addEvent(_args.hookElement,"touchend",ondrop,{"passive":false});helper.dom.addEvent(_args.hookElement,"touchleave",ondrop,{"passive":false})}else{helper.dom.addEvent(_args.hookElement,"mousemove",ondrag);helper.dom.addEvent(_args.hookElement,"mouseup",ondrop);helper.dom.addEvent(_args.hookElement,"mouseleave",
ondrop)}return false};var mouseup=function(e){setTimeout(function(){_drag.isDragging=false;_drag.start=false;clearTimeout(_click.timeoutId)},100)};let extraClass="";if(_data.collapsed){extraClass="collapsed ";if(_data.snapY)extraClass+=_data.ypercent<50?"toTheTop":"toTheBotTom";else if(_data.snapX)extraClass+=_data.xpercent<50?"toTheLeft":"toTheRight"}let x=_data.xpercent*_currentWidth()/100;let y=_data.ypercent*_currentHeight()/100;_elems.pinContainer=helper.dom.appendJsonElement({"parentElement":_args.parentElement,
"type":"div","attributes":{"id":"thin-menu-pin-container","class":helper.string.format(`thin-menu-pin-container thin-menu-pin-container-background uitaptarget ${_args.theme} ${!_pinVisible?"hidden":""} initial-hidden ${_isMobile?"mobile":""} ${extraClass} ${_data.align||_defaultValues.align}`),"style":helper.string.format("top:{0}px;left:{1}px;",Math.max(y,_defaultValues.initialPosY),Math.max(x,_defaultValues.initialPosX))}});_elems.tackedContainer=helper.dom.appendJsonElement({parentElement:_elems.pinContainer,
type:"div",attributes:{class:"tacked-container"}});_elems.headerBar=helper.dom.appendJsonElement({"parentElement":_elems.pinContainer,"type":"div","attributes":{"class":"header-bar"}});var openCloseMenuHandler=function(e){(helper.style.hasClass(_elems.container,"visible")?hide:show)()};_elems.menuIcon=helper.dom.appendJsonElement({parentElement:_elems.headerBar,type:"div",attributes:{class:"menu-icon",title:"Show/Hide Menu Option"},events:{click:openCloseMenuHandler,touchend:openCloseMenuHandler}});
_elems.collapseIcon=helper.dom.appendJsonElement({parentElement:_elems.headerBar,type:"div",attributes:{class:"collapse-icon"},events:{click:collapseToggle,touchend:collapseToggle}});if(_args.draggable){helper.dom.addEvent(_elems.pinContainer,"touchstart",mousedown,{"passive":false});helper.dom.addEvent(_elems.pinContainer,"mousedown",mousedown);helper.dom.addEvent(_elems.pinContainer,"touchend",mouseup,{"passive":false});helper.dom.addEvent(_elems.pinContainer,"mouseup",mouseup)}_elems.container=
helper.dom.appendJsonElement({"parentElement":_args.parentElement,"type":"div","attributes":{"id":"thin-menu-container","class":helper.string.format("thin-menu-container not-visible not-visible-none uitaptarget {0} {1}",_args.theme,_args.position)}});_elems.ulContainer=helper.dom.appendJsonElement({"parentElement":_elems.container,"type":"ul","attributes":{"class":"root visible nofade"}});_elems.liTitle=helper.dom.appendJsonElement({"parentElement":_elems.ulContainer,"type":"li","attributes":{"class":"root-name"}});
helper.dom.appendJsonElement({"parentElement":_elems.liTitle,"type":"span",content:"Toolbar"});_elems.closeMenu=helper.dom.appendJsonElement({"parentElement":_elems.liTitle,"type":"div","attributes":{"class":"closeMenu  thin-cancel",title:consts.Close},"events":{"click":openCloseMenuHandler,"touchend":openCloseMenuHandler}});_elems.bottomUlContainer=helper.dom.appendJsonElement({"parentElement":_elems.container,"type":"ul","attributes":{"class":"bottom-root visible nofade"}});_size.pinContainerHeight=
helper.size.getHeight(_elems.pinContainer)+_margin.pinMenuBottom}}function getPinContainerAlignment(defaultValue){if(_elems?.pinContainer)return _elems.pinContainer.className.indexOf(_eAlignmentTypes.HORIZONTAL)!==-1?_eAlignmentTypes.HORIZONTAL:_elems.pinContainer.className.indexOf(_eAlignmentTypes.VERTICAL)!==-1?_eAlignmentTypes.VERTICAL:defaultValue||_eAlignmentTypes.HORIZONTAL;else return defaultValue?defaultValue:_eAlignmentTypes.HORIZONTAL}function shouldSnap(x,y,width,height,alignment,threshold){alignment=
typeof alignment=="string"?alignment:_dock.lastAlign;threshold=typeof threshold=="number"?threshold:_snap.threshold*(_snap.x||_snap.y?_snap.detachThresholdMultiplier:1);var x=x,y=y,snapX=false,snapY=false;let cw=_currentWidth();let ch=_currentHeight();if(alignment==_eAlignmentTypes.VERTICAL)if(x-threshold<=0){x=0;snapX=true}else{if(x+threshold+width>=cw){x=cw-width;snapX=true}}else if(y-threshold<=0){y=0;snapY=true}else if(y+threshold+height>=ch){y=ch-height;snapY=true}return{x:x,y:y,snapX:snapX,
snapY:snapY}}function ondrag(e){e=e||window.event;e.preventDefault();e.stopPropagation();var pos=getCoords(e);if(!_drag.isDragging&&(!(_snap.x||_snap.y)&&(Math.abs(pos.y-_pos.y1)>5||Math.abs(pos.x-_pos.x1)>5)||(_snap.x&&(Math.abs(pos.x-_pos.x1)>_settings.threshold||Math.abs(pos.y-_pos.y1)>5)||_snap.y&&(Math.abs(pos.y-_pos.y1)>_settings.threshold||Math.abs(pos.x-_pos.x1)>5))))_drag.isDragging=true;if(!_drag.isDragging){var tElem=document.elementFromPoint(pos.x,pos.y);if(tElem&&tElem.className.indexOf("primary-handler")!==
-1){detachHandler();return true}}if(_drag.isDragging){_pos.x=_pos.x1-pos.x;_pos.y=_pos.y1-pos.y;let cw=_currentWidth();let ch=_currentHeight();let elemPos=getElementPosition(_elems.pinContainer);var y=elemPos.top-_pos.y;var x=elemPos.left-_pos.x;var expectedAlignment=getAlignment(x,y);let xfw=1;let xfh=1;var currentAlignment=!expectedAlignment?expectedAlignment:getPinContainerAlignment();if(expectedAlignment!=_dock.lastAlign)if(currentAlignment!==_eAlignmentTypes.HORIZONTAL)xfw=1.17;else xfh=.89;
var width=Math.ceil((expectedAlignment==currentAlignment?_elems.pinContainer.offsetWidth:_elems.pinContainer.offsetHeight)*xfw)+1;var height=Math.ceil((expectedAlignment==currentAlignment?_elems.pinContainer.offsetHeight:_elems.pinContainer.offsetWidth)*xfh);var forceSnap=_dock.lastAlign!=expectedAlignment;var _threshold=_snap.threshold*(_snap.x||_snap.y?_snap.detachThresholdMultiplier:1);var ssnap=shouldSnap(x,y,width,height,expectedAlignment,forceSnap?_threshold*5:_threshold);if(expectedAlignment==
_eAlignmentTypes.VERTICAL)if(ssnap.snapX){x=ssnap.x;_snap.setSnap("x",true)}else{if(_snap.x)_snap.setSnap(false)}else if(ssnap.snapY){y=ssnap.y;_snap.setSnap("y",true)}else if(_snap.y)_snap.setSnap(false);if(!_snap.x)_pos.x1=pos.x;if(!_snap.y)_pos.y1=pos.y;var collisiony=true;var collisionx=true;if(x<0)x=0;else if(x+width>=cw)x=cw-(width-1);else collisionx=false;if(y<0)y=0;else if(y+height>ch)y=ch-height;else collisiony=false;_pos.collisionx=collisionx?_pos.collisionx!=null?_pos.collisionx:pos.x:
null;_pos.collisiony=collisiony?_pos.collisiony!=null?_pos.collisiony:pos.y:null;let r=renderPinMenu(x,y,undefined,false);if(r.fixPosition){pos=checkPosition(_data.xpercent,_data.ypercent,_snap.x,_snap.y);x=pos.x;y=pos.y}setPinX(x,true);setPinY(y,true);if(_elems.subMenu){let elemPos=getElementPosition(_elems.subMenu);_elems.subMenu.style.top=elemPos.top-_pos.y+_defaultValues.unit;_elems.subMenu.style.left=elemPos.left-_pos.x+_defaultValues.unit}}return false}function ondrop(e){e=e||window.event;e.preventDefault();
e.stopPropagation();_drag.start=false;var pos=getCoords(e);var tElem=document.elementFromPoint(pos.x,pos.y);if(!_drag.isDragging&&tElem&&tElem.className.indexOf("primary-handler")!==-1){detachHandler();return true}var tDragging=_drag.isDragging;_drag.isDragging=false;detachHandler();if(tDragging)_drag.isDropped=true;if(_leaving.active)return;if(!tDragging){if(tElem&&tElem.className.indexOf("icon")!==-1){_drag.isDropped=false;return}}else write(true);_args.capturingMouse(false);return false}function detachHandler(){helper.dom.removeEvent(_args.hookElement,
"touchmove",ondrag,{"passive":false});helper.dom.removeEvent(_args.hookElement,"touchend",ondrop,{"passive":false});helper.dom.removeEvent(_args.hookElement,"touchleave",ondrop,{"passive":false});helper.dom.removeEvent(_args.hookElement,"mousemove",ondrag);helper.dom.removeEvent(_args.hookElement,"mouseup",ondrop);helper.dom.removeEvent(_args.hookElement,"mouseleave",ondrop);_drag.start=false}function calcPosition(xp,yp){let ow=_elems.pinContainer.offsetWidth||_lastSize.width;let oh=_elems.pinContainer.offsetHeight||
_lastSize.height;return{x:_currentWidth()*xp/100-ow/2,y:_currentHeight()*yp/100-oh/2}}function checkPosition(xp,yp,snapX,snapY,alignment,nocheck){let cw=_currentWidth();let ch=_currentHeight();let calcPosition=(xp,yp,snapX,snapY,alignment)=>{alignment=typeof alignment=="string"?alignment:_dock.lastAlign;let pos={x:0,y:0,snapX,snapY,alignment};let ow=_elems.pinContainer.offsetWidth||_lastSize.width;let oh=_elems.pinContainer.offsetHeight||_lastSize.height;let currentAlignment=getPinContainerAlignment(alignment);
let width=alignment==currentAlignment?ow:oh;let height=alignment==currentAlignment?oh:ow;let x=cw*xp/100-width/2;let y=ch*yp/100-height/2;if(snapX)pos.x=x>50?cw-width-1:0;else if(x<=0){x=0;pos.snapX=true}else if(x+width>=cw){pos.x=cw-width-1;pos.snapX=true}else pos.x=x;if(snapY)if(y>50)pos.y=ch-height;else pos.y=0;else if(y<=0){pos.y=0;pos.snapY=true}else if(y+height>=ch){pos.y=ch-height;pos.snapY=true}else pos.y=y;if(pos.snapY&&alignment==_eAlignmentTypes.VERTICAL)if(!pos.snapX)pos=calcPosition(xp,
yp,pos.snapX,pos.snapY,_eAlignmentTypes.HORIZONTAL);else{if(!nocheck)pos.snapY=false}else if(pos.snapX&&alignment==_eAlignmentTypes.HORIZONTAL)if(!pos.snapY)pos=calcPosition(xp,yp,pos.snapX,pos.snapY,_eAlignmentTypes.VERTICAL);else if(!nocheck)pos.snapX=false;return pos};return calcPosition(xp,yp,snapX,snapY,alignment)}function fixPosition(nocheck){var pos=checkPosition(_data.xpercent,_data.ypercent,_snap.x,_snap.y,undefined,nocheck);if(pos.snapX)_snap.setSnap("x",true);if(pos.snapY)_snap.setSnap("y",
true);let verify=_dock.lastAlign!=pos.alignment;renderPinMenu(pos.x,pos.y,null,false,pos.alignment);if(!_ready||verify){pos=checkPosition(_data.xpercent,_data.ypercent,_snap.x,_snap.y,undefined,true);setPinX(pos.x);setPinY(pos.y);write()}}function resizeStart(e){_resizing=true}function updatePinMenuContainerValues(){let ow=_elems.pinContainer.offsetWidth;let oh=_elems.pinContainer.offsetHeight;if(ow!==0&&oh!==0){_lastSize.width=ow;_lastSize.height=oh}}function resize(e){updatePinMenuContainerValues();
if(!adjustSizeAndPosition()){let pos=calcPosition(_data.xpercent,_data.ypercent);setPinX(pos.x);setPinY(pos.y)}}function resizeEnd(){_resizing=false}function onCollapseEnd(){clearTimeout(_uncollapsedTimeoutId);helper.dom.removeEvent(_elems.pinContainer,"transitionend",onCollapseEnd);helper.style.removeClass(_elems.pinContainer,"uncollapsed animated");let elemPos=getElementPosition(_elems.pinContainer);_data.y=elemPos.top;_data.x=elemPos.left;let w=_elems.pinContainer.offsetWidth||_lastSize.width;
if(w)_data.xpercent=(_data.x+w/2)*100/_currentWidth();let h=_elems.pinContainer.offsetHeight||_lastSize.height;if(h)_data.ypercent=(_data.y+h/2)*100/_currentHeight();fixPosition()}function collapseToggle(e){if(!_drag.isDropped&&!_drag.isDragging){detachHandler();if(e)e.preventDefault();_drag.start=false;let t=Date.now();if(!_lastTime)_lastTime=0;if(t-_click.down<500&&t-_lastTime>_time.click){helper.dom.addEvent(_elems.pinContainer,"transitionend",onCollapseEnd);_lastTime=t;_data.collapsed=helper.style.hasClass(_elems.pinContainer,
"collapsed");helper.style.addClass(_elems.pinContainer,"animated");if(_data.collapsed)helper.style.replace(_elems.pinContainer,"collapsed","uncollapsed");else helper.style.replace(_elems.pinContainer,"uncollapsed","collapsed");renderPinMenu(undefined,undefined,true,false);clearTimeout(_uncollapsedTimeoutId);_uncollapsedTimeoutId=setTimeout(()=>{onCollapseEnd()},500)}}}function getAlignment(x,y){var align=_dock.lastAlign;let ow=_elems.pinContainer.offsetWidth||_lastSize.width;let oh=_elems.pinContainer.offsetHeight||
_lastSize.height;if((x-_dock.threshold<=0||x+_dock.threshold+ow>=_currentWidth()&&x>0)&&!_snap.y)align=_eAlignmentTypes.VERTICAL;else if((y-_dock.threshold<=0||y+_dock.threshold+oh>=_currentHeight()&&x>0)&&!_snap.x)align=_eAlignmentTypes.HORIZONTAL;return align}function getElementPosition(elem){let r={left:0,top:0};if(elem){let cssStyle=window.getComputedStyle(elem,"style");if(cssStyle.getPropertyValue("display")==="none")try{r.left=parseFloat(cssStyle.getPropertyValue("left").replace("px",""));r.top=
parseFloat(cssStyle.getPropertyValue("top").replace("px",""))}catch(err){}else{r.left=elem.offsetLeft;r.top=elem.offsetTop}}return r}function getElementSize(elem){let r={width:0,height:0};if(elem){let cssStyle=window.getComputedStyle(elem,"style");if(cssStyle.getPropertyValue("display")==="none")try{r.width=parseFloat(cssStyle.getPropertyValue("width").replace("px",""));r.height=parseFloat(cssStyle.getPropertyValue("height").replace("px",""))}catch(err){}else{r.width=elem.offsetWidth;r.height=elem.offsetHeight}}return r}
function renderPinMenu(x,y,switchCollapsed,writeData,alignment,animate){let assignPos=false;closeSubMenus();var tl=tr=br=bl=_border.normalRadius;x=typeof x!="undefined"?x:_elems.pinContainer.offsetLeft;y=typeof y!="undefined"?y:_elems.pinContainer.offsetTop;let ow=_elems.pinContainer.offsetWidth||_lastSize.width;let oh=_elems.pinContainer.offsetHeight||_lastSize.height;let isTop=y<=0;let isBottom=!isTop&&y+oh>=_currentHeight();let isLeft=x<=0;let isRight=!isLeft&&x+ow>=_currentWidth()-5;var cElems=
_elems.pinContainer.querySelectorAll(".tacked.icon:not(.hidden)");if(cElems.length>0)if(_pinVisible&&helper.style.hasClass(_elems.pinContainer,"hidden")){if(_isCollapsed){_isCollapsed=false;switchCollapsed=true;forceCollapsed=false}helper.style.removeClass(_elems.pinContainer,"hidden")}else if(!_pinVisible)helper.style.addClass(_elems.pinContainer,"hidden");switchCollapsed=switchCollapsed===true?switchCollapsed:false;_isCollapsed=helper.style.hasClass(_elems.pinContainer,"collapsed");var align=_dock.lastAlign;
align=typeof alignment==="string"?alignment:getAlignment(x,y);if(isTop)tl=tr=_border.snapRadius;else if(isBottom)bl=br=_border.snapRadius;else if(isLeft)tl=bl=_border.snapRadius;else if(isRight)tr=br=_border.snapRadius;if(!isTop&&!isBottom&&!isLeft&&!isRight){helper.style.replace(_elems.pinContainer,"pinned","floating");tl=tr=br=bl=_border.floatingRadius}else helper.style.replace(_elems.pinContainer,"floating","pinned");_elems.pinContainer.style.borderRadius=`${tl}pt ${tr}pt ${br}pt ${bl}pt`;tl=tr=
br=bl=0;let collapsedTo="";let availCollapsedTo=["toTheTop","toTheBottom","toTheLeft","toTheRight"];let elemPos=getElementPosition(_elems.pinContainer);switch(align){case _eAlignmentTypes.HORIZONTAL:helper.style.replace(_elems.menuIcon,"cyb-h-ellipsis-vertical","cyb-h-ellipsis");helper.style.remove(_elems.collapseIcon,"thin-angle-right thin-angle-left");_elems.headerBar.style.removeProperty("margin-top");helper.style.removeClass(_elems.pinContainer,"right left float");if(isBottom){tl=tr=_border.normalRadius;
helper.style.replace(_elems.pinContainer,"top","bottom");if(_isCollapsed)helper.style.replace(_elems.collapseIcon,"thin-angle-down","thin-angle-up");else helper.style.replace(_elems.collapseIcon,"thin-angle-up","thin-angle-down")}else{br=bl=_border.normalRadius;helper.style.replace(_elems.pinContainer,"bottom","top");if(_isCollapsed)helper.style.replace(_elems.collapseIcon,"thin-angle-up","thin-angle-down");else helper.style.replace(_elems.collapseIcon,"thin-angle-down","thin-angle-up")}if(_isCollapsed)collapsedTo=
elemPos.top<environment.availHeight/2?"toTheTop":"toTheBottom";break;case _eAlignmentTypes.VERTICAL:helper.style.remove(_elems.collapseIcon,"thin-angle-up thin-angle-down");helper.style.replace(_elems.menuIcon,"cyb-h-ellipsis","cyb-h-ellipsis-vertical");helper.style.removeClass(_elems.pinContainer,"top bottom float");if(isRight){helper.style.replace(_elems.pinContainer,"left","right");tl=bl=_border.normalRadius;if(_isCollapsed)helper.style.replace(_elems.collapseIcon,"thin-angle-right","thin-angle-left");
else helper.style.replace(_elems.collapseIcon,"thin-angle-left","thin-angle-right")}else{tr=br=_border.normalRadius;helper.style.replace(_elems.pinContainer,"right","left");if(_isCollapsed)helper.style.replace(_elems.collapseIcon,"thin-angle-left","thin-angle-right");else helper.style.replace(_elems.collapseIcon,"thin-angle-right","thin-angle-left")}if(_isCollapsed)collapsedTo=elemPos.left<environment.availWidth/2?"toTheLeft":"toTheRight";break}_elems.headerBar.style.borderRadius=`${tl}pt ${tr}pt ${br}pt ${bl}pt`;
if(collapsedTo!==""){availCollapsedTo.splice(availCollapsedTo.indexOf(collapsedTo),1);switch(collapsedTo){case "toTheTop":setPinY(0);break;case "toTheBottom":setPinY(environment.availHeight-oh);break;case "toTheLeft":setPinX(0);break;case "toTheRight":setPinX(environment.availWidth-ow);break}assignPos=true}helper.style.replace(_elems.pinContainer,availCollapsedTo.join(" "),collapsedTo);let fp=false;if(align!=_dock.lastAlign)if(_dock.lastAlign===_eAlignmentTypes.HORIZONTAL&&isRight){_snap.x=true;_data.xpercent=
100;_data.ypercent=y*100/_currentHeight();fp=true}else if(_dock.lastAlign===_eAlignmentTypes.VERTICAL&&!isTop){_snap.y=true;_data.ypercent=100;_data.xpercent=x*100/_currentWidth();fp=true}_dock.firstTime=false;if(align===_eAlignmentTypes.HORIZONTAL){_elems.pinContainer.style.minWidth=cElems.length*_dock.iconSize.width+_margin.horizontal+"px";assignPos=true}else _elems.pinContainer.style.minWidth="unset";if(writeData!==false)writeData=_dock.lastAlign!=align||_data.collapsed!=_isCollapsed;_dock.lastAlign=
align;_data.align=align;if(!helper.style.hasClass(_elems.pinContainer,align))helper.style.replace(_elems.pinContainer,align===_eAlignmentTypes.VERTICAL?_eAlignmentTypes.HORIZONTAL:_eAlignmentTypes.VERTICAL,align);var uncollapseElem=_elems.pinContainer.querySelector(".uncollapseControl");var collapseElem=_elems.pinContainer.querySelector(".collapseControl");helper.style.replace(uncollapseElem,align===_eAlignmentTypes.VERTICAL?"thin-triangle-right":"thin-chevron-down",align===_eAlignmentTypes.VERTICAL?
"thin-chevron-down":"thin-triangle-right");helper.style.replace(collapseElem,align===_eAlignmentTypes.VERTICAL?"thin-triangle-left":"thin-chevron-up",align===_eAlignmentTypes.VERTICAL?"thin-chevron-up":"thin-triangle-left");if(_warnWhenIsEmpty&&_elems.tackedContainer.childNodes.length===0)_elems.emptyContainer=helper.dom.appendJsonElement({parentElement:_elems.tackedContainer,type:"div",attributes:{class:"tacked icon empty-tacked-elem"},content:consts.emptyTackedElements});if(align===_eAlignmentTypes.VERTICAL)_elems.headerBar.style.marginTop=
`${(helper.size.getHeight(_elems.pinContainer)-helper.size.getHeight(_elems.headerBar))/2}px`;if(assignPos){pos=checkPosition(_data.xpercent,_data.ypercent,_snap.x,_snap.y,undefined,true);setPinX(pos.x);setPinY(pos.y);write()}if(writeData){_data.collapsed=_isCollapsed;write()}return{assignPos,fixPosition:fp}}function leaving(){clearTimeout(_leaving.timeoutId);_leaving.active=true;_leaving.timeoutId=setTimeout(function(){_leaving.active=false},_leaving.timeout)}function show(){resetMenuBackToRoot();
helper.style.removeClass(_elems.container,"not-visible-none");setTimeout(function(){helper.style.replace(_elems.container,"not-visible","visible")},5)}function showPin(){helper.style.replace(_elems.pinContainer,"collapsed","uncollapsed");clearTimeout(_uncollapsedTimeoutId);_uncollapsedTimeoutId=setTimeout(()=>{onCollapseEnd()},500)}function hidePin(){helper.style.replace(_elems.pinContainer,"uncollapsed","collapsed");fixPosition()}function onHideEnd(){helper.dom.removeEvent(_elems.container,"transitionend",
onHideEnd);if(helper.style.hasClass(_elems.container,"not-visible"))helper.style.addClass(_elems.container,"not-visible-none")}function hide(){if(helper.style.hasClass(_elems.container,"visible")){helper.dom.addEvent(_elems.container,"transitionend",onHideEnd);helper.style.replace(_elems.container,"visible","not-visible")}}function preventDefaultWrapper(callback,ctx){return function(e){e=e||window.event;if(e.preventDefault)e.preventDefault();callback.call(ctx,e)}}function getOptions(data,id){if(id&&
data){var item=data.find(function(item){return item.attributes.id==id});if(item)return item.items;else{var found=null;for(var i=0;i<data.length&&found===null;i++)if(data[i].items)found=getOptions(data[i].items,id);return found}}else return null}function buildPinSubMenu(data,elem){if(data){if(elem===_subMenu.parentElem)return;if(_subMenu.initPos.x===null&&_subMenu.initPos.y===null){let elemPos=getElementPosition(elem);_subMenu.initPos.x=elemPos.left;_subMenu.initPos.y=elemPos.top}var render=function(){_subMenu.parentElem=
elem;var unit=_dock.iconSize.unit;var align=_eAlignmentTypes.VERTICAL;var container=helper.dom.appendJsonElement({"parentElement":_args.parentElement,"type":"div","attributes":{"class":helper.string.format("thin-sub-menu-pin-container thin-menu-pin-container-background uitaptarget {0} {1}",_args.theme,align),"style":helper.string.format("left:{0}{2};top:{1}{2};",-window.width,-window.height,unit)}});for(var i=0;i<data.length;i++)addSubTackElem(container,data[i]);var isHorizontal=helper.style.hasClass(_elems.pinContainer,
_eAlignmentTypes.HORIZONTAL);let elemPos=getElementPosition(_elems.pinContainer);var x=elemPos.left;var y=elemPos.top;var h=container.offsetHeight;var w=container.offsetWidth;if(isHorizontal){x=x+_subMenu.initPos.x;if(environment.availWidth-x<w)x=environment.availWidth-w-1;var tH=y;var bH=environment.availHeight-y-_elems.pinContainer.offsetHeight;if(tH>bH&&bH<=h)y=Math.max(y-h+1,0);else y=bH<h?environment.availHeight-h:y+_elems.pinContainer.offsetHeight-1}else{y=y+_subMenu.initPos.y;if(environment.availHeight-
y<h)y=environment.availHeight-h-1;var lW=x;var rW=environment.availWidth-x-_elems.pinContainer.offsetWidth;if(lW>rW&&rW<=w)x=Math.max(x-w+1,0);else x=rW<w?environment.availWidth-w:x+_elems.pinContainer.offsetWidth-1}container.style.left=x+_defaultValues.unit;container.style.top=y+_defaultValues.unit;_elems.subMenu=container;if(!_subMenu.hook){helper.dom.addEvent(_args.hookElement,"keydown",keydown_handler);helper.dom.addEvent(_args.hookElement,"mousedown",mousedown_handler);helper.dom.addEvent(_args.hookElement,
"touchstart",mousedown_handler,{"passive":false})}helper.dom.addEvent(_elems.subMenu,"mouseenter",clearSubmenuTimeout);helper.dom.addEvent(_elems.subMenu,"mouseleave",function(){setSubmenuTimeout(_subMenu.leaveTimeout)});setSubmenuTimeout()};if(_elems.subMenu!=null)closeSubMenus(render,"fast");else render()}}function addTackElem(elem,obj,silent,verifySize){let response=true;if(_elems.emptyContainer){_elems.emptyContainer.parentElement.removeChild(_elems.emptyContainer);_elems.emptyContainer=null}var id=
"tacked_"+elem.id;let icon=_elems.tackedContainer.querySelector(`#${id}`);let iElem=null;if(elem)iElem=elem.querySelector(".icon");var srcElem=null;var lastTime=Date.now();var pElems=_elems.tackedContainer.querySelectorAll("div.tacked.icon");var mousedown_handler=function(e){setTimeout(function(){srcElem=null},_time.freeSrcElem);if(srcElem!==null)return;var t=Date.now();if(!_drag.isDropped&&!_drag.isDragging){detachHandler();e=e||window.event;e.preventDefault();e.stopPropagation();if(t-_click.down<
500&&t-lastTime>_time.click){lastTime=t;var options=getOptions(_args.data,elem.id);if(!options){closeSubMenus();elem.dispatchEvent(new Event("click"));_args.capturingMouse(false)}else{srcElem=e.srcElement||e.target;_subMenu.initPos.x=null;_subMenu.initPos.y=null;buildPinSubMenu(options,srcElem)}}return false}};var idx=typeof obj.index!="undefined"?obj.index:pElems.length?pElems[pElems.length-1].idx+10:10;var visible=helper.object.getValue(obj,"visible",true);var title=helper.object.getValue(obj,"tackOptions.title",
obj.title||obj.caption);var iconClass=helper.object.getValue(obj,"tackOptions.icon",iElem?iElem.className.replace("icon ",""):"");if(visible&&silent)iconClass+=" silent";if(icon){icon.className="tacked icon "+iconClass+(!visible?" hidden ":"")+" "+helper.object.getValue(obj,"attributes.class","");icon.querySelector("div").content=obj.caption}else{icon=helper.dom.createJsonElement({"type":"div","attributes":{"class":"tacked icon "+iconClass+(!visible?" thin-empty-space ":"")+" "+helper.object.getValue(obj,
"attributes.class",""),"id":id,"title":title,"idx":idx},"events":{"click":mousedown_handler,"touchend":{"handler":mousedown_handler,"options":{"passive":false}}}});if(_args.showCaptions!==false)helper.dom.appendJsonElement({parentElement:icon,type:"div",attributes:{class:""},content:obj.caption});helper.dom.appendJsonElement({parentElement:icon,type:"div",attributes:{class:"box"}})}var pElem=null;var i=0,c=true;while(i<pElems.length&&c&&idx!=-1){if(pElems[i].idx>idx||pElems[i].idx===-1){pElem=pElems[i];
c=false}i++}if(helper.style.hasClass(elem,"selected"))helper.style.addClass(icon,"selected");if(!helper.object.getValue(obj,"toggleOptions.decoration",true))helper.style.addClass(icon,"nodecoration");if(!pElem)_elems.tackedContainer.appendChild(icon);else _elems.tackedContainer.insertBefore(icon,pElem);if(!silent)if(!adjustSizeAndPosition())fixPosition();let res=checkSize(verifySize);if(res?.x<0||res?.y<0){removeTackElem(obj.attributes,silent);response=false}return response}function checkSize(dontFixSize){let min=
0;let elemsCount=_elems.pinContainer.querySelectorAll(".tacked").length;var currentAlignment=getPinContainerAlignment();let ow=_elems.pinContainer.offsetWidth||_lastSize.width;let oh=_elems.pinContainer.offsetHeight||_lastSize.height;if(currentAlignment===_eAlignmentTypes.HORIZONTAL){let width=ow;min=(elemsCount+1)*_dock.iconSize.width;if(width>0&&width<min){let cw=_currentWidth();let x=null;if(min+_data.x>cw)x=cw-min;else if(_data.x<=_dock.iconSize.width/2)x=_data.x;if(!dontFixSize&&x<0)x=0;return{x}}}else if(currentAlignment===
_eAlignmentTypes.VERTICAL){let pos=calcPosition(_data.xpercent,_data.ypercent);let height=oh+10;let ch=_currentHeight();let y=null;let my=Math.max(_data.y,pos.y);if(height+_data.y>ch)y=ch-height;else if(my<=_dock.iconSize.height/2)y=_data.y;if(!dontFixSize&&y<0)_data.y=0;return{y}}return null}function adjustSizeAndPosition(){let res=checkSize();if(res)if(res.x){setPinX(res.x);write();return true}else if(res.y){setPinY(res.y);write();return true}}function addStateButton(obj,id,silent){var id="tacked_"+
id;let icon=_elems.tackedContainer.querySelector(`#${id}`);var pElems=_elems.tackedContainer.querySelectorAll("div.tacked.icon");var idx=typeof obj.index!="undefined"?obj.index:pElems.length?pElems[pElems.length-1].idx+10:10;var visible=helper.object.getValue(obj,"visible",true);var title=helper.object.getValue(obj,"tackOptions.title",obj.title||obj.caption);var iconClass=helper.object.getValue(obj,"attributes.icon","")+" state";if(visible&&silent)iconClass+=" silent";if(icon){icon.className="tacked icon "+
iconClass+(!visible?" hidden ":"")+" "+helper.object.getValue(obj,"attributes.class","");icon.querySelector("div").content=obj.caption}else{icon=helper.dom.createJsonElement({"type":"div","attributes":{"class":"tacked icon "+iconClass+(!visible?" hidden ":"")+" "+helper.object.getValue(obj,"attributes.class",""),"id":id,"title":title,"idx":idx}});helper.dom.appendJsonElement({parentElement:icon,type:"div",attributes:{class:""},content:obj.caption});helper.dom.appendJsonElement({parentElement:icon,
type:"div",attributes:{class:"box"}})}var pElem=null;var i=0,c=true;while(i<pElems.length&&c&&idx!=-1){if(pElems[i].idx>idx||pElems[i].idx===-1){pElem=pElems[i];c=false}i++}if(!pElem)_elems.tackedContainer.appendChild(icon);else _elems.tackedContainer.insertBefore(icon,pElem);if(!silent)fixPosition()}function closeSubMenus(callback,speed){var time1=200;var time2=500;if(speed==="fast"){time1=50;time2=50}if(!_subMenu.isClosing){_subMenu.isClosing=true;if(_elems.subMenu){_subMenu.hook=false;helper.dom.removeEvent(_args.hookElement,
"keydown",keydown_handler);helper.dom.removeEvent(_args.hookElement,"mousedown",mousedown_handler);helper.dom.removeEvent(_args.hookElement,"touchstart",mousedown_handler,{"passive":false});setTimeout(function(){if(_subMenu.timer)clearSubmenuTimeout();helper.style.addClass(_elems.subMenu,"hide");setTimeout(function(){_elems.subMenu.parentElement.removeChild(_elems.subMenu);_elems.subMenu=null;_subMenu.parentElem=null;_subMenu.isClosing=false;_subMenu.srcElem=null;if(callback)callback()},time2)},time1)}else _subMenu.isClosing=
false}}function addSubTackElem(parentElement,obj){var id="tacked_"+obj.attributes.id;var menuElem=document.getElementById(obj.attributes.id);var selected=menuElem&&helper.style.hasClass(menuElem,"selected");var lastTime=Date.now();var mouseup_handler=function(e){var t=Date.now();if(!_drag.isDropped&&!_drag.isDragging){e=e||window.event;e.preventDefault();e.stopPropagation();if(t-_click.down<500&&t-lastTime>_time.click){lastTime=t;var options=getOptions(_args.data,obj.attributes.id);if(!options){closeSubMenus();
menuElem.dispatchEvent(new Event("click"));_args.capturingMouse(false)}else buildPinSubMenu(options,e.srcElement)}return false}};let title=obj.title||obj.caption;var icon=helper.dom.appendJsonElement({"parentElement":parentElement,"type":"div","attributes":{"class":"tacked sub-tack icon "+(selected?" selected checkicon thin-check":""),"id":id,"title":title},"content":obj.caption||title,"events":{"touchend":mouseup_handler,"click":mouseup_handler}})}function removeTackElem(obj,silent){var id="tacked_"+
obj.id;var ticon=_elems.tackedContainer.querySelector("[id="+id+"]");var micon_span=_elems.container.querySelector(`#${obj.id} > span.tack`);if(micon_span)helper.style.replace(micon_span,"tacked","no-tacked");if(ticon)_elems.tackedContainer.removeChild(ticon);if(!silent)fixPosition()}function getCaptionSize(parentElement,query,rule){var min=0;var width=0;if(parentElement){var elems=parentElement.querySelectorAll(query);if(elems){function gcs(elem,attr){if(window.getComputedStyle&&elem.nodeType!=9&&
window.getComputedStyle(elem,null)!=null)return window.getComputedStyle(elem,null).getPropertyValue(attr);return""}var ff=null;var fs=null;var fw=null;var fsy=null;var css=helper.style.getCSSRule(rule);var getCSSValue=function(elem,attribute,gAttribute,dValue){var v=null;if(css&&css.style&&css.style[attribute]!="")return css.style[attribute];else{v=gcs(elem,gAttribute);if(v&&v!=="")return v;else dValue}};for(var i=0;i<elems.length;i++){ff=getCSSValue(elems[i],"fontFamily","font-family",_defaultValues.fontFamily);
fs=getCSSValue(elems[i],"fontSize","font-size",_defaultValues.fontSize);fw=getCSSValue(elems[i],"fontWeight","font-weight",_defaultValues.fontWeight);fsy=getCSSValue(elems[i],"fontStyle","font-style",_defaultValues.fontStyle);width=helper.font.getWidth(elems[i].innerHTML,{"fontFamily":ff,"fontSize":fs,"fontWeight":fw,"fontStyle":fsy,"fontSeparation":_defaultValues.fontSeparation});width+=20;min=Math.max(width,min)}}}return min}function fixCaptionSize(){var w=getCaptionSize(_elems.container,"a",".thin-menu-container ul li a");
var max=Math.max(w,_size.minMenuWidth);max=parseInt(max+_margin.menuText,10)+_defaultValues.unit;if(_elems.container){var subMenus=_elems.container.querySelectorAll(".sub-menu.thin-menu-container");if(subMenus)for(var i=0;i<subMenus.length;i++)subMenus[i].style.width=max;_elems.container.style.width=max}}function generateId(obj){return btoa(obj.caption||obj.title||obj.name).replace(/ /g,"_").replace(/=/g,"").toUpperCase()}function findIndex(nodeList,id){let idx=-1;if(nodeList){let l=nodeList.length,
i=0;while(idx==-1&&i<l){if(nodeList[i].id===id)idx=i;i++}}return idx}function add(pObj,obj,parentElement,depth,silent){if(obj){if(pObj)obj.parentExtra=pObj?.extra||null;let extra=obj.parentExtra;let icon=helper.object.getValue(obj,"attributes.icon","");let exists=false;let isStateObj=false;let div=null;let title=caption=helper.object.getValue(obj,"caption","");let elemId=helper.object.getValue(obj,"attributes.id",generateId(obj));depth=depth>0?depth:0;_autoIndex++;let idx=helper.object.getValue(obj,
"index",_autoIndex*10)-5*depth;if(obj?.extra?.state===true){div={id:elemId};obj.dockable=true;isStateObj=true;addStateButton(obj,elemId,silent)}else{var visible=helper.object.getValue(obj,"visible",true);var pElems=parentElement.querySelectorAll("li");var li=helper.dom.createJsonElement({"parentElement":parentElement,"type":"li","attributes":{"class":!visible?"hidden":""}});li.idx=idx;var i=0,c=true,pElem=null;while(i<pElems.length&&c&&idx!=-1){if(pElems[i].idx>idx||pElems[i].idx===-1){pElem=pElems[i];
c=false}i++}if(!pElem)parentElement.appendChild(li);else parentElement.insertBefore(li,pElem);obj.attributes.id=elemId;if(!div){exists=false;div=helper.dom.appendJsonElement({"parentElement":li,"type":"div","attributes":{"id":elemId,"class":"base "+helper.object.getValue(obj,"attributes.class","")}})}if(obj.items)helper.style.addClass(div,"with-options");let isToggle=obj.toggle||obj?.extra?.toggle;let isSelected=false;if(isToggle||extra?.toggleGroup){let tValue,oValue=undefined;if(!isToggle)tValue=
typeof extra?.toggleValue!=="undefined"?extra.toggleValue:typeof pObj?.value!=="undefined"?pObj.value:undefined;oValue=typeof obj?.extra?.toggleValue!=="undefined"?obj.extra.toggleValue:typeof obj?.value!=="undefined"?obj.value:undefined;if(tValue instanceof Function)tValue=tValue();if(oValue instanceof Function)oValue=oValue();_toggles[elemId]=div;helper.style.addClass(div,"toggle");var remember=helper.object.getValue(obj,"toggleOptions.remember",false);var toggled=remember&&_data.toggled.indexOf(obj.attributes.id)!==
-1;if(obj.toggleState||toggled||tValue!=undefined&&tValue===oValue||isToggle&&oValue){title=helper.object.getValue(obj,"toggleOptions.title",title);caption=helper.object.getValue(obj,"toggleOptions.caption",title);icon=helper.object.getValue(obj,"toggleOptions.icon",icon);isSelected=true;helper.style.addClass(div,"selected")}if(!helper.object.getValue(obj,"toggleOptions.decoration",true))helper.style.addClass(div,"nodecoration")}if(exists)div.querySelector(".icon").class=`icon ${icon}`;else helper.dom.appendJsonElement({"parentElement":div,
"type":"div","attributes":{"class":`icon ${icon}`}});if(exists){let a=div.querySelector("a");a.title=title;a.innerText=caption}else helper.dom.appendJsonElement({"parentElement":div,"type":"a","attributes":{"title":title},"content":caption});if(!exists&&obj.items)helper.dom.appendJsonElement({"parentElement":div,"type":"a","attributes":{"class":"thin-angle-right icon-sub-items"}});if(exists){let span=div.querySelector("span");if(span)span.parentElement.removeChild(span)}if(isSelected)helper.dom.appendJsonElement({"parentElement":div,
"type":"span","attributes":{"class":"checkicon thin-check","divElem":div}});if(exists){let ttp=div.querySelector(".tack.thin-pin");if(ttp)tpp.parentElement.removeChild(ttp)}if(obj.dockable&&icon){if(_dock.autoIndexed&&helper.object.getValue(obj,"index",null)===null)obj.index=idx;var span=helper.dom.appendJsonElement({"parentElement":div,"type":"span","attributes":{"class":"tack thin-pin","divElem":div},"events":{"touchend, click":function(e){e=e||window.event;e.preventDefault();e.stopPropagation();
var srcElem=e.srcElement;if(srcElem)if(!helper.style.hasClass(srcElem,"tacked")){helper.style.replace(srcElem,"no-tacked","tacked");if(helper.object.getValue(obj,"visible",null)!=null)delete obj.visible;if(addTackElem(srcElem.divElem,obj,false,true))renderPinMenu();if(_data.tacked.indexOf(srcElem.divElem.id)==-1)_data.tacked.push(srcElem.divElem.id);write()}else{removeTackElem(srcElem.divElem);var idx=_data.tacked.indexOf(srcElem.divElem.id);if(idx>-1)_data.tacked.splice(idx,1);write()}return false}}})}if(icon&&
(findItem(_data.tacked,elemId,caption,icon)||findItem(_args.autoTacked,elemId,caption,icon))){helper.style.replace(span,"no-tacked","tacked");addTackElem(div,obj,silent,false)}if(obj.items){var subMenu=helper.dom.appendJsonElement({"parentElement":_elems.container,"type":"div","attributes":{"class":"sub-menu "+_args.position,"id":helper.utils.getNewGWSID()}});var subUl=helper.dom.appendJsonElement({"parentElement":subMenu,"type":"ul","attributes":{"class":"sub-menu"}});var subLi=helper.dom.appendJsonElement({"parentElement":subUl,
"type":"li"});var subDiv=helper.dom.appendJsonElement({"parentElement":subLi,"type":"div","attributes":{"class":"base menu-btn-back ","parentSubMenu":subMenu,"title":"go Back"},"events":{"touchend,click":function(e){e=e||window.event;if(e.preventDefault)e.preventDefault();var srcElem=e.srcElement;if(srcElem.parentSubMenu)helper.style.replace(srcElem.parentSubMenu,"visible","not-visible");var fadedMenus=document.querySelectorAll(".thin-menu-container .fade");if(fadedMenus.length>0){if(helper.style.hasClass(fadedMenus[fadedMenus.length-
1],"bottom-root")||helper.style.hasClass(fadedMenus[fadedMenus.length-1],"root")&&fadedMenus.length>1)helper.style.replace(fadedMenus[fadedMenus.length-2],"fade","nofade");helper.style.replace(fadedMenus[fadedMenus.length-1],"fade","nofade")}}}});var sectionTitleClickHandler=function(e){e=e||window.event;if(e.preventDefault)e.preventDefault();var srcElem=e.srcElement;if(srcElem.parentSubMenu)helper.style.replace(srcElem.parentSubMenu,"visible","not-visible")};var subAnchor=helper.dom.appendJsonElement({"parentElement":subDiv,
"type":"div","attributes":{"class":"back-arrow thin-angle-left","title":"go Back","parentSubMenu":subMenu},"events":{"touchend, click":sectionTitleClickHandler}});var sectionTitle=helper.dom.appendJsonElement({"parentElement":subDiv,"type":"a","attributes":{"class":"section-title","title":title,"parentSubMenu":subMenu},"content":caption,"events":{"touchend, click":sectionTitleClickHandler}});var toggleGroup=helper.object.getValue(obj,"toggleOptions.toggleGroup",false);for(var i=0;i<obj.items.length;i++){if(toggleGroup){if(!obj.items[i].toggleOptions)obj.items[i].toggleOptions=
{};obj.items[i].toggleOptions["toggleGroup"]=true}add(obj,obj.items[i],subUl,i+1+depth,silent)}_autoIndex=_autoIndex-Math.ceil(i/2);div.subMenuId=subMenu.id;div.subMenuElem=subMenu;helper.dom.addEvent(div,["touchend","click"],function(e){e=e||window.event;if(e.preventDefault)e.preventDefault();var srcElem=e.srcElement;var subMenu=srcElem.subMenuElem||srcElem.parentElement.subMenuElem||null;if(subMenu){subMenu.style.visibility="visible";helper.style.replace(subMenu,"not-visible","visible");if(parentElement){helper.style.replace(parentElement,
"nofade","fade");if(helper.style.hasClass(parentElement,"root"))helper.style.replace(_elems.container.querySelector(".bottom-root"),"nofade","fade")}}})}else{if(obj.events);if(obj.action||obj.handler)helper.dom.addEvent(div,["touchend","click"],function(e){e=e||window.event;if(e.preventDefault)e.preventDefault();var subMenus=_elems.container.querySelectorAll(".sub-menu.thin-menu-container");if(subMenus.length>0)subMenus.forEach(function(elem){helper.style.replace(elem,"visible","not-visible")});else{var elem=
e.srcElement||e.target;if(elem&&!helper.style.hasClass(elem,"base"))elem=elem.parentElement;var tackElem=document.getElementById("tacked_"+elem.id);if(helper.style.hasClass(elem,"toggle")){var selected=helper.style.hasClass(elem,"selected");var tIcon=selected?helper.object.getValue(obj,"icon",null):helper.object.getValue(obj,"toggleOptions.icon",helper.object.getValue(obj,"icon",null));var tTitle=selected?helper.object.getValue(obj,"title",null):helper.object.getValue(obj,"toggleOptions.title",helper.object.getValue(obj,
"title",null));var tCaption=selected?helper.object.getValue(obj,"caption",tTitle):helper.object.getValue(obj,"toggleOptions.caption",tTitle);var anchor=elem.querySelector("a");if(anchor)setTimeout(function(){if(tCaption)anchor.innerHTML=tCaption;if(tTitle)anchor.title=tTitle},silent?0:500);if(tIcon){setTimeout(function(){var dIcon=elem.querySelector("div.icon");if(dIcon)dIcon.className="icon "+tIcon},silent?0:500);if(tackElem){tackElem.className="tacked icon "+tIcon+(!helper.object.getValue(obj,"toggleOptions.decoration",
true)?" nodecoration ":"");if(tTitle)tackElem.title=tTitle}}if(obj?.parentExtra?.toggleGroup===true){var toggleOptions=parentElement.querySelectorAll(".base.toggle");for(var i=0,len=toggleOptions.length;i<len;i++)helper.style.removeClass(toggleOptions[i],"selected");var tackElemSelected=tackElem&&tackElem.parentElement?tackElem.parentElement.querySelector(".tacked.icon.selected"):null;if(tackElemSelected)helper.style.removeClass(tackElemSelected,"selected");if(selected)selected=false}else{helper.style.addClass(elem,
"clicked");if(tackElem&&helper.style.hasClass(tackElem,"sub-tack"))helper.style.addClass(tackElem,"selected")}helper.style[selected?"removeClass":"addClass"](elem,"selected");if(tackElem)helper.style[selected?"removeClass":"addClass"](tackElem,"selected");if(helper.object.getValue(obj,"toggleOptions.remember",false))if(!selected&&_data.toggled.indexOf(obj.attributes.id)==-1)_data.toggled.push(obj.attributes.id);else if(selected){var idx=_data.toggled.indexOf(obj.attributes.id);if(idx>-1)_data.toggled.splice(idx,
1)}write()}else{helper.style.addClass(elem,"clicked");if(tackElem&&helper.style.hasClass(tackElem,"sub-tack"))helper.style.addClass(tackElem,"selected")}}if(obj.handler)try{obj.handler(e)}catch(error){}else if(obj.action)_args.oProperties.process(obj.action);if(!helper.object.getValue(obj,"tackOptions.avoidAutoHide",false))setTimeout(hide,silent?0:300)})}}if(!silent)if(_ready)fixCaptionSize()}}function resetMenuBackToRoot(){var container="thin-menu-container";var classesToReset=["fade","nofade","visible",
"not-visible","clicked"];var querySelector=[];for(var i=0,len=classesToReset.length;i<len;i++)querySelector.push("."+container+" ."+classesToReset[i]);var toggledElements=document.querySelectorAll(querySelector.join(","));for(var i=0,len=toggledElements.length;i<len;i++)helper.style.removeClass(toggledElements[i],classesToReset.join(" "))}function getLiParent(elem){if(elem)if(elem instanceof HTMLLIElement)return elem;else if(elem.parentElement!==document.body)return getLiParent(elem.parentElement);
return null}function remove(elem){if(typeof elem==="string")elem=document.getElementById(elem);if(elem){if(_toggles[elem.id])_toggles[elem.id]=null;if(!elem instanceof HTMLLIElement)elem=getLiParent(elem);if(elem){elem.parentElement.removeChild(elem);if(_ready)fixCaptionSize();return true}}return false}function addElem(elemDef,parentElement){if(typeof parentElement==="string")try{var _elem=_elems.ulContainer.querySelector("[id="+parentElement+"]");if(_elem&&_elem.subMenuElem)parentElement=_elem.subMenuElem.querySelector("ul")}catch(err){parentElement=
null}return add(elemDef,[elemDef][0],parentElement||_elems.ulContainer,undefined)}function keydown_handler(e){if(_defaultValues.closeKeyCodes.indexOf(e.keyCode)!=-1)closeSubMenus()}function mousedown_handler(e){setTimeout(function(){_subMenu.srcElem=null},_time.freeSrcElem);if(_subMenu.srcElem!==null)return;e=e||window.event;_click.down=(new Date).getTime();var srcElem=e.srcElement||e.target;if(srcElem){_subMenu.srcElem=srcElem;var checkParent=function(elem){if(elem.parentElement===_elems.pinContainer||
elem.parentElement===_elems.subMenu)return true;else if(elem.parentElement!=null&&elem.parentElement!=document.body&&elem.parentElement!=elem)return checkParent(elem.parentElement);else return false};if(!checkParent(srcElem)){closeSubMenus();e.preventDefault();e.stopPropagation()}}}function removeElem(elemDef){if(elemDef&&typeof elemDef.id!=="undefined")return remove(elemDef.id);else if(elemDef instanceof HTMLElement)return remove(elemDef);else return false}function updateElem(elemDef){if(elemDef&&
helper.object.getDataTypeOf(elemDef)==="json"){elemDef=[elemDef][0];var _rebuildPinMenu=false;let item=findProp(_args.data,elemDef?.attributes?.id||elemDef?.id||elemDef.name||elemDef.action);if(item){var id=item?.attributes?.id||helper.object.getValue(elemDef,"attributes.id",elemDef.id);let elem=document.getElementById(id);if(elem){let caption=helper.object.getValue(elemDef,"caption",null);let title=helper.object.getValue(elemDef,"title",caption);let cName=helper.object.getValue(elemDef,"class",null);
let icon=helper.object.getValue(elemDef,"icon",null);if(caption)item.caption=caption;if(!item.attributes)item.attributes={};if(title)item.attributes.title=title;if(icon)item.attributes.icon=icon;if(cName){item.attributes.class=cName;elem.className="base "+cName}let toggleState=helper.object.getValue(elemDef,"toggleState",null);if(toggleState!=null)helper.style[toggleState?"addClass":"removeClass"](elem,"selected");let visible=helper.object.getValue(elemDef,"visible",null);if(visible!=null&&elem.parentElement)helper.style[visible?
"removeClass":"addClass"](elem.parentElement,"hidden");var dIcon=elem.querySelector("div.icon");if(dIcon){let tIcon=document.getElementById("tacked_"+id);if(icon){dIcon.className="icon "+icon;if(tIcon){if(caption)tIcon.innerText=caption;if(title)tIcon.title=title}}if(visible!=null&&tIcon){helper.style[visible?"removeClass":"addClass"](tIcon,"hidden");_rebuildPinMenu=true}if(toggleState!=null&&tIcon)helper.style[toggleState?"addClass":"removeClass"](tIcon,"selected")}var anchor=elem.querySelector("a");
if(anchor){if(caption)anchor.innerText=caption;if(title)anchor.title=title}if(elemDef.events)for(let ename in elemDef.events)try{if(_events[id]&&_events[id][ename])helper.dom.removeEvent(elem,ename,_events[id][ename]);helper.dom.addEvent(elem,ename,elemDef.events[ename]);_events[id][ename]=elemDef.events[ename]}catch(err){}}}fixCaptionSize();if(_rebuildPinMenu){let elemPos=getElementPosition(_elems.pinContainer);renderPinMenu(elemPos.left,elemPos.top);fixPosition()}return true}else return false}function updateButtons(buttons){if(!!buttons)for(var b=
0;b<buttons.length;b++)updateElem(buttons[b])}function dispose(silent){if(!_disposed){_disposed=false;if(!silent)hide();environment.off("orientationChange",fixPosition);environment.off("resizestart",resizeStart);environment.off("resize",resize);environment.off("resizeend",resizeEnd);helper.dom.removeEvent(_elems.container,"transitionend",onHideEnd);helper.dom.removeEvent(_args.hookElement,"mousemove",ondrag);helper.dom.removeEvent(_args.hookElement,"mouseup",ondrop);helper.dom.removeEvent(_args.hookElement,
"mouseleave",ondrop);helper.dom.removeEvent(_args.hookElement,"touchmove",ondrag,{"passive":false});helper.dom.removeEvent(_args.hookElement,"touchend",ondrop,{"passive":false});helper.dom.removeEvent(_args.hookElement,"touchleave",ondrop,{"passive":false});if(_elems.container){if(_elems.container.parentElement)_elems.container.parentElement.removeChild(_elems.container);_elems.container.innerHTML="";_elems.container=null}if(_elems.pinContainer){if(_elems.pinContainer.parentElement)_elems.pinContainer.parentElement.removeChild(_elems.pinContainer);
_elems.pinContainer.innerHTML="";_elems.pinContainer=null}}_disposed=true}function updateState(name,value){var elem=_toggles[name];if(elem){var tackElem=document.getElementById("tacked_"+name);if(value&&!helper.style.hasClass(elem,"selected")){helper.style.addClass(elem,"selected");if(tackElem)helper.style.addClass(tackElem,"selected")}else if(helper.style.hasClass(elem,"selected")&&!value){helper.style.removeClass(elem,"selected");if(tackElem)helper.style.removeClass(tackElem,"selected")}}}function getToggledData(){return _data.toggled.slice()}
initialize();Object.defineProperty(_ref,"show",{"enumerable":true,"configurable":false,"writable":false,"value":function(){return show()}});Object.defineProperty(_ref,"hide",{"enumerable":true,"configurable":false,"writable":false,"value":function(){return hide()}});Object.defineProperty(_ref,"showPin",{"enumerable":true,"configurable":false,"writable":false,"value":function(){return showPin()}});Object.defineProperty(_ref,"hidePin",{"enumerable":true,"configurable":false,"writable":false,"value":function(){return hidePin()}});
Object.defineProperty(_ref,"addElem",{"enumerable":true,"configurable":false,"writable":false,"value":addElem});Object.defineProperty(_ref,"removeElem",{"enumerable":true,"configurable":false,"writable":false,"value":removeElem});Object.defineProperty(_ref,"updateElem",{"enumerable":true,"configurable":false,"writable":false,"value":updateElem});Object.defineProperty(_ref,"updateButtons",{"enumerable":true,"configurable":false,"writable":false,"value":updateButtons});Object.defineProperty(_ref,"addButtons",
{"enumerable":true,"configurable":false,"writable":false,"value":addElements});Object.defineProperty(_ref,"dispose",{"enumerable":true,"configurable":false,"writable":false,"value":dispose});Object.defineProperty(_ref,"getToggledData",{"enumerable":true,"configurable":false,"writable":false,"value":getToggledData});Object.defineProperty(_ref,"refresh",{"enumerable":true,"configurable":false,"writable":false,"value":refresh});return _ref}function Menu(args){try{return new TMenu(args)}catch(e){throw new Error(e.message);
}}try{Thinfinity!=undefined}catch(e){Thinfinity={}}if(!Thinfinity.Menu)Thinfinity.Menu={};Thinfinity.Menu=Menu})();
(function(){function MProperties(args){var _ref=this;var _args={cookiePrefix:null,API:null,events:null,methods:null};var _props=null;var _origProps=null;var _oScraperProp=null;var fireEvent=null;var _handlerActions={};var _notification={allow:false,time:100,queue:[],timeoutId:null};var _availableProps=["caption","attributes","action","title","value","extra"];var _compInitialized=false;var _oInterface=null;var _defaultEventFire={async:0};var _isReady=false;async function initialize(){helper.object.parseAttributes(_args,
args);let cp=_args.cookiePrefix||window.cookiePrefix;if(Thinfinity?.Menu?.Properties?.[cp]){_oScraperProp=new Thinfinity.Menu.Properties[cp](_args,{updateProperty});if(_oScraperProp){fireEvent=(new Thinfinity.Events({"owner":_ref,"events":_args.events,fireEventArgs:_defaultEventFire})).fireEvent;_props=_oScraperProp.properties;_origProps=helper.object.clone(_oScraperProp.properties);await initializeComponents();addGenericProperties(_props);selfRegisterActions(_props)}else throw new Error(`Cannot initialize thinfinity properties, scraper properties is undefined or null`);
}}function addGenericProperties(props){}function selfRegisterActions(props){let originalState=_notification.allow;_notification.allow=false;let register=items=>{if(items)items.forEach(item=>{if(item.action&&item.handler)registerAction(item.action,item.handler);if(item.value)registerValue(item);if(item.items)register(item.items)})};register(props);_notification.allow=originalState}function registerValue(item){if(item&&item.value){item._value=item.value;let get=item.value instanceof Function?item._value:
()=>{return item._value};delete item.value;Object.defineProperty(item,"value",{enumerable:true,configurable:false,get})}}function getProperties(){let c=[];let purgeOptions=(list,c)=>{if(list)list.forEach(item=>{if(item.initialState!=="hidden"){let nItem={};_availableProps.forEach(prop=>{if(typeof item[prop]!=="undefined")nItem[prop]=item[prop]});c.push(nItem);if(item.items){nItem["items"]=[];purgeOptions(item.items,nItem.items)}}})};purgeOptions(_props,c);return c}function updateProperty(item){let defItem=
findDefItem(_props,item);if(defItem){let prevId=defItem?.attributes?.id;_availableProps.forEach(prop=>{if(item[prop])defItem[prop]=item[prop]});if(prevId)defItem.attributes.id=prevId;propertyChange(defItem.action,undefined,undefined)}}async function initializeComponents(){return new Promise((resolve,reject)=>{let getComponent=name=>{return new Promise((resolve,reject)=>{_componentRef.getAsyncRegisteredObject(name).then(resolve).catch(msg=>{reject(msg)})})};var _componentRef=new Thinfinity.Component({events:{ready:function(){if(!_compInitialized)getComponent("OINTERFACE").then(o=>
{if(o){_oInterface=o;if(_oScraperProp.extendInterface)_oScraperProp.extendInterface.forEach(oDef=>{let type=helper.object.getTypeOf(oDef).toUpperCase();switch(type){case "OPROPERTY":_oInterface.props.newProperty(oDef);break;case "OMETHOD":_oInterface.props.newMethod(oDef);break}});for(let prop in _oInterface.new.properties)_oInterface.new.on(prop,(ov,nv)=>{propertyChange(prop,ov,nv)});if(_oScraperProp.watches)for(let k in _oScraperProp.watches)_oInterface.new.on(k,(ov,nv)=>{_oScraperProp.watches[k](ov,
nv)});Object.defineProperty(_ref,"getLegacyOptions",{enumerable:true,configurable:false,writable:false,value:function(){return convertToLegacyOptions(_oScraperProp.properties)}});Object.defineProperty(_ref,"watch",{enumerable:true,configurable:false,writable:false,value:_oInterface.new.on});Object.defineProperty(_ref,"unwatch",{enumerable:true,configurable:false,writable:false,value:_oInterface.new.off});Object.defineProperty(_ref,"availability",{enumerable:true,configurable:false,get:()=>{return _oScraperProp.availability}})}resolve();
_isReady=true;fireEvent("ready")}).catch(err=>{helper.console.warning(`Cannot get object Interface.`);reject()});_compInitialized=true},fail:function(message){helper.console.warning(`Cannot initialize Thinfinity.Component. ${JSON.stringify(message)}`)},destroy:function(){_compInitialized=false}}})})}function process(name,value){if(name){name=name.toUpperCase();if(_handlerActions[name])if(typeof _handlerActions[name]=="function")_handlerActions[name].call(null,value);else _handlerActions[name]=value}}
function findDefItem(list,item){if(list&&item){let _defItem=null,i=0,l=list.length;let id=item?.id?.toUpperCase();let action=item?.action?.toUpperCase();let caption=item?.caption?.toUpperCase();while(!_defItem&&i<l){let cItem=list[i];if(cItem.id&&cItem.id.toUpperCase()===id||cItem.action&&cItem.action.toUpperCase()===action||cItem.caption&&cItem.caption.toUpperCase()===caption)return cItem;else if(cItem.items){_defItem=findDefItem(cItem.items,item);if(_defItem)return _defItem}i++}}}function findItemInList(list,
value){if(list&&value)if(helper.object.getTypeOf(value)==="string"){value=value.toUpperCase();return list.find(elem=>{return elem?.caption?.toUpperCase()===value||elem?.attributes?.id?.toUpperCase()===value||elem?.action?.toUpperCase()===value})}}function recoverItem(list,value){if(value&&helper.object.getTypeOf(value)==="string"){value=value.toUpperCase();let findItem=props=>{if(props){let c=true,l=props.length,i=0;while(c&&i<l){let prop=props[i];if(prop.caption.toUpperCase()===value||prop?.attributes?.id?.toUpperCase()===
value){c=false;if(!prop.parent){let p=props instanceof Array?findParentElement(list,value):props.caption;if(p)prop.parent=p.caption}if(i==0&&props.length>1&&!prop.insertBefore)prop.insertBefore=props[i+1].caption;else if(i>0&&!prop.insertAfter)prop.insertAfter=props[i-1].caption;return prop}if(c&&prop.items){prop=findItem(prop.items,value);if(prop){c=false;return prop}}i++}if(c)return false}else return false};return findItem(list)}}function removeElement(list,item){if(list){let c=true,l=list.length,
i=0;while(c&&i<l){let prop=list[i];let propCap=prop?.caption?.toUpperCase()||null;let propId=prop?.attributes?.id?.toUpperCase()||null;if(propCap&&propCap===item?.caption?.toUpperCase()||propId&&propId===item?.attributes?.id?.toUpperCase()){c=false;list.splice(i,1);return true}if(c&&prop.items&&removeElement(prop.items,item))return true;i++}return false}return false}function findParentElement(list,value){if(value)if(helper.object.getTypeOf(value)==="string"){value=value.toUpperCase();let i=0,t=list.length,
item=null,c=true;while(c&&i<t){let parentItem=list[i];if(parentItem.caption.toUpperCase()===value){c=true;return list}else if(parentItem.items)if(findItemInList(parentItem.items,value)){c=true;return parentItem}else{let elem=findParentElement(parentItem.items,value);if(elem){c=true;return elem}}i++}}else{value=parseInt(value,10);return list[value]}else return null}function purgeItem(item){setTimeout(()=>{propertyChange(item.action,undefined,undefined)},100);return item}function findIndex(elems,value){if(value&&
elems){value=value.toUpperCase();return elems.findIndex(elem=>{return elem?.caption?.toUpperCase()===value||elem?.attributes?.id?.toUpperCase()===value||elem?.action?.toUpperCase()===value})}else return-1}function insertBefore(parentElem,item){if(!parentElem)parentElem=findParentElement(_props,item.insertBefore);if(parentElem&&item){let elems=parentElem.items||parentElem;if(item.insertBefore){let r=item.insertBefore;if(helper.object.getTypeOf(r)==="string")r=findIndex(elems,r);else r=parseInt(r,10);
elems.splice(Math.floor(r),0,purgeItem(item))}else if(parentElem.items)parentElem.items.unshift(purgeItem(item))}}function insertAfter(parentElem,item){if(!parentElem)parentElem=findParentElement(_props,item.insertAfter);if(parentElem&&item){let elems=parentElem.items||parentElem;if(item.insertAfter){let r=item.insertAfter;if(helper.object.getTypeOf(r)==="string")r=findIndex(elems,r)+1;else r=parseInt(r,10)+1;elems.splice(r,0,purgeItem(item))}else if(parentElem.items)parentElem.items.push(purgeItem(item))}}
function insertItem(item){if(_props)if(!!item.parent){let parentElem=findItemInList(_props,item.parent);if(parentElem)if(parentElem.items)if(item.insertBefore)insertBefore(parentElem,item);else insertAfter(parentElem,item);else parentElem.items=[item]}else if(item.insertBefore)insertBefore(null,item);else if(item.insertAfter)insertAfter(null,item)}function addProperty(item){if(item){let rItem=null;if(item.deleted)item=recoverItem(_origProps,item.deleted);else rItem=recoverItem(_props,item?.attributes?.id||
item?.attributes?.action||item?.attributes?.name||item);if(!rItem){insertItem(item);if(item.items)item.items.forEach(el=>{registerAction(el.action,el.handler)});else registerAction(item.action,item.handler)}else{if(rItem.hasOwnProperty("initialState"))delete rItem.initialState;propertyChange(rItem.action,undefined,undefined)}}}function removeProperty(item){if(item&&_props&&removeElement(_props,item))propertyChange(item.action,undefined,undefined)}function propertyChange(name,oldValue,newValue){if(_notification.allow){_notification.queue.push(["propertyChanged",
name,oldValue,newValue,{async:false}]);if(_notification.time==0)dispatchNotifications();else if(!_notification.timeoutId)_notification.timeoutId=setTimeout(dispatchNotifications,_notification.time)}}function dispatchNotifications(){_notification.queue.forEach(q=>{fireEvent.apply(null,q)});if(_notification.queue.length>0)fireEvent("propertiesUpdated");_notification.queue=[];_notification.timeoutId=null}function setNotificationTime(value){value=parseInt(value,10);if(_notification.time!=value){clearTimeout(_notification.timeoutId);
_notification.time=value;if(_notification.queue.length>0)_notification.timeoutId=setTimeout(dispatchNotifications,_notification.time)}}function registerAction(action,handler){if(action&&typeof handler==="function"){action=action.toUpperCase();if(!_handlerActions[action])_handlerActions[action]=handler}}function unregisterAction(action){if(action){action=action.toUpperCase();if(_handlerActions[action])delete _handlerActions[action]}}function purgeOptions(buttons,restrictions){}function convertToLegacyOptions(props){let _legacyItems=
[];let convertToLegacyOption=(item,defaultValue)=>{if(item){let submenu=item.items?.length>0;let button={id:item.attributes.id||`${item.caption.toUpperCase().replaceAll(" ","")}btn`,text:item.caption,type:submenu?"submenu":"action",attributes:{class:item.attributes.icon,title:item.title||item.caption}};if(submenu){let defValue=null;if(item?.extra?.toggleGroup==true)defValue=item.extra.toggleValue();button.options=[];item.items.forEach(option=>{button.options.push(convertToLegacyOption(option,defValue))})}else{if(item.handler)button.event=
item.handler;if(typeof defaultValue!=="undefined"&&defaultValue===item?.extra?.toggleValue||item?.extra?.toggle===true&&item.value)button.attributes.class+=" pressed"}return button}};let insertButtons=def=>{if(def){let _legacyButtons={type:"action",attributes:{id:def.attributes.id||`${def.caption.toUpperCase().replaceAll(" ","")}btn`,class:def.attributes.icon},html:def.caption};if(def.items){_legacyButtons.options=[];_legacyButtons.type="tbsubmenu";def.items.forEach(item=>{_legacyButtons.options.push(convertToLegacyOption(item))})}else if(def.handler)_legacyButtons.events=
[{name:"click",action:def.handler}];return _legacyButtons}};if(props)props.forEach(p=>{_legacyItems.push(insertButtons(p))});return _legacyItems}initialize();Object.defineProperty(_ref,"properties",{enumerable:true,configurable:false,get:function(){return getProperties()}});Object.defineProperty(_ref,"process",{enumerable:true,configurable:false,writable:false,value:process});Object.defineProperty(_ref,"purge",{enumerable:true,configurable:false,writable:false,value:purgeOptions});Object.defineProperty(_ref,
"registerAction",{enumerable:true,configurable:false,writable:false,value:registerAction});Object.defineProperty(_ref,"unregisterAction",{enumerable:true,configurable:false,writable:false,value:unregisterAction});Object.defineProperty(_ref,"addProperty",{enumerable:true,configurable:false,writable:false,value:addProperty});Object.defineProperty(_ref,"updateProperty",{enumerable:true,configurable:false,writable:false,value:updateProperty});Object.defineProperty(_ref,"removeProperty",{enumerable:true,
configurable:false,writable:false,value:removeProperty});Object.defineProperty(_ref,"allowNotifications",{enumerable:true,configurable:false,get:()=>{return _notification.allow},set:value=>{return _notification.allow=value}});Object.defineProperty(_ref,"notificationTime",{enumerable:true,configurable:false,get:()=>{return _notification.time},set:setNotificationTime});Object.defineProperty(_ref,"ready",{enumerable:true,configurable:false,writable:false,value:function(handler){if(!_isReady)_ref.on("ready",
handler);else handler()}});Object.defineProperty(_ref,"isReady",{enumerable:true,configurable:false,get:()=>{return _isReady}});return _ref}try{Thinfinity!=undefined}catch(e){Thinfinity={}}if(!Thinfinity.Menu)Thinfinity.Menu={};Thinfinity.Menu.Properties=MProperties})();
(function(){function PropertiesBinding(){var _ref=this;const _defPproperties={actions:{printScreen:true},options:{fullscreen:true},disconnect:true};const _map={"actions":["actionsMenuBtn","actionsBtn"],"actions.printScreen":["actionsMenuBtn.printScreenBtn","printScreenBtn"],"options.fullscreen":["optionsMenuBtn.fullscreenBtn","fullscreenBtn"],"disconnect":["disconnectBtn"]};var _properties;function initialize(){applyValues()}function applyValues(){_properties={..._defPproperties};if(window?.customSettings?.toolbarRestrictions)helper.object.jsonMap(_properties,
customSettings.toolbarRestrictions,_map);return _properties}initialize();Object.defineProperty(_ref,"properties",{enumerable:true,configurable:false,get:function(){return _properties}});Object.defineProperty(_ref,"apply",{enumerable:true,configurable:false,writable:false,value:applyValues});return _ref}function Properties(args,owner){var _ref=this;var _args={API:null};var _items=null;var _printPreview=null;var _propBinding=null;var _jProps=null;function initialize(){_propBinding=new PropertiesBinding;
_jProps=_propBinding.properties;helper.object.parseAttributes(_args,args);if(_args.API){if(_jProps?.actions?.printScreen)initializePrintPreview();_items=getProperties()}else throw new Error(`Cannot initialize Thinfinity.Menu.Properties.RDP, base object is not defined`);}function getProperties(){let items=[];let actionsItems=null;if(_jProps?.actions){actionsItems={caption:thinzs_consts.actions,attributes:{id:"actionsBtn",icon:"thin-gear"},items:[]};if(_jProps.actions?.printScreen)actionsItems.items.push({caption:thinzs_consts.printScreen,
attributes:{id:"printscreenBtn",icon:"thin-camera"},action:"print.screen",handler:()=>{_printPreview.show()}});else actionsItems=null}let optionsItems=null;if(_jProps?.options){optionsItems={caption:thinzs_consts.options,attributes:{id:"optionsBtn",icon:"thin-options"},items:[]};if(_jProps.options?.fullscreen)if(!agentInfo.isMobile&&window.environment.supportsFullScreen){let isFullscreen=false;let resizeWindow=function(){if(isFullscreen!=environment.isFullscreen){if(environment.isFullscreen)owner.updateProperty({action:"toggle.fullscreen",
attributes:{icon:"thin-exit-fullscreen"},caption:consts.exitFullscreen});else owner.updateProperty({action:"toggle.fullscreen",attributes:{icon:"thin-enter-fullscreen"},caption:consts.fullscreen});isFullscreen=environment.isFullscreen}};optionsItems.items.push({caption:consts.fullscreen,attributes:{icon:"thin-enter-fullscreen"},action:"toggle.fullscreen",handler:()=>{if(window.environment.isFullscreen){window.environment.off("resizeComplete",resizeWindow);owner.updateProperty({action:"toggle.fullscreen",
attributes:{icon:"thin-enter-fullscreen"},caption:consts.fullscreen});_args.API.setFullScreen(false);isFullscreen=false}else{window.environment.on("resizeComplete",resizeWindow);owner.updateProperty({action:"toggle.fullscreen",attributes:{icon:"thin-exit-fullscreen"},caption:consts.exitFullscreen});_args.API.setFullScreen(true);isFullscreen=true}}})}if(optionsItems.items.length==0)optionsItems=null}let othersOptions=null;if(_jProps?.disconnect&&!_args.API?.rdParams?.disableDisconnect)othersOptions=
{caption:thinzs_consts.close,attributes:{icon:"thin-off",id:"disconnectBtn"},action:"disconnect",handler:()=>{_args.API.callDisconnect()}};if(actionsItems)items.push(actionsItems);if(optionsItems)items.push(optionsItems);if(othersOptions)items.push(othersOptions);return items}function getExtendedInterfaceProperties(){return[]}function getWatches(){return{}}function initializePrintPreview(){if(typeof Thinfinity.PrintScreenPreview!=="undefined"&&_printPreview===null)_printPreview=new Thinfinity.PrintScreenPreview({"parentElement":document.getElementById("printScreenPreviewPopup"),
"methods":{"getCanvas":_args.API.terminal.getCanvas,"getInfo":function(){return{"title":"Thinfinity SSH","detail":"Print Screen Preview"}},"printScreen":function(canvas,title,footer,mode,callback){var cnvprn=_printPreview.getCanvasPrinter();if(cnvprn){if(typeof title!="undefined"&&title!="")cnvprn.setTitle(title);if(typeof footer!="undefined"&&footer!="")cnvprn.setFooter(footer);if(typeof mode!="undefined"&&mode.toString()!="")cnvprn.printMode=mode;cnvprn.drawBorder=true;cnvprn.print(canvas)}if(callback)callback()}}})}
initialize(args);Object.defineProperty(_ref,"properties",{enumerable:true,configurable:false,get:function(){return _items}});Object.defineProperty(_ref,"legacy",{enumerable:true,configurable:false,get:function(){return true}});Object.defineProperty(_ref,"extendInterface",{enumerable:true,configurable:false,get:function(){return getExtendedInterfaceProperties()}});Object.defineProperty(_ref,"watches",{enumerable:true,configurable:false,get:function(){return getWatches()}});Object.defineProperty(_ref,
"availability",{enumerable:true,configurable:false,get:function(){return _jProps}});return _ref}try{Thinfinity!=undefined}catch(e){Thinfinity={}}if(!Thinfinity.Menu.Properties)throw new Error(`Thinfinity Menu Properties is null or undefined`);else Thinfinity.Menu.Properties[cookiePrefix]=Properties})();
(function(){function TWindowToolbar(args){var _ref=this;var _args={parentElement:null,methods:{output:null},defaultIcon:null,defaultIconSize:"32x32",oProperties:null,showEmptyList:true};var _elems={parentElement:null,container:null,slide:null,dockContainer:null,dock:null,iconsContainer:null};var _start=null;var _apps={activeid:null,tabs:[],tabIdx:0,appIdx:0,icons:{},textApp:null,titleWidth:100};var _iconList={};var fireEvent=null;var createTab=null;var createApp=null;var createStart=null;var createIcon=
null;var _registeredElem={};var _enumSupportedTypes=helper.object.createEnum({"TAB":1,"APP":2,"START":3,"ICON":4});var _noop=function(){};var _disposed=false;var _srcEvt=null;var _storageKey="__#thinfinity.window.toolbar#__";var _cfg={"isPinned":true};var _startProgram=null;var _createToolbar=null;var _combineApps=true;var _resizing=false;var _allowIcons=true;function initialize(){helper.object.parseAttributes(_args,args);_elems.parentElement=_args.parentElement||document.body;_createToolbar=helper.object.getValue(window,
"customSettings.remoteAppToolbar.enabled",true);_startProgram=helper.object.getValue(window,"customSettings.remoteAppToolbar.startProgram",true);_combineApps=helper.object.getValue(window,"customSettings.remoteAppToolbar.combineApps",true);_allowIcons=helper.object.getValue(window,"customSettings.remoteAppToolbar.allowIcons",_allowIcons);_cfg=getConfig();if(!_args.methods.output)_args.methods.output=_noop;var te=new Thinfinity.Events({"owner":_ref,"events":_args.events});fireEvent=te.fireEvent;registerOwnElems();
assignShortcuts();attachHandlers();if(args.isPinned!==undefined)_cfg.isPinned=args.isPinned;draw(!_cfg.isPinned)}function updateProfiles(jData){if(jData)defineApps(jData);else helper.console.warning("Cannot get data information. "+e.statusText,arguments)}function getConfig(){var cfg=null;try{cfg=helper.storage.get(_storageKey);if(!cfg)cfg={isPinned:!helper.object.getValue(window,"customSettings.remoteAppToolbar.startHidden",!_cfg.isPinned)}}catch(error){helper.console.log("Local storage quota is disabled, please change browser settings, or try to run without private mode.")}return cfg||
_cfg}function setConfig(){try{helper.storage.set(_storageKey,_cfg)}catch(error){helper.console.log("Local storage quota is disabled, please change browser settings, or try to run without private mode.")}}function attachHandlers(){helper.dom.addEvent(document,"keydown",keydown_handler,{"passive":true})}function removehandlers(){helper.dom.removeEvent(document,"keydown",keydown_handler,{"passive":true});helper.dom.removeEvent(_elems.parentElement,["mousedown","touchstart"],blurHandler,false)}function keydown_handler(e){if(e.keyCode===
27)hideAll()}function getIconsList(props){let list=[];let fillIcons=function(o){if(o.items)o.items.forEach(elem=>fillIcons(elem));else if(o&&!(o instanceof Array))list.push(o);else if(o instanceof Array)o.forEach(elem=>fillIcons(elem))};fillIcons(props);return list}function draw(forceHidden){var visible=forceHidden===true?false:_cfg.isPinned;if(!_elems.container&&_createToolbar){helper.dom.addEvent(_elems.parentElement,["mousedown","touchstart"],blurHandler,false);_elems.container=helper.dom.appendJsonElement({parentElement:_elems.parentElement,
type:"div",attributes:{class:"TWindowToolbar-container "+(visible?"show":"hide")},events:{touchstart:container_click,mousedown:container_click}});_elems.slide=helper.dom.appendJsonElement({parentElement:_elems.container,type:"div",attributes:{class:"slide cyb-h-ellipsis"+(_cfg.isPinned?" hide":"")},events:{mousedown:slide_click,touchstart:slide_click}});if(_startProgram){_start=createStart();_elems.container.appendChild(_start.elem)}_elems.dockContainer=helper.dom.appendJsonElement({parentElement:_elems.container,
type:"div",attributes:{class:"dock-container"}});_elems.dock=helper.dom.appendJsonElement({parentElement:_elems.dockContainer,type:"div",attributes:{class:"dock icon thin-pin "+(!_cfg.isPinned?"unpinned":"")},events:{mousedown:pin_click,touchstart:pin_click,transitionend:pin_transitionend}});if(_allowIcons){_elems.iconsContainer=helper.dom.appendJsonElement({parentElement:_elems.container,type:"div",attributes:{class:"icons-container "},events:{}});let props=_args?.oProperties?.properties||null;if(props)getIconsList(props).forEach(icon=>
{let iconObj=createIcon(icon);if(!_iconList[iconObj.id])_iconList[iconObj.id]=iconObj;_args.oProperties.on("propertiesUpdated",propertiesUpdated)})}if(visible)_args.methods.output({"cmd":"resize","data":{"width":0,"height":_elems.container.offsetHeight}})}}function propertiesUpdated(){let props=_args?.oProperties?.properties||null;if(props)getIconsList(props).forEach(icon=>{let id=icon.action||icon.attributes?.icon||icon.caption;if(_iconList[id])_iconList[id].update(icon)})}function resizeComplete(e){if(_resizing)return;
_resizing=true;_resizing=false}function blurHandler(e){if(_srcEvt!==e){hideAll();if(!_cfg.isPinned)hide()}}function hideAll(exceptId,exceptStart){_apps.tabs.forEach(function(item){if(item.id!==exceptId)item.hide()});if(exceptStart!==true&&_start)_start.hide()}function defineApps(jData){if(jData&&jData instanceof Array){if(_start)_start.clear();jData.forEach(function(item){item.title=item.name;if(!item.icon||item.icon=="")item.icon=_args.defaultIcon;item.index=_apps.appIdx*10;item.events={"click":function(jData){_args.methods.output({cmd:"rapp",
data:item})}};var app=createApp(item,_start);if(_start)_start.push(app);_apps.appIdx++;if(item.active)_start.setActive(item.id)})}}function registerOwnElems(){registerElem({type:_enumSupportedTypes.START,constructor:function(jData){if(!jData)jData={};var start={};var apps=[];var title=null;var elem=helper.dom.createJsonElement({type:"div",attributes:{class:"start"},events:{mousedown:openMenuHandler,touchstart:openMenuHandler}});var icon=helper.dom.appendJsonElement({parentElement:elem,type:"span",
attributes:{class:"icon"+(window.cookiePrefix=="RDP"?" cyb-apps":" thin-thinfinity")}});if(jData.title&&jData.title!="")title=helper.dom.appendJsonElement({parentElement:elem,type:"div",attributes:{class:"title"},content:jData.title});var menuContainer=helper.dom.appendJsonElement({parentElement:elem,type:"div",attributes:{class:"menu-container hide none-display"}});function openMenuHandler(e){let len=_start.apps.length;if(len===0&&_args.showEmptyList){let emptyApp=createApp({title:consts.emptyList,
id:"emptyApp",index:_apps.appIdx*10,state:"",events:{click:function(e){}}},_start);_start.push(emptyApp)}if(len>0&&helper.style.hasClass(menuContainer,"hide")){helper.style.remove(menuContainer,"none-display");hideAll(null,true);helper.style.replace(menuContainer,"hide","show")}else hideMenu()}function hideMenu(e){if(helper.style.hasClass(menuContainer,"show")){helper.style.replace(menuContainer,"show","hide");setTimeout(function(){helper.style.add(menuContainer,"none-display")},200)}}function update(){}
function setActive(id){apps.forEach(function(item){if(item.id===id){activeId=id;helper.style.add(item.elem,"selected");if(title)title.innerText=item.title}else helper.style.remove(item.elem,"selected")})}function remove(){}function clear(){menuContainer.innerText="";apps=[];update()}function push(app){apps.push(app);menuContainer.appendChild(app.elem);app.parent=start;update()}function splice(app){var idx=-1,i=0,t=apps.length;while(i<t&&idx==-1)if(apps[i]==app)idx=i;apps.splice(idx,1);update()}function apps(){}
Object.defineProperty(start,"elem",{"enumerable":true,"configurable":false,"get":function(){return elem}});Object.defineProperty(start,"id",{"enumerable":true,"configurable":false,"get":function(){return jData.id}});Object.defineProperty(start,"subMenu",{"enumerable":true,"configurable":false,"get":function(){return menuContainer}});Object.defineProperty(start,"apps",{"enumerable":true,"configurable":false,"get":function(){return apps}});Object.defineProperty(start,"push",{"enumerable":true,"configurable":false,
"writable":false,"value":push});Object.defineProperty(start,"splice",{"enumerable":true,"configurable":false,"writable":false,"value":splice});Object.defineProperty(start,"index",{"enumerable":true,"configurable":false,"get":function(){return jData.index}});Object.defineProperty(start,"remove",{"enumerable":true,"configurable":false,"get":function(){return remove}});Object.defineProperty(start,"clear",{"enumerable":true,"configurable":false,"get":function(){return clear}});Object.defineProperty(start,
"setActive",{"enumerable":true,"configurable":false,"writable":false,"value":setActive});Object.defineProperty(start,"hide",{"enumerable":true,"configurable":false,"writable":false,"value":hideMenu});setTimeout(function(){helper.style.removeClass(menuContainer,"hidden")},1E3);return start}});registerElem({type:_enumSupportedTypes.TAB,constructor:function(jData){var tab={};var apps=[];var activeId=null;var elem=helper.dom.createJsonElement({type:"div",attributes:{class:"tab"},events:{mousedown:openMenuHandler,
touchstart:openMenuHandler}});var icon=helper.dom.appendJsonElement({parentElement:elem,type:"img",attributes:{class:"icon"}});var count=helper.dom.appendJsonElement({parentElement:elem,type:"div",attributes:{class:"count"},content:apps.length});update();var title=helper.dom.appendJsonElement({parentElement:elem,type:"div",attributes:{class:"title"}});var menuContainer=helper.dom.appendJsonElement({parentElement:elem,type:"div",attributes:{class:"menu-container hide none-display"}});function openMenuHandler(e){hideAll(jData.id);
var hasApps=apps.length>1;if(hasApps&&helper.style.hasClass(menuContainer,"hide")){helper.style.remove(menuContainer,"none-display");helper.style.replace(menuContainer,"hide","show")}else hideMenu();if(!hasApps)if(apps.length==1)apps[0].click()}function hideMenu(e){if(helper.style.hasClass(menuContainer,"show")){helper.style.replace(menuContainer,"show","hide");setTimeout(function(){helper.style.add(menuContainer,"none-display")},200)}}function update(){count.innerText=apps.length;if(apps.length>
1)helper.style.replace(count,"hidden","visible");else helper.style.replace(count,"visible","hidden")}function setActive(id,active){if(id)apps.forEach(function(item){if(item.id===id){activeId=id;if(active)helper.style.add(item.elem,"selected");else helper.style.remove(item.elem,"selected");title.innerText=item.title;elem.title=item.title}else helper.style.remove(item.elem,"selected")});if(active)helper.style.add(elem,"active");else helper.style.remove(elem,"active")}function setIcon(iconImage){if(iconImage.substr(0,
10)!="data:image")iconImage="data:image/png;base64,"+iconImage;icon.src=iconImage}function remove(){if(elem.parentElement)elem.parentElement.removeChild(elem);helper.dom.removeEvent(elem,["mousedown","touchstart"],openMenuHandler);tab=null;apps=null;activeId=null}function removeApp(app){var r=false,i=0,t=apps.length;while(!r&&i<t){if(apps[i]===app){apps.splice(i,1);menuContainer.removeChild(app.elem);update();r=true}i++}}function push(app){apps.push(app);menuContainer.appendChild(app.elem);app.parent=
tab;update()}function splice(app){var idx=-1,i=0,t=apps.length;while(i<t&&idx==-1)if(apps[i]==app)idx=i;apps.splice(idx,1);update()}function apps(){}Object.defineProperty(tab,"elem",{"enumerable":true,"configurable":false,"get":function(){return elem}});Object.defineProperty(tab,"id",{"enumerable":true,"configurable":false,"get":function(){return jData.id}});Object.defineProperty(tab,"subMenu",{"enumerable":true,"configurable":false,"get":function(){return menuContainer}});Object.defineProperty(tab,
"apps",{"enumerable":true,"configurable":false,"get":function(){return apps}});Object.defineProperty(tab,"push",{"enumerable":true,"configurable":false,"writable":false,"value":push});Object.defineProperty(tab,"splice",{"enumerable":true,"configurable":false,"writable":false,"value":splice});Object.defineProperty(tab,"index",{"enumerable":true,"configurable":false,"get":function(){return jData.index}});Object.defineProperty(tab,"remove",{"enumerable":true,"configurable":false,"get":function(){return remove}});
Object.defineProperty(tab,"removeApp",{"enumerable":true,"configurable":false,"get":function(){return removeApp}});Object.defineProperty(tab,"setIcon",{"enumerable":true,"configurable":false,"writable":false,"value":setIcon});Object.defineProperty(tab,"setActive",{"enumerable":true,"configurable":false,"writable":false,"value":setActive});Object.defineProperty(tab,"hide",{"enumerable":true,"configurable":false,"writable":false,"value":hideMenu});Object.defineProperty(tab,"hasIcon",{"enumerable":true,
"configurable":false,"get":function(){return icon.src&&icon.src.length>0}});setTimeout(function(){helper.style.removeClass(menuContainer,"hidden")},1E3);if(jData.icon)setIcon(jData.icon);return tab}});registerElem({type:_enumSupportedTypes.APP,constructor:function(jData,parent){var app={};var index=jData.index;var elem=helper.dom.createJsonElement({type:"div",attributes:{class:"app"},events:{mousedown:jData.events.click||jData.events.mousedown||_noop,touchstart:jData.events.click||jData.events.touchstart||
_noop}});var icon=null;if(jData.icon){let iconImage=jData.icon;icon=helper.dom.appendJsonElement({parentElement:elem,type:"img",attributes:{class:"icon"}});if(iconImage.indexOf(location.origin)===-1&&iconImage.substr(0,10)!="data:image")iconImage="data:image/png;base64,"+iconImage;icon.src=iconImage}else icon=helper.dom.appendJsonElement({parentElement:elem,type:"div",attributes:{class:"icon "+(cookiePrefix==="RDP"?"thin-dialog":"thin-remoteapp2")}});var title=helper.dom.appendJsonElement({parentElement:elem,
type:"div",attributes:{class:"title"}});function update(item){title.innerText=item.title;if(!_apps.textApp){_apps.textApp=helper.font.getFont(title);_apps.titleWidth=helper.size.cleanValue(helper.style.getAttribute(title,"max-width"))}var w=parseInt(helper.font.getWidth(item.title,_apps.textApp),10);if(w>_apps.titleWidth)title.title=item.title;else title.title=""}function setActive(active){parent.setActive(jData.id,active)}function remove(){helper.dom.removeEvent(elem,"mousedown",jData.events.click||
jData.events.mousedown||_noop);helper.dom.removeEvent(elem,"touchstart",jData.events.click||jData.events.touchstart||_noop);parent.removeApp(app)}setTimeout(function(){update(jData)},1);Object.defineProperty(app,"elem",{"enumerable":true,"configurable":false,"get":function(){return elem}});Object.defineProperty(app,"id",{"enumerable":true,"configurable":false,"get":function(){return jData.id}});Object.defineProperty(app,"update",{"enumerable":true,"configurable":false,"get":function(){return update}});
Object.defineProperty(app,"setActive",{"enumerable":true,"configurable":false,"writable":false,"value":setActive});Object.defineProperty(app,"title",{"enumerable":true,"configurable":false,"get":function(){return jData.title}});Object.defineProperty(app,"parent",{"enumerable":true,"configurable":false,"get":function(){return parent},"set":function(elem){parent=elem}});Object.defineProperty(app,"click",{"enumerable":true,"configurable":false,"writable":false,"value":function(){(jData.events.click||
jData.events.mousedown||jData.events.touchstart||_noop)(elem)}});Object.defineProperty(app,"remove",{"enumerable":true,"configurable":false,"get":function(){return remove}});return app}});registerElem({type:_enumSupportedTypes.ICON,constructor:function(jData){if(jData&&_elems.iconsContainer){var iconObj={};var _id=jData.action||jData.attributes?.icon||jData.caption;let clickHandler=e=>{e.stopPropagation();e.preventDefault();if(jData.handler)try{jData.handler(e)}catch(error){}else if(jData.action)_args.oProperties.process(jData.action)};
var elem=helper.dom.appendJsonElement({parentElement:_elems.iconsContainer,type:"div",attributes:{class:`icon-container ${jData?.attributes?.icon||""}`,title:jData.caption||""},events:{mousedown:clickHandler||_noop,touchstart:clickHandler||_noop}});var icon=null;if(jData.icon){let iconImage=jData.icon;icon=helper.dom.appendJsonElement({parentElement:elem,type:"img",attributes:{class:"icon"}});if(iconImage.indexOf(location.origin)===-1&&iconImage.substr(0,10)!="data:image")iconImage="data:image/png;base64,"+
iconImage;icon.src=iconImage}function update(def){if(def?.attributes?.icon)elem.className=`icon-container ${def?.attributes?.icon||""}`;elem.title=def.caption||""}function remove(){_elems.iconsContainer.removeChild(elem);helper.dom.removeEvent(elem,"mousedown",clickHandler||_noop);helper.dom.removeEvent(elem,"touchstart",clickHandler||_noop)}Object.defineProperty(iconObj,"elem",{"enumerable":true,"configurable":false,"get":function(){return elem}});Object.defineProperty(iconObj,"id",{"enumerable":true,
"configurable":false,"get":function(){return _id}});Object.defineProperty(iconObj,"click",{"enumerable":true,"configurable":false,"writable":false,"value":function(){(jData.events.click||jData.events.mousedown||jData.events.touchstart||_noop)(elem)}});Object.defineProperty(iconObj,"update",{"enumerable":true,"configurable":false,"writable":false,value:update});Object.defineProperty(iconObj,"remove",{"enumerable":true,"configurable":false,"get":function(){return remove}});return iconObj}}})}function updateSize(){if(!_apps.textApp)_apps.textApp=
{"style":"normal","weight":"400","name":"Verdana","size":"14px;"};for(var i=0,t=_apps.tabs.length;i<t;i++){var tab=_apps.tabs[i];var minWidth=helper.size.cleanValue(helper.style.getAttribute(tab.subMenu,"minWidth"));var iconWidth=0;for(var j=0,k=tab.apps.length;j<k;j++){var app=tab.apps[j];var size=app.size;if(size.minWidth>minWidth)minWidth=size.minWidth;if(size.icon>iconWidth)iconWidth=size.icon}tab.subMenu.style.width=minWidth+"px";for(var j=0,k=tab.apps.length;j<k;j++){var app=tab.apps[j];app.title.style.maxWidth=
minWidth-w+"px"}}}function assignShortcuts(){createTab=_registeredElem[_enumSupportedTypes.TAB].constructor;createApp=_registeredElem[_enumSupportedTypes.APP].constructor;createStart=_registeredElem[_enumSupportedTypes.START].constructor;createIcon=_registeredElem[_enumSupportedTypes.ICON].constructor}function removeApp(jData){}function dispose(){if(!_disposed){removehandlers();_args=null;if(_createToolbar)_elems.container.parentElement.removeChild(_elems.container);_start=null;_apps=null;createTab=
null;createApp=null;createStart=null;createIcon=null;_disposed=true;_args?.oProperties?.off("propertiesUpdated",propertiesUpdated)}}function setActiveId(id){var b=true,i=0,t=_apps.tabs.length;while(b&&i<t){var appItem=_apps.tabs[i].apps.find(function(app){return app.id===id});if(appItem){appItem.setActive(true);b=false}i++}}function updateApps(jData){if(_createToolbar&&jData){var updateId=helper.utils.getGUID();if(jData.icons)jData.icons.forEach(function(icon){let keySize=null;if(!_apps.icons[icon.id])_apps.icons[icon.id]=
{};if(icon?.icons)for(keySize in icon.icons)_apps.icons[icon.id][keySize]=icon.icons[keySize];else{keySize=`${icon.width}x${icon.height}`;if(keySize.length<3)keySize=_args.defaultIconSize;_apps.icons[icon.id][keySize]=icon}});if(jData.windows){var setIcon=true;jData.windows.forEach(function(item){let appId=_combineApps?item.appid:item.id;var tab=_apps.tabs.find(function(elem){return elem.id===appId});if(!tab){tab=createTab({"icon":"","id":appId,"index":_apps.tabIdx*10,showTitle:!_combineApps});setIcon=
false;_apps.tabs.push(tab);_elems.container.appendChild(tab.elem);_apps.tabIdx++}else if(!tab.hasIcon)setIcon=false;tab.updateId=updateId;tab.setActive(null,false);var app=tab.apps.find(function(elem){return elem.id===item.id});if(!app){app=createApp({"title":item.title,"id":item.id,"index":_apps.appIdx*10,"state":item.state,"events":{"click":function(e){_args.methods.output({"cmd":"restore","data":item})}}});tab.push(app);_apps.appIdx++;app.setActive(false)}else app.update(item);if(!setIcon&&item.icons&&
item.icons.length>0)if(item.icons.length>1){setIcon=true;tab.setIcon(_apps.icons[item.icons[1]][_args.defaultIconSize].data)}app.updateId=updateId})}if(jData.activeid){var fe=false;if(_apps.activeid!=null&&_apps.activeid!=jData.activeid)fe=true;setActiveId(jData.activeid,false);_apps.activeid=jData.activeid;if(fe)fireEvent("change",{"activeid":jData.activeid},{"async":false})}for(var j=_apps.tabs.length-1;j>=0;j--){var tab=_apps.tabs[j];if(tab.updateId!=updateId){tab.remove();_apps.tabs.splice(j,
1)}else for(var i=tab.apps.length-1;i>=0;i--)if(tab.apps[i].updateId!=updateId)tab.apps[i].remove()}fireEvent("update",{},{"async":false})}}function registerElem(jObj){if(jObj&&!_registeredElem[jObj.type])_registeredElem[jObj.type]=jObj;else return"Cannot register this elem"}function unregisterElem(jObj){if(jObj&&_registeredElem[jObj.type])delete _registeredElem[jObj.type];else return"Cannot remove this elem"}function container_click(e){_srcEvt=e;return false}function slide_click(e){helper.style.hasClass(_elems.container,
"show")?hide():show()}function pin_click(e){if(helper.style.hasClass(_elems.dock,"unpinned")){_cfg.isPinned=true;helper.style.remove(_elems.dock,"unpinned");_args.methods.output({"cmd":"resize","data":{"width":0,"height":_elems.container.offsetHeight}})}else{_cfg.isPinned=false;helper.style.add(_elems.dock,"unpinned");_args.methods.output({"cmd":"resize","data":{"width":0,"height":0}})}setConfig()}function pin_transitionend(e){if(helper.style.hasClass(_elems.dock,"unpinned"))helper.style.remove(_elems.slide,
"hide");else helper.style.add(_elems.slide,"hide")}function show(){if(!_elems.container)draw();helper.style.replace(_elems.container,"hide","show")}function hide(){helper.style.replace(_elems.container,"show","hide")}initialize();Object.defineProperty(_ref,"dispose",{"enumerable":true,"configurable":false,"writable":false,"value":dispose});Object.defineProperty(_ref,"show",{"enumerable":true,"configurable":false,"writable":false,"value":show});Object.defineProperty(_ref,"hide",{"enumerable":true,
"configurable":false,"writable":false,"value":hide});Object.defineProperty(_ref,"updateProfiles",{"enumerable":true,"configurable":false,"writable":false,"value":updateProfiles});Object.defineProperty(_ref,"apps",{"enumerable":true,"configurable":false,"writable":false,"value":defineApps});Object.defineProperty(_ref,"update",{"enumerable":true,"configurable":false,"writable":false,"value":updateApps});Object.defineProperty(_ref,"registerElem",{"enumerable":true,"configurable":false,"writable":false,
"value":registerElem});Object.defineProperty(_ref,"unregisterElem",{"enumerable":true,"configurable":false,"writable":false,"value":unregisterElem});Object.defineProperty(_ref,"supportedTypes",{"enumerable":true,"configurable":false,"get":function(){return _enumSupportedTypes}});return this}try{Thinfinity!=undefined}catch(e){Thinfinity={}}Thinfinity.WindowToolbar=TWindowToolbar})();
(function(){var _registeredMenu=null;function registerMenuType(config){_registeredMenu=config}function Toolbar(args){var _ref=this;var _args={"id":null,"attributes":null,"itemClass":null,"owner":null,"useFont":true,"oProperties":null};var _buttons=[];var _buttonSelected=null;var _closeMenuTimer=null;var _optionSelected=null;var _itemClass="";var _tb=null;var _tbHndlr=null;var _autoIndex=0;var _tbStates=null;var _states=[];var _lastState=null;function initialize(){helper.object.parseAttributes(_args,
args);if(typeof _args.id=="undefined")return;if(typeof _args.attributes=="undefined"&&typeof _args.itemClass=="undefined")return;if(typeof _args.owner=="undefined"&&typeof _args.owner=="undefined")return;_args.attributes.id=_args.id;draw()}function draw(){_tb=helper.dom.appendJsonElement({"parentElement":document.body,"type":"div","attributes":_args.attributes});if(typeof _args.itemClass!="undefined")_itemClass=_args.itemClass;addButtons(_args.buttons);let buttons=null;if(_registeredMenu&&_registeredMenu.getOptions){buttons=
_registeredMenu.getOptions(_args.owner);if(_args.oProperties){let props=_args.oProperties.properties;buttons.forEach(menu=>{let item=props.find(item=>{return item.caption===menu.html});if(item)menu.initialState=item.initialState})}}else if(_args?.oProperties?.getLegacyOptions)buttons=_args.oProperties.getLegacyOptions();if(buttons){if(typeof _args.owner.rdParams!="undefined"&&typeof _args.owner.rdParams.toolbarRestrictions!="undefined")purgeOptions(buttons,_args.owner.rdParams.toolbarRestrictions);
addButtons(buttons)}_tbStates=helper.dom.appendJsonElement({"parentElement":_tb,"type":"div","attributes":{"class":"connectionToolbarItem states"}});_tbHndlr=helper.dom.appendJsonElement({"parentElement":_tb,"type":"div","attributes":{"id":"tbRdpHandle"+_args.id,"class":"tbRdpHandle flppd"},"content":"<hr/>","events":{"click":function(){if(helper.style.hasClass(this,"flppd"))expand();else contract()}}});refreshLayout()}function refresh(){destroy();draw();if(_lastState==="expanded")expand();else contract()}
function refreshLayout(){var w=20+_tbStates?.outerWidth||0;for(e=0;e<_buttons.length;e++){if($(_buttons[e]).css("display")!="none")w+=$(_buttons[e]).outerWidth(true);_buttons[e].mouseIn=0}}function attachEvents(elem,eventsObj){if(eventsObj.type==="action"){elem.event=eventsObj.event;helper.dom.addEvent(elem,"click",function(e){hideMenus();if(this.event)this.event(e)})}else if(eventsObj.type==="onoff"){elem.events=eventsObj.events;helper.dom.addEvent(elem,"click",function(e){hideMenus();if(helper.style.hasClass(this,
"pressed")){helper.style.removeClass(this,"pressed");if(typeof this.events!="undefined")if(typeof this.events.toggle!="undefined")this.events.toggle(this);else if(typeof this.events.release!="undefined")this.events.release(this)}else{helper.style.addClass(this,"pressed");if(typeof this.events)if(typeof this.events.toggle!="undefined")this.events.toggle(this);else if(typeof this.events.press!="undefined")this.events.press(this)}})}}function addMenu(id,options){var menu=helper.dom.appendJsonElement({"parentElement":document.body,
"type":"div","attributes":{"id":id+"_sm","class":"toolbarMenu","style":"display:none;"},"events":{"mouseenter":function(){if(_buttonSelected)_buttonSelected.mouseIn++},"mouseleave":function(){if(_buttonSelected)_buttonSelected.mouseIn--}}});for(var op=0;op<options.length;op++){var item=options[op];var jAttrs=typeof options[op].attributes!="undefined"?options[op].attributes:{};jAttrs.id=id+item.id?item.id:id+"_sm_"+op;if(_args.useFont&&item.icon)jAttrs.class=item.icon;var opt=helper.dom.appendJsonElement({"parentElement":menu,
"type":"div","attributes":jAttrs,"content":item.text});attachEvents(opt,options[op]);if(options[op].type==="submenu")addSubMenu(opt,options[op].options,options[op].events)}}function clickMenuButton(button){button.pressed=!button.pressed;if(!button.pressed)releaseMenuButton(button);else{if(_buttonSelected)releaseMenuButton(_buttonSelected);activeMenuButton(button)}}function activeMenuButton(button){if(_closeMenuTimer)window.clearInterval(_closeMenuTimer);helper.style.addClass(button,"pressed");var left=
button&&button.getBoundingClientRect?button.getBoundingClientRect().left:$(button).offset().left-(document.body.scrollLeft||window.pageXOffset);$("#"+$(button).attr("id")+"_sm").css("left",left).show();button.mouseIn=1;_buttonSelected=button;_closeMenuTimer=window.setInterval(function(){if(!isOnMenu())releaseMenuButton(_buttonSelected)},300)}function releaseMenuButton(button){if(_closeMenuTimer)window.clearInterval(_closeMenuTimer);if(button){$(button).removeClass("pressed");$("#"+$(button).attr("id")+
"_sm").hide();button.mouseIn=0;button.pressed=false}_buttonSelected=null}function hideMenus(){if(_optionSelected)releaseSubmenu(_optionSelected);if(_buttonSelected)releaseMenuButton(_buttonSelected)}function isOnMenu(){return _buttonSelected!=null&&_buttonSelected.mouseIn>0||isOnSubmenu()}function addSubMenu(item,subOptions,events){helper.style.addClass(item,"subMenu");item.events=events;helper.dom.addEvent(item,"mouseenter",function(){if(typeof this.events!="undefined"&&typeof this.events.mouseenter!=
"undefined")this.events.mouseenter(this);activeSubmenu(this)});helper.dom.addEvent(item,"mouseleave",function(){this.mouseIn--});var id=(item instanceof HTMLElement?$(item).attr("id"):item)+"_sm";var menu=helper.dom.appendJsonElement({"parentElement":document.body,"type":"div","attributes":{"id":id,"class":"toolbarMenu","style":"display:none;"},"events":{"mouseenter":function(){if(_optionSelected)_optionSelected.mouseIn++},"mouseleave":function(){if(_optionSelected)_optionSelected.mouseIn--}}});addSubButton(menu,
subOptions)}function addSubButton(parentElement,subOptions){for(var op=0;op<subOptions.length;op++){var item=subOptions[op];var jAttrs=typeof item.attributes!="undefined"?item.attributes:{};jAttrs.id=item.id?item.id:parentElement.id+"_"+op;if(_args.useFont&&item.icon)jAttrs.class=(jAttrs.class?" ":"")+item.icon;var opt=helper.dom.appendJsonElement({"parentElement":parentElement,"type":"div","attributes":jAttrs,"content":item.text});attachEvents(opt,item);if(item.type==="submenu")addSubMenu(opt,item.options,
item.events)}}function activeSubmenu(option){helper.style.addClass(option,"pressed");if(_optionSelected&&_optionSelected!=option)releaseSubmenu(_optionSelected);_optionSelected=option;$("#"+$(option).attr("id")+"_sm").css("left",$(option).offset().left+$(option).outerWidth(true)-(document.body.scrollLeft||window.pageXOffset)).css("top",$(option).offset().top-(document.body.scrollTop||window.pageYOffset)).show();option.mouseIn=1;if(option.closeSubmenuTimer)clearInterval(option.closeSubmenuTimer);option.closeSubmenuTimer=
window.setInterval(function(){if(!isOnSubmenu(option))releaseSubmenu(option)},300)}function releaseSubmenu(option){if(option.closeSubmenuTimer){window.clearInterval(option.closeSubmenuTimer);option.closeSubmenuTimer=null}if(option){$(option).removeClass("pressed");$("#"+$(option).attr("id")+"_sm").hide();option.mouseIn=0;option.pressed=false}if(option===_optionSelected)_optionSelected=null}function isOnSubmenu(option){return option&&_optionSelected===option&&_optionSelected.mouseIn>0||!option&&_optionSelected!=
null&&_optionSelected.mouseIn>0}function addEventToElem(elem,btnObj){if(btnObj.events instanceof Array){elem.events={};for(var ev=0;ev<btnObj.events.length;ev++){elem.events[btnObj.events[ev].name]=btnObj.events[ev].action;helper.dom.addEvent(elem,btnObj.events[ev].name,function(e){elem.events[e.type](e)})}}}function addButton(btnObj){if(btnObj.initialState!=="hidden"){if(_itemClass!=""){var attr=btnObj.attributes["class"];if(typeof attr!="undefined")btnObj.attributes["class"]=_itemClass+" "+attr;
else btnObj.attributes["class"]=_itemClass}if(_args.useFont&&btnObj.icon)btnObj.attributes["class"]+=" "+btnObj.icon;_autoIndex++;var idx=helper.object.getValue(btnObj,"index",_autoIndex*10);var button=helper.dom.createJsonElement({"parentElement":_tb,"type":"div","attributes":btnObj.attributes,"content":btnObj.html});button.idx=idx;var i=0,c=true,pElem=null;while(i<_buttons.length&&c&&idx!=-1){if(_buttons[i].idx>idx||_buttons[i].idx===-1){pElem=_buttons[i];c=false}i++}if(!pElem)_tb.appendChild(button);
else _tb.insertBefore(button,pElem);if(btnObj.type==="tbsubmenu"){button.pressed=false;addMenu(btnObj.attributes.id,btnObj.options);helper.dom.addEvent(button,"click",function(){clickMenuButton(this)});helper.dom.addEvent(button,"mouseleave",function(){this.mouseIn--});helper.dom.addEvent(button,"mouseenter",function(){if(_buttonSelected&&_buttonSelected!=this)clickMenuButton(this);else this.mouseIn++})}addEventToElem(button,btnObj);_buttons.push(button)}}function addNewButton(btnObj){if(btnObj.subMenu){if(!btnObj.parentElement&&
btnObj.parentName!="")btnObj.parentElement=document.getElementById(btnObj.parentName+"_sm");addSubButton(btnObj.parentElement,[btnObj])}else addButton(btnObj)}function addButtons(buttons){if(!!buttons){for(var b=0;b<buttons.length;b++)addButton(buttons[b]);refreshLayout()}}function updateButton(btnObj){var btnId=btnObj&&btnObj.attributes&&btnObj.attributes.id?btnObj.attributes.id:null;var button=document.getElementById(btnId);if(button)removeSubMenu(btnId);if(btnObj.type==="tbsubmenu"){addMenu(btnObj.attributes.id,
btnObj.options);if(button.pressed)activeMenuButton(button)}}function updateButtons(buttons){if(!!buttons)for(var b=0;b<buttons.length;b++)updateButton(buttons[b])}function updateElem(button){if(!!button)updateButton(button)}function purgeOptions(buttons,restrictions){for(var tbr=0;tbr<restrictions.length;tbr++){var tbPath=restrictions[tbr].split(".");var n=0;while(n<buttons.length&&buttons[n].attributes.id!=tbPath[0])n++;if(n<buttons.length)if(tbPath.length==1)buttons.splice(n,1);else{var elements=
buttons[n].options;var level=1;while(typeof elements!="undefined"&&level<tbPath.length){n=0;while(n<elements.length&&elements[n].id!=tbPath[level])n++;if(n<elements.length&&level<tbPath.length-1)elements=elements[n].options;level++}if(level==tbPath.length&&n<elements.length)elements.splice(n,1);else helper.console.log("item related to toolbar restriction "+tbPath.join(".")+" not found")}else helper.console.log("item related to toolbar restriction "+tbPath.join(".")+" not found")}}function removeOption(itemName){var optBtn=
document.getElementById(itemName);if(optBtn){removeSubMenu(itemName);$(optBtn).off();optBtn.parentElement.removeChild(optBtn)}}function removeSubMenu(item){var sm=item instanceof HTMLElement?item:document.getElementById(item+"_sm");if(sm){var options=$(sm).find("div");for(var d=options.length-1;d>=0;d--)removeOption(options[d].id);$(sm).off();sm.parentElement.removeChild(sm)}}function destroy(){if(_tb==null)return;var options=$(_tb).find("."+_itemClass);for(var o=options.length-1;o>=0;o--)removeOption(options[o].getAttribute("id"));
if(_tb.parentElement!=null)_tb.parentElement.removeChild(_tb);_buttons=[];_buttonSelected=null;_closeMenuTimer=null;_optionSelected=null;_itemClass="";_tbHndlr=null;_autoIndex=0;_tbStates=null;_states=[];_tb=null}function setState(obj){_states[obj.state]={"value":obj.value,"title":obj.title};updateStates()}function removeState(state){delete _states[state];updateStates()}function updateStates(){_tbStates.innerHTML="";for(state in _states)helper.dom.appendJsonElement({"parentElement":_tbStates,"type":"div",
"attributes":{"class":"state "+state},"title":state.tooltip});if(_tbStates.innerHTML!="")helper.style.addClass(_tbStates,"visible");else helper.style.removeClass(_tbStates,"visible");refreshLayout()}function expand(){if(!isVisible()){helper.style.removeClass(_tbHndlr,"flppd");_lastState="expanded";helper.style.addClass(_tb,_lastState)}}function contract(){if(isVisible()){helper.style.removeClass(_tb,"expanded");_lastState="";helper.style.addClass(_tbHndlr,"flppd")}}function isVisible(){return!helper.style.hasClass(_tbHndlr,
"flppd")}initialize(args);Object.defineProperty(_ref,"removeOption",{"enumerable":false,"configurable":false,"writable":false,"value":removeOption});Object.defineProperty(_ref,"addButton",{"enumerable":false,"configurable":false,"writable":false,"value":addButton});Object.defineProperty(_ref,"addNewButton",{"enumerable":false,"configurable":false,"writable":false,"value":addNewButton});Object.defineProperty(_ref,"addButtons",{"enumerable":false,"configurable":false,"writable":false,"value":addButtons});
Object.defineProperty(_ref,"updateButtons",{"enumerable":false,"configurable":false,"writable":false,"value":updateButtons});Object.defineProperty(_ref,"updateElem",{"enumerable":true,"configurable":false,"writable":false,"value":updateElem});Object.defineProperty(_ref,"isVisible",{"enumerable":false,"configurable":false,"writable":false,"value":isVisible});Object.defineProperty(_ref,"expand",{"enumerable":false,"configurable":false,"writable":false,"value":expand});Object.defineProperty(_ref,"contract",
{"enumerable":false,"configurable":false,"writable":false,"value":contract});Object.defineProperty(_ref,"setState",{"enumerable":false,"configurable":false,"writable":false,"value":setState});Object.defineProperty(_ref,"removeState",{"enumerable":false,"configurable":false,"writable":false,"value":removeState});Object.defineProperty(_ref,"refresh",{"enumerable":false,"configurable":false,"writable":false,"value":refresh});Object.defineProperty(_ref,"dispose",{"enumerable":false,"configurable":false,
"writable":false,"value":destroy});Object.defineProperty(_ref,"showPin",{"enumerable":false,"configurable":false,"writable":false,"value":expand});Object.defineProperty(_ref,"hidePin",{"enumerable":false,"configurable":false,"writable":false,"value":contract});return _ref}try{Thinfinity!=undefined}catch(e){Thinfinity={}}Thinfinity.Toolbar=Toolbar;Object.defineProperty(Thinfinity.Toolbar,"register",{"enumerable":true,"configurable":false,"writable":false,"value":registerMenuType})})();
jQuery.support.cors=true;if(!window.hasOwnProperty("productId"))window.productId="thinvnc";
ThinVNC=function(){var TVNC=this;var cmdCache=null;this.cookiesLoaded=false;this.browserCapabilitiesAvailable=helper.object.getValue(window,"customSettings.browserCapabilities",false);this.mouseX=-1;this.mouseY=-1;this.lastMouseAction="";this.caretX=0;this.caretY=0;this.mouseMoved=false;this.vncdiv;this.baseZIndex=8E5;this.majorVersion;this.firefoxVersion;this.iphone;this.ios;this.mac;this.mobile;this.supportsCanvas;this.startPending=true;this.jsonTimeoutValue=7E4;this.disposeTimeoutValue=25;this.disposeTimeout;
this.endingsession=false;this.pageX=0;this.pageY=0;this.button="";this.imagesLoading=0;this.fs=null;this.cacheLoaded=false;this.startCmdToSend=false;this.dbFiles=[];this.centered=true;this.vncdivId="mainPanel";this.vncContainer=null;this.reconnectDivId="recnx";this.canvasER=null;this.processNextScreenEnabled=true;this.deferCallBySetTimeout=false;this.queueRequestName="requestQueue";this.queueRecycleImg=new Array;this.recycleImgTimeoutValue=5E3;this.reconnectDelay=0;this.runInPublicServer=false;this.ws=
null;this.wsEnabled=false;this.wsAsyncRecv=false;this.wsAsyncRecvTimeout=10;this.wsSendReady=false;this.imgLoaderThreadPool=null;this.connecting=false;this.xmlHttpJson=null;this.lastKeyCode=0;var _onlyKeyCode=false;this.reconnecting=false;this.touching=false;this.crossdomain=false;this.imageCache2=[new Array(600),new Array(600),new Array(2048),new Array(4096),new Array(2048)];this.imageCacheV=[new Array(200),new Array(200),new Array(200),new Array(200),new Array(200)];this.brushCache=new Array(100);
this.offscreenCache=new Array(100);this.rdpGlyphArray=new Array(12);this.textCache=new Array(256);this.offscreenCanvas=null;this.MouseHooked=false;this.KeyboardHooked=false;this.containerWidth=0;this.containerHeight=0;this.msgQueue=[];this.imgQueue=null;this.imgQueueTimeout=1E4;this.imgIndex=0;this.imageListType=0;this.registeredDrawCmds={};this.registeredOOBCmds={};this.registeredCustomDataTypes={};this.registeredCustomCmds={};this.screenHeight=window.environment.rawHeight||window.screen.height;
this.screenWidth=window.environment.rawWidth||window.screen.width;this.canvasPrinter=null;this.xoff=false;this.useBufferedCanvas=false;this.gatewayAccessKey="";var _preferredBrokerKey="__#thinfinity.preferredBrokerId__";var _oturlDataPassKey="oturlDataPass";var _sessionStoragePreservedKeys=[_oturlDataPassKey,_preferredBrokerKey];this.savedMaxWidth=0;this.savedMaxHeight=0;this.inputEnabled=false;this.cmdCacheProps={};this.controlFactory=null;this.enableCmdCache=false;this.canvasInitiallyHidden=false;
this.logger=new JSLogAPI(this);this.printerManager=null;this.rdpMode=false;this.usedDPR=1;this.apiUrl="__base__/";var _CUEnabled=false;var _navigationTypes=helper.object.createEnum({"navigate":0,"reload":1,"back_forward":2,"prerender":3,"reserved":255});var isNewNavigation=function(){var result=false;var nt=_navigationTypes.navigate;if(window.performance){nt=_navigationTypes.getKey(helper.object.getValue(window.performance,"navigation.type",0));if(window.performance.getEntriesByType){var entries=
window.performance.getEntriesByType("navigation");nt=entries.length>0?_navigationTypes[entries[0].type]:nt}}result=!(nt===_navigationTypes.reload||nt===_navigationTypes.back_forward);return result};var currentWindowName=function(){try{var sname=window.name!=""?window.name:window.id!=undefined&&window.id!=""?window.id:window.frameElement?window.frameElement.id||window.frameElement.name:null;if(sname)return"CWN["+sname+"]"}catch(error){return null}};var wndId=currentWindowName()||"_sid";var ID={"key":function(){return(location.pathname.replace(/\//g,
"")+"_"+wndId).toLowerCase()},"get":function(){var k=sessionStorage.getItem(this.key());return k},"set":function(id){sessionStorage.setItem(this.key(),id)},"remove":function(){sessionStorage.removeItem(this.key())}};var WNDOpener={"key":function(){return(location.pathname.replace(/\//g,"")+"_hasOpener").toLowerCase()},"get":function(){var k=sessionStorage.getItem(this.key());return k},"set":function(hasOpener){sessionStorage.setItem(this.key(),hasOpener)},"remove":function(){sessionStorage.removeItem(this.key())}};
if(window.sessionStorage&&!isNewNavigation()){var sid=ID.get();var opener=WNDOpener.get();let len=sessionStorage.length;let i=0;for(i=0;i<len;i++){let k=sessionStorage.key(i);if(_sessionStoragePreservedKeys.indexOf(k)===-1)sessionStorage.removeItem(k)}if(sid)ID.set(sid);if(!window.opener&&opener){WNDOpener.set(true);window.opener=true}}else{WNDOpener.set(window.opener?true:false);ID.remove()}this.rcParams={pcId:"",publickey:"",id:null,clipboard:true,clipboardFileTransfer:false,active:false,showOnStart:true,
hookKeyboard:true,hookMouse:true,centered:true,centeredMode:"both",exitURL:"about:blank",monitor:0,monitorCount:0,viewLeft:0,viewTop:0,viewWidth:0,viewHeight:0,maxWidth:0,maxHeight:0,borderLeft:0,borderRight:0,borderTop:0,borderBottom:0,screenResX:0,screenResY:0,mouseControl:true,touchControl:true,kbdControl:true,kbdUnicode:true,kbdLogKeys:false,clientAck:-1,scraper:null,scraperArgs:null,quality:90,pixelFormat:0,grayscale:false,imageMethod:2,wallpaper:false,wscompression:true,cursorVisible:true,remotePointer:true,
relativeTouch:agentInfo.isMobile,mousePressAsRightButton:false,dragDist:32,scaled:true,divId:null,server:null,protocol:null,url:null,reconnectDelay:3E3,address:"",ticket:"",pin:"",sessionKey:"",externalId:"",userid:null,password:null,playsession:false,serverControlMouse:false,forceAjax:false,delayTouch:250,tbSize:"",xoffEnabled:true,xoffThreshold:20,xonThreshold:5,persistentCache:false,rleThreshold:70,useSendThread:false,lfn:null,useDblClick:false,fitToBrowser:true,fitmode:0,overflow:"auto",useFocus:false,
isCrossDomain:false,savesession:false,forceDesktop:false,rfxEnabled:false,sound:{enabled:false},isAutoFocusEnabled:true,isJsROEnabled:true,UBRWID:null,extraData:null,mouseMoveProcessInterval:10,overrideCursor:false,enableH264:false,enableGfx:false,events:{onServerError:null,onExecRemoteApp:null,onExecResult:null,onFileDownload:null,onOpenLink:null,onServerMessage:null,onFileReady:null,onFileStream:null,onRemoteCommand:null,onServerAuthenticationRequired:null,onServerNeedCredentials:null,onScreenReceived:null,
onServerConnect:null,onDisplayInteractionRequired:null,onBrokerError:null,onServerConnectionError:null,onServerCommandEvent:null,onServerCommandResult:null,onServerDisconnect:null,onServerRedirect:null,onServerConnecting:null,onSessionStart:null,onSessionEnd:null,onSessionStop:null,onProcessWindow:null,onDeleteWindow:null,onWindowStateChanged:null,onReceiveMessage:null,onPropertyChange:null,onSendKey:null,onKeyCode:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onPlaybackEnds:null,onCanvasResize:null,
onZoomDesktop:null,onConnectionLost:null,onConnectionRestored:null,onMouseAnimationFrameEnd:null,onLicenseMsg:null,onPrintHandler:null,onWakeOnLan:null,onWaitForVM:null,onSessionTimeout:null,onCopy:null,onPaste:null,onCut:null,onCopyFiles:null,onReconnectionAttempt:null,onShadowingStatus:null,onCreateCanvas:null,onReleaseCanvas:null,onTouchDeviceDetected:null},cursorCanvas:{x:0,y:0},synchronizeClipboard:true,isShadowSession:false};var WebPImageFormat=new function(){var supportsLossyWebp=null;var supportsLosslessWebp=
null;this.getSupportsWebP=function(){var res=0;if(supportsLosslessWebp!=null&&supportsLossyWebp!=null){if(supportsLosslessWebp)res|=2;if(supportsLossyWebp)res|=1}return res};this.supportsWebP=function(){if(supportsLosslessWebp==null||supportsLossyWebp==null){var img=new Image;img.onload=function(){supportsLossyWebp=img.width==4&&img.height==4};img.onerror=function(){supportsLossyWebp=false};img.src="data:image/webp;base64,UklGRkYAAABXRUJQVlA4IDoAAABwAgCdASoEAAQAAYcIhYWIhYSIiQIADAzdrBLeABAAAAEAAAEAAPKn5Nn/0v8//Zxn/6H3QAAAAAA=";
var img2=new Image;img2.onload=function(){supportsLosslessWebp=img.width==4&&img.height==4};img2.onerror=function(){supportsLosslessWebp=false};img2.src="data:image/webp;base64,UklGRiYAAABXRUJQVlA4TBoAAAAvA8AAAA8w//M///MfeFDTtgEL3+5G9D+AHA=="}return this.getSupportsWebP()};this.supportsWebP()};var RdpGlyph=function(font,character,offset,baseLine,width,height,fontData){this.font=font;this.character=character;this.offset=offset;this.baseLine=baseLine;this.width=width;this.height=height;this.fontData=
fontData};function TextEntry(size,data){this.size=size;this.data=data}var codec={binaryTable:[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,0,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1],decode:function(data){var btable=
codec.binaryTable,len,bindex,dindex,e,j,n=0,u=0;len=data.indexOf("=");if(len<0)len=data.length;var output=Array((len>>2)*3+Math.floor(len%4/1.5));e=0;for(j=0;j<data.length;j++){bindex=btable[data.charCodeAt(j)&127];dindex=data.charAt(j)==="=";if(bindex===-1)logError("Illegal character '"+data.charCodeAt(j)+"'");else{u=u<<6|bindex;n+=6;if(n>=8){n-=8;output[e++]=u>>n&255;u&=(1<<n)-1}}}if(n)throw"Invalid base64 encoding";return output}};this.emptyRecycleImgTimeout=null;this.allowMouse=false;if(helper.object.existsPath(arguments,
"0.clientSettings"))self.clientSettings=arguments[0].clientSettings;this.observable={"useAjax":true,"connected":null,"viewHeight":0,"viewWidth":0,"isOTURLSession":false};var _restartConnectTimeout=2E3;var allowOverrideCursor=!agentInfo.isMobile&&cookiePrefix!=="VNC"&&(!agentInfo.isFirefox||window.devicePixelRatio==1)&&!agentInfo.isMSIE&&productId!="ZSC"?true:false;if(allowOverrideCursor&&helper.object.existsPath(self,"clientSettings.OverrideCursor"))TVNC.rcParams.overrideCursor=self.clientSettings.OverrideCursor;
TVNC.rcParams.overrideCursor=!(agentInfo.isMobile||agentInfo.isTouch);var _visualEffect=null;var _customEventsHandler={};var _allowMouseCapture=true;var _checkSizeAndResolutionTimeoutId=null;var _deltaYMultiplier=agentInfo.isOpera?-1:1;var _enumCloseStatusReason=helper.object.createEnum({"ERROR":-1,"DISCONNECT":0,"CLOSE":1});var _isPktIdxEnabled=false;var _lastPkt={"idx":0,"group":0,"reset":false};Object.defineProperty(this,"pktIdxEnabled",{"enumerable":false,"configurable":false,"get":function(){return _isPktIdxEnabled},
"set":function(value){_isPktIdxEnabled=helper.object.convertTo(value,"boolean");if(_isPktIdxEnabled){_lastPkt.reset=true;_lastPkt.idx=-1}}});var _avoidConnectionLostPopup=false;var _mouseQueueTimeout=null;var _blob={"threshold":4E3,"on":typeof ThinVNCApp=="undefined","processedScreenUrl":[],"processedMouseUrl":[],"revoked":false};var _usedImgQueueItems=[];var _location="";var _virtualPathProfile="";var _fromBroker=typeof window.fromBroker!="undefined"?window.fromBroker:false;var rePP=RegExp(/\?|&/);
var STATE_INITIAL=0,STATE_PENDING=1,STATE_ACTIVE=2,STATE_EXPIRED=3,STATE_ERROR=4,STATE_BUSY=5,RDP_NO_INFO=0,RDP_LOGIN_START=1,RDP_LOGIN_INFO=2,RDP_LOGIN_END=3,RDP_LOGIN_ERROR=4;var PROVISSIONING_CREATING=4096,PROVISSIONING_UPDATING=8192,PROVISSIONING_FAILED=16384,PROVISSIONING_SUCCEEDED=32768,PROVISSIONING_DELETING=65536,PROVISSIONING_MIGRATING=131072,POWERSTATE_CREATING=1,POWERSTATE_STARTING=2,POWERSTATE_RUNNING=4,POWERSTATE_STOPPING=8,POWERSTATE_STOPPED=16,POWERSTATE_DEALLOCATING=32,POWERSTATE_DEALLOCATED=
64;var _urlCreator=window.URL||window.webkitURL;var _SIDName=(typeof window.cookiePrefix!="undefined"?window.cookiePrefix+"_":"")+"SID";var _splashCssName=".establishingConnection";var _isSessionEnded=false;var _noop=function(){};var _pendingGrowlsPopups=[];var _licenseTypes=helper.object.createEnum("ERR_TYPE_INFO","ERR_TYPE_WARNING","ERR_TYPE_ERROR");const generateId=()=>`${performance.now()}${Math.random().toString().slice(5)}`.replace(".","");var _getServerUrl={"timeout":1E3,"normal_timeout":1E3,
"vm_timeout":5E3,"id":generateId(),"forceNewRedirection":false,"forceNewRedirectionUsed":false,oturlMaxRetries:4,retriesCount:0};var _xhrStatusExitCodes=[Thinfinity.Communication.errorCode.PAYMENT_REQUIRED,Thinfinity.Communication.errorCode.UNAUTHORIZED];if(helper.url.gup("serviceScreen")!="")if(Thinfinity.ServiceScreen){window.serviceScreen=new Thinfinity.ServiceScreen({"parentElement":document.body});window.serviceScreen.addValue("Use-Ajax",function(){return TVNC.useAjax});window.serviceScreen.addValue("Force-Ajax",
function(){return TVNC.rcParams.forceAjax.toString()})}var _isTemporalConnection=helper.object.convertTo(helper.url.gup("sdk")!="","bool");var _defaultResponseType=helper.ajax.responseType.JSON;var _comm=null;var _avoidSendMouseMove=false;Object.defineProperty(this,"avoidSendMouseMove",{"enumerable":true,"configurable":false,"get":function(){return _avoidSendMouseMove},"set":function(value){_avoidSendMouseMove=value;if(!_avoidSendMouseMove)TVNC.sendMouseMove()}});var _syncCookies={syncCookiesTime:2500,
syncCookiesTOUT:null,syncCookiesEnabled:true,data:{}};var _componentsInitialized=false;var _componentRegistrationServices=null;var _registeredEventsServicesList={};var _enumEventsServices=helper.object.createEnum({"SENDEVENT":1});var _url={"baseUrl":"","gatewayAccess":null,"httpConnection":"","wsConnection":"","brokerUrl":""};Object.defineProperty(this,"baseUrl",{"configurable":false,"enumerable":true,"get":function(){return _url.baseUrl},"set":function(baseUrl){_url.baseUrl=baseUrl}});Object.defineProperty(this,
"httpConnection",{"configurable":false,"enumerable":true,"get":function(){return _url.httpConnection}});Object.defineProperty(this,"hasSecondaryGateway",{"configurable":false,"enumerable":true,"get":function(){return _url.gatewayAccess&&_url.gatewayAccess!==""}});Object.defineProperty(this,"brokerUrl",{"configurable":false,"enumerable":true,"get":function(){return _url.brokerUrl}});var _clipSynchronized=false;function padZero(num,size){return("00000000"+num).substr(-size)}function setPlugin(plugin){if(plugin==
undefined||plugin==null){var arPluginName=null;for(var plugin in _plugins)if(helper.object.getValue(_plugins,plugin+".enabled",false)){if(arPluginName==null)arPluginName=[];arPluginName.push(plugin)}return arPluginName}else if(helper.object.validate(plugin)&&helper.object.validate(plugin["name"])&&helper.object.validate(plugin["obj"])){if(_plugins[plugin["name"]]==undefined)_plugins[plugin["name"]]={"obj":null};_plugins[plugin["name"]]["enabled"]=plugin["enabled"]||true;_plugins[plugin["name"]]["obj"]=
plugin["obj"]}else return helper.string.sprintf(consts.errorExternalPlugin)}function on(name,handler){if(!_customEventsHandler[name])_customEventsHandler[name]=[];var wasAdded=false;for(var i=0;i<_customEventsHandler[name].length;i++)if(_customEventsHandler[name]===handler){wasAdded=true;break}if(!wasAdded)_customEventsHandler[name].push(handler)}function off(name,handler){if(_customEventsHandler[name])for(var i=_customEventsHandler[name].length-1;i>=0;i--)if(_customEventsHandler[name]===handler)_customEventsHandler[name].splice(i,
1)}function triggerCustomEvent(name,data){if(_customEventsHandler&&_customEventsHandler[name])for(var i=0;i<_customEventsHandler[name].length;i++)try{return _customEventsHandler[name][i](data)}catch(error){}}function addValidCanvas(canvas){if(_validCanvas.indexOf(canvas)===-1)_validCanvas.push(canvas)}Object.defineProperty(this,"useAjax",{"enumerable":true,"configurable":true,"get":function(){return TVNC.observable.useAjax},"set":function(value){TVNC.observable.useAjax=value}});Object.defineProperty(this,
"connected",{"enumerable":true,"configurable":true,"get":function(){return _comm.connected},"set":function(value){_comm.connected=value}});Object.defineProperty(this.rcParams,"viewWidth",{"enumerable":true,"configurable":true,"get":function(){return TVNC.observable.viewWidth},"set":function(value){TVNC.observable.viewWidth=value}});Object.defineProperty(this.rcParams,"viewHeight",{"enumerable":true,"configurable":true,"get":function(){return TVNC.observable.viewHeight},"set":function(value){TVNC.observable.viewHeight=
value}});Object.defineProperty(this,"containerId",{"enumerable":true,"configurable":true,"get":function(){return TVNC.rcParams.divId}});Object.defineProperty(this,"setKeyboardFocus",{"enumerable":true,"configurable":false,"writable":false,"value":function(){return _displayManager.focus()}});var _displayObj={};Object.defineProperty(this,"display",{"enumerable":true,"configurable":false,"get":function(){return _displayObj}});Object.defineProperty(_displayObj,"manager",{"enumerable":true,"configurable":false,
"get":function(){return _displayManager}});Object.defineProperty(_displayObj,"managerInterface",{"enumerable":true,"configurable":false,"get":function(){return _oInterface.new}});Object.defineProperty(this,"allowMouseCapture",{"enumerable":true,"configurable":true,"get":function(){return _allowMouseCapture},"set":function(value){if(!TVNC.rcParams.serverControlMouse||!value)_allowMouseCapture=value}});Object.defineProperty(this,"overrideCursor",{"enumerable":true,"configurable":true,"get":function(){return allowOverrideCursor&&
TVNC.rcParams.overrideCursor},"set":function(value){if(allowOverrideCursor)TVNC.rcParams.overrideCursor=value}});Object.defineProperty(this,"on",{"enumerable":true,"configurable":true,"writable":false,"value":on});Object.defineProperty(this,"off",{"enumerable":true,"configurable":true,"writable":false,"value":off});Object.defineProperty(this,"__recvPingResponse",{"enumerable":false,"configurable":false,"value":function(){return _comm.recvPingResponse()}});Object.defineProperty(this,"plugins",{"enumerable":false,
"configurable":true,"value":function(plugin){return setPlugin(plugin)}});Object.defineProperty(this,"location",{"enumerable":true,"configurable":true,"get":function(){return _location}});Object.defineProperty(this,"virtualPath",{"enumerable":true,"configurable":true,"get":function(){return _virtualPathProfile}});Object.defineProperty(this,"fromBroker",{"enumerable":false,"configurable":true,"get":function(){return _fromBroker},"set":function(value){return _fromBroker=helper.object.convertTo(value,
"boolean")}});Object.defineProperty(this,"splashCssName",{"enumerable":false,"configurable":true,"get":function(){return _splashCssName},"set":function(value){return _splashCssName=value}});Object.defineProperty(this,"isTemporal",{"enumerable":false,"configurable":true,"get":function(){_isTemporalConnection}});Object.defineProperty(this,"H264",{"enumerable":false,"configurable":false,"get":function(){return _ePictureType===_enumPictureType.H264}});Object.defineProperty(this,"GFX",{"enumerable":false,
"configurable":false,"get":function(){return _ePictureType===_enumPictureType.GFX}});Object.defineProperty(this,"availableAudio",{"enumerable":true,"configurable":false,"get":()=>{return window.AudioContext?true:false}});Object.defineProperty(this,"enumCloseStatusReason",{"enumerable":true,"configurable":false,"get":function(){return _enumCloseStatusReason}});Object.defineProperty(this,"onSendEvent",{"enumerable":false,"configurable":false,"set":function(handler){if(handler&&handler instanceof Function)_registeredEventsServicesList[_enumEventsServices.SENDEVENT]=
handler}});this.allowFullscreenShortcut=productId=="thinrdp"?true:false;this.multiRowMinSize=40;if(agentInfo.isMSIE&&agentInfo.msieVersion<10)this.partialAnimationFrameUpdate=function(callback){setTimeout(callback,0)};else this.partialAnimationFrameUpdate=function(callback){callback()};var mouseCanvasX=0;var mouseCanvasY=0;var previousOrientation=null;var waitOrientationChangeTime=1E3;var elapsedOrientationTime=null;var allowSendingCommands=false;function createPrintDialog(){return typeof PrintDialog!=
"undefined"&&PrintDialog!=null?new PrintDialog({"onHide":function(){TVNC.pingIgnore=false},"onAssignDocument":function(){TVNC.pingIgnore=true},"owner":TVNC}):null}var printDialog=createPrintDialog();var timeBeforeReconnect=250;var timeoutIdBeforeReconnect=null;var resetTimeId=null;var isReset=false;var currentActiveWindow=null;var oLastError={"message":null,"code":null,"date":null,"timeoutId":null,"elapsedTime":1E4};var errorOccurs=0;var connection={"fromReconnection":false,"firstConnection":true,
"first404IncomingTime":null,"maxTimeBeforeRemoveGatewayAccessKey":3E4,reconnectingCount:0,reconnectingMax:8};var serverDPR={"enabled":false,"originalValue":null};var serverCmdResultOrientation=null;var restartOnOrientationChange=false;var mouseBuffer={"queue":[],"isAvailable":false};var ENUM_CODES={authenticationCodeErrors:["10009","10010"]};var UintArrayConfig={"size":5E4,"sliceMethod":typeof Uint8Array!="undefined"?(new Uint8Array).splice!=undefined?"slice":"subarray":"slice","method":"apply"};
var emulcont=null;var _getComputedStyle=helper.style.getComputedStyle;var _enumPictureType=helper.object.createEnum({CANVAS:0,H264:1,GFX:2});var _ePictureType=_enumPictureType.CANVAS;var _gfx=null;var _validCanvas=[];var _displayManager=null;var _packetReceiver=null;var _audioDriver=null;var _preventKeys={available:true,keys:{67:{"ctrlKey":true},99:{"ctrlKey":true},86:{"ctrlKey":true},118:{"ctrlKey":true},88:{"ctrlKey":true},120:{"ctrlKey":true}}};var _oInterface=null;var _oClipboard=null;var _iClipboard=
null;var _pendingsCommandsCallback=[];var _pendingDisplayResize=null;var _eMode=helper.object.createEnum({"HOST":0,"API":1,"SKEY":2,"OTURL":10,"SDK":11});var _isDisconnecting=false;var _connectResult={max:10,count:0};function getOrientation(){if(window.matchMedia)if(window.matchMedia("(orientation: portrait)").matches)return"portrait";else{if(window.matchMedia("(orientation: landscape)").matches)return"landscape"}else return"landscape"}this.getOrientation=getOrientation;function initialize(){previousOrientation=
window.environment.currentOrientation||getOrientation();var commArgs={"protocol":Thinfinity.Communication.protocol.WEBSOCKET,"withCredentials":TVNC.crossDomain(),"webSocket":{"maxTimeToOpen":1E4,"events":{"open":function(e){BTP_WS_OPEN=null;TVNC.wsEnabled=true;resetLastError();logDebug("TVNC.ws.onopen. TVNC.wsEnabled = true");TVNC.useAjax=false;TVNC.start();try{if(typeof TVNC.rcParams.events=="undefined"||TVNC.rcParams.events.onConnectionKindChange==null)$(document).trigger("connectionKindChange");
else TVNC.rcParams.events.onConnectionKindChange()}catch(error){helper.console.warning("'onConnectionKindChange' calling attached method fail. message: "+error.message,error,arguments)}callPendingCommands()},"message":function(msg){errorOccurs=0;_packetReceiver.process(msg.data)},"close":function(e){BTP_WS_CLOSE1=null},"error":function(e){BTP_WS_ERR=null;var msg=consts.unknownError;var code="";if(e&&e.detail){code=e.detail.code;if(e.detail.message!="")msg=e.detail.message;if(e.detail.code===Thinfinity.Communication.errorCode.TIMEOUT){BTP_WS_TOUT=
null;helper.console.log("WebSocket: is not responding...",arguments);BTP_PWS_CLS2=null}}helper.console.warning(helper.string.format("TVNC.ws.error - {0}, ({1})",msg,code),arguments)}}},"methods":{arraybufferToString:TVNC.arbufToStringU8},"properties":{},"events":{"stateChange":function(state){connectionStateChanged(state)},"error":function(e){var msgDetail=helper.object.getValue(e,"detail.message","");helper.console.warning(helper.string.format("Something went wrong: {0}, protocol: {1}, state: {2}",
msgDetail,_comm.protocol,_comm.state),arguments);if(e.detail&&e.detail.code===Thinfinity.Communication.errorCode.RESTART)restart(true)}}};Object.defineProperty(commArgs.properties,"sessionEnd",{"enumerable":true,"configurable":false,"get":function(){return _isSessionEnded}});_comm=new Thinfinity.Communication(commArgs)}var _commLastState=0;let _commStateLost=false;function connectionStateChanged(state){if(state===Thinfinity.Communication.state.CONNECTED){if(_commLastState!=state){_displayManager.fireEvent("localEvent",
{cmd:"connected"});TVNC.closeReconnectDiv();if(_commLastState>Thinfinity.Communication.state.RECONNECTING&&_commLastState<Thinfinity.Communication.state.LOST||_commStateLost)try{BTP_PC_RST=null;var cs={"code":3,"message":consts.connRestored};_displayManager.fireEvent("localEvent",{...{cmd:"connectionRestored"},cs});if(typeof TVNC.rcParams.events=="undefined"||TVNC.rcParams.events.onConnectionRestored==null)window.dispatchEvent(new CustomEvent(consts.connRestored,cs));else TVNC.rcParams.events.onConnectionRestored(cs)}catch(error){helper.console.error(consts.connRestored+
" - code: 3",error,arguments)}}_commStateLost=false}else if(state===Thinfinity.Communication.state.UNSTABLE){if(_commLastState!=state)try{BTP_PC_UNS=null;var cs={"code":1,"message":consts.connUnstable};_displayManager.fireEvent("localEvent",{...{cmd:"connectionUnstable"},cs});if(typeof TVNC.rcParams.events=="undefined"||TVNC.rcParams.events.onConnectionLost==null)window.dispatchEvent(new CustomEvent(consts.connUnstable,cs));else _avoidConnectionLostPopup=TVNC.rcParams.events.onConnectionLost(cs);
if(!_avoidConnectionLostPopup)TVNC.showReconnectDiv(false)}catch(error){helper.console.error(consts.connUnstable+" - code: 1",error,arguments)}_commStateLost=true}else if(state===Thinfinity.Communication.state.LOST){try{BTP_PC_LST=null;var cs={"code":2,"message":consts.connLostReconnecting};_displayManager.fireEvent("localEvent",{...{cmd:"connectionLost"},cs});if(typeof TVNC.rcParams.events=="undefined"||TVNC.rcParams.events.onConnectionLost==null)window.dispatchEvent(new CustomEvent(consts.connLost,
cs));else _avoidConnectionLostPopup=TVNC.rcParams.events.onConnectionLost(cs);if(!_avoidConnectionLostPopup)TVNC.showReconnectDiv(true)}catch(error){helper.console.error(consts.connLostReconnecting+" - code: 2",error,arguments)}_commStateLost=true}_commLastState=state}function callPendingCommands(){_pendingsCommandsCallback.forEach(function(handler){try{handler()}catch(error){}});_pendingsCommandsCallback=[]}this.showReconnectDiv=function(connLost){if(!checkSplashPopup())if(_visualEffect)_visualEffect.toGrayScale(connLost);
else{var elem=document.getElementById(TVNC.reconnectDivId);var d=helper.dom.appendJsonElement({"parentElement":elem&&elem.parentElement?elem.parentElement:document.body,"type":"div","attributes":{"style":helper.string.format("-webkit-box-shadow: 1px 1px 15px #000;-moz-box-shadow: 1px 1px 15px #000; position:absolute; top:50%; left:50%; transform:translate3d(-50%, -50%, 0); background:#111111;z-index:{0}; padding:20px;color:#FFF;-moz-border-radius: 7px;border-radius: 7px; font-size:14px; font-weight:normal; width:250px;height:68px; text-align:center",
TVNC.getNextHighestZindex(document.body))},"content":consts.connLostReconnecting+"</br>"});var button=helper.dom.appendJsonElement({"parentElement":d,"type":"input","attributes":{"id":"cancelRecnx","type":"button","style":"margin-top:20px;padding:6px;"},"events":{"click":function(e){TVNC.closeReconnectDiv();TVNC.disconnect();TVNC.dispose(true);$(document).unbind();$("#"+TVNC.vncdivId).unbind()}},"content":consts.abort})}};previousOrientation=window.environment.currentOrientation||getOrientation();
this.pingIgnore=false;this.closeReconnectDiv=function(abort){if(_avoidConnectionLostPopup!==true)if(_visualEffect)_visualEffect.toColor();else{$("#cancelRecnx").parent().remove();$("#"+TVNC.reconnectDivId).remove()}};this.connectWebSocket=function(fastConnect,callback){BTP_WS_INIT=null;if(_comm.state<=Thinfinity.Communication.state.CLOSING)_comm.wsOpen(TVNC.getWsUrl())};function restartConnection(){TVNC.reset();_comm.releaseQueue(TVNC.queueRequestName);var buildResolutionArgs=function(){var args=
"";var w=TVNC.rcParams.width;var h=TVNC.rcParams.height;var fitmode="";if(typeof this.agentName=="undefined")TVNC.resolveAgent();var screenWidth=window.environment.rawWidth||window.screen.width;var screenHeight=window.environment.rawHeight||window.screen.height;w=window.environment.detectedWidth;h=window.environment.detectedHeight;if(helper.object.existsPath(self,"clientSettings.UseViewportSize")&&self.clientSettings.UseViewportSize){w=window.environment.viewportWidth;h=window.environment.viewportHeight}if(typeof TVNC.rcParams.fitmode!=
"undefined"){fitmode=TVNC.rcParams.fitmode;if(fitmode!=undefined&&typeof fitmode=="string"&&fitmode.toLowerCase()!="fixed"&&fitmode.indexOf("x")>0){fitmode="&fitmode=1";var res=fitmode.split("x");w=res[0];h=res[1]}}else if(TVNC.rcParams.resolution=="fittobrowser")fitmode="&fitmode=0";else if(TVNC.rcParams.resolution=="fittoscreen")fitmode="&fitmode=2";else if(TVNC.rcParams.resolution=="fixed"){fitmode="&fitmode=1";w=TVNC.rcParams.width;h=TVNC.rcParams.height}else if(TVNC.rcParams.resolution.indexOf("x")>
0){fitmode="&fitmode=1";var res=TVNC.rcParams.resolution.split("x");w=res[0];h=res[1]}var pos=TVNC.vncdiv!=null?TVNC.findPos(TVNC.vncdiv):[0,0];var offset={"left":pos[0],"top":pos[1]};args+="&browserWidth="+(w-offset.left)+"&browserHeight="+(h-offset.top);args+="&screenWidth="+screenWidth+"&screenHeight="+screenHeight;args+=fitmode;return args};var isLandscape=window.environment.currentOrientation=="landscape"?true:false;var args="cmd=start&subcmd=restart"+buildResolutionArgs()+"&devicePixelRatio="+
(environment.initialDevicePixelRatio||1)+"&isMobile="+agentInfo.isMobile+"&isLandscape="+isLandscape+"&supportsFullScreen="+window.environment.supportsFullScreen+"&webapp="+window.environment.webapp;TVNC.start(args)}function restart(hasBeenLost){if(hasBeenLost)helper.console.error("The Connection has been lost.",null,arguments);if(_isSessionEnded){helper.console.error("The Session has ended. Cannot restart the connection.",null,arguments);return}helper.console.warning("Restarting connection...",null,
arguments);if(_comm.state>=Thinfinity.Communication.state.CLOSING)return;TVNC.rcParams.clientAck=-1;TVNC.rcParams.clientAck=TVNC.rcParams.clientAck<=0&&!TVNC.useAjax?0:Math.max(TVNC.rcParams.clientAck,1);if(_fromBroker)_url.baseUrl=_virtualPathProfile;TVNC.reconnect()}this.rop3CanvasNoType=function(context,cmd,imageData,auxImageData){var data=imageData.data;var auxData=auxImageData.data;for(var offset=0;offset<cmd.cx*cmd.cy*4;offset+=4){var auxDataPixel=auxData[offset]|auxData[offset+1]<<8|auxData[offset+
2]<<16;var dataPixel=data[offset]|data[offset+1]<<8|data[offset+2]<<16;dataPixel=this.doROP3(cmd.o,auxDataPixel,dataPixel,cmd.bc,cmd.fc);data[offset]=dataPixel&255;data[offset+1]=dataPixel>>>8&255;data[offset+2]=dataPixel>>>16&255;data[offset+3]=255}context.putImageData(imageData,cmd.x,cmd.y)};this.rop3CanvasU32=function(context,cmd,imageData,auxImageData){var data=new Uint32Array(imageData.data.buffer);var auxData=new Uint32Array(auxImageData.data.buffer);for(var offset=0;offset<cmd.cx*cmd.cy;offset++)data[offset]=
this.doROP3(cmd.o,auxData[offset]&16777215,data[offset]&16777215,cmd.bc,cmd.fc)|4278190080;context.putImageData(imageData,cmd.x,cmd.y);auxData=data=null};this.rop3Canvas=agentInfo.hasTypedArrays?this.rop3CanvasU32:this.rop3CanvasNoType;this.u8ArrayToDataUri=function(mime,raw){if(_blob.on&&raw.length>_blob.threshold)return _urlCreator.createObjectURL(new Blob([raw],{type:mime}));else return"data:"+mime+";base64,"+window.btoa(TVNC.arbufToStringU8(raw))};this.arbufToStringU8ConcatMethod=function(data){var str=
"";var len=data.byteLength;for(var i=0;i<len;i++)str+=String.fromCharCode(data[i]);return str};this.arbufToStringU8ApplyMethod=function(data){if(data.length<UintArrayConfig["size"])return String.fromCharCode.apply(null,data);else{var str="";var i=0;var n=data.length;while(i<n)str+=String.fromCharCode.apply(null,data[UintArrayConfig["sliceMethod"]](i,i+=UintArrayConfig["size"]));return str}};this.arbufToStringU8=UintArrayConfig["method"]=="apply"?this.arbufToStringU8ApplyMethod:this.arbufToStringU8ConcatMethod;
function clone(oldObject){return $.extend(true,{},oldObject)}this.crossDomain=function(){return TVNC.crossdomain||TVNC.rcParams.isCrossDomain};this.completeAjaxParams=function(params){if(TVNC.crossDomain()){params.beforeSend=function(xhr){xhr.withCredentials=true};params.crossDomain=true}return params};function initializeImageQueue(sessionId){if(TVNC.imgQueue==null||TVNC.imgQueue.sessionId!=sessionId){helper.console.log("Initializing Image Queue");this.imageCache2=[new Array(600),new Array(600),new Array(2048),
new Array(4096),new Array(2048)];this.imageCacheV=[new Array(200),new Array(200),new Array(200),new Array(200),new Array(200)];TVNC.purgeImageQueue(TVNC.imgQueue);TVNC.imgQueue=null;TVNC.imgQueue=TVNC.createImageQueue(sessionId);_usedImgQueueItems=[]}}this.createImageQueue=function(sessionId){var newItem={"sessionId":sessionId,"items":{},"loaded":0,"startTime":0,"count":0,"group":0,"aborted":function(){return false},"timeout":450,"watchdogTimer":null,"watchdogStart":function(){var self=this;this.startTime=
(new Date).getTime();if(this.watchdogTimer!==null){logError("imageQueue watchdog already running!");this.watchdogStop()}this.watchdogTimer=setTimeout(function(){if(self.timeout>0)logError("imageQueue idx: "+TVNC.resumeItem.qidx+" timeout at "+((new Date).getTime()-self.startTime)+" ms!");if(TVNC.resumeItem){TVNC.resumeItem.processed=true;if(TVNC.executeDeferred)TVNC.executeDeferred();else logDebug("Missing function executeDeferred. --\x3e TVNC.executeDeferred()")}},this.timeout)},"watchdogStop":function(){if(this.watchdogTimer!==
null){clearTimeout(this.watchdogTimer);self.timeout=1E3;this.watchdogTimer=null}}};return newItem};this.purgeImageQueue=function(imgQueue){if(!imgQueue)return;imgQueue.watchdogStop();for(var i=0;i<imgQueue.items.length;i++){var item=imgQueue.items[i];if(item)if(!item.purgeAll)logDebug("Not an item object in imgQueue, idx: "+i);else{item.purgeAll();TVNC.returnImageItem(item)}delete imgQueue.items[i]}};function ab2str(buf){return String.fromCharCode.apply(null,new Uint16Array(buf))}function str2ab(str){var buf=
new ArrayBuffer(str.length*2);var bufView=new Uint16Array(buf);for(var i=0,strLen=str.length;i<strLen;i++)bufView[i]=str.charCodeAt(i);return buf}function getImageCacheList(usecompression){if(TVNC.dbFiles.length>0){var dbSrc=TVNC.dbFiles.join("-");if(usecompression){var dbZip=new Zlib.RawDeflate(dbSrc);var dbB64=$.base64.encode(dbZip);return dbB64}else return dbSrc}else return""}this.toDataUrl=function(url,callback){helper.ajax.get({"url":url,"responseType":"blob","success":function(response){var reader=
new FileReader;reader.onloadend=function(){callback(reader.result)};reader.readAsDataURL(response)}})};this.convertImgURLToBase64=function(source,type,callback){var loadImage=function(internalCallback){var img=new Image;img.crossOrigin="Anonymous";img.onload=function(e){if(typeof e.target.complete=="undefined"||e.target.complete==true)internalCallback(img,e);else{var maxTimes=10;var countTimes=0;function retryLoadImage(){setTimeout(function(){if(countTimes>maxTimes){helper.console.warning("Cannot get image source.",
arguments);internalCallback(null)}else if(typeof e.target.complete=="undefined"||e.target.complete==true)internalCallback(img,e);else retryLoadImage();countTimes++},50)}}};img.onerror=function(e){internalCallback(null,e)};img.onabort=function(e){internalCallback(null,e)};img.srcImage=souce;img.src=source};loadImage(function(img,e){if(img){var canvas=document.createElement("canvas");canvas.appendChild(img);var base64=canvas.toDataURL(type);callback(type,base64)}else callback(type,null)})};this.getBasicHTMLImg=
function(url){if(url)return'<html><body>\x3c!--StartFragment--\x3e<img src="'+url+'"/>\x3c!--EndFragment--\x3e</body></html>';else return null};function getClipboardInterface(){if(!_oClipboard){let _clipboard={};let permissions={};Object.defineProperty(permissions,"fileTransfer",{configurable:false,enumerable:true,get:function(){return TVNC.rcParams.clipboardFileTransfer}});_oClipboard=(new Thinfinity.Object.Interface({defaultEventFire:{async:0}})).new(new Thinfinity.Object.IConfig({namespace:true,
options:[Thinfinity.Object.IConfig.OPTIONS.DO_NOT_FULL_EXTEND_OBJECT],object:TVNC,properties:[{source:"KeyboardHandler.kbdInput",ro:true,alias:"inputElement"},{source:"vncdiv",ro:true,alias:"parentElement"},{source:permissions,ro:true,alias:"permissions"},{source:"enable",ro:true,get:function(){return TVNC.rcParams.clipboard}},{source:"synchronizeClipboard",ro:true,get:function(){return TVNC.rcParams.synchronizeClipboard}}],methods:[{alias:"output",value:function(jData){if(jData.cmd)switch(jData.cmd.toLowerCase()){case "focus":_displayManager.focus();
break;case "settext":_displayManager.textValue=jData.value;break;case "maccmd":if(jData.value==="RELEASED")_displayManager.updateMacCmd(Thinfinity.Driver.Keyboard.MAC_CMD.RELEASED);break}}},{alias:"sendData",value:function(url,data){if(TVNC.useAjax){var url=_url.httpConnection+"cmd?id="+url;_comm.post({"url":url,"data":data})}else{var cmd=url+"&linemode=LF&data="+data;TVNC.sendCmd(cmd)}}},{alias:"request",value:function(params){params.url=TVNC.addExtraParams(_url.httpConnection+params.url);var cors=
TVNC.crossdomain||TVNC.rcParams.isCrossDomain;if(cors&&_comm.protocol!==_args.comm.protocol.AJAX)params.xhrFields={"withCredentials":true};_comm.send(params)}},{alias:"convertImgURLToBase64",value:TVNC.convertImgURLToBase64},{alias:"getBasicHTMLImg",value:TVNC.getBasicHTMLImg},{alias:"sendEvent",value:TVNC.sendEvent},{alias:"setSelectionRange",value:function(){_displayManager.setSelectionRange(0,_displayManager.textValue.length)}},{alias:"getTextValue",value:function(){return _displayManager.textValue}},
{alias:"clearText",value:function(){_displayManager.textValue=""}}],events:{copy:TVNC.rcParams.events.onCopy,paste:TVNC.rcParams.events.onPaste,cut:TVNC.rcParams.events.onCut,localPaste:function(){if(_preventKeys.available){TVNC.sendKey(86,0,"down",0);TVNC.sendKey(86,0,"up",0);return true}else return false},copyFiles:TVNC.rcParams.events.onCopyFiles}}));_iClipboard=_oClipboard.new}return{oObject:_oClipboard,iObject:_iClipboard}}this.findPos=function(obj){var curleft=0;var curtop=0;do{curleft+=obj.offsetLeft;
curtop+=obj.offsetTop}while(obj=obj.offsetParent);return[curleft,curtop]};this.emptyRecycleImg=function(onetime){while(TVNC.queueRecycleImg.length>0){img=TVNC.queueRecycleImg.pop();img=null}if(onetime==true)return;clearTimeout(TVNC.emptyRecycleImgTimeout);TVNC.emptyRecycleImgTimeout=setTimeout(TVNC.emptyRecycleImg,TVNC.recycleImgTimeoutValue)};this.setMaxSize=function(width,height){TVNC.rcParams.maxWidth=width;TVNC.rcParams.maxHeight=height};this.splitKey=function(key){var sk;if(!key.length)sk={"isVolatile":false,
"arr":0,"pos":key};else{sk={"isVolatile":key.length>6,"arr":parseInt(key.substring(0,2),10)};sk.pos=parseInt(sk.isVolatile?key.substring(6):key.substring(2,6),10)}return sk};this.getFromImageCache=function(key){var sk=this.splitKey(key);if(sk.isVolatile)return this.imageCacheV[sk.arr][sk.pos];else return this.imageCache2[sk.arr][sk.pos]};this.setToImageCache=function(item,key){if(!item)logError("Error on setToImageCache: null item.");var sk=this.splitKey(key);if(sk.isVolatile){BTP_IMG_CHV=null;if(this.imageCacheV[sk.arr][sk.pos])TVNC.returnImageItem(this.imageCacheV[sk.arr][sk.pos]);
this.imageCacheV[sk.arr][sk.pos]=item}else{BTP_IMG_CH2=null;if(this.imageCache2[sk.arr][sk.pos])TVNC.returnImageItem(this.imageCache2[sk.arr][sk.pos]);this.imageCache2[sk.arr][sk.pos]=item}};this.createCanvas=function(win){let div=document.createElement("div");div.style.position="absolute";div.style.left=win.left-TVNC.rcParams.viewLeft+"px";div.style.top=win.top-TVNC.rcParams.viewTop+"px";let r=0;let b=0;if(productId==="virtualui"){r=typeof win.right!=="undefined"?win.right:win.left;b=typeof win.bottom!==
"undefined"?win.bottom:win.top;if(win&&win.hwnd!=0&&TVNC.rcParams?.events?.onCreateCanvas)TVNC.rcParams.events.onCreateCanvas(win)}div.style.zIndex=this.baseZIndex+win.zidx*10;let w=win.width+r;let h=win.height+b;div.width=w;div.height=h;div.style.width=w+"px";div.style.height=h+"px";div.style.display="inline-block";if(win.hwnd>0)div.style.overflow="hidden";if(win.wndClass)div.setAttribute("wndClass",win.wndClass);if(TVNC.rdpMode&&win.hwnd==1){TVNC.vncContainer.style.width=w+"px";TVNC.vncContainer.style.height=
h+"px"}if(typeof win.className!="undefined")div.className=win.className;if(!win.parent){div.mask=new Object;div.mask.color="#000";div.mask.visible=false;var canvas=document.createElement("canvas");canvas.style.left="0px";canvas.style.top="0px";canvas.width=win.width;canvas.height=win.height;canvas.style.position="absolute";canvas.style.zIndex=1;canvas.style.width=win.width;canvas.style.height=win.height;canvas.hwnd=win.hwnd;helper.dom.addEvent(canvas,"contextmenu",function(e){if(e)e.preventDefault();
return false});div.canvas=canvas;div.appendChild(canvas)}if(agentInfo.isMobile)helper.dom.addEvent(div,"click",function(){});if(this.canvasInitiallyHidden&&win.hwnd!=0&&!win.parent){div.style.display="none";TVNC.fireCustomEvents("canvasInitiallyHidden",win)}div.id=productId+"_canvas_"+win.hwnd;var parentDiv=this.vncContainer;if(helper.object.validate(win.parent)&&win.parent!=0){div.parent=win.parent;parentDiv=document.getElementById(productId+"_canvas_"+win.parent);if(parentDiv)parentDiv.appendChild(div);
else{div.style.display="none";div.style.visibility="hidden";if(!this.canvasInitiallyHidden&&win.hwnd!=0)TVNC.fireCustomEvents("canvasHidden",win);this.vncContainer.appendChild(div)}}else parentDiv.appendChild(div);for(var i=this.vncContainer.childNodes.length-1;i>=0;i--){var elem=this.vncContainer.childNodes[i];if(elem.parent){var parentCanvas=document.getElementById(productId+"_canvas_"+elem.parent);if(parentCanvas){parentCanvas.appendChild(elem);elem.style.display="inline";if(elem.parent!=0)TVNC.fireCustomEvents("canvasShow",
elem.parent)}}}if(TVNC.controlFactory)TVNC.controlFactory.insertPending();return div};this.decode=function(data){return codec.decode(data)};this.cacheFont=function(cmd){var glyph=new RdpGlyph(cmd.fnt,cmd.chr,cmd.ofs,cmd.bl,cmd.w,cmd.h,this.decode(cmd.data));if(glyph.font<12&&glyph.character<256)this.rdpGlyphArray[glyph.font][glyph.character]=glyph;else throw logError("put font: font="+glyph.font+" c="+glyph.character),"Could not put font in cache";};this.getGlyph=function(font,character){if(font<
12&&character<256){var glyph=this.rdpGlyphArray[font][character];if(glyph!=null)return glyph}throw logError("Could not get Font:"+font+", "+character);};this.clearFontCache=function(){for(var i=0;i<12;i++)for(var j=0;j<256;j++){delete this.rdpGlyphArray[i][j];this.rdpGlyphArray[i][j]=null}};this.clearImageCache=function(){var i,j;try{for(i=0;i<this.imageCache2.length;i++){for(j=0;j<this.imageCache2[i].length;j++)if(this.imageCache2[i][j]){delete this.imageCache2[i][j].data;this.imageCache2[i][j]=
null}for(j=0;j<this.imageCacheV[i].length;j++)if(this.imageCacheV[i][j]){delete this.imageCacheV[i][j].data;this.imageCacheV[i][j]=null}}}catch(e){logError(e.Message)}};this.clearTextCache=function(){for(var i=0;i<this.textCache.length;i++){delete this.textCache[i];this.textCache[i]=null}};this.cachePutText=function(cache_id,data,idx,len){var carray=Array(len);for(n=0;n<len;n++)carray[n]=data[idx+n];textEntry=new TextEntry(len,carray);if(cache_id<this.textCache.length)this.textCache[cache_id]=textEntry;
else throw"Could not put Text in cache";};this.cacheGetText=function(cache_id){var entry=null;if(cache_id<this.textCache.length){entry=this.textCache[cache_id];if(entry!=null&&entry.data!=null)return entry}};this.toRGB=function(color){var rgb="rgba("+(color>>16&255)+",";rgb+=(color>>8&255)+",";rgb+=(color&255)+",1)";return rgb};this.putRdpText=function(cmd,context){var text=this.decode(cmd.text),idx=0,ch=0;if(cmd.bcx!=-1){context.fillStyle=this.toRGB(cmd.bc);context.fillRect(cmd.bx,cmd.by,cmd.bcx,
cmd.bcy);cmd.lx=cmd.bx;cmd.ly=cmd.by;cmd.lcx=cmd.bcx;cmd.lcy=cmd.bcy}else if(cmd.mm==1){context.fillStyle=this.toRGB(cmd.bc);context.fillRect(cmd.lx,cmd.ly,cmd.lcx,cmd.lcy)}cmd.maxX=cmd.lx+cmd.lcx-1;cmd.maxY=cmd.ly+cmd.lcy-1;if(cmd.lcx*cmd.lcy==0)return;var imgdata=null;var length=cmd.len;var j=0;var vert=(cmd.fl&4)==4;var horiz_implicit=(cmd.fl&32)!=0;while(j<length)switch(text[j]&255){case 255:if(j+2<cmd.len)this.cachePutText(text[j+1],text,0,text[j+2]&255);else throw"Index out of range!";length-=
j+3;text=text.slice(j+3);j=0;break;case 254:var entry=this.cacheGetText(text[j+1]&255);if(entry){if(entry.data[1]==0&&!horiz_implicit)if(!vert)cmd.x+=text[j+2]&255;else cmd.y+=text[j+2]&255;for(k=0;k<entry.size;k++){if(!imgdata)imgdata=context.getImageData(cmd.lx,cmd.ly,cmd.lcx,cmd.lcy);k+=this.doGlyph(context,imgdata,cmd,entry.data,k)}}j+2<length?j+=3:j+=2;length-=j;text=text.slice(j);j=0;break;default:if(!imgdata)imgdata=context.getImageData(cmd.lx,cmd.ly,cmd.lcx,cmd.lcy);j+=this.doGlyph(context,
imgdata,cmd,text,j);j++}if(imgdata)context.putImageData(imgdata,cmd.lx,cmd.ly)};this.doGlyph=function(context,imgdata,cmd,text,idx){var xyoffset=0,j=0,advanceCount=0,Bpp=Math.floor((cmd.bpp+7)/8);glyph=this.getGlyph(cmd.fnt,text[idx+j]&255);if(glyph){if(!(cmd.fl&32))if(cmd.oc)if(cmd.fl&4)cmd.y+=cmd.oc;else cmd.x+=cmd.oc;else{xyoffset=text[idx+ ++j]&255;advanceCount+=1;if(xyoffset==128){xyoffset=text[idx+j+1]&255|(text[idx+j+2]&255)<<8;advanceCount+=2}if(cmd.fl&4)cmd.y+=xyoffset;else cmd.x+=xyoffset}this.drawGlyph(context,
imgdata,cmd,glyph,Bpp);if(cmd.fl&32)cmd.x+=cmd.oc?cmd.oc:glyph.width}return advanceCount};this.drawGlyph=function(context,imgdata,cmd,glyph,Bpp){var x=cmd.x+glyph.offset&65535,y=cmd.y+glyph.baseLine&65535,dataWidth=Math.ceil(glyph.width/8)*8,glyphWidth=glyph.width,glyphHeight=glyph.height,fontData=glyph.fontData,desktopWidth=TVNC.rcParams.viewWidth,desktopHeight=TVNC.rcParams.viewHeight,foreColor=cmd.fc,backColor=cmd.bc,bit=128,line,pixel;if(x+glyphWidth<cmd.lx||x>cmd.maxX||y+glyphHeight<cmd.ly||
y>cmd.maxY)return;var data=imgdata.data;if(!(x>desktopWidth||y>desktopHeight))for(line=0;line<glyphHeight;line++)if(line+y>=cmd.ly&&line+y<=cmd.maxY)for(var pixel=0;pixel<glyphWidth;pixel++)if(pixel+x>=cmd.lx&&pixel+x<=cmd.maxX){var pixelOffset=((line+(y-cmd.ly))*cmd.lcx+pixel+(x-cmd.lx))*4;var byteIndex=Math.floor((line*dataWidth+pixel)/8);bit=fontData[byteIndex]>>7-pixel%8&1;try{if(bit)this.setPixel(data,pixelOffset,foreColor);else if(cmd.mm==1)this.setPixel(data,pixelOffset,backColor)}catch(err){logError(err)}}};
this.setPixel32=function(data,pixelOffset,color){data[pixelOffset]=color};this.setPixel=function(data,pixelOffset,color){data[pixelOffset]=color>>16&255;data[pixelOffset+1]=color>>8&255;data[pixelOffset+2]=color&255;data[pixelOffset+3]=255};this.doROP=function(rop,src,dst){switch(rop){case 0:return 0;case 1:return~(src|dst);case 2:return~src&dst;case 3:return~src;case 4:return src&~dst;case 5:return~dst;case 6:return src^dst;case 7:return~(src&dst);case 8:return src&dst;case 9:return~src^dst;case 10:return dst;
case 11:return~src|dst;case 12:return src;case 13:return src|~dst;case 14:return src|dst;case 15:return~0;case 16:return~src&~dst}return dst};this.doROP3=function(rop,src,dst,bc,fc){switch(rop){case 0:return 0;case 1:return~(src|dst);case 2:return~src&dst;case 3:return~src;case 4:return src&~dst;case 5:return~dst;case 6:return src^dst;case 7:return~(src&dst);case 8:return src&dst;case 9:return~src^dst;case 10:return dst;case 11:return~src|dst;case 12:return src;case 13:return src|~dst;case 14:return src|
dst;case 15:return~0;case 16:return~src&~dst;case 17:return~src&fc;case 18:return src==0?bc:fc;case 19:return dst|(fc|~src);case 20:return src==0?bc^dst:fc^dst;case 21:return src&fc|~src&dst;case 22:return src&~fc;case 23:return dst^~fc}return dst};this.registerDrawCmd=function(cmd,callback){TVNC.registeredDrawCmds[cmd]=callback};this.registerOOBCmd=function(cmd,callback){TVNC.registeredOOBCmds[cmd]=callback};this.unregisterOOBCmd=function(cmd){if(cmd&&TVNC.registeredOOBCmds[cmd])delete TVNC.registeredOOBCmds[cmd]};
this.fireOOBCmd=function(cmd,data){var res=false;if(typeof TVNC.registeredOOBCmds[cmd]!="undefined"){res=true;try{TVNC.registeredOOBCmds[cmd](data,cmd==="vchannel"?_url:null)}catch(error){helper.console.log(`Cannot process this package with OOB handler: [cmd:${cmd}, data:${JSON.stringify(data)}]`,arguments)}}return res};this.registerCustomCmd=function(cmds,callback){var fnRegistered=function(cmd){if(TVNC.registeredCustomCmds[cmd]==undefined)TVNC.registeredCustomCmds[cmd]=[];TVNC.registeredCustomCmds[cmd].push(callback)};
if(cmds&&callback&&typeof callback=="function")if(cmds instanceof Array)for(var i=0;i<cmds.length;i++)fnRegistered(cmds[i]);else fnRegistered(cmds)};this.unregisterCustomCmd=function(cmds,callback){var fnUnregistered=function(cmd){if(TVNC.registeredCustomCmds[cmd])for(var i=TVNC.registeredCustomCmds[cmd].length-1;i>=0;i--)if(TVNC.registeredCustomCmds[cmd][i]==callback)TVNC.registeredCustomCmds[cmd].splice(i,1)};if(cmds&&callback&&typeof callback=="function")if(cmds instanceof Array)for(var j=0;j<
cmds.length;j++)fnUnregistered(cmds[j]);else fnUnregistered(cmds)};this.registerCustomDataType=function(dataType,handler){if(handler instanceof Function)TVNC.registeredCustomDataTypes[dataType]=handler};this.unregisterCustomDataType=function(dataType){if(TVNC.registeredCustomDataTypes[dataType])delete TVNC.registeredCustomDataTypes[dataType]};TVNC.registeredCustomDataTypes[7]=function(){};this.fireCustomEvents=function(cmd,obj){if(cmd&&TVNC.registeredCustomCmds[cmd])for(var i=0;i<TVNC.registeredCustomCmds[cmd].length;i++)try{TVNC.registeredCustomCmds[cmd][i](obj)}catch(error){}};
this.fireCustomEvents=function(cmd,obj){if(cmd&&TVNC.registeredCustomCmds[cmd])for(var i=0;i<TVNC.registeredCustomCmds[cmd].length;i++)try{TVNC.registeredCustomCmds[cmd][i](obj)}catch(error){}};this.drawCmdFillRect=function(cmd,context){var isXOR=cmd.pm&&cmd.pm==14;var isBSHollow=cmd.bs&&cmd.bs==1;if(isXOR){context.save();try{var imgdata=null;try{imgdata=context.getImageData(cmd.x,cmd.y,cmd.w,cmd.h)}catch(e){if(helper.object.existsPath(window.netscape,"security.PrivilegeManager.enablePrivilege"))try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead");
imgdata=context.getImageData(cmd.x,cmd.y,cmd.w,cmd.h)}catch(error){helper.console.log(JSON.stringify(error),arguments)}}if(imgdata){var data=imgdata.data;var canPaint=true;var x,y=0,offset=0,r,g,b,pixel,color;for(y=0;y<cmd.h;y++)for(x=0;x<cmd.w;x++,offset+=4){canPaint=!isBSHollow||(y==0||y==cmd.h-1)||(x==0||x==cmd.w-1);if(canPaint){if(isXOR){r=4294967295&imgdata.data[offset];g=4294967295&imgdata.data[offset+1];b=4294967295&imgdata.data[offset+2];pixel=r<<16&16777215|g<<8&16777215|b;color=this.doROP(6,
pixel,4294967295&cmd.clr)}else color=4294967295&cmd.clr;this.setPixel(data,offset,color)}}context.putImageData(imgdata,cmd.x,cmd.y)}}finally{context.globalCompositeOperation="source-over";context.restore()}}else{context.fillStyle=this.toRGB(cmd.clr);if(cmd.pm&&cmd.pm==14)context.globalCompositeOperation="xor";context.fillRect(cmd.x,cmd.y,cmd.w,cmd.h);context.globalCompositeOperation="source-over"}};this.drawCmdLineTo=function(cmd,context){context.save();try{if(cmd.cw&&cmd.ch){context.beginPath();
context.rect(cmd.cl,cmd.ct,cmd.cw,cmd.ch);context.clip()}var isHorizOrVert=false;var lineW=1,lineH=1;if(cmd.ey-cmd.y==0){isHorizOrVert=true;lineW=cmd.w;if(lineW==0)lineW=1}if(cmd.ex-cmd.x==0){isHorizOrVert=true;lineH=cmd.w;if(lineH==0)lineH=1}var isXOR=cmd.o&&cmd.o==7;var isNOT=cmd.o&&cmd.o==6;if(isHorizOrVert&&isXOR){var ox=Math.min(cmd.ex,cmd.x);var oy=Math.min(cmd.ey,cmd.y);cmd.cx=Math.abs(cmd.ex-cmd.x)+lineW;cmd.cy=Math.abs(cmd.ey-cmd.y)+lineH;var imgdata=null;try{imgdata=context.getImageData(ox,
oy,cmd.cx,cmd.cy)}catch(e){if(helper.object.existsPath(window.netscape,"security.PrivilegeManager.enablePrivilege"))try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead");imgdata=context.getImageData(ox,oy,cmd.cx,cmd.cy)}catch(error){helper.console.log(JSON.stringify(error),arguments)}}if(imgdata){var data=imgdata.data;var x,y=0,offset=0,r,g,b,pixel,color;for(y=0;y<cmd.cy;y++)for(x=0;x<cmd.cx;x++,offset+=4){if(isXOR||isNOT){r=4294967295&imgdata.data[offset];g=4294967295&imgdata.data[offset+
1];b=4294967295&imgdata.data[offset+2];pixel=r<<16&16777215|g<<8&16777215|b;if(isXOR)color=this.doROP(6,pixel,4294967295&cmd.fg);else color=this.doROP(3,pixel,4294967295)}else color=4294967295&cmd.fg;this.setPixel(data,offset,color)}context.putImageData(imgdata,ox,oy)}}else{if(cmd.ey-cmd.y==0){cmd.y+=.5;cmd.ey+=.5}if(cmd.ex-cmd.x==0){cmd.x+=.5;cmd.ex+=.5}context.beginPath();if(isXOR||isNOT)context.globalCompositeOperation="xor";context.moveTo(cmd.x,cmd.y);context.lineTo(cmd.ex,cmd.ey);context.lineWidth=
cmd.w;if(isNOT)context.strokeStyle=this.toRGB(4294967295);else context.strokeStyle=this.toRGB(cmd.fg);context.stroke()}}finally{context.globalCompositeOperation="source-over";context.restore()}};this.drawCmdScreenBlt=function(cmd,canvas,context){var imagedata=null;try{imagedata=context.getImageData(cmd.sx,cmd.sy,cmd.cx,cmd.cy)}catch(e){if(helper.object.existsPath(window.netscape,"security.PrivilegeManager.enablePrivilege"))try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead");
imagedata=context.getImageData(cmd.sx,cmd.sy,cmd.cx,cmd.cy)}catch(error){helper.console.log(JSON.stringify(error),arguments)}}if(imagedata)context.putImageData(imagedata,cmd.x,cmd.y)};this.drawCmdScreenBltSlower=function(cmd,canvas,context){var buffer=document.createElement("canvas");buffer.width=cmd.cx;buffer.height=cmd.cy;buffer.getContext("2d",{willReadFrequently:true}).drawImage(canvas,-cmd.sx,-cmd.sy);context.drawImage(buffer,cmd.x,cmd.y)};this.getKeyFromCmd=function(group,qidx){return padZero(group,
3).concat(padZero(qidx,5))};this.drawCmdDrawEdge=function(cmd,context){cmd.ex=cmd.x+cmd.w;cmd.ey=cmd.y+cmd.h;var borderStyles={BDR_RAISEDOUTER:1,BDR_SUNKENOUTER:2,BDR_RAISEDINNER:4,BDR_SUNKENINNER:8,BDR_OUTER:3,BDR_INNER:12,BDR_RAISED:5,BDR_SUNKEN:10};var edge={EDGE_RAISED:borderStyles.BDR_RAISEDOUTER|borderStyles.BDR_RAISEDINNER,EDGE_SUNKEN:borderStyles.BDR_SUNKENOUTER|borderStyles.BDR_SUNKENINNER,EDGE_ETCHED:borderStyles.BDR_SUNKENOUTER|borderStyles.BDR_RAISEDINNER,EDGE_BUMP:borderStyles.BDR_RAISEDOUTER|
borderStyles.BDR_SUNKENINNER};var borderFlags={BF_LEFT:1,BF_TOP:2,BF_RIGHT:4,BF_BOTTOM:8,BF_DIAGONAL:16,BF_MIDDLE:2048,BF_SOFT:4096,BF_ADJUST:8192,BF_FLAT:16384,BF_MONO:32768};var borderFlag={BF_TOPLEFT:borderFlags.BF_TOP|borderFlags.BF_LEFT,BF_TOPRIGHT:borderFlags.BF_TOP|borderFlags.BF_RIGHT,BF_BOTTOMLEFT:borderFlags.BF_BOTTOM|borderFlags.BF_LEFT,BF_BOTTOMRIGHT:borderFlags.BF_BOTTOM|borderFlags.BF_RIGHT,BF_RECT:borderFlags.BF_TOP|borderFlags.BF_LEFT|borderFlags.BF_BOTTOM|borderFlags.BF_RIGHT,BF_DIAGONAL_ENDTOPRIGHT:borderFlags.BF_DIAGONAL|
borderFlags.BF_TOP|borderFlags.BF_RIGHT,BF_DIAGONAL_ENDTOPLEFT:borderFlags.BF_DIAGONAL|borderFlags.BF_TOP|borderFlags.BF_LEFT,BF_DIAGONAL_ENDBOTTOMLEFT:borderFlags.BF_DIAGONAL|borderFlags.BF_BOTTOM|borderFlags.BF_LEFT,BF_DIAGONAL_ENDBOTTOMRIGHT:borderFlags.BF_DIAGONAL|borderFlags.BF_BOTTOM|borderFlags.BF_RIGHT};context.save();if(cmd.pm&&cmd.pm==14)context.globalCompositeOperation="xor";context.lineWidth=cmd.pw;context.strokestyle=this.toRGB(cmd.clr);if(cmd.e==edge.EDGE_SUNKEN&&cmd.f&borderFlags.BF_SOFT==
borderFlags.BF_SOFT);if(cmd.e==edge.EDGE_RAISED&&cmd.f&borderFlags.BF_SOFT==borderFlags.BF_SOFT);if(cmd.f&borderFlags.BF_TOP==borderFlags.BF_TOP){context.beginPath();context.moveTo(cmd.x,cmd.y);context.lineTo(cmd.ex,cmd.y);context.stroke()}if(cmd.f&borderFlags.BF_LEFT==borderFlags.BF_LEFT){context.beginPath();context.moveTo(cmd.x,cmd.y);context.lineTo(cmd.x,cmd.ey);context.stroke()}if(cmd.f&borderFlags.BF_BOTTOM==borderFlags.BF_BOTTOM){context.beginPath();context.moveTo(cmd.x,cmd.ey);context.lineTo(cmd.ex,
cmd.ey);context.stroke()}if(cmd.f&borderFlags.BF_RIGHT==borderFlags.BF_RIGHT){context.beginPath();context.moveTo(cmd.ex,cmd.y);context.lineTo(cmd.ex,cmd.ey);context.stroke()}context.globalCompositeOperation="source-over";context.restore()};this.deferCall=function(item,f,params){if(!TVNC.resumeItem){TVNC.imgQueue.watchdogStop();TVNC.imgQueue.watchdogStart();TVNC.resumeItem=item;var df=function(){f.apply(null,params)};if(TVNC.deferCallBySetTimeout)setTimeout(df,1);else TVNC.resumeProcess=df}};this.executeDeferred=
function(){if(TVNC.imgQueue)TVNC.imgQueue.watchdogStop();if(!TVNC.deferCallBySetTimeout&&TVNC.resumeProcess){var rp=TVNC.resumeProcess;TVNC.resumeProcess=null;TVNC.resumeItem=null;rp()}};this.processDrawCmds=function(root,win,canvas,context){var oriContext=context;TVNC.processNextScreenEnabled=false;if(win.idx){if(!cmdCache)cmdCache=new Array(1E5);if(win.cmds){for(i=0;i<win.cmds.length;i++){var cmd=win.cmds[i];cmdCache[cmd.z]=clone(cmd)}win.cmds.splice(0,win.cmds.length)}for(i=0;i<win.idx.length;i++){var cmd=
cmdCache[win.idx[i]];win.cmds.push(clone(cmd))}}if(win.cmds){var cmd,i,img,item,sx,sy;for(i=0;i<win.cmds.length;i++){if(TVNC.offscreenCanvas)context=TVNC.offscreenCanvas.getContext("2d",{willReadFrequently:true});else context=oriContext;cmd=win.cmds[i];if(cmd.processed)continue;cmd.processed=true;if(typeof cmd.z!="undefined"){var idx=cmd.z;if(!cmdCache)cmdCache=new Array(1E5);if(typeof cmd.c=="undefined"){win.cmds[i]=clone(cmdCache[idx]);cmd=win.cmds[i]}else cmdCache[idx]=clone(cmd)}if(TVNC.enableCmdCache){for(var p in cmd)if(cmd[p]!==
""&&cmd[p]!=null)TVNC.cmdCacheProps[p]=cmd[p];else if(typeof TVNC.cmdCacheProps[p]!="undefined")delete TVNC.cmdCacheProps[p];win.cmds[i]=TVNC.cmdCacheProps;cmd=clone(TVNC.cmdCacheProps);if(typeof cmd.originalValues!="undefined"){for(var q in cmd.originalValues)TVNC.cmdCacheProps[q]=cmd.originalValues[q];delete TVNC.cmdCacheProps.originalValues;delete cmd.originalValues}}if(cmd.c=="IC"){if(typeof cmd.qidx!="undefined"&&cmd.qidx>=0&&typeof root.imgQueue!="undefined"){item=TVNC.peekImageItem(root,cmd.qidx);
if(!item)continue;if(!item.ready||!item.image||!item.image.data){win.cmds[i].processed=false;TVNC.deferCall(win.cmds[i],TVNC.processDrawCmds,[root,win,canvas,context]);return}TVNC.setToImageCache(TVNC.extractImageItem(root,cmd.qidx),cmd.k)}else{item=TVNC.getFromImageCache(cmd.k);if(!item)continue}if(!item||!item.ready){logError("Cache: image "+cmd.k+" is not loaded, qidx: "+cmd.qidx);continue}if(typeof cmd.x=="undefined")continue;sx=0,sy=0;if(typeof cmd.sx!="undefined"){sx=cmd.sx;sy=cmd.sy}if(typeof cmd.o==
"undefined"||cmd.o==12)try{item.draw(context,cmd.x,cmd.y,cmd.cx,cmd.cy,sx,sy,cmd.cx,cmd.cy)}catch(err){logError("error in item.draw():"+cmd.k+",sx:"+sx+",sy:"+sy+",cmd.x:"+cmd.x+",cmd.y:"+cmd.y+",cmd.cx:"+cmd.cx+",cmd.cy:"+cmd.cy+",img.width:"+item.getWidth()+",img.height:"+item.getHeight())}else{var auxCanvas=document.createElement("canvas");auxCanvas.width=item.getWidth();auxCanvas.height=item.getHeight();var auxContext=auxCanvas.getContext("2d",{willReadFrequently:true});try{item.draw(auxContext,
0,0)}catch(err){logError("error on auxContext.drawImage")}var auxImageData=null;try{auxImageData=auxContext.getImageData(sx,sy,cmd.cx,cmd.cy)}catch(e){if(helper.object.existsPath(window.netscape,"security.PrivilegeManager.enablePrivilege"))try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead");auxImageData=auxContext.getImageData(sx,sy,cmd.cx,cmd.cy)}catch(error){helper.console.log(JSON.stringify(error),arguments)}}var imagedata=null;try{imagedata=context.getImageData(cmd.x,
cmd.y,cmd.cx,cmd.cy)}catch(e){if(helper.object.existsPath(window.netscape,"security.PrivilegeManager.enablePrivilege"))try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead");imagedata=context.getImageData(cmd.x,cmd.y,cmd.cx,cmd.cy)}catch(error){helper.console.log(JSON.stringify(error),arguments)}}if(auxImageData&&imagedata)TVNC.rop3Canvas(context,cmd,imagedata,auxImageData)}}else if(cmd.c=="IP"){var sx=0,sy=0;if(typeof cmd.sx!="undefined"){sx=cmd.sx;sy=cmd.sy}item=TVNC.peekImageItem(root,
cmd.qidx);if(!item)continue;if(!item.ready){win.cmds[i].processed=false;TVNC.deferCall(win.cmds[i],TVNC.processDrawCmds,[root,win,canvas,context]);return}try{item.draw(context,cmd.x,cmd.y,cmd.cx,cmd.cy,sx,sy,cmd.cx,cmd.cy)}catch(ex){logError("IP: item.draw() failed. cmd.qidx="+cmd.qidx);if(item)logError("size: "+item.getWidth()+"x"+item.getHeight())}TVNC.returnImageItem(TVNC.extractImageItem(root,cmd.qidx))}else if(cmd.c=="CB"){if(TVNC.brushCache[cmd.idx])TVNC.returnImageItem(TVNC.brushCache[cmd.idx]);
item=TVNC.extractImageItem(root,cmd.qidx);if(!item){logError("pattern cache update error; item missing");continue}TVNC.brushCache[cmd.idx]=item}else if(cmd.c=="FR")TVNC.drawCmdFillRect(cmd,context);else if(cmd.c=="PB"){var auxCanvas=document.createElement("canvas");auxCanvas.width=cmd.cx;auxCanvas.height=cmd.cy;var auxContext=auxCanvas.getContext("2d",{willReadFrequently:true});cmd.fc&=16777215;cmd.bc&=16777215;var normalProcess=true;if(cmd.bs==0){auxContext.fillStyle=TVNC.toRGB(cmd.fc);auxContext.fillRect(0,
0,cmd.cx,cmd.cy)}else{if(cmd.cidx>=0)item=TVNC.brushCache[cmd.cidx];else item=TVNC.extractImageItem(root,cmd.qidx);if(typeof item!="undefined")if(typeof item.image.data.complete=="undefined"||item.image.data.complete==true){var ptrn=auxContext.createPattern(item.image.data,"repeat");auxContext.fillStyle=ptrn;auxContext.fillRect(0,0,cmd.cx,cmd.cy)}else{normalProcess=false;TVNC.delayProcessImagePattern(auxContext,item,cmd)}else helper.console.log("pattern missing, or empty image",arguments)}if(normalProcess){var auxImageData=
auxContext.getImageData(0,0,cmd.cx,cmd.cy);var imagedata=context.getImageData(cmd.x,cmd.y,cmd.cx,cmd.cy);if(auxImageData&&imagedata)TVNC.rop3Canvas(context,cmd,imagedata,auxImageData)}}else if(cmd.c=="SB")TVNC.drawCmdScreenBlt(cmd,canvas,context);else if(cmd.c=="LI")TVNC.drawCmdLineTo(cmd,context);else if(cmd.c=="PL"){if(cmd.p.length>0){var n;var px=cmd.p[0].x;var py=cmd.p[0].y;var cx;var cy;var vertical=false;var horizontal=false;for(n=1;n<cmd.p.length;n++){cx=cmd.p[n].x;cy=cmd.p[n].y;if(cx-px==
0){if(!vertical)cmd.p[n-1].x+=.5;vertical=true;cmd.p[n].x+=.5}else vertical=false;if(cy-py==0){if(!horizontal)cmd.p[n-1].y+=.5;horizontal=true;cmd.p[n].y+=.5}else horizontal=false;px=cx;py=cy}context.save();if(cmd.cw&&cmd.ch){context.beginPath();context.rect(cmd.cl,cmd.ct,cmd.cw,cmd.ch);context.clip()}if(cmd.pm&&cmd.pm==14)context.globalCompositeOperation="xor";context.beginPath();context.moveTo(cmd.p[0].x,cmd.p[0].y);for(n=1;n<cmd.p.length;n++)context.lineTo(cmd.p[n].x,cmd.p[n].y);context.lineWidth=
cmd.w;context.strokeStyle=TVNC.toRGB(cmd.fg);context.stroke();context.globalCompositeOperation="source-over";context.restore()}}else if(cmd.c=="DE")TVNC.drawCmdDrawEdge(cmd,context);else if(cmd.c=="CR"){context.save();if(cmd.r.length==0){context.beginPath();context.rect(0,0,0,0);context.clip()}else{context.beginPath();for(n=0;n<cmd.r.length;n++){var r=cmd.r[n];context.rect(r.x,r.y,r.cx,r.cy)}context.clip()}}else if(cmd.c=="ER"){var canvasid="canvasER";TVNC.canvasER=document.getElementById(canvasid);
if(!TVNC.canvasER){TVNC.canvasER=document.createElement("canvas");TVNC.canvasER.style.zIndex=TVNC.baseZIndex+499;TVNC.canvasER.style.position="absolute";TVNC.canvasER.style.left="0px";TVNC.canvasER.style.top="0px";TVNC.canvasER.id=canvasid;TVNC.vncContainer.appendChild(TVNC.canvasER)}addValidCanvas(TVNC.canvasER);TVNC.canvasER.width=TVNC.rcParams.viewWidth;TVNC.canvasER.height=TVNC.rcParams.viewHeight;var auxContext=TVNC.canvasER.getContext("2d",{willReadFrequently:true});auxContext.restore();auxContext.clearRect(0,
0,TVNC.canvasER.offsetWidth,TVNC.canvasER.offsetHeight);auxContext.fillStyle=canvas.parentElement.mask.color;for(n=0;n<cmd.r.length;n++){var r=cmd.r[n];auxContext.fillRect(r.x,r.y,r.cx,r.cy)}}else if(cmd.c=="EA"){BTP_PRA_SRT=null;if(typeof TVNC.rcParams.events=="undefined"||TVNC.rcParams.events.onExecRemoteApp==null)$(window).trigger("execRemoteApp",[cmd]);else TVNC.rcParams.events.onExecRemoteApp([cmd])}else if(cmd.c=="EX"){BTP_PRA_STS=null;if(typeof TVNC.rcParams.events=="undefined"||TVNC.rcParams.events.onExecResult==
null)$(window).trigger("execResult",[cmd]);else TVNC.rcParams.events.onExecResult([cmd])}else if(cmd.c=="TX")try{TVNC.putRdpText(cmd,context)}catch(err){logError(err)}else if(cmd.c=="FC")TVNC.cacheFont(cmd);else if(cmd.c=="DB")TVNC.dstblt(context,cmd.o,0,cmd.x,cmd.y,cmd.cx,cmd.cy);else if(cmd.c=="OB")TVNC.CreateOffscreenBitmap(cmd.id,cmd.cx,cmd.cy,cmd.dlist);else if(cmd.c=="SS")TVNC.SwitchSurface(cmd.id);else if(cmd.c=="MO"){if(!cmd.sx)cmd.sx=0;if(!cmd.sy)cmd.sy=0;TVNC.MembltOffscreen(oriContext,
cmd.o,cmd.id,cmd.x,cmd.y,cmd.cx,cmd.cy,cmd.sx,cmd.sy)}else if(cmd.c=="RC")if(typeof TVNC.rcParams.events=="undefined"||TVNC.rcParams.events.onRemoteCommand==null)$(window).trigger("remoteCommand",[cmd.r]);else TVNC.rcParams.events.onRemoteCommand(cmd.r);else if(cmd.c=="FD"){var mime="";if(typeof cmd.mime!="undefined")mime=cmd.mime;var fileName=cmd.fn;if(typeof cmd.url!="undefined")fileName=cmd.url;if(typeof TVNC.rcParams.events=="undefined"||TVNC.rcParams.events.onFileDownload==null)$(window).trigger("fileDownload",
[fileName,mime]);else TVNC.rcParams.events.onFileDownload([fileName],mime)}else if(cmd.c=="DS"){let m=cmd.m;helper.console.log(`incoming "DS" command: ${JSON.stringify(cmd)}`,arguments);if(!m)m=[{id:_displayManager.mainDisplayId,w:cmd.w,h:cmd.h,hwnd:win.hwnd}];for(let i=0,t=m.length;i<t;i++){let wnd=m[i];_displayManager.processDisplayCmd(cmd.c,wnd.id,wnd.w,wnd.h,win.hwnd,wnd.x,wnd.y)}if(window!=window.top&&typeof TVNC.rcParams.events!="undefined"&&helper.object.validate(TVNC.rcParams.events.onDesktopResize))TVNC.rcParams.events.onDesktopResize(cmd.m)}else if(cmd.c==
"PR")TVNC.processPrint(cmd);else if(cmd.c=="LE"){BTP_PCL_ERR=null;try{helper.console.log(helper.string.format("Logon Error - code: {0}, data: {1}, description: {2}",cmd.ec,cmd.d,cmd.s),arguments)}catch(error){helper.console.warning("Cannot log 'LogonError'",error,arguments)}}else if(cmd.c=="CU"){_CUEnabled=true;item=TVNC.peekImageItem(root,cmd.qidx);if(!item)continue;if(!item.ready){win.cmds[0].processed=false;TVNC.deferCall(win.cmds[0],TVNC.processDrawCmds,[root,win,canvas,context]);return}if(item.image.data){let dx=
item.image.data.width-cmd.hx;let dy=item.image.data.height-cmd.hy;_displayManager.fireEvent("setCursor",{"src":item.image.data,"x":dx,"y":dy,"url":`url(${item.image.data.srcImage||item.image.data.src}) ${dx} ${dy}, auto`})}}else if(typeof TVNC.registeredDrawCmds[cmd.c]!="undefined")TVNC.registeredDrawCmds[cmd.c](cmd,win,context)}}TVNC.processImages(root,win,oriContext)};this.delayProcessImagePattern=function(ctx,item,cmd){helper.console.log("delayProcessImagePattern on image idx: "+item.idx,arguments);
var iCount=0;var createPattern=function(ctx,item,cmd){var ptrn=ctx.createPattern(item.image.data,"repeat");ctx.fillStyle=ptrn;ctx.fillRect(0,0,cmd.cx,cmd.cy);var auxImageData=ctx.getImageData(0,0,cmd.cx,cmd.cy);var imagedata=ctx.getImageData(cmd.x,cmd.y,cmd.cx,cmd.cy);if(auxImageData&&imagedata)TVNC.rop3Canvas(ctx,cmd,imagedata,auxImageData)};var processImagePattern=function(){if(iCount<5){if(typeof item.image.data.complete=="undefined"||item.image.data.complete==true)createPattern(ctx,item,cmd);
else setTimeout(function(){processImagePattern()},25);iCount++}else helper.console.log("cannot load this image: "+item.idx+" ,is not completed",arguments)};processImagePattern()};this.CreateOffscreenBitmap=function(id,cx,cy,dlist){if(this.offscreenCache[id])delete this.offscreenCache[id];var canvas=document.createElement("canvas");canvas.visibility="visible";canvas.display="block";canvas.style.position="absolute";canvas.style.left=-cx;canvas.style.top=-cy;canvas.style.zIndex=-1;canvas.width=cx;canvas.height=
cy;this.offscreenCache[id]=canvas;for(var i=0;i<dlist.length;i++)if(this.offscreenCache[dlist[i]]){delete this.offscreenCache[dlist[i]];this.offscreenCache[dlist[i]]=null}};this.SwitchSurface=function(id){if(id==65535)this.offscreenCanvas=null;else this.offscreenCanvas=this.offscreenCache[id]};this.MembltOffscreen=function(context,o,id,x,y,cx,cy,sx,sy){var srcContext=this.offscreenCache[id].getContext("2d",{willReadFrequently:true});var srcImageData=srcContext.getImageData(sx,sy,cx,cy);context.putImageData(srcImageData,
x,y)};this.clearOffscreenCache=function(){for(var i=0;i<this.offscreenCache.length;i++){if(this.offscreenCache[i])delete this.offscreenCache[i];this.offscreenCache[i]=null}};this.dstblt=function(context,rop,srccolor,x,y,cx,cy){var imagedata=null;try{imagedata=context.getImageData(x,y,cx,cy)}catch(e){if(helper.object.existsPath(window.netscape,"security.PrivilegeManager.enablePrivilege"))try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead");imagedata=context.getImageData(x,
y,cx,cy)}catch(error){helper.console.log(JSON.stringify(error),arguments)}}if(imagedata){var data=imagedata.data;var offset=0;for(var line=0;line<cy;line++)for(var col=0;col<cx;col++,offset+=4){var color=srccolor;if(rop!=12){var r=4294967295&data[offset];var g=4294967295&data[offset+1];var b=4294967295&data[offset+2];var pixel=r<<16&16777215|g<<8&16777215|b;color=this.doROP(rop,color,pixel)}data[offset]=color>>16&255;data[offset+1]=color>>8&255;data[offset+2]=color&255}imagedata.data=data;context.putImageData(imagedata,
x,y)}};this.revokeImageUrl=function(){var d=((new Date).getTime()-4*1E3).toString();for(var k in _blob.processedScreenUrl)if(k<=d){for(var i=0;i<_blob.processedScreenUrl[k].length;i++)_urlCreator.revokeObjectURL(_blob.processedScreenUrl[k][i]);delete _blob.processedScreenUrl[k]}else break};this.addRevokeObjectURL=function(items){if(!_blob.revoked){var bUrls=[];var d=(new Date).getTime();for(var k in items)if(items[k]&&items[k].image&&items[k].image.data&&items[k].image.data.blobImage&&!items[k].image.data.mouseImage)bUrls.push(items[k].image.data.srcImage||
items[k].image.data.src);if(bUrls.length>0){if(!_blob.processedScreenUrl[d])_blob.processedScreenUrl[d]=[];_blob.processedScreenUrl[d].push.apply(_blob.processedScreenUrl[d],bUrls)}}};this.addRevokeStringURL=function(src){if(!_blob.revoked)if(src!=""){var bUrls=[src];var d=(new Date).getTime();if(!_blob.processedScreenUrl[d])_blob.processedScreenUrl[d]=[];_blob.processedScreenUrl[d].push.apply(_blob.processedScreenUrl[d],bUrls)}};this.removeUsedItems=function(imgQueue){if(_usedImgQueueItems&&_usedImgQueueItems.length>
0&&imgQueue){for(var i=0;i<_usedImgQueueItems.length;i++)delete imgQueue[_usedImgQueueItems[i]];_usedImgQueueItems=[]}};this.processNextScreen=function(){if(!TVNC.imagesLoading&&TVNC.processNextScreenEnabled&&TVNC.msgQueue.length>0){var m=TVNC.msgQueue.shift();TVNC.receiveScreen(m);TVNC.revokeImageUrl();if(m.imgQueue){TVNC.addRevokeObjectURL(m.imgQueue.items);TVNC.removeUsedItems(m.imgQueue.items)}}};this.incImagesLoading=function(){TVNC.imagesLoading++};this.decImagesLoading=function(){TVNC.imagesLoading--};
this.noImagesLoading=function(){return TVNC.imagesLoading==0};this.preserveOriginalValue=function(obj,prop,localCache){if(typeof localCache!="undefined"&&typeof localCache[prop]!="undefined"&&typeof obj[prop]=="undefined")obj[prop]=localCache[prop];if(typeof obj.originalValues=="undefined")obj.originalValues={};if(typeof obj[prop]=="undefined")obj[prop]=TVNC.cmdCacheProps[prop];else if(typeof localCache!="undefined")localCache[prop]=obj[prop];obj.originalValues[prop]=obj[prop]};function imgQueueItemFromImageDecoderData(u8Array,
type,hash,key){var e=this.encoded;e.width=u8Array[0]|u8Array[1]<<8;e.height=u8Array[2]|u8Array[3]<<8;e.bpp=u8Array[4];e.decoder=u8Array[5];e.option1=u8Array[6];e.option2=u8Array[7];e.offset=u8Array.buffer.byteLength-u8Array.length+8;e.size=u8Array.buffer.byteLength-e.offset;e.data=u8Array.buffer;TVNC.InsertIntoImgQueueAndExecute(key,this)}function imgQueueItemFromImageArray(u8Array,type,hash,key){var cacheEnabled=hash.length&&TVNC.fs;var insertAndExecute=true;if(u8Array.length){this.encoded.data=
TVNC.u8ArrayToDataUri("image/"+type,u8Array);if(cacheEnabled)TVNC.fs.write(hash,this.encoded.data)}else if(cacheEnabled){insertAndExecute=false;var imgItem=this;TVNC.fs.read(hash,function(stream){imgItem.encoded.data=stream;TVNC.InsertIntoImgQueueAndExecute(key,imgItem)})}if(insertAndExecute)TVNC.InsertIntoImgQueueAndExecute(key,this)}function imgQueueItemFromLegacyStringData(stringBinaryData,type,hash,key){var cacheEnabled=hash.length&&TVNC.fs;var insertAndExecute=true;if(stringBinaryData.length){this.encoded.data=
TVNC.getImageStreamFromTB64(type,window.btoa(stringBinaryData));if(cacheEnabled)TVNC.fs.write(hash,this.encoded.data)}else if(cacheEnabled){insertAndExecute=false;var imgItem=this;TVNC.fs.read(hash,function(stream){imgItem.encoded.data=stream;TVNC.InsertIntoImgQueueAndExecute(key,imgItem)})}if(insertAndExecute)TVNC.InsertIntoImgQueueAndExecute(key,this)}function drawImgQueueItem(context,x,y,w,h,sx,sy,sw,sh){if(!this.image.data){if(!sw||!sh){logError("drawImgQueueItem(): image of type "+this.image.type+
", sw and sh are null for idx # "+this.idx+", error: "+this.error);return}this.drawError(context,"#800080","#FFFFFF",x,y,sw,sh);return}if(this.image.type=="img"){if(!w)w=this.getWidth();if(!h)h=this.getHeight();if(sx!=null&&sy!=null){if(!sw)sw=w;if(!sh)sh=h;context.drawImage(this.image.data,sx,sy,sw,sh,x,y,w,h)}else context.drawImage(this.image.data,x,y,w,h)}else if(this.image.type=="canvas")if(sx!=null&&sy!=null){if(!sw)sw=this.getWidth();if(!sh)sh=this.getHeight();context.putImageData(this.image.data,
x-sx,y-sy,sx,sy,sw,sh)}else context.putImageData(this.image.data,x,y);else{logError("drawImgQueueItem(): unknown image->type for idx # "+this.idx+", error: "+this.error);return}}function drawDummyImgQueueItem(context,fillStyle,strokeStyle,x,y,w,h){context.fillStyle=fillStyle;context.strokeStyle=strokeStyle;w-=1;h-=1;context.beginPath();context.rect(x,y,w,h);context.moveTo(x,y);context.lineTo(x+w,y+h);context.moveTo(x,y+h);context.lineTo(x+w,y);context.closePath();context.fill();context.stroke()}function getImgQueueItemWidth(){if(!this.image.data)return this.encoded.width;
return this.image.data.width}function getImgQueueItemHeight(){if(!this.image.data)return this.encoded.height;return this.image.data.height}function purgeImgQueueItemEncoded(){var e=this.encoded;e.width=0;e.height=0;e.decoder=0;e.option1=0;e.option2=0;e.bpp=0;e.offset=0;e.size=0;e.data=null}function purgeImgQueueItemImage(){delete this.image.data;this.image.data=null;this.image.type=null;this.ready=false;this.error=0}function purgeImgQueueItemAll(){this.purgeEncoded();this.purgeImage()}function imgQueueItemLoadFailed(error){this.purgeAll();
this.ready=true;this.error=error?error:255;TVNC.executeDeferred()}function imgQueueItemLoadSucceeded(){this.purgeEncoded();this.ready=true;this.error=0;TVNC.executeDeferred()}function imgQueueItemSetImg(loadedCallback,errorCallback,src){this.purgeImage();this.image.type="img";this.image.data=document.createElement("img");this.image.data.detachEvents=function(){this.onload=null;this.onerror=null;this.onabort=null};this.image.data.onload=function(e){if(typeof e.target.complete=="undefined"||e.target.complete==
true){this.detachEvents();loadedCallback(e)}else{helper.console.log("Image data is not completed but it is loaded.",arguments);var maxTimes=10;var countTimes=0;function retryLoadImage(){setTimeout(function(){if(countTimes>maxTimes){helper.console.log("Cannot process this image.",arguments);return}else if(typeof e.target.complete=="undefined"||e.target.complete==true){this.detachEvents();loadedCallback(e)}else retryLoadImage();countTimes++},50)}}};this.image.data.onerror=function(e){this.detachEvents();
errorCallback(e)};this.image.data.onabort=function(e){this.detachEvents();errorCallback(e)};this.image.data.blobImage=src.substr(0,4)=="blob";this.image.data.srcImage=src;this.image.data.src=src}function imgQueueItemSetCanvas(context,arData){if(this.image.type!="canvas"||!this.image.data||this.image.width!=this.encoded.width||this.image.height!=this.encoded.height){this.purgeImage();this.image.type="canvas";this.image.data=context.createImageData(this.encoded.width,this.encoded.height)}this.image.data.data.set(new Uint8ClampedArray(arData))}
this.getImageItem=function(){return TVNC.createImgQueueItem()};this.returnImageItem=function(item){item.purgeEncoded();if(_blob.on)TVNC.addRevokeObjectURL({0:item});item=null};this.createImgQueueItem=function(){return{ready:false,error:0,image:{type:null,data:null},encoded:{width:0,height:0,decoder:0,option1:0,option2:0,bpp:0,offset:0,size:0,data:null},fromImageDecoderData:imgQueueItemFromImageDecoderData,fromImageArray:imgQueueItemFromImageArray,fromLegacyStringData:imgQueueItemFromLegacyStringData,
draw:drawImgQueueItem,drawError:drawDummyImgQueueItem,getWidth:getImgQueueItemWidth,getHeight:getImgQueueItemHeight,purgeEncoded:purgeImgQueueItemEncoded,purgeImage:purgeImgQueueItemImage,purgeAll:purgeImgQueueItemAll,loadFailed:imgQueueItemLoadFailed,loadSucceeded:imgQueueItemLoadSucceeded,setImg:imgQueueItemSetImg,setCanvas:imgQueueItemSetCanvas}};this.getImageStreamFromTB64=function(imageType,imageBase64){return"data:image/"+imageType+";base64,"+imageBase64};this.buildImgQueue=function(msg){try{var w,
win,c,cmds,cmd,i,currCmd,localCache={};msg.group=0;if(msg.windows)for(w=0;w<msg.windows.length;w++){win=msg.windows[w];if(win.cmds){cmds=win.cmds;if(typeof TVNC.cmdCacheProps["c"]!="undefined")currCmd=TVNC.cmdCacheProps["c"];for(i=0;i<cmds.length;i++){cmd=cmds[i];if(typeof cmd.c!="undefined")currCmd=cmd.c;if(currCmd=="IC"||currCmd=="IP"||currCmd=="CB"||currCmd=="PB")if(TVNC.fs||typeof cmd.d!="undefined"&&cmd.d!=="")this.addToImgQueue(msg.imgQueue,cmd,"c",localCache);else cmd.qidx=-1}}if(win.imgs){imgs=
win.imgs;for(i=0;i<imgs.length;i++){img=imgs[i];this.addToImgQueue(msg.imgQueue,img,"i")}}}}catch(e){logError("buildImgQueue error: "+e.message)}};this.addToImgQueue=function(imgQueue,oJS,srcType,localCache){oJS.qidx=++TVNC.imgIndex%99999;var idx=TVNC.getKeyFromCmd(0,oJS.qidx);if(imgQueue.items[idx])delete imgQueue.items[idx];var item=TVNC.getImageItem();var processImgItem=true;if(srcType=="c"){this.preserveOriginalValue(oJS,"t",localCache);var cacheEnabled=oJS.hash&&oJS.hash.length&&TVNC.fs;if(oJS.d.length){if(cacheEnabled)TVNC.fs.write(oJS.hash,
"data:image/"+oJS.t+";base64,"+oJS.d)}else if(cacheEnabled){processImgItem=false;TVNC.fs.read(oJS.hash,function(stream){item.encoded.data=stream;item.idx=idx;delete oJS.d;delete oJS.t;imgQueue.items[idx]=item;TVNC.processImgQueueItem(item)})}if(processImgItem)item.encoded.data="data:image/"+oJS.t+";base64,"+oJS.d}else{item.encoded.data=oJS.img;delete oJS.img}if(processImgItem){delete oJS.d;delete oJS.t;item.idx=idx;imgQueue.items[idx]=item;TVNC.processImgQueueItem(item)}};this.InsertIntoImgQueueAndExecute=
function(idx,item){if(TVNC.imgQueue.items&&TVNC.imgQueue.items[idx])delete TVNC.imgQueue.items[idx];item["idx"]=idx;TVNC.imgQueue.items[idx]=item;TVNC.imgQueue.count++;this.processImgQueueItem(item)};this.addToImgQueueAndExecute=function(imgQueue,item){var i=imgQueue.items.length;item["idx"]=i;imgQueue.items.push(item);this.processImgQueueItem(item);return i};this.processImgQueueItem=function(item){var decoderFunc=TVNC.getImageDecoder(item.encoded.decoder);if(!decoderFunc){logError("raw decoder "+
item.encoded.decoder+" not found for image key "+item.idx);item.loadFailed()}else decoderFunc(item)};this.processImgQueue=function(imgQueue){if(!imgQueue.items)return;for(var i=0;i<imgQueue.items.length;i++)this.processImgQueueItem(imgQueue,imgQueue.items[i])};this.registerImageDecoder=function(id,fnc){if(!TVNC.imageDecoders)TVNC.imageDecoders=[];TVNC.imageDecoders[id]=fnc};this.getImageDecoder=function(id){if(!TVNC.imageDecoders)return null;return TVNC.imageDecoders[id]};this.registerImageDecoder(0,
function(item){item.setImg(function(){item.loadSucceeded();TVNC.processNextScreen()},function(){item.loadFailed();logError("image # "+item.idx+" with errors")},item.encoded.data)});this.registerRawBinaryHandler=function(idList,fnc){if(!TVNC.rawBinaryHandlers)TVNC.rawBinaryHandlers=[];for(var i=0;i<idList.length;++i)TVNC.rawBinaryHandlers[idList[i]]=fnc};function getRawBinaryHandler(hid,opt1,opt2){if(!TVNC.rawBinaryHandlers)return null;if(!hid)hid=0;if(!opt1)opt1=0;if(!opt2)opt2=0;var id=(hid&255)<<
16|(opt1&255)<<8|opt2&255;return TVNC.rawBinaryHandlers[id]}this.extractImageItem=function(root,qidx){var id=TVNC.getKeyFromCmd(root.group,qidx);var item=root.imgQueue.items[id];_usedImgQueueItems.push(id);return item};this.peekImageItem=function(root,qidx){return root.imgQueue?root.imgQueue.items[TVNC.getKeyFromCmd(root.group,qidx)]:null};this.processImages=function(root,win,context){if(typeof win.imgs!=="undefined"){var imgpart,item;for(var i=0;i<win.imgs.length;i++){imgpart=win.imgs[i];if(imgpart.processed)continue;
imgpart.processed=true;if(!root.imgQueue){logError("Error on processImages: root.imgQueue not found.");return}item=TVNC.peekImageItem(root,imgpart.qidx);if(!item)continue;if(!item.ready){imgpart.processed=false;TVNC.deferCall(imgpart,TVNC.processImages,[root,win,context]);return}else try{if(win.hwnd==0)if(TVNC.rcParams.overrideCursor){if(typeof item.image.data!="undefined"&&item.image.data!=null){var mx=agentInfo.isMobile?window.devicePixelRatio:environment.xZoom/100/environment.currentDevicePixelRatio;
_displayManager.fireEvent("setCursor",{"src":item.image.data,"x":imgpart.x,"y":imgpart.y,"url":`url(${item.image.data.srcImage||item.image.data.src}) ${win.dx*mx-imgpart.x} ${win.dy*mx-imgpart.y}, auto`})}if(_blob.on&&item.image.data.blobImage){if(_blob.processedMouseUrl.length>16)_urlCreator.revokeObjectURL(_blob.processedMouseUrl.shift());_blob.processedMouseUrl.push(item.image.data.srcImage||item.image.data.src);delete root.imgQueue.items[item.idx]}else TVNC.returnImageItem(TVNC.extractImageItem(root,
imgpart.qidx))}else{_displayManager.fireEvent("drawCursor",item,imgpart,{async:0});TVNC.returnImageItem(TVNC.extractImageItem(root,imgpart.qidx))}else{item.draw(context,imgpart.x,imgpart.y);TVNC.returnImageItem(TVNC.extractImageItem(root,imgpart.qidx))}}catch(ex){logError("Error on processImages: "+ex.message)}}}if(TVNC.useBufferedCanvas)helper.animationFrame.request(function(){win.realcanvas.getContext("2d",{willReadFrequently:true}).drawImage(context.canvas,0,0)});TVNC.processWindows(root)};this.processLayerInfo=
function(root,win,div,context){if(win.layerinfo){div.layerinfo=null;if(win.layerinfo.flags)div.layerinfo=clone(win.layerinfo)}if(div.layerinfo){if((div.layerinfo.flags&2)==2){div.style.opacity=div.layerinfo.alpha/255;div.style.MozOpacity=div.layerinfo.alpha/255;div.style.filter="alpha(opacity="+div.layerinfo.alpha/2.55+")"}if((div.layerinfo.flags&1)==1&&context.canvas.width>0&&context.canvas.height>0){var color=div.layerinfo.crkey;var key={r:color>>16&255,g:color>>8&255,b:color&255};var d=10;var frame=
context.getImageData(0,0,context.canvas.width,context.canvas.height);for(var j=0;j<frame.data.length;j+=4){var r=frame.data[j];var g=frame.data[j+1];var b=frame.data[j+2];if(key.r-d<=r&&r<key.r+d&&key.g-d<=g&&g<key.g+d&&key.b-d<=b&&b<key.b+d)frame.data[j+3]=0}context.putImageData(frame,0,0)}}};this.processWindows=function(obj,success){if(success)obj.success=success;if(obj.nextWindow>=obj.windows.length)obj.success();else{var win=obj.windows[obj.nextWindow];obj.nextWindow++;TVNC.processWindow(obj,
win)}};this.processWindow=function(root,win){if(typeof win.hwnd=="undefined"){setTimeout(TVNC.reload,1);return}var canvasid=productId+"_canvas_"+win.hwnd;var canvas=document.getElementById(canvasid);if(_blob.on&&win.hwnd=="0"&&win.imgs&&win.imgs.length)for(var i=0;i<win.imgs.length;i++){var k=TVNC.getKeyFromCmd(root.group,win.imgs[i].qidx);if(helper.object.existsPath(root.imgQueue.items[k],"image.data"))root.imgQueue.items[k].image.data.mouseImage=true}if(!canvas&&win.hwnd!==0)canvas=this.createCanvas(win);
if(typeof win.className!="undefined")canvas.className=win.className;var realcanvas=canvas.canvas;if(!realcanvas)return;var context=realcanvas.getContext("2d",{willReadFrequently:true});var vw=helper.object.validate(win.width);if(win.hwnd==0){if(_blob.on&&win.imgs&&win.imgs.length)for(var i=0;i<win.imgs.length;i++){var k=TVNC.getKeyFromCmd(root.group,win.imgs[i].qidx);if(helper.object.existsPath(root.imgQueue.items[k],"image.data"))root.imgQueue.items[k].image.data.mouseImage=true}_displayManager.fireEvent("setCursor",
win)}else{var canvasid=productId+"_canvas_"+win.hwnd;var canvas=document.getElementById(canvasid);var realcanvas=null;var context=null;if(!canvas)canvas=this.createCanvas(win);if(typeof win.className!="undefined")canvas.className=win.className;realcanvas=canvas.canvas;if(!realcanvas)return;context=realcanvas.getContext("2d",{willReadFrequently:true});var vw=helper.object.validate(win.width);if(win.width==0||win.height==0){canvas.style.visibility="hidden";canvas.style.display="none";TVNC.fireCustomEvents("canvasHidden",
win);if(productId==="virtualui")if(win.hwnd!=0&&TVNC.rcParams?.events?.onReleaseCanvas)TVNC.rcParams.events.onReleaseCanvas(win)}else{if(helper.object.validate(win.left)&&(win.width==canvas.width&&win.height==canvas.height||canvas.width*canvas.height==0)){canvas.style.left=win.left-TVNC.rcParams.viewLeft+"px";canvas.style.top=win.top-TVNC.rcParams.viewTop+"px"}if(vw&&(win.width!=canvas.width||win.height!=canvas.height)||canvas.resizing)if(canvas.width*canvas.height==0){canvas.width=win.width;canvas.height=
win.height;canvas.style.width=win.width+"px";canvas.style.height=win.height+"px";realcanvas.width=win.width;realcanvas.height=win.height;realcanvas.style.width=win.width+"px";realcanvas.style.height=win.height+"px"}else if(helper.object.validate(TVNC.rcParams.events.onCanvasResize))if(TVNC.rcParams.events.onCanvasResize(win,canvas))TVNC.updateCanvasSize(canvas,win.left-TVNC.rcParams.viewLeft,win.top-TVNC.rcParams.viewTop,win.width,win.height);else canvas.resizing=true;else TVNC.updateCanvasSize(canvas,
win.left-TVNC.rcParams.viewLeft,win.top-TVNC.rcParams.viewTop,win.width,win.height);if(vw){if(productId!="virtualui")canvas.style.display="block";TVNC.fireCustomEvents("canvasShow",win);canvas.style.visibility="visible"}canvas.style.zIndex=this.baseZIndex+win.zidx*10}}if(typeof TVNC.rcParams.events!="undefined"&&helper.object.validate(TVNC.rcParams.events.onProcessWindow))TVNC.rcParams.events.onProcessWindow(root,win,canvas);if(TVNC.useBufferedCanvas){if(!realcanvas.bufferedCanvas){realcanvas.bufferedCanvas=
document.createElement("canvas");realcanvas.bufferedCanvas.width=realcanvas.width;realcanvas.bufferedCanvas.height=realcanvas.height}var bufferedContext=realcanvas.bufferedCanvas.getContext("2d",{willReadFrequently:true});win.realcanvas=realcanvas;TVNC.partialAnimationFrameUpdate(function(){TVNC.processDrawCmds(root,win,realcanvas,bufferedContext);TVNC.processLayerInfo(root,win,canvas,context);context=null})}else TVNC.partialAnimationFrameUpdate(function(){TVNC.processDrawCmds(root,win,realcanvas,
context);if(canvas)TVNC.processLayerInfo(root,win,canvas,context);context=null});if(!this.rcParams.cursorVisible)_displayManager.fireEvent("hideCursor");else if(TVNC.rcParams.overrideCursor)_displayManager.fireEvent("resetCursor");if(agentInfo.isIOS&&agentInfo.iosVersion<=7&&win.hwnd==0)_displayManager.fireEvent("setCursor","visible")};this.updateCanvasSize=function(canvas,newLeft,newTop,newWidth,newHeight){var imagedata=null;var realcanvas=canvas.canvas;canvas.resizing=false;var context=realcanvas.getContext("2d",
{willReadFrequently:true});if(realcanvas.width<newWidth||realcanvas.height<newHeight){try{imagedata=context.getImageData(0,0,realcanvas.width,realcanvas.height)}catch(e){if(helper.object.existsPath(window.netscape,"security.PrivilegeManager.enablePrivilege"))try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead");imagedata=context.getImageData(0,0,newWidth,newHeight)}catch(error){helper.console.log(JSON.stringify(error),arguments)}}realcanvas.width=newWidth;realcanvas.height=
newHeight;realcanvas.style.width=newWidth+"px";realcanvas.style.height=newHeight+"px";if(imagedata)context.putImageData(imagedata,0,0);else if(canvas.hwnd!==0){context.fillStyle="#CCC";context.fillRect(0,0,newWidth,newHeight)}}canvas.width=newWidth;canvas.height=newHeight;if(!isNaN(newLeft))canvas.style.left=newLeft+"px";if(!isNaN(newTop))canvas.style.top=newTop+"px";canvas.style.width=newWidth+"px";canvas.style.height=newHeight+"px";var hwnd=canvas.hwnd!=undefined&&canvas.hwnd==0?canvas.hwnd:canvas.id.indexOf("_0")!=
-1?0:1;if(productId=="thinrdp"&&hwnd==1){TVNC.vncdiv.style.width=TVNC.vncContainer.style.width=newWidth+"px";TVNC.vncdiv.style.height=TVNC.vncContainer.style.height=newHeight+"px"}imagedata=null};this.processControls=function(div,canvas){return};this.newPrintDialog=function(obj){try{if(printDialog==null)printDialog=createPrintDialog();if(!printDialog){if(typeof obj.progress=="undefined"||!obj.progress)TVNC.openPrnWindow({"url":obj.url,"title":obj.title,"obj":obj},true);return}if(helper.object.existsPath(self,
"clientSettings.PrintDialog")){if(helper.object.existsPath(self.clientSettings.PrintDialog,"DefaultMethod"))printDialog.defaultPrintMethod=self.clientSettings.PrintDialog.DefaultMethod;if(helper.object.existsPath(self.clientSettings.PrintDialog,"BypassDialog"))printDialog.bypassPrintDialog=self.clientSettings.PrintDialog.BypassDialog}var fUrl=obj.url;if(_url.httpConnection!==""){var surl=_url.httpConnection.split("/");var i=surl.length-1;var vp="";while(i>=0&&vp===""){if(surl[i]!==""){vp=surl[i];
i=0}i--}fUrl=helper.url.parseUrl(_url.httpConnection+obj.url.replace(vp,"")).toUrl()}printDialog.setDocument(fUrl,obj.title,obj.preview,obj.progress,TVNC.rcParams.events.onPrintHandler)}catch(error){if(typeof obj.progress=="undefined"||!obj.progress)TVNC.openPrnWindow({"url":obj.url,"title":obj.title,"obj":obj},true)}};this.processPrint=function(obj){var base=cookiePrefix==="VNC"?helper.url.parseUrl(location.href).toUrl("-vp-o"):_url.baseUrl;var url=base+obj.file.substring(1)+"?SID="+TVNC.rcParams.id;
if(TVNC.runInPublicServer&&window.top!=window)url="https://www.thinvnc.net"+url;obj.url=url;if(typeof TVNC.rcParams.events==="undefined"||!TVNC.rcParams.events.onFileReady)TVNC.newPrintDialog(obj);else TVNC.rcParams.events.onFileReady({"url":url,"title":obj.title,"obj":obj})};this.getProtocol=function(){var proto=TVNC.rcParams.protocol?TVNC.rcParams.protocol:window.location.protocol;return proto.toLowerCase()};this.getAjaxUrl=function(){var url="";var baseUrl="";url=TVNC.rcParams.server?TVNC.getProtocol()+
"//"+TVNC.rcParams.server:"";baseUrl=_url.baseUrl;var paths=baseUrl.substr(0,baseUrl.length-2).split("/");if(paths.length>2){url+="/"+paths[1];baseUrl=baseUrl.substr(baseUrl.indexOf("/",1))}if(TVNC.gatewayAccessKey!="")if(url.indexOf("/"+TVNC.gatewayAccessKey)<0)url+="/"+TVNC.gatewayAccessKey;url+=(baseUrl[0]!=="/"?"/":"")+baseUrl;return url};this.getCrossDomainDataType=function(){return _defaultResponseType};this.getCrossDomainUrl=function(url){return url};this.sendAck=function(){if(TVNC.rcParams.clientAck>
0)_comm.wsSend("cmd=ready")};this.sendXoff=function(){if(!TVNC.xoff&&TVNC.rcParams.xoffEnabled){helper.console.warning("***********************",arguments);helper.console.warning("SENDING XOFF CMD !!!!!!",arguments);helper.console.warning("***********************",arguments);_comm.wsSend("cmd=xoff");TVNC.xoff=true}};this.sendXon=function(){if(TVNC.xoff&&TVNC.rcParams.xoffEnabled){helper.console.warning("***********************",arguments);helper.console.warning("SENDING XON CMD !!!!!!!",arguments);
helper.console.warning("***********************",arguments);_comm.wsSend("cmd=xon");TVNC.xoff=false}};this.sendPostAjaxCmd=function(query,data){_comm.post({"url":_url.httpConnection+"cmd?"+query,"data":data})};this.sendServerCmd=function(cmd,query){if(allowSendingCommands)if(_comm.protocol===Thinfinity.Communication.protocol.AJAX){if(TVNC.rcParams.id)_comm.send(TVNC.completeAjaxParams({"queueName":this.queueRequestName,"url":_url.httpConnection+cmd+"?"+query+"&id="+this.rcParams.id,"dataType":_defaultResponseType,
"success":TVNC.serverCmdResult,"error":function(msg,xhr){TVNC.throwErrorConnection(msg,xhr)}}))}else _comm.wsSend(query+"&id="+this.rcParams.id)};this.receiveScreen=function(obj){if(!helper.object.validate(obj)||obj.status==2){setTimeout(TVNC.reload,1);return}if(obj.status==4){if(typeof obj.cmd!="undefined"&&obj.cmd=="openLinkDlg")if(typeof TVNC.rcParams.events=="undefined"||TVNC.rcParams.events.onOpenLink==null)$(window).trigger("OpenLink",obj);else TVNC.rcParams.events.onOpenLink(obj);else{TVNC.processPrint(obj);
setTimeout(TVNC.reload,1)}return}if(obj.status==9){BTP_PRA_END=null;TVNC.disconnect();BTP_PS_END1=null;TVNC.dispose();return}if(helper.object.validate(obj.caret)){var fEvent=TVNC.caretX!=obj.caret.x||TVNC.caretY!=obj.caret.y;TVNC.caretX=obj.caret.x;TVNC.caretY=obj.caret.y;if(fEvent)TVNC.fireCustomEvents("updateCaretPosition",{"x":TVNC.caretX,"y":TVNC.caretY})}if(typeof obj.windows!="undefined"){obj.nextWindow=0;TVNC.processWindows(obj,function(){for(var i=TVNC.vncContainer.childNodes.length-1;i>=
0;i--){var elem=TVNC.vncContainer.childNodes[i];if(!elem)break;else if(_validCanvas.indexOf(elem)!==-1)continue;else if(elem.tagName=="CANVAS"||elem.tagName=="DIV"&&elem.id.match(/.*_canvas.*/)){var found=false;if(_CUEnabled&&elem.id==productId+"_canvas_0")found=true;for(j=0;j<obj.windows.length&&!found;j++){var canvasid=productId+"_canvas_"+obj.windows[j].hwnd;if(elem.id==canvasid||(elem.id==productId+"_canvasborder"+obj.windows[j].hwnd||cookiePrefix==="RDP"&&elem.id!==productId+"_canvas_0"))found=
true}if(elem==TVNC.canvasER)found=true;if(!found){elem.style.display="none";var hwnd=elem.id.replace(productId+"_canvas_","");if(hwnd!=0)TVNC.fireCustomEvents("canvasHidden",{"hwnd":hwnd});if(elem.mask){delete elem.mask;elem.mask=null}if(typeof TVNC.rcParams.events!="undefined"&&helper.object.validate(TVNC.rcParams.events.onDeleteWindow))TVNC.rcParams.events.onDeleteWindow(elem);elem.innerHTML="";try{TVNC.vncContainer.removeChild(elem)}catch(err){elem.innerHTML="";elem.style.display="none";logError("receiveScreen: "+
err)}elem=null}}}TVNC.processNextScreenEnabled=true;setTimeout(function(){TVNC.processNextScreen()},0)})}if(helper.object.validate(obj.sound))for(i=0;i<obj.sound.length;i++){var chunk=obj.sound[i].chunk;TVNC.sound.play(null,window.atob(unescape(chunk)))}if(!TVNC.rcParams.remotePointer&&!TVNC.rcParams.mouseControl&&!TVNC.rcParams.overrideCursor)_displayManager.fireEvent("setCursor","default");if(TVNC.rcParams.mouseControl&&!TVNC.rcParams.remotePointer&&helper.object.validate(obj.cursor))if(obj.cursor.shape!=
undefined)_displayManager.fireEvent("setCursor",obj.cursor.shape);TVNC.zoomDesktop();if(obj.status==3)if(productId=="thinrdp"&&TVNC.useAjax==true)TVNC.disconnect();else setTimeout(TVNC.reconnect,1);else if(TVNC.rcParams.active)setTimeout(TVNC.reload,1);if(typeof TVNC.rcParams.events=="undefined"||TVNC.rcParams.events.onScreenReceived==null)$(window).trigger("screenReceived",obj);else TVNC.rcParams.events.onScreenReceived(obj)};function resetLastError(){oLastError.message=null;oLastError.code=null;
oLastError.date=null}this.throwErrorConnection=function(oError,xhr){errorOccurs++;clearTimeout(oLastError.timeoutId);var msg=helper.object.validate(oError)?typeof oError.message!="undefined"?oError.message:oError:"";if(errorOccurs>5){oLastError.timeoutId=setTimeout(function(){resetLastError()},oLastError.elapsedTime);if(oError!=""){oLastError.date=new Date;oLastError.message=msg;oLastError.code=typeof oError.code!="undefined"?oError.code:""}try{if(typeof TVNC.rcParams.events=="undefined"||TVNC.rcParams.events.onServerError==
null)$(window).trigger("serverError",oError);else TVNC.rcParams.events.onServerError(oError);helper.console.log("'serverError' disconnecting. "+msg,arguments)}catch(error){helper.console.warning("'serverError' disconnecting. message: "+error.message,error,arguments)}TVNC.disconnect();return}else{helper.console.log("'serverError' reconnecting... "+msg,arguments);if(xhr&&xhr.status===Thinfinity.Communication.errorCode.NOT_FOUND)_comm.forceReconnect();else{_comm.restart(Thinfinity.Communication.protocol.AJAX);
TVNC.reset();TVNC.reconnect()}return}};this.stopCheckingConnectionLost=function(obj){return false};this.serverCmdResult=function(data){if(Object.startObserve)Object.startObserve();if(agentInfo.isMobile)_displayManager.fireEvent("setCursor","block");var obj=null;if(TVNC.useAjax&&!TVNC.crossDomain())obj=typeof data!="object"?JSON.parse(data):data;else obj=data;if(typeof obj=="undefined"){helper.console.error(consts.appProfileMissing+", "+consts.technicalSupport,{},arguments);obj={}}if(typeof obj.id==
"undefined")return;if(typeof obj.clipboardEnabled!="undefined"){TVNC.rcParams.clipboard=obj.clipboardEnabled;if(["ZSC"].indexOf(window.cookiePrefix)!=-1)TVNC.rcParams.synchronizeClipboard=false;else TVNC.rcParams.synchronizeClipboard=window?.customSettings?.synchronizeClipboard??window?.clientSettings?.SynchronizeClipboard??true;TVNC.rcParams.clipboardFileTransfer=obj.clipboardFileTransferEnabled||false;_displayManager.fireEvent("localEvent",{cmd:"sessionstatus",data});_preventKeys.available=["thinrdp"].indexOf(productId)!==
-1&&TVNC.rcParams.clipboard}TVNC.rcParams.sound=obj.soundEnabled;if(TVNC.rcParams.sound&&!_audioDriver){_audioDriver=new Thinfinity.Driver.Audio({methods:{sendCmd:this.sendCmd}});_packetReceiver.registerHandler(2,_audioDriver.play)}if(productId==="thinvnc"&&obj.cmd=="sessionStatus")_displayManager.processDisplayCmd("DS",0,obj.viewWidth,obj.viewHeight,null,0,0);let oData=null;let oError={message:"",code:0};if(typeof data.errormsg==="object"){oData=data.errormsg;oError={...oError,...oData}}oError.message=
(oData?.msg??obj.errormsg)||(typeof obj.errmsg!="undefined"?obj.errmsg:typeof obj.errstr!="undefined"?obj.errstr:"");oError.code=oData?.code||obj.rc||obj.code||obj.errno||0;if(obj.id==0){let resetLastError=function(){clearTimeout(oLastError.timeoutId);oLastError.timeoutId=setTimeout(function(){resetLastError()},oLastError.elapsedTime);if(oError!=""&&typeof oError.code!="undefined"){oLastError.date=new Date;oLastError.message=oError.message;oLastError.code=oError.code}};BTP_PS_ERR=null;if(!(oData&&
(oData.code!="undefined"||oError.code==-1))){helper.console.warning(`The connection has ended with errors: id: ${obj.id}, code: ${oError.code}, message: ${oError.message}, Session has ended: true`,arguments);_isSessionEnded=true;_comm.wsClose();resetLastError()}else _comm.reset();try{if(typeof TVNC.rcParams.events=="undefined"||TVNC.rcParams.events.onServerError==null)$(window).trigger("serverError",oError);else TVNC.rcParams.events.onServerError(oError)}catch(error){helper.console.warning("'serverError' calling attached method fail. Message: "+
error.message,error,arguments)}if(helper.object.existsPath(oError,"code")&&ENUM_CODES.authenticationCodeErrors.indexOf(oError.code.toString())!=-1){if(oError.message!="")helper.console.warning(oError.message);if(window.environment.supportsFullScreen&&window.environment.isFullscreen)window.environment.exitFullscreen(false);if(Object.stopObserve)Object.stopObserve()}else;if(_isSessionEnded)_comm.dispose();return}else if(obj.cmd=="sessionStatus"&&oError.message=="Not authenticated"){TVNC.throwErrorConnection(oError,
{"status":0});return}else if(obj.cmd=="reconnectionAttempt"){if(typeof TVNC.rcParams.events==="undefined"||TVNC.rcParams.events.onReconnectionAttempt===null)$(window).trigger("onReconnectionAttempt",[obj]);else TVNC.rcParams.events.onReconnectionAttempt(obj);return}if(obj.id=="##"){TVNC.disconnect();return}if(obj.id=="!!"){if(obj.cmd==="wakeonlan"){if(_comm.protocol===Thinfinity.Communication.protocol.WEBSOCKET)_comm.wsWOL(true);if(_fromBroker)keepHTTPAlive(true);if(typeof TVNC.rcParams.events===
"undefined"||TVNC.rcParams.events.onWakeOnLan===null)$(window).trigger("wakeOnLan",[obj]);else TVNC.rcParams.events.onWakeOnLan(obj)}else if(obj.cmd==="waitforvm"){if(_comm.protocol===Thinfinity.Communication.protocol.WEBSOCKET)_comm.wsWOL(true);if(_fromBroker)keepHTTPAlive(true);if(typeof TVNC.rcParams.events==="undefined"||TVNC.rcParams.events.onWakeForVM===null)$(window).trigger("waitForVM",[obj]);else TVNC.rcParams.events.onWaitForVM(obj)}else if(typeof TVNC.rcParams.events=="undefined"||TVNC.rcParams.events.onServerCommandEvent==
null)$(window).trigger("serverCmdResult",[obj]);else TVNC.rcParams.events.onServerCommandEvent(obj);return}else if(_comm.protocol===Thinfinity.Communication.protocol.WEBSOCKET)_comm.wsWOL(false);serverDPR.enabled=helper.object.existsPath(obj,"smartZoom")?helper.object.convertTo(obj.smartZoom,"boolean"):false;var rcActive=TVNC.rcParams.active;TVNC.rcParams.active=typeof obj.active!="undefined"?obj.active:TVNC.rcParams.active;TVNC.rcParams.monitor=typeof obj.monitor!="undefined"?obj.monitor:TVNC.rcParams.monitor;
TVNC.rcParams.monitorCount=typeof obj.monitorCount!="undefined"?obj.monitorCount:TVNC.rcParams.monitorCount;TVNC.rcParams.viewLeft=typeof obj.viewLeft!="undefined"?obj.viewLeft:TVNC.rcParams.viewLeft;TVNC.rcParams.viewTop=typeof obj.viewTop!="undefined"?obj.viewTop:TVNC.rcParams.viewTop;TVNC.rcParams.viewWidth=typeof obj.viewWidth!="undefined"?obj.viewWidth:TVNC.rcParams.viewWidth;TVNC.rcParams.viewHeight=typeof obj.viewHeight!="undefined"?obj.viewHeight:TVNC.rcParams.viewHeight;TVNC.rcParams.rfxEnabled=
typeof obj.rfxEnabled!="undefined"?obj.rfxEnabled:false;if(productId=="virtualui"){if(TVNC.vncContainer.parentElement)if(agentInfo.isMobile&&(agentInfo.isIOS&&agentInfo.ipadModel>=3||agentInfo.isMSIE)){TVNC.vncContainer.parentElement.style.width=Math.min(environment.rawWidth,TVNC.rcParams.viewWidth)+"px";TVNC.vncContainer.parentElement.style.height=Math.min(environment.rawHeight,TVNC.rcParams.viewHeight)+"px"}else{TVNC.vncContainer.parentElement.style.width=TVNC.rcParams.viewWidth+"px";TVNC.vncContainer.parentElement.style.height=
TVNC.rcParams.viewHeight+"px"}}else if((typeof obj.viewHeight!="undefined"||typeof obj.viewWidth!="undefined")&&typeof TVNC.rcParams.events!="undefined"&&helper.object.validate(TVNC.rcParams.events.onDesktopResize))TVNC.rcParams.events.onDesktopResize(TVNC.rcParams.viewWidth,TVNC.rcParams.viewHeight);TVNC.rcParams.mouseControl=typeof obj.mouseControl!="undefined"?obj.mouseControl:TVNC.rcParams.mouseControl;TVNC.rcParams.touchControl=typeof obj.touchControl!="undefined"?obj.touchControl:TVNC.rcParams.touchControl;
if(productId==="thinvnc")TVNC.rcParams.serverControlMouse=!TVNC.rcParams.mouseControl;TVNC.rcParams.kbdControl=typeof obj.kbdControl!="undefined"?obj.kbdControl:TVNC.rcParams.kbdControl;TVNC.rcParams.kbdUnicode=typeof obj.kbdUnicode!="undefined"?obj.kbdUnicode:TVNC.rcParams.kbdUnicode;TVNC.rcParams.showOnStart=typeof obj.showOnStart!="undefined"?obj.showOnStart:TVNC.rcParams.showOnStart;TVNC.rcParams.UBRWID=typeof obj.UBRWID!="undefined"?obj.UBRWID:TVNC.rcParams.UBRWID;if(obj.scraper!=null){TVNC.rcParams.scraper=
typeof obj.scraper!="undefined"?obj.scraper:TVNC.rcParams.scraper;if(obj.scraperArgs!=null)TVNC.rcParams.scraperArgs=typeof obj.scraperArgs!="undefined"?obj.scraperArgs:TVNC.rcParams.scraperArgs}TVNC.rcParams.quality=typeof obj.quality!="undefined"?obj.quality:TVNC.rcParams.quality;TVNC.rcParams.imageQuality=typeof obj.imageQuality!="undefined"?obj.imageQuality:TVNC.rcParams.imageQuality;TVNC.rcParams.wallpaper=typeof obj.wallpaper!="undefined"?obj.wallpaper:TVNC.rcParams.wallpaper;TVNC.rcParams.pixelFormat=
typeof obj.pixelFormat!="undefined"?obj.pixelFormat:TVNC.rcParams.pixelFormat;TVNC.rcParams.grayscale=typeof obj.grayscale!="undefined"?obj.grayscale:TVNC.rcParams.grayscale;if(typeof obj.remotePointer!="undefined"&&!obj.remotePointer)TVNC.rcParams.remotePointer=obj.remotePointer;TVNC.rcParams.imageMethod=typeof obj.imageMethod!="undefined"?obj.imageMethod:TVNC.rcParams.imageMethod;if(typeof obj.imageList!="undefined")if(obj.imageList=="json")TVNC.imageListType=0;else if(obj.imageList=="text")TVNC.imageListType=
1;else if(obj.imageList=="binary")TVNC.imageListType=2;TVNC.rcParams.fitmode=typeof obj.quality!="undefined"?obj.fitmode:TVNC.rcParams.fitmode;var fitResolutionMode="";switch(TVNC.rcParams.fitmode){case 1:fitToBrowser=false;fitResolutionMode="fixed";break;case 2:fitResolutionMode="fittoscreen";break;case 0:default:fitResolutionMode="fittobrowser";TVNC.rcParams.fitToBrowser=true;break}TVNC.rcParams.fitToBrowser=fitResolutionMode!="fittobrowser"?false:true;TVNC.rcParams.resolution=fitResolutionMode;
if(TVNC.savedMaxWidth==0||TVNC.rcParams.maxWidth==0)if(!agentInfo.isMobile)TVNC.rcParams.maxWidth=window.environment.rawWidth||screen.width;else if(productId=="virtualui")TVNC.rcParams.maxWidth=window.environment.currentWidth||screen.height;else TVNC.rcParams.maxWidth=window.environment.rawWidth||screen.width;if(TVNC.savedMaxHeight==0||TVNC.rcParams.maxHeight==0)if(!agentInfo.isMobile)TVNC.rcParams.maxHeight=window.environment.rawHeight||screen.height;else if(productId=="virtualui")TVNC.rcParams.maxHeight=
window.environment.currentHeight||screen.height;else TVNC.rcParams.maxHeight=window.environment.rawHeight||screen.height;if(obj.accessKey)TVNC.gatewayAccessKey=obj.accessKey;TVNC.savedMaxWidth=TVNC.rcParams.maxWidth;TVNC.savedMaxHeight=TVNC.rcParams.maxHeight;var version=parseInt(obj.version||0,10);if(version>=2)mouseBuffer.isAvailable=true;else mouseBuffer.isAvailable=false;if(TVNC.rcParams.active&&TVNC.rcParams.mouseControl)if(mouseBuffer.isAvailable==true)TVNC.sendMouseQueue();else TVNC.sendMouseMove();
if(TVNC.rcParams.fitmode==0||TVNC.rcParams.fitToBrowser==true)if(typeof obj.dpr!="undefined"){var zoomBottomLimit=1;if(obj.dpr!=window.environment.currentDevicePixelRatio||TVNC.usedDPR!=window.environment.currentDevicePixelRatio||window.environment.currentOrientation!=serverCmdResultOrientation){serverCmdResultOrientation=window.environment.currentOrientation;window.environment.currentDevicePixelRatio=obj.dpr>0?obj.dpr:1;TVNC.usedDPR=window.environment.currentDevicePixelRatio;if(typeof obj.marginLeft!=
"undefined")window.environment.margin.left=obj.marginLeft;if(typeof obj.marginTop!="undefined")window.environment.margin.top=obj.marginTop;if(typeof obj.marginRight!="undefined")window.environment.margin.right=obj.marginRight;if(typeof obj.marginBottom!="undefined")window.environment.margin.bottom=obj.marginBottom;if(typeof obj.fullscreen!="undefined")window.environment.fullScreenAvailable=true;TVNC.savedMaxWidth=TVNC.rcParams.maxWidth;TVNC.savedMaxHeight=TVNC.rcParams.maxHeight;zoomBottomLimit=1/
window.environment.currentDevicePixelRatio;if(agentInfo.isMobile==true){if(productId!="ZSC"){adjustMainSize();TVNC.zoomFactor=zoomBottomLimit;zoom(zoomBottomLimit)}window.scrollTo(0,0)}else{screenHeight=environment.detectedHeight;screenWidth=environment.detectedWidth;if(serverDPR.enabled)serverDPR.originalValue=obj.dpr;if(productId==="virtualui")zoomBottomLimit=1;if(TVNC.zoomFactor!=zoomBottomLimit)TVNC.zoomDesktop(zoomBottomLimit);TVNC.rcParams.maxWidth=Math.round(screenWidth/zoomBottomLimit);TVNC.rcParams.maxHeight=
Math.round(screenHeight/zoomBottomLimit)}}}else if(serverDPR.enabled==false)window.environment.fixDevicePixelRatio();if(agentInfo.isMobile==true&&productId=="thinrdp"&&helper.object.validate(obj.reconnectOnResize))restartOnOrientationChange=obj.reconnectOnResize;if(TVNC.startPending)setTimeout(TVNC.start,1);if(helper.object.existsPath(self,"clientSettings.OverrideCursor"))TVNC.overrideCursor=self.clientSettings.OverrideCursor;if(helper.object.existsPath(self,"clientSettings.MousePressAsRightButton"))TVNC.rcParams.mousePressAsRightButton=
self.clientSettings.MousePressAsRightButton;if(rcActive!=obj.active){if(obj.active){TVNC.hookKM();TVNC.reload();syncCookies(startCookiesSync);if(cookiePrefix!="FMX")stopSyncCookies();BTP_PS_STR=null;if(typeof TVNC.rcParams.asyncCopy!=="undefined")_displayManager.fireEvent("asyncCopy",TVNC.rcParams.asyncCopy);_getServerUrl.retriesCount=_connectResult.count=0;if(typeof TVNC.rcParams.events=="undefined"||TVNC.rcParams.events.onSessionStart==null)$(window).trigger("sessionStart",obj);else TVNC.rcParams.events.onSessionStart(obj);
initializeComponents(data);if(cookiePrefix!=="VNC"&&agentInfo.isMobile)TVNC.rcParams.scaled=false}else{BTP_PS_STP=null;if(typeof TVNC.rcParams.events=="undefined"||TVNC.rcParams.events.onSessionStop==null)$(window).trigger("sessionStop",obj);else TVNC.rcParams.events.onSessionStop(obj)}if(obj.isShadowSession!==true)_displayManager.preserveConfiguration=true}TVNC.observable.isOTURLSession=obj.isOTURLSession;_displayManager.fireEvent("localEvent",{cmd:"serverCmdResult",obj});if(typeof TVNC.rcParams.events==
"undefined"||TVNC.rcParams.events.onServerCommandResult==null)$(window).trigger("onServerCommandResult",obj);else TVNC.rcParams.events.onServerCommandResult(obj);if(productId.toLowerCase()=="virtualui"){let scrollPoint=document.getElementById(TVNC.vncdivId+"_ScrollPoint");if(scrollPoint)helper.style.addClass(scrollPoint,`top:${TVNC.rcParams.viewHeight}px;left:${TVNC.rcParams.viewWidth}px`);else if(TVNC.vncdiv)helper.dom.appendJsonElement({parentElement:TVNC.vncdiv,type:"DIV",attributes:{id:TVNC.vncdivId+
"_ScrollPoint",style:`height:1px;width:1px;backgroundColor:transparent;position:absolute;top:${TVNC.rcParams.viewHeight}px;left:${TVNC.rcParams.viewWidth}px;zIndex:-1;`}})}TVNC.sendCmd("cmd=started")};this.sendCmd=function(query){return TVNC.sendServerCmd("cmd",query)};this.setMouseControl=function(value){TVNC.sendCmd("cmd=params&mouseControl="+value+"&kbdControl="+!TVNC.rcParams.kbdControl+"&touchControl="+!TVNC.rcParams.touchControl)};this.setQuality=function(value){TVNC.sendCmd("cmd=params&quality="+
value)};this.setimageMethod=function(value){TVNC.sendCmd("cmd=params&imageMethod="+value)};this.setGrayscale=function(value){TVNC.sendCmd("cmd=params&grayscale="+value)};this.setKbdControl=function(value){TVNC.sendCmd("cmd=params&kbdControl="+value)};this.setRemotePointer=function(value){TVNC.sendCmd("cmd=params&remotePointer="+value)};this.setPixelFormat=function(value){TVNC.sendCmd("cmd=params&pixelFormat="+value)};this.setMonitor=function(m){if(m>=this.rcParams.monitorCount)m=0;TVNC.sendCmd("cmd=params&monitor="+
m)};this.revokeObjectURLs=function(){if(_blob.on&&!_blob.revoked){if(_blob.processedMouseUrl)for(var i=0;i<_blob.processedMouseUrl.length;i++)_urlCreator.revokeObjectURL(_blob.processedMouseUrl[i]);_blob.processedMouseUrl=null;if(_blob.processedScreenUrl)for(var d in _blob.processedScreenUrl)for(var i=0;i<_blob.processedScreenUrl[d].length;i++)_urlCreator.revokeObjectURL(_blob.processedScreenUrl[d][i]);_blob.processedScreenUrl=null;_blob.revoked=true}};this.disconnect=function(){_isDisconnecting=
true;if(!_comm.state<=Thinfinity.Communication.state.CLOSING){sessionStorage.removeItem(_preferredBrokerKey);let connected=_comm.state>=Thinfinity.Communication.state.CONNECTING;if(connected&&_displayManager)_displayManager.fireEvent("localEvent",{cmd:"disconnect"});keepHTTPAlive(false);if(!_isSessionEnded)try{let msg=productId!=="virtualui"?consts.thisSessionHasEnded:consts.applicationClosed;if(typeof TVNC.rcParams.events=="undefined"||TVNC.rcParams.events.onSessionEnd==null)$(window).trigger("sessionEnd",
msg);else TVNC.rcParams.events.onSessionEnd(msg)}catch(error){helper.console.warning("'sessionEnd' calling attached method fail. message: "+error.message,error,arguments)}if(_displayManager){_displayManager.dispose();_displayManager.preserveConfiguration=false}BTP_PS_END2=null;connection.fromReconnection=false;TVNC.closeReconnectDiv();TVNC.disposeTimeout=setTimeout(function(){if(TVNC&&TVNC.dispose)TVNC.dispose()},TVNC.disposeTimeoutValue);TVNC.removeCanvases();if(window.environment.supportsFullScreen&&
window.environment.isFullscreen)exitFullscreen();TVNC.sendCmd("cmd=disconnect");stopSyncCookies();_isSessionEnded=true;TVNC.rcParams.id=0;TVNC.sendMouseMove=function(){};clearTimeout(TVNC.emptyRecycleImgTimeout);TVNC.purgeImageQueue(TVNC.imgQueue);ID.remove();sessionStorage.removeItem("oturlDataPass");_comm.wsClose();if(_audioDriver?.dispose)_audioDriver.dispose()}};this.removeCanvases=function(){$('[id^="'+productId+'_"]').remove()};this.removeListeners=function(){$(document).unbind();$(window).unbind();
$("#"+TVNC.vncdivId).unbind()};this.dispose=function(releaseAll,status){if(productId=="virtualui"&&TVNC.vncContainer.parentElement){TVNC.vncContainer.parentElement.style.width="100%";TVNC.vncContainer.parentElement.style.height="100%"}if(Thinfinity.Popups&&Thinfinity.Popups.growl)Thinfinity.Popups.growl.unblockAll();releaseAll=releaseAll!=false?true:false;clearTimeout(TVNC.disposeTimeout);if(!TVNC.useAjax){BTP_PWS_CLS3=null;_comm.wsClose()}_comm.releaseQueue(TVNC.queueRequestName);_comm.dispose();
if(helper.object.existsPath(oLastError,"code")&&ENUM_CODES.authenticationCodeErrors.indexOf(oLastError.code.toString())!=-1)connection.state=Thinfinity.Communication.state.CLOSING;if(releaseAll)TVNC.removeListeners();try{if(typeof TVNC.rcParams.events=="undefined"||TVNC.rcParams.events.onServerDisconnect==null)$(window).trigger("serverDisconnect");else{TVNC.rcParams.events.onServerDisconnect(status);if(TVNC.events){if(TVNC.rcParams.events.splice&&TVNC.rcParams.events.length)TVNC.rcParams.events.splice(0,
TVNC.rcParams.events.length);TVNC.events=null}}}catch(error){helper.console.warning("'onServerDisconnect' calling attached method fail. message: "+error.message,error,arguments)}window.dispatchEvent(new CustomEvent("onServerDisconnect"));if(releaseAll){if(_displayManager)_displayManager.dispose();if(TVNC.clipboard)TVNC.clipboard.dispose();TVNC.removeCanvases()}if(TVNC.xmlHttpJson){TVNC.xmlHttpJson.abort();TVNC.xmlHttpJson=null}TVNC.emptyRecycleImg(true);if(releaseAll)if(!!TVNC.canvasER)TVNC.canvasER=
null;TVNC.clearImageCache();TVNC.clearTextCache();TVNC.clearFontCache();TVNC.clearOffscreenCache();if(window.environment.supportsFullScreen&&window.environment.isFullscreen)exitFullscreen();TVNC.rcParams.id=0;TVNC.sendMouseMove=function(){};if(TVNC.sound){TVNC.sound.dispose();TVNC.sound=null}TVNC.clipboard=null;clearTimeout(TVNC.emptyRecycleImgTimeout);TVNC.purgeImageQueue(TVNC.imgQueue);if(TVNC.imgQueue)TVNC.imgQueue.watchdogStop();TVNC.deferCall=function(){};TVNC.imgQueue=null;setTimeout(function(){if(Object.stopObserve)Object.stopObserve()},
5E3);TVNC.revokeObjectURLs();TVNC.imageListHelper=null;if(_componentRegistrationServices)_componentRegistrationServices.dispose()};this.usingDisplayManager=function(){return(agentInfo.gfx&&TVNC.rcParams.enableGfx||agentInfo.h264&&TVNC.rcParams.enableH264)&&_displayManager};this.reset=function(){this.rcParams.maxHeight=0;this.rcParams.maxWidth=0;if(!this.usingDisplayManager())for(var i=TVNC.vncContainer.childNodes.length-1;i>=0;i--){var canvas=TVNC.vncContainer.childNodes[i];if(canvas.tagName=="CANVAS"){canvas.style.display=
"none";var hwnd=canvas.hwnd||canvas.id.replace(productId+"_canvas_","");if(hwnd!=0)TVNC.fireCustomEvents("canvasHidden",{"hwnd":hwnd});if(canvas.mask)canvas.mask={};canvas.innerHTML="";try{TVNC.vncContainer.removeChild(canvas)}catch(err){logError("receiveScreen: "+err)}canvas=null}}TVNC.emptyRecycleImg(true);_displayManager.fireEvent("resetCursor");TVNC.clearImageCache();TVNC.clearTextCache();TVNC.clearFontCache();TVNC.clearOffscreenCache()};function exitFullscreen(){var el=document;if(window.frameElement)el=
helper.url.getTopWindow(window).document;window.environment.exitFullscreen(el)}this.setFullScreen=function(active){var el=document.documentElement;if(active)window.environment.requestFullscreen(el);else window.environment.exitFullscreen(el)};this.stop=function(){TVNC.sendCmd("cmd=stop")};this.start=function(cmdv){if(TVNC.useAjax)_isPktIdxEnabled=false;this.startCmdToSend=true;BTP_PR_STR=null;TVNC.sendStart(cmdv)};this.removeBrowserSize=function(scraperArgs){return this.removeArguments(scraperArgs,
["browserheight","browserwidth","screenheight","screenwidth"])};this.removeArguments=function(queryStr,args,ignoreCase){if(queryStr&&args&&args instanceof Array){ignoreCase=typeof ignoreCase==="undefined"?true:ignoreCase;if(ignoreCase)args=args.map(function(elem){return elem.toString().toLowerCase()});var lStr="";var rStr=queryStr;var nParams="";var idx=queryStr.indexOf("?");if(idx!=-1){lStr=queryStr.substr(0,idx);rStr=queryStr.substr(idx+1)}var fElem=true;var params=rStr.split("&");params.forEach(function(elem){var kvp=
elem.split("=");if(kvp.length>0){kvp[0]=kvp[0].toString();if(ignoreCase)kvp[0]=kvp[0].toLowerCase();if(args.indexOf(kvp[0])==-1){nParams+=(fElem?"":"&")+elem;fElem=false}}else{nParams+=(fElem?"":"&")+elem;fElem=false}});var u="";if(idx!=-1)u="?";return lStr+u+nParams}};this.sendStart=function(cmdv){if(!this.cacheLoaded)return;if(!this.startCmdToSend)return;this.startPending=false;this.rcParams.active=false;var cmd="cmd=start";if(typeof cmdv!="undefined")cmd=cmdv;if(connection.fromReconnection&&productId==
"thinrdp")cmd+="&subcmd=restart";connection.fromReconnection=false;if(this.rcParams.scraper!=null){cmd=cmd+"&scraper="+this.rcParams.scraper;if(this.rcParams.scraperArgs!=null){var scraperArgs=helper.object.getDataTypeOf(this.rcParams.scraperArgs)=="json"?helper.object.jsonToString(this.rcParams.scraperArgs,"&",false):this.rcParams.scraperArgs;if(cmdv!=undefined&&cmdv.indexOf("screenWidth")!=-1)cmd=cmd+this.removeBrowserSize(scraperArgs);else{var cmdLastChar=cmd.substr(cmd.length-1);var scrFirstChar=
scraperArgs.substr(0,1);var amp="";if(cmdLastChar!="&"&&scrFirstChar!="&")amp="&";cmd=cmd+amp+scraperArgs}}}if(!TVNC.useAjax)if(_comm.binaryType&&(!agentInfo.isFirefox||agentInfo.firefoxVersion>15)){cmd+="&imageList=binary";TVNC.imageListType=2}cmd+="&mouseControl="+this.rcParams.mouseControl+"&kbdControl="+this.rcParams.kbdControl+"&touchControl="+this.rcParams.touchControl;cmd+="&pixelFormat="+this.rcParams.pixelFormat;cmd+="&wallpaper="+this.rcParams.wallpaper;cmd+="&rleThreshold="+this.rcParams.rleThreshold;
cmd+="&useSendThread="+this.rcParams.useSendThread;cmd+="&monitor="+this.rcParams.monitor;TVNC.rcParams.clientAck=TVNC.rcParams.clientAck<=0&&!TVNC.useAjax?0:Math.max(TVNC.rcParams.clientAck,1);cmd+="&supportsWebP="+WebPImageFormat.supportsWebP();cmd+="&clientAck="+TVNC.rcParams.clientAck;if(TVNC.rcParams.screenResX>0)cmd+="&screenResX="+TVNC.rcParams.screenResX+"&screenResY="+TVNC.rcParams.screenResY;if(this.rcParams.pin)cmd+="&pin="+this.rcParams.pin;if(this.rcParams.sessionKey)cmd+="&sessionKey="+
this.rcParams.sessionKey;if(TVNC.controlFactory)cmd+="&nativeClasses="+TVNC.controlFactory.getClassList();if(TVNC.rcParams.persistentCache)cmd+="&imgCache="+getImageCacheList();var isLandscape=window.environment.currentOrientation=="landscape"?true:false;cmd+="&devicePixelRatio="+(window.environment.initialDevicePixelRatio||1)+"&isMobile="+agentInfo.isMobile+"&isLandscape="+isLandscape+"&supportsFullScreen="+window.environment.supportsFullScreen+"&webapp="+window.environment.webapp;if(TVNC.rcParams.extraData!=
null)cmd+="&extraData="+encodeURIComponent(JSON.stringify(TVNC.rcParams.extraData));allowSendingCommands=true;TVNC.sendCmd(cmd);if(TVNC.rcParams.showOnStart)TVNC.show()};this.purgeQuery=function(q){try{var pairs=q.split("&");var collection=[];var pair;var qq="";for(var p=0;p<pairs.length;p++)if(pairs[p]!=""){pair=pairs[p].split("=");if(pair.length=2)collection[pair[0]]=pair[1]}qq="";for(var c in collection)qq+=c+"="+collection[c]+"&";qq=qq.substr(0,qq.length-1);return qq}finally{collection=pairs=
pair=qq=null}};var _gettingSeverUrl=false;function addBaseUrl(baseUrl){var elem=document.getElementById("baseUrlTag");if(!elem){elem=document.createElement("base");elem.id="baseUrlTag";var head=document.querySelector("head");if(head){var fn=head.querySelector("script");if(fn)head.insertBefore(elem,fn);else head.appendChild(elem)}else helper.console.warning("Cannot insert 'script' tag, base url",arguments)}elem.href=baseUrl}function removeBaseUrl(){var elem=document.getElementById("baseUrlTag");elem.parentElement.removeChild(elem)}
function encodeResponseUrl(urlResponse){if(urlResponse){var surl=urlResponse.split("/");if(surl.length>2){urlResponse="";for(var i=0;i<Math.min(surl.length-1,2);i++)if(surl[i]!="")urlResponse+="/"+surl[i];for(var i=2;i<surl.length;i++)if(surl[i]!="")urlResponse+="/"+encodeURIComponent(surl[i]);urlResponse+="/"}}return urlResponse}function setUrls(response){var _browseUrl="__browser__";var basePath=Thinfinity.global.variables.basePath;if(TVNC.rcParams.sessionKey&&TVNC.rcParams.sessionKey!==""){var bp=
Thinfinity.global.variables.basePath.split("/").filter(function(p){return p!==""});var ru=response.url.split("/").filter(function(p){return p!==""});var i=bp.length-1;while(i>=0){if(bp[i]!==""&&ru.find(function(r){return r===bp[i]})){var f=bp[i];basePath=Thinfinity.global.variables.basePath=("/"+bp.splice(0,i).join("/")+"/").replaceAll("//","/");response.url=("/"+ru.slice(ru.indexOf(f),ru.length).join("/")+"/").replaceAll("//","/");i=-1}i--}}else if(productId==="thinvnc"){if(Thinfinity.global.variables.basePath.length>
1&&Thinfinity.global.variables.basePath!=="/"&&response.url.length>1){let bp=Thinfinity.global.variables.basePath.replaceAll("/","");if(response.url.split("/").find(p=>{return p===bp}))response.url="/"+response.url.split("/").filter(p=>{return p!=""}).splice(1).join("/")+"/"}if(Thinfinity.global.variables.gatewayPin.length>1)basePath=basePath.replace(Thinfinity.global.variables.gatewayPin,"").replaceAll("//","/")}_url.baseUrl=helper.url.parseUrl(Thinfinity.global.variables.basePath+response.url).toUrl();
_url.brokerUrl=helper.url.parseUrl(location.href).toUrl("-o-a-r");if(basePath!=="/"){if(basePath.substr(0,1)!=="/")basePath="/"+basePath;if(basePath.substr(basePath.length-1)!=="/")basePath+="/"}if(response.gateway&&response.gateway!==""){_url.httpConnection=helper.url.parseUrl(response.gateway+response.url).toUrl();_url.gatewayAccess=response.gateway;_url.wsConnection=helper.url.parseUrl(response.gateway+_browseUrl+response.url).toUrl();_url.wsConnection=_url.wsConnection.replace("http","ws");_location=
helper.url.parseUrl(response.gateway+response.url).toUrl();_url.baseUrl=_virtualPathProfile}else{if(_url.baseUrl!=="/"){if(_url.baseUrl.substr(0,1)!=="/")_url.baseUrl="/"+_url.baseUrl;if(_url.baseUrl.substr(_url.baseUrl.length-1)!=="/")_url.baseUrl+="/"}_url.httpConnection="";var sp=TVNC.rcParams.server?TVNC.rcParams.server.split("/").filter(function(p){return p!==""}):"";var bp=basePath.split("/").filter(function(p){return p!==""});var i=bp.length-1;var fIdx=-1;while(i>=0){fIdx=sp.findIndex(function(r){return r===
bp[i]});if(fIdx!=-1){TVNC.rcParams.server=sp.splice(0,fIdx).join("/");i=-1}i--}_url.wsConnection=TVNC.rcParams.server?TVNC.getProtocol().replace("http","ws")+"//"+TVNC.rcParams.server:window.location.origin.replace("http","ws");_url.wsConnection+=basePath+_browseUrl+_url.baseUrl.substr(basePath.length-1);_url.wsConnection=helper.url.parseUrl(_url.wsConnection).toUrl();addBaseUrl(_url.baseUrl);_location=TVNC.getAjaxUrl()}if(connection.fromReconnection)TVNC.fireOOBCmd("vchannel",{"msg":{"cmd":"update.gateway"}})}
this.getWsUrl=function(){var wsUrl=_url.wsConnection;if(TVNC.gatewayAccessKey!="")if(wsUrl.indexOf("/"+TVNC.gatewayAccessKey)<0)wsUrl+="/"+TVNC.gatewayAccessKey;return wsUrl+TVNC.rcParams.id+"?_gwsid="+Thinfinity.global.variables.gwsid};this.connect=function(userid,password){if(_isDisconnecting)return;if(!_fromBroker){TVNC.rcParams.id=null;ID.remove()}else if(TVNC.rcParams.id===null)TVNC.rcParams.id=ID.get();helper.ajax.addHeaderValue("X-Thinfinity-GWSID",Thinfinity.global.variables.gwsid);BTP_REM_CO=
null;keepHTTPAlive(true);if(_fromBroker){BTP_PCG_STR=null;if(!_gettingSeverUrl){TVNC.gatewayAccessKey="";_gettingSeverUrl=true;if(_virtualPathProfile==""){_virtualPathProfile=TVNC.rcParams.url?TVNC.rcParams.url:helper.url.parseUrl(window.location.href).toUrl("-o-a");if(_virtualPathProfile[_virtualPathProfile.length-1]!="/")_virtualPathProfile+="/"}connection.reconnectingCount=0;if(connection.firstConnection)updateConnectionStatus({action:1,description:consts.establishingConn});TVNC.getServerUrl(function(response){if(response)if(response.url){helper.console.log(helper.string.format("getServerUrl response. Redirect --\x3e URL:{0} ",
response.url),arguments);TVNC.gatewayAccessKey="";sessionStorage.setItem(_preferredBrokerKey,response.brokerid||"");setUrls(response);BTP_PCG_END=null;postConnect(userid,password);_gettingSeverUrl=false}else{_gettingSeverUrl=false;var errStr="";if(response.state===STATE_ERROR)errStr=response.description!=""?response.description:response.errstr!=""?response.errstr:consts.unknownError;else if(response.errno>=400)errStr=response.errno==404?consts.sessionError404:helper.string.format(consts.clientErrorNum,
response.errno);if(errStr){if(connection.fromReconnection)TVNC.closeReconnectDiv();var responseStr=response.description+(errStr&&errStr!==response.description?" "+errStr:"");var res=false;var status={"state":response.state,"description":response.description,"errstr":errStr,"errno":response.errno};if(_fromBroker&&response.errno===404&&_isTemporalConnection===true){helper.console.warning(helper.string.format("getServerUrl - status: {0}",responseStr),arguments);status.description=consts.brokerDown;status.temp=
true;status.brokerDown=true;status.originalEvent=true;try{if(helper.object.existsPath(TVNC,"rcParams.events.onBrokerError"))res=TVNC.rcParams.events.onBrokerError(status);else $(window).trigger("onBrokerError",status)}catch(error){helper.console.warning("'onBrokerError' calling attached method fail. message: "+error.message,error,arguments)}}if(!res)if(response.license){if(TVNC.connected)TVNC.disconnect();let licenseError={title:consts.licenseError,errorType:_licenseTypes.ERR_TYPE_ERROR,errorCode:response.state,
errorMsg:response.description};if(typeof TVNC.rcParams.events=="undefined"||TVNC.rcParams.events.onLicenseMsg==null)$(window).trigger("licenseMsg",licenseError);else TVNC.rcParams.events.onLicenseMsg(licenseError)}else{try{let oError={message:responseStr};if(typeof TVNC.rcParams.events=="undefined"||TVNC.rcParams.events.onServerError==null)$(window).trigger("serverError",oError);else TVNC.rcParams.events.onServerError(oError);helper.console.log("'serverError' disconnecting. "+responseStr,arguments)}catch(error){helper.console.warning("'serverError' disconnecting. message: "+
error.message,error,arguments)}TVNC.disconnect()}else helper.console.log("The error was handled by the user",arguments)}}else{_gettingSeverUrl=false;setTimeout(function(){BTP_PCG_ERR=null;TVNC.connect(userid,password)},200)}})}}else{var response={"url":_url.baseUrl!=="/"?_url.baseUrl:""};setUrls(response);updateConnectionStatus({"action":1,"description":productId=="virtualui"?null:consts.establishingConn});_virtualPathProfile="";postConnect(userid,password)}};function supportCur(){return!(agentInfo.isSafari||
agentInfo.isMobile&&agentInfo.isIOS||agentInfo.isMSIE&&agentInfo.msieVersion<=11&&agentInfo.msieOSVersion<=7)}function keepHTTPAlive(status){_comm.disposePing("HTTP.ALIVE");if(status){let url=helper.url.parseUrl(location.href).toUrl("-a-r")+(productId==="thinrdp"?TVNC.apiUrl+"auth/":"")+"ping?id="+TVNC.rcParams.id;_comm.createPing("HTTP.ALIVE",TVNC.completeAjaxParams({"url":url,"cache":false,"timeout":3E3,"error":function(){helper.console.warning("Cannot keep http alive, failed. ",arguments)},"success":function(){helper.console.log("Http alive, response",
arguments)},"intervalTime":6E4}))}}this.checkSizeAndResolution=function(callback){clearTimeout(_checkSizeAndResolutionTimeoutId);if(TVNC.rcParams.resolution=="fittobrowser")if(window.environment.detectedWidth==0||window.environment.detectedHeight==0)_checkSizeAndResolutionTimeoutId=setTimeout(TVNC.checkSizeAndResolution,250,callback);else callback();else callback()};function fireCustomEvent(eventName,response,jqXHR,err){try{if(helper.object.existsPath(TVNC.rcParams,helper.string.format("events.{0}",
eventName)))TVNC.rcParams.events[eventName](response,err);else{eventName=eventName.replace("on");eventName=eventName[0].toLowerCase()+s.substring(1);$(window).trigger(eventName,jqXHR,err)}}catch(error){helper.console.warning(helper.string.format("'{0}' calling attached method fail. message: {1}",eventName,error.message),error,arguments)}}function getDisplaysInfo(){let w=environment.availWidth;let h=environment.availHeight;let t=0;let displays=[{id:0,width:w,height:h,surface:{top:t,left:0},physicalWidth:w,
physicalHeight:h,orientation:environment.currentOrientation,desktopScaleFactor:1,deviceScaleFactor:1,mainDisplay:true,name:""}];return displays}function sendDisplaysInfo(displays){if(TVNC.rcParams.mode!==_eMode.SKEY){displays=getPurgedDisplayManagerInfo(displays);helper.console.log(`Sending browser displays info: ${JSON.stringify(displays)}`,arguments);let checkPending=function(){if(!_pendingDisplayResize){_pendingDisplayResize=displays;_pendingsCommandsCallback.push(function(){sendDisplaysInfo(_pendingDisplayResize);
_pendingDisplayResize=null})}else _pendingDisplayResize=displays};if(_comm)if(_comm.state===Thinfinity.Communication.state.CONNECTED){helper.console.log(`cmd=brwrRsze: ${JSON.stringify(displays)}`,arguments);TVNC.sendEvent("cmd=brwrRsze&ms="+encodeURIComponent(JSON.stringify(displays))+"&id="+TVNC.rcParams.id)}else{if(_comm.state<Thinfinity.Communication.state.CLOSING)checkPending()}else checkPending()}}function checkServerControlMouse(){TVNC.rcParams.overrideCursor=false;if(TVNC.rcParams.serverControlMouse)_allowMouseCapture=
false;else _allowMouseCapture=true}async function initializeDisplayManager(){if(_displayManager){helper.console.log(`Re-use device displays`,arguments);return true}else{var _prevResize=null;if(!!TVNC.rcParams.playsession){TVNC.rcParams.overrideCursor=false;TVNC.rcParams.allowMouseCapture=false;TVNC.rcParams.serverControlMouse=true}_oInterface=(new Thinfinity.Object.Interface({defaultEventFire:{async:0}})).new(new Thinfinity.Object.IConfig({namespace:true,options:[Thinfinity.Object.IConfig.OPTIONS.DO_NOT_FULL_EXTEND_OBJECT],
object:TVNC,properties:[{source:"rcParams.active",ro:true},{source:"rcParams.mouseControl",ro:true},{source:"mouseBuffer.isAvailable",alias:"mouseBufferAvailable",ro:true},{source:"rcParams.hookMouse",ro:true},{source:"rcParams.mousePressAsRightButton",ro:true},{source:"rcParams.cursorVisible",ro:true},{source:"rcParams.remotePointer",ro:true},{source:"rcParams.viewLeft",ro:true},{source:"rcParams.viewTop",ro:true},{source:"rcParams.enableH264",ro:true},{source:"rcParams.enableGfx",ro:true},{source:"rcParams.hookKeyboard",
ro:true},{source:"rcParams.kbdUnicode",ro:true},{source:"rcParams.kbdLogKeys",ro:true},{source:"onlyKeyCode",ro:true,get:function(){return _onlyKeyCode}},{source:"rcParams.isCrossDomain",ro:true},{source:"allowOverrideCursor",ro:true,get:function(){return allowOverrideCursor}},{source:"allowMouseCapture",ro:true},{source:"rcParams.overrideCursor",ro:false},{source:"centered",ro:true},{source:"rcParams.centeredMode",ro:true},{source:"border",ro:true,get:function(){return{left:TVNC.rcParams.borderLeft,
top:TVNC.rcParams.borderTop,right:TVNC.rcParams.borderRight,bottom:TVNC.rcParams.borderBottom}}},{source:"rcParams.playsession",ro:true},{source:"isServerControlMouse",ro:true,get:function(){return!!TVNC.rcParams.playsession||TVNC.rcParams.serverControlMouse}},{source:"rcParams.id",ro:true,alias:"sid"},{source:getClipboardInterface().iObject,ro:true,alias:"clipboard"},{source:"canPasteFiles",ro:true,get:function(){return productId=="thinrdp"}},{source:"rdpMode",ro:true},{source:"productId",ro:true,
get:function(){return window.productId}},{source:"rcParams.fitmode",ro:true},{source:"rcParams.fitToBrowser",ro:true},{source:"rcParams.rfxEnabled",ro:true},{source:"rcParams.overflow",ro:true},{source:"maxSize",ro:true,get:function(){return{width:TVNC.rcParams.maxWidth,height:TVNC.rcParams.maxHeight}}},{source:"serverDPR",ro:true,get:function(){return serverDPR}},{source:"CUEnabled",ro:true,get:function(){return _CUEnabled}},{source:"rcParams.quality",ro:true},{source:"rcParams.pixelFormat"},"baseZIndex",
{source:"cursorCanvasX",get:function(){if(TVNC.cursorCanvas){var position=TVNC.findPos(TVNC.vncContainer);let l=0;try{l=parseInt(TVNC.cursorCanvas.style.left.replace("px",""),10)}catch(err){l=TVNC.cursorCanvas.offsetLeft}return l*_displayManager.processDisplayCmd("GET_SCALE")+position[0]}else return TVNC.mouseX},ro:true},{source:"cursorCanvasY",get:function(){if(TVNC.cursorCanvas){var position=TVNC.findPos(TVNC.vncContainer);let t=0;try{t=parseInt(TVNC.cursorCanvas.style.top.replace("px",""),10)}catch(err){t=
TVNC.cursorCanvas.offsetTop}return t*_displayManager.processDisplayCmd("GET_SCALE")+position[1]}else return TVNC.mouseY},ro:true},{source:"pictureType",get:function(){return _ePictureType}},{source:"rcParams.shadowed",ro:true},{source:"rcParams.mouseWheelDirection",ro:true},{source:"rcParams.maxWidth",ro:true},{source:"rcParams.maxHeight",ro:true},{source:"rcParams.mouseX",ro:false},{source:"rcParams.mouseY",ro:false},{source:"rcParams.viewWidth"},{source:"rcParams.viewHeight"},{source:"rcParams.mouseMoved",
ro:false},{source:"caret",ro:true},{source:"rcParams.multiRowMinSize",ro:true},{source:"rcParams.caretX",ro:false},{source:"rcParams.caretY",ro:false},{source:"rcParams.relativeTouch",ro:true},{source:"rcParams.scaled",ro:true},{source:"rcParams.resizeDesktop",ro:true},{source:"rcParams.resolution",ro:true},{source:"rcParams.isShadowSession",ro:true},{source:"availableAudio",get:function(){return _audioDriver?.available??false}},{source:"mobileKeyboardEnumKeys",ro:true,get:()=>Thinfinity?.Driver?.MobileKeyboard?.enumKeys}],
methods:[{alias:"sendKey",value:TVNC.sendKey},{alias:"sendText",value:TVNC.sendText},{alias:"sendCmd",value:TVNC.sendCmd},{alias:"sendFocus",value:sendTabFocusCmd},{alias:"sendWheel",value:TVNC.sendWheel},{alias:"inputAllowed",value:TVNC.inputAllowed},{alias:"sendEvent",value:TVNC.sendEvent},{alias:"sendMouse",value:function mouseEvent(x,y,button,action){if(TVNC.mouseX!=x||TVNC.mouseY!=y)TVNC.mouseMoved=true;TVNC.mouseX=x;TVNC.mouseY=y;if(action!=="move")TVNC.sendMouse(x,y,button,action)}},{alias:"registerCanvas",
value:addValidCanvas},{alias:"fireEvent",value:function(event,data){if(typeof TVNC.rcParams.events=="undefined"||TVNC.rcParams.events[event]==null)$(window).trigger(event,[data]);else TVNC.rcParams.events[event]([data])}},{alias:"updateCanvasSize",value:TVNC.updateCanvasSize},{alias:"removeDevice",value:function(id){_displayManager.removeDevice(id)}},{alias:"zoom",value:value=>{_displayManager.fireEvent("zoom",value)}},{alias:"sendWheel",value:TVNC.sendWheel},{alias:"forceMouseMove",value:()=>{TVNC.mouseMoved=
true;TVNC.sendMouseMove();TVNC.mouseMoved=false}},{alias:"pressAndRelease",value:(x,y)=>{TVNC.sendMouse(x,y,2,"down");TVNC.sendMouse(x,y,2,"up");_displayManager.fireEvent("pressAndRelease",x,y)}}],events:{resize:function(displays){if(_prevResize!==displays)sendDisplaysInfo(displays);_prevResize=displays},disconnect:function(){Thinfinity.Popups.unblock();TVNC.disconnect()}}}));TVNC=_oInterface.original;if(productId==="thinvnc"){_oInterface.new.on("rcParams.serverControlMouse",checkServerControlMouse);
checkServerControlMouse()}let username="";let isSessionKey=TVNC.rcParams.mode===_eMode.SKEY;if(isSessionKey){TVNC.rcParams.enableH264=Thinfinity.global.variables.H264Enabled=="true";TVNC.rcParams.enableGfx=Thinfinity.global.variables.GfxEnabled=="true"&&!TVNC.rcParams.enableH264}let displayConfig=isSessionKey?{db:false,shadowingSession:true}:{username:username,model:TVNC.rcParams.profileKey};displayConfig.methods={sendCmd:TVNC.sendCmd};displayConfig.canBeOverridden=TVNC.rcParams?.multiMonitor?.canBeOverridden||
false;displayConfig.count=TVNC.rcParams?.multiMonitor?.count||1;_displayManager=new Thinfinity.Display.Manager(displayConfig,_oInterface.new);if(TVNC.rcParams.enableH264)_displayManager.limits={min:{width:800,height:600}};Object.defineProperty(TVNC,"zoomFactor",{enumerable:true,configurable:false,get:function(){return _displayManager.processDisplayCmd("GET_ZOOM_FACTOR")},set:function(value){return _displayManager.processDisplayCmd("SET_ZOOM_FACTOR",value)}});delete TVNC.getZoom;Object.defineProperty(TVNC,
"getZoom",{enumerable:true,configurable:false,writable:false,value:function(){return _displayManager.processDisplayCmd("GET_ZOOM_FACTOR")}});Object.defineProperty(TVNC,"zoomDesktop",{enumerable:true,configurable:false,writable:false,value:function(value){return _displayManager.processDisplayCmd("ZOOM_DESKTOP",value)}});Object.defineProperty(TVNC,"cursorCanvas",{enumerable:true,configurable:false,get:function(value){return _displayManager.processDisplayCmd("CURSOR_CANVAS")}});Object.defineProperty(TVNC,
"getMinZoomFactor",{enumerable:true,configurable:false,writable:false,value:function(){return _displayManager.processDisplayCmd("GET_MIN_ZOOM_FACTOR")}});Object.defineProperty(TVNC,"center",{enumerable:true,configurable:false,writable:false,value:function(){return _displayManager.processDisplayCmd("CENTER")}});Object.defineProperty(TVNC,"scale",{enumerable:true,configurable:false,get:function(){return _displayManager.processDisplayCmd("GET_SCALE")}});Object.defineProperty(TVNC,"getScale",{enumerable:true,
configurable:false,writable:false,value:function(){return _displayManager.processDisplayCmd("GET_SCALE")}});Object.defineProperty(TVNC,"zoomFactorReset",{enumerable:true,configurable:false,writable:false,value:function(){return _displayManager.processDisplayCmd("ZOOM_FACTOR_RESET")}});await _displayManager.sync();var createDisplayDevice=function(config){let mon={resolution:Thinfinity.Display.Device.RESOLUTION.FIT_TO_BROWSER,orientation:environment.currentOrientation,desktopScaleFactor:1,deviceScaleFactor:1,
mainDisplay:false,external:true,height:environment.availHeight,width:environment.availWidth,surface:{left:0,top:0},window:null};helper.object.parseAttributes(mon,config);return new Thinfinity.Display.Device(mon)};triggerCustomEvent("display.manager.ready");let displays=null;let restoreData=null;if(!isSessionKey){if(agentInfo.h264&&TVNC.rcParams.enableH264&&_displayManager)displays=_displayManager.getStoredConfiguration();helper.console.log(`recovering stored data: ${displays?JSON.stringify(displays):
"is empty"}`);if(!displays)restoreData=triggerCustomEvent("display.manager.restore.display.info")}else{TVNC.registerOOBCmd("monitorDefs",function(data){if(data?.monitorDefs?.items)_displayManager.syncDisplayInfo(data.monitorDefs.items)});_displayManager.on("syncCompleted",function(){setTimeout(function(){TVNC.refresh()},5E3)})}_displayManager.on("createCanvas",TVNC.createCanvas);if(!displays)displays=getDisplaysInfo();if(restoreData){helper.console.log(`getting displays from profile`);return await restoreData()}else{helper.console.log(`creating monitors...`);
let m=displays.find(function(d){return d.mainDisplay});m.parentElement=document.getElementById("deskdiv");if(displays){var proms=[];displays.forEach(async function(d){proms.push(_displayManager.addDevice(createDisplayDevice(d)))});let values=await Promise.all(proms);let any=false;var blockedMsg=null;values.forEach(function(res){if(res&&res.code!==Thinfinity.Display.Manager.RESPONSE_CODES.SUCCESS){if(res.code===Thinfinity.Display.Manager.RESPONSE_CODES.POPUP_BLOCKED)blockedMsg=res.message;helper.console.warning(`Something went wrong. ${res.message}`,
arguments)}else any=true});if(blockedMsg)values=await _displayManager.restoreDevices();return any}else throw new Error(`Cannot access to screens details.`);}}}function getPurgedDisplayManagerInfo(displays){if(!displays)displays=_displayManager.getDisplaysInfo();if(displays)displays.forEach(function(m){delete m.window;delete m.resolution;delete m.name;m.width=m.display.width;m.height=m.display.height;delete m.display;delete m.screen;if(m.surface){m.left=m.surface.left;m.top=m.surface.top}delete m.surface});
return displays}function postConnect(userid,password){BTP_PCS_STR=null;if(_isDisconnecting)return;TVNC.checkSizeAndResolution(function(){BTP_PCS_END=null;if([Thinfinity.Communication.state.READY,Thinfinity.Communication.state.SERVERCONNECTED,Thinfinity.Communication.state.RECONNECTING,Thinfinity.Communication.state.UNSTABLE,Thinfinity.Communication.state.LOST].indexOf(_comm.state)!=-1){TVNC.cacheLoaded=false;TVNC.startCmdToSend=false;if(TVNC.rcParams.profileKey)TVNC.initfs(TVNC.rcParams.profileKey);
else{var dbname=TVNC.rcParams.address||"";if(dbname==""||productId.toLowerCase()=="webfmx"||productId.toLowerCase()=="virtualui")TVNC.initfs(productId+"_dev");else{dbname=dbname.replace(".","_").replace(":","_");TVNC.initfs(dbname)}}try{if(typeof TVNC.rcParams.events=="undefined"||TVNC.rcParams.events.onServerAuthenticationRequired==null)$(window).trigger("serverAuthenticationRequired");else TVNC.rcParams.events.onServerAuthenticationRequired()}catch(error){helper.console.warning("'onServerAuthenticationRequired' calling attached method fail. message: "+
error.message,error,arguments)}if(typeof userid=="undefined"&&TVNC.rcParams.userid!=null)userid=TVNC.rcParams.userid;if(typeof password=="undefined"&&TVNC.rcParams.password!=null)password=TVNC.rcParams.password;var cmd="cmd";var jsonQuery={};jsonQuery.cmd="connect";if(typeof userid!="undefined"){jsonQuery.userid=escape(userid);TVNC.userid=userid;if(typeof password!="undefined"){jsonQuery.password=escape(password);TVNC.password=password}}jsonQuery.tabid=_getServerUrl.id;jsonQuery.wscompression=TVNC.rcParams.wscompression;
if(TVNC.rcParams.ticket!="")jsonQuery.ticket=TVNC.rcParams.ticket;if(TVNC.rcParams.pin!="")jsonQuery.pin=TVNC.rcParams.pin;if(TVNC.rcParams.sessionKey!="")jsonQuery.sessionKey=TVNC.rcParams.sessionKey;if(TVNC.rcParams.externalId!="")jsonQuery.externalId=TVNC.rcParams.externalId;jsonQuery.destAddr=TVNC.rcParams.address;if(TVNC.rcParams.scraper!=null){jsonQuery.scraper=TVNC.rcParams.scraper;if(TVNC.rcParams.scraperArgs!=null)if(helper.object.getDataTypeOf(TVNC.rcParams.scraperArgs)=="json")helper.object.merge(TVNC.rcParams.scraperArgs,
jsonQuery,true);else TVNC.rcParams.scraperArgs.split("&").forEach(function(kvp){kvp=kvp.split("=");jsonQuery[kvp[0]]=kvp[1]})}jsonQuery.screenWidth=window.screen?.width||window.environment.rawWidth;jsonQuery.screenHeight=window.screen?.height||window.environment.rawHeight;if(typeof window.orientation=="undefined")window.orientation=90;jsonQuery.orientation=window.orientation;if(typeof TVNC.rcParams.lfn!="undefined"&&TVNC.rcParams.lfn!=null&&TVNC.rcParams.lfn!="")jsonQuery.lfn=TVNC.rcParams.lfn;if(TVNC.rcParams.resolution!=
"fixed"){var bw=window.environment.detectedWidth;var bh=window.environment.detectedHeight;if(helper.object.existsPath(self,"clientSettings.UseViewportSize")&&self.clientSettings.UseViewportSize){bw=window.environment.viewportWidth;bh=window.environment.viewportHeight}jsonQuery.browserWidth=bw;jsonQuery.browserHeight=bh}jsonQuery.ogg=true;jsonQuery.supportCur=supportCur();jsonQuery.gfx=agentInfo.gfx;jsonQuery.h264=agentInfo.h264;var callConnect=function(){if(_displayManager){jsonQuery.decoderType=
0;jsonQuery.buffersize=agentInfo.isMobile?22:100;let di=JSON.stringify(getPurgedDisplayManagerInfo());helper.console.log(`Sending monitors info: ${di}`,arguments);jsonQuery.monitors=di}var oturlpass=sessionStorage.getItem("oturlDataPass");if(oturlpass)jsonQuery.oturlpass=oturlpass;var url=_url.httpConnection+cmd+"?cmd=connect";if(TVNC.rcParams.id!=null)url+="&id="+TVNC.rcParams.id;if(TVNC.rcParams.sessionKey)url+="&sessionkey="+TVNC.rcParams.sessionKey;jsonQuery.id=TVNC.rcParams.id;var isLandscape=
window.environment.currentOrientation=="landscape"?true:false;jsonQuery.devicePixelRatio=window.environment.initialDevicePixelRatio||1;jsonQuery.isMobile=agentInfo.isMobile;jsonQuery.isLandscape=isLandscape;jsonQuery.supportsFullScreen=window.environment.supportsFullScreen;jsonQuery.webapp=window.environment.webapp;if(Thinfinity.VirtualChannels&&Thinfinity.VirtualChannels.localServer){jsonQuery.localServer=true;jsonQuery.channelList=Thinfinity.VirtualChannels.getRegisteredNodes(Thinfinity.VirtualChannels.ChannelOrigin.CLIENT).join(",")}var params=
{url:TVNC.getCrossDomainUrl(TVNC.addExtraParams(url)),dataType:helper.ajax.responseType.JSON,data:JSON.stringify(jsonQuery),timeout:7E4,withCredentials:true,error:function(err,status,jqXHR){_comm.serverConnected=false;var XHRstatus=jqXHR.status;BTP_PCR_ERR3=null;var strMsg=helper.string.sprintf(consts.connAttemptFailed,"\nHTTP status code "+jqXHR.status+" "+jqXHR.statusText);if(XHRstatus>=400)helper.console.warning(`${strMsg} - ${jqXHR.responseType==="json"?jqXHR.statusText:jqXHR.responseText}`);
else if(XHRstatus===0){strMsg=consts.urlCantReached+" "+consts.tryingAgain;updateConnectionStatus({"description":strMsg,"errstr":strMsg});window.setTimeout(function(){if(_comm.state<=Thinfinity.Communication.state.CLOSING&&!_isDisconnecting)TVNC.connect()},_restartConnectTimeout);return}else connection.first404IncomingTime=null;TVNC.xmlHttpJson=null;if(_comm.state<=Thinfinity.Communication.state.LOST&&(_fromBroker||XHRstatus==404)){BTP_PCR_RTY=null;helper.console.log("Connect was fail, trying to connect again. ");
window.setTimeout(function(){TVNC.connect()},_restartConnectTimeout)}else{TVNC.closeReconnectDiv();fireCustomEvent("onServerConnectionError",strMsg,jqXHR,err)}},success:function(data,status,jqXHR){if((jqXHR.getResponseHeader("content-type")||"").indexOf("text/html")!=-1){BTP_PCR_ERR4=null;reloadWnd();return}connection.first404IncomingTime=null;TVNC.xmlHttpJson=null;TVNC.onConnectResult(data)}};BTP_PCR_STR=null;serverCmdResultOrientation=null;TVNC.xmlHttpJson=_comm.post(TVNC.completeAjaxParams(params));
if(_comm.state===Thinfinity.Communication.state.RECONNECTING)fireCustomEvent("onServerConnecting",{"reconnecting":Thinfinity.Communication.state.getKey(_comm.state).toString()})};initializeDisplayManager().then(function(res){if(res)callConnect();else{let msg=consts.displayCannotBeInitialized;helper.console.warning(msg,arguments);msg+=`</br><button id="btnClose" onclick="window.location.href= "/";let btn = document.getElementById('btnClose'); btn.parentElement.removeChild(btn);">Close this window</button>`;
document.body.innerText="";helper.dom.appendJsonElement({"parentElement":document.body,"type":"div","attributes":{"class":"bye"},"content":msg});setTimeout(function(){window.location.href="/"},15E3)}}).catch(function(err){helper.console.warning(`${consts.displayManagerError} - ${err.message||err} - ${err.stack||""}`,arguments)})}else{var msg=helper.string.sprintf(consts.connAttemptFailed,"");fireCustomEvent("onServerConnectionError",msg);helper.console.warning(helper.string.format(msg+" - state: {0}",
Thinfinity.Communication.state.getKey(_comm.state).toString()),arguments)}})}function updateConnectionStatus(status){helper.console.log(JSON.stringify(status),arguments);status.reconnecting=connection.fromReconnection;try{if(status.errno===undefined)if(helper.object.existsPath(TVNC,"rcParams.events.onServerConnecting"))TVNC.rcParams.events.onServerConnecting(status);else $(window).trigger("serverConnecting");else if(helper.object.existsPath(TVNC,"rcParams.events.onServerConnectionError"))TVNC.rcParams.events.onServerConnectionError(status.errstr);
else $(window).trigger("serverConnectionError")}catch(error){helper.console.warning("'onServerConnecting' calling attached method fail. message: "+error.message,error,arguments)}}this.addExtraParams=function(url){return url};function reloadWnd(){$(window).off("onbeforeunload");_comm.dispose();window.onbeforeunload=e=>{return};setTimeout(function(){window.location.reload()},1E3)}this.getServerUrl=function(callback){if(callback&&_comm.state<=Thinfinity.Communication.state.CLOSING){if(_getServerUrl.forceNewRedirection)_getServerUrl.forceNewRedirectionUsed=
true;var gsUrl=TVNC.addExtraParams(_virtualPathProfile+"getServerUrl?id=")+_getServerUrl.id+(_getServerUrl.forceNewRedirection?"&forceNewRedirection=true":"");gsUrl+="&preferredBrokerId="+(sessionStorage.getItem(_preferredBrokerKey)||"");helper.console.log(helper.string.format("get server url {0}",gsUrl),arguments);let callTimeout=true;_comm.send({url:gsUrl,async:true,dataType:"json",timeout:3E4,success:function(obj){if(_comm.state<=Thinfinity.Communication.state.CLOSING)try{if(!obj)obj={"state":STATE_PENDING};
var er=false;var status={"state":obj.state,"description":consts.resolving};_getServerUrl.timeout=_getServerUrl.normal_timeout;if(obj.state==STATE_PENDING&&obj.vmcode&&obj.vmtext){_getServerUrl.timeout=_getServerUrl.vm_timeout;status.description=obj.vmtext}else if(obj.state==STATE_BUSY)status.description=consts.waitingForResources;else{if(obj.rdpInfo)switch(obj.rdpInfo.action){case RDP_NO_INFO:break;case RDP_LOGIN_START:status.description=consts.initializingSession;break;case RDP_LOGIN_END:status.description=
consts.sessionInitialized;break;case RDP_LOGIN_INFO:status.description=obj.rdpInfo.errstr;break;case RDP_LOGIN_ERROR:{status.description=consts.sessionInitializationError;status.errno=obj.rdpInfo.errno;status.errstr=obj.rdpInfo.errstr;er=true}}if(obj.redirect){_getServerUrl.forceNewRedirection=false;status.description=consts.connecting;updateConnectionStatus(status);callback({"url":obj.url,"gateway":obj.gateway,"brokerid":obj.brokerid||""});return}}if(!er&&obj.errmsg!=""&&obj.state==STATE_ERROR){status.description=
status.errstr=obj.errmsg;status.errno=obj.state;helper.console.warning(helper.string.format("Cannot connect - error: {0} - state: {1} - reload: {2}",status.description,obj.state,obj.refresh==undefined?"''":obj.refresh),arguments);if(obj.refresh){reloadWnd();return}}if(_comm.state!==Thinfinity.Communication.state.RECONNECTING)updateConnectionStatus(status);callback(status);if(obj.state!=STATE_ERROR)setTimeout(function(){TVNC.getServerUrl(callback)},_getServerUrl.timeout)}catch(e){status={"action":4,
"description":e.message};if(_comm.state!==Thinfinity.Communication.state.RECONNECTING)updateConnectionStatus(status);callback(status)}else callback({"description":consts.connectionNotStablished,"errno":Thinfinity.Communication.errorCode.NO_CONTENT,"errstr":consts.connectionNotStablished})},error:function(response,status,xhr){var XHRStatus=status??xhr.status;var status={"state":STATE_ERROR,"errno":XHRStatus,"description":"","errstr":""};var errstr=xhr.statusText&&xhr.statusText!=""?" ("+xhr.statusText+
")":"EMPTY";helper.console.log(helper.string.format("Error --\x3e getServerUrl - status: {0}",errstr),arguments);_gettingSeverUrl=false;if(_xhrStatusExitCodes.indexOf(XHRStatus)!=-1){switch(XHRStatus){case Thinfinity.Communication.errorCode.UNAUTHORIZED:status.errstr=consts.unknownUser;reloadWnd();break;default:status.description=consts.sessionInitializationError;status.errstr=errstr!=""?errstr:status.description;break}if(_comm.state!=Thinfinity.Communication.state.RECONNECTING)updateConnectionStatus(status);
callback(status);return}else switch(XHRStatus){case Thinfinity.Communication.errorCode.NOT_FOUND:if(TVNC.observable.isOTURLSession)if(_getServerUrl.retriesCount<_getServerUrl.oturlMaxRetries)_getServerUrl.retriesCount++;else{_getServerUrl.forceNewRedirection=false;TVNC.rcParams.events.onServerConnectionError(consts.invalidTicket);return}else{if(connection.reconnectingCount>connection.reconnectingMax){callTimeout=false;let recallGetServerUrl=function(){connection.reconnectingCount=0;TVNC.getServerUrl(callback)};
fetch(_url.baseUrl).then(res=>{if(res.status===200&&res.url.indexOf("/?signin")!==-1)reloadWnd();else setTimeout(recallGetServerUrl,2E3)}).catch(err=>{setTimeout(recallGetServerUrl,2E3)})}connection.reconnectingCount+=1}break}if(callTimeout)setTimeout(function(){TVNC.getServerUrl(callback)},2E3)}});_getServerUrl.forceNewRedirection=false}};this.ping=function(url,error,success,fnconnect){if(url.lastIndexOf("/")!=url.length-1)url+="/";url+="ping?xxx";_comm.send(TVNC.completeAjaxParams({url:TVNC.addExtraParams(url),
dataType:_defaultResponseType,async:false,cache:false,timeout:1E3,error:function(){if(helper.object.validate(error))error()},success:function(){var pathArray=url.split("/");TVNC.rcParams.protocol=pathArray[0];TVNC.rcParams.server=pathArray[2];if(helper.object.validate(success))success();fnconnect()}}))};this.onConnectResult=function(data){TVNC.xmlHttpJson=null;TVNC.connecting=false;TVNC.allowMouse=true;TVNC.closeReconnectDiv();let tryToConnectAgain=()=>{_connectResult.count++;if(_connectResult.count<
_connectResult.max)TVNC.reconnect();else try{let msg=consts.sessionInitializationError;if(typeof TVNC.rcParams.events=="undefined"||TVNC.rcParams.events.onServerConnectionError==null)$(window).trigger("serverConnectionError",msg);else TVNC.rcParams.events.onServerConnectionError(msg);helper.console.warning(`connect result data is empty or null`);TVNC.disconnect();TVNC.dispose()}catch(error){helper.console.error("'onServerConnectionError' calling attached method fail.",error,arguments)}};if(data!=
""&&data)try{_comm.serverConnected=true;var doConnect=function(){if(!obj.id){let err=new Error(`Session ID is not valid: ${obj.id}`);helper.console.error(err.message,err,arguments)}if(obj.id&&TVNC.rcParams.id!=obj.id){ID.set(obj.id);TVNC.rcParams.id=obj.id;TVNC.removeCanvases();if(_fromBroker)keepHTTPAlive(true)}initializeImageQueue(obj.id);let objInstace=obj;let continueConnectResult=function(){obj=objInstace;if((connection.firstConnection||TVNC.wsEnabled)&&!TVNC.rcParams.forceAjax&&("WebSocket"in
window||"MozWebSocket"in window)){TVNC.connectWebSocket(false);if(obj.wolEnabled===true)_comm.wsWOL(true)}else{BTP_PA_STR=null;_comm.setChunkHandlers({"url":TVNC.addExtraParams("json?id="+TVNC.rcParams.id),"id":TVNC.rcParams.id,"success":ajaxSuccessHandler,"error":ajaxErrorHandler});_comm.start();TVNC.start()}connection.firstConnection=false;try{if(typeof TVNC.rcParams.events=="undefined"||TVNC.rcParams.events.onServerConnect==null)$(window).trigger("serverConnect",obj);else TVNC.rcParams.events.onServerConnect(obj)}catch(error){helper.console.warning("'onServerConnect' calling attached method fail. message: "+
error.message,error,arguments)}};if(TVNC.rcParams.mode===_eMode.SKEY&&_displayManager&&obj?.monitorDefs?.items)if(TVNC.rcParams.events?.onDisplayInteractionRequired)TVNC.rcParams.events.onDisplayInteractionRequired(obj,continueConnectResult);else continueConnectResult();else continueConnectResult()};var redirecting=false;var obj=TVNC.crossDomain()?data:typeof data!="object"?JSON.parse(data):data;BTP_PCR_END1=null;if(obj.status&&typeof obj.status!="undefined"){if(obj.connectUrl){redirecting=true;TVNC.ping(obj.connectUrl,
function(e){if(obj.connectUrl2)TVNC.ping(obj.connectUrl2,function(e){if(obj.connectPin)_url.baseUrl="/"+obj.connectPin;else try{if(typeof TVNC.rcParams.events=="undefined"||TVNC.rcParams.events.onServerRedirect==null)$(window).trigger("serverRedirect",[obj.connectUrl,obj]);else TVNC.rcParams.events.onServerRedirect(obj.connectUrl,obj)}catch(error){helper.console.warning("1 - 'onServerRedirect' calling attached method fail. message: "+error.message,error,arguments)}doConnect()},function(e){if(obj.connectPin)_url.baseUrl=
"/"+obj.connectPin;else try{if(typeof TVNC.rcParams.events=="undefined"||TVNC.rcParams.events.onServerRedirect==null)$(window).trigger("serverRedirect",[obj.connectUrl2,obj]);else TVNC.rcParams.events.onServerRedirect(obj.connectUrl2,obj)}catch(error){helper.console.warning("2 - 'onServerRedirect' calling attached method fail. message: "+error.message,error,arguments)}},doConnect);else{if(obj.connectPin)_url.baseUrl="/"+obj.connectPin;else try{if(typeof TVNC.rcParams.events=="undefined"||TVNC.rcParams.events.onServerRedirect==
null)$(window).trigger("serverRedirect",[obj.connectUrl,obj]);else TVNC.rcParams.events.onServerRedirect(obj.connectUrl,obj)}catch(error){helper.console.warning("3 - 'onServerRedirect' calling attached method fail. message: "+error.message,error,arguments)}doConnect()}},function(){try{if(typeof TVNC.rcParams.events=="undefined"||TVNC.rcParams.events.onServerRedirect==null)$(window).trigger("serverRedirect",[obj.connectUrl,obj]);else TVNC.rcParams.events.onServerRedirect(obj.connectUrl,obj)}catch(error){helper.console.warning("4 - 'onServerRedirect' calling attached method fail. message: "+
error.message,error,arguments)}},doConnect)}else if(obj.connectPin)_url.baseUrl="/"+obj.connectPin;if(!redirecting)doConnect()}else if(obj.authStatus==3)try{if(typeof TVNC.rcParams.events=="undefined"||TVNC.rcParams.events.onServerAuthenticationFailed==null)$(window).trigger("serverAuthenticationFailed",obj.errormsg);else TVNC.rcParams.events.onServerAuthenticationFailed(obj.errormsg)}catch(error){helper.console.warning("'onServerAuthenticationFailed' calling attached method fail. message: "+error.message,
error,arguments)}else if(obj.authStatus==4)try{BTP_PT_NC=null;if(typeof TVNC.rcParams.events=="undefined"||TVNC.rcParams.events.onServerNeedCredentials==null)$(window).trigger("serverNeedCredentials",{"credentials":obj.credentials});else TVNC.rcParams.events.onServerNeedCredentials({"credentials":obj.credentials})}catch(error){helper.console.warning("'onServerNeedCredentials' calling attached method fail. message: "+error.message,error,arguments)}else if(obj.errormsg)if(obj.license){if(TVNC.connected)TVNC.disconnect();
let licenseError={title:consts.licenseError,errorType:_licenseTypes.ERR_TYPE_ERROR,errorCode:obj.state||1,errorMsg:obj.errormsg};if(typeof TVNC.rcParams.events=="undefined"||TVNC.rcParams.events.onLicenseMsg==null)$(window).trigger("licenseMsg",licenseError);else TVNC.rcParams.events.onLicenseMsg(licenseError)}else{var idZero=typeof obj!="undefined"&&obj["id"]=="0";if(idZero&&!connection.fromReconnection){TVNC.disconnect();TVNC.dispose(undefined,{"code":-1,"message":obj.errormsg})}try{if(typeof TVNC.rcParams.events==
"undefined"||TVNC.rcParams.events.onServerConnectionError==null)$(window).trigger("serverConnectionError",helper.string.sprintf(consts.connAttemptFailed,obj.errormsg));else TVNC.rcParams.events.onServerConnectionError(helper.string.sprintf(consts.connAttemptFailed,obj.errormsg))}catch(error){helper.console.error("'onServerConnectionError' calling attached method fail.",error,arguments)}if(!idZero&&_comm.state!==Thinfinity.Communication.state.RECONNECTING){var status={"code":_enumCloseStatusReason.ERROR,
"message":obj.errormsg};if(productId=="ZSC")TVNC.dispose(false,status);else TVNC.dispose(undefined,status)}else if(idZero)return;else{clearTimeout(timeoutIdBeforeReconnect);timeoutIdBeforeReconnect=setTimeout(function(){TVNC.reconnect()},timeBeforeReconnect)}}else if(obj.id=="lnk"){TVNC.disconnect();TVNC.dispose();window.location.href=obj.url;return}else tryToConnectAgain();obj=null}catch(err){var msg=err;if(err.message)msg=err.message;logError("serverConnectionError: "+msg);try{if(typeof TVNC.rcParams.events==
"undefined"||TVNC.rcParams.events.onServerConnectionError==null)$(window).trigger("serverConnectionError",msg);else TVNC.rcParams.events.onServerConnectionError(msg)}catch(error){helper.console.error("'onServerConnectionError' calling attached method fail.",error,arguments)}}else tryToConnectAgain()};this.gup=function(name){var regex=new RegExp("[\\?&]"+name.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]")+"=([^&#]*)","ig");var results=regex.exec(window.location.href);regex=null;if(results==null)return"";
else return results[1]};this.refresh=function(){TVNC.removeCanvases();_displayManager.fireEvent("resetCursor");TVNC.sendCmd("cmd=refresh")};function ajaxSuccessHandler(data){errorOccurs=0;TVNC.xmlHttpJson=null;if(data!=""&&data)try{if(typeof data.oob!="undefined"){TVNC.fireOOBCmd(data.cmd,data);setTimeout(TVNC.reload,1)}else{data.imgQueue=TVNC.imgQueue;TVNC.msgQueue.push(data);TVNC.buildImgQueue(data);TVNC.processNextScreen();data=null}}catch(err){logError("ajax error: "+err+"\n"+data)}else helper.console.warning("No data on success")}
function ajaxErrorHandler(e,xhr){if(TVNC.xmlHttpJson){TVNC.xmlHttpJson.abort();TVNC.xmlHttpJson=null}if(xhr.status==0&&xhr.statusText=="timeout")restart(true);else if(xhr.status==404)TVNC.connect();else setTimeout(TVNC.reload,1)}this.reload=function(){if(_comm.state>=Thinfinity.Communication.state.CLOSING)return;if(TVNC.useAjax)_comm.getNextChunk();else TVNC.sendAck()};this.clearMouse=function(){this.mouseMoved=false};this.wsSend=function(query,type,data){_comm.wsSend(query,type,data)};this.sendEvent=
function(query,jData){if(_comm.protocol===Thinfinity.Communication.protocol.WEBSOCKET)_comm.wsSend(query);else if(_comm.state<Thinfinity.Communication.state.UNSTABLE)_comm.send(TVNC.completeAjaxParams({"queueName":this.queueRequestName,"url":TVNC.addExtraParams(_url.httpConnection+"cmd?"+query),"async":true,"dataType":_defaultResponseType}));if(_registeredEventsServicesList[_enumEventsServices.SENDEVENT]&&jData){jData.timeStamp=(new Date).getTime();_registeredEventsServicesList[_enumEventsServices.SENDEVENT](jData)}};
this.sendKey=function(key,ch,action,location){if(TVNC.rcParams.active&&TVNC.rcParams.kbdControl)if(typeof TVNC.rcParams.events!="undefined"&&TVNC.rcParams.events.onSendKeys!=null)try{TVNC.rcParams.events.onSendKeys(key,ch,action)}catch(error){helper.console.error("'onSendKeys' calling attached method fail.",error,arguments)}else{if(TVNC.rcParams.kbdLogKeys===true)logDebug("sendKey("+key+", "+ch+", "+action+")");var jData={"cmd":"keyb","key":key,"action":action,"id":TVNC.rcParams.id,"char":escape(ch)};
var cmd="cmd=keyb&key="+key+"&action="+action+"&id="+TVNC.rcParams.id+"&char="+escape(ch);if(typeof location!="undefined"){cmd+="&location="+location;jData.location=location}TVNC.sendEvent(cmd,jData)}};this.sendFunctionKey=function(key){if(TVNC.rcParams.active&&TVNC.rcParams.kbdControl){var jData={"cmd":"fkey","key":encodeURIComponent(key),"id":TVNC.rcParams.id};TVNC.sendEvent("cmd=fkey&key="+encodeURIComponent(key)+"&id="+TVNC.rcParams.id,jData)}};this.sendText=function(text){for(var c=0;c<text.length;c++){TVNC.sendKey(0,
text.charCodeAt(c),"down",0);TVNC.sendKey(0,text.charCodeAt(c),"up",0)}};this.sendKeyStroke=function(key){TVNC.sendKeyDown(key);TVNC.sendKeyUp(key)};this.sendKeyDown=function(key){TVNC.sendKey(key,0,"down",0)};this.sendKeyUp=function(key){TVNC.sendKey(key,0,"up",0)};this.sendCtrlAltDel=function(){TVNC.sendFunctionKey("CtrlAltDel")};this.sendShiftCtrlEsc=function(){TVNC.sendFunctionKey("ShiftCtrlEsc")};this.sendShellExplorer=function(){TVNC.sendFunctionKey("WindowsExplorer")};this.sendShellRun=function(){TVNC.sendFunctionKey("Run")};
this.sendCtrlEsc=function(){TVNC.sendFunctionKey("CtrlEsc")};this.sendCut=function(){TVNC.sendFunctionKey("Cut")};this.sendCopy=function(){TVNC.sendFunctionKey("Copy")};this.sendPaste=function(){TVNC.sendFunctionKey("Paste")};this.translateMouseCoordX=function(x){return x};this.translateMouseCoordY=function(y){return y};this.sendMouse=function(x,y,button,action){if(TVNC.rcParams.active&&TVNC.rcParams.mouseControl&&TVNC.allowMouse){if(TVNC.useAjax&&action=="move"&&_comm.queueLength(TVNC.queueRequestName)>
0)return;TVNC.clearMouse();TVNC.lastMouseAction=action;x=parseInt(x,10)+TVNC.rcParams.viewLeft;y=parseInt(y,10)+TVNC.rcParams.viewTop;var tx=TVNC.translateMouseCoordX(x);var ty=TVNC.translateMouseCoordY(y);var jData={"cmd":"mouse","x":tx,"y":ty,"btn":button,"action":action,"id":TVNC.rcParams.id};TVNC.sendEvent("cmd=mouse&x="+tx+"&y="+ty+"&btn="+button+"&action="+action+"&id="+TVNC.rcParams.id,jData)}};this.sendMouseQueue=function(){clearTimeout(_mouseQueueTimeout);if(TVNC.rcParams.active&&TVNC.rcParams.mouseControl&&
TVNC.allowMouse){if(mouseBuffer.queue.length>0){var buffer=mouseBuffer.queue;if([Thinfinity.Communication.state.RECONNECTING,Thinfinity.Communication.state.UNSTABLE,Thinfinity.Communication.state.LOST].indexOf(_comm.state)!=-1)for(var i=buffer-length-1;i>=0;i--)if(buffer[i].action=="move"){var temp=buffer[i];buffer=[];buffer.push(temp);break}TVNC.lastMouseAction=buffer[buffer.length-1].action;var sBuffer=JSON.stringify(buffer);TVNC.sendEvent("cmd=mouse&data="+sBuffer+"&id="+TVNC.rcParams.id,{"cmd":"mouse",
"data":sBuffer,"id":TVNC.rcParams.id});mouseBuffer.queue=[]}_mouseQueueTimeout=setTimeout(TVNC.sendMouseQueue,10)}};this.sendMouseMove=function(){clearTimeout(_mouseQueueTimeout);if(TVNC.rcParams.active&&TVNC.rcParams.mouseControl&&!_avoidSendMouseMove){if(TVNC.mouseMoved)TVNC.sendMouse(TVNC.mouseX,TVNC.mouseY,0,"move");else if(TVNC.lastMouseAction=="move")TVNC.lastMouseAction="";_mouseQueueTimeout=setTimeout(TVNC.sendMouseMove,TVNC.rcParams.mouseMoveProcessInterval)}};this.sendWheel=function(deltaY,
deltaX){if(TVNC.rcParams.active&&TVNC.rcParams.mouseControl){var action="";var delta=0;if(deltaY!=0){action="wheel";delta=deltaY*_deltaYMultiplier}else{action="hwheel";delta=deltaX}var jData={"id":TVNC.rcParams.id,"action":action,"delta":delta};if(mouseBuffer.isAvailable)mouseBuffer.queue.push(jData);else TVNC.sendEvent("cmd=mouse&id="+TVNC.rcParams.id+"&action="+action+"&delta="+delta,jData)}};this.IsNumKey=function(code){return code>=96&&code<=111&&code!=108||code==144};this.isIMEKey=function(e){return(e.which||
e.keyCode)==229};this.isMacAltKey=function(e){return this.mac&&e.altKey};this.IsFunctionKey=function(keyCode){return keyCode>=112&&keyCode<=123||keyCode>=33&&keyCode<=40||keyCode>=45&&keyCode<=46||keyCode>=16&&keyCode<=20||keyCode>=91&&keyCode<=93||keyCode==13||keyCode==9||keyCode==8||keyCode==27||keyCode==144||keyCode==12||keyCode==224};this.hookKM=function(){if(!TVNC.MouseHooked){TVNC.MouseHooked=true;if(TVNC.rcParams.hookMouse);TVNC.bindKeyboardEvents()}};this.clearKbdMacInputTimer=function(){window.clearInterval(this.kbdMacInputTimer);
this.kbdMacInputTimer=null};this.inputAllowed=function(e){if(e&&_preventKeys.available)if(_preventKeys.keys[e.keyCode]){var modifiers=_preventKeys.keys[e.keyCode];var prevent=true;for(var mk in modifiers){prevent&=e[mk]===modifiers[mk];if(!prevent)break}if(prevent)return false}var isUIBlocked=$(".blockUI.blockOverlay:visible").length>0;var isIndex=false;if(productId=="ZSC"){if(emulcont==null)emulcont=document.getElementById("emulcont");if(emulcont&&parseInt(emulcont.style.left.replace("px",""),10)>
0)isIndex=true}return _comm.state<Thinfinity.Communication.state.UNSTABLE&&!isUIBlocked&&!isIndex&&(!TVNC.rcParams.useFocus||TVNC.inputEnabled)};this.bindKeyboardEvents=function(){TVNC.inputEnabled=true;if(TVNC.rcParams.hookKeyboard)if(TVNC.KeyboardHooked)_displayManager.focus();else{if(agentInfo.isMobile&&productId=="ZSC")return;TVNC.KeyboardHooked=true}};this.unbindKeyboardEvents=function(){TVNC.inputEnabled=false};this.mouseDown=function(x,y,button){_displayManager.fireEvent("mouseDown",x,y,button,
{async:false})};this.mouseUp=function(x,y,button){_displayManager.fireEvent("mouseUp",x,y,button,{async:false})};this.mouseMove=function(x,y){_displayManager.fireEvent("mouseMove",x,y,{async:false})};this.setFocus=function(X,Y){var position=TVNC.findPos(TVNC.vncContainer);let gs=_displayManager.processDisplayCmd("GET_SCALE");X=Math.round((X-position[0])/gs);Y=Math.round((Y-position[1])/gs);$('[id^="'+productId+'_"]').each(function(index){var win=$(this)[0];if(win.offsetLeft<=X&&win.offsetTop<=Y&&
win.offsetLeft+win.offsetWidth>=X&&win.offsetTop+win.offsetHeight>=Y)return win});return null};this.hasChildOfByClassName=function(classname,child){var elems=document.getElementsByClassName(classname);for(var i=0;i<elems.length;i++)if(elems[i].contains(child))return true;return false};this.getElementFromPoint=function(e){var x,y;if((e.changedTouches||e.touches)&&(e.changedTouches||e.touches).length>0){x=(e.changedTouches||e.touches)[0].pageX-document.body.offsetLeft;y=(e.changedTouches||e.touches)[0].pageY-
document.body.offsetTop}else if(e.clientX!=undefined||e.pageX!=undefined){x=e.clientX||e.pageX-document.body.offsetLeft;y=e.clientY||e.pageY-document.body.offsetTop}else if(e.pointers!=undefined&&e.pointers.length>0){x=e.pointers[0].pageX-document.body.offsetLeft;y=e.pointers[0].pageY-document.body.offsetTop}var idMask=productId+"_canvas_";var selectedElement=document.elementFromPoint(x,y);if(selectedElement&&(!helper.style.hasClass(selectedElement,"__uselocalmouse__")&&!TVNC.hasChildOfByClassName("__uselocalmouse__",
selectedElement)&&(selectedElement.tagName=="CANVAS"||selectedElement.name=="caret"||selectedElement.id=="caret"||selectedElement==TVNC.vncdiv||selectedElement.id.indexOf(idMask)!=-1||helper.style.hasClass(selectedElement,"ignoremouse"))))return null;else return selectedElement};this.setClipboardPosition=function(){};function isInsideOfArea(x,y,rad){return Math.pow(x,2)+Math.pow(y,2)<=rad}this.checkPacketIndex=function(pckIdx,groupIdx,eod){if(_lastPkt.idx==99&&pckIdx==0&&eod)_lastPkt.idx=-1;if(_lastPkt.idx==
-1&&_lastPkt.reset){_lastPkt.reset=false;_lastPkt.idx=pckIdx-1}if(_lastPkt.idx+1!=pckIdx){if(_lastPkt.idx+1<pckIdx){TVNC.logger.logWarning(helper.string.format("Missing pkt: {2} - last: {0}, current: {1}, groupIdx: {3}, UBRWID: {4}",_lastPkt.idx,pckIdx,_lastPkt.idx+1,groupIdx,TVNC.rcParams.UBRWID),"*");helper.console.warning(helper.string.format("Missing pkt: {2} - last: {0}, current: {1}, groupIdx: {3}, UBRWID: {4}",_lastPkt.idx,pckIdx,_lastPkt.idx+1,groupIdx,TVNC.rcParams.UBRWID),arguments)}else{TVNC.logger.logWarning(helper.string.format("Pkt treated - last: {0}, current: {1}, groupIdx: {2}, UBRWID: {3}",
_lastPkt.idx,pckIdx,groupIdx,TVNC.rcParams.UBRWID),"*");helper.console.warning(helper.string.format("Pkt treated - last: {0}, current: {1}, groupIdx: {2}, UBRWID: {3}",_lastPkt.idx,pckIdx,groupIdx,TVNC.rcParams.UBRWID),arguments)}if(eod)_lastPkt.idx=pckIdx;restartConnection()}else if(eod)_lastPkt.idx=pckIdx;else if(_lastPkt.idx==-1)_lastPkt.idx=0};this.getNextHighestZindex=function(obj){var highestIndex=0;var currentIndex=0;var elArray=Array();if(obj)elArray=obj.getElementsByTagName("*");else elArray=
document.getElementsByTagName("*");for(var i=0;i<elArray.length;i++){if(elArray[i].currentStyle)currentIndex=parseFloat(elArray[i].currentStyle["zIndex"]);else if(window.getComputedStyle)currentIndex=parseFloat(document.defaultView.getComputedStyle(elArray[i],null).getPropertyValue("z-index"));if(!isNaN(currentIndex)&&currentIndex>highestIndex)highestIndex=currentIndex}return highestIndex+1};function checkSplashPopup(){var elem=document.querySelector(_splashCssName);if(elem)if(elem.style.getPropertyValue("display")!=
"none"&&elem.style.getPropertyValue("visibility")!="hidden"){var b=elem.getBoundingClientRect();return b.x>0&&b.x<TVNC.rcParams.width&&b.y>0&&b.y<TVNC.rcParams.height&&b.height>0&&b.width>0}else return false;else return false}this.reconnect=function(){if(_comm.state>=Thinfinity.Communication.state.CLOSING)return;connection.fromReconnection=true;if(Thinfinity.Popups&&Thinfinity.Popups.growl)Thinfinity.Popups.growl.unblockAll();TVNC.processNextScreenEnabled=true;if(document.getElementById(TVNC.reconnectDivId)==
null){if(!TVNC.rcParams.overrideCursor)_displayManager.fireEvent("resetCursor");if(!_avoidConnectionLostPopup)TVNC.showReconnectDiv(true);try{if(typeof TVNC.rcParams.events=="undefined"||TVNC.rcParams.events.onServerReconnect==null)$(window).trigger("serverReconnect");else TVNC.rcParams.events.onServerReconnect()}catch(error){helper.console.error("'onServerReconnect' calling attached method fail.",error,arguments)}if(TVNC.useAjax){if(TVNC.xmlHttpJson){TVNC.xmlHttpJson.abort();TVNC.xmlHttpJson=null}_comm.releaseQueue(TVNC.queueRequestName)}}if(helper.object.existsPath(TVNC,
"rcParams.scraperArgs")&&typeof TVNC.rcParams!="undefined"&&(TVNC.rcParams.resolution=="fittobrowser"||TVNC.rcParams.resolution=="fittoscreen")){var w=window.environment.detectedWidth;var h=window.environment.detectedHeight;if(helper.object.existsPath(self,"clientSettings.UseViewportSize")&&self.clientSettings.UseViewportSize){w=window.environment.viewportWidth;h=window.environment.viewportHeight}if(helper.object.getDataTypeOf(TVNC.rcParams.scraperArgs)=="json"){TVNC.rcParams.scraperArgs.browserWidth=
w;TVNC.rcParams.scraperArgs.browserHeight=h}else{TVNC.rcParams.scraperArgs=TVNC.removeBrowserSize(TVNC.rcParams.scraperArgs);TVNC.rcParams.scraperArgs+="&browserWidth="+w+"&browserHeight="+h}}TVNC.connect()};this.supportsHTML5Storage=function(){try{return"localStorage"in window&&window["localStorage"]!=null}catch(err){return false}};this.getStorageName=function(){var middle=this.rcParams.address?"_"+this.rcParams.address:"";return"thinvnc"+middle+"_prefs"};this.loadPreferences=function(){if(!this.supportsHTML5Storage())return;
try{var objJson=localStorage.getItem(this.getStorageName());var objData=JSON.parse(objJson);if(objData!=null&&typeof objData!="undefined")_onlyKeyCode=objData.onlykeycode!=null?objData.onlykeycode:_onlyKeyCode}catch(err){}};this.savePreferences=function(){if(!this.supportsHTML5Storage())return;try{var objData=new Object;objData.onlykeycode=_onlyKeyCode;var objJson=JSON.stringify(objData);localStorage.setItem(this.getStorageName(),objJson)}catch(err){}};this.applyParam=function(params,name,value){if(typeof value==
"object"&&value!=null){var obj=params[name];if(!obj)obj={};for(var v in value)obj[v]=value[v];params[name]=obj}else params[name]=value};this.setParams=function(dd,ee){for(var o in dd)this.applyParam(TVNC.rcParams,o,dd[o]);this.rcParams.events=ee;TVNC.rdpMode=this.rcParams.scraper=="RDP"};this.resolveAgent=function(){TVNC.majorVersion=agentInfo.majorVersion;TVNC.firefoxVersion=agentInfo.firefoxVersion;TVNC.mac=agentInfo.isMac;TVNC.ios=agentInfo.isIOS;TVNC.iosVersion=agentInfo.iosVersion;TVNC.iphone=
agentInfo.isIphone;TVNC.android=agentInfo.isAndroid;TVNC.hptablet=agentInfo.isHPTablet;TVNC.playbook=agentInfo.isPlaybook;TVNC.chromeOS=agentInfo.isChromeOS;TVNC.symbian=agentInfo.isSymbian;TVNC.firefox=agentInfo.isFirefox;TVNC.firefoxVersion=agentInfo.firefoxVersion;TVNC.opera=agentInfo.isOpera;TVNC.chrome=agentInfo.isChrome;TVNC.safari=agentInfo.isSafari;TVNC.msie=agentInfo.isMSIE;TVNC.msieVersion=agentInfo.msieVersion;TVNC.nokia=agentInfo.isNokiaBrowser;TVNC.mobile=agentInfo.isMobile&&!TVNC.rcParams.forceDesktop;
TVNC.touch=agentInfo.isTouch;TVNC.agentName=agentInfo.getAgentKey()};this.appendElement=function(parentElem,type,name,attrColl,content){var elem=document.createElement(type);if(name!=null&&name!=""){elem.setAttribute("name",name);elem.setAttribute("id",name)}for(var a in attrColl)if(a=="style"){var s=attrColl[a].split(";");s.forEach(function(item){var kvp=item.split(":");elem.style[helper.string.trim(kvp[0])]=helper.string.trim(kvp[1])})}else elem.setAttribute(a,attrColl[a]);if(content)elem.innerHTML=
content;parentElem.appendChild(elem);return elem};this.initfs=function(dbname){if(!this.rcParams.persistentCache){TVNC.cacheLoaded=true;TVNC.sendStart();return}if(typeof FS!="undefined"&&!TVNC.fs){TVNC.fs=new FS(dbname);TVNC.fs.init(function(){TVNC.fs.enumFiles(function(filename){TVNC.dbFiles.push(filename)},function(){TVNC.cacheLoaded=true;TVNC.sendStart()})},function(){delete TVNC.fs;TVNC.fs=null;TVNC.cacheLoaded=true;TVNC.sendStart()})}else{TVNC.cacheLoaded=true;TVNC.sendStart()}};this.applyParams=
function(dd){for(var o in dd)this.rcParams[o]=dd[o];TVNC.vncdivId=TVNC.rcParams.divId?TVNC.rcParams.divId:TVNC.vncdivId;TVNC.centered=TVNC.rcParams.centered;if(this.rcParams.showOnStart==false)if(Thinfinity.Popups&&Thinfinity.Popups.establishing.backgroundStyle===Thinfinity.Popups.establishing.backgroundStyles.NONE)TVNC.hide();TVNC.vncdiv=document.getElementById(TVNC.vncdivId);if(typeof TVNC.vncdiv=="undefined"||TVNC.vncdiv==null){var errorMsg="Container element is null or undefined, "+consts.technicalSupport;
logError(errorMsg);try{let oError={message:errorMsg};if(typeof TVNC.rcParams.events=="undefined"||TVNC.rcParams.events.onServerError==null)$(window).trigger("serverError",oError);else TVNC.rcParams.events.onServerError(oError)}catch(error){helper.console.error("'onServerError' calling attached method fail.",error,arguments)}TVNC.disconnect();throw new Error(errorMsg);}if(!TVNC.vncdiv)throw new Error("the "+TVNC.vncdivId+" is not available");TVNC.savedMaxWidth=TVNC.rcParams.maxWidth;TVNC.savedMaxHeight=
TVNC.rcParams.maxHeight;if(TVNC.rcParams.fitmode==0||TVNC.rcParams.fitToBrowser==true){TVNC.vncdiv.style.position="relative";TVNC.vncdiv.style.overflow="hidden";TVNC.vncdiv.style.top="0px";TVNC.vncdiv.style.marginTop="0px";TVNC.vncdiv.style.left="0px";TVNC.vncdiv.style.marginLeft="0px"}};this.init=function(dd){TVNC.applyParams(dd);var tempForceAjax=TVNC.gup("forceAjax");if(tempForceAjax!=""){TVNC.rcParams.forceAjax=helper.object.convertTo(tempForceAjax,"boolean");_comm.protocol=Thinfinity.Communication.protocol.AJAX}TVNC.resolveAgent();
if(TVNC.rdpMode&&TVNC.centered&&agentInfo.isMobile&&window.environment.supportsFullScreen){TVNC.vncContainer=document.getElementById("vncContainer");if(TVNC.vncContainer==null){TVNC.vncContainer=document.createElement("div");TVNC.vncContainer.id="vncContainer";TVNC.vncContainer.style.margin="auto auto";TVNC.vncContainer.style.height="auto";TVNC.vncContainer.style.width="auto";TVNC.vncContainer.style.minWidth="100px";TVNC.vncContainer.style.minHeight="100px";TVNC.vncContainer.style.backgroundColor=
"transparent";TVNC.vncContainer.style.position="relative";TVNC.vncdiv.appendChild(TVNC.vncContainer)}}else TVNC.vncContainer=TVNC.vncdiv;function isEmbeddedPrinter(){try{return window&&window.parent&&window.parent.document.getElementsByClassName("embedded-printer-device-container").length>0}catch(error){return false}}if(helper.object.existsPath(window,"Thinfinity.VisualEffect")){function isSlideMode(){try{if(window!=window.parent&&typeof window.parent!="undefined")if(window.parent.document&&window.parent.document.getElementsByTagName){var iframes=
window.parent.document.getElementsByTagName("iframe");for(var ifrIdx=0;ifrIdx<iframes.length;ifrIdx++)if(iframes[ifrIdx].contentWindow.name==window.name)return true;iframes=null}}catch(error){}return false}if(!isEmbeddedPrinter())_visualEffect=new Thinfinity.VisualEffect({"id":"visualEffectContainer","container":productId=="ZSC"?isSlideMode()?document.body:document.getElementById("prnBefore")||TVNC.vncContainer:TVNC.vncContainer,"allowReconnectionDialog":true,"events":{"onCancel":function(){TVNC.closeReconnectDiv();
TVNC.disconnect();$(document).unbind();$("#"+TVNC.vncdivId).unbind()}}})}TVNC.supportsCanvas=!!document.createElement("canvas").getContext;if(!_url.baseUrl){var path=TVNC.rcParams.url?TVNC.rcParams.url:window.location.href;var pathArray=path.split("/");if(TVNC.rcParams.protocol==""||!TVNC.rcParams.protocol)TVNC.rcParams.protocol=pathArray[0];if(TVNC.rcParams.server==""||!TVNC.rcParams.server)TVNC.rcParams.server=pathArray[2];_url.baseUrl="/";for(i=3;i<pathArray.length-1;i++){_url.baseUrl+=pathArray[i];
_url.baseUrl+="/"}}TVNC.loadPreferences();clearTimeout(TVNC.emptyRecycleImgTimeout);TVNC.emptyRecycleImgTimeout=setTimeout(TVNC.emptyRecycleImg,TVNC.recycleImgTimeoutValue);for(i=0;i<12;i++)this.rdpGlyphArray[i]=Array(256);TVNC.registerOOBCmd("cookie",function(obj){var cookieString=obj&&obj.cookie?obj.cookie:null;if(cookieString&&typeof cookieString==="string"&&cookieString.trim().length>0){writeCookies(extractCookie(cookieString,true),true);syncCookies()}});TVNC.registerOOBCmd("aslwarning",function(obj){var secondsToClose=
obj&&obj.secondsToClose?obj.secondsToClose:null;if(secondsToClose&&secondsToClose>0){var unit=consts.minutes;var min=obj.secondsToClose/60;var val=null;var color="";if(min===1){unit=consts.minute;val=min}else if(min>1){min=Math.ceil(min);unit=consts.minutes;val=min}else{min=Math.trunc(min);unit=consts.seconds;color="color:red;";val=secondsToClose}var msg=helper.string.sprintf(consts.sessionTimeout,`<b style="${color}">${val}</b>`,unit);var data={"secondsToClose":secondsToClose,"minutesToClose":min,
"message":msg};if(typeof TVNC.rcParams.events=="undefined"||TVNC.rcParams.events.onSessionTimeout==null)$(window).trigger("SessionTimeout",data);else TVNC.rcParams.events.onSessionTimeout(data)}});TVNC.registerOOBCmd("licenseMsg",function(obj){obj.title=consts.licenseError;if(obj&&obj.errorType===_licenseTypes.ERR_TYPE_ERROR){if(typeof obj.errorCode!="undefined"){helper.console.warning(helper.string.format("Error Code: {0}, Message: {1}",obj.errorCode,obj.errorMsg),arguments);if(TVNC.connected)TVNC.disconnect()}}else helper.console.warning(obj.title+
" "+obj.errorMsg,arguments);let res=false;if(typeof TVNC.rcParams.events=="undefined"||TVNC.rcParams.events.onLicenseMsg==null)$(window).trigger("licenseMsg",obj);else res=TVNC.rcParams.events.onLicenseMsg(obj);if(!res)TVNC.dispose(undefined,{"title":obj.title,"message":obj.errorMsg})})};function getComponentSettings(callback){helper.ajax.get({"url":`${helper.url.parseUrl(location.href).toUrl("-a-r")}/component.settings.json`,"type":helper.ajax.responseType.JSON,"success":callback,"error":function(e,
status,xhr){callback(null)}})}function initializeComponents(permissions){var _isLegacy=typeof cookiePrefix==="undefined"||cookiePrefix!=="fmx"?false:typeof legacyVersion!="undefined"?legacyVersion:true;if(!_componentsInitialized&&Thinfinity.Component&&Thinfinity.Component.RegistrationServices&&!_isLegacy){var panelContructor=function(params){if(Thinfinity.Component.Panel)return new Thinfinity.Component.Panel({"parentElement":document.body,"params":params})};getComponentSettings(function(components){_componentRegistrationServices=
new Thinfinity.Component.RegistrationServices({"owner":TVNC,"permissions":permissions,"components":components,"constructors":{"PANEL":panelContructor},"getAuthorization":function(name,callback){callback(true)}});_componentsInitialized=true});helper.dom.addEvent(window,"thinfinity.components.registration.services.ready",function(){if(_oInterface)TVNC.registerComponentObject("OINTERFACE",_oInterface)})}}function sendCookiesCmd(success,error){var d=new Date;var n=d.getTime();var url=_url.httpConnection+
"cmd?id="+TVNC.rcParams.id+"&cmd=cookie&dt="+n;writeCookies(_syncCookies.data,false);_comm.post({"url":url,"data":'{"cookie":'+n+"}","type":"json","success":success,"error":error})}function getCurrentCookiePath(){return _url.brokerUrl.replace(/\/$/,"")}function getFullCookiePath(){return _url.baseUrl.replace(/\/$/,"")}function startCookiesSync(){clearTimeout(_syncCookies.syncCookiesTOUT);if(_syncCookies.syncCookiesEnabled)_syncCookies.syncCookiesTOUT=setTimeout(()=>{syncCookies(startCookiesSync)},
_syncCookies.syncCookiesTime)}function extractCookie(strCookies,singleCookie){let cookieData=null;let name=null;if(strCookies!=""){cookieData={};strCookies.split(";").forEach(c=>{let [k,v]=c.split("=");k=k.trim();if(singleCookie)if(!name){name=k;cookieData[name]={name,value:v,expires:null,path:getCurrentCookiePath(),domain:null,svalue:null,targetPath:getFullCookiePath()}}else{if(cookieData[name].hasOwnProperty(k))cookieData[name][k]=v}else cookieData[k]={name:k.trim(),value:v,expires:null,path:getCurrentCookiePath(),
domain:null,svalue:null,targetPath:getFullCookiePath()}})}return cookieData}function writeCookies(data,toLocal){if(data){let expDate=(new Date(Date.now()+750)).toUTCString();Object.keys(data).forEach(k=>{let c=data[k];document.cookie=`${c.name}=${c.value};name=${c.name};${toLocal?"":"expires='"+expDate+"';"}path=${toLocal?c.path:c.targetPath}`})}}function syncCookies(callback){if(_syncCookies.syncCookiesEnabled&&_comm.state===Thinfinity.Communication.state.CONNECTED){let hasChanged=false;let _data=
extractCookie(document.cookie,false);if(_data)Object.keys(_data).forEach(k=>{if(!hasChanged)if(!_syncCookies.data[k])hasChanged=true;else{let l=_syncCookies.data[k];let r=_data[k];if(l.value!=r.value||l.path!=r.path||l.domain!=r.domain||l.expires!=r.expires)hasChanged=true}});if(hasChanged){_syncCookies.data=_data;sendCookiesCmd(callback,callback)}else callback()}else callback()}function stopSyncCookies(){_syncCookies.syncCookiesEnabled=false;clearTimeout(_syncCookies.syncCookiesTOUT);_syncCookies.syncCookiesTOUT=
null}this.openPrnManager=function(url,showCancel){function onShow(msg){Thinfinity.Popups.unblock();if(typeof msg=="undefined")msg=["<div class='popup' id='printDlg'><div id='printIco'>&nbsp;</div><div id='printDlgMsg'>",consts.printedDocReady,"</div><br/><div class='divbuttons'><a id='prnWOpenDocBtn' class='popuplink'>open</a>","<span id='prnWShowAllGroup'>&nbsp; &nbsp; <a id='prnWShowAllBtn' class='popuplink'>",consts.showAll,"</a>",showCancel?"&nbsp; &nbsp; <a class='popuplink' id='prnWCloseBtn' >"+
consts.discard+"</a>":"","</div></div>"].join("");var popup=new Thinfinity.Popups.popup;popup.block("printDlg",msg,null,function(e){$("#prnWOpenDocBtn").on("click",function(){TVNC.printerManager.openDocuments(true)});$("#prnWShowAllBtn").on("click",function(){TVNC.printerManager.showAllPrintings(true)});$("#prnWCloseBtn").on("click",function(){TVNC.printerManager.discard(true)});setTimeout(TVNC.reload,1)})}function onShowAll(obj){TVNC.printingWindow=window.open("printings.html","printingWindow")}
function onClose(){$.unblockUI();if(!!TVNC.printingWindow&&!TVNC.printingWindow.location)TVNC.printingWindow=null}function onEnqueueDocument(obj){if(obj.count==1){$("#printDlgMsg").html(consts.printedDocReady);$("#prnWShowAllGroup").hide()}else{$("#printDlgMsg").html(helper.string.sprintf(consts.printedDocsReady,obj.count));$("#prnWShowAllGroup").show()}}function onDiscard(){if(!!TVNC.printingWindow)if(!TVNC.printingWindow.location)TVNC.printingWindow=null;else TVNC.printingWindow.location.href=TVNC.printingWindow.location.href}
function onCheckVisibility(){var v=$("#printDlg").width();return v>0}if(!TVNC.printerManager)TVNC.printerManager=new PrinterManager({"onShow":onShow,"onShowAll":onShowAll,"onClose":onClose,"onEnqueueDocument":onEnqueueDocument,"onDiscard":onDiscard,"onCheckVisibility":onCheckVisibility});TVNC.printerManager.enqueueDocument(url)};this.openPrnWindow=function(url,showCancel){if(typeof PrinterManager!="undefined")this.openPrnManager(url,showCancel);else{var msg="<div class='popup' id='printDlg'><div id='printIco'>&nbsp;</div><div>"+
consts.printedDocReady+"</div><br/><div class='divbuttons'><a class='popuplink' href='"+(url.url.indexOf("?"+_SIDName+"=")==-1?url.url:url.url.substring(0,url.url.indexOf("?"+_SIDName+"=")))+"' target='_blank' onclick='$.unblockUI()'>open</a>";if(showCancel)msg+="&nbsp; &nbsp; <a class='popuplink' onclick='$.unblockUI()'>discard</a>";msg+="</div></div>";Thinfinity.Popups.unblock();var popup=new Thinfinity.Popups.popup;popup.block("printDlg",msg,null,function(){setTimeout(TVNC.reload,1)})}};this.openLinkDlg=
function(url,caption){helper.console.warning("openLinkDlg is deprecated, use 'Thinfinity.OpenLinkPopup'");if(typeof TVNC.rcParams.events=="undefined"||TVNC.rcParams.events.onOpenLink==null)$(window).trigger("OpenLink",obj);else TVNC.rcParams.events.onOpenLink(obj)};function changeAppFocus(value){var cmd="cmd=focus"+"&value="+value;logDebug('switch app - "CTRL + TAB", cmd:'+cmd);TVNC.sendCmd(cmd)}this.show=function(){helper.style.add(TVNC.vncdiv,{"display":"inherit"})};this.hide=function(){helper.style.add(TVNC.vncdiv,
{"display":"none"})};function removeFunctions(){TVNC.zoomDesktop(1)}function sendTabFocusCmd(monitorId,cmd,value){if(_comm.state==Thinfinity.Communication.state.CONNECTED){TVNC.sendCmd(`cmd=${cmd}&value=${value.toString()}${typeof monitorId!=="undefined"?"&monitorId="+monitorId:""}`);if(_registeredEventsServicesList[_enumEventsServices.SENDEVENT]&&cmd!=="visibilityState")_registeredEventsServicesList[_enumEventsServices.SENDEVENT]({"timeStamp ":(new Date).getTime(),"cmd":"focus","value":value.toString(),
"monitorId":monitorId})}if(cmd==="focus"||cmd==="tabvisible")triggerCustomEvent(value?"focus":"blur");if(TVNC.rcParams.clipboard&&TVNC.rcParams.synchronizeClipboard){let b=value===true||value==="visible";if(!b)_clipSynchronized=false;else if(document.hasFocus()){_clipSynchronized=true;_displayManager.fireEvent("synchronizeRemoteClipboard",{async:false})}}}if(productId=="ZSC"&&TVNC.rcParams.hookKeyboard&&!TVNC.KeyboardHooked&&TVNC.triggerCustomEvent==undefined)Object.defineProperty(TVNC,"triggerCustomEvent",
{"enumerable":false,"configurable":false,"writable":false,"value":triggerCustomEvent});_packetReceiver=new Thinfinity.PacketReceiver({properties:{async:this.wsAsyncRecv,asyncTimeout:this.wsAsyncRecvTimeout,checkPacketIndex:this.isPktIdxEnabled},methods:{getRawBinaryHandler},handlers:{0:processJson,1:screenImage,3:queueText,5:function(group,arrayView){if(_ePictureType!==_enumPictureType.H264){triggerCustomEvent("H264");_ePictureType=_enumPictureType.H264;removeFunctions()}var id=arrayView[1];TVNC.sendCmd(`cmd=fc-pre&idx=${arrayView[2]}&id=${id}`);
_displayManager.processData(id,arrayView[0],arrayView.subarray(3))},6:function(group,arrayView){if(TVNC.rcParams.events.onFileStream)TVNC.rcParams.events.onFileStream(arrayView)},8:function(group,arrayView){if(_ePictureType===_enumPictureType.H264)return;if(_ePictureType!==_enumPictureType.GFX){triggerCustomEvent("GFX");_ePictureType=_enumPictureType.GFX;_displayManager.processData(null,Thinfinity.Display.Manager.EVENT_TYPES.GFX_RDP_INITIALIZE);removeFunctions()}_displayManager.processData(null,arrayView[0],
arrayView.subarray(1))}}});_packetReceiver.on("warning",function(msg){helper.console.warning(msg+", UBRWID: "+TVNC.rcParams.UBRWID,arguments);TVNC.logger.logWarning(msg+", UBRWID: "+TVNC.rcParams.UBRWID)});_packetReceiver.on("restartConnection",restartConnection);Object.defineProperty(this,"registerCustomHandler",{"enumerable":false,"configurable":false,"writable":false,"value":_packetReceiver.registerHandler});function processJson(group,arrayView,json){json=json||TVNC.arbufToStringU8((new Zlib.RawInflate(arrayView)).decompress());
if(json==="{}")return;try{var obj=JSON.parse(json)}catch(err){logError("err: "+err);logError("json: "+json);return}json=null;obj.group=group;if(typeof obj.oob!="undefined"){if(TVNC.fireOOBCmd(obj.cmd,obj))return;if(obj.cmd=="getImgCache"){var cmd="cmd=imgCache";cmd+="&items="+getImageCacheList(cmd.compression);TVNC.sendCmd(cmd)}else if(obj.cmd=="getNativeClasses"){var cmd="cmd=nativeClasses";cmd+="&items="+TVNC.controlFactory.getClassList();TVNC.sendCmd(cmd)}else if(obj.cmd=="openUrl")if(typeof TVNC.rcParams.events==
"undefined"||TVNC.rcParams.events.onOpenLink==null)$(window).trigger("OpenLink",obj);else TVNC.rcParams.events.onOpenLink(obj);else if(obj.cmd=="showMsg")if(typeof TVNC.rcParams.events=="undefined"||TVNC.rcParams.events.onServerMessage==null)$(window).trigger("ServerMessage",obj);else TVNC.rcParams.events.onServerMessage(obj);else if(obj.cmd=="shadowingStatus")if(typeof TVNC.rcParams.events?.onShadowingStatus)TVNC.rcParams.events.onShadowingStatus(obj.shadowed);else $(window).trigger("ShadowingStatus",
obj.shadowed);else if(obj.cmd=="clisync"){if(TVNC.rcParams.clipboard&&TVNC.rcParams.synchronizeClipboard){_clipSynchronized=true;_displayManager.fireEvent("synchronizeLocalClipboard",obj,{async:false})}}else if(TVNC.controlFactory)TVNC.controlFactory.dispatchEvent(obj.oob,obj.cmd,obj)}else if(typeof obj.id!="undefined")TVNC.serverCmdResult(obj);else if(obj.preidx)TVNC.sendCmd("cmd=fc-pre&idx="+obj.preidx);else if(obj.status){obj.imgQueue=TVNC.imgQueue;TVNC.msgQueue.push(obj);TVNC.processNextScreen()}}
function screenImage(group,arrayView){var key=((arrayView[0]-48)*1E4|0)+((arrayView[1]-48)*1E3|0)+((arrayView[2]-48)*100|0)+((arrayView[3]-48)*10|0)+(arrayView[4]-48)|0;key=TVNC.getKeyFromCmd(group,key);var type=TVNC.arbufToStringU8(arrayView.subarray(5,9)).replace(/ /g,"");var hashLength=0;var hash="";dataIndex=9;var item=TVNC.getImageItem();if(type=="idec")item.fromImageDecoderData(arrayView.subarray(dataIndex),type,hash,key);else{if(arrayView[dataIndex]==58){++dataIndex;do++hashLength;while(arrayView[dataIndex+
hashLength]!=58);hash=TVNC.arbufToStringU8(arrayView.subarray(dataIndex,dataIndex+hashLength));dataIndex+=hashLength+1}item.fromImageArray(arrayView.subarray(dataIndex),type,hash,key)}}function queueText(buffer){var item=TVNC.getImageItem();item.encoded.data=buffer;TVNC.addToImgQueueAndExecute(TVNC.imgQueue,item)}if(window.eScript&&window.embedScriptLog&&window.embedScriptLog["thinvnc.sdk"]){this.eval=function(str){eval(str)};eScript.add(window.embedScriptLog["thinvnc.sdk"],this);if(window.browserTracking)browserTracking.on("disconnect",
function(){TVNC.disconnect();TVNC.dispose()})}Object.defineProperty(TVNC,"fromReconnection",{"enumerable":true,"configurable":false,"get":function(){return connection?connection.fromReconnection:false}});try{Thinfinity!=undefined}catch(e){Thinfinity={}}if(!Thinfinity.thinVncSdk)Object.defineProperty(Thinfinity,"thinVncSdk",{"enumerable":false,"configurable":false,"get":function(){return TVNC}});initialize();var _statusVariables=[{"name":"status","title":"Status","get":function(){return Thinfinity.Communication.state.getKey(_comm.state)},
"index":10},{"name":"protocol","title":"Protocol","get":function(){return Thinfinity.Communication.protocol.getKey(_comm.protocol)},"index":15},{"name":"forceAjax","title":"ForceAjax","get":function(){return TVNC&&TVNC.rcParams?TVNC.rcParams.forceAjax:"undefined"},"index":20},{"name":"h264","title":"Running H264","get":function(){return TVNC.H264},"index":30},{"name":"GFX","title":"Running GFX","get":function(){return TVNC.GFX},"index":30},{"name":"localServer","title":"LocalServer","get":function(){return Thinfinity&&
Thinfinity.VirtualChannels?Thinfinity.VirtualChannels.localServer:"undefined"},"index":45},{"name":"useAjax","title":"UseAjax","get":function(){return TVNC&&TVNC.observable?TVNC.observable.useAjax:"undefined"},"index":25},{"name":"resolution","title":"Resolution","get":function(){return TVNC&&TVNC.rcParams?TVNC.rcParams.resolution:"undefined"},"index":37},{"name":"soundStatus","title":"Sound Status","get":function(){if(TVNC&&TVNC.sound){var ctxAudio=TVNC.sound.audioContext||TVNC.sound.audioMozAudio;
if(ctxAudio&&ctxAudio.state)return ctxAudio.state}else return"undefined"},"index":41},{"name":"soundLastUpdate","title":"Sound Last Update","get":function(){return TVNC&&TVNC.sound?TVNC.sound.audioLastTicksUpdate:"undefined"},"index":42}];if(_ePictureType===_enumPictureType.H264)_statusVariables.push({"name":"decoder","title":"Decoder","get":function(){return _displayManager?_displayManager.decoderType:"undefined"},"index":31});try{window.dispatchEvent(new CustomEvent("addStatusAPIVariables",{"detail":_statusVariables}))}catch(error){}};
window.hasFocus=function(){if(productId=="ZSC"){var isIE11=agentInfo.isMSIE&&agentInfo.msieVersion<=11;if(isIE11)return document.hasFocus()&&document.body.contains(document.activeElement)&&document.activeElement.nodeName!="IFRAME";return document.hasFocus()&&document.contains(document.activeElement)&&document.activeElement.nodeName!="IFRAME"}else return document.hasFocus()}(function(){var method;var noop=function(){};var methods=["assert","clear","count","debug","dir","dirxml","error","exception",
"group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"];var length=methods.length;var console=window.console=window.console||{};while(length--){method=methods[length];if(typeof console[method]=="undefined")console[method]=noop}}());
(function(){function ThinZS(serverUrl,runOptions){var _thinzs=null;function initialize(){var msg=null;if(typeof serverUrl=="undefined")serverUrl="";if(runOptions==null||typeof runOptions==="undefined"){helper.console.log(helper.string.format("Cannot initialize 'ThinZS' class, arguments is null or undefined."),arguments);runOptions={};runOptions.mode=ThinZS.mode.API}var dType=helper.object.getDataTypeOf(runOptions);if(dType!=="json"){msg=helper.string.format("Mismatch version, cannot initialize ThinZS, find: '{0}' where JSON is expected.",
dType);helper.console.warning(msg,arguments);throw new Error(msg);}if(runOptions.oturl&&runOptions.oturl!="")runOptions.mode=ThinZS.mode.OTURL;if(typeof runOptions.mode==="undefined")runOptions.mode=ThinZS.mode.SDK;if(runOptions.mode!==ThinZS.mode.API){if(!runOptions.sourceWindow||runOptions.sourceWindow==="")runOptions.sourceWindow=window.name!=""?window.name:window.id!=""?window.id:window;if(!runOptions.targetWindow||runOptions.targetWindow==="")runOptions.targetWindow=null;var pk=helper.object.getValue(runOptions,
"profileKey",null);var ad=helper.object.getValue(runOptions,"profile.general.address",null);if(runOptions.mode===ThinZS.mode.SDK&&!pk&&!ad){msg=helper.string.format("Cannot initialize ThinZS, profileKey or custom profile are undefined or null","");helper.console.warning(msg,arguments);throw new Error(msg);}else if(runOptions.mode===ThinZS.mode.SKEY&&!runOptions.sessionKey&&runOptions.sessionKey==""){msg=helper.string.format("Cannot initialize ThinZS, sessionKey is missing","");helper.console.warning(msg,
arguments);throw new Error(msg);}runOptions.fullscreen=helper.object.convertTo(runOptions.fullscreen||false,"boolean")}if(runOptions.mode===ThinZS.mode.HOST)ThinZSCore.prototype=new ThinVNC;_thinzs=new ThinZSCore(serverUrl,runOptions);return _thinzs}function ThinZSCore(){this.baseUrl=typeof serverUrl!="undefined"?serverUrl:"";_runRemote=[ThinZS.mode.SDK,ThinZS.mode.OTURL].indexOf(runOptions.mode)!=-1;var _isReconnection=false;if(this.baseUrl.charAt(this.baseUrl.length-1)!="/")this.baseUrl+="/";this.currentMacro=
null;if(this.__proto__==null)this.__proto__=Object.getPrototypeOf(this);var _JsROName=null;var _lastCursorPosition=null;var _services=null;var _autoBlocker=null;ThinZSCore.prototype.setCookie=function(data,path){if(data&&data.SID){var expDate=new Date;expDate.setDate(expDate.getDate()+365);document.cookie=helper.string.format(cookiePrefix+"_SID={0}; expires={1}; path={2}",data.SID,expDate.toString(),path||"/")}};ThinZSCore.prototype.translateMouseCoordX=function(x){if(helper.object.existsPath(THIN,
"terminal.display._window")){var wd=THIN.terminal.display._window;if(wd.colWidth==0||wd.rowHeight==0)return x;x=Math.floor(x/wd.colWidth);return x}else return 0};ThinZSCore.prototype.translateMouseCoordY=function(y){if(helper.object.existsPath(THIN,"terminal.display._window")){var wd=THIN.terminal.display._window;if(wd.colWidth==0||wd.rowHeight==0)return y;y=Math.floor(y/wd.rowHeight);return y}else return 0};ThinZSCore.prototype.stopCheckingConnectionLost=function(obj){return(THIN.rcParams.forceAjax||
THIN.useAjax)&&helper.object.existsPath(obj,"cmd")};this.fontFamily="zscope";this.clearParams=function(){var auxEvents=null;if(typeof this.zsParams!="undefined")auxEvents=this.zsParams.events;this.zsParams={newWindow:false,baseUrl:this.baseUrl,userid:"",password:"",proto:"",host:"",port:23,deviceName:"",hotspots:null,keypads:null,credentials:"",sshUsername:"",sshPassword:"",startprg:0,command:"",cmdargs:"",directory:"",profileKey:null,overrideDefaults:false,width:$(window).width(),height:$(window).height(),
bpp:16,console:false,experience:{desktopbackground:false,visualstyles:false,menuwindowanimation:false,fontsmoothing:false,desktopcomposition:false,showwindowcontent:false},relativeTouch:true,unicodekeyboard:true,scaled:true,centered:true,centeredMode:"horizontal",clientAck:0,divId:"zsdiv",maxWidth:0,maxHeight:0,hookMouse:true,hookKeyboard:true,printer:{enabled:false,setasdefault:true,name:null,driver:null},imagequality:0,parentSessionId:null,events:auxEvents?auxEvents:{"onKeypadsReceived":null,"onMacroStop":null,
"onMacroPlay":null,"onMacroStateChanged":null,"onMacroGet":null,"onMacrosReceived":null,"onUpdateKeypads":null,"onScreenChanged":null,"onTerminalClosed":null,"onTerminalReady":null,"onSoundAlarm":null,"onPrinterStartupInfo":null,"onAutoSuggestion":null,"onTerminalConnected":null,"onTerminalDisconnected":null,"onTerminalConnectFailed":null,"onServerConnect":null,"onServerConnectionError":null,"onServerError":null,"onServerDisconnect":null,"onSessionStart":null,"onSessionEnd":null,"onFileListResult":null,
"onFileRemoveResult":null,"onHistoryListResult":null,"onHistoryClearResult":null,"onTransferAddResult":null,"onTransferRemoveResult":null,"onTransferUpdateResult":null,"onTransferListResult":null,"onMacroRemoveResult":null,"onMacroRenameResult":null,"onSessionListUpdated":null,"onTerminalProfileReceived":null,"onTerminalLocked":null,"onTerminalUnlocked":null,"onSessionTimeout":null,"onLicenseMsg":null}}};this.clearParams();if(typeof this.rcParams!="undefined")this.rcParams.useDblClick=true;this.username=
null;this.password=null;this.sessionTimer=null;this.locked=false;this.macroState=0;this.setFocus=true;this.permissions={macros:true,keypads:true,fileTransfer:true,printScreen:true,settings:true,analytics:2};this.toDataURLSupports=true;this.setParamEvents=function(eventList){for(var e in eventList)this.zsParams.events[e]=eventList[e]};this.getFontSize=function(context,cmd){var n=.2;context.font=Math.floor(cmd.fh*n)+"px "+THIN.fontFamily;var mw=context.measureText(cmd.text).width;var ow=mw;var ml=cmd.fw*
cmd.text.length;while(mw>ml&&n>.7){n-=.01;context.font=Math.floor(cmd.fh*n)+"px "+THIN.fontFamily;mw=context.measureText(cmd.text).width}return Math.floor(cmd.fh*n)};this.putFixedFontText=function(cmd,win,context){var wd=THIN.terminal.display._window;cmd.text=base64.decode(cmd.text),idx=0,ch=0;if(cmd.bcx==0||cmd.bcy==0||cmd.text=="")return;context.fillStyle=THIN.toRGB(cmd.bc);context.fillRect(cmd.bx,cmd.by,cmd.bcx,cmd.bcy);context.font=THIN.getFontSize(context,cmd)+"px "+THIN.fontFamily;context.fillStyle=
THIN.toRGB(cmd.fc);context.textBaseline="top";var dy=0;if(agentInfo.isSafari||agentInfo.isOpera)dy=Math.floor(cmd.fh*.2);for(var x=0;x<cmd.text.length;x++)context.fillText(cmd.text.charAt(x),cmd.x+x*cmd.fw,cmd.y-dy)};this.adjustFontHeight=function(wd){var ch=String.fromCharCode(9608);var auxCanvas=document.createElement("canvas");auxCanvas.width=wd.colWidth;auxCanvas.height=wd.rowHeight*2;var auxContext=auxCanvas.getContext("2d",{willReadFrequently:true});var n=0;var tryAnother=true;var lookForCero=
true;while(tryAnother){auxContext.font=wd.rowHeight-n+"px "+THIN.fontFamily;auxContext.textBaseline="top";auxContext.fillStyle="black";auxContext.fillRect(0,0,auxCanvas.width,auxCanvas.height);auxContext.fillStyle="white";auxContext.fillText(ch,0,Math.floor(wd.rowHeight/2));var auxImageData=auxContext.getImageData(0,0,auxCanvas.width,auxCanvas.height,{willReadFrequently:true});var auxData=auxImageData.data;for(var top=0;top<wd.rowHeight*2;top++){var pixel=auxData[top*auxCanvas.width*4+Math.floor(auxCanvas.width/
2)*4];if(pixel!=0)break}for(var bottom=top;bottom<wd.rowHeight*2;bottom++){var pixel=auxData[bottom*auxCanvas.width*4+Math.floor(auxCanvas.width/2)*4];if(pixel==0)break}tryAnother=bottom-top>wd.rowHeight;if(tryAnother)n++}wd.fontHeight=wd.rowHeight-n+(THIN.fontFamily=="zscope"?2:-2);wd.font=wd.fontHeight+"px "+THIN.fontFamily;wd.deltaBaseLine=Math.floor(wd.rowHeight/2)-top-1};this.adjustFontWidth=function(wd){var auxCanvas=document.createElement("canvas");auxCanvas.width=wd.colWidth;auxCanvas.height=
wd.rowHeight;var auxContext=auxCanvas.getContext("2d");auxContext.font=wd.font;var n=1;var testText="WWWW";var mt=auxContext.measureText(testText);var ow=mt.width;var ml=wd.colWidth*testText.length;while(mt.width>ml&&n>.7){n-=.01;auxContext.font=Math.floor(wd.fontHeight*n)+"px "+THIN.fontFamily;mt=auxContext.measureText(testText)}n+=.01;wd.font=Math.floor(wd.fontHeight*n)+"px "+THIN.fontFamily};this.setDisplaySize=function(cmd,win,context){var wd=THIN.terminal.display._window;wd.rowCount=cmd.rc;wd.colCount=
cmd.cc;wd.statusbarHeight=Math.floor(THIN.zsParams.height/26);wd.rowHeight=Math.floor((THIN.zsParams.height-wd.statusbarHeight)/wd.rowCount);wd.colWidth=Math.floor(THIN.zsParams.width/wd.colCount);wd.statusbarTop=THIN.zsParams.height-wd.statusbarHeight;wd.fontHeight=wd.rowHeight;wd.font=wd.fontHeight+"px "+THIN.fontFamily;THIN.adjustFontHeight(wd);if(!THIN.HasShrinkSupport())THIN.adjustFontWidth(wd)};this.HasShrinkSupport=function(){return this.lastPaintedColumn(100)>this.lastPaintedColumn(50)};this.lastPaintedColumn=
function(w){var ch=String.fromCharCode(9608);var auxCanvas=document.createElement("canvas");auxCanvas.width=100;auxCanvas.height=100;var auxContext=auxCanvas.getContext("2d",{willReadFrequently:true});auxContext.font="100px "+THIN.fontFamily;auxContext.textBaseline="top";auxContext.fillStyle="black";auxContext.fillRect(0,0,auxCanvas.width,auxCanvas.height);auxContext.fillStyle="white";auxContext.fillText(ch,0,0,w);var auxImageData=auxContext.getImageData(0,0,auxCanvas.width,auxCanvas.height,{willReadFrequently:true});
var auxData=auxImageData.data;var x=auxCanvas.width;while(x>0&&this.pixelValue(auxData,auxCanvas.width,50,x)<=255)x--;auxCanvas=null;return x};this.pixelValue=function(auxData,w,y,x){var mw=(w*y+x)*4;return auxData[mw-1]+255*auxData[mw-2]+255*255*auxData[mw-3]+255*255*255*auxData[mw-4]};this.putFixedFontText2=function(cmd,win,context){var wd=THIN.terminal.display._window;var idx=0,ch=0;cmd.text=base64.decode(cmd.text);if(wd.colWidth==0||wd.rowHeight==0)return;var col=cmd.col;var row=cmd.row;var x=
col*wd.colWidth;var y=row*wd.rowHeight;var cx=wd.colWidth*cmd.text.length;var cy=wd.rowHeight;if(cx==0||cy==0||cmd.text=="")return;var colWidth=wd.colWidth;if(row>=wd.rowCount){y=wd.statusbarTop+2;context.font=Math.floor(wd.statusbarHeight/1.5)+"px "+THIN.fontFamily;colWidth=Math.floor(context.measureText(cmd.text).width/cmd.text.length);x=col*colWidth;cx=colWidth*cmd.text.length}else context.font=wd.font;context.save();try{context.beginPath();context.rect(x,y,cx,cy);context.textBaseline="top";if(agentInfo.isMobile==
true&&agentInfo.isFirefox==true&&agentInfo.firefoxVersion<45)for(var i=0;i<cmd.text.length;i++){context.fillStyle=THIN.toRGB(cmd.bc);context.fillRect(x,y,colWidth,wd.rowHeight);context.fillStyle=THIN.toRGB(cmd.fc);context.fillText(cmd.text.charAt(i),x+i*colWidth,y+wd.deltaBaseLine,colWidth)}else{context.fillStyle=THIN.toRGB(cmd.bc);context.fillRect(x,y,cx,cy);context.fillStyle=THIN.toRGB(cmd.fc);for(var i=0;i<cmd.text.length;i++)context.fillText(cmd.text.charAt(i),x+i*colWidth,y+wd.deltaBaseLine,
colWidth)}}finally{context.restore()}};this.drawDrawEdge=function(cmd,win,context){return THIN.drawCmdDrawEdge(cmd,context)};this.drawDrawEdge2=function(cmd,win,context){var wd=THIN.terminal.display._window;cmd.x=cmd.col*wd.colWidth+cmd.dl;cmd.y=cmd.row*wd.rowHeight+cmd.dt;cmd.w=cmd.cx*wd.colWidth+cmd.dr-cmd.dl;cmd.h=cmd.cy*wd.rowHeight+cmd.db-cmd.dt;return THIN.drawCmdDrawEdge(cmd,context)};this.drawFillRect=function(cmd,win,context){return THIN.drawCmdFillRect(cmd,context)};this.drawFillRect2=function(cmd,
win,context){var wd=THIN.terminal.display._window;if(wd.colWidth==0||wd.rowHeight==0)return;cmd.x=cmd.col*wd.colWidth+cmd.dl;cmd.y=cmd.row*wd.rowHeight+cmd.dt;cmd.w=cmd.cx*wd.colWidth+cmd.dr-cmd.dl;cmd.h=cmd.cy*wd.rowHeight+cmd.db-cmd.dt;if(cmd.row==wd.rowCount&&cmd.dt>=0||cmd.row>wd.rowCount){if(cmd.col>wd.colCount)return;var colWidth=wd.colWidth;cmd.y=wd.statusbarTop+2;if(cmd.cy==0)cmd.cy=1;if(cmd.row>wd.rowCount)cmd.h=cmd.cy*wd.statusbarHeight;else cmd.h=cmd.cy*wd.rowHeight;context.font=Math.floor(wd.statusbarHeight/
1.5)+"px "+THIN.fontFamily;colWidth=Math.floor(context.measureText("WWWW").width/4);if(cmd.col+cmd.cx>=wd.colCount||cmd.x+cmd.w>=THIN.zsParams.width){cmd.x=cmd.col*colWidth;cmd.w=THIN.zsParams.width-cmd.x}else{cmd.x=cmd.col*colWidth;cmd.w=cmd.cx*colWidth}}if(typeof keyboardHelper!="undefined"&&keyboardHelper!=null&&cmd.c=="ZFR2"&&cmd.pm==14)_lastCursorPosition=cmd;return THIN.drawCmdFillRect(cmd,context)};this.getLastCursorPosition=function(){return _lastCursorPosition};this.drawLineTo=function(cmd,
win,context){return THIN.drawCmdLineTo(cmd,context)};this.drawLineTo2=function(cmd,win,context){var wd=THIN.terminal.display._window;if(wd.colWidth==0||wd.rowHeight==0)return;cmd.x=cmd.col*wd.colWidth+cmd.dl;cmd.y=cmd.row*wd.rowHeight+cmd.dt;cmd.ex=cmd.x+cmd.cx*wd.colWidth+cmd.dr-cmd.dl;cmd.ey=cmd.y+cmd.cy*wd.rowHeight+cmd.db-cmd.dt;if(cmd.pm==3)cmd.o=6;else if(cmd.pm==14)cmd.o=7;else cmd.o=0;return THIN.drawCmdLineTo(cmd,context)};this.drawScreenBlt=function(cmd,win,context){return THIN.drawCmdScreenBlt(cmd,
null,context)};this.drawScreenBlt2=function(cmd,win,context){var wd=THIN.terminal.display._window;if(wd.colWidth==0||wd.rowHeight==0)return;cmd.x=cmd.col*wd.colWidth;cmd.y=cmd.row*wd.rowHeight;cmd.cx=cmd.x+cmd.cx*wd.colWidth;cmd.cy=cmd.y+cmd.cy*wd.rowHeight;cmd.sx=cmd.sx*wd.colWidth;cmd.sy=cmd.sy*wd.rowHeight;var mx=wd.colCount*wd.colWidth;var my=wd.rowCount*wd.rowHeight;if(cmd.x+cmd.cx>mx)cmd.cx=mx-cmd.x;if(cmd.y+cmd.cy>my)cmd.cy=my-cmd.y;return THIN.drawCmdScreenBlt(cmd,null,context)};this.transferEvent=
function(cmd,win,context){if(fileTransferQueue&&fileTransferQueue.events)fileTransferQueue.events.onTransferUpdateResult(cmd,THIN.zsParams.events.onTransferUpdateResult);else $(window).trigger("onTransferUpdateResult",cmd)};this.terminalEvent=function(cmd,win,context){if(cmd.code==1){thinZS.terminal.isConnected=true;thinZS.terminal.status=ThinZS.status.CONNECTED;if(THIN.zsParams.events.onTerminalConnected)THIN.zsParams.events.onTerminalConnected(cmd);else $(window).trigger("terminalConnected",cmd)}if(cmd.code==
2){thinZS.terminal.isConnected=false;thinZS.terminal.status=ThinZS.status.DISCONNECTED;if(THIN.zsParams.events.onTerminalDisconnected)THIN.zsParams.events.onTerminalDisconnected(cmd);else $(window).trigger("terminalDisconnected",cmd)}if(cmd.code==3){thinZS.terminal.isConnected=false;thinZS.terminal.status=ThinZS.status.FAILED;if(THIN.zsParams.events.onTerminalConnectFailed)THIN.zsParams.events.onTerminalConnectFailed(cmd);else $(window).trigger("terminalConnectFailed",cmd)}};this.execHotspot=function(cmd,
win,context){cmd.fn=window.atob(cmd.fn);cmd.fa=window.atob(cmd.fa);if(cmd.fn.toLowerCase()=="openurl"){var re=new RegExp("http[s]{0,1}://","i");var rp=re.exec(cmd.fa);if(rp==null)cmd.fa="http://"+cmd.fa;top.window.open(cmd.fa)}};this.sshBannerText=function(cmd,win,context){try{ssh.events.onSshBannerText(cmd)}catch(e){$(window).trigger("sshBannerText",cmd)}};this.sshAuthKeyboard=function(cmd,win,context){try{ssh.events.onSshAuthKeyboard(cmd)}catch(e){$(window).trigger("sshAuthKeyboard",cmd)}};this.sshAuthLogin=
function(cmd,win,context){cmd.sshUsername=THIN.zsParams.sshUsername;cmd.sshPassword=THIN.zsParams.sshPassword;try{ssh.events.onSshAuthLogin(cmd)}catch(e){$(window).trigger("sshAuthLogin",cmd)}};this.getLoginMethods=function(success,fail){var result=false;var curdate=new Date;var curtime=curdate.getFullYear()+"- "+curdate.getMonth()+"- "+curdate.getDate()+"- "+curdate.getHours()+"- "+curdate.getMinutes()+"- "+curdate.getSeconds()+"- "+curdate.getMilliseconds();var querystr="getLoginMethods?&t="+curtime;
$.ajax({url:this.baseUrl+querystr,async:true,cache:false,dataType:"html",error:function(jqXHR,err){result=false;fail()},success:function(data){var obj=typeof data!="object"?JSON.parse(data):data;success(obj)}});return result};this.terminalReady=function(cmd,win,context){if(THIN.zsParams.events.onTerminalReady)THIN.zsParams.events.onTerminalReady(cmd);else $(window).trigger("terminalReady",cmd)};this.soundAlarm=function(cmd,win,context){if(THIN.zsParams.events.onSoundAlarm)THIN.zsParams.events.onSoundAlarm(cmd);
else $(window).trigger("soundAlarm",cmd)};this.screenChanged=function(cmd,win,context){var disp=getDisplay();if(disp){disp._screenChanged(cmd.pathid,cmd.num,cmd.id,cmd.name,cmd.locked,cmd.state,cmd.screen,cmd.last);if(THIN.zsParams.events.onScreenChanged)THIN.zsParams.events.onScreenChanged(cmd.pathid,cmd.num,cmd.id,cmd.name,cmd.locked,cmd.state,cmd.screen,cmd.last);else $(window).trigger("screenChanged",[cmd.pathid,cmd.num,cmd.id,cmd.name,cmd.locked,cmd.state,cmd.screen,cmd.last])}else;};this.printDocument=
function(cmd,win,context){helper.console.log("\r\n\r\n");if(cmd.a===0)helper.console.log("Printing document "+cmd.n);else if(cmd.a!==2)helper.console.log("Printing in progress (data received)...");else helper.console.log("The document "+cmd.n+" was printed");var descA="Unknown";if(cmd.a==0)descA="BeginDoc";else if(cmd.a==1)descA="Receiving";else if(cmd.a==2)descA="EndDoc";var descT="Unknown";if(cmd.t==1)descT="Text";else if(cmd.t==2)descT="Stream";else if(cmd.t==3)descT="Pdf";helper.console.log("cmd.a = Action: "+
cmd.a+" ("+descA+")");helper.console.log("cmd.n = DocName: "+cmd.n);helper.console.log("cmd.t = DocType: "+cmd.t+" ("+descT+")");helper.console.log("cmd.e = Error: "+cmd.e);helper.console.log("cmd.l = Length: "+cmd.l+" bytes");if(cmd.a===2)if(cmd.t==1)helper.console.log("cmd.d = Texto:\r\n\r\n"+cmd.d+"\r\n\r\n");else helper.console.log("cmd.d = Binary file");cmd.action=descA;cmd.docType=descT;if(THIN.zsParams.events.onPrintDocument){cmd.hwnd=win.hwnd;THIN.zsParams.events.onPrintDocument(cmd)}else $(window).trigger("printDocument",
cmd)};this.printerStartupInfo=function(cmd,win,context){if(THIN.zsParams.events.onPrinterStartupInfo)THIN.zsParams.events.onPrinterStartupInfo(cmd);else $(window).trigger("onPrinterStartupInfo",cmd)};this.autoSuggestion=function(cmd,win,context){if(THIN.zsParams.events.onAutoSuggestion)THIN.zsParams.events.onAutoSuggestion(cmd);else $(window).trigger("onAutoSuggestion",cmd);if(cmd.show){var wd=THIN.terminal.display._window;cmd.x=cmd.col*wd.colWidth;cmd.y=cmd.row*wd.rowHeight;cmd.cx=cmd.len*wd.colWidth}var autoSgt=
THIN.terminal.autoSuggestion;if(autoSgt)autoSgt.set(cmd,win,context)};if(!_runRemote){this.registerDrawCmd("ZTX",this.putFixedFontText);this.registerDrawCmd("ZTX2",this.putFixedFontText2);this.registerDrawCmd("ZHP",this.execHotspot);this.registerDrawCmd("ZDE",this.drawDrawEdge);this.registerDrawCmd("ZDE2",this.drawDrawEdge2);this.registerDrawCmd("ZFR",this.drawFillRect);this.registerDrawCmd("ZFR2",this.drawFillRect2);this.registerDrawCmd("ZLI",this.drawLineTo);this.registerDrawCmd("ZLI2",this.drawLineTo2);
this.registerDrawCmd("ZSB",this.drawScreenBlt);this.registerDrawCmd("ZSB2",this.drawScreenBlt2);this.registerDrawCmd("ZDS",this.setDisplaySize);this.registerDrawCmd("ZTE",this.transferEvent);this.registerDrawCmd("ZTN",this.terminalEvent);this.registerDrawCmd("ZBT",this.sshBannerText);this.registerDrawCmd("ZAK",this.sshAuthKeyboard);this.registerDrawCmd("ZAL",this.sshAuthLogin);this.registerDrawCmd("ZTR",this.terminalReady);this.registerDrawCmd("ZSC",this.screenChanged);this.registerDrawCmd("ZSA",
this.soundAlarm);this.registerDrawCmd("ZPD",this.printDocument);this.registerDrawCmd("ZSI",this.printerStartupInfo);this.registerDrawCmd("ZAS",this.autoSuggestion)}this.encryptedLogin=function(credentials,success,fail){var result=false;this.credentials=credentials;$.ajax({url:this.baseUrl+"login?credentials="+encodeURIComponent(this.credentials),async:true,dataType:"html",error:function(jqXHR,err){result=false;fail()},success:function(data){var obj=eval("("+data+")");if(obj.rc==0){result=true;success()}else{result=
false;fail()}}});return result};this.login=function(username,password,context,success,fail){var result=false;var curdate=new Date;var curtime=curdate.getFullYear()+"- "+curdate.getMonth()+"- "+curdate.getDate()+"- "+curdate.getHours()+"- "+curdate.getMinutes()+"- "+curdate.getSeconds()+"- "+curdate.getMilliseconds();var querystr="login?username="+encodeURIComponent(username)+"&password="+encodeURIComponent(password)+"&t="+curtime;if(typeof context!="undefined")querystr=querystr+"&context="+context;
this.username=username;this.password=password;$.ajax({url:this.baseUrl+querystr,async:true,dataType:"html",error:function(jqXHR,err){result=false;fail()},success:function(data){var obj=eval("("+data+")");if(obj.rc==0){result=true;success()}else{result=false;fail()}}});return result};this.logout=function(success){var curdate=new Date;var curtime=curdate.getFullYear()+"- "+curdate.getMonth()+"- "+curdate.getDate()+"- "+curdate.getHours()+"- "+curdate.getMinutes()+"- "+curdate.getSeconds()+"- "+curdate.getMilliseconds();
$.ajax({url:this.baseUrl+"logout"+"?t="+curtime,async:false,dataType:"json",success:function(){if(success)success()}})};this.getProfiles=function(credentials,success){var result=null;$.ajax({url:this.baseUrl+(credentials==""?"zs/getprofiles":"zs/getprofiles?credentials="+encodeURIComponent(credentials)),async:true,dataType:"html",statusCode:{401:function(){result=null;this.profileList=result;success(result)},200:function(data){result=eval("("+data+")");this.profileList=result;success(result)}}});
this.profileList=result;return result};this.cmdProfile=function(url,success,error){var result=null;$.ajax({url:url,async:true,dataType:"html",error:function(jqXHR,err){if(error)error(err)},statusCode:{200:function(data){try{result=eval("("+data+")")}catch(errr){if(error)error("Invalid response");return}if(result.rc<0&&error)error(result.msg);if(result.rc>=0&&success)success(result)}}})};this.drawScreenShot=function(handle,idx,width,height,success){var screenCanvas=THIN.terminal.getCanvas();var scrshtCanvas=
document.createElement("canvas");var context=scrshtCanvas.getContext("2d");try{context.drawImage(screenCanvas,0,0,width,height);if(success)success(scrshtCanvas,idx)}catch(e){helper.console.log("drawScreenshot: "+e.message)}finally{screenCanvas=context=scrshtCanvas=null}};this.getScreenShot=function(handle,idx,width,height,success){if($("#zsdiv")[0].children.length>0){var canvas=THIN.terminal.getCanvas();if(this.toDataURLSupports&&canvas&&canvas.toDataURL){var curl=canvas.toDataURL("image/jpeg");if(curl!=
"data:,"){var img=new Image;img.width=width;img.height=height;img.onload=function(){success(img,idx)};img.onabort=function(){logDebug("Abort loading thumbnail for session handle "+handle);THIN.drawScreenShot(handle,idx,width,height,success)};img.onerror=function(){logDebug("Error loading thumbnail for session handle "+handle);THIN.drawScreenShot(handle,idx,width,height,success)};img.src=curl}else{THIN.toDataURLSupports=false;THIN.drawScreenShot(handle,idx,width,height,success)}}else{THIN.toDataURLSupports=
false;THIN.drawScreenShot(handle,idx,width,height,success)}}};this.getTerminalProfile=function(publickey,success,error){this.sendServerCmd("cmd","cmd=getTerminalProfile")};this.getKeypadList=function(){this.sendServerCmd("cmd","cmd=keypadList")};this.getMacroList=function(){this.sendServerCmd("cmd","cmd=macroList")};this.getTransferList=function(){this.sendServerCmd("cmd","cmd=transferList")};this.getHistoryList=function(){this.sendServerCmd("cmd","cmd=historyList")};this.historyClear=function(){this.sendServerCmd("cmd",
"cmd=historyClear")};this.getFileList=function(){this.sendServerCmd("cmd","cmd=fileList")};this.transferStart=function(id,toBlock){if(toBlock)this.terminal.blocked=true;this.sendServerCmd("cmd","cmd=transferStart&ftid="+id);return this.terminal.handle};this.transferAdd=function(obj){var json=encodeURIComponent(JSON.stringify(obj));this.sendServerCmd("cmd","cmd=transferAdd&data="+json)};this.transferUpdate=function(obj,id){var json=encodeURIComponent(JSON.stringify(obj));this.sendServerCmd("cmd","cmd=transferUpdate&ftid="+
id+"&data="+json)};this.transferRemove=function(id){this.sendServerCmd("cmd","cmd=transferRemove&ftid="+id)};this.transferCancel=function(id){this.sendServerCmd("cmd","cmd=transferCancel&ftid="+id)};this.fileRemove=function(id){this.sendServerCmd("cmd","cmd=fileRemove&ftid="+id)};this.setCursorInField=function(x,y){this.sendServerCmd("cmd","cmd=csrfld&x="+x+"&y="+y)};this.keypadExecute=function(keypad,button){this.sendServerCmd("cmd","cmd=keypadExecute&keypad="+encodeURIComponent(keypad)+"&button="+
encodeURIComponent(button))};this.macroRecordStart=function(){this.sendServerCmd("cmd","cmd=macroRecord")};this.macroRecordStop=function(macro){this.sendServerCmd("cmd","cmd=macroStop&macro="+encodeURIComponent(macro))};this.macroPlay=function(macro){this.sendServerCmd("cmd","cmd=macroGet&macro="+encodeURIComponent(macro))};this.macroRun=function(macro,script){this.currentMacro=macro;this.terminal.display.clearNavigationPath();this.terminal.display._isMacro=true;eval(script);if(this.terminal.protocol!=
"VT")this.terminal.display._followPath(this.terminal.display)};this.macroStop=function(){this.sendServerCmd("cmd","cmd=macroStop")};this.macroRename=function(macro,newMacro){this.sendServerCmd("cmd","cmd=macroRename&macro="+encodeURIComponent(macro)+"&newmacro="+encodeURIComponent(newMacro))};this.macroRemove=function(macro){this.sendServerCmd("cmd","cmd=macroRemove&macro="+encodeURIComponent(macro))};this.getScreenText=function(plain,extended,ondata){var ret={};var fmt=typeof plain!="undefined"&&
plain===true?"plain":"json";var ext=extended===true?true:false;var url="cmd?cmd=getScreen&fmt="+fmt+"&ext="+ext+"&id="+THIN.rcParams.id;$.ajax({url:THIN.getCrossDomainUrl(url),dataType:THIN.crossDomain()?"jsonp":"json",cache:false,success:function(obj){ondata(obj.screen)},error:function(){ondata({})}});return ret};this.toggleConnect=function(){this.sendServerCmd("cmd","cmd=toggleConnect")};this.terminal={handle:"",sessionId:"",profileId:"",protocol:"",address:"",name:"",isConnected:false,blocked:false,
container:null,publickey:null,urlKey:null,virtualPath:"",status:ThinZS.status.READY,display:new ThinZSDisplay(this),autoSuggestion:new ThinZSAutoSuggestion,keypads:null,macros:null,startMacro:null,screenStyle:null,virtualKeyboard:null,block:function(){blocked=true},unblock:function(){blocked=false},getCanvas:function(){if(typeof this.handle==="undefined"){var cnvs=thinZS.vncContainer.querySelectorAll("canvas");for(var i=0;i<cnvs.length;i++)if(cnvs[i].parentElement.style.display!=="none"){screenCanvas=
cnvs[i];break}}else{var screenCanvas=document.getElementById(productId+"_canvas_"+this.handle);if(screenCanvas!=null)if(screenCanvas.tagName!="CANVAS")screenCanvas=screenCanvas.getElementsByTagName("canvas")[0]}return screenCanvas},getContainer:function(){if(this.container!=null)return this.container;var canvas=this.getCanvas();if(canvas==null)return null;var elem=canvas.parentElement;while(elem.tagName=="DIV"&&elem.id!="emulcont")elem=elem.parentElement;return elem.tagName=="DIV"?elem:elem.firstChild},
setScreenStyle:function(style){if(typeof style=="object"&&style!=null){this.screenStyle=style;this.container=this.getContainer();if(this.container!=null){this.container.style.backgroundColor=style.backColor;var printIcon=document.getElementById("btnEmbeddedPrintStatus");if(printIcon){var rgbC=helper.color.toRGB(style.backColor);if((rgbC.r|rgbC.g|rgbC)>140)printIcon.style.color=style.borderColor}}else window.setTimeout(function(){thinZS.terminal.setScreenStyle(style)},100)}}};this.events={"onServerCommandResult":function(obj){if(obj.keypads)if(THIN.zsParams.events.onKeypadsReceived)THIN.zsParams.events.onKeypadsReceived(obj);
else $(window).trigger("keypadsReceived",obj);else if(obj.macros)if(THIN.zsParams.events.onMacrosReceived)THIN.zsParams.events.onMacrosReceived(obj);else $(window).trigger("macrosReceived",obj);else if(obj.cmd=="closeTerminal");else if(obj.cmd=="macroStop"){THIN.macroState=0;if(THIN.zsParams.events.onMacroStop)THIN.zsParams.events.onMacroStop(obj);else $(window).trigger("macroStop",obj)}else if(obj.cmd=="macroPlay")if(THIN.zsParams.events.onMacroPlay)THIN.zsParams.events.onMacroPlay(obj);else $(window).trigger("macroPlay",
obj);else if(obj.cmd=="macroGet"){if(THIN.zsParams.events.onMacroGet)THIN.zsParams.events.onMacroGet(obj);else $(window).trigger("macroGet",obj);if(obj.rc==0)THIN.macroRun(obj.macro,obj.script)}else if(obj.cmd=="getTerminalProfile")if(THIN.zsParams.events.onTerminalProfileReceived)THIN.zsParams.events.onTerminalProfileReceived(obj);else $(window).trigger("terminalProfileReceived",obj);else if(obj.cmd=="macroRemove")if(THIN.zsParams.events.onMacroRemoveResult)THIN.zsParams.events.onMacroRemoveResult(obj);
else $(window).trigger("onMacroRemoveResult",obj);else if(obj.cmd=="macroRename")if(THIN.zsParams.events.onMacroRenameResult)THIN.zsParams.events.onMacroRenameResult(obj);else $(window).trigger("onMacroRenameResult",obj);else if(obj.cmd=="transferList")if(fileTransferQueue&&fileTransferQueue.events)fileTransferQueue.events.onTransferListResult(obj,THIN.zsParams.events.onTransferListResult);else $(window).trigger("onTransferListResult",obj);else if(obj.cmd=="transferRemove")if(fileTransferQueue&&fileTransferQueue.events)fileTransferQueue.events.onTransferRemoveResult(obj,
THIN.zsParams.events.onTransferRemoveResult);else $(window).trigger("onTransferRemoveResult",obj);else if(obj.cmd=="historyList")if(fileTransferQueue&&fileTransferQueue.events)fileTransferQueue.events.onHistoryListResult(obj,THIN.zsParams.events.onHistoryListResult);else $(window).trigger("onHistoryListResult",obj);else if(obj.cmd=="historyClear")if(fileTransferQueue&&fileTransferQueue.events)fileTransferQueue.events.onHistoryClearResult(obj,THIN.zsParams.events.onHistoryClearResult);else $(window).trigger("onHistoryClearResult",
obj);else if(obj.cmd=="fileList")if(fileTransferQueue&&fileTransferQueue.events)fileTransferQueue.events.onFileListResult(obj,THIN.zsParams.events.onFileListResult);else $(window).trigger("onFileListResult",obj);else if(obj.cmd=="fileRemove")if(fileTransferQueue&&fileTransferQueue.events)fileTransferQueue.events.onFileRemoveResult(obj,THIN.zsParams.events.onFileRemoveResult);else $(window).trigger("onFileRemoveResult",obj);else if(obj.cmd=="transferAdd")if(fileTransferQueue&&fileTransferQueue.events)fileTransferQueue.events.onTransferAddResult(obj,
THIN.zsParams.events.onTransferAddResult);else $(window).trigger("onTransferAddResult",obj);else if(obj.cmd=="transferUpdate")if(fileTransferQueue&&fileTransferQueue.events)fileTransferQueue.events.onTransferUpdateResult(obj,THIN.zsParams.events.onTransferUpdateResult);else $(window).trigger("onTransferUpdateResult",obj);else if(obj.cmd=="transferRemove")if(fileTransferQueue&&fileTransferQueue.events)fileTransferQueue.events.onTransferRemoveResult(obj,THIN.zsParams.events.onTransferRemoveResult);
else $(window).trigger("onTransferremoveResult",obj);else if(obj.cmd=="sessionStatus")if(typeof obj.screenStyle!="undefined")if(typeof thinZS.terminal!="undefined"&&thinZS.terminal!=null)thinZS.terminal.setScreenStyle(obj.screenStyle)},"onScreenReceived":function(obj){if(obj.flags){var term=THIN.terminal;if(obj.flags.charAt(0)=="1"&&(term&&!term.isConnected)){term.isConnected=true;if(THIN.zsParams.events.onTerminalConnected)THIN.zsParams.events.onTerminalConnected(obj);else $(window).trigger("terminalConnected",
obj)}else if(obj.flags.charAt(0)=="0"&&(term&&term.isConnected)){term.isConnected=false;if(THIN.zsParams.events.onTerminalDisconnected)THIN.zsParams.events.onTerminalDisconnected(obj);else $(window).trigger("terminalDisconnected",obj)}if(obj.flags.charAt(1)=="1"&&!THIN.locked){THIN.locked=true;if(THIN.zsParams.events.onTerminalLocked)THIN.zsParams.events.onTerminalLocked(obj);else $(window).trigger("terminalLocked",obj)}else if(obj.flags.charAt(1)=="0"&&THIN.locked){THIN.locked=false;if(THIN.zsParams.events.onTerminalUnlocked)THIN.zsParams.events.onTerminalUnlocked(obj);
else $(window).trigger("terminalUnlocked",obj)}var c2=obj.flags.charAt(2);if(c2>="0"&&c2<="2"&&THIN.macroState!=parseInt(c2,10)){THIN.macroState=parseInt(c2,10);if(THIN.zsParams.events.onMacroStateChanged)THIN.zsParams.events.onMacroStateChanged();else $(window).trigger("macroStateChanged",obj)}else;}},"onServerConnecting":function(status){if(THIN.zsParams.events.onServerConnecting)THIN.zsParams.events.onServerConnecting(status);else $(window).trigger("serverConnecting")},"onServerConnect":function(obj){THIN.initializeJsRO();
if(THIN.zsParams.events.onServerConnect)THIN.zsParams.events.onServerConnect(obj);else $(window).trigger("serverConnect")},"onServerError":function(obj){if(THIN.zsParams.events.onServerError)THIN.zsParams.events.onServerError(obj);else $(window).trigger("serverError")},"onServerReconnect":function(e){_isReconnection=true},"onConnectionKindChange":function(e){helper.console.log("onConnectionKindChange");if(_isReconnection==true)_isReconnection=false},"onServerConnectionError":function(errMessage){if(THIN.zsParams.events.onServerConnectionError)THIN.zsParams.events.onServerConnectionError(errMessage);
else $(window).trigger("serverConnectionError",errMessage)},"onServerDisconnect":function(){if(THIN.zsParams.events.onServerDisconnect)THIN.zsParams.events.onServerDisconnect();else $(window).trigger("serverDisconnect");if(THIN.jsROApp&&helper.object.existsPath(window,"Thinfinity.JsROManager")){THIN.jsROApp.sendCommand({"cmd":"stopPolling"});THIN.jsROApp.dispose()}},"onSessionStart":function(obj){_isReconnection=false;if(!_autoBlocker&&Thinfinity.AutoBlocker){_autoBlocker=new Thinfinity.AutoBlocker;
thinZS.AutoBlocker=_autoBlocker;if(_autoBlocker){_autoBlocker.on("click",function(){if(!agentInfo.isMobile&&thinZS.inputAllowed())thinZS.setKeyboardFocus()});if(agentInfo.isMobile){thinZS.triggerCustomEvent("focus");thinZS.AutoBlocker.unblock()}_autoBlocker.set("canGetFocus",function(){return document.hasFocus()})}}helper.object.parseAttributes(THIN.terminal,obj);THIN.terminal.sessionId=obj.id;if(THIN.jsROApp){THIN.sendCmd("cmd=initJsRO");THIN.updateJsRO(obj.hllapiId,obj.hllapiId+" - "+obj.name)}if(obj.permissions)helper.object.parseAttributes(THIN.permissions,
obj.permissions);if(THIN.zsParams.events.onSessionStart)THIN.zsParams.events.onSessionStart(obj);else $(window).trigger("sessionStart",obj)},"onSessionEnd":function(message){if(THIN.zsParams.events.onSessionEnd)THIN.zsParams.events.onSessionEnd(message);else $(window).trigger("sessionEnd",message)},"onServerRedirect":function(url,obj){logDebug("redirecting to: "+url);if(url.lastIndexOf("/")!=url.length-1)url+="/";THIN.baseUrl=url;if(THIN.zsParams.events.onServerRedirect)THIN.zsParams.events.onServerRedirect(url,
obj);else $(window).trigger("serverRedirect",[url,obj])},onSessionTimeout:function(obj){if(THIN.zsParams.events.onSessionTimeout)THIN.zsParams.events.onSessionTimeout(obj);else $(window).trigger("onSessionTimeout",obj)},onLicenseMsg:function(obj){if(THIN.zsParams.events.onLicenseMsg)return THIN.zsParams.events.onLicenseMsg(obj)}};this.reconnect=function(params){var args="id="+params.id+"&handle="+params.handle;this.__proto__.init.call(this,{scraper:productId,scraperArgs:args,divId:"zsdiv"});this.__proto__.connect.call(this)};
this.connect=function(params){this.clearParams();for(var p in params)this.zsParams[p]=params[p];if(typeof window.customSettings!="undefined")[{binding:["noShowPopupsOnClose","noShowConnectionClosePopup"],to:"noShowConnectionClosePopup"},{binding:["noShowConnectionDisconnectPopup"],to:"noShowConnectionDisconnectPopup"}].forEach(item=>{item.binding.forEach(bind=>{if(customSettings.hasOwnProperty(bind))this.zsParams[item.to]=customSettings[bind]})});if(helper.object.existsPath(window,"customSettings.connParams"))helper.object.merge(customSettings.connParams,
this.zsParams,true);var iq=typeof this.zsParams.imagequality=="undefined"?1:parseInt(this.zsParams.imagequality,10);switch(iq){case 0:this.zsParams.imageMethod=1;break;case 1:this.zsParams.imageMethod=2;this.zsParams.quality=90;break;case 2:this.zsParams.imageMethod=2;this.zsParams.quality=60;break;case 3:this.zsParams.imageMethod=0;this.zsParams.quality=50;break}if(_runRemote){var form=this.getForm();this.zsParams.credentials=form.elements["credentials"].value;document.getElementById("ThinZSForm").elements["data"].value=
escape(JSON.stringify(this.zsParams));form.target=this.zsParams.newWindow?this.buildTargetName():"_self";form.action=this.baseUrl;form.submit()}else{this.setParams(this.zsParams,this.events);if(this.zsParams.logWindow){var scr=document.createElement("SCRIPT");scr.setAttribute("type","text/javascript");scr.setAttribute("src","js/msgLogger.js");document.getElementsByTagName("HEAD")[0].appendChild(scr)}if(this.__proto__==null)this.__proto__=Object.getPrototypeOf(this);this.__proto__.init.call(this,{scraper:productId,
scraperArgs:this.buildArgs(params)});this.__proto__.connect.call(this)}};this.callDisconnect=function(silent){if(silent===true)self.disconnect();else if(THIN.zsParams.events.onQueryDisconnect)THIN.zsParams.events.onQueryDisconnect();else $(window).trigger("queryDisconnect")};this.buildArgs=function(params){var args="";if(this.zsParams.profileKey&&this.zsParams.host=="")args+="profileKey="+this.zsParams.profileKey;else if(!this.zsParams.profileKey||this.zsParams.host)args="proto="+this.zsParams.proto+
"&host="+this.zsParams.host+"&port="+this.zsParams.port;args+="&ssl="+(this.zsParams.ssl?1:0);args+="&keepAlive="+(this.zsParams.keepAlive?1:0);args+="&extAttr="+(this.zsParams.extAttr?1:0);if(this.zsParams.displayOpt!="")if(this.zsParams.proto=="3270"){if(this.zsParams.displayOpt=="0")args+="&termType=IBM-3278-2"+(this.zsParams.extAttr?"-E":"");else if(this.zsParams.displayOpt=="1")args+="&termType=IBM-3278-3"+(this.zsParams.extAttr?"-E":"");else if(this.zsParams.displayOpt=="2")args+="&termType=IBM-3278-4"+
(this.zsParams.extAttr?"-E":"");if(this.zsParams.displayOpt=="3")args+="&termType=IBM-3278-5"+(this.zsParams.extAttr?"-E":"")}else if(this.zsParams.proto=="5250")if(this.zsParams.displayOpt=="0")args+="&termType="+(this.zsParams.extAttr?"IBM-3179-2":"IBM-5211-2");else args+="&termType="+(this.zsParams.extAttr?"IBM-3477-FC":"IBM-3477-FG");else if(this.zsParams.proto=="VT")args+="&termType=VT100";if(this.zsParams.deviceName!="")args+="&deviceName="+this.zsParams.deviceName;if(typeof this.zsParams.startMacro!=
"undefined"&&this.zsParams.startMacro!="")args+="&startMacro="+this.zsParams.startMacro;if(params.hotspots){var list="";var elem="";for(p in params.hotspots){elem=params.hotspots[p];if(elem.active){if(list!="")list+=",";list+=elem.id}}if(list!="")args+="&hotspots="+list}if(params.keypads){var list="";var elem="";for(p in params.keypads){elem=params.keypads[p];if(elem.active){if(list!="")list+=",";list+=elem.id}}if(list!="")args+="&keypads="+list}if(this.zsParams.keyboard&&this.zsParams.keyboard!=
"")args+="&keyboard="+this.zsParams.keyboard;if(this.zsParams.screenStyle&&this.zsParams.screenStyle!="")args+="&screenStyle="+this.zsParams.screenStyle;if(this.zsParams.vKeyb&&this.zsParams.vKeyb!="")args+="&vKeyb="+this.zsParams.vKeyb;if(typeof keyboardHelper!="undefined"&&keyboardHelper!=null){var w=0;var h=0;if(window.initialScreenSize!=undefined){w=window.initialScreenSize.width;h=window.initialScreenSize.height}else{w=window.environment.detectedWidth;h=window.environment.detectedHeight}args+=
"&browserWidth="+w+"&browserHeight="+h}else args+="&browserWidth="+$(window).width()+"&browserHeight="+$(window).height();args+="&terminalWidth="+this.zsParams.width+"&terminalHeight="+this.zsParams.height;if(this.zsParams.parentSessionId&&this.zsParams.parentSessionId!="")args+="&parentSessionId="+this.zsParams.parentSessionId;return args};this.getForm=function(){return document.getElementById("ThinZSForm")};this.buildTargetName=function(){var d=new Date;return"ZSCONN_"+(d.getFullYear()*1E4+d.getMonth()*
100+d.getDate()).toString(16).toUpperCase()+"_"+(d.getHours()*360+d.getMinutes()*60+d.getSeconds()).toString(16).toUpperCase()};this.buildForm=function(){var form=this.appendElement(document.body,"FORM","ThinZSForm",{method:"POST"});this.appendElement(form,"INPUT","credentials",{type:"HIDDEN",value:""});this.appendElement(form,"INPUT","data",{type:"HIDDEN",value:""})};this.appendElement=function(parentElem,type,name,attrColl){var elem=document.createElement(type);elem.setAttribute("name",name);elem.setAttribute("id",
name);for(var a in attrColl)elem.setAttribute(a,attrColl[a]);parentElem.appendChild(elem);return elem};this.updateProfile=function(conn,callback){if(!_services&&helper.object.existsPath(window,"Thinfinity.Services"))_services=new Thinfinity.Services({"baseUrl":document.baseURI,"productPrefix":productId});if(_services)if(helper.object.existsPath(THIN,"terminal.publickey")){var gp=null;_services.getProfile(THIN.terminal.publickey,productId,function(p){gp=helper.object.clone(p);p=helper.object.merge(conn,
p);_services.updateProfile(p,productId,function(err){if(callback)callback(p,err)},function(err){if(callback)callback(gp,err)})},function(err){if(callback)callback(null,err)})}};THIN=this;this.initializeJsRO=function(name,description){if(THIN.rcParams.isJsROEnabled&&helper.object.existsPath(window,"Thinfinity.JsRO")){helper.console.log("initializeJsRO: THIN.rcParams.isJsROEnabled -> "+THIN.rcParams.isJsROEnabled,arguments);if(_JsROName===null){var inputCallback=function(fn){THIN.registerOOBCmd("rapp",
function(obj){fn(obj)})};var outputCallback=function(cmd){THIN.sendCmd(cmd)};var _canGetFocus=false;THIN.jsROApp=new Thinfinity.JsRO({"name":name,"description":description,"mode":"HOST","output":outputCallback,"input":inputCallback,"clientSettings":THIN.rcParams,"events":{"connect":function(e){helper.console.log("initializeJsRO - host connected",arguments);if(_autoBlocker)_autoBlocker.hasFocus=function(){if(!window.hasFocus())return _canGetFocus;else return true}}},"customEvents":{"hsappmsg":function(e){if(THIN.hsAppManager)THIN.hsAppManager.appmsg(e.data);
if(e.data.close||!e.data.visible)if(!agentInfo.isMobile&&THIN.inputAllowed())thinZS.setKeyboardFocus()},"setFocus":function(e){},"synchronize":function(){THIN.sendCmd("cmd=sync")}}});_JsROName=name;if(helper.object.existsPath(window,"Thinfinity.JsROManager")){var jsROMngr=new Thinfinity.JsROManager;var remotes=jsROMngr.getRemoteCollection();if(remotes.length>1)THIN.jsROApp.sendCommand({"cmd":"startPolling"})}}else if(name!=_JsROName)helper.console.error("JsRO was previously initialized!")}};this.updateJsRO=
function(name,description){if(THIN.jsROApp){helper.console.log(helper.string.format("Update JsRO Host name - from: {0} to {1}, and description from: {2} to {3}",THIN.jsROApp.name,name,THIN.jsROApp.description,description),arguments);THIN.jsROApp.name=name;THIN.jsROApp.description=description;_JsROName=name}else helper.console.error("jsROApp is unavailable!")};if(_runRemote&&document.body)this.buildForm();return this}function ThinZSDisplay(owner){var _ref=this;var _owner=owner;function getDisplay(){var term=
_owner.terminal;if(term)return term.display;else return null}function macroExit(rc){var display=getDisplay();if(display!=null)display.clearNavigationPath();$(window).trigger("macroExit",rc)}this._isMacro=true;this._obj=new Array;this._window={statusbarHeight:0,statusbarTop:0,rowCount:0,colCount:0,rowHeight:0,colWidth:0,font:"",deltaBaseLine:0,fontHeight:0};this._jsResult=null;this._navigation=new Array;this._success=null;this._error=null;this._currentStep=null;this._currentScreen=null;this._screenChanged=
function(pathid,num,id,name,locked,state,screenData,lastScreen){_ref._currentScreen={"pathid":pathid,"num":num,"id":id,"name":name,"locked":locked,"screen":screenData,"lastScreen":lastScreen};if(!_ref._isMacro)_ref._followPath(_ref)};this._execScript=function(){var self=_ref;var str=JSON.stringify(_ref._obj);if(str=="[]")return;var json=encodeURIComponent(str);_ref._jsResult=null;_ref._obj=new Array;var url="cmd?cmd=macroRun&cmds="+json+"&id="+THIN.rcParams.id;var dt="html";var isIE9=agentInfo.isMSIE&&
agentInfo.msieVersion>=9;if(isIE9&&THIN.crossDomain())dt=THIN.getCrossDomainDataType();var params={url:url,dataType:dt,async:true,cache:false,timeout:9E4,error:function(jqXHR,err){if(_ref._error)_ref._error.call(_ref,err);else macroExit(3)},success:function(data){var obj=data;if(typeof data!="object")obj=eval("("+data+")");if(obj!=null){_ref._jsResult=obj.res;if(obj.rc!=0){logError(obj.err);if(_ref._error)_ref._error.call(_ref,obj.err);else macroExit(3);return}}else _ref._jsResult=null;if(_ref._success)_ref._success.call(_ref);
else _ref._followPath(_ref)}};$.ajax(THIN.completeAjaxParams(params))};this._addScriptCall=function(param,value1,value2){if(_ref.cursorPos!=-1)_ref._obj.push({p:"cp",v:_ref.cursorPos});_ref.cursorPos=-1;if(value1!=undefined)if(value2!=undefined)_ref._obj.push({p:param,v:value1,v2:value2});else _ref._obj.push({p:param,v:value1});else _ref._obj.push({p:param})};this._followPath=function(self){if(!_ref._isMacro&&self._currentScreen!=null&&self._currentScreen.locked)return;for(var n=0;n<_ref._navigation.length;n++){var obj=
_ref._navigation[n];var stop=false;if(obj.screenId!=null&&obj.screenId!=""){if(self._currentScreen==null)return;stop=obj.screenId==self._currentScreen.id}else stop=self._currentStep==obj.stepFrom;if(stop){self._currentStep=obj.stepTo;obj.stepTo.call(self);return}}if(self._obj.length>0)self._execScript();self._currentStep=null;macroExit(0)};this.cursorPos=-1;this.result=function(){return _ref._jsResult?_ref._jsResult:{}};this.type=function(keys,sendNow){_ref._addScriptCall("ty",keys);if(typeof sendNow!=
"undefined"&&sendNow===true){_ref._success=null;_ref._error=null;_ref._execScript()}};this.typeV=function(keys){_ref._addScriptCall("tyv",keys)};this.setField=function(field,value){_ref._addScriptCall("sf",field,value)};this.setFieldV=function(field,value){_ref._addScriptCall("sfv",field,value)};this.pressAndWait=function(aid,success,error){_ref._addScriptCall("paw",aid);_ref._success=success;_ref._execScript()};this.pressAndWaitV=function(aid,complete){_ref.clearNavigationPath();_ref._addScriptCall("pawv",
aid);_ref._success=function(){_ref.clearNavigationPath();if(typeof complete!="undefined")complete()};_ref._error=function(){_ref.clearNavigationPath()};_ref._execScript()};this.find=function(data,found){var str="";if(Object.prototype.toString.call(data)==="[object Array]")for(var i=0;i<data.length;i++)str+=data[i]+"^T^";else str=data;_ref.clearNavigationPath();_ref._addScriptCall("wf",str,10);_ref._success=function(){_ref.clearNavigationPath();var foundAt=_ref._jsResult?_ref._jsResult.foundAt:-1;
found(foundAt)};_ref._error=function(){_ref.clearNavigationPath();found(-1)};_ref._execScript()};this.waitForField=function(field,timeout){_ref._addScriptCall("wff",field,timeout)};this.waitForNewScreen=function(timeout,success,error){_ref._addScriptCall("wfns",timeout);_ref._success=success;_ref._error=error;_ref._execScript()};this.waitForPrompt=function(str,timeout,success,error){_ref._addScriptCall("wfp",str,timeout);_ref._success=success;_ref._error=error;_ref._execScript()};this.addNavigationPath=
function(obj,stepFrom,screenId,stepTo){_ref._navigation.push({macroName:THIN.currentMacro,macroObj:obj,stepFrom:stepFrom,screenId:screenId,stepTo:stepTo})};this.clearNavigationPath=function(){_ref._navigation=new Array;_ref._currentStep=null;_ref._jsResult=null;_ref._success=null;_ref._error=null;_ref._isMacro=true}}function ThinZSAutoSuggestion(){var _ref=this;var _box=null;var _hook=null;var _lastSelection=null;var _selectedField=null;var _registeredCmds={};var _c={};var _borders={"minItems":!agentInfo.isMobile?
3:2,"maxItems":!agentInfo.isMobile?6:4,"currentItems":0,"rowHeight":0};var _touch={"isDrag":false,"threshold":20,"position":{"x":0,"y":0},"selectedIdx":-1,"selectedOpt":false};function initialize(){if(_box==null){var disp=getDisplay();if(disp){registerCmd("clearNavigationPath",disp.clearNavigationPath);registerCmd("setField",disp.setField);registerCmd("execScript",disp._execScript)}_box=document.createElement("div");_box.className="autosuggestionbox autosuggestionboxcontrollerelement";zsdiv.appendChild(_box);
if(!agentInfo.isMobile){_hook=KBHook.prototype.getInstance();_hook.registerKey("keydown",{ctrlKey:false,altKey:false,shiftKey:false,keyCode:38},selectPrevField,true);_hook.registerKey("keypress",{ctrlKey:false,altKey:false,shiftKey:false,keyCode:38},doNothing,true);_hook.registerKey("keyup",{ctrlKey:false,altKey:false,shiftKey:false,keyCode:38},doNothing,true);_hook.registerKey("keydown",{ctrlKey:false,altKey:false,shiftKey:false,keyCode:40},selectNextField,true);_hook.registerKey("keypress",{ctrlKey:false,
altKey:false,shiftKey:false,keyCode:40},doNothing,true);_hook.registerKey("keyup",{ctrlKey:false,altKey:false,shiftKey:false,keyCode:40},doNothing,true);_hook.registerKey("keydown",{ctrlKey:false,altKey:false,shiftKey:false,keyCode:13},selectFieldAndClose,false);_hook.registerKey("keypress",{ctrlKey:false,altKey:false,shiftKey:false,keyCode:13},doNothing,false);_hook.registerKey("keyup",{ctrlKey:false,altKey:false,shiftKey:false,keyCode:13},doNothing,false);_hook.registerKey("keydown",{ctrlKey:false,
altKey:false,shiftKey:false,keyCode:27},releaseDialog,true);_hook.registerKey("keypress",{ctrlKey:false,altKey:false,shiftKey:false,keyCode:27},doNothing,true);_hook.registerKey("keyup",{ctrlKey:false,altKey:false,shiftKey:false,keyCode:27},doNothing,true);if(agentInfo.isFirefox)_hook.fswitchKbd=function(value){THIN.rcParams.active=value};_hook.initHook()}else if(agentInfo.isMobile&&helper.object.existsPath(window,"thinZS.drivers.keyboard"))thinZS.drivers.keyboard.on("BEFORESENDKEY",function(key,
evt){if(_box.style.display!="none"){if(evt!="touchstart")return false;if(key)switch(key.toUpperCase()){case "UP":selectPrevField();return false;case "DOWN":selectNextField();return false;case "ENTER":selectFieldAndClose();return false;case "ESC":case "HIDEKBD":releaseDialog();return false;default:return true}else return true}else return true})}}function setDialog(cmd,win,context){initialize();_c={"cmd":cmd,"win":win,"context":context};if(cmd.show)show();else hide()}function show(){if(_hook)_hook.activateHook();
for(var i=_box.childNodes.length-1;i>=0;i--)if(!agentInfo.isMobile){helper.dom.removeEvent(_box.childNodes[0],"onclick");helper.dom.removeEvent(_box.childNodes[0],"ondblclick")}else helper.dom.removeEvent(_box.childNodes[0],"ontouchstart");_box.innerHTML="";var selected=false;var len=_c.cmd.sl.length;var wd=THIN.terminal.display._window;_borders.rowHeight=wd.rowHeight;for(var f=0;f<len;f++){var opt=helper.dom.appendJsonElement({"parentElement":_box,"type":"div","attributes":{"classname":"autosuggestionboxcontrollerelement",
"style":"zIndex:9;height:"+wd.rowHeight+"px;"},"content":_c.cmd.sl[f].txt});opt.idx=f+1;var optionClick=function(e){e.stopPropagation();e.preventDefault();_selectedField.className="";_selectedField=e.srcElement;helper.style.add(_selectedField,"selected");_touch.selectedOpt=false;if(agentInfo.isMobile){_touch.position.x=(e.changedTouches||e.touches)[0].pageX;_touch.position.y=(e.changedTouches||e.touches)[0].pageY;if(_touch.selectedIdx!=-1&&_touch.selectedIdx==_selectedField.idx)_touch.selectedOpt=
true;else _touch.selectedIdx=_selectedField.idx}return false};var optionDblClick=function(e){e.stopPropagation();e.preventDefault();helper.console.log("double click");_selectedField.className="";_selectedField=e.srcElement;helper.style.add(_selectedField,"selected");selectFieldAndClose(e);if(!agentInfo.isMobile&&THIN.inputAllowed())thinZS.setKeyboardFocus();return false};var touchMove=function(e){e.preventDefault();e.stopPropagation();var y=(e.changedTouches||e.touches)[0].pageY;if(!_touch.isDrag){var x=
(e.changedTouches||e.touches)[0].pageX;if(Math.abs(y+_touch.position.y)>_touch.threshold)_touch.isDrag=true}else if(y-_touch.position.y>0){if(_touch.selectedIdx<_c.cmd.sl.length&&Math.abs(y-_touch.position.y)>_borders.rowHeight){_touch.position.y=y;_touch.selectedIdx++;selectNextField(e)}}else if(_touch.selectedIdx>0&&Math.abs(y-_touch.position.y)>_borders.rowHeight){_touch.position.y=y;_touch.selectedIdx--;selectPrevField(e)}};var touchEnd=function(e){e.preventDefault();e.stopPropagation();if(_touch.selectedOpt&&
_touch.selectedIdx!=-1&&_touch.selectedIdx==e.srcElement.idx){_touch.selectedOpt=false;_selectedField.className="";_selectedField=e.srcElement;helper.style.add(_selectedField,"selected");selectFieldAndClose(e)}_touch.isDrag=false};if(agentInfo.isMobile){helper.dom.addEvent(opt,"ontouchstart",optionClick);helper.dom.addEvent(opt,"ontouchmove",touchMove);helper.dom.addEvent(opt,"ontouchend",touchEnd)}else{helper.dom.addEvent(opt,"onclick",optionClick);helper.dom.addEvent(opt,"ondblclick",optionDblClick)}if(f==
0)_selectedField={"idx":0,"offsetTop":0,"className":"","nextSibling":opt};_touch.selectedIdx=-1}_c.cmd.x=(_c.cmd.col-1)*wd.colWidth;_c.cmd.y=_c.cmd.row*wd.rowHeight;var mi=0;if(wd.rowCount-(Math.min(len,_borders.maxItems)+_c.cmd.row)>=0)mi=Math.min(len,_borders.maxItems);else if(wd.rowCount-(Math.min(len,_borders.minItems)+_c.cmd.row)>=0)mi=Math.max(_borders.minItems,wd.rowCount-_c.cmd.row);else{mi=Math.min(len,_borders.maxItems);_c.cmd.y=(_c.cmd.row-(mi+1))*wd.rowHeight}_borders.currentItems=mi;
helper.style.add(_box,{"display":"block","left":_c.cmd.x+"px","top":_c.cmd.y+"px","width":_c.cmd.len*wd.colWidth+"px","maxHeight":mi*wd.rowHeight+"px","font":wd.font});selected=wd=len=null}function hide(){releaseDialog()}function doNothing(e){if(e&&e.keyCode==13){e.stopPropagation();e.preventDefault()}else return true}function fixScroll(direction){if(direction=="next"){if((_selectedField.offsetTop+_borders.rowHeight-_box.scrollTop)/_borders.rowHeight>_borders.currentItems)_box.scrollTop+=_borders.rowHeight}else if(direction==
"prev")if(_box.scrollTop!=0&&_selectedField.idx>0&&_box.scrollTop==_selectedField.offsetTop+_borders.rowHeight)_box.scrollTop-=_borders.rowHeight}function selectPrevField(e){if(_selectedField&&_selectedField.previousSibling){helper.style.remove(_selectedField,"selected");_selectedField=_selectedField.previousSibling;helper.style.add(_selectedField,"selected");fixScroll("prev")}}function selectNextField(e){if(_selectedField&&_selectedField.nextSibling){helper.style.remove(_selectedField,"selected");
_selectedField=_selectedField.nextSibling;helper.style.add(_selectedField,"selected");fixScroll("next")}}function selectField(e){if(e)if(e.keyCode==13&&typeof _selectedField.nodeType=="undefined"){releaseDialog(e);return true}else{e.stopPropagation();e.preventDefault()}if(_selectedField.nodeType){fireCmd("clearNavigationPath");fireCmd("setField",[_c.cmd.fn,_selectedField.innerHTML]);fireCmd("execScript")}else return true}function selectFieldAndClose(e){selectField(e);releaseDialog(e)}function releaseDialog(e){if(agentInfo.isFirefox)THIN.rcParams.active=
true;if(_hook)_hook.deactivateHook();_box.style.display="none";_touch.selectedIdx=-1}function registerCmd(cmdName,handler){if(cmdName&&cmdName!=""&&handler){if(!_registeredCmds[cmdName])_registeredCmds[cmdName]=[];_registeredCmds[cmdName].push(handler)}}function unregisterCmd(cmdName,handler){if(cmdName&&cmdName!=""&&_registeredCmds[cmdName]&&_registeredCmds[cmdName].length>0)if(handler)for(var i=_registeredCmds[cmdName].length-1;i>=0;i--){if(_registeredCmds[cmdName][i]==handler)_registeredCmds[cmdName].splice(i,
1)}else delete _registeredCmds[cmdName]}function fireCmd(cmdName,params){if(cmdName&&cmdName!=""&&_registeredCmds[cmdName]&&_registeredCmds[cmdName].length>0)for(var i=0;i<_registeredCmds[cmdName].length;i++)try{_registeredCmds[cmdName][i].apply(null,params)}catch(error){}}function dispose(){if(_hook){_hook.deactivateHook();_hook.clearHook()}_box.innerHTML="";_box.parentElem.removeChild(_box);_box=null;_registeredCmds=null}Object.defineProperty(_ref,"set",{"enumerable":true,"configurable":false,"value":setDialog});
Object.defineProperty(_ref,"dispose",{"enumerable":true,"configurable":false,"value":dispose})}function ThinZSAdmin(){var adminUrl="admin/";var statsUrl="stats/";this._sendCmd=function(cmd,query,onsuccess,onerror){var self=this;$.ajax({url:cmd+"?"+query,async:true,cache:false,dataType:"html",error:function(jqXHR,err){if(typeof onerror!="undefined"){if(err=="error")err=jqXHR.statusText;onerror(err)}},success:function(data){if(typeof onsuccess!="undefined")onsuccess(data)}})};this.getAdminUrl=function(pin){if(typeof pin!=
"undefined"&&pin!="")return pin+"/"+adminUrl;else return adminUrl};this.enumUsers=function(onsuccess,onerror){this._sendCmd(adminUrl+"enumusers","",onsuccess,onerror)};this.enumSessions=function(userid,onsuccess,onerror){var query="userid="+escape(userid);this._sendCmd(adminUrl+"enumsessions",query,onsuccess,onerror)};this.disconnect=function(userid,brwid,term,pin,onsuccess,onerror){var query="userid="+escape(userid)+"&ubrwid="+escape(brwid)+"&handle="+escape(term);this._sendCmd(this.getAdminUrl(pin)+
"disconnect",query,onsuccess,onerror)};this.kill=function(userid,brwid,term,pin,onsuccess,onerror){var query="userid="+escape(userid)+"&ubrwid="+escape(brwid)+"&handle="+escape(term);this._sendCmd(this.getAdminUrl(pin)+"kill",query,onsuccess,onerror)};this.getStatistics=function(query,onsuccess,onerror){this._sendCmd(statsUrl+"query",query,onsuccess,onerror)}}try{initialize()}catch(e){if(runOptions&&runOptions.failure)runOptions.failure(e.message);else throw new Error(e.message);}if(!ThinZS.Display)Object.defineProperty(ThinZS,
"Display",{"enumerable":true,"configurable":false,"get":function(){return ThinZSDisplay}});if(!ThinZS.AutoSuggestion)Object.defineProperty(ThinZS,"AutoSuggestion",{"enumerable":true,"configurable":false,"get":function(){return ThinZSAutoSuggestion}});if(!ThinZS.Admin)Object.defineProperty(ThinZS,"Admin",{"enumerable":true,"configurable":false,"get":function(){return ThinZSAdmin}});return _thinzs}var _modeEnum=helper.object.createEnum({"HOST":0,"API":1,"SKEY":2,"OTURL":10,"SDK":11});var _status=helper.object.createEnum({"READY":0,
"CONNECTED":1,"DISCONNECTED":2,"FAILED":3});Object.defineProperty(ThinZS,"mode",{"enumerable":true,"configurable":false,"get":function(){return _modeEnum}});Object.defineProperty(ThinZS,"status",{"enumerable":true,"configurable":false,"get":function(){return _status}});window.ThinZS=ThinZS})();
(function(){var k=void 0,aa=this;function r(c,d){var a=c.split("."),b=aa;!(a[0]in b)&&b.execScript&&b.execScript("var "+a[0]);for(var e;a.length&&(e=a.shift());)!a.length&&d!==k?b[e]=d:b=b[e]?b[e]:b[e]={}}var t="undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Uint32Array&&"undefined"!==typeof DataView;function u(c){var d=c.length,a=0,b=Number.POSITIVE_INFINITY,e,f,g,h,l,n,m,p,s,x;for(p=0;p<d;++p)c[p]>a&&(a=c[p]),c[p]<b&&(b=c[p]);e=1<<a;f=new (t?Uint32Array:Array)(e);
g=1;h=0;for(l=2;g<=a;){for(p=0;p<d;++p)if(c[p]===g){n=0;m=h;for(s=0;s<g;++s)n=n<<1|m&1,m>>=1;x=g<<16|p;for(s=n;s<e;s+=l)f[s]=x;++h}++g;h<<=1;l<<=1}return[f,a,b]}function w(c,d){this.g=[];this.h=32768;this.c=this.f=this.d=this.k=0;this.input=t?new Uint8Array(c):c;this.l=!1;this.i=y;this.p=!1;if(d||!(d={}))d.index&&(this.d=d.index),d.bufferSize&&(this.h=d.bufferSize),d.bufferType&&(this.i=d.bufferType),d.resize&&(this.p=d.resize);switch(this.i){case A:this.a=32768;this.b=new (t?Uint8Array:Array)(32768+
this.h+258);break;case y:this.a=0;this.b=new (t?Uint8Array:Array)(this.h);this.e=this.u;this.m=this.r;this.j=this.s;break;default:throw Error("invalid inflate mode");}}var A=0,y=1;w.prototype.t=function(){for(;!this.l;){var c=B(this,3);c&1&&(this.l=!0);c>>>=1;switch(c){case 0:var d=this.input,a=this.d,b=this.b,e=this.a,f=d.length,g=k,h=k,l=b.length,n=k;this.c=this.f=0;if(a+1>=f)throw Error("invalid uncompressed block header: LEN");g=d[a++]|d[a++]<<8;if(a+1>=f)throw Error("invalid uncompressed block header: NLEN");
h=d[a++]|d[a++]<<8;if(g===~h)throw Error("invalid uncompressed block header: length verify");if(a+g>d.length)throw Error("input buffer is broken");switch(this.i){case A:for(;e+g>b.length;){n=l-e;g-=n;if(t)b.set(d.subarray(a,a+n),e),e+=n,a+=n;else for(;n--;)b[e++]=d[a++];this.a=e;b=this.e();e=this.a}break;case y:for(;e+g>b.length;)b=this.e({o:2});break;default:throw Error("invalid inflate mode");}if(t)b.set(d.subarray(a,a+g),e),e+=g,a+=g;else for(;g--;)b[e++]=d[a++];this.d=a;this.a=e;this.b=b;break;
case 1:this.j(ba,ca);break;case 2:for(var m=B(this,5)+257,p=B(this,5)+1,s=B(this,4)+4,x=new (t?Uint8Array:Array)(C.length),Q=k,R=k,S=k,v=k,M=k,F=k,z=k,q=k,T=k,q=0;q<s;++q)x[C[q]]=B(this,3);if(!t){q=s;for(s=x.length;q<s;++q)x[C[q]]=0}Q=u(x);v=new (t?Uint8Array:Array)(m+p);q=0;for(T=m+p;q<T;)switch(M=D(this,Q),M){case 16:for(z=3+B(this,2);z--;)v[q++]=F;break;case 17:for(z=3+B(this,3);z--;)v[q++]=0;F=0;break;case 18:for(z=11+B(this,7);z--;)v[q++]=0;F=0;break;default:F=v[q++]=M}R=t?u(v.subarray(0,m)):
u(v.slice(0,m));S=t?u(v.subarray(m)):u(v.slice(m));this.j(R,S);break;default:throw Error("unknown BTYPE: "+c);}}return this.m()};var E=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],C=t?new Uint16Array(E):E,G=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],H=t?new Uint16Array(G):G,I=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],J=t?new Uint8Array(I):I,K=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,
4097,6145,8193,12289,16385,24577],L=t?new Uint16Array(K):K,N=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],O=t?new Uint8Array(N):N,P=new (t?Uint8Array:Array)(288),U,da;U=0;for(da=P.length;U<da;++U)P[U]=143>=U?8:255>=U?9:279>=U?7:8;var ba=u(P),V=new (t?Uint8Array:Array)(30),W,ea;W=0;for(ea=V.length;W<ea;++W)V[W]=5;var ca=u(V);function B(c,d){for(var a=c.f,b=c.c,e=c.input,f=c.d,g=e.length,h;b<d;){if(f>=g)throw Error("input buffer is broken");a|=e[f++]<<b;b+=8}h=a&(1<<d)-1;c.f=
a>>>d;c.c=b-d;c.d=f;return h}function D(c,d){for(var a=c.f,b=c.c,e=c.input,f=c.d,g=e.length,h=d[0],l=d[1],n,m;b<l&&!(f>=g);)a|=e[f++]<<b,b+=8;n=h[a&(1<<l)-1];m=n>>>16;if(m>b)throw Error("invalid code length: "+m);c.f=a>>m;c.c=b-m;c.d=f;return n&65535}w.prototype.j=function(c,d){var a=this.b,b=this.a;this.n=c;for(var e=a.length-258,f,g,h,l;256!==(f=D(this,c));)if(256>f)b>=e&&(this.a=b,a=this.e(),b=this.a),a[b++]=f;else{g=f-257;l=H[g];0<J[g]&&(l+=B(this,J[g]));f=D(this,d);h=L[f];0<O[f]&&(h+=B(this,
O[f]));b>=e&&(this.a=b,a=this.e(),b=this.a);for(;l--;)a[b]=a[b++-h]}for(;8<=this.c;)this.c-=8,this.d--;this.a=b};w.prototype.s=function(c,d){var a=this.b,b=this.a;this.n=c;for(var e=a.length,f,g,h,l;256!==(f=D(this,c));)if(256>f)b>=e&&(a=this.e(),e=a.length),a[b++]=f;else{g=f-257;l=H[g];0<J[g]&&(l+=B(this,J[g]));f=D(this,d);h=L[f];0<O[f]&&(h+=B(this,O[f]));b+l>e&&(a=this.e(),e=a.length);for(;l--;)a[b]=a[b++-h]}for(;8<=this.c;)this.c-=8,this.d--;this.a=b};w.prototype.e=function(){var c=new (t?Uint8Array:
Array)(this.a-32768),d=this.a-32768,a,b,e=this.b;if(t)c.set(e.subarray(32768,c.length));else{a=0;for(b=c.length;a<b;++a)c[a]=e[a+32768]}this.g.push(c);this.k+=c.length;if(t)e.set(e.subarray(d,d+32768));else for(a=0;32768>a;++a)e[a]=e[d+a];this.a=32768;return e};w.prototype.u=function(c){var d,a=this.input.length/this.d+1|0,b,e,f,g=this.input,h=this.b;c&&("number"===typeof c.o&&(a=c.o),"number"===typeof c.q&&(a+=c.q));2>a?(b=(g.length-this.d)/this.n[2],f=258*(b/2)|0,e=f<h.length?h.length+f:h.length<<
1):e=h.length*a;t?(d=new Uint8Array(e),d.set(h)):d=h;return this.b=d};w.prototype.m=function(){var c=0,d=this.b,a=this.g,b,e=new (t?Uint8Array:Array)(this.k+(this.a-32768)),f,g,h,l;if(0===a.length)return t?this.b.subarray(32768,this.a):this.b.slice(32768,this.a);f=0;for(g=a.length;f<g;++f){b=a[f];h=0;for(l=b.length;h<l;++h)e[c++]=b[h]}f=32768;for(g=this.a;f<g;++f)e[c++]=d[f];this.g=[];return this.buffer=e};w.prototype.r=function(){var c,d=this.a;t?this.p?(c=new Uint8Array(d),c.set(this.b.subarray(0,
d))):c=this.b.subarray(0,d):(this.b.length>d&&(this.b.length=d),c=this.b);return this.buffer=c};r("Zlib.RawInflate",w);r("Zlib.RawInflate.prototype.decompress",w.prototype.t);var X={ADAPTIVE:y,BLOCK:A},Y,Z,$,fa;if(Object.keys)Y=Object.keys(X);else for(Z in Y=[],$=0,X)Y[$++]=Z;$=0;for(fa=Y.length;$<fa;++$)Z=Y[$],r("Zlib.RawInflate.BufferType."+Z,X[Z])}).call(this);
function initFileElements(imageUrl){var W3CDOM=document.createElement&&document.getElementsByTagName;if(!W3CDOM)return;var fakeFileUpload=document.createElement("div");fakeFileUpload.className="fakefile";fakeFileUpload.appendChild(document.createElement("input"));var image=document.createElement("img");image.src=imageUrl;fakeFileUpload.appendChild(image);var x=document.getElementsByTagName("input");for(var i=0;i<x.length;i++){if(x[i].type!="file")continue;if(x[i].parentNode.className!="fileinputs")continue;
x[i].className="file hidden";var clone=fakeFileUpload.cloneNode(true);if(x[i].id)clone.id="fakeFile_"+x[i].id;else clone.id="fakeFile_"+i;x[i].parentNode.appendChild(clone);x[i].relatedElement=clone.getElementsByTagName("input")[0];x[i].relatedElement.className="fileRelatedElem";if(x[i].style.width!="")x[i].relatedElement.style.width=x[i].style.width;x[i].onchange=function(){this.relatedElement.value=this.value.replace("C:\\fakepath\\","")};x[i].clearFilename=function(){this.relatedElement.value=
""};x[i].getFilename=function(){return this.relatedElement.value}}}
function setFileElement(fileObjId,forUpload,checkCallBack){var ffobj=document.getElementById(fileObjId);var ffdiv=document.getElementById("fakeFile_"+fileObjId);if(forUpload){ffobj.style.width=ffdiv.offsetWidth+"px";ffobj.style.left=ffdiv.offsetLeft+"px"}else{var imgBtn=ffdiv.getElementsByTagName("img")[0];ffobj.style.width=imgBtn.offsetWidth+"px";ffobj.style.left=imgBtn.offsetLeft+"px"}if(checkCallBack)ffobj.relatedElement.onchange=checkCallBack;ffobj.clearFilename()}var VKI_attach,VKI_close;
function VirtualKeyboard(containerID,vkLanguage,protocol,onkeyEvent,onresizeEvent,onhideEvent){var self=this;this.VKI_version="1.49";this.VKI_showVersion=false;this.VKI_target=false;this.VKI_shift=this.VKI_shiftlock=false;this.VKI_altgr=this.VKI_altgrlock=false;this.VKI_ctrl=false;this.VKI_dead=false;this.VKI_deadBox=false;this.VKI_deadkeysOn=false;this.VKI_numberPad=true;this.VKI_numberPadOn=false;this.VKI_kts=this.VKI_kt="US International";this.VKI_zsProtocol=protocol;this.VKI_langAdapt=true;this.VKI_size=
2;this.VKI_sizeAdj=true;this.VKI_clearPasswords=false;this.VKI_imageURI="keyboard.png";this.VKI_clickless=0;this.VKI_activeTab=0;this.VKI_enterSubmit=false;this.VKI_keyCenter=3;this.VKI_showHeader=false;this.VKI_addProtoKeys=true;this.VKI_keyEvent=onkeyEvent?onkeyEvent:null;this.VKI_resizeEvent=onresizeEvent?onresizeEvent:null;this.VKI_hideEvent=onhideEvent?onhideEvent:null;this.VKI_isIE=false;this.VKI_isIE6=false;this.VKI_isIElt8=false;this.VKI_isWebKit=RegExp("KHTML").test(navigator.userAgent);
this.VKI_isOpera=RegExp("Opera").test(navigator.userAgent);this.VKI_isMoz=!this.VKI_isWebKit&&navigator.product=="Gecko";this.VKI_isFirefox=RegExp("Firefox").test(navigator.userAgent);this.VKI_isAndroid=RegExp("Android").test(navigator.userAgent);this.VKI_isFFAndroid=this.VKI_isAndroid&&this.VKI_isFirefox;this.VKI_i18n={"00":"Display Number Pad","01":"Display virtual keyboard interface","02":"Select keyboard layout","03":"Dead keys","04":"On","05":"Off","06":"Close the keyboard","07":"Clear","08":"Clear this input",
"09":"Version",10:"Decrease keyboard size",11:"Increase keyboard size"};this.VKI_protocolLayout={};this.VKI_protocolLayout["3270"]={keys:[[["SysReq","Attn","TestReq"],[{key:"PF1",html:"PF01"},"PF13","PA1"],[{key:"PF2",html:"PF02"},"PF14","PA3"],[{key:"PF3",html:"PF03"},"PF15","PA3"],[{key:"PF4",html:"PF04"},"PF16"],[{key:"PF5",html:"PF05"},"PF17"],[{key:"PF6",html:"PF06"},"PF18"],[{key:"PF7",html:"PF07"},"PF19"],[{key:"PF8",html:"PF08"},"PF20"],[{key:"PF9",html:"PF09"},"PF21"],["PF10","PF22"],["PF11",
"PF23"],["PF12","PF24"],["Home","Home",{key:"EraseEof",html:"EEof"},"Home"],["End","End",{key:"EraseInput",html:"EInp"},"End"],[{key:"Insert",html:"Ins"},{key:"Insert",html:"Ins"},"Dup",{key:"Insert",html:"Ins"}],[{key:"Delete",html:"Del"},{key:"Delete",html:"Del"},{key:"FieldMark",html:"FM"},{key:"Delete",html:"Del"}]],[null,null,null,null,null,null,null,null,null,null,null,null,null,[{key:"Backspace",styleClass:"bkspBtn"},{key:"Backspace",styleClass:"bkspBtn"}]],[[{key:"NextField",html:"Tab"},{key:"PriorField",
html:"BackTab"}],null,null,null,null,null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null,null,null,null,[{key:"NEWLINE",styleClass:"newLineBtn"},{key:"NEWLINE",styleClass:"newLineBtn"},{key:"NEWLINE",styleClass:"newLineBtn"},{key:"NEWLINE",styleClass:"newLineBtn"}]],[["Enter","Enter","Enter","Enter"]],[["Reset","Reset","Clear"],["Alt","Alt"],[" "," "," "," "],["Alt","Alt"],[{key:"LEFT",html:"&larr;"},{key:"LEFT",html:"&larr;"}],[{key:"UP",html:"&uarr;"},{key:"UP",
html:"&uarr;"}],[{key:"DOWN",html:"&darr;"},{key:"DOWN",html:"&darr;"}],[{key:"RIGHT",html:"&rarr;"},{key:"RIGHT",html:"&rarr;"}],[{key:"HIDEKBD","styleClass":"closeKeyb"},{key:"HIDEKBD","styleClass":"closeKeyb"},{key:"HIDEKBD","styleClass":"closeKeyb"},{key:"HIDEKBD","styleClass":"closeKeyb"}]]]};this.VKI_protocolLayout["5250"]={keys:[[["SysReq","Attn","TestReq"],[{key:"PF1",html:"PF01"},"PF13","PA1"],[{key:"PF2",html:"PF02"},"PF14","PA3"],[{key:"PF3",html:"PF03"},"PF15","PA3"],[{key:"PF4",html:"PF04"},
"PF16"],[{key:"PF5",html:"PF05"},"PF17"],[{key:"PF6",html:"PF06"},"PF18"],[{key:"PF7",html:"PF07"},"PF19"],[{key:"PF8",html:"PF08"},"PF20"],[{key:"PF9",html:"PF09"},"PF21"],["PF10","PF22","VR"],["PF11","PF23","LPen"],["PF12","PF24"],["Home",{key:"EraseEof",html:"EEof"},"Print"],["End",{key:"EraseInput",html:"EInp"}],[{key:"Insert",html:"Ins"},"Dup"],[{key:"Delete",html:"Del"},{key:"FieldMark",html:"FM"}]],[null,null,null,null,null,null,null,null,null,null,null,null,null,[{key:"Backspace",styleClass:"bkspBtn"},
{key:"Backspace",styleClass:"bkspBtn"}]],[[{key:"NextField",html:"Tab"},{key:"PriorField",html:"BackTab"}],null,null,null,null,null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null,null,null,null,[{key:"FIELDEXIT",html:"FldExit"},{key:"FIELDEXIT",html:"FldExit"},{key:"NEWLINE",styleClass:"newLineBtn"},{key:"FIELDEXIT",html:"FldExit"}]],[["Enter","Enter","Enter","Enter"]],[["Reset","Reset","Clear"],["Alt","Alt"],[" "," "," "," "],["Alt","Alt"],[{key:"LEFT",html:"&larr;"},
{key:"LEFT",html:"&larr;"},{key:"FIELDEXIT",html:"Fld+"}],[{key:"UP",html:"&uarr;"},{key:"UP",html:"&uarr;"},{key:"PgDown",html:"Scrl&uarr;"}],[{key:"DOWN",html:"&darr;"},{key:"DOWN",html:"&darr;"},{key:"PgUp",html:"Scrl&darr;"}],[{key:"RIGHT",html:"&rarr;"},{key:"RIGHT",html:"&rarr;"},{key:"FieldMinus",html:"Fld-"}],[{key:"HIDEKBD","styleClass":"closeKeyb"},{key:"HIDEKBD","styleClass":"closeKeyb"},{key:"HIDEKBD","styleClass":"closeKeyb"},{key:"HIDEKBD","styleClass":"closeKeyb"}]]]};this.VKI_protocolLayout["VT"]=
{keys:[[[{key:"Escape",html:"Esc"},{key:"Escape",html:"Esc"},{key:"Escape",html:"Esc"}],["F1","F13","PF1"],["F2","F14","PF2"],["F3","F15","PF3"],["F4","F16","PF4"],["F5","F17"],["F6","F18"],["F7","F19"],["F8","F20"],["F9","PF1"],["F10","PF2"],["F11","PF3"],["F12","PF4"],["Find","Print",{key:"Alt+Find",html:"Find"}],["Select","Pause",{key:"Alt+Select",html:"Select"}],[{key:"Insert",html:"Ins"},{key:"Insert",html:"Ins"},{key:"Alt+Insert",html:"Ins"}],[{key:"Remove",html:"Del"},{key:"Remove",html:"Del"},
{key:"Alt+Remove",html:"Del"}]],[null,[null,null,{key:"Alt+1",html:"Esc 1"}],[null,null,{key:"Alt+2",html:"Esc 2"}],[null,null,{key:"Alt+3",html:"Esc 3"}],[null,null,{key:"Alt+4",html:"Esc 4"}],[null,null,{key:"Alt+5",html:"Esc 5"}],[null,null,{key:"Alt+6",html:"Esc 6"}],[null,null,{key:"Alt+7",html:"Esc 7"}],[null,null,{key:"Alt+8",html:"Esc 8"}],[null,null,{key:"Alt+9",html:"Esc 9"}],[null,null,{key:"Alt+0",html:"Esc 0"}],null,null,[{key:"Backspace",styleClass:"bkspBtn"},{key:"Backspace",styleClass:"bkspBtn"},
{key:"Alt+Backspace",styleClass:"bkspBtn"},null,{key:"CtrlBackspace",styleClass:"bkspBtn"}]],[["Tab","BackTab",{key:"Alt+Tab",html:"Tab"}],[null,null,{key:"Alt+q",html:"Esc q"},null,"DC1"],[null,null,{key:"Alt+w",html:"Esc w"},null,"ETB"],[null,null,{key:"Alt+e",html:"Esc e"},null,"ENQ"],[null,null,{key:"Alt+r",html:"Esc r"},null,"DC2"],[null,null,{key:"Alt+t",html:"Esc t"},null,"DC4"],[null,null,{key:"Alt+y",html:"Esc y"},null,"EM"],[null,null,{key:"Alt+u",html:"Esc u"},null,"NAK"],[null,null,{key:"Alt+i",
html:"Esc i"},null,"HT"],[null,null,{key:"Alt+o",html:"Esc o"},null,"SI"],[null,null,{key:"Alt+p",html:"Esc p"},null,"DLE"],[null,null,null,null,"ESC"],[null,null,null,null,"GS"],[null,null,null,null,"FS"]],[null,[null,null,{key:"Alt+a",html:"Esc a"},null,"SOH"],[null,null,{key:"Alt+s",html:"Esc s"},null,"DC3"],[null,null,{key:"Alt+d",html:"Esc d"},null,"EOT"],[null,null,{key:"Alt+f",html:"Esc f"},null,"ACK"],[null,null,{key:"Alt+g",html:"Esc g"},null,"BEL"],[null,null,{key:"Alt+h",html:"Esc h"},
null,"BS"],[null,null,{key:"Alt+j",html:"Esc j"},null,"LF"],[null,null,{key:"Alt+k",html:"Esc k"},null,"VT"],[null,null,{key:"Alt+l",html:"Esc l"},null,"FF"],null,null,[{key:"ENTER",styleClass:"newLineBtn"},{key:"ENTER",styleClass:"newLineBtn"},{key:"ENTER",styleClass:"newLineBtn"},{key:"ENTER",styleClass:"newLineBtn"}]],[null,[null,null,{key:"Alt+z",html:"Esc z"},null,"SUB"],[null,null,{key:"Alt+x",html:"Esc x"},null,"CAN"],[null,null,{key:"Alt+c",html:"Esc c"},null,"ETX"],[null,null,{key:"Alt+v",
html:"Esc v"},null,"SYN"],[null,null,{key:"Alt+b",html:"Esc b"},null,"STX"],[null,null,{key:"Alt+n",html:"Esc n"},null,"SO"],[null,null,{key:"Alt+m",html:"Esc m"},null,"CR"],null,null,null,null,["LF","LF","LF","LF"]],[["Ctrl","Ctrl","Ctrl"],["Alt","Alt"],[" "," "," "," "],["Alt","Alt"],[{key:"LEFT",html:"&larr;"},{key:"LEFT",html:"&larr;"},{key:"Alt+LEFT",html:"&larr;"}],[{key:"UP",html:"&uarr;"},{key:"Prev",html:"Scroll &uarr;"},{key:"Alt+UP",html:"&uarr;"}],[{key:"DOWN",html:"&darr;"},{key:"Next",
html:"Scroll &darr;"},{key:"Alt+DOWN",html:"&darr;"}],[{key:"RIGHT",html:"&rarr;"},{key:"RIGHT",html:"&rarr;"},{key:"Alt+RIGHT",html:"&rarr;"}],[{key:"HIDEKBD","styleClass":"closeKeyb"},{key:"HIDEKBD","styleClass":"closeKeyb"},{key:"HIDEKBD","styleClass":"closeKeyb"},{key:"HIDEKBD","styleClass":"closeKeyb"},{key:"HIDEKBD","styleClass":"closeKeyb"}]]]};this.VKI_layout={};this.VKI_layout["\u0627\u0644\u0639\u0631\u0628\u064a\u0629"]={"name":"Arabic","keys":[[["\u0630","\u0651 "],["1","!","\u00a1","\u00b9"],
["2","@","\u00b2"],["3","#","\u00b3"],["4","$","\u00a4","\u00a3"],["5","%","\u20ac"],["6","^","\u00bc"],["7","&","\u00bd"],["8","*","\u00be"],["9","(","\u2018"],["0",")","\u2019"],["-","_","\u00a5"],["=","+","\u00d7","\u00f7"],["Bksp","Bksp"]],[["Tab","Tab"],["\u0636","\u064e"],["\u0635","\u064b"],["\u062b","\u064f"],["\u0642","\u064c"],["\u0641","\u0644"],["\u063a","\u0625"],["\u0639","\u2018"],["\u0647","\u00f7"],["\u062e","\u00d7"],["\u062d","\u061b"],["\u062c","<"],["\u062f",">"],["\\","|"]],
[["Caps","Caps"],["\u0634","\u0650"],["\u0633","\u064d"],["\u064a","]"],["\u0628","["],["\u0644","\u0644"],["\u0627","\u0623"],["\u062a","\u0640"],["\u0646","\u060c"],["\u0645","/"],["\u0643",":"],["\u0637",'"'],["Enter","Enter"]],[["Shift","Shift"],["\u0626","~"],["\u0621","\u0652"],["\u0624","}"],["\u0631","{"],["\u0644","\u0644"],["\u0649","\u0622"],["\u0629","\u2019"],["\u0648",","],["\u0632","."],["\u0638","\u061f"],["Shift","Shift"]],[[" "," "," "," "],["Alt","Alt"]]],"lang":["ar"]};this.VKI_layout["\u0985\u09b8\u09ae\u09c0\u09df\u09be"]=
{"name":"Assamese","keys":[[["+","?"],["\u09e7","{","\u09e7"],["\u09e8","}","\u09e8"],["\u09e9","\u09cd\u09f0","\u09e9"],["\u09ea","\u09f0\u09cd","\u09ea"],["\u09eb","\u099c\u09cd\u09f0","\u09eb"],["\u09ec","\u0995\u09cd\u09b7","\u09ec"],["\u09ed","\u0995\u09cd\u09f0","\u09ed"],["\u09ee","\u09b6\u09cd\u09f0","\u09ee"],["\u09ef","(","\u09ef"],["\u09e6",")","\u09e6"],["-",""],["\u09c3","\u098b","\u09e2","\u09e0"],["Bksp","Bksp"]],[["Tab","Tab"],["\u09cc","\u0994","\u09d7"],["\u09c8","\u0990"],["\u09be",
"\u0986"],["\u09c0","\u0988","\u09e3","\u09e1"],["\u09c2","\u098a"],["\u09f1","\u09ad"],["\u09b9","\u0999"],["\u0997","\u0998"],["\u09a6","\u09a7"],["\u099c","\u099d"],["\u09a1","\u09a2","\u09dc","\u09dd"],["Enter","Enter"]],[["Caps","Caps"],["\u09cb","\u0993","\u09f4","\u09f5"],["\u09c7","\u098f","\u09f6","\u09f7"],["\u09cd","\u0985","\u09f8","\u09f9"],["\u09bf","\u0987","\u09e2","\u098c"],["\u09c1","\u0989"],["\u09aa","\u09ab"],["\u09f0","","\u09f0","\u09f1"],["\u0995","\u0996"],["\u09a4","\u09a5"],
["\u099a","\u099b"],["\u099f","\u09a0"],["\u09bc","\u099e"]],[["Shift","Shift"],["\u09ce","\u0983"],["\u0982","\u0981","\u09fa"],["\u09ae","\u09a3"],["\u09a8","\u09f7"],["\u09ac",'"'],["\u09b2","'"],["\u09b8","\u09b6"],[",","\u09b7"],[".",";"],["\u09af","\u09df"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]],"lang":["as"]};this.VKI_layout["\u0410\u0437\u04d9\u0440\u0431\u0430\u0458\u04b9\u0430\u043d\u04b9\u0430"]={"name":"Azerbaijani Cyrillic","keys":[[["`","~"],["1","!"],["2",'"'],["3",
"\u2116"],["4",";"],["5","%"],["6",":"],["7","?"],["8","*"],["9","("],["0",")"],["-","_"],["=","+"],["Bksp","Bksp"]],[["Tab","Tab"],["\u0458","\u0408"],["\u04af","\u04ae"],["\u0443","\u0423"],["\u043a","\u041a"],["\u0435","\u0415"],["\u043d","\u041d"],["\u0433","\u0413"],["\u0448","\u0428"],["\u04bb","\u04ba"],["\u0437","\u0417"],["\u0445","\u0425"],["\u04b9","\u04b8"],["\\","/"]],[["Caps","Caps"],["\u0444","\u0424"],["\u044b","\u042b"],["\u0432","\u0412"],["\u0430","\u0410"],["\u043f","\u041f"],
["\u0440","\u0420"],["\u043e","\u041e"],["\u043b","\u041b"],["\u0434","\u0414"],["\u0436","\u0416"],["\u049d","\u049c"],["Enter","Enter"]],[["Shift","Shift"],["\\","|"],["\u04d9","\u04d8"],["\u0447","\u0427"],["\u0441","\u0421"],["\u043c","\u041c"],["\u0438","\u0418"],["\u0442","\u0422"],["\u0493","\u0492"],["\u0431","\u0411"],["\u04e9","\u04e8"],[".",","],["Shift","Shift"]],[[" "," "]]],"lang":["az-Cyrl"]};this.VKI_layout["Az\u0259rbaycanca"]={"name":"Azerbaijani Latin","keys":[[["`","~"],["1","!"],
["2",'"'],["3","\u2166"],["4",";"],["5","%"],["6",":"],["7","?"],["8","*"],["9","("],["0",")"],["-","_"],["=","+"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q"],["\u00fc","\u00dc"],["e","E"],["r","R"],["t","T"],["y","Y"],["u","U"],["i","\u0130"],["o","O"],["p","P"],["\u00f6","\u00d6"],["\u011f","\u011e"],["\\","/"]],[["Caps","Caps"],["a","A"],["s","S"],["d","D"],["f","F"],["g","G"],["h","H"],["j","J"],["k","K"],["l","L"],["\u0131","I"],["\u0259","\u018f"],["Enter","Enter"]],[["Shift","Shift"],["z","Z"],
["x","X"],["c","C"],["v","V"],["b","B"],["n","N"],["m","M"],["\u00e7","\u00c7"],["\u015f","\u015e"],[".",","],["Shift","Shift"]],[[" "," "]]],"lang":["az"]};this.VKI_layout["\u0411\u0435\u043b\u0430\u0440\u0443\u0441\u043a\u0430\u044f"]={"name":"Belarusian","keys":[[["\u0451","\u0401"],["1","!"],["2",'"'],["3","\u2116"],["4",";"],["5","%"],["6",":"],["7","?"],["8","*"],["9","("],["0",")"],["-","_"],["=","+"],["Bksp","Bksp"]],[["Tab","Tab"],["\u0439","\u0419"],["\u0446","\u0426"],["\u0443","\u0423"],
["\u043a","\u041a"],["\u0435","\u0415"],["\u043d","\u041d"],["\u0433","\u0413"],["\u0448","\u0428"],["\u045e","\u040e"],["\u0437","\u0417"],["\u0445","\u0425"],["'","'"],["\\","/"]],[["Caps","Caps"],["\u0444","\u0424"],["\u044b","\u042b"],["\u0432","\u0412"],["\u0430","\u0410"],["\u043f","\u041f"],["\u0440","\u0420"],["\u043e","\u041e"],["\u043b","\u041b"],["\u0434","\u0414"],["\u0436","\u0416"],["\u044d","\u042d"],["Enter","Enter"]],[["Shift","Shift"],["/","|"],["\u044f","\u042f"],["\u0447","\u0427"],
["\u0441","\u0421"],["\u043c","\u041c"],["\u0456","\u0406"],["\u0442","\u0422"],["\u044c","\u042c"],["\u0431","\u0411"],["\u044e","\u042e"],[".",","],["Shift","Shift"]],[[" "," "]]],"lang":["be"]};this.VKI_layout["Belgische / Belge"]={"name":"Belgian","keys":[[["\u00b2","\u00b3"],["&","1","|"],["\u00e9","2","@"],['"',"3","#"],["'","4"],["(","5"],["\u00a7","6","^"],["\u00e8","7"],["!","8"],["\u00e7","9","{"],["\u00e0","0","}"],[")","\u00b0"],["-","_"],["Bksp","Bksp"]],[["Tab","Tab"],["a","A"],["z",
"Z"],["e","E","\u20ac"],["r","R"],["t","T"],["y","Y"],["u","U"],["i","I"],["o","O"],["p","P"],["^","\u00a8","["],["$","*","]"],["\u03bc","\u00a3","`"]],[["Caps","Caps"],["q","Q"],["s","S"],["d","D"],["f","F"],["g","G"],["h","H"],["j","J"],["k","K"],["l","L"],["m","M"],["\u00f9","%","\u00b4"],["Enter","Enter"]],[["Shift","Shift"],["<",">","\\"],["w","W"],["x","X"],["c","C"],["v","V"],["b","B"],["n","N"],[",","?"],[";","."],[":","/"],["=","+","~"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]],
"lang":["nl-BE","fr-BE"]};this.VKI_layout["\u0411\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438 \u0424\u043e\u043d\u0435\u0442\u0438\u0447\u0435\u043d"]={"name":"Bulgarian Phonetic","keys":[[["\u0447","\u0427"],["1","!"],["2","@"],["3","#"],["4","$"],["5","%"],["6","^"],["7","&"],["8","*"],["9","("],["0",")"],["-","_"],["=","+"],["Bksp","Bksp"]],[["Tab","Tab"],["\u044f","\u042f"],["\u0432","\u0412"],["\u0435","\u0415"],["\u0440","\u0420"],["\u0442","\u0422"],["\u044a","\u042a"],["\u0443","\u0423"],
["\u0438","\u0418"],["\u043e","\u041e"],["\u043f","\u041f"],["\u0448","\u0428"],["\u0449","\u0429"],["\u044e","\u042e"]],[["Caps","Caps"],["\u0430","\u0410"],["\u0441","\u0421"],["\u0434","\u0414"],["\u0444","\u0424"],["\u0433","\u0413"],["\u0445","\u0425"],["\u0439","\u0419"],["\u043a","\u041a"],["\u043b","\u041b"],[";",":"],["'",'"'],["Enter","Enter"]],[["Shift","Shift"],["\u0437","\u0417"],["\u044c","\u042c"],["\u0446","\u0426"],["\u0436","\u0416"],["\u0431","\u0411"],["\u043d","\u041d"],["\u043c",
"\u041c"],[",","<"],[".",">"],["/","?"],["Shift","Shift"]],[[" "," "]]],"lang":["bg"]};this.VKI_layout["\u0411\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438"]={"name":"Bulgarian BDS","keys":[[["`","~"],["1","!"],["2","?"],["3","+"],["4",'"'],["5","%"],["6","="],["7",":"],["8","/"],["9","_"],["0","\u2116"],["-","\u0406"],["=","V"],["Bksp","Bksp"]],[["Tab","Tab"],[",","\u044b"],["\u0443","\u0423"],["\u0435","\u0415"],["\u0438","\u0418"],["\u0448","\u0428"],["\u0449","\u0429"],["\u043a","\u041a"],
["\u0441","\u0421"],["\u0434","\u0414"],["\u0437","\u0417"],["\u0446","\u0426"],[";","\u00a7"],["(",")"]],[["Caps","Caps"],["\u044c","\u042c"],["\u044f","\u042f"],["\u0430","\u0410"],["\u043e","\u041e"],["\u0436","\u0416"],["\u0433","\u0413"],["\u0442","\u0422"],["\u043d","\u041d"],["\u0412","\u0412"],["\u043c","\u041c"],["\u0447","\u0427"],["Enter","Enter"]],[["Shift","Shift"],["\u042e","\u044e"],["\u0439","\u0419"],["\u044a","\u042a"],["\u044d","\u042d"],["\u0444","\u0424"],["\u0445","\u0425"],
["\u043f","\u041f"],["\u0440","\u0420"],["\u043b","\u041b"],["\u0431","\u0411"],["Shift","Shift"]],[[" "," "]]]};this.VKI_layout["\u09ac\u09be\u0982\u09b2\u09be"]={"name":"Bengali","keys":[[[""],["1","","\u09e7"],["2","","\u09e8"],["3","\u09cd\u09b0","\u09e9"],["4","\u09b0\u09cd","\u09ea"],["5","\u099c\u09cd\u09b0","\u09eb"],["6","\u09a4\u09cd\u09b7","\u09ec"],["7","\u0995\u09cd\u09b0","\u09ed"],["8","\u09b6\u09cd\u09b0","\u09ee"],["9","(","\u09ef"],["0",")","\u09e6"],["-","\u0983"],["\u09c3","\u098b",
"\u09e2","\u09e0"],["Bksp","Bksp"]],[["Tab","Tab"],["\u09cc","\u0994","\u09d7"],["\u09c8","\u0990"],["\u09be","\u0986"],["\u09c0","\u0988","\u09e3","\u09e1"],["\u09c2","\u098a"],["\u09ac","\u09ad"],["\u09b9","\u0999"],["\u0997","\u0998"],["\u09a6","\u09a7"],["\u099c","\u099d"],["\u09a1","\u09a2","\u09dc","\u09dd"],["Enter","Enter"]],[["Caps","Caps"],["\u09cb","\u0993","\u09f4","\u09f5"],["\u09c7","\u098f","\u09f6","\u09f7"],["\u09cd","\u0985","\u09f8","\u09f9"],["\u09bf","\u0987","\u09e2","\u098c"],
["\u09c1","\u0989"],["\u09aa","\u09ab"],["\u09b0","","\u09f0","\u09f1"],["\u0995","\u0996"],["\u09a4","\u09a5"],["\u099a","\u099b"],["\u099f","\u09a0"],["\u09bc","\u099e"]],[["Shift","Shift"],[""],["\u0982","\u0981","\u09fa"],["\u09ae","\u09a3"],["\u09a8"],["\u09ac"],["\u09b2"],["\u09b8","\u09b6"],[",","\u09b7"],[".","{"],["\u09af","\u09df"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]],"lang":["bn"]};this.VKI_layout["Bosanski"]={"name":"Bosnian","keys":[[["\u00b8","\u00a8"],["1","!",
"~"],["2",'"',"\u02c7"],["3","#","^"],["4","$","\u02d8"],["5","%","\u00b0"],["6","&","\u02db"],["7","/","`"],["8","(","\u02d9"],["9",")","\u00b4"],["0","=","\u02dd"],["'","?","\u00a8"],["+","*","\u00b8"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q","\\"],["w","W","|"],["e","E","\u20ac"],["r","R"],["t","T"],["z","Z"],["u","U"],["i","I"],["o","O"],["p","P"],["\u0161","\u0160","\u00f7"],["\u0111","\u0110","\u00d7"],["\u017e","\u017d","\u00a4"]],[["Caps","Caps"],["a","A"],["s","S"],["d","D"],["f","F","["],
["g","G","]"],["h","H"],["j","J"],["k","K","\u0142"],["l","L","\u0141"],["\u010d","\u010c"],["\u0107","\u0106","\u00df"],["Enter","Enter"]],[["Shift","Shift"],["<",">"],["y","Y"],["x","X"],["c","C"],["v","V","@"],["b","B","{"],["n","N","}"],["m","M","\u00a7"],[",",";","<"],[".",":",">"],["-","_","\u00a9"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]],"lang":["bs"]};this.VKI_layout["Canadienne-fran\u00e7aise"]={"name":"Canadian French","keys":[[["#","|","\\"],["1","!","\u00b1"],["2",'"',
"@"],["3","/","\u00a3"],["4","$","\u00a2"],["5","%","\u00a4"],["6","?","\u00ac"],["7","&","\u00a6"],["8","*","\u00b2"],["9","(","\u00b3"],["0",")","\u00bc"],["-","_","\u00bd"],["=","+","\u00be"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q"],["w","W"],["e","E"],["r","R"],["t","T"],["y","Y"],["u","U"],["i","I"],["o","O","\u00a7"],["p","P","\u00b6"],["^","^","["],["\u00b8","\u00a8","]"],["<",">","}"]],[["Caps","Caps"],["a","A"],["s","S"],["d","D"],["f","F"],["g","G"],["h","H"],["j","J"],["k","K"],["l","L"],
[";",":","~"],["`","`","{"],["Enter","Enter"]],[["Shift","Shift"],["\u00ab","\u00bb","\u00b0"],["z","Z"],["x","X"],["c","C"],["v","V"],["b","B"],["n","N"],["m","M","\u00b5"],[",","'","\u00af"],[".",".","\u00ad"],["\u00e9","\u00c9","\u00b4"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]],"lang":["fr-CA"]};this.VKI_layout["\u010cesky"]={"name":"Czech","keys":[[[";","\u00b0","`","~"],["+","1","!"],["\u011b","2","@"],["\u0161","3","#"],["\u010d","4","$"],["\u0159","5","%"],["\u017e","6","^"],
["\u00fd","7","&"],["\u00e1","8","*"],["\u00ed","9","("],["\u00e9","0",")"],["=","%","-","_"],["\u00b4","\u02c7","=","+"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q"],["w","W"],["e","E","\u20ac"],["r","R"],["t","T"],["y","Y"],["u","U"],["i","I"],["o","O"],["p","P"],["\u00fa","/","[","{"],[")","(","]","}"],["\u00a8","'","\\","|"]],[["Caps","Caps"],["a","A"],["s","S"],["d","D"],["f","F"],["g","G"],["h","H"],["j","J"],["k","K"],["l","L"],["\u016f",'"',";",":"],["\u00a7","!","\u00a4","^"],["Enter","Enter"]],
[["Shift","Shift"],["\\","|","","\u02dd"],["z","Z"],["x","X"],["c","C"],["v","V"],["b","B"],["n","N"],["m","M"],[",","?","<","\u00d7"],[".",":",">","\u00f7"],["-","_","/","?"],["Shift","Shift"]],[[" "," "," "," "],["Alt","Alt"]]],"lang":["cs"]};this.VKI_layout["Dansk"]={"name":"Danish","keys":[[["\u00bd","\u00a7"],["1","!"],["2",'"',"@"],["3","#","\u00a3"],["4","\u00a4","$"],["5","%","\u20ac"],["6","&"],["7","/","{"],["8","(","["],["9",")","]"],["0","=","}"],["+","?"],["\u00b4","`","|"],["Bksp","Bksp"]],
[["Tab","Tab"],["q","Q"],["w","W"],["e","E","\u20ac"],["r","R"],["t","T"],["y","Y"],["u","U"],["i","I"],["o","O"],["p","P"],["\u00e5","\u00c5"],["\u00a8","^","~"],["'","*"]],[["Caps","Caps"],["a","A"],["s","S"],["d","D"],["f","F"],["g","G"],["h","H"],["j","J"],["k","K"],["l","L"],["\u00e6","\u00c6"],["\u00f8","\u00d8"],["Enter","Enter"]],[["Shift","Shift"],["<",">","\\"],["z","Z"],["x","X"],["c","C"],["v","V"],["b","B"],["n","N"],["m","M","\u03bc","\u039c"],[",",";"],[".",":"],["-","_"],["Shift",
"Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]],"lang":["da"]};this.VKI_layout["Deutsch"]={"name":"German","keys":[[["^","\u00b0"],["1","!"],["2",'"',"\u00b2"],["3","\u00a7","\u00b3"],["4","$"],["5","%"],["6","&"],["7","/","{"],["8","(","["],["9",")","]"],["0","=","}"],["\u00df","?","\\"],["\u00b4","`"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q","@"],["w","W"],["e","E","\u20ac"],["r","R"],["t","T"],["z","Z"],["u","U"],["i","I"],["o","O"],["p","P"],["\u00fc","\u00dc"],["+","*","~"],["#","'"]],[["Caps",
"Caps"],["a","A"],["s","S"],["d","D"],["f","F"],["g","G"],["h","H"],["j","J"],["k","K"],["l","L"],["\u00f6","\u00d6"],["\u00e4","\u00c4"],["Enter","Enter"]],[["Shift","Shift"],["<",">","\u00a6"],["y","Y"],["x","X"],["c","C"],["v","V"],["b","B"],["n","N"],["m","M","\u00b5"],[",",";"],[".",":"],["-","_"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]],"lang":["de"]};this.VKI_layout["Dingbats"]={"name":"Dingbats","keys":[[["\u2764","\u2765","\u2766","\u2767"],["\u278a","\u2780","\u2776","\u2768"],
["\u278b","\u2781","\u2777","\u2769"],["\u278c","\u2782","\u2778","\u276a"],["\u278d","\u2783","\u2779","\u276b"],["\u278e","\u2784","\u277a","\u276c"],["\u278f","\u2785","\u277b","\u276d"],["\u2790","\u2786","\u277c","\u276e"],["\u2791","\u2787","\u277d","\u276f"],["\u2792","\u2788","\u277e","\u2770"],["\u2793","\u2789","\u277f","\u2771"],["\u2795","\u2796","\u274c","\u2797"],["\u2702","\u2704","\u2701","\u2703"],["Bksp","Bksp"]],[["Tab","Tab"],["\u2714","\u2705","\u2713"],["\u2718","\u2715","\u2717",
"\u2716"],["\u271a","\u2719","\u271b","\u271c"],["\u271d","\u271e","\u271f","\u2720"],["\u2722","\u2723","\u2724","\u2725"],["\u2726","\u2727","\u2728","\u2756"],["\u2729","\u272a","\u272d","\u2730"],["\u272c","\u272b","\u272e","\u272f"],["\u2736","\u2731","\u2732","\u2749"],["\u273b","\u273c","\u273d","\u273e"],["\u2744","\u2745","\u2746","\u2743"],["\u2733","\u2734","\u2735","\u2721"],["\u2737","\u2738","\u2739","\u273a"]],[["Caps","Caps"],["\u2799","\u279a","\u2798","\u2758"],["\u27b5","\u27b6",
"\u27b4","\u2759"],["\u27b8","\u27b9","\u27b7","\u275a"],["\u2794","\u279c","\u27ba","\u27bb"],["\u279d","\u279e","\u27a1","\u2772"],["\u27a9","\u27aa","\u27ab","\u27ac"],["\u27a4","\u27a3","\u27a2","\u279b"],["\u27b3","\u27bc","\u27bd","\u2773"],["\u27ad","\u27ae","\u27af","\u27b1"],["\u27a8","\u27a6","\u27a5","\u27a7"],["\u279f","\u27a0","\u27be","\u27b2"],["Enter","Enter"]],[["Shift","Shift"],["\u270c","\u270b","\u270a","\u270d"],["\u274f","\u2750","\u2751","\u2752"],["\u273f","\u2740","\u2741",
"\u2742"],["\u2747","\u2748","\u274a","\u274b"],["\u2757","\u2755","\u2762","\u2763"],["\u2753","\u2754","\u27b0","\u27bf"],["\u270f","\u2710","\u270e","\u2774"],["\u2712","\u2711","\u274d","\u274e"],["\u2709","\u2706","\u2708","\u2707"],["\u275b","\u275d","\u2761","\u2775"],["\u275c","\u275e","\u275f","\u2760"],["Shift","Shift"]],[["AltLk","AltLk"],[" "," "," "," "],["AltGr","AltGr"]]]};this.VKI_layout["\u078b\u07a8\u0788\u07ac\u0780\u07a8\u0784\u07a6\u0790\u07b0"]={"name":"Divehi","keys":[[["`",
"~"],["1","!"],["2","@"],["3","#"],["4","$"],["5","%"],["6","^"],["7","&"],["8","*"],["9",")"],["0","("],["-","_"],["=","+"],["Bksp","Bksp"]],[["Tab","Tab"],["\u07ab","\u00d7"],["\u07ae","\u2019"],["\u07a7","\u201c"],["\u07a9","/"],["\u07ad",":"],["\u078e","\u07a4"],["\u0783","\u079c"],["\u0789","\u07a3"],["\u078c","\u07a0"],["\u0780","\u0799"],["\u078d","\u00f7"],["[","{"],["]","}"]],[["Caps","Caps"],["\u07a8","<"],["\u07aa",">"],["\u07b0",".",",",","],["\u07a6","\u060c"],["\u07ac",'"'],["\u0788",
"\u07a5"],["\u0787","\u07a2"],["\u0782","\u0798"],["\u0786","\u079a"],["\u078a","\u07a1"],["\ufdf2","\u061b",";",";"],["Enter","Enter"]],[["Shift","Shift"],["\\","|"],["\u0792","\u0796"],["\u0791","\u0795"],["\u0790","\u078f"],["\u0794","\u0797","\u200d"],["\u0785","\u079f","\u200c"],["\u078b","\u079b","\u200e"],["\u0784","\u079d","\u200f"],["\u0781","\\"],["\u0793","\u079e"],["\u07af","\u061f"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]],"lang":["dv"]};this.VKI_layout["Dvorak"]={"name":"Dvorak",
"keys":[[["`","~"],["1","!"],["2","@"],["3","#"],["4","$"],["5","%"],["6","^"],["7","&"],["8","*"],["9","("],["0",")"],["[","{"],["]","}"],["Bksp","Bksp"]],[["Tab","Tab"],["'",'"'],[",","<"],[".",">"],["p","P"],["y","Y"],["f","F"],["g","G"],["c","C"],["r","R"],["l","L"],["/","?"],["=","+"],["\\","|"]],[["Caps","Caps"],["a","A"],["o","O"],["e","E"],["u","U"],["i","I"],["d","D"],["h","H"],["t","T"],["n","N"],["s","S"],["-","_"],["Enter","Enter"]],[["Shift","Shift"],[";",":"],["q","Q"],["j","J"],["k",
"K"],["x","X"],["b","B"],["m","M"],["w","W"],["v","V"],["z","Z"],["Shift","Shift"]],[[" "," "]]]};this.VKI_layout["\u0395\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac"]={"name":"Greek","keys":[[["`","~"],["1","!"],["2","@","\u00b2"],["3","#","\u00b3"],["4","$","\u00a3"],["5","%","\u00a7"],["6","^","\u00b6"],["7","&"],["8","*","\u00a4"],["9","(","\u00a6"],["0",")","\u00ba"],["-","_","\u00b1"],["=","+","\u00bd"],["Bksp","Bksp"]],[["Tab","Tab"],[";",":"],["\u03c2","^"],["\u03b5","\u0395"],["\u03c1","\u03a1"],
["\u03c4","\u03a4"],["\u03c5","\u03a5"],["\u03b8","\u0398"],["\u03b9","\u0399"],["\u03bf","\u039f"],["\u03c0","\u03a0"],["[","{","\u201c"],["]","}","\u201d"],["\\","|","\u00ac"]],[["Caps","Caps"],["\u03b1","\u0391"],["\u03c3","\u03a3"],["\u03b4","\u0394"],["\u03c6","\u03a6"],["\u03b3","\u0393"],["\u03b7","\u0397"],["\u03be","\u039e"],["\u03ba","\u039a"],["\u03bb","\u039b"],["\u0384","\u00a8","\u0385"],["'",'"'],["Enter","Enter"]],[["Shift","Shift"],["<",">"],["\u03b6","\u0396"],["\u03c7","\u03a7"],
["\u03c8","\u03a8"],["\u03c9","\u03a9"],["\u03b2","\u0392"],["\u03bd","\u039d"],["\u03bc","\u039c"],[",","<"],[".",">"],["/","?"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]],"lang":["el"]};this.VKI_layout["Eesti"]={"name":"Estonian","keys":[[["\u02c7","~"],["1","!"],["2",'"',"@","@"],["3","#","\u00a3","\u00a3"],["4","\u00a4","$","$"],["5","%","\u20ac"],["6","&"],["7","/","{","{"],["8","(","[","["],["9",")","]","]"],["0","=","}","}"],["+","?","\\","\\"],["\u00b4","`"],["Bksp","Bksp"]],
[["Tab","Tab"],["q","Q"],["w","W"],["e","E","\u20ac"],["r","R"],["t","T"],["y","Y"],["u","U"],["i","I"],["o","O"],["p","P"],["\u00fc","\u00dc"],["\u00f5","\u00d5","\u00a7","\u00a7"],["'","*","\u00bd","\u00bd"]],[["Caps","Caps"],["a","A"],["s","S","\u0161","\u0160"],["d","D"],["f","F"],["g","G"],["h","H"],["j","J"],["k","K"],["l","L"],["\u00f6","\u00d6"],["\u00e4","\u00c4","^","^"],["Enter","Enter"]],[["Shift","Shift"],["<",">","|","|"],["z","Z","\u017e","\u017d"],["x","X"],["c","C"],["v","V"],["b",
"B"],["n","N"],["m","M"],[",",";"],[".",":"],["-","_"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]],"lang":["et"]};this.VKI_layout["Espa\u00f1ol"]={"name":"Spanish","keys":[[["\u00ba","\u00aa","\\"],["1","!","|"],["2",'"',"@"],["3","'","#"],["4","$","~"],["5","%","\u20ac"],["6","&","\u00ac"],["7","/"],["8","("],["9",")"],["0","="],["'","?"],["\u00a1","\u00bf"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q"],["w","W"],["e","E"],["r","R"],["t","T"],["y","Y"],["u","U"],["i","I"],["o","O"],["p",
"P"],["`","^","["],["+","*","]"],["\u00e7","\u00c7","}"]],[["Caps","Caps"],["a","A"],["s","S"],["d","D"],["f","F"],["g","G"],["h","H"],["j","J"],["k","K"],["l","L"],["\u00f1","\u00d1"],["\u00b4","\u00a8","{"],["Enter","Enter"]],[["Shift","Shift"],["<",">"],["z","Z"],["x","X"],["c","C"],["v","V"],["b","B"],["n","N"],["m","M"],[",",";"],[".",":"],["-","_"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]],"lang":["es"]};this.VKI_layout["\u062f\u0631\u06cc"]={"name":"Dari","keys":[[["\u200d",
"\u00f7","~"],["\u06f1","!","`"],["\u06f2","\u066c","@"],["\u06f3","\u066b","#"],["\u06f4","\u060b","$"],["\u06f5","\u066a","%"],["\u06f6","\u00d7","^"],["\u06f7","\u060c","&"],["\u06f8","*","\u2022"],["\u06f9",")","\u200e"],["\u06f0","(","\u200f"],["-","\u0640","_"],["=","+"],["Bksp","Bksp"]],[["Tab","Tab"],["\u0636","\u0652","\u00b0"],["\u0635","\u064c"],["\u062b","\u064d","\u20ac"],["\u0642","\u064b","\ufd3e"],["\u0641","\u064f","\ufd3f"],["\u063a","\u0650","\u0656"],["\u0639","\u064e","\u0659"],
["\u0647","\u0651","\u0655"],["\u062e","]","'"],["\u062d","[",'"'],["\u062c","}","\u0681"],["\u0686","{","\u0685"],["\\","|","?"]],[["Caps","Caps"],["\u0634","\u0624","\u069a"],["\u0633","\u0626","\u06cd"],["\u06cc","\u064a","\u0649"],["\u0628","\u0625","\u06d0"],["\u0644","\u0623","\u06b7"],["\u0627","\u0622","\u0671"],["\u062a","\u0629","\u067c"],["\u0646","\u00bb","\u06bc"],["\u0645","\u00ab","\u06ba"],["\u06a9",":",";"],["\u06af","\u061b","\u06ab"],["Enter","Enter"]],[["Shift","Shift"],["\u0638",
"\u0643","\u06d2"],["\u0637","\u0653","\u0691"],["\u0632","\u0698","\u0696"],["\u0631","\u0670","\u0693"],["\u0630","\u200c","\u0688"],["\u062f","\u0654","\u0689"],["\u067e","\u0621","\u0679"],["\u0648",">",","],[".","<","\u06c7"],["/","\u061f","\u06c9"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]],"lang":["fa-AF"]};this.VKI_layout["\u0641\u0627\u0631\u0633\u06cc"]={"name":"Farsi","keys":[[["\u067e","\u0651 "],["1","!","\u00a1","\u00b9"],["2","@","\u00b2"],["3","#","\u00b3"],["4","$",
"\u00a4","\u00a3"],["5","%","\u20ac"],["6","^","\u00bc"],["7","&","\u00bd"],["8","*","\u00be"],["9","(","\u2018"],["0",")","\u2019"],["-","_","\u00a5"],["=","+","\u00d7","\u00f7"],["Bksp","Bksp"]],[["Tab","Tab"],["\u0636","\u064e"],["\u0635","\u064b"],["\u062b","\u064f"],["\u0642","\u064c"],["\u0641","\u0644"],["\u063a","\u0625"],["\u0639","\u2018"],["\u0647","\u00f7"],["\u062e","\u00d7"],["\u062d","\u061b"],["\u062c","<"],["\u0686",">"],["\u0698","|"]],[["Caps","Caps"],["\u0634","\u0650"],["\u0633",
"\u064d"],["\u064a","]"],["\u0628","["],["\u0644","\u0644"],["\u0627","\u0623"],["\u062a","\u0640"],["\u0646","\u060c"],["\u0645","\\"],["\u06af",":"],["\u0643",'"'],["Enter","Enter"]],[["Shift","Shift"],["\u0638","~"],["\u0637","\u0652"],["\u0632","}"],["\u0631","{"],["\u0630","\u0644"],["\u062f","\u0622"],["\u0626","\u0621"],["\u0648",","],[".","."],["/","\u061f"],["Shift","Shift"]],[[" "," "," "," "],["Alt","Alt"]]],"lang":["fa"]};this.VKI_layout["F\u00f8royskt"]={"name":"Faeroese","keys":[[["\u00bd",
"\u00a7"],["1","!"],["2",'"',"@"],["3","#","\u00a3"],["4","\u00a4","$"],["5","%","\u20ac"],["6","&"],["7","/","{"],["8","(","["],["9",")","]"],["0","=","}"],["+","?"],["\u00b4","`","|"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q"],["w","W"],["e","E","\u20ac"],["r","R"],["t","T"],["y","Y"],["u","U"],["i","I"],["o","O"],["p","P"],["\u00e5","\u00c5","\u00a8"],["\u00f0","\u00d0","~"],["'","*"]],[["Caps","Caps"],["a","A"],["s","S"],["d","D"],["f","F"],["g","G"],["h","H"],["j","J"],["k","K"],["l","L"],["\u00e6",
"\u00c6"],["\u00f8","\u00d8","^"],["Enter","Enter"]],[["Shift","Shift"],["<",">","\\"],["z","Z"],["x","X"],["c","C"],["v","V"],["b","B"],["n","N"],["m","M","\u00b5"],[",",";"],[".",":"],["-","_"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]],"lang":["fo"]};this.VKI_layout["Fran\u00e7ais"]={"name":"French","keys":[[["\u00b2","\u00b3"],["&","1"],["\u00e9","2","~"],['"',"3","#"],["'","4","{"],["(","5","["],["-","6","|"],["\u00e8","7","`"],["_","8","\\"],["\u00e7","9","^"],["\u00e0","0","@"],
[")","\u00b0","]"],["=","+","}"],["Bksp","Bksp"]],[["Tab","Tab"],["a","A"],["z","Z"],["e","E","\u20ac"],["r","R"],["t","T"],["y","Y"],["u","U"],["i","I"],["o","O"],["p","P"],["^","\u00a8"],["$","\u00a3","\u00a4"],["*","\u03bc"]],[["Caps","Caps"],["q","Q"],["s","S"],["d","D"],["f","F"],["g","G"],["h","H"],["j","J"],["k","K"],["l","L"],["m","M"],["\u00f9","%"],["Enter","Enter"]],[["Shift","Shift"],["<",">"],["w","W"],["x","X"],["c","C"],["v","V"],["b","B"],["n","N"],[",","?"],[";","."],[":","/"],["!",
"\u00a7"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]],"lang":["fr"]};this.VKI_layout["Gaeilge"]={"name":"Irish / Gaelic","keys":[[["`","\u00ac","\u00a6","\u00a6"],["1","!"],["2",'"'],["3","\u00a3"],["4","$","\u20ac"],["5","%"],["6","^"],["7","&"],["8","*"],["9","("],["0",")"],["-","_"],["=","+"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q"],["w","W"],["e","E","\u00e9","\u00c9"],["r","R"],["t","T"],["y","Y","\u00fd","\u00dd"],["u","U","\u00fa","\u00da"],["i","I","\u00ed","\u00cd"],["o","O",
"\u00f3","\u00d3"],["p","P"],["[","{"],["]","}"],["#","~"]],[["Caps","Caps"],["a","A","\u00e1","\u00c1"],["s","S"],["d","D"],["f","F"],["g","G"],["h","H"],["j","J"],["k","K"],["l","L"],[";",":"],["'","@","\u00b4","`"],["Enter","Enter"]],[["Shift","Shift"],["\\","|"],["z","Z"],["x","X"],["c","C"],["v","V"],["b","B"],["n","N"],["m","M"],[",","<"],[".",">"],["/","?"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]],"lang":["ga","gd"]};this.VKI_layout["\u0a97\u0ac1\u0a9c\u0ab0\u0abe\u0aa4\u0ac0"]=
{"name":"Gujarati","keys":[[[""],["1","\u0a8d","\u0ae7"],["2","\u0ac5","\u0ae8"],["3","\u0acd\u0ab0","\u0ae9"],["4","\u0ab0\u0acd","\u0aea"],["5","\u0a9c\u0acd\u0a9e","\u0aeb"],["6","\u0aa4\u0acd\u0ab0","\u0aec"],["7","\u0a95\u0acd\u0ab7","\u0aed"],["8","\u0ab6\u0acd\u0ab0","\u0aee"],["9","(","\u0aef"],["0",")","\u0ae6"],["-","\u0a83"],["\u0ac3","\u0a8b","\u0ac4","\u0ae0"],["Bksp","Bksp"]],[["Tab","Tab"],["\u0acc","\u0a94"],["\u0ac8","\u0a90"],["\u0abe","\u0a86"],["\u0ac0","\u0a88"],["\u0ac2","\u0a8a"],
["\u0aac","\u0aad"],["\u0ab9","\u0a99"],["\u0a97","\u0a98"],["\u0aa6","\u0aa7"],["\u0a9c","\u0a9d"],["\u0aa1","\u0aa2"],["\u0abc","\u0a9e"],["\u0ac9","\u0a91"]],[["Caps","Caps"],["\u0acb","\u0a93"],["\u0ac7","\u0a8f"],["\u0acd","\u0a85"],["\u0abf","\u0a87"],["\u0ac1","\u0a89"],["\u0aaa","\u0aab"],["\u0ab0"],["\u0a95","\u0a96"],["\u0aa4","\u0aa5"],["\u0a9a","\u0a9b"],["\u0a9f","\u0aa0"],["Enter","Enter"]],[["Shift","Shift"],[""],["\u0a82","\u0a81","","\u0ad0"],["\u0aae","\u0aa3"],["\u0aa8"],["\u0ab5"],
["\u0ab2","\u0ab3"],["\u0ab8","\u0ab6"],[",","\u0ab7"],[".","\u0964","\u0965","\u0abd"],["\u0aaf"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]],"lang":["gu"]};this.VKI_layout["\u05e2\u05d1\u05e8\u05d9\u05ea"]={"name":"Hebrew","keys":[[["~","`"],["1","!"],["2","@"],["3","#"],["4","$","\u20aa"],["5","%"],["6","^"],["7","&"],["8","*"],["9",")"],["0","("],["-","_"],["=","+"],["Bksp","Bksp"]],[["Tab","Tab"],["/","Q"],["'","W"],["\u05e7","E","\u20ac"],["\u05e8","R"],["\u05d0","T"],["\u05d8",
"Y"],["\u05d5","U","\u05f0"],["\u05df","I"],["\u05dd","O"],["\u05e4","P"],["\\","|"],["Enter","Enter"]],[["Caps","Caps"],["\u05e9","A"],["\u05d3","S"],["\u05d2","D"],["\u05db","F"],["\u05e2","G"],["\u05d9","H","\u05f2"],["\u05d7","J","\u05f1"],["\u05dc","K"],["\u05da","L"],["\u05e3",":"],[",",'"'],["]","}"],["[","{"]],[["Shift","Shift"],["\u05d6","Z"],["\u05e1","X"],["\u05d1","C"],["\u05d4","V"],["\u05e0","B"],["\u05de","N"],["\u05e6","M"],["\u05ea",">"],["\u05e5","<"],[".","?"],["Shift","Shift"]],
[[" "," "," "," "],["AltGr","AltGr"]]],"lang":["he"]};this.VKI_layout["\u0926\u0947\u0935\u0928\u093e\u0917\u0930\u0940"]={"name":"Devanagari","keys":[[["\u094a","\u0912"],["1","\u090d","\u0967"],["2","\u0945","\u0968"],["3","\u094d\u0930","\u0969"],["4","\u0930\u094d","\u096a"],["5","\u091c\u094d\u091e","\u096b"],["6","\u0924\u094d\u0930","\u096c"],["7","\u0915\u094d\u0937","\u096d"],["8","\u0936\u094d\u0930","\u096e"],["9","(","\u096f"],["0",")","\u0966"],["-","\u0903"],["\u0943","\u090b","\u0944",
"\u0960"],["Bksp","Bksp"]],[["Tab","Tab"],["\u094c","\u0914"],["\u0948","\u0910"],["\u093e","\u0906"],["\u0940","\u0908","\u0963","\u0961"],["\u0942","\u090a"],["\u092c","\u092d"],["\u0939","\u0919"],["\u0917","\u0918","\u095a"],["\u0926","\u0927"],["\u091c","\u091d","\u095b"],["\u0921","\u0922","\u095c","\u095d"],["\u093c","\u091e"],["\u0949","\u0911"]],[["Caps","Caps"],["\u094b","\u0913"],["\u0947","\u090f"],["\u094d","\u0905"],["\u093f","\u0907","\u0962","\u090c"],["\u0941","\u0909"],["\u092a",
"\u092b","","\u095e"],["\u0930","\u0931"],["\u0915","\u0916","\u0958","\u0959"],["\u0924","\u0925"],["\u091a","\u091b","\u0952"],["\u091f","\u0920","","\u0951"],["Enter","Enter"]],[["Shift","Shift"],["\u0946","\u090e","\u0953"],["\u0902","\u0901","","\u0950"],["\u092e","\u0923","\u0954"],["\u0928","\u0929"],["\u0935","\u0934"],["\u0932","\u0933"],["\u0938","\u0936"],[",","\u0937","\u0970"],[".","\u0964","\u0965","\u093d"],["\u092f","\u095f"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]],
"lang":["hi-Deva"]};this.VKI_layout["\u0939\u093f\u0902\u0926\u0940"]={"name":"Hindi","keys":[[["\u200d","\u200c","`","~"],["1","\u090d","\u0967","!"],["2","\u0945","\u0968","@"],["3","\u094d\u0930","\u0969","#"],["4","\u0930\u094d","\u096a","$"],["5","\u091c\u094d\u091e","\u096b","%"],["6","\u0924\u094d\u0930","\u096c","^"],["7","\u0915\u094d\u0937","\u096d","&"],["8","\u0936\u094d\u0930","\u096e","*"],["9","(","\u096f","("],["0",")","\u0966",")"],["-","\u0903","-","_"],["\u0943","\u090b","=","+"],
["Bksp","Bksp"]],[["Tab","Tab"],["\u094c","\u0914"],["\u0948","\u0910"],["\u093e","\u0906"],["\u0940","\u0908"],["\u0942","\u090a"],["\u092c","\u092d"],["\u0939","\u0919"],["\u0917","\u0918"],["\u0926","\u0927"],["\u091c","\u091d"],["\u0921","\u0922","[","{"],["\u093c","\u091e","]","}"],["\u0949","\u0911","\\","|"]],[["Caps","Caps"],["\u094b","\u0913"],["\u0947","\u090f"],["\u094d","\u0905"],["\u093f","\u0907"],["\u0941","\u0909"],["\u092a","\u092b"],["\u0930","\u0931"],["\u0915","\u0916"],["\u0924",
"\u0925"],["\u091a","\u091b",";",":"],["\u091f","\u0920","'",'"'],["Enter","Enter"]],[["Shift","Shift"],[""],["\u0902","\u0901","","\u0950"],["\u092e","\u0923"],["\u0928"],["\u0935"],["\u0932","\u0933"],["\u0938","\u0936"],[",","\u0937",",","<"],[".","\u0964",".",">"],["\u092f","\u095f","/","?"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]],"lang":["hi"]};this.VKI_layout["Hrvatski"]={"name":"Croatian","keys":this.VKI_layout["Bosanski"].keys.slice(0),"lang":["hr"]};this.VKI_layout["\u0540\u0561\u0575\u0565\u0580\u0565\u0576 \u0561\u0580\u0565\u0582\u0574\u0578\u0582\u057f\u0584"]=
{"name":"Western Armenian","keys":[[["\u055d","\u055c"],[":","1"],["\u0571","\u0541"],["\u0575","\u0545"],["\u055b","3"],[",","4"],["-","9"],[".","\u0587"],["\u00ab","("],["\u00bb",")"],["\u0585","\u0555"],["\u057c","\u054c"],["\u056a","\u053a"],["Bksp","Bksp"]],[["Tab","Tab"],["\u056d","\u053d"],["\u057e","\u054e"],["\u0567","\u0537"],["\u0580","\u0550"],["\u0564","\u0534"],["\u0565","\u0535"],["\u0568","\u0538"],["\u056b","\u053b"],["\u0578","\u0548"],["\u0562","\u0532"],["\u0579","\u0549"],["\u057b",
"\u054b"],["'","\u055e"]],[["Caps","Caps"],["\u0561","\u0531"],["\u057d","\u054d"],["\u057f","\u054f"],["\u0586","\u0556"],["\u056f","\u053f"],["\u0570","\u0540"],["\u0573","\u0543"],["\u0584","\u0554"],["\u056c","\u053c"],["\u0569","\u0539"],["\u0583","\u0553"],["Enter","Enter"]],[["Shift","Shift"],["\u0566","\u0536"],["\u0581","\u0551"],["\u0563","\u0533"],["\u0582","\u0552"],["\u057a","\u054a"],["\u0576","\u0546"],["\u0574","\u0544"],["\u0577","\u0547"],["\u0572","\u0542"],["\u056e","\u053e"],
["Shift","Shift"]],[[" "," "]]],"lang":["hy-arevmda"]};this.VKI_layout["\u0540\u0561\u0575\u0565\u0580\u0565\u0576 \u0561\u0580\u0565\u0582\u0565\u056c\u0584"]={"name":"Eastern Armenian","keys":[[["\u055d","\u055c"],[":","1"],["\u0571","\u0541"],["\u0575","\u0545"],["\u055b","3"],[",","4"],["-","9"],[".","\u0587"],["\u00ab","("],["\u00bb",")"],["\u0585","\u0555"],["\u057c","\u054c"],["\u056a","\u053a"],["Bksp","Bksp"]],[["Tab","Tab"],["\u056d","\u053d"],["\u0582","\u0552"],["\u0567","\u0537"],["\u0580",
"\u0550"],["\u057f","\u054f"],["\u0565","\u0535"],["\u0568","\u0538"],["\u056b","\u053b"],["\u0578","\u0548"],["\u057a","\u054a"],["\u0579","\u0549"],["\u057b","\u054b"],["'","\u055e"]],[["Caps","Caps"],["\u0561","\u0531"],["\u057d","\u054d"],["\u0564","\u0534"],["\u0586","\u0556"],["\u0584","\u0554"],["\u0570","\u0540"],["\u0573","\u0543"],["\u056f","\u053f"],["\u056c","\u053c"],["\u0569","\u0539"],["\u0583","\u0553"],["Enter","Enter"]],[["Shift","Shift"],["\u0566","\u0536"],["\u0581","\u0551"],
["\u0563","\u0533"],["\u057e","\u054e"],["\u0562","\u0532"],["\u0576","\u0546"],["\u0574","\u0544"],["\u0577","\u0547"],["\u0572","\u0542"],["\u056e","\u053e"],["Shift","Shift"]],[[" "," "]]],"lang":["hy"]};this.VKI_layout["\u00cdslenska"]={"name":"Icelandic","keys":[[["\u00b0","\u00a8","\u00b0"],["1","!"],["2",'"'],["3","#"],["4","$"],["5","%","\u20ac"],["6","&"],["7","/","{"],["8","(","["],["9",")","]"],["0","=","}"],["\u00f6","\u00d6","\\"],["-","_"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q","@"],
["w","W"],["e","E","\u20ac"],["r","R"],["t","T"],["y","Y"],["u","U"],["i","I"],["o","O"],["p","P"],["\u00f0","\u00d0"],["'","?","~"],["+","*","`"]],[["Caps","Caps"],["a","A"],["s","S"],["d","D"],["f","F"],["g","G"],["h","H"],["j","J"],["k","K"],["l","L"],["\u00e6","\u00c6"],["\u00b4","'","^"],["Enter","Enter"]],[["Shift","Shift"],["<",">","|"],["z","Z"],["x","X"],["c","C"],["v","V"],["b","B"],["n","N"],["m","M","\u00b5"],[",",";"],[".",":"],["\u00fe","\u00de"],["Shift","Shift"]],[[" "," "," "," "],
["AltGr","AltGr"]]],"lang":["is"]};this.VKI_layout["Italiano"]={"name":"Italian","keys":[[["\\","|"],["1","!"],["2",'"'],["3","\u00a3"],["4","$","\u20ac"],["5","%"],["6","&"],["7","/"],["8","("],["9",")"],["0","="],["'","?"],["\u00ec","^"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q"],["w","W"],["e","E","\u20ac"],["r","R"],["t","T"],["y","Y"],["u","U"],["i","I"],["o","O"],["p","P"],["\u00e8","\u00e9","[","{"],["+","*","]","}"],["\u00f9","\u00a7"]],[["Caps","Caps"],["a","A"],["s","S"],["d","D"],["f","F"],
["g","G"],["h","H"],["j","J"],["k","K"],["l","L"],["\u00f2","\u00e7","@"],["\u00e0","\u00b0","#"],["Enter","Enter"]],[["Shift","Shift"],["<",">"],["z","Z"],["x","X"],["c","C"],["v","V"],["b","B"],["n","N"],["m","M"],[",",";"],[".",":"],["-","_"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]],"lang":["it"]};this.VKI_layout["\u65e5\u672c\u8a9e"]={"name":"Japanese Hiragana/Katakana","keys":[[["\uff5e"],["\u306c","\u30cc"],["\u3075","\u30d5"],["\u3042","\u30a2","\u3041","\u30a1"],["\u3046",
"\u30a6","\u3045","\u30a5"],["\u3048","\u30a8","\u3047","\u30a7"],["\u304a","\u30aa","\u3049","\u30a9"],["\u3084","\u30e4","\u3083","\u30e3"],["\u3086","\u30e6","\u3085","\u30e5"],["\u3088","\u30e8","\u3087","\u30e7"],["\u308f","\u30ef","\u3092","\u30f2"],["\u307b","\u30db","\u30fc","\uff1d"],["\u3078","\u30d8","\uff3e","\uff5e"],["Bksp","Bksp"]],[["Tab","Tab"],["\u305f","\u30bf"],["\u3066","\u30c6"],["\u3044","\u30a4","\u3043","\u30a3"],["\u3059","\u30b9"],["\u304b","\u30ab"],["\u3093","\u30f3"],
["\u306a","\u30ca"],["\u306b","\u30cb"],["\u3089","\u30e9"],["\u305b","\u30bb"],["\u3001","\u3001","\uff20","\u2018"],["\u3002","\u3002","\u300c","\uff5b"],["\uffe5","","","\uff0a"],["\u309b",'"',"\uffe5","\uff5c"]],[["Caps","Caps"],["\u3061","\u30c1"],["\u3068","\u30c8"],["\u3057","\u30b7"],["\u306f","\u30cf"],["\u304d","\u30ad"],["\u304f","\u30af"],["\u307e","\u30de"],["\u306e","\u30ce"],["\u308c","\u30ec","\uff1b","\uff0b"],["\u3051","\u30b1","\uff1a","\u30f6"],["\u3080","\u30e0","\u300d","\uff5d"],
["Enter","Enter"]],[["Shift","Shift"],["\u3064","\u30c4"],["\u3055","\u30b5"],["\u305d","\u30bd"],["\u3072","\u30d2"],["\u3053","\u30b3"],["\u307f","\u30df"],["\u3082","\u30e2"],["\u306d","\u30cd","\u3001","\uff1c"],["\u308b","\u30eb","\u3002","\uff1e"],["\u3081","\u30e1","\u30fb","\uff1f"],["\u308d","\u30ed","","\uff3f"],["Shift","Shift"]],[["AltLk","AltLk"],[" "," "," "," "],["Alt","Alt"]]],"lang":["ja"]};this.VKI_layout["\u10e5\u10d0\u10e0\u10d7\u10e3\u10da\u10d8"]={"name":"Georgian","keys":[[["\u201e",
"\u201c"],["!","1"],["?","2"],["\u2116","3"],["\u00a7","4"],["%","5"],[":","6"],[".","7"],[";","8"],[",","9"],["/","0"],["\u2013","-"],["=","+"],["Bksp","Bksp"]],[["Tab","Tab"],["\u10e6","\u10e6"],["\u10ef","\u10ef"],["\u10e3","\u10e3"],["\u10d9","\u10d9"],["\u10d4","\u10d4","\u10f1"],["\u10dc","\u10dc"],["\u10d2","\u10d2"],["\u10e8","\u10e8"],["\u10ec","\u10ec"],["\u10d6","\u10d6"],["\u10ee","\u10ee","\u10f4"],["\u10ea","\u10ea"],["(",")"]],[["Caps","Caps"],["\u10e4","\u10e4","\u10f6"],["\u10eb",
"\u10eb"],["\u10d5","\u10d5","\u10f3"],["\u10d7","\u10d7"],["\u10d0","\u10d0"],["\u10de","\u10de"],["\u10e0","\u10e0"],["\u10dd","\u10dd"],["\u10da","\u10da"],["\u10d3","\u10d3"],["\u10df","\u10df"],["Enter","Enter"]],[["Shift","Shift"],["\u10ed","\u10ed"],["\u10e9","\u10e9"],["\u10e7","\u10e7"],["\u10e1","\u10e1"],["\u10db","\u10db"],["\u10d8","\u10d8","\u10f2"],["\u10e2","\u10e2"],["\u10e5","\u10e5"],["\u10d1","\u10d1"],["\u10f0","\u10f0","\u10f5"],["Shift","Shift"]],[[" "," "," "," "],["AltGr",
"AltGr"]]],"lang":["ka"]};this.VKI_layout["\u049a\u0430\u0437\u0430\u049b\u0448\u0430"]={"name":"Kazakh","keys":[[["(",")"],['"',"!"],["\u04d9","\u04d8"],["\u0456","\u0406"],["\u04a3","\u04a2"],["\u0493","\u0492"],[",",";"],[".",":"],["\u04af","\u04ae"],["\u04b1","\u04b0"],["\u049b","\u049a"],["\u04e9","\u04e8"],["\u04bb","\u04ba"],["Bksp","Bksp"]],[["Tab","Tab"],["\u0439","\u0419"],["\u0446","\u0426"],["\u0443","\u0423"],["\u043a","\u041a"],["\u0435","\u0415"],["\u043d","\u041d"],["\u0433","\u0413"],
["\u0448","\u0428"],["\u0449","\u0429"],["\u0437","\u0417"],["\u0445","\u0425"],["\u044a","\u042a"],["\\","/"]],[["Caps","Caps"],["\u0444","\u0424"],["\u044b","\u042b"],["\u0432","\u0412"],["\u0430","\u0410"],["\u043f","\u041f"],["\u0440","\u0420"],["\u043e","\u041e"],["\u043b","\u041b"],["\u0434","\u0414"],["\u0436","\u0416"],["\u044d","\u042d"],["Enter","Enter"]],[["Shift","Shift"],["\\","|"],["\u044f","\u042f"],["\u0447","\u0427"],["\u0441","\u0421"],["\u043c","\u041c"],["\u0438","\u0418"],["\u0442",
"\u0422"],["\u044c","\u042c"],["\u0431","\u0411"],["\u044e","\u042e"],["\u2116","?"],["Shift","Shift"]],[[" "," "]]],"lang":["kk"]};this.VKI_layout["\u1797\u17b6\u179f\u17b6\u1781\u17d2\u1798\u17c2\u179a"]={"name":"Khmer","keys":[[["\u00ab","\u00bb","\u200d"],["\u17e1","!","\u200c","\u17f1"],["\u17e2","\u17d7","@","\u17f2"],["\u17e3",'"',"\u17d1","\u17f3"],["\u17e4","\u17db","$","\u17f4"],["\u17e5","%","\u20ac","\u17f5"],["\u17e6","\u17cd","\u17d9","\u17f6"],["\u17e7","\u17d0","\u17da","\u17f7"],
["\u17e8","\u17cf","*","\u17f8"],["\u17e9","(","{","\u17f9"],["\u17e0",")","}","\u17f0"],["\u17a5","\u17cc","x"],["\u17b2","=","\u17ce"],["Bksp","Bksp"]],[["Tab","Tab"],["\u1786","\u1788","\u17dc","\u19e0"],["\u17b9","\u17ba","\u17dd","\u19e1"],["\u17c1","\u17c2","\u17af","\u19e2"],["\u179a","\u17ac","\u17ab","\u19e3"],["\u178f","\u1791","\u17a8","\u19e4"],["\u1799","\u17bd","\u1799\u17be\u1784","\u19e5"],["\u17bb","\u17bc","","\u19e6"],["\u17b7","\u17b8","\u17a6","\u19e7"],["\u17c4","\u17c5","\u17b1",
"\u19e8"],["\u1795","\u1797","\u17b0","\u19e9"],["\u17c0","\u17bf","\u17a9","\u19ea"],["\u17aa","\u17a7","\u17b3","\u19eb"],["\u17ae","\u17ad","\\"]],[["Caps","Caps"],["\u17b6","\u17b6\u17c6","\u17b5","\u19ec"],["\u179f","\u17c3","","\u19ed"],["\u178a","\u178c","\u17d3","\u19ee"],["\u1790","\u1792","","\u19ef"],["\u1784","\u17a2","\u17a4","\u19f0"],["\u17a0","\u17c7","\u17a3","\u19f1"],["\u17d2","\u1789","\u17b4","\u19f2"],["\u1780","\u1782","\u179d","\u19f3"],["\u179b","\u17a1","\u17d8","\u19f4"],
["\u17be","\u17c4\u17c7","\u17d6","\u19f5"],["\u17cb","\u17c9","\u17c8","\u19f6"],["Enter","Enter"]],[["Shift","Shift"],["\u178b","\u178d","|","\u19f7"],["\u1781","\u1783","\u1781\u17d2\u1789\u17bb\u17c6","\u19f8"],["\u1785","\u1787","-","\u19f9"],["\u179c","\u17c1\u17c7","+","\u19fa"],["\u1794","\u1796","\u179e","\u19fb"],["\u1793","\u178e","[","\u19fc"],["\u1798","\u17c6","]","\u19fd"],["\u17bb\u17c6","\u17bb\u17c7",",","\u19fe"],["\u17d4","\u17d5",".","\u19ff"],["\u17ca","?","/"],["Shift","Shift"]],
[["\u200b"," ","\u00a0"," "],["AltGr","AltGr"]]],"lang":["km"]};this.VKI_layout["\u0c95\u0ca8\u0ccd\u0ca8\u0ca1"]={"name":"Kannada","keys":[[["\u0cca","\u0c92"],["1","","\u0ce7"],["2","","\u0ce8"],["3","\u0ccd\u0cb0","\u0ce9"],["4","\u0cb0\u0ccd","\u0cea"],["5","\u0c9c\u0ccd\u0c9e","\u0ceb"],["6","\u0ca4\u0ccd\u0cb0","\u0cec"],["7","\u0c95\u0ccd\u0cb7","\u0ced"],["8","\u0cb6\u0ccd\u0cb0","\u0cee"],["9","(","\u0cef"],["0",")","\u0ce6"],["-","\u0c83"],["\u0cc3","\u0c8b","\u0cc4","\u0ce0"],["Bksp","Bksp"]],
[["Tab","Tab"],["\u0ccc","\u0c94"],["\u0cc8","\u0c90","\u0cd6"],["\u0cbe","\u0c86"],["\u0cc0","\u0c88","","\u0ce1"],["\u0cc2","\u0c8a"],["\u0cac","\u0cad"],["\u0cb9","\u0c99"],["\u0c97","\u0c98"],["\u0ca6","\u0ca7"],["\u0c9c","\u0c9d"],["\u0ca1","\u0ca2"],["Enter","Enter"]],[["Caps","Caps"],["\u0ccb","\u0c93"],["\u0cc7","\u0c8f","\u0cd5"],["\u0ccd","\u0c85"],["\u0cbf","\u0c87","","\u0c8c"],["\u0cc1","\u0c89"],["\u0caa","\u0cab","","\u0cde"],["\u0cb0","\u0cb1"],["\u0c95","\u0c96"],["\u0ca4","\u0ca5"],
["\u0c9a","\u0c9b"],["\u0c9f","\u0ca0"],["","\u0c9e"]],[["Shift","Shift"],["\u0cc6","\u0c8f"],["\u0c82"],["\u0cae","\u0ca3"],["\u0ca8"],["\u0cb5"],["\u0cb2","\u0cb3"],["\u0cb8","\u0cb6"],[",","\u0cb7"],[".","|"],["\u0caf"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]],"lang":["kn"]};this.VKI_layout["\ud55c\uad6d\uc5b4"]={"name":"Korean","keys":[[["`","~","`","~"],["1","!","1","!"],["2","@","2","@"],["3","#","3","#"],["4","$","4","$"],["5","%","5","%"],["6","^","6","^"],["7","&","7","&"],
["8","*","8","*"],["9",")","9",")"],["0","(","0","("],["-","_","-","_"],["=","+","=","+"],["\u20a9","|","\u20a9","|"],["Bksp","Bksp"]],[["Tab","Tab"],["\u1107","\u1108","q","Q"],["\u110c","\u110d","w","W"],["\u1103","\u1104","e","E"],["\u1100","\u1101","r","R"],["\u1109","\u110a","t","T"],["\u116d","","y","Y"],["\u1167","","u","U"],["\u1163","","i","I"],["\u1162","\u1164","o","O"],["\u1166","\u1168","p","P"],["[","{","[","{"],["]","}","]","}"]],[["Caps","Caps"],["\u1106","","a","A"],["\u1102","",
"s","S"],["\u110b","","d","D"],["\u1105","","f","F"],["\u1112","","g","G"],["\u1169","","h","H"],["\u1165","","j","J"],["\u1161","","k","K"],["\u1175","","l","L"],[";",":",";",":"],["'",'"',"'",'"'],["Enter","Enter"]],[["Shift","Shift"],["\u110f","","z","Z"],["\u1110","","x","X"],["\u110e","","c","C"],["\u1111","","v","V"],["\u1172","","b","B"],["\u116e","","n","N"],["\u1173","","m","M"],[",","<",",","<"],[".",">",".",">"],["/","?","/","?"],["Shift","Shift"]],[[" "," "," "," "],["Kor","Alt"]]],"lang":["ko"]};
this.VKI_layout["Kurd\u00ee"]={"name":"Kurdish","keys":[[["\u20ac","~"],["\u0661","!"],["\u0662","@"],["\u0663","#"],["\u0664","$"],["\u0665","%"],["\u0666","^"],["\u0667","&"],["\u0668","*"],["\u0669","("],["\u0660",")"],["-","_"],["=","+"],["Bksp","Bksp"]],[["Tab","Tab"],["\u0642","`"],["\u0648","\u0648\u0648"],["\u06d5","\u064a"],["\u0631","\u0695"],["\u062a","\u0637"],["\u06cc","\u06ce"],["\u0626","\u0621"],["\u062d","\u0639"],["\u06c6","\u0624"],["\u067e","\u062b"],["[","{"],["]","}"],["\\",
"|"]],[["Caps","Caps"],["\u0627","\u0622"],["\u0633","\u0634"],["\u062f","\u0630"],["\u0641","\u0625"],["\u06af","\u063a"],["\u0647","\u200c"],["\u0698","\u0623"],["\u06a9","\u0643"],["\u0644","\u06b5"],["\u061b",":"],["'",'"'],["Enter","Enter"]],[["Shift","Shift"],["\u0632","\u0636"],["\u062e","\u0635"],["\u062c","\u0686"],["\u06a4","\u0638"],["\u0628","\u0649"],["\u0646","\u0629"],["\u0645","\u0640"],["\u060c","<"],[".",">"],["/","\u061f"],["Shift","Shift"]],[[" "," "]]],"lang":["ku"]};this.VKI_layout["\u041a\u044b\u0440\u0433\u044b\u0437\u0447\u0430"]=
{"name":"Kyrgyz","keys":[[["\u0451","\u0401"],["1","!"],["2",'"'],["3","\u2116"],["4",";"],["5","%"],["6",":"],["7","?"],["8","*"],["9","("],["0",")"],["-","_"],["=","+"],["Bksp","Bksp"]],[["Tab","Tab"],["\u0439","\u0419"],["\u0446","\u0426"],["\u0443","\u0423","\u04af","\u04ae"],["\u043a","\u041a"],["\u0435","\u0415"],["\u043d","\u041d","\u04a3","\u04a2"],["\u0433","\u0413"],["\u0448","\u0428"],["\u0449","\u0429"],["\u0437","\u0417"],["\u0445","\u0425"],["\u044a","\u042a"],["\\","/"]],[["Caps","Caps"],
["\u0444","\u0424"],["\u044b","\u042b"],["\u0432","\u0412"],["\u0430","\u0410"],["\u043f","\u041f"],["\u0440","\u0420"],["\u043e","\u041e","\u04e9","\u04e8"],["\u043b","\u041b"],["\u0434","\u0414"],["\u0436","\u0416"],["\u044d","\u042d"],["Enter","Enter"]],[["Shift","Shift"],["\u044f","\u042f"],["\u0447","\u0427"],["\u0441","\u0421"],["\u043c","\u041c"],["\u0438","\u0418"],["\u0442","\u0422"],["\u044c","\u042c"],["\u0431","\u0411"],["\u044e","\u042e"],[".",","],["Shift","Shift"]],[[" "," "," "," "],
["AltGr","AltGr"]]],"lang":["ky"]};this.VKI_layout["Latvie\u0161u"]={"name":"Latvian","keys":[[["\u00ad","?"],["1","!","\u00ab"],["2","\u00ab","","@"],["3","\u00bb","","#"],["4","$","\u20ac","$"],["5","%",'"',"~"],["6","/","\u2019","^"],["7","&","","\u00b1"],["8","\u00d7",":"],["9","("],["0",")"],["-","_","\u2013","\u2014"],["f","F","=",";"],["Bksp","Bksp"]],[["Tab","Tab"],["\u016b","\u016a","q","Q"],["g","G","\u0123","\u0122"],["j","J"],["r","R","\u0157","\u0156"],["m","M","w","W"],["v","V","y",
"Y"],["n","N"],["z","Z"],["\u0113","\u0112"],["\u010d","\u010c"],["\u017e","\u017d","[","{"],["h","H","]","}"],["\u0137","\u0136"]],[["Caps","Caps"],["\u0161","\u0160"],["u","U"],["s","S"],["i","I"],["l","L"],["d","D"],["a","A"],["t","T"],["e","E","\u20ac"],["c","C"],["\u00b4","\u00b0","\u00b4","\u00a8"],["Enter","Enter"]],[["Shift","Shift"],["\u0146","\u0145"],["b","B","x","X"],["\u012b","\u012a"],["k","K","\u0137","\u0136"],["p","P"],["o","O","\u00f5","\u00d5"],["\u0101","\u0100"],[",",";","<"],
[".",":",">"],["\u013c","\u013b"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]],"lang":["lv"]};this.VKI_layout["Lietuvi\u0173"]={"name":"Lithuanian","keys":[[["`","~"],["\u0105","\u0104"],["\u010d","\u010c"],["\u0119","\u0118"],["\u0117","\u0116"],["\u012f","\u012e"],["\u0161","\u0160"],["\u0173","\u0172"],["\u016b","\u016a"],["\u201e","("],["\u201c",")"],["-","_"],["\u017e","\u017d"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q"],["w","W"],["e","E"],["r","R"],["t","T"],["y","Y"],["u","U"],
["i","I"],["o","O"],["p","P"],["[","{"],["]","}"],["\\","|"]],[["Caps","Caps"],["a","A"],["s","S"],["d","D"],["f","F"],["g","G"],["h","H"],["j","J"],["k","K"],["l","L"],[";",":"],["'",'"'],["Enter","Enter"]],[["Shift","Shift"],["\u2013","\u20ac"],["z","Z"],["x","X"],["c","C"],["v","V"],["b","B"],["n","N"],["m","M"],[",","<"],[".",">"],["/","?"],["Shift","Shift"]],[[" "," "]]],"lang":["lt"]};this.VKI_layout["Magyar"]={"name":"Hungarian","keys":[[["0","\u00a7"],["1","'","~"],["2",'"',"\u02c7"],["3",
"+","\u02c6"],["4","!","\u02d8"],["5","%","\u00b0"],["6","/","\u02db"],["7","=","`"],["8","(","\u02d9"],["9",")","\u00b4"],["\u00f6","\u00d6","\u02dd"],["\u00fc","\u00dc","\u00a8"],["\u00f3","\u00d3","\u00b8"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q","\\"],["w","W","|"],["e","E","\u00c4"],["r","R"],["t","T"],["z","Z"],["u","U","\u20ac"],["i","I","\u00cd"],["o","O"],["p","P"],["\u0151","\u0150","\u00f7"],["\u00fa","\u00da","\u00d7"],["\u0171","\u0170","\u00a4"]],[["Caps","Caps"],["a","A","\u00e4"],
["s","S","\u0111"],["d","D","\u0110"],["f","F","["],["g","G","]"],["h","H"],["j","J","\u00ed"],["k","K","\u0141"],["l","L","\u0142"],["\u00e9","\u00c9","$"],["\u00e1","\u00c1","\u00df"],["Enter","Enter"]],[["Shift","Shift"],["\u00ed","\u00cd","<"],["y","Y",">"],["x","X","#"],["c","C","&"],["v","V","@"],["b","B","{"],["n","N","}"],["m","M","<"],[",","?",";"],[".",":",">"],["-","_","*"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]],"lang":["hu"]};this.VKI_layout["Malti"]={"name":"Maltese 48",
"keys":[[["\u010b","\u010a","`"],["1","!"],["2",'"'],["3","\u20ac","\u00a3"],["4","$"],["5","%"],["6","^"],["7","&"],["8","*"],["9","("],["0",")"],["-","_"],["=","+"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q"],["w","W"],["e","E","\u00e8","\u00c8"],["r","R"],["t","T"],["y","Y"],["u","U","\u00f9","\u00d9"],["i","I","\u00ec","\u00cc"],["o","O","\u00f2","\u00d2"],["p","P"],["\u0121","\u0120","[","{"],["\u0127","\u0126","]","}"],["#","\u017e"]],[["Caps","Caps"],["a","A","\u00e0","\u00c0"],["s","S"],["d",
"D"],["f","F"],["g","G"],["h","H"],["j","J"],["k","K"],["l","L"],[";",":"],["'","@"],["Enter","Enter"]],[["Shift","Shift"],["\u017c","\u017b","\\","|"],["z","Z"],["x","X"],["c","C"],["v","V"],["b","B"],["n","N"],["m","M"],[",","<"],[".",">"],["/","?","","`"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]],"lang":["mt"]};this.VKI_layout["\u041c\u0430\u043a\u0435\u0434\u043e\u043d\u0441\u043a\u0438"]={"name":"Macedonian Cyrillic","keys":[[["`","~"],["1","!"],["2","\u201e"],["3","\u201c"],
["4","\u2019"],["5","%"],["6","\u2018"],["7","&"],["8","*"],["9","("],["0",")"],["-","_"],["=","+"],["Bksp","Bksp"]],[["Tab","Tab"],["\u0459","\u0409"],["\u045a","\u040a"],["\u0435","\u0415","\u20ac"],["\u0440","\u0420"],["\u0442","\u0422"],["\u0455","\u0405"],["\u0443","\u0423"],["\u0438","\u0418"],["\u043e","\u041e"],["\u043f","\u041f"],["\u0448","\u0428","\u0402"],["\u0453","\u0403","\u0452"],["\u0436","\u0416"]],[["Caps","Caps"],["\u0430","\u0410"],["\u0441","\u0421"],["\u0434","\u0414"],["\u0444",
"\u0424","["],["\u0433","\u0413","]"],["\u0445","\u0425"],["\u0458","\u0408"],["\u043a","\u041a"],["\u043b","\u041b"],["\u0447","\u0427","\u040b"],["\u045c","\u040c","\u045b"],["Enter","Enter"]],[["Shift","Shift"],["\u0451","\u0401"],["\u0437","\u0417"],["\u045f","\u040f"],["\u0446","\u0426"],["\u0432","\u0412","@"],["\u0431","\u0411","{"],["\u043d","\u041d","}"],["\u043c","\u041c","\u00a7"],[",",";"],[".",":"],["/","?"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]],"lang":["mk"]};this.VKI_layout["\u0d2e\u0d32\u0d2f\u0d3e\u0d33\u0d02"]=
{"name":"Malayalam","keys":[[["\u0d4a","\u0d12"],["1","","\u0d67"],["2","","\u0d68"],["3","\u0d4d\u0d30","\u0d69"],["4","","\u0d6a"],["5","","\u0d6b"],["6","","\u0d6c"],["7","\u0d15\u0d4d\u0d37","\u0d6d"],["8","","\u0d6e"],["9","(","\u0d6f"],["0",")","\u0d66"],["-","\u0d03"],["\u0d43","\u0d0b","","\u0d60"],["Bksp","Bksp"]],[["Tab","Tab"],["\u0d4c","\u0d14","\u0d57"],["\u0d48","\u0d10"],["\u0d3e","\u0d06"],["\u0d40","\u0d08","","\u0d61"],["\u0d42","\u0d0a"],["\u0d2c","\u0d2d"],["\u0d39","\u0d19"],
["\u0d17","\u0d18"],["\u0d26","\u0d27"],["\u0d1c","\u0d1d"],["\u0d21","\u0d22"],["","\u0d1e"]],[["Caps","Caps"],["\u0d4b","\u0d13"],["\u0d47","\u0d0f"],["\u0d4d","\u0d05","","\u0d0c"],["\u0d3f","\u0d07"],["\u0d41","\u0d09"],["\u0d2a","\u0d2b"],["\u0d30","\u0d31"],["\u0d15","\u0d16"],["\u0d24","\u0d25"],["\u0d1a","\u0d1b"],["\u0d1f","\u0d20"],["Enter","Enter"]],[["Shift","Shift"],["\u0d46","\u0d0f"],["\u0d02"],["\u0d2e","\u0d23"],["\u0d28"],["\u0d35","\u0d34"],["\u0d32","\u0d33"],["\u0d38","\u0d36"],
[",","\u0d37"],["."],["\u0d2f"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]],"lang":["ml"]};this.VKI_layout["Misc. Symbols"]={"name":"Misc. Symbols","keys":[[["\u2605","\u2606","\u260e","\u260f"],["\u2648","\u2673","\u2659","\u2630"],["\u2649","\u2674","\u2658","\u2631"],["\u264a","\u2675","\u2657","\u2632"],["\u264b","\u2676","\u2656","\u2633"],["\u264c","\u2677","\u2655","\u2634"],["\u264d","\u2678","\u2654","\u2635"],["\u264e","\u2679","\u265f","\u2636"],["\u264f","\u267a","\u265e",
"\u2637"],["\u2650","\u267b","\u265d","\u2686"],["\u2651","\u267c","\u265c","\u2687"],["\u2652","\u267d","\u265b","\u2688"],["\u2653","\u2672","\u265a","\u2689"],["Bksp","Bksp"]],[["\u263f","\u2680","\u268a","\u26a2"],["\u2640","\u2681","\u268b","\u26a3"],["\u2641","\u2682","\u268c","\u26a4"],["\u2642","\u2683","\u268d","\u26a5"],["\u2643","\u2684","\u268e","\u26a6"],["\u2644","\u2685","\u268f","\u26a7"],["\u2645","\u2620","\u26ff","\u26a8"],["\u2646","\u2622","\u2692","\u26a9"],["\u2647","\u2623",
"\u2693","\u26b2"],["\u2669","\u266d","\u2694","\u26ac"],["\u266a","\u266e","\u2695","\u26ad"],["\u266b","\u266f","\u2696","\u26ae"],["\u266c","\u2607","\u2697","\u26af"],["\u26f9","\u2608","\u2698","\u26b0"],["\u267f","\u262e","\u2638","\u2609"]],[["Tab","Tab"],["\u261e","\u261c","\u261d","\u261f"],["\u261b","\u261a","\u2618","\u2619"],["\u2602","\u2614","\u26f1","\u26d9"],["\u2615","\u2668","\u26fe","\u26d8"],["\u263a","\u2639","\u263b","\u26dc"],["\u2617","\u2616","\u26ca","\u26c9"],["\u2660",
"\u2663","\u2665","\u2666"],["\u2664","\u2667","\u2661","\u2662"],["\u26c2","\u26c0","\u26c3","\u26c1"],["\u2624","\u2625","\u269a","\u26b1"],["\u2610","\u2611","\u2612","\u2613"],["\u2628","\u2626","\u2627","\u2629"],["\u262a","\u262b","\u262c","\u262d"],["\u26fa","\u26fb","\u26fc","\u26fd"]],[["Caps","Caps"],["\u262f","\u2670","\u2671","\u267e"],["\u263c","\u2699","\u263d","\u263e"],["\u26c4","\u2603","\u26c7","\u26c6"],["\u26a0","\u26a1","\u2621","\u26d4"],["\u26e4","\u26e5","\u26e6","\u26e7"],
["\u260a","\u260b","\u260c","\u260d"],["\u269c","\u269b","\u269d","\u2604"],["\u26b3","\u26b4","\u26b5","\u26b6"],["\u26b7","\u26bf","\u26b8","\u26f8"],["\u26b9","\u26ba","\u26bb","\u26bc"],["\u26bd","\u26be","\u269f","\u269e"],["Enter","Enter"]],[["Shift","Shift"],["\u2600","\u2601","\u26c5","\u26c8"],["\u2691","\u2690","\u26ab","\u26aa"],["\u26cb","\u26cc","\u26cd","\u26ce"],["\u26cf","\u26d0","\u26d1","\u26d2"],["\u26d3","\u26d5","\u26d6","\u26d7"],["\u26da","\u26db","\u26dd","\u26de"],["\u26df",
"\u26e0","\u26e1","\u26e2"],["\u26e3","\u26e8","\u26e9","\u26ea"],["\u26eb","\u26ec","\u26ed","\u26ee"],["\u26ef","\u26f0","\u26f2","\u26f3"],["\u26f4","\u26f5","\u26f6","\u26f7"],["Shift","Shift"]],[["AltLk","AltLk"],[" "," "," "," "],["Alt","Alt"]]]};this.VKI_layout["\u041c\u043e\u043d\u0433\u043e\u043b"]={"name":"Mongolian Cyrillic","keys":[[["=","+"],["\u2116","1"],["-","2"],['"',"3"],["\u20ae","4"],[":","5"],[".","6"],["_","7"],[",","8"],["%","9"],["?","0"],["\u0435","\u0415"],["\u0449","\u0429"],
["Bksp","Bksp"]],[["Tab","Tab"],["\u0444","\u0424"],["\u0446","\u0426"],["\u0443","\u0423"],["\u0436","\u0416"],["\u044d","\u042d"],["\u043d","\u041d"],["\u0433","\u0413"],["\u0448","\u0428"],["\u04af","\u04ae"],["\u0437","\u0417"],["\u043a","\u041a"],["\u044a","\u042a"],["\\","|"]],[["Caps","Caps"],["\u0439","\u0419"],["\u044b","\u042b"],["\u0431","\u0411"],["\u04e9","\u04e8"],["\u0430","\u0410"],["\u0445","\u0425"],["\u0440","\u0420"],["\u043e","\u041e"],["\u043b","\u041b"],["\u0434","\u0414"],
["\u043f","\u041f"],["Enter","Enter"]],[["Shift","Shift"],["\u044f","\u042f"],["\u0447","\u0427"],["\u0451","\u0401"],["\u0441","\u0421"],["\u043c","\u041c"],["\u0438","\u0418"],["\u0442","\u0422"],["\u044c","\u042c"],["\u0432","\u0412"],["\u044e","\u042e"],["Shift","Shift"]],[[" "," "]]],"lang":["mn"]};this.VKI_layout["\u092e\u0930\u093e\u0920\u0940"]={"name":"Marathi","keys":[[["","","`","~"],["\u0967","\u090d","1","!"],["\u0968","\u0945","2","@"],["\u0969","\u094d\u0930","3","#"],["\u096a","\u0930\u094d",
"4","$"],["\u096b","\u091c\u094d\u091e","5","%"],["\u096c","\u0924\u094d\u0930","6","^"],["\u096d","\u0915\u094d\u0937","7","&"],["\u096e","\u0936\u094d\u0930","8","*"],["\u096f","(","9","("],["\u0966",")","0",")"],["-","\u0903","-","_"],["\u0943","\u090b","=","+"],["Bksp","Bksp"]],[["Tab","Tab"],["\u094c","\u0914"],["\u0948","\u0910"],["\u093e","\u0906"],["\u0940","\u0908"],["\u0942","\u090a"],["\u092c","\u092d"],["\u0939","\u0919"],["\u0917","\u0918"],["\u0926","\u0927"],["\u091c","\u091d"],["\u0921",
"\u0922","[","{"],["\u093c","\u091e","]","}"],["\u0949","\u0911","\\","|"]],[["Caps","Caps"],["\u094b","\u0913"],["\u0947","\u090f"],["\u094d","\u0905"],["\u093f","\u0907"],["\u0941","\u0909"],["\u092a","\u092b"],["\u0930","\u0931"],["\u0915","\u0916"],["\u0924","\u0925"],["\u091a","\u091b",";",":"],["\u091f","\u0920","'",'"'],["Enter","Enter"]],[["Shift","Shift"],[""],["\u0902","\u0901","","\u0950"],["\u092e","\u0923"],["\u0928"],["\u0935"],["\u0932","\u0933"],["\u0938","\u0936"],[",","\u0937",",",
"<"],[".","\u0964",".",">"],["\u092f","\u095f","/","?"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]],"lang":["mr"]};this.VKI_layout["\u1019\u103c\u1014\u103a\u1019\u102c\u1018\u102c\u101e\u102c"]={"name":"Burmese","keys":[[["\u1039`","~"],["\u1041","\u100d"],["\u1042","\u100e"],["\u1043","\u100b"],["\u1044","\u1000\u103b\u1015\u103a"],["\u1045","%"],["\u1046","/"],["\u1047","\u101b"],["\u1048","\u1002"],["\u1049","("],["\u1040",")"],["-","_"],["=","+"],["Bksp","Bksp"]],[["Tab","Tab"],
["\u1006","\u1029"],["\u1010","\u1040"],["\u1014","\u103f"],["\u1019","\u1023"],["\u1021","\u1024"],["\u1015","\u104c"],["\u1000","\u1009"],["\u1004","\u104d"],["\u101e","\u1025"],["\u1005","\u100f"],["\u101f","\u1027"],["\u2018","\u2019"],["\u104f","\u100b\u1039\u100c"]],[["Caps","Caps"],["\u200b\u1031","\u1017"],["\u200b\u103b","\u200b\u103e"],["\u200b\u102d","\u200b\u102e"],["\u200b\u103a","\u1004\u103a\u1039\u200b"],["\u200b\u102b","\u200b\u103d"],["\u200b\u1037","\u200b\u1036"],["\u200b\u103c",
"\u200b\u1032"],["\u200b\u102f","\u200b\u102f"],["\u200b\u1030","\u200b\u1030"],["\u200b\u1038","\u200b\u102b\u103a"],["\u1012","\u1013"],["Enter","Enter"]],[["Shift","Shift"],["\u1016","\u1007"],["\u1011","\u100c"],["\u1001","\u1003"],["\u101c","\u1020"],["\u1018","\u1026"],["\u100a","\u1008"],["\u200b\u102c","\u102a"],["\u101a","\u101b"],[".","\u101b"],["\u104b","\u104a"],["Shift","Shift"]],[[" "," "]]],"lang":["my"]};this.VKI_layout["Nederlands"]={"name":"Dutch","keys":[[["@","\u00a7","\u00ac"],
["1","!","\u00b9"],["2",'"',"\u00b2"],["3","#","\u00b3"],["4","$","\u00bc"],["5","%","\u00bd"],["6","&","\u00be"],["7","_","\u00a3"],["8","(","{"],["9",")","}"],["0","'"],["/","?","\\"],["\u00b0","~","\u00b8"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q"],["w","W"],["e","E","\u20ac"],["r","R","\u00b6"],["t","T"],["y","Y"],["u","U"],["i","I"],["o","O"],["p","P"],["\u00a8","^"],["*","|"],["<",">"]],[["Caps","Caps"],["a","A"],["s","S","\u00df"],["d","D"],["f","F"],["g","G"],["h","H"],["j","J"],["k","K"],
["l","L"],["+","\u00b1"],["\u00b4","`"],["Enter","Enter"]],[["Shift","Shift"],["]","[","\u00a6"],["z","Z","\u00ab"],["x","X","\u00bb"],["c","C","\u00a2"],["v","V"],["b","B"],["n","N"],["m","M","\u00b5"],[",",";"],[".",":","\u00b7"],["-","="],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]],"lang":["nl"]};this.VKI_layout["Norsk"]={"name":"Norwegian","keys":[[["|","\u00a7"],["1","!"],["2",'"',"@"],["3","#","\u00a3"],["4","\u00a4","$"],["5","%"],["6","&"],["7","/","{"],["8","(","["],["9",")",
"]"],["0","=","}"],["+","?"],["\\","`","\u00b4"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q"],["w","W"],["e","E","\u20ac"],["r","R"],["t","T"],["y","Y"],["u","U"],["i","I"],["o","O"],["p","P"],["\u00e5","\u00c5"],["\u00a8","^","~"],["'","*"]],[["Caps","Caps"],["a","A"],["s","S"],["d","D"],["f","F"],["g","G"],["h","H"],["j","J"],["k","K"],["l","L"],["\u00f8","\u00d8"],["\u00e6","\u00c6"],["Enter","Enter"]],[["Shift","Shift"],["<",">"],["z","Z"],["x","X"],["c","C"],["v","V"],["b","B"],["n","N"],["m","M",
"\u03bc","\u039c"],[",",";"],[".",":"],["-","_"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]],"lang":["no","nb","nn"]};this.VKI_layout["\u067e\u069a\u062a\u0648"]={"name":"Pashto","keys":[[["\u200d","\u00f7","`"],["\u06f1","!","`"],["\u06f2","\u066c","@"],["\u06f3","\u066b","\u066b"],["\u06f4","\u00a4","\u00a3"],["\u06f5","\u066a","%"],["\u06f6","\u00d7","^"],["\u06f7","\u00ab","&"],["\u06f8","\u00bb","*"],["\u06f9","(","\ufdf2"],["\u06f0",")","\ufefb"],["-","\u0640","_"],["=","+","\ufe87",
"\u00f7"],["Bksp","Bksp"]],[["Tab","Tab"],["\u0636","\u0652","\u06d5"],["\u0635","\u064c","\u0653"],["\u062b","\u064d","\u20ac"],["\u0642","\u064b","\ufef7"],["\u0641","\u064f","\ufef5"],["\u063a","\u0650","'"],["\u0639","\u064e","\ufe84"],["\u0647","\u0651","\u0670"],["\u062e","\u0681","'"],["\u062d","\u0685",'"'],["\u062c","]","}"],["\u0686","[","{"],["\\","\u066d","|"]],[["Caps","Caps"],["\u0634","\u069a","\ufbb0"],["\u0633","\u06cd","\u06d2"],["\u06cc","\u064a","\u06d2"],["\u0628","\u067e","\u06ba"],
["\u0644","\u0623","\u06b7"],["\u0627","\u0622","\u0671"],["\u062a","\u067c","\u0679"],["\u0646","\u06bc","<"],["\u0645","\u0629",">"],["\u06a9",":","\u0643"],["\u06af","\u061b","\u06ab"],["Enter","Enter"]],[["Shift","Shift"],["\u0638","\u0626","?"],["\u0637","\u06d0",";"],["\u0632","\u0698","\u0655"],["\u0631","\u0621","\u0654"],["\u0630","\u200c","\u0625"],["\u062f","\u0689","\u0688"],["\u0693","\u0624","\u0691"],["\u0648","\u060c",","],["\u0696",".","\u06c7"],["/","\u061f","\u06c9"],["Shift","Shift",
"\u064d"]],[[" "," "," "," "],["Alt","Alt"]]],"lang":["ps"]};this.VKI_layout["\u0a2a\u0a70\u0a1c\u0a3e\u0a2c\u0a40"]={"name":"Punjabi (Gurmukhi)","keys":[[[""],["1","\u0a4d\u0a35","\u0a67","\u0a67"],["2","\u0a4d\u0a2f","\u0a68","\u0a68"],["3","\u0a4d\u0a30","\u0a69","\u0a69"],["4","\u0a71","\u0a6a","\u0a6a"],["5","","\u0a6b","\u0a6b"],["6","","\u0a6c","\u0a6c"],["7","","\u0a6d","\u0a6d"],["8","","\u0a6e","\u0a6e"],["9","(","\u0a6f","\u0a6f"],["0",")","\u0a66","\u0a66"],["-"],[""],["Bksp","Bksp"]],
[["Tab","Tab"],["\u0a4c","\u0a14"],["\u0a48","\u0a10"],["\u0a3e","\u0a06"],["\u0a40","\u0a08"],["\u0a42","\u0a0a"],["\u0a2c","\u0a2d"],["\u0a39","\u0a19"],["\u0a17","\u0a18","\u0a5a","\u0a5a"],["\u0a26","\u0a27"],["\u0a1c","\u0a1d","\u0a5b","\u0a5b"],["\u0a21","\u0a22","\u0a5c","\u0a5c"],["Enter","Enter"]],[["Caps","Caps"],["\u0a4b","\u0a13"],["\u0a47","\u0a0f"],["\u0a4d","\u0a05"],["\u0a3f","\u0a07"],["\u0a41","\u0a09"],["\u0a2a","\u0a2b","\u0a5e","\u0a5e"],["\u0a30"],["\u0a15","\u0a16","\u0a59",
"\u0a59"],["\u0a24","\u0a25"],["\u0a1a","\u0a1b"],["\u0a1f","\u0a20"],["\u0a3c","\u0a1e"]],[["Shift","Shift"],[""],["\u0a02","\u0a02"],["\u0a2e","\u0a23"],["\u0a28"],["\u0a35","\u0a72","\u0a73","\u0a73"],["\u0a32","\u0a33"],["\u0a38","\u0a36"],[","],[".","|","\u0965","\u0965"],["\u0a2f"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]],"lang":["pa"]};this.VKI_layout["\u62fc\u97f3 (Pinyin)"]={"name":"Pinyin","keys":[[["`","~","\u4e93","\u301c"],["1","!","\uff62"],["2","@","\uff63"],["3","#",
"\u301d"],["4","$","\u301e"],["5","%","\u301f"],["6","^","\u3008"],["7","&","\u3009"],["8","*","\u302f"],["9","(","\u300a"],["0",")","\u300b"],["-","_","\u300e"],["=","+","\u300f"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q","\u0101","\u0100"],["w","W","\u00e1","\u00c1"],["e","E","\u01ce","\u01cd"],["r","R","\u00e0","\u00c0"],["t","T","\u0113","\u0112"],["y","Y","\u00e9","\u00c9"],["u","U","\u011b","\u011a"],["i","I","\u00e8","\u00c8"],["o","O","\u012b","\u012a"],["p","P","\u00ed","\u00cd"],["[","{",
"\u01d0","\u01cf"],["]","}","\u00ec","\u00cc"],["\\","|","\u3020"]],[["Caps","Caps"],["a","A","\u014d","\u014c"],["s","S","\u00f3","\u00d3"],["d","D","\u01d2","\u01d1"],["f","F","\u00f2","\u00d2"],["g","G","\u00fc","\u00dc"],["h","H","\u016b","\u016a"],["j","J","\u00fa","\u00da"],["k","K","\u01d4","\u01d3"],["l","L","\u00f9","\u00d9"],[";",":"],["'",'"'],["Enter","Enter"]],[["Shift","Shift"],["z","Z","\u01d6","\u01d5"],["x","X","\u01d8","\u01d7"],["c","C","\u01da","\u01d9"],["v","V","\u01dc","\u01db"],
["b","B"],["n","N"],["m","M"],[",","<","\u3001"],[".",">","\u3002"],["/","?"],["Shift","Shift"]],[["AltLk","AltLk"],[" "," "," "," "],["Alt","Alt"]]],"lang":["zh-Latn"]};this.VKI_layout["Polski"]={"name":"Polish (214)","keys":[[["\u02db","\u00b7"],["1","!","~"],["2",'"',"\u02c7"],["3","#","^"],["4","\u00a4","\u02d8"],["5","%","\u00b0"],["6","&","\u02db"],["7","/","`"],["8","(","\u00b7"],["9",")","\u00b4"],["0","=","\u02dd"],["+","?","\u00a8"],["'","*","\u00b8"],["Bksp","Bksp"]],[["Tab","Tab"],["q",
"Q","\\"],["w","W","\u00a6"],["e","E"],["r","R"],["t","T"],["z","Z"],["u","U","\u20ac"],["i","I"],["o","O"],["p","P"],["\u017c","\u0144","\u00f7"],["\u015b","\u0107","\u00d7"],["\u00f3","\u017a"]],[["Caps","Caps"],["a","A"],["s","S","\u0111"],["d","D","\u0110"],["f","F"],["g","G"],["h","H"],["j","J"],["k","K"],["l","L"],["\u0142","\u0141","$"],["\u0105","\u0119","\u00df"],["Enter","Enter"]],[["Shift","Shift"],["<",">"],["y","Y"],["x","X"],["c","C"],["v","V","@"],["b","B","{"],["n","N","}"],["m","M",
"\u00a7"],[",",";","<"],[".",":",">"],["-","_"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]]};this.VKI_layout["Polski Programisty"]={"name":"Polish Programmers","keys":[[["`","~"],["1","!"],["2","@"],["3","#"],["4","$"],["5","%"],["6","^"],["7","&"],["8","*"],["9","("],["0",")"],["-","_"],["=","+"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q"],["w","W"],["e","E","\u0119","\u0118"],["r","R"],["t","T"],["y","Y"],["u","U"],["i","I"],["o","O","\u00f3","\u00d3"],["p","P"],["[","{"],["]","}"],
["\\","|"]],[["Caps","Caps"],["a","A","\u0105","\u0104"],["s","S","\u015b","\u015a"],["d","D"],["f","F"],["g","G"],["h","H"],["j","J"],["k","K"],["l","L","\u0142","\u0141"],[";",":"],["'",'"'],["Enter","Enter"]],[["Shift","Shift"],["z","Z","\u017c","\u017b"],["x","X","\u017a","\u0179"],["c","C","\u0107","\u0106"],["v","V"],["b","B"],["n","N","\u0144","\u0143"],["m","M"],[",","<"],[".",">"],["/","?"],["Shift","Shift"]],[[" "," "," "," "],["Alt","Alt"]]],"lang":["pl"]};this.VKI_layout["Portugu\u00eas Brasileiro"]=
{"name":"Portuguese (Brazil)","keys":[[["'",'"'],["1","!","\u00b9"],["2","@","\u00b2"],["3","#","\u00b3"],["4","$","\u00a3"],["5","%","\u00a2"],["6","\u00a8","\u00ac"],["7","&"],["8","*"],["9","("],["0",")"],["-","_"],["=","+","\u00a7"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q","/"],["w","W","?"],["e","E","\u20ac"],["r","R"],["t","T"],["y","Y"],["u","U"],["i","I"],["o","O"],["p","P"],["\u00b4","`"],["[","{","\u00aa"],["Enter","Enter"]],[["Caps","Caps"],["a","A"],["s","S"],["d","D"],["f","F"],["g",
"G"],["h","H"],["j","J"],["k","K"],["l","L"],["\u00e7","\u00c7"],["~","^"],["]","}","\u00ba"],["/","?"]],[["Shift","Shift"],["\\","|"],["z","Z"],["x","X"],["c","C","\u20a2"],["v","V"],["b","B"],["n","N"],["m","M"],[",","<"],[".",">"],[":",":"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]],"lang":["pt-BR"]};this.VKI_layout["Portugu\u00eas"]={"name":"Portuguese","keys":[[["\\","|"],["1","!"],["2",'"',"@"],["3","#","\u00a3"],["4","$","\u00a7"],["5","%"],["6","&"],["7","/","{"],["8","(","["],
["9",")","]"],["0","=","}"],["'","?"],["\u00ab","\u00bb"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q"],["w","W"],["e","E","\u20ac"],["r","R"],["t","T"],["y","Y"],["u","U"],["i","I"],["o","O"],["p","P"],["+","*","\u00a8"],["\u00b4","`"],["~","^"]],[["Caps","Caps"],["a","A"],["s","S"],["d","D"],["f","F"],["g","G"],["h","H"],["j","J"],["k","K"],["l","L"],["\u00e7","\u00c7"],["\u00ba","\u00aa"],["Enter","Enter"]],[["Shift","Shift"],["<",">","\\"],["z","Z"],["x","X"],["c","C"],["v","V"],["b","B"],["n","N"],
["m","M"],[",",";"],[".",":"],["-","_"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]],"lang":["pt"]};this.VKI_layout["Rom\u00e2n\u0103"]={"name":"Romanian","keys":[[["\u201e","\u201d","`","~"],["1","!","~"],["2","@","\u02c7"],["3","#","^"],["4","$","\u02d8"],["5","%","\u00b0"],["6","^","\u02db"],["7","&","`"],["8","*","\u02d9"],["9","(","\u00b4"],["0",")","\u02dd"],["-","_","\u00a8"],["=","+","\u00b8","\u00b1"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q"],["w","W"],["e","E","\u20ac"],["r",
"R"],["t","T"],["y","Y"],["u","U"],["i","I"],["o","O"],["p","P","\u00a7"],["\u0103","\u0102","[","{"],["\u00ee","\u00ce","]","}"],["\u00e2","\u00c2","\\","|"]],[["Caps","Caps"],["a","A"],["s","S","\u00df"],["d","D","\u00f0","\u00d0"],["f","F"],["g","G"],["h","H"],["j","J"],["k","K"],["l","L","\u0142","\u0141"],[this.VKI_isIElt8?"\u015f":"\u0219",this.VKI_isIElt8?"\u015e":"\u0218",";",":"],[this.VKI_isIElt8?"\u0163":"\u021b",this.VKI_isIElt8?"\u0162":"\u021a","'",'"'],["Enter","Enter"]],[["Shift",
"Shift"],["\\","|"],["z","Z"],["x","X"],["c","C","\u00a9"],["v","V"],["b","B"],["n","N"],["m","M"],[",",";","<","\u00ab"],[".",":",">","\u00bb"],["/","?"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]],"lang":["ro"]};this.VKI_layout["\u0420\u0443\u0441\u0441\u043a\u0438\u0439"]={"name":"Russian","keys":[[["\u0451","\u0401"],["1","!"],["2",'"'],["3","\u2116"],["4",";"],["5","%"],["6",":"],["7","?"],["8","*"],["9","("],["0",")"],["-","_"],["=","+"],["Bksp","Bksp"]],[["Tab","Tab"],["\u0439",
"\u0419"],["\u0446","\u0426"],["\u0443","\u0423"],["\u043a","\u041a"],["\u0435","\u0415"],["\u043d","\u041d"],["\u0433","\u0413"],["\u0448","\u0428"],["\u0449","\u0429"],["\u0437","\u0417"],["\u0445","\u0425"],["\u044a","\u042a"],["\\","/"]],[["Caps","Caps"],["\u0444","\u0424"],["\u044b","\u042b"],["\u0432","\u0412"],["\u0430","\u0410"],["\u043f","\u041f"],["\u0440","\u0420"],["\u043e","\u041e"],["\u043b","\u041b"],["\u0434","\u0414"],["\u0436","\u0416"],["\u044d","\u042d"],["Enter","Enter"]],[["Shift",
"Shift"],["/","|"],["\u044f","\u042f"],["\u0447","\u0427"],["\u0441","\u0421"],["\u043c","\u041c"],["\u0438","\u0418"],["\u0442","\u0422"],["\u044c","\u042c"],["\u0431","\u0411"],["\u044e","\u042e"],[".",","],["Shift","Shift"]],[[" "," "]]],"lang":["ru"]};this.VKI_layout["Schweizerdeutsch"]={"name":"Swiss German","keys":[[["\u00a7","\u00b0"],["1","+","\u00a6"],["2",'"',"@"],["3","*","#"],["4","\u00e7","\u00b0"],["5","%","\u00a7"],["6","&","\u00ac"],["7","/","|"],["8","(","\u00a2"],["9",")"],["0",
"="],["'","?","\u00b4"],["^","`","~"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q"],["w","W"],["e","E","\u20ac"],["r","R"],["t","T"],["z","Z"],["u","U"],["i","I"],["o","O"],["p","P"],["\u00fc","\u00e8","["],["\u00a8","!","]"],["$","\u00a3","}"]],[["Caps","Caps"],["a","A"],["s","S"],["d","D"],["f","F"],["g","G"],["h","H"],["j","J"],["k","K"],["l","L"],["\u00f6","\u00e9"],["\u00e4","\u00e0","{"],["Enter","Enter"]],[["Shift","Shift"],["<",">","\\"],["y","Y"],["x","X"],["c","C"],["v","V"],["b","B"],["n",
"N"],["m","M"],[",",";"],[".",":"],["-","_"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]],"lang":["de-CH"]};this.VKI_layout["Shqip"]={"name":"Albanian","keys":[[["\\","|"],["1","!","~"],["2",'"',"\u02c7"],["3","#","^"],["4","$","\u02d8"],["5","%","\u00b0"],["6","^","\u02db"],["7","&","`"],["8","*","\u02d9"],["9","(","\u00b4"],["0",")","\u02dd"],["-","_","\u00a8"],["=","+","\u00b8"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q","\\"],["w","W","|"],["e","E"],["r","R"],["t","T"],["z","Z"],["u",
"U"],["i","I"],["o","O"],["p","P"],["\u00e7","\u00c7","\u00f7"],["[","{","\u00df"],["]","}","\u00a4"]],[["Caps","Caps"],["a","A"],["s","S","\u0111"],["d","D","\u0110"],["f","F","["],["g","G","]"],["h","H"],["j","J"],["k","K","\u0142"],["l","L","\u0141"],["\u00eb","\u00cb","$"],["@","'","\u00d7"],["Enter","Enter"]],[["Shift","Shift"],["<",">"],["y","Y"],["x","X"],["c","C"],["v","V","@"],["b","B","{"],["n","N","}"],["m","M","\u00a7"],[",",";","<"],[".",":",">"],["/","?"],["Shift","Shift"]],[[" "," ",
" "," "],["AltGr","AltGr"]]],"lang":["sq"]};this.VKI_layout["Sloven\u010dina"]={"name":"Slovak","keys":[[[";","\u00b0"],["+","1","~"],["\u013e","2","\u02c7"],["\u0161","3","^"],["\u010d","4","\u02d8"],["\u0165","5","\u00b0"],["\u017e","6","\u02db"],["\u00fd","7","`"],["\u00e1","8","\u02d9"],["\u00ed","9","\u00b4"],["\u00e9","0","\u02dd"],["=","%","\u00a8"],["\u00b4","\u02c7","\u00b8"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q","\\"],["w","W","|"],["e","E","\u20ac"],["r","R"],["t","T"],["z","Z"],["u",
"U"],["i","I"],["o","O"],["p","P","'"],["\u00fa","/","\u00f7"],["\u00e4","(","\u00d7"],["\u0148",")","\u00a4"]],[["Caps","Caps"],["a","A"],["s","S","\u0111"],["d","D","\u0110"],["f","F","["],["g","G","]"],["h","H"],["j","J"],["k","K","\u0142"],["l","L","\u0141"],["\u00f4",'"',"$"],["\u00a7","!","\u00df"],["Enter","Enter"]],[["Shift","Shift"],["&","*","<"],["y","Y",">"],["x","X","#"],["c","C","&"],["v","V","@"],["b","B","{"],["n","N","}"],["m","M"],[",","?","<"],[".",":",">"],["-","_","*"],["Shift",
"Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]],"lang":["sk"]};this.VKI_layout["Sloven\u0161\u010dina"]={"name":"Slovenian","keys":this.VKI_layout["Bosanski"].keys.slice(0),"lang":["sl"]};this.VKI_layout["\u0441\u0440\u043f\u0441\u043a\u0438"]={"name":"Serbian Cyrillic","keys":[[["`","~"],["1","!"],["2",'"'],["3","#"],["4","$"],["5","%"],["6","&"],["7","/"],["8","("],["9",")"],["0","="],["'","?"],["+","*"],["Bksp","Bksp"]],[["Tab","Tab"],["\u0459","\u0409"],["\u045a","\u040a"],["\u0435","\u0415",
"\u20ac"],["\u0440","\u0420"],["\u0442","\u0422"],["\u0437","\u0417"],["\u0443","\u0423"],["\u0438","\u0418"],["\u043e","\u041e"],["\u043f","\u041f"],["\u0448","\u0428"],["\u0452","\u0402"],["\u0436","\u0416"]],[["Caps","Caps"],["\u0430","\u0410"],["\u0441","\u0421"],["\u0434","\u0414"],["\u0444","\u0424"],["\u0433","\u0413"],["\u0445","\u0425"],["\u0458","\u0408"],["\u043a","\u041a"],["\u043b","\u041b"],["\u0447","\u0427"],["\u045b","\u040b"],["Enter","Enter"]],[["Shift","Shift"],["<",">"],["\u0455",
"\u0405"],["\u045f","\u040f"],["\u0446","\u0426"],["\u0432","\u0412"],["\u0431","\u0411"],["\u043d","\u041d"],["\u043c","\u041c"],[",",";","<"],[".",":",">"],["-","_","\u00a9"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]],"lang":["sr-Cyrl"]};this.VKI_layout["Srpski"]={"name":"Serbian Latin","keys":this.VKI_layout["Bosanski"].keys.slice(0),"lang":["sr"]};this.VKI_layout["Suomi"]={"name":"Finnish","keys":[[["\u00a7","\u00bd"],["1","!"],["2",'"',"@"],["3","#","\u00a3"],["4","\u00a4","$"],
["5","%","\u20ac"],["6","&"],["7","/","{"],["8","(","["],["9",")","]"],["0","=","}"],["+","?","\\"],["\u00b4","`"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q","\u00e2","\u00c2"],["w","W"],["e","E","\u20ac"],["r","R"],["t","T","\u0167","\u0166"],["y","Y"],["u","U"],["i","I","\u00ef","\u00cf"],["o","O","\u00f5","\u00d5"],["p","P"],["\u00e5","\u00c5"],["\u00a8","^","~"],["'","*"]],[["Caps","Caps"],["a","A","\u00e1","\u00c1"],["s","S","\u0161","\u0160"],["d","D","\u0111","\u0110"],["f","F","\u01e5","\u01e4"],
["g","G","\u01e7","\u01e6"],["h","H","\u021f","\u021e"],["j","J"],["k","K","\u01e9","\u01e8"],["l","L"],["\u00f6","\u00d6","\u00f8","\u00d8"],["\u00e4","\u00c4","\u00e6","\u00c6"],["Enter","Enter"]],[["Shift","Shift"],["<",">","|"],["z","Z","\u017e","\u017d"],["x","X"],["c","C","\u010d","\u010c"],["v","V","\u01ef","\u01ee"],["b","B","\u0292","\u01b7"],["n","N","\u014b","\u014a"],["m","M","\u00b5"],[",",";"],[".",":"],["-","_"],["Shift","Shift"]],[["Alt","Alt"],[" "," "," "," "],["AltGr","AltGr"]]],
"lang":["fi"]};this.VKI_layout["Svenska"]={"name":"Swedish","keys":[[["\u00a7","\u00bd"],["1","!"],["2",'"',"@"],["3","#","\u00a3"],["4","\u00a4","$"],["5","%","\u20ac"],["6","&"],["7","/","{"],["8","(","["],["9",")","]"],["0","=","}"],["+","?","\\"],["\u00b4","`"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q"],["w","W"],["e","E","\u20ac"],["r","R"],["t","T"],["y","Y"],["u","U"],["i","I"],["o","O"],["p","P"],["\u00e5","\u00c5"],["\u00a8","^","~"],["'","*"]],[["Caps","Caps"],["a","A"],["s","S"],["d","D"],
["f","F"],["g","G"],["h","H"],["j","J"],["k","K"],["l","L"],["\u00f6","\u00d6"],["\u00e4","\u00c4"],["Enter","Enter"]],[["Shift","Shift"],["<",">","|"],["z","Z"],["x","X"],["c","C"],["v","V"],["b","B"],["n","N"],["m","M","\u03bc","\u039c"],[",",";"],[".",":"],["-","_"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]],"lang":["sv"]};this.VKI_layout["Swiss Fran\u00e7ais"]={"name":"Swiss French","keys":[[["\u00a7","\u00b0"],["1","+","\u00a6"],["2",'"',"@"],["3","*","#"],["4","\u00e7","\u00b0"],
["5","%","\u00a7"],["6","&","\u00ac"],["7","/","|"],["8","(","\u00a2"],["9",")"],["0","="],["'","?","\u00b4"],["^","`","~"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q"],["w","W"],["e","E","\u20ac"],["r","R"],["t","T"],["z","Z"],["u","U"],["i","I"],["o","O"],["p","P"],["\u00e8","\u00fc","["],["\u00a8","!","]"],["$","\u00a3","}"]],[["Caps","Caps"],["a","A"],["s","S"],["d","D"],["f","F"],["g","G"],["h","H"],["j","J"],["k","K"],["l","L"],["\u00e9","\u00f6"],["\u00e0","\u00e4","{"],["Enter","Enter"]],[["Shift",
"Shift"],["<",">","\\"],["y","Y"],["x","X"],["c","C"],["v","V"],["b","B"],["n","N"],["m","M"],[",",";"],[".",":"],["-","_"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]],"lang":["fr-CH"]};this.VKI_layout["\u0723\u0718\u072a\u071d\u071d\u0710"]={"name":"Syriac","keys":[[["\u070f","\u032e","\u0651","\u0651"],["1","!","\u0701","\u0701"],["2","\u030a","\u0702","\u0702"],["3","\u0325","\u0703","\u0703"],["4","\u0749","\u0704","\u0704"],["5","\u2670","\u0705","\u0705"],["6","\u2671","\u0708",
"\u0708"],["7","\u070a","\u0709","\u0709"],["8","\u00bb","\u070b","\u070b"],["9",")","\u070c","\u070c"],["0","(","\u070d","\u070d"],["-","\u00ab","\u250c","\u250c"],["=","+","\u2510","\u2510"],["Bksp","Bksp"]],[["Tab","Tab"],["\u0714","\u0730","\u064e","\u064e"],["\u0728","\u0733","\u064b","\u064b"],["\u0716","\u0736","\u064f","\u064f"],["\u0729","\u073a","\u064c","\u064c"],["\u0726","\u073d","\u0653","\u0653"],["\u071c","\u0740","\u0654","\u0654"],["\u0725","\u0741","\u0747","\u0747"],["\u0717",
"\u0308","\u0743","\u0743"],["\u071e","\u0304","\u0745","\u0745"],["\u071a","\u0307","\u032d","\u032d"],["\u0713","\u0303"],["\u0715","\u074a"],["\u0706",":"]],[["Caps","Caps"],["\u072b","\u0731","\u0650","\u0650"],["\u0723","\u0734","\u064d","\u064d"],["\u071d","\u0737"],["\u0712","\u073b","\u0621","\u0621"],["\u0720","\u073e","\u0655","\u0655"],["\u0710","\u0711","\u0670","\u0670"],["\u072c","\u0640","\u0748","\u0748"],["\u0722","\u0324","\u0744","\u0744"],["\u0721","\u0331","\u0746","\u0746"],
["\u071f","\u0323"],["\u071b","\u0330"],["Enter","Enter"]],[["Shift","Shift"],["]","\u0732"],["[","\u0735","\u0652","\u0652"],["\u0724","\u0738"],["\u072a","\u073c","\u200d"],["\u0727","\u073f","\u200c"],["\u0700","\u0739","\u200e"],[".","\u0742","\u200f"],["\u0718","\u060c"],["\u0719","\u061b"],["\u0707","\u061f"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]],"lang":["syc"]};this.VKI_layout["\u0ba4\u0bae\u0bbf\u0bb4\u0bcd"]={"name":"Tamil","keys":[[["\u0bca","\u0b92"],["1","","\u0be7"],
["2","","\u0be8"],["3","","\u0be9"],["4","","\u0bea"],["5","","\u0beb"],["6","\u0ba4\u0bcd\u0bb0","\u0bec"],["7","\u0b95\u0bcd\u0bb7","\u0bed"],["8","\u0bb7\u0bcd\u0bb0","\u0bee"],["9","","\u0bef"],["0","","\u0bf0"],["-","\u0b83","\u0bf1"],["","","\u0bf2"],["Bksp","Bksp"]],[["Tab","Tab"],["\u0bcc","\u0b94"],["\u0bc8","\u0b90"],["\u0bbe","\u0b86"],["\u0bc0","\u0b88"],["\u0bc2","\u0b8a"],["\u0baa","\u0baa"],["\u0bb9","\u0b99"],["\u0b95","\u0b95"],["\u0ba4","\u0ba4"],["\u0b9c","\u0b9a"],["\u0b9f","\u0b9f"],
["\u0b9e"]],[["Caps","Caps"],["\u0bcb","\u0b93"],["\u0bc7","\u0b8f"],["\u0bcd","\u0b85"],["\u0bbf","\u0b87"],["\u0bc1","\u0b89"],["\u0baa","\u0baa"],["\u0bb0","\u0bb1"],["\u0b95","\u0b95"],["\u0ba4","\u0ba4"],["\u0b9a","\u0b9a"],["\u0b9f","\u0b9f"],["Enter","Enter"]],[["Shift","Shift"],["\u0bc6","\u0b8e"],[""],["\u0bae","\u0ba3"],["\u0ba8","\u0ba9"],["\u0bb5","\u0bb4"],["\u0bb2","\u0bb3"],["\u0bb8","\u0bb7"],[",","\u0bb7"],[".","\u0bb8\u0bcd\u0bb0\u0bc0"],["\u0baf","\u0baf"],["Shift","Shift"]],[[" ",
" "," "," "],["AltGr","AltGr"]]],"lang":["ta"]};this.VKI_layout["\u0c24\u0c46\u0c32\u0c41\u0c17\u0c41"]={"name":"Telugu","keys":[[["\u0c4a","\u0c12"],["1","","\u0c67"],["2","","\u0c68"],["3","\u0c4d\u0c30","\u0c69"],["4","","\u0c6a"],["5","\u0c1c\u0c4d\u0c1e","\u0c6b"],["6","\u0c24\u0c4d\u0c30","\u0c6c"],["7","\u0c15\u0c4d\u0c37","\u0c6d"],["8","\u0c36\u0c4d\u0c30","\u0c6e"],["9","(","\u0c6f"],["0",")","\u0c66"],["-","\u0c03"],["\u0c43","\u0c0b","\u0c44"],["Bksp","Bksp"]],[["Tab","Tab"],["\u0c4c",
"\u0c14"],["\u0c48","\u0c10","\u0c56"],["\u0c3e","\u0c06"],["\u0c40","\u0c08","","\u0c61"],["\u0c42","\u0c0a"],["\u0c2c"],["\u0c39","\u0c19"],["\u0c17","\u0c18"],["\u0c26","\u0c27"],["\u0c1c","\u0c1d"],["\u0c21","\u0c22"],["","\u0c1e"]],[["Caps","Caps"],["\u0c4b","\u0c13"],["\u0c47","\u0c0f","\u0c55"],["\u0c4d","\u0c05"],["\u0c3f","\u0c07","","\u0c0c"],["\u0c41","\u0c09"],["\u0c2a","\u0c2b"],["\u0c30","\u0c31"],["\u0c15","\u0c16"],["\u0c24","\u0c25"],["\u0c1a","\u0c1b"],["\u0c1f","\u0c25"],["Enter",
"Enter"]],[["Shift","Shift"],["\u0c46","\u0c0e"],["\u0c02","\u0c01"],["\u0c2e","\u0c23"],["\u0c28","\u0c28"],["\u0c35"],["\u0c32","\u0c33"],["\u0c38","\u0c36"],[",","\u0c37"],["."],["\u0c2f"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]],"lang":["te"]};this.VKI_layout["Ti\u1ebfng Vi\u1ec7t"]={"name":"Vietnamese","keys":[[["`","~","`","~"],["\u0103","\u0102","1","!"],["\u00e2","\u00c2","2","@"],["\u00ea","\u00ca","3","#"],["\u00f4","\u00d4","4","$"],["\u0300","\u0300","5","%"],["\u0309",
"\u0309","6","^"],["\u0303","\u0303","7","&"],["\u0301","\u0301","8","*"],["\u0323","\u0323","9","("],["\u0111","\u0110","0",")"],["-","_","-","_"],["\u20ab","+","=","+"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q","q","Q"],["w","W","w","W"],["e","E","e","E"],["r","R","r","R"],["t","T","t","T"],["y","Y","y","Y"],["u","U","u","U"],["i","I","i","I"],["o","O","o","O"],["p","P","p","P"],["\u01b0","\u01af","[","{"],["\u01a1","\u01a0","]","}"],["\\","|","\\","|"]],[["Caps","Caps"],["a","A","a","A"],["s","S",
"s","S"],["d","D","d","D"],["f","F","f","F"],["g","G","g","G"],["h","H","h","H"],["j","J","j","J"],["k","K","k","K"],["l","L","l","L"],[";",":",";",":"],["'",'"',"'",'"'],["Enter","Enter"]],[["Shift","Shift"],["z","Z","z","Z"],["x","X","x","X"],["c","C","c","C"],["v","V","v","V"],["b","B","b","B"],["n","N","n","N"],["m","M","m","M"],[",","<",",","<"],[".",">",".",">"],["/","?","/","?"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]],"lang":["vi"]};this.VKI_layout["\u0e44\u0e17\u0e22 Kedmanee"]=
{"name":"Thai Kedmanee","keys":[[["_","%"],["\u0e45","+"],["/","\u0e51"],["-","\u0e52"],["\u0e20","\u0e53"],["\u0e16","\u0e54"],["\u0e38","\u0e39"],["\u0e36","\u0e3f"],["\u0e04","\u0e55"],["\u0e15","\u0e56"],["\u0e08","\u0e57"],["\u0e02","\u0e58"],["\u0e0a","\u0e59"],["Bksp","Bksp"]],[["Tab","Tab"],["\u0e46","\u0e50"],["\u0e44",'"'],["\u0e33","\u0e0e"],["\u0e1e","\u0e11"],["\u0e30","\u0e18"],["\u0e31","\u0e4d"],["\u0e35","\u0e4a"],["\u0e23","\u0e13"],["\u0e19","\u0e2f"],["\u0e22","\u0e0d"],["\u0e1a",
"\u0e10"],["\u0e25",","],["\u0e03","\u0e05"]],[["Caps","Caps"],["\u0e1f","\u0e24"],["\u0e2b","\u0e06"],["\u0e01","\u0e0f"],["\u0e14","\u0e42"],["\u0e40","\u0e0c"],["\u0e49","\u0e47"],["\u0e48","\u0e4b"],["\u0e32","\u0e29"],["\u0e2a","\u0e28"],["\u0e27","\u0e0b"],["\u0e07","."],["Enter","Enter"]],[["Shift","Shift"],["\u0e1c","("],["\u0e1b",")"],["\u0e41","\u0e09"],["\u0e2d","\u0e2e"],["\u0e34","\u0e3a"],["\u0e37","\u0e4c"],["\u0e17","?"],["\u0e21","\u0e12"],["\u0e43","\u0e2c"],["\u0e1d","\u0e26"],
["Shift","Shift"]],[[" "," "]]],"lang":["th"]};this.VKI_layout["\u0e44\u0e17\u0e22 Pattachote"]={"name":"Thai Pattachote","keys":[[["_","\u0e3f"],["=","+"],["\u0e52",'"'],["\u0e53","/"],["\u0e54",","],["\u0e55","?"],["\u0e39","\u0e38"],["\u0e57","_"],["\u0e58","."],["\u0e59","("],["\u0e50",")"],["\u0e51","-"],["\u0e56","%"],["Bksp","Bksp"]],[["Tab","Tab"],["\u0e47","\u0e4a"],["\u0e15","\u0e24"],["\u0e22","\u0e46"],["\u0e2d","\u0e0d"],["\u0e23","\u0e29"],["\u0e48","\u0e36"],["\u0e14","\u0e1d"],["\u0e21",
"\u0e0b"],["\u0e27","\u0e16"],["\u0e41","\u0e12"],["\u0e43","\u0e2f"],["\u0e0c","\u0e26"],["\uf8c7","\u0e4d"]],[["Caps","Caps"],["\u0e49","\u0e4b"],["\u0e17","\u0e18"],["\u0e07","\u0e33"],["\u0e01","\u0e13"],["\u0e31","\u0e4c"],["\u0e35","\u0e37"],["\u0e32","\u0e1c"],["\u0e19","\u0e0a"],["\u0e40","\u0e42"],["\u0e44","\u0e06"],["\u0e02","\u0e11"],["Enter","Enter"]],[["Shift","Shift"],["\u0e1a","\u0e0e"],["\u0e1b","\u0e0f"],["\u0e25","\u0e10"],["\u0e2b","\u0e20"],["\u0e34","\u0e31"],["\u0e04","\u0e28"],
["\u0e2a","\u0e2e"],["\u0e30","\u0e1f"],["\u0e08","\u0e09"],["\u0e1e","\u0e2c"],["Shift","Shift"]],[[" "," "]]]};this.VKI_layout["\u0422\u0430\u0442\u0430\u0440\u0447\u0430"]={"name":"Tatar","keys":[[["\u04bb","\u04ba","\u0451","\u0401"],["1","!"],["2",'"',"@"],["3","\u2116","#"],["4",";","$"],["5","%"],["6",":"],["7","?","["],["8","*","]"],["9","(","{"],["0",")","}"],["-","_"],["=","+"],["Bksp","Bksp"]],[["Tab","Tab"],["\u0439","\u0419"],["\u04e9","\u04e8","\u0446","\u0426"],["\u0443","\u0423"],
["\u043a","\u041a"],["\u0435","\u0415"],["\u043d","\u041d"],["\u0433","\u0413"],["\u0448","\u0428"],["\u04d9","\u04d8","\u0449","\u0429"],["\u0437","\u0417"],["\u0445","\u0425"],["\u04af","\u04ae","\u044a","\u042a"],["\\","/"]],[["Caps","Caps"],["\u0444","\u0424"],["\u044b","\u042b"],["\u0432","\u0412"],["\u0430","\u0410"],["\u043f","\u041f"],["\u0440","\u0420"],["\u043e","\u041e"],["\u043b","\u041b"],["\u0434","\u0414"],["\u04a3","\u04a2","\u0436","\u0416"],["\u044d","\u042d","'"],["Enter","Enter"]],
[["Shift","Shift"],["\u0491","\u0490"],["\u044f","\u042f"],["\u0447","\u0427"],["\u0441","\u0421"],["\u043c","\u041c"],["\u0438","\u0418"],["\u0442","\u0422"],["\u0497","\u0496","\u044c","\u042c"],["\u0431","\u0411","<"],["\u044e","\u042e",">"],[".",","],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]],"lang":["tt"]};this.VKI_layout["T\u00fcrk\u00e7e F"]={"name":"Turkish F","keys":[[["+","*","\u00ac"],["1","!","\u00b9","\u00a1"],["2",'"',"\u00b2"],["3","^","#","\u00b3"],["4","$","\u00bc",
"\u00a4"],["5","%","\u00bd"],["6","&","\u00be"],["7","'","{"],["8","(","["],["9",")","]"],["0","=","}"],["/","?","\\","\u00bf"],["-","_","|"],["Bksp","Bksp"]],[["Tab","Tab"],["f","F","@"],["g","G"],["\u011f","\u011e"],["\u0131","I","\u00b6","\u00ae"],["o","O"],["d","D","\u00a5"],["r","R"],["n","N"],["h","H","\u00f8","\u00d8"],["p","P","\u00a3"],["q","Q","\u00a8"],["w","W","~"],["x","X","`"]],[["Caps","Caps"],["u","U","\u00e6","\u00c6"],["i","\u0130","\u00df","\u00a7"],["e","E","\u20ac"],["a","A",
" ","\u00aa"],["\u00fc","\u00dc"],["t","T"],["k","K"],["m","M"],["l","L"],["y","Y","\u00b4"],["\u015f","\u015e"],["Enter","Enter"]],[["Shift","Shift"],["<",">","|","\u00a6"],["j","J","\u00ab","<"],["\u00f6","\u00d6","\u00bb",">"],["v","V","\u00a2","\u00a9"],["c","C"],["\u00e7","\u00c7"],["z","Z"],["s","S","\u00b5","\u00ba"],["b","B","\u00d7"],[".",":","\u00f7"],[",",";","-"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]]};this.VKI_layout["T\u00fcrk\u00e7e Q"]={"name":"Turkish Q","keys":[[['"',
"\u00e9","<"],["1","!",">"],["2","'","\u00a3"],["3","^","#"],["4","+","$"],["5","%","\u00bd"],["6","&"],["7","/","{"],["8","(","["],["9",")","]"],["0","=","}"],["*","?","\\"],["-","_","|"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q","@"],["w","W"],["e","E","\u20ac"],["r","R"],["t","T"],["y","Y"],["u","U"],["\u0131","I","i","\u0130"],["o","O"],["p","P"],["\u011f","\u011e","\u00a8"],["\u00fc","\u00dc","~"],[",",";","`"]],[["Caps","Caps"],["a","A","\u00e6","\u00c6"],["s","S","\u00df"],["d","D"],["f","F"],
["g","G"],["h","H"],["j","J"],["k","K"],["l","L"],["\u015f","\u015e","\u00b4"],["i","\u0130"],["Enter","Enter"]],[["Shift","Shift"],["<",">","|"],["z","Z"],["x","X"],["c","C"],["v","V"],["b","B"],["n","N"],["m","M"],["\u00f6","\u00d6"],["\u00e7","\u00c7"],[".",":"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]],"lang":["tr"]};this.VKI_layout["\u0423\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430"]={"name":"Ukrainian","keys":[[["\u00b4","~"],["1","!"],["2",'"'],["3","\u2116"],["4",
";"],["5","%"],["6",":"],["7","?"],["8","*"],["9","("],["0",")"],["-","_"],["=","+"],["Bksp","Bksp"]],[["Tab","Tab"],["\u0439","\u0419"],["\u0446","\u0426"],["\u0443","\u0423"],["\u043a","\u041a"],["\u0435","\u0415"],["\u043d","\u041d"],["\u0433","\u0413"],["\u0448","\u0428"],["\u0449","\u0429"],["\u0437","\u0417"],["\u0445","\u0425"],["\u0457","\u0407"],["\u0491","\u0490"]],[["Caps","Caps"],["\u0444","\u0424"],["\u0456","\u0406"],["\u0432","\u0412"],["\u0430","\u0410"],["\u043f","\u041f"],["\u0440",
"\u0420"],["\u043e","\u041e"],["\u043b","\u041b"],["\u0434","\u0414"],["\u0436","\u0416"],["\u0454","\u0404"],["Enter","Enter"]],[["Shift","Shift"],["\u044f","\u042f"],["\u0447","\u0427"],["\u0441","\u0421"],["\u043c","\u041c"],["\u0438","\u0418"],["\u0442","\u0422"],["\u044c","\u042c"],["\u0431","\u0411"],["\u044e","\u042e"],[".",","],["Shift","Shift"]],[[" "," "]]],"lang":["uk"]};this.VKI_layout["United Kingdom"]={"name":"United Kingdom","keys":[[["`","\u00ac","\u00a6"],["1","!"],["2",'"'],["3",
"\u00a3"],["4","$","\u20ac"],["5","%"],["6","^"],["7","&"],["8","*"],["9","("],["0",")"],["-","_"],["=","+"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q"],["w","W"],["e","E","\u00e9","\u00c9"],["r","R"],["t","T"],["y","Y"],["u","U","\u00fa","\u00da"],["i","I","\u00ed","\u00cd"],["o","O","\u00f3","\u00d3"],["p","P"],["[","{"],["]","}"],["#","~"]],[["Caps","Caps"],["a","A","\u00e1","\u00c1"],["s","S"],["d","D"],["f","F"],["g","G"],["h","H"],["j","J"],["k","K"],["l","L"],[";",":"],["'","@"],["Enter","Enter"]],
[["Shift","Shift"],["\\","|"],["z","Z"],["x","X"],["c","C"],["v","V"],["b","B"],["n","N"],["m","M"],[",","<"],[".",">"],["/","?"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]],"lang":["en-gb"]};this.VKI_layout["\u0627\u0631\u062f\u0648"]={"name":"Urdu","keys":[[["`","~"],["1","!"],["2","@"],["3","#"],["4","$"],["5","\u066a"],["6","^"],["7","\u06d6"],["8","\u066d"],["9",")"],["0","("],["-","_"],["=","+"],["Bksp","Bksp"]],[["Tab","Tab"],["\u0637","\u0638"],["\u0635","\u0636"],["\u06be",
"\u0630"],["\u062f","\u0688"],["\u0679","\u062b"],["\u067e","\u0651"],["\u062a","\u06c3"],["\u0628","\u0640"],["\u062c","\u0686"],["\u062d","\u062e"],["]","}"],["[","{"],["\\","|"]],[["Caps","Caps"],["\u0645","\u0698"],["\u0648","\u0632"],["\u0631","\u0691"],["\u0646","\u06ba"],["\u0644","\u06c2"],["\u06c1","\u0621"],["\u0627","\u0622"],["\u06a9","\u06af"],["\u06cc","\u064a"],["\u061b",":"],["'",'"'],["Enter","Enter"]],[["Shift","Shift"],["\u0642","\u200d"],["\u0641","\u200c"],["\u06d2","\u06d3"],
["\u0633","\u200e"],["\u0634","\u0624"],["\u063a","\u0626"],["\u0639","\u200f"],["\u060c",">"],["\u06d4","<"],["/","\u061f"],["Shift","Shift"]],[[" "," "]]],"lang":["ur"]};this.VKI_layout["\u0627\u0631\u062f\u0648 Phonetic"]={"name":"Urdu Phonetic","keys":[[["\u064d","\u064b","~"],["\u06f1","1","!"],["\u06f2","2","@"],["\u06f3","3","#"],["\u06f4","4","$"],["\u06f5","5","\u066a"],["\u06f6","6","^"],["\u06f7","7","&"],["\u06f8","8","*"],["\u06f9","9","("],["\u06f0","0",")"],["-","_"],["=","+"],["Bksp",
"Bksp"]],[["Tab","Tab"],["\u0642","\u0652"],["\u0648","\u0651","\u0602"],["\u0639","\u0670","\u0656"],["\u0631","\u0691","\u0613"],["\u062a","\u0679","\u0614"],["\u06d2","\u064e","\u0601"],["\u0621","\u0626","\u0654"],["\u06cc","\u0650","\u0611"],["\u06c1","\u06c3"],["\u067e","\u064f","\u0657"],["[","{"],["]","}"],["\\","|"]],[["Caps","Caps"],["\u0627","\u0622","\ufdf2"],["\u0633","\u0635","\u0610"],["\u062f","\u0688","\ufdfa"],["\u0641"],["\u06af","\u063a"],["\u062d","\u06be","\u0612"],["\u062c",
"\u0636","\ufdfb"],["\u06a9","\u062e"],["\u0644"],["\u061b",":"],["'",'"'],["Enter","Enter"]],[["Shift","Shift"],["\u0632","\u0630","\u060f"],["\u0634","\u0698","\u060e"],["\u0686","\u062b","\u0603"],["\u0637","\u0638"],["\u0628","","\ufdfd"],["\u0646","\u06ba","\u0600"],["\u0645","\u0658"],["\u060c","","<"],["\u06d4","\u066b",">"],["/","\u061f"],["Shift","Shift"]],[[" "," "," "," "],["Alt","Alt"]]]};this.VKI_layout["US Standard"]={"name":"US Standard","keys":[[["`","~"],["1","!"],["2","@"],["3",
"#"],["4","$"],["5","%"],["6","^"],["7","&"],["8","*"],["9","("],["0",")"],["-","_"],["=","+"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q"],["w","W"],["e","E"],["r","R"],["t","T"],["y","Y"],["u","U"],["i","I"],["o","O"],["p","P"],["[","{"],["]","}"],["\\","|"]],[["Caps","Caps"],["a","A"],["s","S"],["d","D"],["f","F"],["g","G"],["h","H"],["j","J"],["k","K"],["l","L"],[";",":"],["'",'"'],["Enter","Enter"]],[["Shift","Shift"],["z","Z"],["x","X"],["c","C"],["v","V"],["b","B"],["n","N"],["m","M"],[",","<"],
[".",">"],["/","?"],["Shift","Shift"]],[[" "," "]]],"lang":["en-us"]};this.VKI_layout["US International"]={"name":"US International","keys":[[["`","~"],["1","!","\u00a1","\u00b9"],["2","@","\u00b2"],["3","#","\u00b3"],["4","$","\u00a4","\u00a3"],["5","%","\u20ac"],["6","^","\u00bc"],["7","&","\u00bd"],["8","*","\u00be"],["9","(","\u2018"],["0",")","\u2019"],["-","_","\u00a5"],["=","+","\u00d7","\u00f7"],["Bksp","Bksp"]],[["Tab","BkTab"],["q","Q","\u00e4","\u00c4"],["w","W","\u00e5","\u00c5"],["e",
"E","\u00e9","\u00c9"],["r","R","\u00ae"],["t","T","\u00fe","\u00de"],["y","Y","\u00fc","\u00dc"],["u","U","\u00fa","\u00da"],["i","I","\u00ed","\u00cd"],["o","O","\u00f3","\u00d3"],["p","P","\u00f6","\u00d6"],["[","{","\u00ab"],["]","}","\u00bb"],["\\","|","\u00ac","\u00a6"]],[["Caps","Caps"],["a","A","\u00e1","\u00c1"],["s","S","\u00df","\u00a7"],["d","D","\u00f0","\u00d0"],["f","F"],["g","G"],["h","H"],["j","J"],["k","K"],["l","L","\u00f8","\u00d8"],[";",":","\u00b6","\u00b0"],["'",'"',"\u00b4",
"\u00a8"],["FldExit","NL","FldExit","FldExit"]],[["Shift","Shift"],["z","Z","\u00e6","\u00c6"],["x","X"],["c","C","\u00a9","\u00a2"],["v","V"],["b","B"],["n","N","\u00f1","\u00d1"],["m","M","\u00b5"],[",","<","\u00e7","\u00c7"],[".",">"],["/","?","\u00bf"],["Enter","Enter","Enter","Enter"]],[[" "," "],["Alt","Alt"]]],"lang":["en"]};this.VKI_layout["\u040e\u0437\u0431\u0435\u043a\u0447\u0430"]={"name":"Uzbek Cyrillic","keys":[[["\u0451","\u0401"],["1","!"],["2",'"'],["3","\u2116"],["4",";"],["5","%"],
["6",":"],["7","?"],["8","*"],["9","("],["0",")"],["\u0493","\u0492"],["\u04b3","\u04b2"],["Bksp","Bksp"]],[["Tab","Tab"],["\u0439","\u0419"],["\u0446","\u0426"],["\u0443","\u0423"],["\u043a","\u041a"],["\u0435","\u0415"],["\u043d","\u041d"],["\u0433","\u0413"],["\u0448","\u0428"],["\u045e","\u040e"],["\u0437","\u0417"],["\u0445","\u0425"],["\u044a","\u042a"],["\\","/"]],[["Caps","Caps"],["\u0444","\u0424"],["\u049b","\u049a"],["\u0432","\u0412"],["\u0430","\u0410"],["\u043f","\u041f"],["\u0440",
"\u0420"],["\u043e","\u041e"],["\u043b","\u041b"],["\u0434","\u0414"],["\u0436","\u0416"],["\u044d","\u042d"],["Enter","Enter"]],[["Shift","Shift"],["\u044f","\u042f"],["\u0447","\u0427"],["\u0441","\u0421"],["\u043c","\u041c"],["\u0438","\u0418"],["\u0442","\u0422"],["\u044c","\u042c"],["\u0431","\u0411"],["\u044e","\u042e"],[".",","],["Shift","Shift"]],[[" "," "]]],"lang":["uz"]};this.VKI_layout["\u05d9\u05d9\u05b4\u05d3\u05d9\u05e9"]={"name":"Yiddish","keys":[[[";","~","\u05b0"],["1","!","\u05b1"],
["2","@","\u05b2"],["3","#","\u05b3"],["4","$","\u05b4"],["5","%","\u05b5"],["6","^","\u05b6"],["7","*","\u05b7"],["8","&","\u05b8"],["9","(","\u05c2"],["0",")","\u05c1"],["-","_","\u05b9"],["=","+","\u05bc"],["Bksp","Bksp"]],[["Tab","Tab"],["/","\u201f","\u201f"],["'","\u201e","\u201e"],["\u05e7","`","`"],["\u05e8","\ufb2f","\ufb2f"],["\u05d0","\ufb2e","\ufb2e"],["\u05d8","\u05f0","\u05f0"],["\u05d5","\ufb35","\ufb35"],["\u05df","\ufb4b","\ufb4b"],["\u05dd","\ufb4e","\ufb4e"],["\u05e4","\ufb44",
"\ufb44"],["[","{","\u05bd"],["]","}","\u05bf"],["\\","|","\u05bb"]],[["Caps","Caps"],["\u05e9","\ufb2a","\ufb2a"],["\u05d3","\ufb2b","\ufb2b"],["\u05d2"],["\u05db","\ufb3b","\ufb3b"],["\u05e2","\u05f1","\u05f1"],["\u05d9","\ufb1d","\ufb1d"],["\u05d7","\uff1f","\uff1f"],["\u05dc","\u05f2","\u05f2"],["\u05da"],["\u05e3",":","\u05c3"],[",",'"',"\u05c0"],["Enter","Enter"]],[["Shift","Shift"],["\u05d6","\u2260","\u2260"],["\u05e1","\ufb4c","\ufb4c"],["\u05d1","\ufb31","\ufb31"],["\u05d4","\u05be","\u05be"],
["\u05e0","\u2013","\u2013"],["\u05de","\u2014","\u2014"],["\u05e6","\ufb4a","\ufb4a"],["\u05ea","<","\u05f3"],["\u05e5",">","\u05f4"],[".","?","\u20aa"],["Shift","Shift"]],[[" "," "],["Alt","Alt"]]],"lang":["yi"]};this.VKI_layout["\u05d9\u05d9\u05b4\u05d3\u05d9\u05e9 \u05dc\u05e2\u05d1\u05d8"]={"name":"Yiddish (Yidish Lebt)","keys":[[[";","~"],["1","!","\u05b2","\u05b2"],["2","@","\u05b3","\u05b3"],["3","#","\u05b1","\u05b1"],["4","$","\u05b4","\u05b4"],["5","%","\u05b5","\u05b5"],["6","^","\u05b7",
"\u05b7"],["7","&","\u05b8","\u05b8"],["8","*","\u05bb","\u05bb"],["9",")","\u05b6","\u05b6"],["0","(","\u05b0","\u05b0"],["-","_","\u05bf","\u05bf"],["=","+","\u05b9","\u05b9"],["Bksp","Bksp"]],[["Tab","Tab"],["/","","\u05f4","\u05f4"],["'","","\u05f3","\u05f3"],["\u05e7","","\u20ac"],["\u05e8"],["\u05d0","","\u05d0\u05b7","\ufb2e"],["\u05d8","","\u05d0\u05b8","\ufb2f"],["\u05d5","\u05d5\u05b9","\u05d5\u05bc","\ufb35"],["\u05df","","\u05d5\u05d5","\u05f0"],["\u05dd","","\u05bc"],["\u05e4","","\u05e4\u05bc",
"\ufb44"],["]","}","\u201e","\u201d"],["[","{","\u201a","\u2019"],["\\","|","\u05be","\u05be"]],[["Caps","Caps"],["\u05e9","\u05e9\u05c1","\u05e9\u05c2","\ufb2b"],["\u05d3","","\u20aa"],["\u05d2","\u201e"],["\u05db","","\u05db\u05bc","\ufb3b"],["\u05e2","","","\ufb20"],["\u05d9","","\u05d9\u05b4","\ufb1d"],["\u05d7","","\u05f2\u05b7","\ufb1f"],["\u05dc","\u05dc\u05b9","\u05d5\u05d9","\u05f1"],["\u05da","","","\u05f2"],["\u05e3",":","\u05e4\u05bf","\ufb4e"],[",",'"',";","\u05b2"],["Enter","Enter"]],
[["Shift","Shift"],["\u05d6","","\u2013","\u2013"],["\u05e1","","\u2014","\u2014"],["\u05d1","\u05dc\u05b9","\u05d1\u05bf","\ufb4c"],["\u05d4","","\u201d","\u201c"],["\u05e0","","\u059c","\u059e"],["\u05de","","\u2019","\u2018"],["\u05e6","","\u05e9\u05c1","\ufb2a"],["\u05ea",">","\u05ea\u05bc","\ufb4a"],["\u05e5","<"],[".","?","\u2026"],["Shift","Shift"]],[[" "," "," "," "],["Alt","Alt"]]],"lang":["yi"]};this.VKI_layout["\u4e2d\u6587\u6ce8\u97f3\u7b26\u53f7"]={"name":"Chinese Bopomofo IME","keys":[[["\u20ac",
"~"],["\u3105","!"],["\u3109","@"],["\u02c7","#"],["\u02cb","$"],["\u3113","%"],["\u02ca","^"],["\u02d9","&"],["\u311a","*"],["\u311e",")"],["\u3122","("],["\u3126","_"],["=","+"],["Bksp","Bksp"]],[["Tab","Tab"],["\u3106","q"],["\u310a","w"],["\u310d","e"],["\u3110","r"],["\u3114","t"],["\u3117","y"],["\u3127","u"],["\u311b","i"],["\u311f","o"],["\u3123","p"],["[","{"],["]","}"],["\\","|"]],[["Caps","Caps"],["\u3107","a"],["\u310b","s"],["\u310e","d"],["\u3111","f"],["\u3115","g"],["\u3118","h"],
["\u3128","j"],["\u311c","k"],["\u3120","l"],["\u3124",":"],["'",'"'],["Enter","Enter"]],[["Shift","Shift"],["\u3108","z"],["\u310c","x"],["\u310f","c"],["\u3112","v"],["\u3116","b"],["\u3119","n"],["\u3129","m"],["\u311d","<"],["\u3121",">"],["\u3125","?"],["Shift","Shift"]],[[" "," "]]],"lang":["zh-Bopo"]};this.VKI_layout["\u4e2d\u6587\u4ed3\u9889\u8f93\u5165\u6cd5"]={"name":"Chinese Cangjie IME","keys":[[["\u20ac","~"],["1","!"],["2","@"],["3","#"],["4","$"],["5","%"],["6","^"],["7","&"],["8",
"*"],["9",")"],["0","("],["-","_"],["=","+"],["Bksp","Bksp"]],[["Tab","Tab"],["\u624b","q"],["\u7530","w"],["\u6c34","e"],["\u53e3","r"],["\u5eff","t"],["\u535c","y"],["\u5c71","u"],["\u6208","i"],["\u4eba","o"],["\u5fc3","p"],["[","{"],["]","}"],["\\","|"]],[["Caps","Caps"],["\u65e5","a"],["\u5c38","s"],["\u6728","d"],["\u706b","f"],["\u571f","g"],["\u7af9","h"],["\u5341","j"],["\u5927","k"],["\u4e2d","l"],[";",":"],["'",'"'],["Enter","Enter"]],[["Shift","Shift"],["\uff3a","z"],["\u96e3","x"],["\u91d1",
"c"],["\u5973","v"],["\u6708","b"],["\u5f13","n"],["\u4e00","m"],[",","<"],[".",">"],["/","?"],["Shift","Shift"]],[[" "," "]]],"lang":["zh"]};this.VKI_deadkey={};this.VKI_deadkey['"']=this.VKI_deadkey["\u00a8"]=this.VKI_deadkey["\u309b"]={"a":"\u00e4","e":"\u00eb","i":"\u00ef","o":"\u00f6","u":"\u00fc","y":"\u00ff","\u03b9":"\u03ca","\u03c5":"\u03cb","\u016b":"\u01d6","\u00fa":"\u01d8","\u01d4":"\u01da","\u00f9":"\u01dc","A":"\u00c4","E":"\u00cb","I":"\u00cf","O":"\u00d6","U":"\u00dc","Y":"\u0178",
"\u0399":"\u03aa","\u03a5":"\u03ab","\u016a":"\u01d5","\u00da":"\u01d7","\u01d3":"\u01d9","\u00d9":"\u01db","\u304b":"\u304c","\u304d":"\u304e","\u304f":"\u3050","\u3051":"\u3052","\u3053":"\u3054","\u305f":"\u3060","\u3061":"\u3062","\u3064":"\u3065","\u3066":"\u3067","\u3068":"\u3069","\u3055":"\u3056","\u3057":"\u3058","\u3059":"\u305a","\u305b":"\u305c","\u305d":"\u305e","\u306f":"\u3070","\u3072":"\u3073","\u3075":"\u3076","\u3078":"\u3079","\u307b":"\u307c","\u30ab":"\u30ac","\u30ad":"\u30ae",
"\u30af":"\u30b0","\u30b1":"\u30b2","\u30b3":"\u30b4","\u30bf":"\u30c0","\u30c1":"\u30c2","\u30c4":"\u30c5","\u30c6":"\u30c7","\u30c8":"\u30c9","\u30b5":"\u30b6","\u30b7":"\u30b8","\u30b9":"\u30ba","\u30bb":"\u30bc","\u30bd":"\u30be","\u30cf":"\u30d0","\u30d2":"\u30d3","\u30d5":"\u30d6","\u30d8":"\u30d9","\u30db":"\u30dc"};this.VKI_deadkey["~"]={"a":"\u00e3","l":"\u0142","n":"\u00f1","o":"\u00f5","A":"\u00c3","L":"\u0141","N":"\u00d1","O":"\u00d5"};this.VKI_deadkey["^"]={"a":"\u00e2","e":"\u00ea",
"i":"\u00ee","o":"\u00f4","u":"\u00fb","w":"\u0175","y":"\u0177","A":"\u00c2","E":"\u00ca","I":"\u00ce","O":"\u00d4","U":"\u00db","W":"\u0174","Y":"\u0176"};this.VKI_deadkey["\u02c7"]={"c":"\u010d","d":"\u010f","e":"\u011b","s":"\u0161","l":"\u013e","n":"\u0148","r":"\u0159","t":"\u0165","u":"\u01d4","z":"\u017e","\u00fc":"\u01da","C":"\u010c","D":"\u010e","E":"\u011a","S":"\u0160","L":"\u013d","N":"\u0147","R":"\u0158","T":"\u0164","U":"\u01d3","Z":"\u017d","\u00dc":"\u01d9"};this.VKI_deadkey["\u02d8"]=
{"a":"\u0103","g":"\u011f","A":"\u0102","G":"\u011e"};this.VKI_deadkey["-"]=this.VKI_deadkey["\u00af"]={"a":"\u0101","e":"\u0113","i":"\u012b","o":"\u014d","u":"\u016b","y":"\u0233","\u00fc":"\u01d6","A":"\u0100","E":"\u0112","I":"\u012a","O":"\u014c","U":"\u016a","Y":"\u0232","\u00dc":"\u01d5"};this.VKI_deadkey["`"]={"a":"\u00e0","e":"\u00e8","i":"\u00ec","o":"\u00f2","u":"\u00f9","\u00fc":"\u01dc","A":"\u00c0","E":"\u00c8","I":"\u00cc","O":"\u00d2","U":"\u00d9","\u00dc":"\u01db"};this.VKI_deadkey["'"]=
this.VKI_deadkey["\u00b4"]=this.VKI_deadkey["\u0384"]={"a":"\u00e1","e":"\u00e9","i":"\u00ed","o":"\u00f3","u":"\u00fa","y":"\u00fd","\u03b1":"\u03ac","\u03b5":"\u03ad","\u03b7":"\u03ae","\u03b9":"\u03af","\u03bf":"\u03cc","\u03c5":"\u03cd","\u03c9":"\u03ce","\u00fc":"\u01d8","A":"\u00c1","E":"\u00c9","I":"\u00cd","O":"\u00d3","U":"\u00da","Y":"\u00dd","\u0391":"\u0386","\u0395":"\u0388","\u0397":"\u0389","\u0399":"\u038a","\u039f":"\u038c","\u03a5":"\u038e","\u03a9":"\u038f","\u00dc":"\u01d7"};this.VKI_deadkey["\u02dd"]=
{"o":"\u0151","u":"\u0171","O":"\u0150","U":"\u0170"};this.VKI_deadkey["\u0385"]={"\u03b9":"\u0390","\u03c5":"\u03b0"};this.VKI_deadkey["\u00b0"]=this.VKI_deadkey["\u00ba"]={"a":"\u00e5","u":"\u016f","A":"\u00c5","U":"\u016e"};this.VKI_deadkey["\u02db"]={"a":"\u0106","e":"\u0119","i":"\u012f","o":"\u01eb","u":"\u0173","y":"\u0177","A":"\u0105","E":"\u0118","I":"\u012e","O":"\u01ea","U":"\u0172","Y":"\u0176"};this.VKI_deadkey["\u02d9"]={"c":"\u010b","e":"\u0117","g":"\u0121","z":"\u017c","C":"\u010a",
"E":"\u0116","G":"\u0120","Z":"\u017b"};this.VKI_deadkey["\u00b8"]=this.VKI_deadkey["\u201a"]={"c":"\u00e7","s":"\u015f","C":"\u00c7","S":"\u015e"};this.VKI_deadkey[","]={"s":this.VKI_isIElt8?"\u015f":"\u0219","t":this.VKI_isIElt8?"\u0163":"\u021b","S":this.VKI_isIElt8?"\u015e":"\u0218","T":this.VKI_isIElt8?"\u0162":"\u021a"};this.VKI_deadkey["\u3002"]={"\u306f":"\u3071","\u3072":"\u3074","\u3075":"\u3077","\u3078":"\u307a","\u307b":"\u307d","\u30cf":"\u30d1","\u30d2":"\u30d4","\u30d5":"\u30d7","\u30d8":"\u30da",
"\u30db":"\u30dd"};this.VKI_symbol={"\u00a0":"NB\nSP","\u200b":"ZW\nSP","\u200c":"ZW\nNJ","\u200d":"ZW\nJ"};this.VKI_numpad=[[["$"],["\u00a3"],["\u20ac"],["\u00a5"]],[["7"],["8"],["9"],["/"]],[["4"],["5"],["6"],["*"]],[["1"],["2"],["3"],["-"]],[["0"],["."],["="],["+"]]];this.kLinePrcnt=[[9,5.5,5.5,5.5,5.5,5.5,5.5,5.5,5.5,5.5,5.5,5.5,5.5,6.5,6.5,6,6],[7,7,7,7,7,7,7,7,7,7,7,7,7,9],[9,7,7,7,7,7,7,7,7,7,7,7,7,7],[11,7,7,7,7,7,7,7,7,7,7,7,12],[15,7,7,7,7,7,7,7,7,7,7,15],[10,7,44,7,6.5,6.5,6.5,6.5,6]];
this.minSizePercent=6/4/100;this.selectLanguage=function(vkl){for(var kb in this.VKI_layout)if(this.VKI_layout[kb].name==vkl)return kb;return"US International"};this.VKI_kts=this.VKI_kt=this.selectLanguage(vkLanguage);VKI_attach=function(elem){if(elem.getAttribute("VKI_attached"))return false;if(self.VKI_imageURI){var keybut=document.createElement("img");keybut.src=self.VKI_imageURI;keybut.alt=self.VKI_i18n["01"];keybut.className="keyboardInputInitiator";keybut.title=self.VKI_i18n["01"];keybut.elem=
elem;keybut.onclick=function(e){e=e||event;if(e.stopPropagation)e.stopPropagation();else e.cancelBubble=true;self.VKI_show(this.elem)};elem.parentNode.insertBefore(keybut,elem.dir=="rtl"?elem:elem.nextSibling)}else{elem.onfocus=function(){if(self.VKI_target!=this){if(self.VKI_target)self.VKI_close();self.VKI_show(this)}};elem.onclick=function(){if(!self.VKI_target)self.VKI_show(this)}}elem.setAttribute("VKI_attached","true");if(self.VKI_isIE)elem.onclick=elem.onselect=elem.onkeyup=function(e){if((e||
event).type!="keyup"||!this.readOnly)this.range=document.selection.createRange()};VKI_addListener(elem,"click",function(e){if(self.VKI_target==this){e=e||event;if(e.stopPropagation)e.stopPropagation();else e.cancelBubble=true}return false},false);if(self.VKI_isMoz)elem.addEventListener("blur",function(){this.setAttribute("_scrollTop",this.scrollTop)},false)};function VKI_buildKeyboardInputs(){var inputElems=[document.getElementsByTagName("input"),document.getElementsByTagName("textarea")];for(var x=
0,elem;elem=inputElems[x++];)for(var y=0,ex;ex=elem[y++];)if(ex.nodeName=="TEXTAREA"||ex.type=="text"||ex.type=="password")if(ex.className.indexOf("keyboardInput")>-1)VKI_attach(ex);VKI_addListener(document.documentElement,"click",function(e){self.VKI_close()},false)}function VKI_mouseEvents(elem){if(elem.nodeName=="TD"){if(!elem.click)elem.click=function(){var evt=this.ownerDocument.createEvent("MouseEvents");evt.initMouseEvent("click",true,true,this.ownerDocument.defaultView,1,0,0,0,0,false,false,
false,false,0,null);this.dispatchEvent(evt)};elem.VKI_clickless=0;VKI_addListener(elem,"dblclick",function(){return false},false)}VKI_addListener(elem,"mouseover",function(){if(this.nodeName=="TD"&&self.VKI_clickless){var _self=this;clearTimeout(this.VKI_clickless);this.VKI_clickless=setTimeout(function(){_self.click()},self.VKI_clickless)}if(self.VKI_isIE)this.className+=" hover"},false);VKI_addListener(elem,"mouseout",function(){if(this.nodeName=="TD")clearTimeout(this.VKI_clickless);if(self.VKI_isIE)this.className=
this.className.replace(/ ?(hover|pressed) ?/g,"")},false);VKI_addListener(elem,"mousedown",function(){if(this.nodeName=="TD")clearTimeout(this.VKI_clickless);if(self.VKI_isIE)this.className+=" pressed";if(this.key)self.VKI_keyEvent(this.key,"down")},false);VKI_addListener(elem,"touchstart",function(e){if(this.nodeName=="TD")clearTimeout(this.VKI_clickless);if(self.VKI_isFFAndroid)this.className=this.className.replace(/ ?free ?/g,"");if(self.VKI_isIE)this.className+=" pressed";if(this.key)self.VKI_keyEvent(this.key,
"touchstart");e.stopPropagation();e.preventDefault();return false},false);VKI_addListener(elem,"mouseup",function(){if(this.nodeName=="TD")clearTimeout(this.VKI_clickless);if(self.VKI_isIE)this.className=this.className.replace(/ ?pressed ?/g,"");if(this.key){self.VKI_keyEvent(this.key,"up");if(this.key=="HIDEKBD"&&self.VKI_hideEvent)self.VKI_hideEvent();else if(self.VKI_shift&&this.key!="Shift"&&this.key!="Alt"&&this.key!="Caps")self.VKI_modify("Shift")}},false);VKI_addListener(elem,"touchend",function(e){if(this.nodeName==
"TD")clearTimeout(this.VKI_clickless);if(self.VKI_isIE)this.className=this.className.replace(/ ?pressed ?/g,"");if(this.key){self.VKI_keyEvent(this.key,"touchend");var common=this.key!="Shift"&&this.key!="Alt"&&this.key!="Caps";if(this.key=="HIDEKBD"&&self.VKI_hideEvent)self.VKI_hideEvent();else if(self.VKI_shift&&common){self.VKI_modify("Shift");if(self.VKI_isFFAndroid){vkey=this;window.setTimeout(function(){vkey.className+=" free"},100)}}else if(self.VKI_isFFAndroid&&(common||!self.VKI_altgr&&this.key==
"Alt"||!self.VKI_shiftlock&&this.key=="Caps"||!self.VKI_shift&&this.key=="Shift")){vkey=this;window.setTimeout(function(){vkey.className+=" free"},100)}}e.stopPropagation();e.preventDefault()},true)}this.VKI_keyboard=document.createElement("table");this.VKI_keyboard.id="keyboardInputMaster";this.VKI_keyboard.dir="ltr";this.VKI_keyboard.cellSpacing="0";this.VKI_keyboard.reflow=function(){this.style.width="50px";var foo=this.offsetWidth;this.style.width="100%"};this.VKI_keyboard.style.width="100%";
VKI_addListener(this.VKI_keyboard,"click",function(e){e=e||event;if(e.stopPropagation)e.stopPropagation();else e.cancelBubble=true;return false},false);if(!this.VKI_layout[this.VKI_kt])return alert('No keyboard named "'+this.VKI_kt+'"');this.VKI_langCode={};var thead=document.createElement("thead");var tr=document.createElement("tr");var th=document.createElement("th");th.colSpan="2";if(this.VKI_showHeader){var kbSelect=document.createElement("div");kbSelect.title=this.VKI_i18n["02"];VKI_addListener(kbSelect,
"click",function(){var ol=this.getElementsByTagName("ol")[0];if(!ol.style.display){ol.style.display="block";var li=ol.getElementsByTagName("li");for(var x=0,scr=0;x<li.length;x++)if(this.VKI_kt==li[x].firstChild.nodeValue){li[x].className="selected";scr=li[x].offsetTop-li[x].offsetHeight*2}else li[x].className="";setTimeout(function(){ol.scrollTop=scr},0)}else ol.style.display=""},false);kbSelect.appendChild(document.createTextNode(this.VKI_kt));kbSelect.appendChild(document.createTextNode(this.VKI_isIElt8?
" \u2193":" \u25be"));kbSelect.langCount=0;var ol=document.createElement("ol");for(ktype in this.VKI_layout)if(typeof this.VKI_layout[ktype]=="object"){if(!this.VKI_layout[ktype].lang)this.VKI_layout[ktype].lang=[];for(var x=0;x<this.VKI_layout[ktype].lang.length;x++)this.VKI_langCode[this.VKI_layout[ktype].lang[x].toLowerCase().replace(/-/g,"_")]=ktype;var li=document.createElement("li");li.title=this.VKI_layout[ktype].name;VKI_addListener(li,"click",function(e){e=e||event;if(e.stopPropagation)e.stopPropagation();
else e.cancelBubble=true;this.parentNode.style.display="";self.VKI_kts=self.VKI_kt=kbSelect.firstChild.nodeValue=this.firstChild.nodeValue;self.VKI_buildKeys();self.VKI_position(true)},false);VKI_mouseEvents(li);li.appendChild(document.createTextNode(ktype));ol.appendChild(li);kbSelect.langCount++}kbSelect.appendChild(ol);if(kbSelect.langCount>1)th.appendChild(kbSelect);this.VKI_langCode.index=[];for(prop in this.VKI_langCode)if(prop!="index"&&typeof this.VKI_langCode[prop]=="string")this.VKI_langCode.index.push(prop);
this.VKI_langCode.index.sort();this.VKI_langCode.index.reverse();if(this.VKI_numberPad){var span=document.createElement("span");span.appendChild(document.createTextNode("#"));span.title=this.VKI_i18n["00"];VKI_addListener(span,"click",function(){kbNumpad.style.display=!kbNumpad.style.display?"none":"";self.VKI_position(true)},false);VKI_mouseEvents(span);th.appendChild(span)}this.VKI_kbsize=function(e){self.VKI_size=Math.min(5,Math.max(1,self.VKI_size));self.VKI_keyboard.className=self.VKI_keyboard.className.replace(/ ?keyboardInputSize\d ?/,
"");if(self.VKI_size!=2)self.VKI_keyboard.className+=" keyboardInputSize"+self.VKI_size;self.VKI_position(true);if(self.VKI_isOpera)self.VKI_keyboard.reflow()};if(this.VKI_sizeAdj){var small=document.createElement("small");small.title=this.VKI_i18n["10"];VKI_addListener(small,"click",function(){--self.VKI_size;self.VKI_kbsize()},false);VKI_mouseEvents(small);small.appendChild(document.createTextNode(this.VKI_isIElt8?"\u2193":"\u21d3"));th.appendChild(small);var big=document.createElement("big");big.title=
this.VKI_i18n["11"];VKI_addListener(big,"click",function(){++self.VKI_size;self.VKI_kbsize()},false);VKI_mouseEvents(big);big.appendChild(document.createTextNode(this.VKI_isIElt8?"\u2191":"\u21d1"));th.appendChild(big)}var span=document.createElement("span");span.appendChild(document.createTextNode(this.VKI_i18n["07"]));span.title=this.VKI_i18n["08"];VKI_addListener(span,"click",function(){self.VKI_target.value="";self.VKI_target.focus();return false},false);VKI_mouseEvents(span);th.appendChild(span);
var strong=document.createElement("strong");strong.appendChild(document.createTextNode("X"));strong.title=this.VKI_i18n["06"];VKI_addListener(strong,"click",function(){self.VKI_close()},false);VKI_mouseEvents(strong);th.appendChild(strong);tr.appendChild(th);thead.appendChild(tr);this.VKI_keyboard.appendChild(thead)}var tbody=document.createElement("tbody");var tr=document.createElement("tr");var td=document.createElement("td");var div=document.createElement("div");if(this.VKI_deadBox){var label=
document.createElement("label");var checkbox=document.createElement("input");checkbox.type="checkbox";checkbox.title=this.VKI_i18n["03"]+": "+(this.VKI_deadkeysOn?this.VKI_i18n["04"]:this.VKI_i18n["05"]);checkbox.defaultChecked=this.VKI_deadkeysOn;VKI_addListener(checkbox,"click",function(){this.title=self.VKI_i18n["03"]+": "+(this.checked?self.VKI_i18n["04"]:self.VKI_i18n["05"]);self.VKI_modify("");return true},false);label.appendChild(checkbox);checkbox.checked=this.VKI_deadkeysOn;div.appendChild(label);
this.VKI_deadkeysOn=checkbox}else this.VKI_deadkeysOn.checked=this.VKI_deadkeysOn;if(this.VKI_showVersion){var vr=document.createElement("var");vr.title=this.VKI_i18n["09"]+" "+this.VKI_version;vr.appendChild(document.createTextNode("v"+this.VKI_version));div.appendChild(vr)}td.appendChild(div);tr.appendChild(td);var kbNumpad=document.createElement("td");kbNumpad.id="keyboardInputNumpad";if(!this.VKI_numberPadOn)kbNumpad.style.display="none";var ntable=document.createElement("table");ntable.cellSpacing=
"0";var ntbody=document.createElement("tbody");for(var x=0;x<this.VKI_numpad.length;x++){var ntr=document.createElement("tr");for(var y=0;y<this.VKI_numpad[x].length;y++){var ntd=document.createElement("td");VKI_mouseEvents(ntd);ntd.key=this.VKI_numpad[x][y];ntd.appendChild(document.createTextNode(this.VKI_numpad[x][y]));ntr.appendChild(ntd)}ntbody.appendChild(ntr)}ntable.appendChild(ntbody);kbNumpad.appendChild(ntable);tr.appendChild(kbNumpad);tbody.appendChild(tr);this.VKI_keyboard.appendChild(tbody);
if(this.VKI_isIE6){this.VKI_iframe=document.createElement("iframe");this.VKI_iframe.style.position="absolute";this.VKI_iframe.style.border="0px none";this.VKI_iframe.style.filter="mask()";this.VKI_iframe.style.zIndex="999999";this.VKI_iframe.src=this.VKI_imageURI}function VKI_keyClick(){var done=false,character="\u00a0";if(this.firstChild.nodeName.toLowerCase()!="small"){if((character=this.firstChild.nodeValue)=="\u00a0")return false}else character=this.firstChild.getAttribute("char");if(self.VKI_deadkeysOn.checked&&
self.VKI_dead)if(self.VKI_dead!=character)if(character!=" "){if(self.VKI_deadkey[self.VKI_dead][character]){self.VKI_insert(self.VKI_deadkey[self.VKI_dead][character]);done=true}}else{self.VKI_insert(self.VKI_dead);done=true}else done=true;self.VKI_dead=false;if(!done)if(self.VKI_deadkeysOn.checked&&self.VKI_deadkey[character]){self.VKI_dead=character;this.className+=" dead";if(self.VKI_shift)self.VKI_modify("Shift");if(self.VKI_altgr)self.VKI_modify("AltGr");if(self.VKI_ctrl)self.VKI_modify("Ctrl")}else self.VKI_insert(character);
self.VKI_modify("");return false}this.fillKey=function(keybox,kdata,className){if(kdata.html){keybox.key=kdata.key;keybox.innerHTML=kdata.html;if(kdata.html.substring(0,1)=="&")className.push("big")}else if(kdata.styleClass){var el=document.createElement("SPAN");el.style.width="100%";el.className="big kbButtonCont "+kdata.styleClass;el.appendChild(document.createTextNode("\u00a0"));keybox.style.padding="0px";keybox.key=kdata.key;keybox.appendChild(el);className.push("big")}else{keybox.key=kdata;if(this.VKI_symbol[kdata]){var text=
this.VKI_symbol[kdata].split("\n");var small=document.createElement("small");small.setAttribute("char",kdata);for(var z=0;z<text.length;z++){if(z)small.appendChild(document.createElement("br"));small.appendChild(document.createTextNode(text[z]))}keybox.appendChild(small)}else{keybox.appendChild(document.createTextNode(kdata||"\u00a0"));if(kdata.length==1)className.push("big")}}};this.VKI_buildKeys=function(){this.VKI_shift=this.VKI_shiftlock=this.VKI_altgr=this.VKI_altgrlock=this.VKI_dead=this.VKI_ctrl=
false;var container=this.VKI_keyboard.tBodies[0].getElementsByTagName("div")[0];var tables=container.getElementsByTagName("table");for(var x=tables.length-1;x>=0;x--)container.removeChild(tables[x]);this.currentKB=this.VKI_layout[this.VKI_kt].keys.slice(0);this.currentLinePrcnt=this.kLinePrcnt.slice(0);if(this.VKI_addProtoKeys){var protoRows=this.VKI_protocolLayout[this.VKI_zsProtocol].keys.slice(0);if(protoRows){this.currentKB.unshift(protoRows[0].slice(0));for(var r=1;r<protoRows.length-1;r++)if(protoRows[r].length==
1){this.currentKB[r][this.currentKB[r].length-1]=protoRows[r][0];if(this.currentKB[r].length==13){var aux=this.currentLinePrcnt[r][this.currentLinePrcnt[r].length-1]-this.currentLinePrcnt[r][this.currentLinePrcnt[r].length-2];this.currentLinePrcnt[r][this.currentLinePrcnt[r].length-1]=this.currentLinePrcnt[r][this.currentLinePrcnt[r].length-2];this.currentLinePrcnt[r].push(aux)}}else if(protoRows[r].length>=this.currentKB[r].length)for(var c=0;c<this.currentKB[r].length;c++){var co=c;if(c==this.currentKB[r].length-
1&&protoRows[r].length==this.currentKB[r].length+1)co++;if(protoRows[r][co])for(var i=0;i<protoRows[r][co].length;i++)if(this.currentKB[r][c].length<i+1)this.currentKB[r][c].push(protoRows[r][co][i]);else if(protoRows[r][co][i])this.currentKB[r][c][i]=protoRows[r][co][i]}this.currentKB[this.currentKB.length-1]=protoRows[protoRows.length-1].slice(0)}}for(var x=0,hasDeadKey=false,lyt;lyt=this.currentKB[x++];){var table=document.createElement("table");table.cellSpacing="0";if(lyt.length<=this.VKI_keyCenter)table.className=
"keyboardInputCenter";var tbody=document.createElement("tbody");var tr=document.createElement("tr");for(var y=0,lkey;lkey=lyt[y++];){var className=[];var td=document.createElement("td");this.fillKey(td,lkey[0],className);td.style.width=this.kLinePrcnt[x-1][y-1]+"%";if(this.VKI_deadkeysOn.checked)for(key in this.VKI_deadkey)if(key===lkey[0]){className.push("deadkey");break}if(lyt.length>this.VKI_keyCenter&&y==lyt.length)className.push("last");if(lkey[0]==" "||lkey[1]==" ")className.push("space big");
if(lkey[0].length>1)className.push(lkey[0]);td.className=className.join(" ");switch(lkey[1]){case "Caps":case "Shift":case "Ctrl":case "Alt":case "AltGr":case "AltLk":VKI_addListener(td,"click",function(type){return function(){self.VKI_modify(type);return false}}(lkey[1].key?lkey[1].key:lkey[1]),false);VKI_addListener(td,"touchstart",function(type){return function(e){self.VKI_modify(type);return false}}(lkey[1].key?lkey[1].key:lkey[1]),false);break;default:}VKI_mouseEvents(td);tr.appendChild(td);
for(var z=0;z<4;z++)if(this.VKI_deadkey[lkey[z]=lkey[z]||""])hasDeadKey=true}tbody.appendChild(tr);table.appendChild(tbody);container.appendChild(table)}if(this.VKI_deadBox)this.VKI_deadkeysOn.style.display=hasDeadKey?"inline":"none";if(this.VKI_isIE6){this.VKI_iframe.style.width=this.VKI_keyboard.offsetWidth+"px";this.VKI_iframe.style.height=this.VKI_keyboard.offsetHeight+"px"}};this.adjustFont=function(){this.VKI_keyboard.style.fontSize=Math.floor(this.VKI_keyboard.offsetWidth*this.minSizePercent)+
"px"};this.adjustSize=function(){if(this.VKI_keyboard.offsetWidth!=0){this.adjustFont();if(this.VKI_resizeEvent)this.VKI_resizeEvent(this.VKI_keyboard.offsetHeight)}};this.VKI_buildKeys();VKI_addListener(this.VKI_keyboard,"selectstart",function(){return false},false);VKI_addListener(window,"resize",function(){self.adjustSize()},false);this.VKI_keyboard.unselectable="on";if(this.VKI_isOpera)VKI_addListener(this.VKI_keyboard,"mousedown",function(){return false},false);this.VKI_modify=function(type){switch(type){case "Alt":case "AltGr":this.VKI_altgr=
!this.VKI_altgr;break;case "AltLk":this.VKI_altgr=0;this.VKI_altgrlock=!this.VKI_altgrlock;break;case "Caps":this.VKI_shiftlock=!this.VKI_shiftlock;break;case "Shift":this.VKI_shift=!this.VKI_shift;break;case "Ctrl":this.VKI_ctrl=!this.VKI_ctrl;break}var vchar=0;if(!!this.VKI_shift||!!this.VKI_shiftlock)vchar+=1;if(!this.VKI_altgr!=!this.VKI_altgrlock)vchar+=2;if(this.VKI_ctrl)vchar+=4;var tables=this.VKI_keyboard.tBodies[0].getElementsByTagName("div")[0].getElementsByTagName("table");for(var x=0;x<
tables.length;x++){var tds=tables[x].getElementsByTagName("td");for(var y=0;y<tds.length;y++){var className=[],lkey=this.currentKB[x][y];var zchar=vchar;if(this.VKI_shift==false&&this.VKI_shiftlock==true)switch(x){case 0:case 5:zchar--;break;default:if(lkey[0].key||lkey[0].length>1||lkey[0]==lkey[0].toUpperCase())zchar--;break}switch(lkey[1]){case "Alt":case "AltGr":if(this.VKI_altgr)className.push("pressed");break;case "AltLk":if(this.VKI_altgrlock)className.push("pressed");break;case "Shift":if(this.VKI_shift)className.push("pressed");
break;case "Ctrl":if(this.VKI_ctrl)className.push("pressed");break;case "Caps":if(this.VKI_shiftlock)className.push("pressed");break;default:if(type){var ch="";if(lkey.length>zchar)ch=lkey[zchar];tds[y].removeChild(tds[y].firstChild);this.fillKey(tds[y],ch,className)}if(this.VKI_deadkeysOn.checked){var character=tds[y].firstChild.nodeValue||tds[y].firstChild.className;if(this.VKI_dead){if(character==this.VKI_dead)className.push("pressed");if(this.VKI_deadkey[this.VKI_dead][character])className.push("target")}if(this.VKI_deadkey[character])className.push("deadkey")}}if(y==
tds.length-1&&tds.length>this.VKI_keyCenter)className.push("last");if(lkey[0]==" "||lkey[1]==" ")className.push("space");if(lkey[0].length>0)className.push(lkey[0]);tds[y].className=className.join(" ")}}};this.VKI_insert=function(text){this.VKI_target.focus();if(this.VKI_target.maxLength)this.VKI_target.maxlength=this.VKI_target.maxLength;if(typeof this.VKI_target.maxlength=="undefined"||this.VKI_target.maxlength<0||this.VKI_target.value.length<this.VKI_target.maxlength){if(this.VKI_target.setSelectionRange&&
!this.VKI_target.readOnly&&!this.VKI_isIE){var rng=[this.VKI_target.selectionStart,this.VKI_target.selectionEnd];this.VKI_target.value=this.VKI_target.value.substr(0,rng[0])+text+this.VKI_target.value.substr(rng[1]);if(text=="\n"&&this.VKI_isOpera)rng[0]++;this.VKI_target.setSelectionRange(rng[0]+text.length,rng[0]+text.length)}else if(this.VKI_target.createTextRange&&!this.VKI_target.readOnly){try{this.VKI_target.range.select()}catch(e){this.VKI_target.range=document.selection.createRange()}this.VKI_target.range.text=
text;this.VKI_target.range.collapse(true);this.VKI_target.range.select()}else this.VKI_target.value+=text;if(this.VKI_shift)this.VKI_modify("Shift");if(this.VKI_altgr)this.VKI_modify("AltGr");if(this.VKI_ctrl)this.VKI_modify("Ctrl");this.VKI_target.focus()}else if(this.VKI_target.createTextRange&&this.VKI_target.range)this.VKI_target.range.select()};this.VKI_show=function(elem){if(!this.VKI_target){this.VKI_target=elem;if(this.VKI_langAdapt&&this.VKI_target.lang){var chg=false,sub=[],lang=this.VKI_target.lang.toLowerCase().replace(/-/g,
"_");for(var x=0,chg=false;!chg&&x<this.VKI_langCode.index.length;x++)if(lang.indexOf(this.VKI_langCode.index[x])==0)chg=kbSelect.firstChild.nodeValue=this.VKI_kt=this.VKI_langCode[this.VKI_langCode.index[x]];if(chg)this.VKI_buildKeys()}if(this.VKI_isIE){if(!this.VKI_target.range){this.VKI_target.range=this.VKI_target.createTextRange();this.VKI_target.range.moveStart("character",this.VKI_target.value.length)}this.VKI_target.range.select()}try{this.VKI_keyboard.parentNode.removeChild(this.VKI_keyboard)}catch(e){}if(this.VKI_clearPasswords&&
this.VKI_target.type=="password")this.VKI_target.value="";var elem=this.VKI_target;this.VKI_target.keyboardPosition="absolute";do if(VKI_getStyle(elem,"position")=="fixed"){this.VKI_target.keyboardPosition="fixed";break}while(elem=elem.offsetParent);if(this.VKI_isIE6)document.body.appendChild(this.VKI_iframe);document.body.appendChild(this.VKI_keyboard);this.VKI_keyboard.style.position=this.VKI_target.keyboardPosition;if(this.VKI_isOpera)this.VKI_keyboard.reflow();this.VKI_position(true);if(self.VKI_isMoz||
self.VKI_isWebKit)this.VKI_position(true);this.VKI_target.blur();this.VKI_target.focus()}else this.VKI_close()};this.VKI_position=function(force){if(self.VKI_target){var kPos=VKI_findPos(self.VKI_keyboard),wDim=VKI_innerDimensions(),sDis=VKI_scrollDist();var place=false,fudge=self.VKI_target.offsetHeight+3;if(force!==true)if(kPos[1]+self.VKI_keyboard.offsetHeight-sDis[1]-wDim[1]>0){place=true;fudge=-self.VKI_keyboard.offsetHeight-3}else if(kPos[1]-sDis[1]<0)place=true;if(place||force===true){var iPos=
VKI_findPos(self.VKI_target),scr=self.VKI_target;while(scr=scr.parentNode){if(scr==document.body)break;if(scr.scrollHeight>scr.offsetHeight||scr.scrollWidth>scr.offsetWidth){if(!scr.getAttribute("VKI_scrollListener")){scr.setAttribute("VKI_scrollListener",true);VKI_addListener(scr,"scroll",function(){self.VKI_position(true)},false)}var pPos=VKI_findPos(scr),oTop=iPos[1]-pPos[1],oLeft=iPos[0]-pPos[0];var top=oTop+self.VKI_target.offsetHeight;var left=oLeft+self.VKI_target.offsetWidth;var bottom=scr.offsetHeight-
oTop-self.VKI_target.offsetHeight;var right=scr.offsetWidth-oLeft-self.VKI_target.offsetWidth;self.VKI_keyboard.style.display=top<0||left<0||bottom<0||right<0?"none":"";if(self.VKI_isIE6)self.VKI_iframe.style.display=top<0||left<0||bottom<0||right<0?"none":""}}self.VKI_keyboard.style.top=iPos[1]-(self.VKI_target.keyboardPosition=="fixed"&&!self.VKI_isIE&&!self.VKI_isMoz?sDis[1]:0)+fudge+"px";self.VKI_keyboard.style.left=Math.max(10,Math.min(wDim[0]-self.VKI_keyboard.offsetWidth-25,iPos[0]))+"px";
if(self.VKI_isIE6){self.VKI_iframe.style.width=self.VKI_keyboard.offsetWidth+"px";self.VKI_iframe.style.height=self.VKI_keyboard.offsetHeight+"px";self.VKI_iframe.style.top=self.VKI_keyboard.style.top;self.VKI_iframe.style.left=self.VKI_keyboard.style.left}}if(force===true)self.VKI_position()}};this.VKI_close=VKI_close=function(){if(this.VKI_target){try{this.VKI_keyboard.parentNode.removeChild(this.VKI_keyboard);if(this.VKI_isIE6)this.VKI_iframe.parentNode.removeChild(this.VKI_iframe)}catch(e){}if(this.VKI_kt!=
this.VKI_kts){kbSelect.firstChild.nodeValue=this.VKI_kt=this.VKI_kts;this.VKI_buildKeys()}kbSelect.getElementsByTagName("ol")[0].style.display="";this.VKI_target.focus();if(this.VKI_isIE)setTimeout(function(){self.VKI_target=false},0);else this.VKI_target=false}};this.hide=function(){if(this.VKI_hideEvent!=null)this.VKI_hideEvent();else(this.VKI_keyboard.parentNode||this.VKI_keyboard.parentElement).style.display="none"};this.VKI_ListLangLayouts=function(){for(var kbl in this.VKI_layout){var lay=this.VKI_layout[kbl];
var size="";for(var r=0;r<lay.keys.length;r++)size+=", "+lay.keys[r].length;console.log("Layout: "+lay.name+", Rows: "+lay.keys.length+" ["+size.substr(2)+"]")}};function VKI_addListener(elem,type,func,cap){if(elem.addEventListener)elem.addEventListener(type,function(e){func.call(elem,e)},cap);else if(elem.attachEvent)elem.attachEvent("on"+type,function(){func.call(elem)})}function VKI_findPos(obj){var curleft=curtop=0,scr=obj;while((scr=scr.parentNode)&&scr!=document.body){curleft-=scr.scrollLeft||
0;curtop-=scr.scrollTop||0}do{curleft+=obj.offsetLeft;curtop+=obj.offsetTop}while(obj=obj.offsetParent);return[curleft,curtop]}function VKI_innerDimensions(){if(self.innerHeight)return[self.innerWidth,self.innerHeight];else if(document.documentElement&&document.documentElement.clientHeight)return[document.documentElement.clientWidth,document.documentElement.clientHeight];else if(document.body)return[document.body.clientWidth,document.body.clientHeight];return[0,0]}function VKI_scrollDist(){var html=
document.getElementsByTagName("html")[0];if(html.scrollTop&&document.documentElement.scrollTop)return[html.scrollLeft,html.scrollTop];else if(html.scrollTop||document.documentElement.scrollTop)return[html.scrollLeft+document.documentElement.scrollLeft,html.scrollTop+document.documentElement.scrollTop];else if(document.body.scrollTop)return[document.body.scrollLeft,document.body.scrollTop];return[0,0]}function VKI_getStyle(obj,styleProp){if(obj.currentStyle)var y=obj.currentStyle[styleProp];else if(window.getComputedStyle)var y=
window.getComputedStyle(obj,null)[styleProp];return y}var cont=document.getElementById(containerID);cont.appendChild(this.VKI_keyboard);this.adjustFont();var oh=this.VKI_keyboard.offsetHeight+"px";cont.style.height=oh}
function ContextMenu(params){var _this=this;var _menu=null;var _shdwBottom=null;var _shdwRight=null;var _shdwCorner=null;var _ie=navigator.appName=="Microsoft Internet Explorer";var _ie7=/MSIE \d+\.\d+;/.test(navigator.userAgent)&&navigator.userAgent.match(/MSIE (\d+\.\d+);/)[1]=="7.0";this.target=null;this.items=[];this.elements=[];this.addItem=null;this.addSeparator=null;this.enableItems=null;this.disableItems=null;this.removeItems=null;this.clearItems=null;this.register=null;this.unregister=null;
this.registerTag=null;this.unregisterTag=null;this.unregisterAll=null;this.registerClick=false;this.show=null;this.hide=null;this.onShow=null;this.onHide=null;for(var p in params)this[p]=params[p];this.addItem=function(){var params;if(arguments.length>1)params={id:arguments[0],label:arguments[1],callback:arguments[2],icon:arguments[3],active:arguments[4],checked:arguments[5]};else if(typeof arguments[0]=="object")params=arguments[0];var label=params.label?typeof params.label=="function"?params.label({menu:_this,
target:null}).toString():params.label.toString():"";var itemDiv,tbody,row,iconCol,textCol;if(params.separator){itemDiv=document.createElement("table");itemDiv.className="separator";tbody=document.createElement("tbody");row=document.createElement("tr");iconCol=document.createElement("td");iconCol.className="left";row.appendChild(iconCol);textCol=document.createElement("td");textCol.className="right";textCol.innerHTML="<hr />";row.appendChild(textCol);tbody.appendChild(row);itemDiv.appendChild(tbody)}else{itemDiv=
document.createElement("table");itemDiv.active=params.active==false?false:true;itemDiv.className="item"+(itemDiv.active?" active":" inactive");itemDiv.setAttribute("cellpadding","0");itemDiv.setAttribute("cellspacing","0");tbody=document.createElement("tbody");row=document.createElement("tr");iconCol=document.createElement("td");iconCol.className="icon";row.appendChild(iconCol);textCol=document.createElement("td");textCol.className="label";textCol.innerHTML=label;row.appendChild(textCol);tbody.appendChild(row);
itemDiv.appendChild(tbody);if(params.icon)iconCol.style.backgroundImage="url('"+(typeof params.icon=="function"?params.icon({menu:_this,target:null}).toString():params.icon)+"')";else if(params.checked)iconCol.style.backgroundImage="url('"+this.checkIcon+"')";if(params.callback)itemDiv.onclick=function(){if(this.active){var elem=_this.target;_this.hide();if(elem.focus)elem.focus();params.callback({menu:_this,target:elem,item:{label:this.label?typeof this.label=="function"?this.label({menu:_this,target:_this.target}).toString():
this.label.toString():"",id:this.xid}})}}}itemDiv.xid=params.id;itemDiv.label=params.label;itemDiv.icon=params.icon;itemDiv.iconCell=iconCol;itemDiv.textCell=textCol;itemDiv.remove=function(){_this.removeItems(this)};itemDiv.disable=function(){_this.disableItems(this)};itemDiv.enable=function(){_this.enableItems(this)};_menu.appendChild(itemDiv);this.items.push(itemDiv);if(params.id)this[params.id]=this.items[this.items.length-1];return itemDiv};this.addSeparator=function(id){return _this.addItem({id:id,
separator:true})};this.setItemIcon=function(item,iconURL){if(typeof item=="object"){item.icon=iconURL;var i=0;while(i<this.items.length&&this.items[i].xid!=item.id)i++;if(i==this.items.length)return;this.items[i].icon=item.icon;this.items[i].iconCell.style.backgroundImage="url("+item.icon+")"}};this.checkItem=function(item){this.setItemIcon(item,this.checkIcon);item.checked=true};this.uncheckItem=function(item){this.setItemIcon(item,"");item.checked=false};this.enableItems=function(){var id;for(var j=
0;j<arguments.length;j++){id=arguments[j];if(typeof id=="object"){id.className="item active";id.active=true}else if(typeof id=="number"&&_this.items[id]){_this.items[id].className="item active";_this.items[id].active=true}else if(typeof id=="string")for(var i=0;i<_this.items.length;i++)if(_this.items[i].xid==id){_this.items[i].className="item active";_this.items[i].active=true;break}}};this.disableItems=function(){var id;for(var j=0;j<arguments.length;j++){id=arguments[j];if(typeof id=="object"){id.className=
"item inactive";id.active=false}else if(typeof id=="number"&&_this.items[id]){_this.items[id].className="item inactive";_this.items[id].active=false}else if(typeof id=="string")for(var i=0;i<_this.items.length;i++)if(_this.items[i].xid==id){_this.items[i].className="item inactive";_this.items[i].active=false;break}}};this.removeItems=function(){var id;for(var j=0;j<arguments.length;j++){id=arguments[j];if(typeof id=="number"&&_this.items[id]){_menu.removeChild(_this.items[id]);_this.items.splice(id,
1)}else for(var i=0;i<_this.items.length;i++)if(typeof id=="string"&&_this.items[i].xid==id||_this.items[i]==id){_menu.removeChild(_this.items[i]);_this.items.splice(i,1);break}}};this.clearItems=function(){for(var i=0;i<_this.items.length;i++)_menu.removeChild(_this.items[i]);_this.items=[]};this.register=function(){var obj;for(var i=0;i<arguments.length;i++){obj=typeof arguments[i]=="string"?document.getElementById(arguments[i]):arguments[i];if(obj&&!obj.hasContextMenu){obj.hasContextMenu=true;
_this.elements.push(obj)}}};this.unregister=function(){var obj;for(var j=0;j<arguments.length;j++){obj=typeof arguments[j]=="string"?document.getElementById(arguments[j]):arguments[j];if(obj)for(var i=0;i<_this.elements.length;i++)if(_this.elements[i]==obj){_this.elements[i].hasContextMenu=false;_this.elements.splice(i,1)}}};this.registerTag=function(tagName,options){var tags=document.getElementsByTagName(tagName);var isOk=true;for(var i=0;i<tags.length;i++)if(options){for(var u=0;u<options.length;u++)if(tags[i].getAttribute&&
!tags[i].getAttribute(options[u].name).match(new RegExp("\\b"+options[u].value+"\\b"))){isOk=false;break}if(isOk)_this.register(tags[i]);else isOk=true}else _this.register(tags[i])};this.unregisterTag=function(tagName,options){var tags=document.getElementsByTagName(tagName);var isOk=true;for(var i=0;i<tags.length;i++)if(options){for(var u=0;u<options.length;u++)if(tags[i].getAttribute(options[u].name)!=options[u].value){isOk=false;break}if(isOk)_this.unregister(tags[i])}else _this.unregister(tags[i])};
this.unregisterAll=function(){for(var i=0;i<_this.elements.length;i++)_this.unregister(_this.elements[i])};this.show=function(evt){var e=evt?evt:window.event?window.event:null;var t=e.target?e.target:e.srcElement;if(_this.items.length>0){var temp=t;if(temp.type&&temp.type=="ContextMenu.Menu"){CM_preventDefaultAction(evt);return false}if(temp.offsetParent)while(temp=temp.offsetParent)if(temp.type&&temp.type=="ContextMenu.Menu"){CM_preventDefaultAction(evt);return false}for(var i=0;i<_this.elements.length;i++)if(CM_isChildOf(_this.elements[i],
t)){if(_this.elements[i]!=t&&t.hasContextMenu)return false;_this.target=_this.elements[i];_menu.style.display="block";for(var u=0;u<_this.items.length;u++){if(_ie7)_this.items[u].style.width=_menu.offsetWidth-4+"px";else _this.items[u].style.width="100%";if(_this.items[u].label&&typeof _this.items[u].label=="function")_this.items[u].textCell.innerHTML=_this.items[u].label({menu:_this,target:_this.target}).toString();if(_this.items[u].icon&&typeof _this.items[u].icon=="function")_this.items[u].iconCell.style.backgroundImage=
"url('"+_this.items[u].icon({menu:_this,target:_this.target}).toString()+"')"}var left=(e.clientX?e.clientX:e.pageX)+CM_scrollLeft();var top=(e.clientY?e.clientY:e.pageY)+CM_scrollTop();if(left+_menu.offsetWidth>CM_scrollLeft()+CM_pageWidth()-22)left=Math.max(CM_scrollLeft()+CM_pageWidth()-_menu.offsetWidth-22,0);if(top+_menu.offsetHeight>CM_scrollTop()+CM_pageHeight()-5)top=Math.max(Math.min(top-_menu.offsetHeight+1,CM_scrollTop()+CM_pageHeight()-_menu.offsetHeight-5),0);_menu.style.left=left+"px";
_menu.style.top=top+"px";if(ContextMenu.FADE&&!_ie)CM_fadeIn(_menu);if(_this.onShow)_this.onShow({menu:_this,target:_this.target});CM_preventDefaultAction(evt);return false}if(!CM_isChildOf(_menu,t))_this.hide()}else{CM_preventDefaultAction(evt);return false}};this.hide=function(){if(_menu.style.display!="none"&&_this.target){if(_this.onHide)_this.onHide({menu:_this,target:_this.target});_menu.style.display="none";_this.target=null}};_menu=document.createElement("div");_menu.type="ContextMenu.Menu";
_menu.className="contextMenu";_menu.onmousedown=function(){return false};_shdwBottom=document.createElement("div");_shdwBottom.className="drop-shadow bottom";_menu.appendChild(_shdwBottom);_shdwRight=document.createElement("div");_shdwRight.className="drop-shadow right";_menu.appendChild(_shdwRight);_shdwCorner=document.createElement("div");_shdwCorner.className="drop-shadow corner";_menu.appendChild(_shdwCorner);document.body.appendChild(_menu);CM_addEvent(document,"contextmenu",this.show);CM_addEvent(document,
"mousedown",function(evt){var e=evt?evt:window.event?window.event:null;var t=e.target?e.target:e.srcElement;if(!CM_isChildOf(_menu,t))_this.hide()})}ContextMenu.FADE=true;function CM_addEvent(obj,evt,func){if(obj.addEventListener)obj.addEventListener(evt,func,false);else if(obj.attachEvent)obj.attachEvent("on"+evt,func);else if(typeof obj["on"+evt]=="function"){var old=obj["on"+evt];obj["on"+evt]=function(){old();func()}}else obj["on"+evt]=func}
function CM_removeEvent(obj,evt,func){if(obj.removeEventListener)obj.removeEventListener(evt,func,false);else if(obj.detachEvent)obj.detachEvent("on"+evt,func);else if(old){obj["on"+evt]=old;old=null}else obj["on"+evt]=null}function CM_isChildOf(parent,child){if(child!=parent&&parent!=document){if(child.offsetParent)while(child=child.offsetParent)if(child==parent)return true;return false}return true}
function CM_fadeIn(obj){if(obj.style){var step=0;obj.style.opacity="0";if(obj.fade)clearInterval(obj.fade);obj.fade=setInterval(function(){obj.style.opacity=1/6*step;step++;if(step>6)clearInterval(obj.fade)},20)}}function CM_preventDefaultAction(evt){if(evt&&evt.preventDefault)evt.preventDefault();else if(window.event&&window.event.returnValue)window.event.returnValue=false}
function CM_scrollLeft(){var value=0;if(typeof window.pageXOffset=="number")value=window.pageXOffset;else if(document.body&&document.body.scrollLeft)value=document.body.scrollLeft;else if(document.documentElement&&document.documentElement.scrollLeft)value=document.documentElement.scrollLeft;return value}
function CM_scrollTop(){var value=0;if(typeof window.pageYOffset=="number")value=window.pageYOffset;else if(document.body&&document.body.scrollTop)value=document.body.scrollTop;else if(document.documentElement&&document.documentElement.scrollTop)value=document.documentElement.scrollTop;return value}
function CM_pageWidth(){var value=0;if(typeof window.innerWidth=="number")value=window.innerWidth;else if(document.documentElement&&document.documentElement.clientWidth)value=document.documentElement.clientWidth;else if(document.body&&document.body.clientWidth)value=document.body.clientWidth;return value}
function CM_pageHeight(){var value=0;if(typeof window.innerHeight=="number")value=window.innerHeight;else if(document.documentElement&&document.documentElement.clientHeight)value=document.documentElement.clientHeight;else if(document.body&&document.body.clientHeight)value=document.body.clientHeight;return value}var wMacroPopup=null;function showMacroPopup(){wMacroPopup=new macroPopup(thinZS.terminal.macros);wMacroPopup.show()}
function closeMacroPopup(){if(wMacroPopup){wMacroPopup.hide();wMacroPopup=null;thinZS.getForceFocus()}}function checkCloseMacroPopup(e){e=e||event;if(e!=null)if(e.keyCode==27||e.keyCode==13){e.stopPropagation();e.preventDefault();if(e.keyCode==27)closeMacroPopup();else{var elem=e.source||e.target;if(elem.tagName=="INPUT"&&elem.type=="text")document.getElementById(elem.id.replace("Name","Edit")).click();else closeMacroPopup(e)}}}
function macroPopup(macros){var _popup=document.getElementById("macroPopup");var _macrosTable=document.getElementById("macroPopupList");this.selectedIdx=-1;this.show=function(){$.blockUI({"message":_popup,"css":{"background":"transparent","top":"0px","left":"0px","padding":"0px","margin":"0px","width":"100%","height":"100%","textAlign":"center","border":"none","cursor":"auto"},"centerX":true,"centerY":true,"onBlock":function(){Thinfinity.Popups.disableHooks();_popup.focus()}})};this.fillMacros=function(macrosList){$(_macrosTable).html("");
this.macros=macrosList;if(this.macros&&this.macros.length>0)for(var m=0;m<this.macros.length;m++){if(!this.macros[m].shared)this.addMacro(macros[m].macro,m)}else{$("#nav_macros").hide();$("#btnMacros").hide()}};this.addMacro=function(macro,m){var r=_macrosTable.insertRow(-1);var c=r.insertCell(-1);var i=document.createElement("INPUT");i.type="text";i.id="macroName_"+m;i.value=macro;c.appendChild(i);c=r.insertCell(-1);c.className="macroTableButtonCell";i=document.createElement("INPUT");i.type="button";
i.id="macroEdit_"+m;i.value="RENAME";i.idx=m;i.onclick=function(){wMacroPopup.renameMacro(this.idx)};c.appendChild(i);c=r.insertCell(-1);c.className="macroTableButtonCell";i=document.createElement("INPUT");i.type="button";i.id="macroDelete_"+m;i.value="DELETE";i.idx=m;i.onclick=function(){wMacroPopup.selectedIdx=this.idx;Thinfinity.Popups.choice("#macroPopup","","alertDlg","","",helper.string.sprintf(thinzs_consts.questionRemoveTheMacro,wMacroPopup.macros[wMacroPopup.selectedIdx].macro),[consts.yes,
consts.no],function(){wMacroPopup.removeMacro(this.idx)},"")};c.appendChild(i)};this.hide=function(){this.unbindEvents();$.unblockUI({onUnblock:function(){Thinfinity.Popups.restoreHooks()}});while(_macrosTable.rows.length>0)_macrosTable.deleteRow(0)};this.validMacroName=function(){var value=document.getElementById("macroName_"+this.selectedIdx).value;var valid=value!="";if(!valid){var n=0;for(m=0;m<this.macros.length;m++)if(m!=this.selectedIdx&&this.macros[m].macro!=value)n++;if(n>0){Thinfinity.Popups.alert(helper.string.sprintf(thinzs_consts.macroNameExists,
value),"","alertChildDlg","","#macroPopup");valid=false}}return valid};this.renameMacro=function(idx){this.selectedIdx=idx;if(!this.validMacroName()){Thinfinity.Popups.alert(thinzs_consts.invalidMacroName,"","alertChildDlg","","#macroPopup");document.getElementById("macroName_"+idx).value=this.macros[idx].macro}else THIN.macroRename(this.macros[idx].macro,document.getElementById("macroName_"+idx).value)};this.renameMacroResult=function(obj){if(obj.rc==0){Thinfinity.Popups.alert(thinzs_consts.macroSuccessfullyRenamed,
"","alertChildDlg","","#macroPopup");this.macros[this.selectedIdx].macro=document.getElementById("macroName_"+this.selectedIdx).value}else{Thinfinity.Popups.alert(thinzs_consts.errorRenamingMacro+obj.err,"","alertChildDlg","","#macroPopup");document.getElementById("macroName_"+this.selectedIdx).value=wMacroPopup.macros[this.selectedIdx].macro}};this.removeMacro=function(idx){this.selectedIdx=idx;THIN.macroRemove(this.macros[idx].macro)};this.removeMacroResult=function(obj){if(obj.rc==0)this.macros.splice(this.selectedIdx,
1);else Thinfinity.Popups.alert(thinzs_consts.errorRemovingMacro+obj.err,"","alertChildDlg","","#macroPopup")};this.bindEvents=function(){THIN.zsParams.events.onMacroRemoveResult=function(obj){wMacroPopup.removeMacroResult(obj);wMacroPopup.fillMacros(macros)};THIN.zsParams.events.onMacroRenameResult=function(obj){wMacroPopup.renameMacroResult(obj);wMacroPopup.fillMacros(macros)}};this.unbindEvents=function(){THIN.zsParams.events.onMacroRemoveResult=null;THIN.zsParams.events.onMacroRenameResult=null};
this.fillMacros(macros);this.bindEvents();return this}
function macroPopupSaver(params){var _self=this;var _popup=document.getElementById("createMacroPopup");var _input=document.getElementById("macroName");var _cancelBtn=document.getElementById("createMacroPopupCancel");var _okBtn=document.getElementById("createMacroPopupOK");var _onSaveEvent=null;var _save=function(){if(_onSaveEvent)_onSaveEvent(_input.value);_hide()};var _discard=function(){_input.value="";_save()};var _validate=function(){if(_input.value==""){_okBtn.setAttribute("disabled","disabled");
helper.style.add(_okBtn,"disabled")}else{_okBtn.removeAttribute("disabled");helper.style.remove(_okBtn,"disabled")}};var _hide=function(){_input.onkeyup=null;_popup.onkeydown=null;$.unblockUI({onUnblock:function(){_removeEvents()}})};var _processKeyDown=function(e){e=e||event;if(e!=null)if(e.keyCode==27||e.keyCode==13){e.stopPropagation();e.preventDefault()}};var _processKeyUp=function(e){console.log("_processKeyUp");e=e||event;if(e!=null)if(e.keyCode==27){e.stopPropagation();e.preventDefault();_discard()}else if(e.keyCode==
13&&!helper.style.hasClass(_okBtn,"disabled")){e.stopPropagation();e.preventDefault();_save()}};var _addEvents=function(){helper.dom.addEvent(_input,"onkeydown",_validate);helper.dom.addEvent(_popup,"onkeydown",_processKeyDown);helper.dom.addEvent(_popup,"onkeyup",_processKeyUp);helper.dom.addEvent(_cancelBtn,"onclick",_discard);helper.dom.addEvent(_okBtn,"onclick",_save)};var _removeEvents=function(){helper.dom.removeEvent(_input,"onkeydown",_validate);helper.dom.removeEvent(_popup,"onkeydown",_processKeyDown);
helper.dom.removeEvent(_popup,"onkeyup",_processKeyUp);helper.dom.removeEvent(_cancelBtn,"onclick",_discard);helper.dom.removeEvent(_okBtn,"onclick",_save);Thinfinity.Popups.restoreHooks()};var init=function(){_input.value=params["name"]||"";_onSaveEvent=params["onsave"]||null;_addEvents()};var _show=function(){$.blockUI({message:_popup,css:{"background":"transparent","top":"0px","left":"0px","padding":"0px","margin":"0px","width":"100%","height":"100%","textAlign":"center","border":"none","cursor":"auto"},
centerX:true,centerY:true,onBlock:function(){Thinfinity.Popups.disableHooks();_input.focus()}})};Object.defineProperty(_self,"show",{"writable":false,"value":_show});init();return _self}
function KBHook(){var active=false;var suppressEvent=false;var onKeyDown=null;var onKeyUp=null;var onKeyPress=null;var defaultAction=null;this.ksDown=[];this.ksUp=[];this.ksPress=[];this.activateHook=function(){this.active=true};this.deactivateHook=function(){this.active=false;if(_KEYHOOK.fswitchKbd)_KEYHOOK.fswitchKbd(true)};this.initHook=function(onKDown,onKUp,onKPress){if(this.onKeyDown==null){this.onKeyDown=onKDown||this.eventHandler;this.addListener("keydown",this.onKeyDown,true)}if(this.onKeyUp==
null){this.onKeyUp=onKUp||this.eventHandler;this.addListener("keyup",this.onKeyUp,true)}if(this.onKeyPress==null){this.onKeyPress=onKPress||this.eventHandler;this.addListener("keypress",this.onKeyPress,true)}this.activateHook()};this.addListener=function(name,handler,onCapture){helper.dom.addEvent(document,name,handler,onCapture)};this.removeListener=function(name,handler){helper.dom.removeEvent(document,name,handler,true)};this.clearHook=function(){this.removeListener("keydown",this.onKeyDown);this.removeListener("keyup",
this.onKeyUp);this.removeListener("keypress",this.onKeyPress);this.ksDown=[];this.ksUp=[];this.ksPress=[];if(_KEYHOOK.fswitchKbd)_KEYHOOK.fswitchKbd(true)};this.registerKey=function(eventType,keystroke,eventHandler,suppressEvent){eventType=eventType.toLowerCase();if(typeof suppressEvent=="undefined")suppressEvent=false;if(eventType=="keydown"||eventType=="*")this.ksDown.push({"ks":keystroke,"action":eventHandler,"suppressEvent":suppressEvent});if(eventType=="keyup"||eventType=="*")this.ksUp.push({"ks":keystroke,
"action":eventHandler,"suppressEvent":suppressEvent});if(eventType=="keypress"||eventType=="*")this.ksPress.push({"ks":keystroke,"action":eventHandler,"suppressEvent":suppressEvent})};this.defaultEventHandler=function(e){if(!_KEYHOOK.active){if(_KEYHOOK.fswitchKbd)_KEYHOOK.fswitchKbd(true);return true}var eventType=e.type;var handler;if(eventType=="keydown")handler=_KEYHOOK.getValidKeystroke(e,_KEYHOOK.ksDown);else if(eventType=="keyup")handler=_KEYHOOK.getValidKeystroke(e,_KEYHOOK.ksUp);else if(eventType==
"keypress")handler=_KEYHOOK.getValidKeystroke(e,_KEYHOOK.ksPress);if(handler&&handler.action){if(_KEYHOOK.suppressEvent||handler.suppressEvent){if(_KEYHOOK.fswitchKbd)_KEYHOOK.fswitchKbd(false);e.stopPropagation();e.preventDefault()}handler.action(e)}else if(_KEYHOOK.defaultAction){if(_KEYHOOK.fswitchKbd)_KEYHOOK.fswitchKbd(true);_KEYHOOK.defaultAction(e)}else if(_KEYHOOK.fswitchKbd)_KEYHOOK.fswitchKbd(true)};this.eventHandler=this.defaultEventHandler;this.getValidKeystroke=function(e,strokes){for(var sc=
0;sc<strokes.length;sc++)if(e.ctrlKey==strokes[sc].ks.ctrlKey&&e.altKey==strokes[sc].ks.altKey&&e.shiftKey==strokes[sc].ks.shiftKey&&(e.keyCode==strokes[sc].ks.keyCode||e.keyCode==0&&e.charCode==strokes[sc].ks.keyCode))return strokes[sc];return null};this.fswitchKbd=null;_KEYHOOK=this;return this}KBHook.prototype={"instance":null,"getInstance":function(){if(!(this.instance instanceof KBHook))this.instance=new KBHook;return this.instance}};
function CanvasPrinter(events){var self=this;this.PM_NONE=-1;this.PM_FULLCOLOR=0;this.PM_GRAYSCALED=1;this.PM_INVERTEDGRAYSCALE=2;this.PM_BLACKANDWHITE=3;this.drawBorder=false;this.useIFrame=true;this.printMode=this.PM_BLACKANDWHITE;this.title="";this.footer="";this.window=window;this.events=events;this.prnW=null;this.printFrameRef=null;var PIXEL_WIDTH=144*10;var debugging=helper.url.gup("debug")=="1";var _queuePrinting={"startPrintingTime":null,"printingInterval":null,"printingIntervalTime":500,
"maxDelayPrintingTime":12E4,"isPrinting":false};this.getCanvasPrinterMode=function(mode){mode=helper.object.convertTo(mode,"number");if(!isNaN(mode)&&(mode<this.PM_NONE||mode>this.PM_BLACKANDWHITE))mode=this.PM_NONE;return mode};this.getPrintIFrame=function(){var ifrm=document.createElement("iframe");ifrm.style.position="absolute";if(agentInfo.isMobile==true&&agentInfo.isChrome==true)ifrm.id="iframeToPrint";ifrm.style.left="-20000px";document.body.appendChild(ifrm);return ifrm};this.destroyPrintIFrame=
function(){try{if(self.printFrameRef!=null){helper.dom.removeEvent(window,"onmessage",self.dispatchPrint);document.body.removeChild(self.printFrameRef);delete self.printFrameRef;delete self.prnW}}catch(error){}finally{self.printFrameRef=null;self.prnW=null}};this.cloneCanvas=function(srcCanvas){if(debugging)logDebug("start cloneCanvas");var newCanvas=document.createElement("canvas");newCanvas.width=srcCanvas.width;newCanvas.height=srcCanvas.height;var context=newCanvas.getContext("2d",{willReadFrequently:true});
context.drawImage(srcCanvas,0,0);if(this.drawBorder)context.strokeRect(0,0,srcCanvas.width,srcCanvas.height);if(debugging)logDebug("end cloneCanvas");return newCanvas};this.grayScaledCanvas=function(srcCanvas,inverted){if(debugging){logDebug("start grayScaledCanvas");logDebug("getContext")}var srcContext=srcCanvas.getContext("2d",{willReadFrequently:true});if(debugging)logDebug("getImageData");var imgPixels=srcContext.getImageData(0,0,srcCanvas.width,srcCanvas.height);var data=imgPixels.data;if(debugging)logDebug("proccess");
if(inverted)for(var i=0;i<imgPixels.data.length;i+=4){var avg=(data[i]+data[i+1]+data[i+2])/3;data[i]=data[i+1]=data[i+2]=255^avg}else for(var i=0;i<imgPixels.data.length;i+=4){var avg=(data[i]+data[i+1]+data[i+2])/3;data[i]=data[i+1]=data[i+2]=avg}if(debugging)logDebug("create new canvas");var newCanvas=document.createElement("canvas");if(debugging)logDebug("get ctx");var ctx=newCanvas.getContext("2d",{willReadFrequently:true});newCanvas.width=srcCanvas.width;newCanvas.height=srcCanvas.height;if(debugging)logDebug("putImageData");
ctx.putImageData(imgPixels,0,0,0,0,imgPixels.width,imgPixels.height);if(this.drawBorder)ctx.strokeRect(0,0,imgPixels.width,imgPixels.height);if(debugging)logDebug("end grayScaledCanvas");return newCanvas};this.BWCanvas=function(srcCanvas){if(debugging)logDebug("start BWCanvas");if(debugging)logDebug("getContext");var srcContext=srcCanvas.getContext("2d");if(debugging)logDebug("getImageData");var imgPixels=srcContext.getImageData(0,0,srcCanvas.width,srcCanvas.height);var data=imgPixels.data;var bgColor=
data[0]*255*255*255+data[1]*255*255+data[2]*255;if(debugging)logDebug("proccess");for(var i=0;i<data.length;i+=4){var color=data[i]*255*255*255+data[i+1]*255*255+data[i+2]*255;data[i]=data[i+1]=data[i+2]=color==bgColor?255:0}if(debugging)logDebug("create new canvas");var newCanvas=document.createElement("canvas");if(debugging)logDebug("get ctx");var ctx=newCanvas.getContext("2d",{willReadFrequently:true});newCanvas.width=srcCanvas.width;newCanvas.height=srcCanvas.height;if(debugging)logDebug("putImageData");
ctx.putImageData(imgPixels,0,0,0,0,imgPixels.width,imgPixels.height);if(this.drawBorder)ctx.strokeRect(0,0,imgPixels.width,imgPixels.height);if(debugging)logDebug("end BWCanvas");return newCanvas};this.setTitle=function(value){this.title=value};this.setFooter=function(value){this.footer=value};this.getScreenShot=function(canvas,mode,width,height,success){if(debugging)logDebug("GetScreenShot. Mode="+mode);if(canvas){var wc=width/canvas.width;var hc=height/canvas.height;var co=Math.min(1,wc,hc);var img=
new Image;img.width=canvas.width*co;img.height=canvas.height*co;img.onload=function(e){img.onload=null;if(e.target!=undefined&&typeof e.target.complete=="undefined"||e.target.complete==true){if(debugging)logDebug("GetScreenshot - img.onload - no retries");success(img)}else{var maxTimes=10;var countTimes=0;function retryLoadImage(){setTimeout(function(){if(countTimes>maxTimes){if(debugging)logDebug("GetScreenshot - retryLoadImage - countTimes overflow: "+countTimes);return}else if(e.target!=undefined&&
typeof e.target.complete=="undefined"||e.target.complete==true){if(debugging)logDebug("GetScreenshot - retryLoadImage - countTimes: "+countTimes);success(img)}else retryLoadImage();countTimes++},50)}}};if(debugging)logDebug("GetScreenshot - create new canvas");var newCanvas=this.printableCanvas(canvas,mode);if(debugging)logDebug("GetScreenshot - apply src");img.src=newCanvas.toDataURL("image/jpeg");if(debugging)logDebug("GetScreenshot - done")}else if(debugging)logDebug("GetScreenshot - canvas don't exists!")};
this.printableCanvas=function(canvas,mode){if(typeof mode=="undefined")mode=this.printMode;switch(mode){case this.PM_FULLCOLOR:return this.cloneCanvas(canvas);break;case this.PM_GRAYSCALED:return this.grayScaledCanvas(canvas);break;case this.PM_INVERTEDGRAYSCALE:return this.grayScaledCanvas(canvas,true);break;case this.PM_BLACKANDWHITE:return this.BWCanvas(canvas);break}};this.print=function(canvas){if(canvas)if(agentInfo.isMSIE&&agentInfo.msieVersion<=11){self.canvas=canvas;var prnInstance=window.open("",
"prnW","title='Printing',width=1,height=1,outerWidth=1, outerHeight=1",false);prnInstance.document.title=this.title;$(prnInstance.document.head).append('<style>@media print { @page{ size: 8.5in 11in landscape; } header:after {content: "'+this.title+'";} } img { width: 10.5in !important; max-width: 10.5in !important; } html,body,div {margin:0px;padding:0px;width:100%;display:table-cell;'+"text-align:center;vertical-align:middle;}</style>");var div=prnInstance.document.createElement("div");var cnv=
self.printableCanvas(canvas);var coef=cnv.height/cnv.width;var img=prnInstance.document.createElement("image");img.width=PIXEL_WIDTH;img.height=Math.floor(PIXEL_WIDTH*coef);div.appendChild(img);prnInstance.document.body.appendChild(div);img.onload=function(){function printLoadedImage(){prnInstance.focus();prnInstance.print();prnInstance.close()}if(typeof img.complete=="undefined"||img.complete==true)printLoadedImage();else{var maxTimes=10;var countTimes=0;function retryLoadImage(){setTimeout(function(){if(countTimes>
maxTimes)return;else if(img.complete)printLoadedImage();else retryLoadImage();countTimes++},50)}}};var cnv=self.printableCanvas(self.canvas);img.src=cnv.toDataURL("image/png")}else{self.destroyPrintIFrame();if(typeof keyboardHelper!="undefined"&&keyboardHelper!=null){var cnv=self.printableCanvas(canvas);if(cnv){var src=cnv.toDataURL("image/png");var img=document.createElement("img");var prnBefore=document.getElementById("prnBefore");img.style.display="inline";img.style.zIndex=9999999999999;img.style.position=
"absolute";img.style.top="0px";img.style.left="0px";document.body.insertBefore(img,prnBefore);img.onload=function(e){img.width=e.target.width;img.height=e.target.height;img.style.width=img.width+"px";img.style.height=img.height+"px";setTimeout(function(){prnBefore.style.visibility="hidden";window.focus();window.print();setTimeout(function(){document.body.removeChild(img);prnBefore.style.visibility="visible";window.focus();try{if(typeof thinZS!="undefined")thinZS.zoomDesktop(1)}catch(error){}keyboardHelper.getFocus()},
1E3);return},250)};img.src=src}}else{helper.dom.addEvent(window,"onmessage",self.dispatchPrint);if(self.useIFrame){self.printFrameRef=this.getPrintIFrame();self.prnW=self.printFrameRef.contentWindow||self.printFrameRef.contentDocument;detectingPrintEnd()}else self.prnW=window.open("","prnW","",true);self.canvas=canvas;self.prnW.location.href=`${Thinfinity.global.variables.basePath}print.html`}}else if(typeof this.events!="undefined"&&typeof this.events.onCanvasNotFound!="undefined")this.events.onCanvasNotFound();
else $(window).trigger("CANVASNOTFOUND")};function detectingPrintEnd(){function done(){clearInterval(_queuePrinting["printingInterval"]);_queuePrinting.isPrinting=false;helper.dom.removeEvent(window,"onmessage",self.dispatchPrint);window.focus()}_queuePrinting["startPrintingTime"]=(new Date).getTime();clearInterval(_queuePrinting["printingInterval"]);_queuePrinting["printingInterval"]=setInterval(function(){if(document.activeElement&&!document.hasFocus())_queuePrinting.isPrinting=true;else done();
if((new Date).getTime()-_queuePrinting["startPrintingTime"]>_queuePrinting["maxDelayPrintingTime"]){clearInterval(_queuePrinting["printingInterval"]);_queuePrinting.isPrinting=false}},_queuePrinting["printingIntervalTime"])}this.dispatchPrint=function(e){var obj=null;if(e&&e.data)try{var type=helper.object.getDataTypeOf(e.data);obj=type==="object"?e.data:type==="json"?JSON.parse(e.data):null}catch(error){obj=null}if(obj&&obj.evt&&obj.evt=="PRINT_SCREEN"){var cnv=self.printableCanvas(self.canvas);
obj={"evt":"PRINT","title":self.title,"src":cnv.toDataURL("image/png")};self.prnW.postMessage(JSON.stringify(obj),"*")}};if(window.addEventListener)window.addEventListener("message",self.dispatchPrint,false);else window.attachEvent("onmessage",self.dispatchPrint);return this}
(function(){function PrintScreenPreview(args){var _ref=this;var _args={"parentElement":null,"methods":{"getCanvas":null,"getInfo":null,"getCanvasPrinter":null,"printScreen":null},"elements":{"body":".printBody","btnPrint":".btnPrintScreenPreview","btnClose":".btnCloseScreenPreview","btnBAW":".pspBlackAndWhite","btnInvGray":".pspInvertedGrayScaled","btnGray":".pspGrayScaled","btnColor":".pspFullColor"}};var _wPrintScreenPreview=null;var _canvasPrinter=null;function initialize(args){helper.object.parseAttributes(_args,
args,"MATCH");if(_args.methods.getCanvasPrinter)_canvasPrinter=_args.methods.getCanvasPrinter();if(!_canvasPrinter)_canvasPrinter=getDefaultCanvasPrinter();if(_args.parentElement){helper.style.addClass(_args.parentElement,"printScreenPreviewPopup");helper.style.removeClass(_args.parentElement,"hidden");for(var elem in _args.elements)if(typeof _args.elements[elem]==="string")_args.elements[elem]=_args.parentElement.querySelector(_args.elements[elem])}}function getDefaultCanvasPrinter(){if(typeof CanvasPrinter!==
"undefined")return new CanvasPrinter({onCanvasNotFound:function(){helper.console.warning(helper.string.format("WARNING: Canvas not found",""),arguments)}});else helper.console.warning(helper.string.format("WARNING: CanvasPrinter not found",""),arguments);return null}function attachEvents(){helper.dom.addEvent(_args.elements.btnPrint,["touchend","click"],e=>{suppressMouseTouchEvent(e);_wPrintScreenPreview.print(function(){_wPrintScreenPreview.hide()},true)});helper.dom.addEvent(_args.elements.btnClose,
["touchend","click"],e=>{suppressMouseTouchEvent(e);closePrintScreenPreview()});helper.dom.addEvent(_args.elements.btnBAW,["touchend","click"],e=>{suppressMouseTouchEvent(e);_wPrintScreenPreview.setPrnScrMode(_args.elements.btnBAW,_canvasPrinter.PM_BLACKANDWHITE)});helper.dom.addEvent(_args.elements.btnGray,["touchend","click"],e=>{suppressMouseTouchEvent(e);_wPrintScreenPreview.setPrnScrMode(_args.elements.btnGray,_canvasPrinter.PM_GRAYSCALED)});helper.dom.addEvent(_args.elements.btnInvGray,["touchend",
"click"],e=>{suppressMouseTouchEvent(e);_wPrintScreenPreview.setPrnScrMode(_args.elements.btnInvGray,_canvasPrinter.PM_INVERTEDGRAYSCALE)});helper.dom.addEvent(_args.elements.btnColor,["touchend","click"],e=>{suppressMouseTouchEvent(e);_wPrintScreenPreview.setPrnScrMode(_args.elements.btnColor,_canvasPrinter.PM_FULLCOLOR)})}function initializePrintScreenPreview(){var self=this;var _printScreenMode=-1;var _srcElem=_args.methods.getCanvas();var _tempCanvas=null;this.show=function(){var self=this;helper.style.addClass(_args.elements.btnPrint,
"disabled");_args.parentElement.querySelectorAll(".pspscreenshot").forEach(function(elem){elem.innerHTML='<img src="'+Thinfinity.global.variables.basePath+'"/common/images/core/loadajax.gif"/>';helper.style.removeClass(elem,"selected")});$.blockUI({message:_args.parentElement,css:{"background":"transparent","top":"0px","left":"0px","padding":"0px","margin":"0px","width":"100%","height":"100%","textAlign":"center","border":"none","cursor":"auto"},centerX:true,centerY:true,onBlock:function(){_args.parentElement.style.visibility=
"visible";Thinfinity.Popups.disableHooks();self.bindKeyboard();_args.parentElement.focus();_canvasPrinter.drawBorder=true;var s=helper.size.get(_args.elements.btnBAW);var w=Math.floor(s.width*.9);var h=Math.floor(s.height*.9);_tempCanvas=self.getSrcCanvas();_canvasPrinter.getScreenShot(_tempCanvas,_canvasPrinter.PM_BLACKANDWHITE,w,h,function(img){setPrintPreviewImage(_args.elements.btnBAW,img)});_canvasPrinter.getScreenShot(_tempCanvas,_canvasPrinter.PM_GRAYSCALED,w,h,function(img){setPrintPreviewImage(_args.elements.btnGray,
img)});_canvasPrinter.getScreenShot(_tempCanvas,_canvasPrinter.PM_INVERTEDGRAYSCALE,w,h,function(img){setPrintPreviewImage(_args.elements.btnInvGray,img)});_canvasPrinter.getScreenShot(_tempCanvas,_canvasPrinter.PM_FULLCOLOR,w,h,function(img){setPrintPreviewImage(_args.elements.btnColor,img)})}})};this.hide=function(){this.unbindEvents();$.unblockUI({onUnblock:function(){Thinfinity.Popups.restoreHooks()}})};this.unbindEvents=function(){this.unbindKeyboard()};this.bindKeyboard=function(){helper.dom.addEvent(_args.parentElement,
"keydown",parentElement_keydown)};this.unbindKeyboard=function(){helper.dom.removeEvent(_args.parentElement,"keydown",parentElement_keydown)};function parentElement_keydown(e){if(e.keyCode=="27"){e.stopPropagation();_args.elements.btnClose.click()}}this.getSrcCanvas=function(){var srcCanvas=document.createElement("canvas");srcCanvas.width=_srcElem instanceof HTMLVideoElement?_srcElem.videoWidth:_srcElem.width;srcCanvas.height=_srcElem instanceof HTMLVideoElement?_srcElem.videoHeight:_srcElem.height;
var srcContext=srcCanvas.getContext("2d",{willReadFrequently:true});srcContext.drawImage(_srcElem,0,0);return srcCanvas};this.setPrnScrMode=function(elem,mode){_args.parentElement.querySelectorAll(".pspscreenshot").forEach(function(elem){helper.style.removeClass(elem,"selected")});helper.style.addClass(elem,"selected");_printScreenMode=mode;helper.style.removeClass(_args.parentElement,"disabled")};this.print=function(callback,useTempCanvas){if(_printScreenMode!=-1){var info=_args.methods.getInfo();
var _printCanvas=null;if(useTempCanvas===true)_printCanvas=_tempCanvas;else _printCanvas=this.getSrcCanvas();args.methods.printScreen(_printCanvas,info.title,info.detail,_printScreenMode,callback)}};this.setPrintScreenMode=function(mode){_printScreenMode=helper.object.getTypeOf(mode)=="string"&&"PM_FULLCOLOR;PM_INVERTEDGRAYSCALE;PM_GRAYSCALED;PM_BLACKANDWHITE".indexOf(mode.toUpperCase())!=-1?_canvasPrinter[mode.toUpperCase()]:_canvasPrinter.getCanvasPrinterMode(mode)};return this}function showPrintScreenPreview(){if(!_wPrintScreenPreview){_wPrintScreenPreview=
new initializePrintScreenPreview;attachEvents()}if(helper.object.existsPath(window,"customSettings.printScreen.defaultPrintMode")){_wPrintScreenPreview.setPrintScreenMode(window.customSettings.printScreen.defaultPrintMode);_wPrintScreenPreview.print(null)}else _wPrintScreenPreview.show()}function closePrintScreenPreview(){_wPrintScreenPreview.hide()}function setPrintPreviewImage(elem,img){var oldImg=elem.getElementsByTagName("img")[0];if(oldImg)elem.removeChild(oldImg);elem.appendChild(img)}function getCanvasPrinter(){return _canvasPrinter}
function suppressMouseTouchEvent(e){try{if(window["TouchEvent"]&&e&&e instanceof TouchEvent){if(e.preventDefault)e.preventDefault();if(e.stopPropagation)e.stopPropagation()}}catch(err){helper.console.warning("[suppressMouseTouchEvent] Failed while trying to handle touch and mouse events. ",arguments)}}initialize(args);Object.defineProperty(_ref,"show",{"enumerable":true,"configurable":false,"writable":false,"value":showPrintScreenPreview});Object.defineProperty(_ref,"hide",{"enumerable":true,"configurable":false,
"writable":false,"value":closePrintScreenPreview});Object.defineProperty(_ref,"set",{"enumerable":true,"configurable":false,"writable":false,"value":setPrintPreviewImage});Object.defineProperty(_ref,"getCanvasPrinter",{"enumerable":true,"configurable":false,"writable":false,"value":getCanvasPrinter});return this}try{Thinfinity!=undefined}catch(e){Thinfinity={}}Thinfinity.PrintScreenPreview=PrintScreenPreview})();var ssh=null;function startSSH(owner){if(!ssh)ssh=new SSH(owner);return ssh}
function closeSSHPopup(){ssh.deletePopup()}function loginAuthLogin(){ssh.authenticatedLogin(closeSSHPopup)}
function SSH(owner){var _owner=owner;var _ref=this;var _sshpopup=null;var _parentElement="emulcont";var _showAuthenticationDialog=function(username,promptPassword){_showDialog(true,promptPassword,username)};var _showAuthenticationKeyboard=function(){_showDialog(false,true)};var _promptUserName=null;var _promptPassword=null;var _showDialog=function(promptUserName,promptPassword,defaultUsername){if(_owner.terminal.status<ThinZS.status.DISCONNECTED){_promptUserName=promptUserName;_promptPassword=promptPassword;
if(typeof _parentElement==="string")_parentElement=document.getElementById(_parentElement);_sshpopup=Thinfinity.Popups.choice({"parentElement":_parentElement,"id":"sshAuthDlg","iconType":" ","title":"User Authentication","message":document.querySelector("#sshAuthLoginDlg"),"events":{"block":function(){if(promptUserName)document.querySelector("#authLoginUsr").value=defaultUsername||"";document.querySelector("#authLoginUserRow").style.display=promptUserName?"block":"none";document.querySelector("#authLoginPwdRow").style.display=
promptPassword?"block":"none";document.querySelector("#sshAuthLoginDlg").style.display="block";setTimeout(function(){var usrElem=document.querySelector("#authLoginUsr");var pwdElem=document.querySelector("#authLoginPwd");if(promptUserName&&usrElem&&usrElem.value=="")usrElem.focus();else if(pwdElem)pwdElem.focus()},50)}},"buttons":[{"value":"Login","action":function(){loginAuthLogin()},"defaultKey":13,"id":"authLoginLogin"},{"value":"Cancel","action":function(){closeSSHPopup()},"defaultKey":27,"id":"authLoginClose"}],
"noPropagateEvents":false})}};var _deletePopup=function(){_sshpopup.unblock();_sshpopup.currentParent=null;_sshpopup=null};var _events={"onSshBannerText":function(cmd){if(!!cmd){function bannerHide(){helper.style.addClass(sshBanner,"hidden")}var sshBanner=document.querySelector("#sshBanner");if(sshBanner){var sshMsgContainer=sshBanner.querySelector("pre");sshMsgContainer.innerHTML=cmd.banner;var btn=sshBanner.querySelector(".btn");if(btn){helper.dom.removeEvent(btn,["click","touchend"],bannerHide,
false);helper.dom.addEvent(btn,["click","touchend"],bannerHide,false)}helper.style.removeClass(sshBanner,"hidden")}}},"onSshAuthKeyboard":function(cmd){if(!!cmd)_ref.showAuthenticationKeyboard()},"onSshAuthLogin":function(cmd){if(!!cmd)_ref.showAuthenticationDialog(cmd.username,!cmd.useronly)}};var _loginAuthLogin=function(callback){var command="cmd="+(!_promptUserName?"sshAuthKbrd":"sshAuthLogin&username="+encodeURIComponent(_getUsername()))+(!_promptPassword?"":"&password="+encodeURIComponent(_getPassword()));
_owner.sendServerCmd("cmd",command);if(typeof callback!="undefined")callback()};var _getPassword=function(){if(_sshpopup&&_parentElement){var elem=_parentElement.querySelector("#authLoginPwd");return elem?elem.value:""}else return""};var _getUsername=function(){if(_sshpopup&&_parentElement){var elem=_parentElement.querySelector("#authLoginUsr");return elem?elem.value:""}else return""};var _getEvents=function(){return _events};Object.defineProperty(_ref,"events",{"enumerable":true,"configurable":false,
"get":_getEvents});Object.defineProperty(_ref,"username",{"enumerable":true,"configurable":false,"get":_getUsername});Object.defineProperty(_ref,"password",{"enumerable":true,"configurable":false,"get":_getPassword});Object.defineProperty(_ref,"authenticatedLogin",{"enumerable":true,"configurable":false,"writable":false,"value":_loginAuthLogin});Object.defineProperty(_ref,"deletePopup",{"enumerable":true,"configurable":false,"writable":false,"value":_deletePopup});Object.defineProperty(_ref,"showAuthenticationDialog",
{"enumerable":true,"configurable":false,"writable":false,"value":_showAuthenticationDialog});Object.defineProperty(_ref,"showAuthenticationKeyboard",{"enumerable":true,"configurable":false,"writable":false,"value":_showAuthenticationKeyboard});return _ref}
(function(){function MobileKeyboardDriver(args){var _ref=this;var _args={"owner":null,"ownerContainer":null,"container":null,"shiftWithCaret":false};var _events={"SHOW":null,"HIDE":null,"SENDKEY":null,"SENDFUNCTIONKEY":null,"BEFORESENDKEY":null};var _isVisible=false;var virtualKeyboard=undefined;function initialize(args){for(var attrib in _args)if(typeof args[attrib]!="undefined")_args[attrib]=args[attrib];if(_args.container!=null)if(typeof _args.container=="string")_args.container=document.getElementById(_args.container)}
function _show(){if(!virtualKeyboard){var info=_args.owner.terminal;virtualKeyboard=new VirtualKeyboard(_args.container.id,info.virtualKeyboard,_args.owner.terminal.protocol=="VRT"?"3270":_args.owner.terminal.protocol,function(key,evt){if(_events.BEFORESENDKEY)try{var response=_events.BEFORESENDKEY(key,evt);if(response===false)return}catch(error){}if(agentInfo.isMobile&&evt=="touchstart"||!agentInfo.isMobile&&evt=="down")if(_events.SENDFUNCTIONKEY)_events.SENDFUNCTIONKEY(key);else helper.console.log(helper.string.sprintf("Cannot send function key for '%s'. Event listener is undefined.",
key))},function(offsetHeight){_args.container.style.height=offsetHeight+"px";var delta=agentInfo.isIphone&&!window.navigator.standalone?60:0;if(_args.container.style.marginTop!="0px"){_args.container.style.marginTop=-offsetHeight+delta+"px";if(_args.shiftWithCaret){if(_events.SHOW){_isVisible=true;_events.SHOW()}}else{_args.owner.rcParams.borderBottom=$(_args.container).height();_args.owner.zoomDesktop()}}},function(){$(_args.container).css("margin-top","0px");setTimeout(function(){$(_args.container).hide()},
500);if(_events.HIDE){_isVisible=false;_events.HIDE()}});setTimeout(function(){$(_args.container).addClass("slide");$(_args.container).css("margin-top","-"+$(_args.container).height()+"px");if(_args.shiftWithCaret){$(_args.ownerContainer).addClass("slide");if(_events.SHOW){_isVisible=true;_events.SHOW()}}else{_args.owner.rcParams.borderBottom=$(_args.container).height();_args.owner.zoomDesktop()}},10)}else{virtualKeyboard.adjustSize();$(_args.container).css("margin-top","-"+$(_args.container).height()+
"px");if(_args.shiftWithCaret){if(_events.SHOW){_isVisible=true;_events.SHOW()}}else{_args.owner.rcParams.borderBottom=$(_args.container).height();_args.owner.zoomDesktop()}}}function _hide(){if(virtualKeyboard)virtualKeyboard.hide()}function _on(event,handler){if(typeof _events[event.toUpperCase()]=="undefined")helper.console.log("Unexpected event in drive.keyborad.mobile ("+event+")");else _events[event.toUpperCase()]=handler;return _events[event.toUpperCase()]}function _off(event){if(typeof _events[event.toUpperCase()]==
"undefined")helper.console.log("Unexpected event in drive.keyborad.mobile ("+event+")");else _events[event.toUpperCase()]=null}initialize(args);Object.defineProperty(this,"show",{"enumerable":true,"configurable":false,"value":_show});Object.defineProperty(this,"hide",{"enumerable":true,"configurable":false,"value":_hide});Object.defineProperty(this,"isVisible",{"enumerable":true,"configurable":false,"get":function(){return _isVisible}});Object.defineProperty(this,"on",{"enumerable":true,"configurable":false,
"value":function(event,handler){return _on(event,handler)}});Object.defineProperty(this,"off",{"enumerable":true,"configurable":false,"value":_off});return this}try{Thinfinity!=undefined}catch(e){Thinfinity={}}Thinfinity.MobileKeyboardDriver=MobileKeyboardDriver})();function MobileKeyboardDriver(params){var parameters;var self=this;var virtualKeyboard=null;var owner=null;function _init(params){owner=params.owner}_init(params);return self}window.BTKeyboardAvailable=false;var _zsInstance=null;
var _focusBT=null;var _btCbks=[];var _initialized=false;window.createBTKeyboardListener=function(){window.BTKeyboardAvailable=true;Object.defineProperty(window,"currentThinZS",{"enumerable":false,"configurable":false,"set":function(zsinstance){if(zsinstance){_focusBT=_zsInstance!=zsinstance;_zsInstance=zsinstance}}});helper.dom.complete(function(){initializeBluetoothKeyboard();for(var i=0;i<_btCbks.length;i++)try{_btCbks[i]()}catch(error){}_initialized=true})};
window.onCreateBTKeyboardCallback=function(handler){if(!_initialized)_btCbks.push(handler);else try{handler()}catch(error){}};
function initializeBluetoothKeyboard(){var KeyboardHelper=function(){var _self=this;var _events={"CREATE":null,"KEYBOARDVISIBLE":null,"KEYPRESSED":null,"SENDEVENT":null,"VIRTUALKEYBOARDDETECTED":null,"BLUETOOTHKEYBOARDDETECTED":null,"FOCUS":null,"BLUR":null,"KEYBOARDCHANGED":null,"LOG":null};var __wl=null;var _virtualKeyboardAllowed=false;var _bluetoothKeyboardFocused=false;var _currenKeyboardLang="";var _showedKeyboard=function(data){if(_events["KEYBOARDVISIBLE"])_events.KEYBOARDVISIBLE(data)};var _keyPressed=
function(data){if(_events["KEYPRESSED"])_events.KEYPRESSED(data)};var _sendEvent=function(eventName){if(_events["SENDEVENT"])_events.SENDEVENT(eventName);window.location.href=window.location.origin+window.location.pathname+"#"+eventName+(new Date).getMilliseconds()};var _keyboardChanged=function(lang){_currenKeyboardLang=lang;if(_events["KEYBOARDCHANGED"])_events.KEYBOARDCHANGED(lang)};var _getFocus=function(){_sendEvent("getFocus")};var _gotFocus=function(){_bluetoothKeyboardFocused=true;_showlog();
if(_events["FOCUS"])_events.FOCUS()};var _looseFocus=function(){_sendEvent("looseFocus")};var _lostFocus=function(){_bluetoothKeyboardFocused=false;_hidelog();if(_events["BLUR"])_events.BLUR()};var _reconfigure=function(){_sendEvent("reconfigure")};var _allowVirtualKeyboard=function(){_virtualKeyboardAllowed=true;_sendEvent("allowVirtualKeyboard")};var _denyVirtualKeyboard=function(){_virtualKeyboardAllowed=false;_sendEvent("denyVirtualKeyboard")};function _on(event,handler){if(typeof _events[event.toUpperCase()]==
"undefined")_log("Unespected event in drive.keyboard.bluetooth ("+event+")");else _events[event.toUpperCase()]=handler;return _events[event.toUpperCase()]}function _off(event){if(typeof _events[event.toUpperCase()]=="undefined")_log("Unespected event in drive.keyboard.bluetooth ("+event+")");else _events[event.toUpperCase()]=null}var _log=function(msg){return;if(_events["LOG"])_events.LOG(msg);else{__wl=document.getElementById("__wl");if(!__wl){__wl=document.createElement("DIV");__wl.id="__wl";__wl.style.cssText=
"zindex:99999999;width:40%;height:5%;position:absolute;right:20px;top:20px;border:solid 1px #FFFF00;color:#CCCCAA;background-color:rgba(30,30,30,.75);overflow:scroll;";document.body.appendChild(__wl);__wl.addEventListener("click",function(){__wl.style.height=__wl.style.height=="50%"?"5%":"50%"})}else _showlog();__wl.innerHTML+=msg+"<br/>";__wl.scrollTop=__wl.scrollHeight}};var _hidelog=function(){if(__wl)__wl.style.display="none"};var _showlog=function(){if(__wl)__wl.style.display="block"};Object.defineProperty(this,
"showedKeyboard",{"enumerable":true,"configurable":false,"value":_showedKeyboard});Object.defineProperty(this,"keyPressed",{"enumerable":true,"configurable":false,"value":_keyPressed});Object.defineProperty(this,"sendEvent",{"enumerable":true,"configurable":false,"value":_sendEvent});Object.defineProperty(this,"keyboardChanged",{"enumerable":true,"configurable":false,"value":_keyboardChanged});Object.defineProperty(this,"getFocus",{"enumerable":true,"configurable":false,"value":_getFocus});Object.defineProperty(this,
"looseFocus",{"enumerable":true,"configurable":false,"value":_looseFocus});Object.defineProperty(this,"focus",{"enumerable":true,"configurable":false,"value":_getFocus});Object.defineProperty(this,"blur",{"enumerable":true,"configurable":false,"value":_looseFocus});Object.defineProperty(this,"reconfigure",{"enumerable":true,"configurable":false,"value":_reconfigure});Object.defineProperty(this,"allowVirtualKeyboard",{"enumerable":true,"configurable":false,"value":_allowVirtualKeyboard});Object.defineProperty(this,
"denyVirtualKeyboard",{"enumerable":true,"configurable":false,"value":_denyVirtualKeyboard});Object.defineProperty(this,"on",{"enumerable":true,"configurable":false,"value":function(event,handler){return _on(event,handler)}});Object.defineProperty(this,"off",{"enumerable":true,"configurable":false,"value":_off});Object.defineProperty(this,"log",{"enumerable":true,"configurable":false,"value":_log});Object.defineProperty(this,"hasFocus",{"enumerable":true,"configurable":false,"get":function(){return _bluetoothKeyboardFocused}});
Object.defineProperty(this,"keyboardLanguage",{"enumerable":true,"configurable":false,"get":function(){return _currenKeyboardLang}})};window.keyboardHelper=null;if(!keyboardHelper){var funcKey=false;window.initialScreenSize={"height":window.environment.detectedHeight,"width":window.environment.detectedWidth};keyboardHelper=new KeyboardHelper;keyboardHelper.on("keypressed",function(data){funcKey=false;if(!_zsInstance)return;if(_focusBT){_zsInstance.sendCmd("cmd=setFocus");_focusBT=false}if(window.isBTKeyboard==
false)if(typeof hideVKeyboard!="undefined")hideVKeyboard();window.isBTKeyboard=true;if(data.shift==true)_zsInstance.sendKey(16,0,"down");if(data.control==true)_zsInstance.sendKey(17,0,"down");if(data.alt==true)_zsInstance.sendKey(18,0,"down");if(data.command==true)_zsInstance.sendKey(17,0,"down");if(data.input=="tab"){data.input=data.shift?"PriorField":"NextField";funcKey=true}else if(data.input=="upArrow"){data.input="UP";funcKey=true}else if(data.input=="downArrow"){data.input="DOWN";funcKey=true}else if(data.input==
"leftArrow"){data.input="LEFT";funcKey=true}else if(data.input=="rightArrow"){data.input="RIGHT";funcKey=true}else if(data.input=="space"){data.input=" ";funcKey=true}else if(data.input=="enter")funcKey=true;else if(data.input=="backspace")funcKey=true;else if(data.input=="delete")funcKey=true;else if(data.input=="space")funcKey=true;else if(data.input=="tab")funcKey=true;if(funcKey==true)_zsInstance.sendFunctionKey(data.input);else{var ch=data.input.charCodeAt(0);_zsInstance.sendKey(0,ch,"down");
_zsInstance.sendKey(0,ch,"up")}if(data.shift==true)_zsInstance.sendKey(16,0,"up");if(data.control==true)_zsInstance.sendKey(17,0,"up");if(data.alt==true)_zsInstance.sendKey(18,0,"up");if(data.command==true)_zsInstance.sendKey(17,0,"up")});keyboardHelper.on("keyboardVisible",function(data){keyboardHelper.log("keyboardVisible "+data)});keyboardHelper.on("keyboardChanged",function(data){keyboardHelper.log("keyboardChanged "+data)});keyboardHelper.on("sendEvent",function(data){keyboardHelper.log(data)});
keyboardHelper.on("virtualKeyboardDetected",function(isAllowed){keyboardHelper.log("virtualKeyboardDetected - isallowed: "+isAllowed)});keyboardHelper.on("bluetoothKeyboardDetected",function(focused){keyboardHelper.log("bluetoothKeyboardDetected -  bluetoothKeyboardFocused: "+focused)});keyboardHelper.on("focus",function(){keyboardHelper.log("focus")});keyboardHelper.on("blur",function(){keyboardHelper.log("blur")});keyboardHelper.on("log",function(){})}}
(function(){function Broker(args){var _ref=this;var _status={"created":1,"unassigned":2,"inuse":3};var _args={"id":null,"data":null,"mode":"interaction","recovery":null,"events":{"created":null,"destroyed":null,"select":null,"focus":null,"clientListChange":null,"executeCommand":null,"error":null,"ready":null},"registerCmd":{"disconnect":null}};var _id="__Thinfinity.Broker__"+(new Date).getTime().toString();var _staticId=_id;var _storage={"dataKey":"__#thinfinity.broker.data__","data":null,"statusKey":"__#thinfinity.broker.status__",
"status":null,"staticKey":"__#thinfinity.broker.static__"};var _localStorage={"data":null,"cmds":null};var _hasFocus=true;var _polling={"active":400,"inactive":800,"id":null,"isAttached":false,"lastState":null,"accessId":null,"accessTime":20};var _registerCmds=[];var _hasChanges=false;var _lock={"max":50,"id":null,"lastBy":null,"count":0};var _unlock={"max":50,"id":null,"lastBy":null,"count":0};var _clientStaticPolling={"id":null,"time":500,"currentData":null,"maxTimeBeforeForceUpdate":-1,"currentTime":null};
var _lockedForMe=false;var _disposed=false;var _abandonedTime=2500;var _checkBrokerTimeBeforeDelete=5E3;var _compareAttrib=["wndName","status","virtualPath","sessionId"];var _isDisconnected=false;var _canWrite=false;var _visibilityChange=null;function initialize(args){if(typeof window.localStorage=="undefined")throw new Error("Your browser doesn't support localStorage, please contact with your web admin");window.addEventListener("storage",storageEventHandler);checkBrokerStatus();_storage.status=localStorage.getItem(_storage.statusKey);
if(_storage.status==null){_storage.status={"locked":false,"id":null};localStorage.setItem(_storage.statusKey,JSON.stringify(_storage.status))}else _storage.status={"locked":false};helper.object.parseAttributes(_args,args,"MATCH");if(_args.mode=="static"){if(window.name.indexOf("__Thinfinity.Broker__")==-1)window.name=_staticId;_id="main-broker";isUniqueMainInstance(function(response){_canWrite=response;if(!response){window.removeEventListener("storage",storageEventHandler);unregisterCommand("executeCommand",
executeCommand);unregisterCommand("dispose",disposeBroker);unregisterCommand("created",createdBroker);unregisterCommand("select",selectBroker);unregisterCommand("focus",focusBroker);if(helper.object.existsPath(_args,"events.error"))try{var err={"type":"duplicated"};_args.events.error(err)}catch(error){}}else if(helper.object.existsPath(_args,"events.ready"))try{_args.events.ready()}catch(error){}});registerCommand("executeCommand",executeCommand);registerCommand("dispose",disposeBroker);registerCommand("created",
createdBroker);registerCommand("select",selectBroker);registerCommand("focus",focusBroker);checkAbandonedSessions(function(){setInterval(function(){checkAbandonedCommands()},1E4)});if(helper.object.existsPath(_args,"events.clientListChange"))checkClientListChanges();return}else{registerCommand("focus",setFocusBroker);if(_args.recovery==undefined||_args.recovery==""||_args.recovery==null)_args.recovery=getVirtualPath();if(_args.id!=undefined&&_args.id!=""&&_args.id!=null)_id=_args.id;else if(_args.recovery!=
undefined&&_args.recovery!=""&&_args.recovery!=null)_args.id=_id;if(window.name.indexOf("__Thinfinity.Broker__")==-1)window.name=_id;else _id=window.name;_args.data={"wndName":_args.id};registerCommand("disconnect",disconnectBroker);registerCommand("destroy",destroyBroker);checkAbandonedSessions(function(){recoverSession(function(){observeDocumentVisibility(observeStorageChanges)})});helper.dom.addEvent(window,"unload",onUnload)}}function storageEventHandler(evt){if(_storage&&evt.key==_storage.statusKey&&
evt.newValue){var data=JSON.parse(evt.newValue);_lockedForMe=data&&data.locked==true&&data.id!=_id}}function isUniqueMainInstance(callback){var tempData=null;var initialTime=(new Date).getTime();var intervalId=null;clearInterval(intervalId);intervalId=setInterval(function(){tempData=localStorage.getItem(_storage.staticKey);try{tempData=tempData!=null?JSON.parse(tempData):null}catch(error){}if(tempData==null||!tempData.date){clearInterval(intervalId);callback(true)}else{var newTime=(new Date).getTime();
if(newTime-tempData.date>2E3){clearInterval(intervalId);callback(true)}else if(newTime-initialTime>2500){clearInterval(intervalId);callback(tempData.date>newTime)}}},_clientStaticPolling.time)}function getLocalDataValues(){readStorage(false);var idx=getClientIndex();return{"id":_id,"recovery":idx>-1?_storage.data.client[idx].recovery:_args.recovery||_id,"status":_status.inuse,"lastContact":(new Date).getTime(),"data":idx>-1?_storage.data.client[idx].data:_args.data,"wndName":_id,"sessionId":idx>-1?
_storage.data.client[idx].sessionId:"","mode":getMode()}}function readStorage(processCmd){var tempData=localStorage.getItem(_storage.dataKey);if(tempData==null)_storage.data={"client":[],"active":null};else{_storage.data=JSON.parse(tempData);if(processCmd&&_storage.data.cmd)processRegisteredCmds()}tempData=null}function update(){if(_id=="main-broker"||_disposed){clearInterval(_polling.id);return}readStorage(true);var idx=getClientIndex();_localStorage.data={"id":_id,"recovery":idx>-1?_storage.data.client[idx].recovery:
_args.recovery||_id,"status":_status.inuse,"lastContact":(new Date).getTime(),"data":idx>-1?_storage.data.client[idx].data:_args.data,"wndName":_id,"sessionId":idx>-1?_storage.data.client[idx].sessionId!=undefined&&_storage.data.client[idx].sessionId!=""?_storage.data.client[idx].sessionId:idx>-1&&helper.object.existsPath(_storage.data.client[idx],"data.sessionId")?_storage.data.client[idx].data.sessionId:"":"","mode":getMode()};window.name=_id;_hasChanges=true;idx=null;writeStorage()}function lockStorage(callback){_lock.count=
0;_lock.id=null;_lock.lastBy=null;var lock=function(){if(!_lockedForMe){_storage.status={"locked":true,"id":_id};localStorage.setItem(_storage.statusKey,JSON.stringify(_storage.status));if(callback)callback(true)}else{_lock.count++;_lock.id=_storage.status.id;if(_lock.lastBy!=_lock.id){_lock.lastBy=_lock.id;_lock.count=0}if(_lock.count>_lock.max){_storage.status={"locked":true,"id":_id};localStorage.setItem(_storage.statusKey,JSON.stringify(_storage.status));if(callback)callback(true);return}setTimeout(function(){lock()},
_polling.accessTime)}};lock()}function unlockStorage(callback){_lock.count=0;_lock.id=null;_lock.lastBy=null;var unlock=function(){if(!_lockedForMe){_storage.status={"locked":false,"id":null};localStorage.setItem(_storage.statusKey,JSON.stringify(_storage.status));if(callback)callback(true)}else if(_storage.status.locked==true){_lock.count++;_lock.id=_storage.status.id;if(_lock.lastBy!=_lock.id){_lock.lastBy=_lock.id;_lock.count=0}if(_lock.count>_lock.max){_storage.status={"locked":false,"id":null};
localStorage.setItem(_storage.statusKey,JSON.stringify(_storage.status));if(callback)callback(true);return}setTimeout(function(){unlock()},_polling.accessTime)}};unlock()}function writeStorage(callback){if(_hasChanges)lockStorage(function(){clearInterval(_polling.id);readStorage(false);if(_localStorage.data!=null){var idx=getClientIndex();if(idx>=0)_storage.data.client[idx]=_localStorage.data;else _storage.data.client.push(_localStorage.data);_localStorage.data=null;idx=null}if(_localStorage.cmds){if(!_storage.data.cmd)_storage.data.cmd=
{};for(var node in _localStorage.cmds){if(!_storage.data.cmd[node])_storage.data.cmd[node]=[];for(var j=0;j<_localStorage.cmds[node].length;j++)_storage.data.cmd[node].push(_localStorage.cmds[node][j])}_localStorage.cmds=null}localStorage.setItem(_storage.dataKey,JSON.stringify(_storage.data));if(!_isDisconnected&&_args.mode!="static")observeStorageChanges();_hasChanges=false;unlockStorage(callback)});else if(callback)callback()}function updateClientStatus(value,force){if(getMode()=="tab"||force==
true)lockStorage(function(){readStorage(false);_storage.data.active=value;localStorage.setItem(_storage.dataKey,JSON.stringify(_storage.data));unlockStorage()})}function getMode(){if(window.parent==window)return"tab";else return"iframe"}function checkAbandonedSessions(callback){readStorage(false);var hasAbandoned=false;var datetime=(new Date).getTime();for(var i=0;i<_storage.data.client.length;i++)if(datetime-_storage.data.client[i].lastContact>_abandonedTime&&_storage.data.client[i].status!=_status.unassigned){hasAbandoned=
true;break}if(hasAbandoned)lockStorage(function(){readStorage(false);for(var i=0;i<_storage.data.client.length;i++)if(datetime-_storage.data.client[i].lastContact>_abandonedTime&&_storage.data.client[i].status!=_status.unassigned){_storage.data.client[i].lastContact=datetime;_storage.data.client[i].status=_status.unassigned}localStorage.setItem(_storage.dataKey,JSON.stringify(_storage.data));unlockStorage(callback);datetime=hasAbandoned=null});else{datetime=hasAbandoned=null;if(callback)callback()}}
function checkAbandonedCommands(callback){readStorage(false);var hasAbandoned=false;var datetime=(new Date).getTime();if(helper.object.existsPath(_storage,"data.cmd"))for(var name in _storage.data.cmd)if(_storage.data.cmd[name].length==0){hasAbandoned=true;break}else for(var i=0;i<_storage.data.cmd[name].length;i++)if(datetime-_storage.data.cmd[name][i].date>_abandonedTime){hasAbandoned=true;break}if(hasAbandoned)lockStorage(function(){readStorage(false);for(var name in _storage.data.cmd)if(_storage.data.cmd[name].length==
0)delete _storage.data.cmd[name];else for(var i=_storage.data.cmd[name].length-1;i>=0;i--)if(datetime-_storage.data.cmd[name][i].date>_abandonedTime){_storage.data.cmd[name].splice(i,1);break}localStorage.setItem(_storage.dataKey,JSON.stringify(_storage.data));unlockStorage(callback);datetime=hasAbandoned=null});else{datetime=hasAbandoned=null;if(callback)callback()}}function checkBrokerStatus(){var hMain=hasMain();var datetime=(new Date).getTime();var clearAllData=false;var tempData;if(!hMain){clearAllData=
true;tempData=localStorage.getItem(_storage.dataKey);if(tempData==null)return;else tempData=JSON.parse(tempData);for(var i=0;i<tempData.client.length;i++)if(datetime-tempData.client[i].lastContact<_checkBrokerTimeBeforeDelete){clearAllData=false;break}}if(clearAllData)clearAll();datetime=tempData=clearAllData=hMain=null}function checkClientListChanges(){clearInterval(_clientStaticPolling.id);_clientStaticPolling.id=setInterval(function(){if(_canWrite){localStorage.setItem(_storage.staticKey,JSON.stringify({"id":_staticId,
"date":(new Date).getTime()}));checkAbandonedSessions()}var tempData=getClientList();if(_clientStaticPolling.currentData==null){_clientStaticPolling.currentData=tempData;_clientStaticPolling.currentTime=(new Date).getTime()}else if(tempData.length==_clientStaticPolling.currentData.length)for(var i=0;i<tempData.length;i++)for(var k=0;k<_compareAttrib.length;k++){if(tempData[i][_compareAttrib[k]]!=_clientStaticPolling.currentData[i][_compareAttrib[k]]){_clientStaticPolling.currentData=tempData;_clientStaticPolling.currentTime=
(new Date).getTime();try{_args.events.clientListChange(tempData,true)}catch(error){}break}}else{_clientStaticPolling.currentData=tempData;_clientStaticPolling.currentTime=(new Date).getTime();try{_args.events.clientListChange(tempData,true)}catch(error){}}if(_clientStaticPolling.maxTimeBeforeForceUpdate!=-1&&(new Date).getTime()-_clientStaticPolling.currentTime>_clientStaticPolling.maxTimeBeforeForceUpdate){_clientStaticPolling.currentTime=(new Date).getTime();try{_args.events.clientListChange(tempData,
false)}catch(error){}}readStorage(true)},_clientStaticPolling.time)}function hasMain(){var tempData=localStorage.getItem(_storage.staticKey);if(tempData==null)return false;else{var datetime=(new Date).getTime();tempData=JSON.parse(tempData);if(datetime-tempData.date<_checkBrokerTimeBeforeDelete)return true;else return false}}function recoverSession(callback){var hasData=false;var updateSession=function(index){_localStorage.data={"id":_id,"recovery":_storage.data.client[index].recovery||_args.recovery||
getVirtualPath(),"status":_status.inuse,"lastContact":(new Date).getTime(),"data":_storage.data.client[index].data||_args.data,"wndName":_id,"sessionId":_storage.data.client[index].sessionId,"mode":getMode()};_storage.data.client[index].id=_id;window.name=_id;hasData=true;lockStorage(function(){readStorage(false);_storage.data.client[index]=_localStorage.data;localStorage.setItem(_storage.dataKey,JSON.stringify(_storage.data));unlockStorage(function(){if(helper.object.existsPath(_args,"events.created"))try{_args.events.created(_localStorage.data)}catch(error){}if(hasMain())sendCommand("created",
_localStorage.data,"main-broker");if(callback)callback()})})};for(var i=0;i<_storage.data.client.length;i++)if(_storage.data.client[i].wndName==_id&&_storage.data.client[i].id==_id){hasData=true;updateSession(i);break}if(!hasData)for(var i=0;i<_storage.data.client.length;i++)if(_storage.data.client[i].status==_status.unassigned&&_storage.data.client[i].id==_id){hasData=true;updateSession(i);break}if(!hasData)for(var i=0;i<_storage.data.client.length;i++)if(_storage.data.client[i].status!=_status.inuse&&
_storage.data.client[i].recovery==_args.recovery){_id=_storage.data.client[i].id;hasData=true;updateSession(i);break}if(!hasData){_localStorage.data=getLocalDataValues();writeStorage(function(){if(helper.object.existsPath(_args,"events.created"))try{_args.events.created(_localStorage.data)}catch(error){}if(hasMain())sendCommand("created",_localStorage.data,"main-broker");if(callback)callback()})}else if(callback)callback();hasData=null}function observeStorageChanges(){clearInterval(_polling.id);_polling.id=
setInterval(function(){update()},_hasFocus?_polling.active:_polling.inactive)}function visibilityChange(e,callback){e.stopPropagation();e.preventDefault();var v=false;var h=true;var isHidden=false;var map={"focus":v,"focusin":v,"blur":h,"focusout":h,"pagehide":h};e=e||window.event;if(e.type in map)isHidden=map[e.type];else isHidden=this.hidden?true:false;if(isHidden){updateClientStatus(null);_hasFocus=false}else{updateClientStatus(_id);_hasFocus=true}pollingTime=map=isHidden=h=v=null;if(_polling.lastState!=
_hasFocus){_polling.lastState=_hasFocus;callback()}return false}function processFocus(value){if(_polling.lastState!=value)_polling.lastState=value}function observeDocumentVisibility(callback){if(!_polling.isAttached){_polling.isAttached=true;if(Thinfinity.TabFocusHook)Thinfinity.TabFocusHook.on(["visible","focus"],function(e){processFocus(true);callback()}).on(["hidden","blur"],function(e){processFocus(false);callback()}).on("visibility",function(e){processFocus(e.visibilityState==="visible");callback()});
else{_visibilityChange=function(e){visibilityChange(e,callback)};var hidden="hidden";if(hidden in document)document.addEventListener("visibilitychange",_visibilityChange,false);else if(hidden=="mozHidden")document.addEventListener("mozvisibilitychnage",_visibilityChange,false);else if(hidden=="webkitHidden")document.addEventListener("webkitvisibilitychange",_visibilityChange,false);else if(hidden=="msHidden")document.addEventListener("msvisibilitychange",_visibilityChange,false);else if("onfocusin"in
document)document.onfocusin=document.onfocusout=_visibilityChange;window.onpageshow=window.onpagehide=window.onfocus=window.onblur=_visibilityChange;if(document[hidden]!==undefined)_visibilityChange({"type":document[hidden]?"blur":"focus","stopPropagation":function(){return},"preventDefault":function(){return}})}if(callback)callback()}}function unobserveDocumentVisibility(){if(_polling.isAttached){if(Thinfinity.TabFocusHook)Thinfinity.TabFocusHook.off(["visible","focus","hidden","blur","visibility"]);
else{var hidden="hidden";if(hidden in document)document.removeEventListener("visibilitychange",_visibilityChange,false);else if(hidden=="mozHidden")document.removeEventListener("mozvisibilitychnage",_visibilityChange,false);else if(hidden=="webkitHidden")document.removeEventListener("webkitvisibilitychange",_visibilityChange,false);else if(hidden=="msHidden")document.removeEventListener("msvisibilitychange",_visibilityChange,false);else if("onfocusin"in document){_visibilityChange=function(){};document.onfocusin=
document.onfocusout=null}_visibilityChange=function(){};window.onpageshow=window.onpagehide=window.onfocus=window.onblur=null}_polling.isAttached=false}}function getClientIndex(){if(helper.object.existsPath(_storage,"data.client.length")){for(var i=0;i<_storage.data.client.length;i++)if(_storage.data.client[i].id==_id)return i;if(_args.recovery)for(var i=0;i<_storage.data.client.length;i++)if(_storage.data.client[i].recovery==_args.recovery&&_storage.data.client[i].status==_status.unassigned)return i}return-1}
function getClientIndexbyName(name){if(helper.object.existsPath(_storage,"data.client.length"))for(var i=0;i<_storage.data.client.length;i++)if(_storage.data.client[i].id==name)return i;return-1}function getClientList(){var clientList=[];var json=localStorage.getItem(_storage.dataKey);if(json!=null)json=JSON.parse(json);if(helper.object.existsPath(json,"client"))for(var i=0;i<json.client.length;i++)clientList.push({"wndName":json.client[i].id,"data":json.client[i].data,"status":json.client[i].status,
"focus":json.active==json.client[i].id?"Active":"Idle","virtualPath":decodeURIComponent(json.client[i].recovery),"mode":json.client[i].mode,"sessionId":json.client[i].sessionId});return clientList}function getVirtualPath(){var strLoc=window.location.href.replace(window.location.origin,"");strLoc=strLoc.substr(0,strLoc.indexOf("?")!=-1?strLoc.indexOf("?"):strLoc.length);strLoc=strLoc.substr(strLoc.length-1,1)=="/"?strLoc:strLoc.substr(0,strLoc.lastIndexOf("/")+1);return decodeURIComponent(strLoc.replace(/\//g,
""))}function getVirtualPathValue(){readStorage(false);var idx=getClientIndex();return idx>-1?_storage.data.client[idx].recovery:_args.recovery||getVirtualPath()}function addData(data){try{if((data.id||data.recovery)&&data.data){readStorage(false);lockStorage(function(){readStorage(false);var item=null;var insert=false;for(var i=0;i<_storage.data.client.length;i++)if(_storage.data.client[i].id==data.id){insert=true;if(helper.object.existsPath(data,"data.sessionId"))_storage.data.client[i].sessionId=
data.data.sessionId;helper.object.extend(_storage.data.client[i].data,data.data,"MATCH");break}if(!insert){if(helper.object.existsPath(data,"data.sessionId"))for(var i=0;i<_storage.data.client.length;i++)if(_storage.data.client[i].sessionId==data.data.sessionId&&_storage.data.client[i].status==_status.unassigned){_storage.data.client.splice(i,1);localStorage.setItem(_storage.dataKey,JSON.stringify(_storage.data))}var pushData={"id":data.id||(_args.mode!="static"?_id:""),"recovery":data.recovery||
getVirtualPath(),"status":data.status||_status.created,"lastContact":(new Date).getTime(),"data":data.data,"sessionId":helper.object.existsPath(data,"data.sessionId")?data.data.sessionId:"","mode":getMode()};if(verifyConnectionData(pushData)){_storage.data.client.push(pushData);insert=true}else dispose()}if(insert)localStorage.setItem(_storage.dataKey,JSON.stringify(_storage.data));unlockStorage(data.callback)})}}catch(error){if(data.callback)data.callback(error)}}function getData(){readStorage();
var idx=getClientIndex();if(idx>-1&&helper.object.existsPath(_storage,"data.client")){if(_storage.data.client[idx].data.wndName==undefined||_storage.data.client[idx].data.wndName==null)_storage.data.client[idx].data.wndName=_id;return _storage.data.client[idx]}}function setData(data){_args.data=data;return addData({"id":_id,"data":data})}function verifyConnectionData(data){if(data&&helper.object.existsPath(_storage,"data.client.length"))for(var i=0;i<_storage.data.client.length;i++)if(data.id!=""&&
(_storage.data.client[i].id==data.id||_storage.data.client[i].sessionId==data.sessionId))return false;return true}function processRegisteredCmds(){if(_storage.data.cmd[_id]&&_storage.data.cmd[_id].length>0)lockStorage(function(){readStorage(false);tempData=null;var cmds=_storage.data.cmd[_id];for(var j=0;j<cmds.length;j++)if(_registerCmds[cmds[j].cmd])try{_registerCmds[cmds[j].cmd](cmds[j].data)}catch(error){helper.console.error("cannot processed this command",error,arguments)}cmds=null;_storage.data.cmd[_id]=
[];localStorage.setItem(_storage.dataKey,JSON.stringify(_storage.data));unlockStorage()})}function sendCommand(cmd,data,client){lockStorage(function(){readStorage(false);if(client==undefined||client==null||client=="")client="*";if(client=="*"){if(helper.object.existsPath(_storage,"data.client.length"))for(var i=0;i<_storage.data.client.length;i++)pushCommand(cmd,data,_storage.data.client[i].id)}else pushCommand(cmd,data,client);if(_localStorage.cmds){if(!_storage.data.cmd)_storage.data.cmd={};for(var node in _localStorage.cmds){if(!_storage.data.cmd[node])_storage.data.cmd[node]=
[];for(var j=0;j<_localStorage.cmds[node].length;j++)_storage.data.cmd[node].push(_localStorage.cmds[node][j])}_localStorage.cmds=null}localStorage.setItem(_storage.dataKey,JSON.stringify(_storage.data));unlockStorage()})}function pushCommand(cmd,data,node){if(!_localStorage.cmds)_localStorage.cmds={};if(_localStorage.cmds[node]==undefined)_localStorage.cmds[node]=[];_localStorage.cmds[node].push({"cmd":cmd,"data":data,"date":(new Date).getTime()})}function registerCommand(cmd,handler){if(cmd!=undefined&&
handler!=undefined)if(_registerCmds[cmd]==undefined)_registerCmds[cmd]=handler;else helper.console.log(helper.string.format("This command is already registered: [{0}]",cmd),arguments);else helper.console.log(helper.string.format("Cannot register command:[{0}], handler is: [{1}]",cmd,handler.toString()),arguments)}function unregisterCommand(cmd,handler){if(cmd!=undefined&&handler!=undefined){if(_registerCmds[cmd]==handler)delete _registerCmds[cmd]}else helper.console.log(helper.string.format("Cannot unregister command:[{0}], handler is: [{1}]",
cmd,handler.toString()),arguments)}function executeCommand(data){if(_args.mode=="static"&&helper.object.existsPath(_args,"events.executeCommand"))try{_args.events.executeCommand(data)}catch(error){helper.console.error(error.message,error,arguments)}}function createdBroker(data){if(_args.mode=="static"&&helper.object.existsPath(_args,"events.created"))try{_args.events.created(data)}catch(error){helper.console.error(error.message,error,arguments)}}function selectBroker(data){if(_args.mode=="static"&&
helper.object.existsPath(_args,"events.select"))try{_args.events.select(data)}catch(error){helper.console.error(error.message,error,arguments)}}function focusBroker(data){if(_args.mode=="static"&&helper.object.existsPath(_args,"events.focus"))try{_args.events.focus(data)}catch(error){helper.console.error(error.message,error,arguments)}}function disposeBroker(data){if(_args.mode=="static")if(helper.object.existsPath(_args,"events.destroyed"))try{_args.events.destroyed(data)}catch(error){}}function disconnectBroker(data){if(helper.object.existsPath(_args,
"registerCmd.disconnect"))_args.registerCmd.disconnect()}function destroyBroker(){if(helper.object.existsPath(_args,"events.destroyed"))try{_args.events.destroyed()}catch(error){}dispose()}function setFocusBroker(data){var to=_id;if(_args.mode=="static"&&data.to)to=data.to;updateClientStatus(to,true);if(helper.object.existsPath(_args,"events.focus"))try{_args.events.focus(data)}catch(error){}}function checkFocus(){if(getMode()=="iframe"){readStorage(true);return _storage.data.active==_id}else return _hasFocus}
function clearAll(){if(arguments&&arguments.length>0){clearAllExcept(arguments[0]);return}sendCommand("dispose",{},"*");localStorage.removeItem(_storage.dataKey);lockStorage(function(){localStorage.removeItem(_storage.dataKey);localStorage.removeItem(_storage.statusKey)})}function clearAllExcept(filter){lockStorage(function(){readStorage(false);if(helper.object.existsPath(_storage,"data.client")){var save=false;for(var i=0;i<_storage.data.client.length;i++){var client=_storage.data.client[i];var remove=
false;for(var attr in filter)if(client[attr]!=filter[attr]){remove=true;break}if(remove){save=true;_storage.data.client.splice(i,1);if(client.id&&client.id!="")sendCommand("dispose",{},client.id)}}if(save)localStorage.setItem(_storage.dataKey,JSON.stringify(_storage.data))}localStorage.removeItem(_storage.statusKey)})}function onUnload(){if(!_disposed){readStorage();if(_id==_storage.data.active)updateClientStatus(null);var idx=getClientIndex();if(idx>-1){_localStorage.data={"id":_id,"recovery":_storage.data.client[idx].recovery,
"status":_status.unassigned,"lastContact":(new Date).getTime(),"data":_storage.data.client[idx].data,"wndName":_id,"sessionId":_storage.data.client[idx].sessionId,"mode":getMode()};_hasChanges=true;writeStorage(function(){unlockStorage(null)})}idx=null;deleteVariables()}}function dispose(callback){readStorage(false);var idx=getClientIndex();if(idx==-1){_disposed=true;return}var currentData={"id":_id,"mode":getMode(),"recovery":"","sessionId":"","status":"","virtualPath":getVirtualPath()};if(idx!=
-1&&helper.object.existsPath(_storage,"data.client."+idx))helper.object.parseAttributes(currentData,_storage.data.client[idx],"MATCH");if(hasMain())sendCommand("dispose",currentData,"main-broker");else helper.console.log("No main broker has detected, cannot send dispose command to main-broker",arguments);if(!_disposed){_disposed=true;if(_hasFocus)updateClientStatus(null);lockStorage(function(){clearInterval(_polling.id);readStorage();var idx=getClientIndex();if(idx>=0)_storage.data.client.splice(idx,
1);localStorage.setItem(_storage.dataKey,JSON.stringify(_storage.data));clearInterval(_polling.id);if(helper.object.existsPath(_args,"events.destroyed"))try{_args.events.destroyed()}catch(error){}unlockStorage(function(){removeListeners();callback();setTimeout(function(){deleteVariables()},1E3)})})}else callback()}function removeListeners(){window.removeEventListener("storage",storageEventHandler);unobserveDocumentVisibility()}function deleteVariables(){clearInterval(_clientStaticPolling.id);update=
readStorage=_compareAttrib=_checkBrokerTimeBeforeDelete=_abandonedTime=_clientStaticPolling=_unlock=_storage=_status=_registerCmds=_polling=_id=_hasFocus=_hasChanges=_lock=_localStorage=_ref=_args=null;observeStorageChanges=recoverSession=checkClientListChanges=checkBrokerStatus=checkAbandonedCommands=checkAbandonedSessions=getMode=writeStorage=unlockStorage=lockStorage=null;pushCommand=sendCommand=processRegisteredCmds=setData=getData=addData=getVirtualPath=getClientList=getClientIndexbyName=getClientIndex=
observeDocumentVisibility=null;remove=close=onUnload=clearAll=disconnectBroker=disposeBroker=unregisterCommand=registerCommand=null;visibilityChange=function(){}}function disconnect(){_isDisconnected=true;clearInterval(_polling.id);readStorage(false);var idx=getClientIndex();_localStorage.data={"id":_id,"recovery":idx>-1?_storage.data.client[idx].recovery:_args.recovery||_id,"status":_status.unassigned,"lastContact":(new Date).getTime(),"data":idx>-1?_storage.data.client[idx].data:_args.data,"wndName":_id,
"sessionId":idx>-1?_storage.data.client[idx].sessionId:"","mode":getMode()};idx=null;_hasChanges=true;writeStorage()}function remove(name){if(name)lockStorage(function(){readStorage();var write=false;if(helper.object.existsPath(_storage,"data.cmd."+_id)){delete _storage.data.cmd.id;write=true}if(helper.object.existsPath(_storage,"data.client")){var idx=getClientIndexbyName(name);if(idx>=0){_storage.data.client.splice(idx,1);write=true}idx=null}if(write)localStorage.setItem(_storage.dataKey,JSON.stringify(_storage.data));
write=null;unlockStorage()})}initialize(args);Object.defineProperty(_ref,"getClientList",{"enumerable":true,"configurable":false,"writable":false,"value":getClientList});Object.defineProperty(_ref,"sendCommand",{"enumerable":true,"configurable":false,"writable":false,"value":sendCommand});Object.defineProperty(_ref,"registerCommand",{"enumerable":true,"configurable":false,"writable":false,"value":registerCommand});Object.defineProperty(_ref,"unregisterCommand",{"enumerable":true,"configurable":false,
"writable":false,"value":unregisterCommand});if(getMode()=="iframe")Object.defineProperty(_ref,"focus",{"enumerable":true,"configurable":false,"writable":false,"value":function(){updateClientStatus(_id,true)}});if(_args.mode!="static"){Object.defineProperty(_ref,"setData",{"enumerable":true,"configurable":false,"writable":false,"value":setData});Object.defineProperty(_ref,"getData",{"enumerable":true,"configurable":false,"writable":false,"value":getData});Object.defineProperty(_ref,"disconnect",{"enumerable":true,
"configurable":false,"writable":false,"value":disconnect});Object.defineProperty(_ref,"getVirtualPath",{"enumerable":true,"configurable":false,"writable":false,"value":getVirtualPathValue});Object.defineProperty(_ref,"hasFocus",{"enumerable":true,"configurable":false,"get":function(){return checkFocus()}})}else{Object.defineProperty(_ref,"addData",{"enumerable":true,"configurable":false,"value":addData});Object.defineProperty(_ref,"clearAll",{"enumerable":true,"configurable":false,"writable":false,
"value":clearAll});Object.defineProperty(_ref,"clearAllExcept",{"enumerable":true,"configurable":false,"writable":false,"value":clearAllExcept});Object.defineProperty(_ref,"remove",{"enumerable":true,"configurable":false,"writable":false,"value":remove})}Object.defineProperty(_ref,"dispose",{"enumerable":true,"configurable":false,"writable":false,"value":dispose});return this}try{Thinfinity!=undefined}catch(e){Thinfinity={}}Thinfinity.Broker=Broker})();
function Plugin(){function getActiveXObject(name){try{return new ActiveXObject(name)}catch(e){}}function getNavigatorPlugin(name){for(key in navigator.plugins){var plugin=navigator.plugins[key];if(plugin.name==name)return plugin}}function getDefaultPDFPlugin(){for(var key in navigator.plugins){var plugin=navigator.plugins[key];if(plugin.name){var n=plugin.name.toLowerCase();if(n.indexOf("pdf")!=-1&&n.indexOf("webkit")!=-1)return plugin}}if(typeof window.pdfjsSupport!="undefined")return{}}function isPDFPluginInstalled(){var plugin=
null;switch(true){case agentInfo.isMSIE:if(agentInfo.msieVersion<=11)plugin=getActiveXObject("AcroPDF.PDF")||getActiveXObject("PDF.PdfCtrl");else plugin={};break;case agentInfo.isFirefox:case agentInfo.isChrome:case agentInfo.isOpera:case agentInfo.isSafari:case agentInfo.isYandex:plugin={};break;default:if(agentInfo.isIOS&&agentInfo.isTouch&&agentInfo.iosVersion>=8)plugin={};else plugin=getNavigatorPlugin("Adobe Acrobat")||getNavigatorPlugin("Chrome PDF Viewer")||getNavigatorPlugin("Chromium PDF Viewer")||
getNavigatorPlugin("WebKit built-in PDF")||getDefaultPDFPlugin();break}return plugin!=null&&typeof plugin!="undefined"}Object.defineProperty(this,"isPDFInstalled",{"enumerable":true,"configurable":false,"writeble":false,"value":isPDFPluginInstalled});return this}var plugin=new Plugin;
(function(){function TextPreview(args){var _ref=this;var _args=null;var _icons={};var _container=null;var _parentContainer=null;function initialize(args){_setDefaults();helper.object.parseAttributes(_args,args,"MATCH");if(typeof _args["parentElement"]=="undefined"){helper.console.warning(thinzs_consts["missingParentElement"],arguments);return null}if(_args["data"]!=null)_render(_args["data"])}var _setDefaults=function(){_args={"parentElement":_parentContainer,"data":null,"escaped":true,"splitStr":"\f"}};
var _render=function(data,callback){_set(data);_parentContainer=typeof _args["parentElement"]=="string"?document.getElementById(_args["parentElement"]):_args["parentElement"];if(!!_parentContainer){if(!!_container)_clearContainer();_parentContainer.innerHTML="";_container=document.createElement("DIV");helper.style.add(_container,"textPreviewContainer");_parentContainer.appendChild(_container);if(_args["escaped"]===true){var pages=_args["data"].split(_args["splitStr"]);if(pages[pages.length-1].replace(/[ ,\0]/g,
"").length==0)pages.length--;for(var p=0;p<pages.length;p++){if(p>0)_addSeparator();_renderPage(pages[p])}}else _renderPage(_args["data"])}if(callback)callback()};var _renderPage=function(pageData){var page=document.createElement("DIV");page.className="page";var docBody=document.createElement("PRE");docBody.innerHTML=pageData;page.appendChild(docBody);_container.appendChild(page)};var _addSeparator=function(){_container.appendChild(document.createElement("HR"))};var _set=function(data){if(!!data)_args["data"]=
typeof data=="string"?data:data["data"]||data["d"]};var _get=function(){return args["data"]};var _clear=function(){_args["data"]=null;_clearContainer();_setDefaults()};var _clearContainer=function(){if(_container)_container.innerHTML=""};var _dispose=function(){if(_container){_container.parentElement.removeChild(_container);_container=null}_args=null;_icons=null};initialize(args);Object.defineProperty(_ref,"render",{"enumerable":true,"configurable":false,"value":_render});Object.defineProperty(_ref,
"set",{"enumerable":true,"configurable":false,"value":_set});Object.defineProperty(_ref,"get",{"enumerable":true,"configurable":false,"value":_get});Object.defineProperty(_ref,"clear",{"enumerable":true,"configurable":false,"value":_clear});Object.defineProperty(_ref,"dispose",{"enumerable":true,"configurable":false,"value":_dispose});return this}try{zScope!=undefined}catch(e){zScope={}}zScope.TextPreview=TextPreview})();
(function(){function PrinterDevice(args){var _ref=this;var _args={"terminal":null,"findClass":null,"output":null,"mode":"fullpage","toggleConnectElem":null,"retrieveFocus":null,"callback":null,"onRenderText":null,"onToggleDisplay":null};var _domElements={"embeddedDocumentContainer":null,"main":null,"headerBar":null,"printDocumentContainer":null,"printDocumentContainerHeaderBar":null,"documentBodyContainer":null,"table":null,"thead":null,"tbody":null,"previewBodyContainer":null,"printStatusInfoContainer":{"left":null,
"middle":null,"right":null},"btnPrint":null,"btnDelete":null,"btnClose":null,"btnConnect":null,"embeddedPrintDialog":null,"embeddedPrintContainer":null,"embeddedPrintBtnOk":null,"embeddedPrintBtnCancel":null};var _navigation={"hook":null,"selectedSection":null};var _systemPopup={"drag":{"active":false,"lastX":-1,"lastY":-1,"lastCursor":null},"owner":thinZS,"data":{"id":"","dlgClass":"systemDlg","draggable":true}};var _bindingTable=[{"title":consts["deviceTableName"],"source":"n","style":{"min-width":"45%"},
"className":"both rowDocumentName"},{"title":consts["deviceTableProgress"],"source":"action","style":{"min-width":"15%"},"className":"both"},{"title":consts["deviceTableStartedAt"],"source":"startedat","style":{"min-width":"22%"},"className":"fullpage"},{"title":consts["deviceTableType"],"source":"docType","style":{"min-width":"8%"},"className":"both"},{"title":consts["deviceTableSize"],"source":"l","style":{"min-width":"10%"},"className":"fullpage"}];var _documents={};var _plugins={"print":null,
"previewText":null};var _isConnected=false;var _buttonsStatus={"btnConnect":true,"btnPrint":false,"btnDelete":false,"btnClose":true};var _deleting=false;var _testing=false;function initialize(args){helper.object.parseAttributes(_args,args,"MATCH");assignElements();createExternalPlugins();if(_args.mode=="embedded")_args.callback({"name":"printStatus","fn":function(status){_isConnected=status;_domElements.btnConnect.title=status?"Disconnect":"Connect"}});helper.dom.addEvent(window,"onresize",onResize);
updateButtonsStatus();onResize()}function assignElements(){_domElements.main=document.getElementById("printDialog");_domElements.shadowText=helper.dom.appendJsonElement({"parentElement":_domElements.main,"type":"input","attributes":{"style":"width:1px;height:1px;z-index:-1;"}});helper.style.add(_domElements.main,{"display":"block"});_domElements.printDocumentContainer=_domElements.main.getElementsByClassName("printDocumentContainer")[0];_domElements.printDocumentContainerHeaderBar=_domElements.printDocumentContainer.getElementsByClassName("headerBar")[0];
_domElements.embeddedDocumentContainer=document.getElementsByClassName("embeddedDocumentContainer")[0];try{_domElements.printStatusInfoContainer={"left":_domElements.main.getElementsByClassName("printStatusInfoContainer")[0].getElementsByClassName("left")[0],"middle":_domElements.main.getElementsByClassName("printStatusInfoContainer")[0].getElementsByClassName("middle")[0],"right":_domElements.main.getElementsByClassName("printStatusInfoContainer")[0].getElementsByClassName("right")[0]}}catch(e){_domElements.printStatusInfoContainer=
{"left":null,"middle":null,"right":null}}_domElements.documentBodyContainer=_domElements.main.getElementsByClassName("documentBodyContainer")[0];_domElements.table=_domElements.documentBodyContainer.getElementsByTagName("table")[0];_domElements.thead=_domElements.table.getElementsByTagName("thead")[0];_domElements.tbody=_domElements.table.getElementsByTagName("tbody")[0];_domElements.previewBodyContainer=_domElements.main.getElementsByClassName("previewBodyContainer")[0];_domElements.btnDelete=_domElements.printDocumentContainerHeaderBar.getElementsByClassName("prnDevIcon deleteIcon")[0];
helper.dom.addEvent(_domElements.btnDelete,"click",deleteIconClick);_domElements.btnPrint=_domElements.printDocumentContainerHeaderBar.getElementsByClassName("prnDevIcon printIcon")[0];helper.dom.addEvent(_domElements.btnPrint,"click",printIconClick);_domElements.btnClose=_domElements.printDocumentContainerHeaderBar.getElementsByClassName("prnDevIcon closeIcon")[0];_buttonsStatus.btnClose=true;_domElements.btnConnect=_domElements.printDocumentContainerHeaderBar.getElementsByClassName("prnDevIcon connectIcon")[0];
if(_args.mode=="embedded"){helper.dom.addEvent(_domElements.btnClose,"mousedown",closeIconClick);helper.dom.addEvent(_domElements.btnConnect,"mousedown",connectIconClick);_buttonsStatus.btnConnect=true}else{helper.style.add(_domElements.btnClose,{"display":"none"});helper.style.add(_domElements.btnConnect,{"display":"none"})}var tr=helper.dom.appendJsonElement({"parentElement":_domElements.thead,"type":"tr","attributes":{"class":"printManager row "},"style":{}});for(var i=0;i<_bindingTable.length;i++){var item=
_bindingTable[i];helper.dom.appendJsonElement({"parentElement":tr,"type":"td","attributes":{"class":item["className"]},"style":item.style||{},"content":item.title})}tr=null;if(_args.mode=="embedded"){_domElements.embeddedPrintDialog=document.getElementById("embeddedPrintDialog");_domElements.embeddedPrintContainer=document.getElementsByClassName("inputContainer")[0];_domElements.embeddedPrintBtnOk=document.getElementById("embeddedPrintBtnOk");_domElements.embeddedPrintBtnCancel=document.getElementById("embeddedPrintBtnCancel");
_domElements.embeddedPrintContainer.appendChild(_domElements.main)}attachEvents(_args.mode=="embedded")}function updateButtonsStatus(){for(var key in _buttonsStatus)helper.style.replace(_domElements[key],_buttonsStatus[key]?"disabled":"enabled",_buttonsStatus[key]?"enabled":"disabled")}function createExternalPlugins(){if(typeof window.PrintDialog!="undefined");if(typeof window.zScope!="undefined"&&typeof window.zScope.TextPreview!="undefined"){if(_plugins["previewTextEmbedded"])_plugins["previewTextEmbedded"].clear();
else _plugins["previewTextEmbedded"]=new zScope.TextPreview({"parentElement":_domElements["embeddedDocumentContainer"].contentWindow.document.body});if(_plugins["previewText"])_plugins["previewText"].clear();else _plugins["previewText"]=new zScope.TextPreview({"parentElement":_domElements["previewBodyContainer"]})}}function getTRElement(id){var elems=_domElements.tbody.getElementsByClassName(id);if(elems.length>0)return elems[0];else return null}function setDocument(cmd){if(cmd&&cmd.n){var idx=cmd.n.lastIndexOf(".")!=
-1?cmd.n.lastIndexOf("."):cmd.n.length;cmd["name"]=cmd.n.toString().substr(0,idx);if(typeof _documents[cmd["name"]]=="undefined"){_documents[cmd["name"]]={};cmd["startedat"]=helper.datetime.getFormattedDatetime(new Date)}cmd["id"]="__"+cmd["name"]+"__";_documents[cmd["name"]]=cmd;var tr=getTRElement(cmd["id"]);if(tr==null)clearDocuments(cmd["name"]);loadDocuments(cmd["name"],tr)}}function removeAllChildNodes(elem){if(elem)for(var i=elem.childNodes.length-1;i>=0;i--)elem.removeChild(elem.childNodes[i])}
function loadDocuments(name,elem){if(name!=null)if(elem!=null){removeAllChildNodes(elem);for(var i=0;i<_bindingTable.length;i++)helper.dom.appendJsonElement({"parentElement":elem,"type":"td","attributes":{"class":_bindingTable[i]["className"]},"style":_bindingTable[i]["style"]||{},"content":_documents[name][_bindingTable[i]["source"]]})}else{var tr=helper.dom.appendJsonElement({"parentElement":_domElements.tbody,"type":"tr","attributes":{"class":_documents[name]["id"]+" printManager row"},"style":{},
"events":{"click":row_click}});for(var i=0;i<_bindingTable.length;i++)helper.dom.appendJsonElement({"parentElement":tr,"type":"td","attributes":{"class":_bindingTable[i]["className"]},"style":_bindingTable[i]["style"]||{},"content":_documents[name][_bindingTable[i]["source"]]})}else for(var doc in _documents){var tr=helper.dom.appendJsonElement({"parentElement":_domElements.tbody,"type":"tr","attributes":{"class":_documents[doc]["id"]+" printManager row"},"style":{},"events":{"click":row_click}});
for(var i=0;i<_bindingTable.length;i++)helper.dom.appendJsonElement({"parentElement":tr,"type":"td","attributes":{"class":_bindingTable[i]["className"]},"style":_bindingTable[i]["style"]||{},"content":_documents[doc][_bindingTable[i]["source"]]});break}}function clearDocuments(name){if(name){var tr=getTRElement(_documents[name]["id"]);if(tr){helper.dom.removeEvent(tr,"click",row_click);_domElements.tbody.removeChild(tr)}}else for(var i=_domElements.tbody.childNodes.length-1;i>=0;i--){helper.dom.removeEvent(_domElements.tbody.childNodes[i],
"click",row_click);_domElements.tbody.removeChild(_domElements.tbody.childNodes[i])}}function getFirstRow(){var tds=_domElements.tbody.getElementsByClassName("printManager row");if(tds.length>0)return tds[0];else return null}function getSelectedRow(){var tds=_domElements.tbody.getElementsByClassName("printManager row selected");if(tds.length>0)return tds[0];else return null}function getDocFromRow(row){var rElem=null;var tds;if(!!row&&!isNaN(row)&&row>=0){tds=_domElements.tbody.getElementsByClassName("printManager row");
rElem=row<tds.length?tds[row]:null}else{tds=_domElements.tbody.getElementsByClassName("printManager row selected");if(tds.length>0)rElem=tds[0]}if(!!rElem){var cn=rElem.className.split(" ")[0].trim();return cn.substr(2,cn.length-4)}}function getDocObject(className){for(var doc in _documents)if(className.indexOf(doc)!=-1)return doc;return null}function displayPreview(name){if(name&&_documents[name]){var doc=_documents[name];switch(doc.t){case 1:if(doc.a==2&&helper.object.existsPath(_plugins,"previewText"))_plugins["previewText"].render(doc,
_args["onRenderText"]);else{clearPreview();displayCustomMessage(consts["deviceFileNotReady"])}break;case 2:case 3:default:clearPreview();displayCustomMessage(consts["deviceUnsupported"]);break}}else clearPreview()}function clearPreview(){_domElements["previewBodyContainer"].innerHTML=""}function displayCustomMessage(msg){_domElements["previewBodyContainer"].innerHTML=msg}function selectPrevRow(e){if(e.shiftKey||_navigation.selectedSection!=_domElements.previewBodyContainer){e.stopPropagation();e.preventDefault();
var aux=null;if(e.shiftKey)aux=_navigation.selectedSection;var currentRow=getSelectedRow();if(currentRow==null){currentRow=getFirstRow();if(currentRow!=null)currentRow.click()}else if(currentRow.previousSibling){currentRow=currentRow.previousSibling;currentRow.click()}checkRowPosition(currentRow);if(e.shiftKey){_navigation.selectedSection=aux;setFocus(_navigation.selectedSection)}}}function selectNextRow(e){if(e.shiftKey||_navigation.selectedSection!=_domElements.previewBodyContainer){var aux=null;
if(e.shiftKey)aux=_navigation.selectedSection;e.stopPropagation();e.preventDefault();var currentRow=getSelectedRow();if(currentRow==null){currentRow=getFirstRow();if(currentRow!=null)currentRow.click()}else if(currentRow.nextSibling){currentRow=currentRow.nextSibling;currentRow.click()}checkRowPosition(currentRow);if(e.shiftKey){_navigation.selectedSection=aux;setFocus(_navigation.selectedSection)}}}function checkRowPosition(row){if(row){var boxContainer=document.getElementsByClassName("documentBodyContainer")[0];
var rowTop=row.offsetTop;var rowHeight=row.offsetHeight;if(rowTop+rowHeight>boxContainer.offsetHeight+boxContainer.scrollTop)boxContainer.scrollTop=rowTop+rowHeight+1-boxContainer.offsetHeight;else if(rowTop-boxContainer.scrollTop<rowHeight)boxContainer.scrollTop=rowTop-rowHeight-1}}function displayRow(){if(_navigation.selectedSection!=_domElements.previewBodyContainer){var currentRow=getSelectedRow()||getFirstRow();if(currentRow!=null)currentRow.click()}}function deleteRow(e){if(!!e&&e.type=="keydown"){e.stopPropagation();
e.preventDefault()}function isEmbeddedPrinter(){return window&&window.parent&&window.parent.document.getElementsByClassName("embedded-printer-device-container").length>0}function doRowDeletion(){var currentRow=getSelectedRow();if(currentRow){helper.dom.removeEvent(currentRow,"click",row_click);var auxRow=currentRow.nextSibling||currentRow.previousSibling;_domElements.tbody.removeChild(currentRow);$(".prnDevIcon").addClass("disabled");if(_plugins["previewText"])_plugins["previewText"].clear();if(auxRow)auxRow.click()}_deleting=
false}function cancelDeletion(){_deleting=false}var tempTR=getSelectedRow();var strDocName="";if(tempTR){var rdn=tempTR.getElementsByClassName("rowDocumentName");if(rdn&&rdn.length>0)strDocName=" "+rdn[0].innerHTML;rdn=null}tempTR=null;if(_navigation.selectedSection!=_domElements.previewBodyContainer){var message=thinzs_consts.youreDeletingAPrintJob+strDocName+"<br/>&nbsp;<br/>"+thinzs_consts.questionContinue;var parentObj=isEmbeddedPrinter()?_domElements.main:null;_deleting=true;Thinfinity.Popups.choice(parentObj,
"","disconnectedDlg","",thinzs_consts.deletePrinJob,message,[consts.ok,consts.cancel],doRowDeletion,cancelDeletion,true)}strDocName=null}function switchSection(){_navigation.selectedSection=_navigation.selectedSection==_domElements.previewBodyContainer?_domElements.printDocumentContainer:_domElements.previewBodyContainer;setFocus(_navigation.selectedSection)}function setFocus(element){document.activeElement.blur();document.body.focus();window.focus();element.focus()}function deleteIconClick(e){if(!$(this).hasClass("disabled"))deleteRow()}
function printIconClick(e){if(!$(this).hasClass("disabled")){var evt=e.target||e.srcElement;if(evt.nodeName=="TD")evt=evt.parentElement;doc=getDocFromRow();if(doc&&_documents[doc])if(_documents[doc]["t"]==1){_plugins["previewTextEmbedded"].render(_documents[doc]);if(_args.mode=="embedded"){if(window&&window.parent&&window.parent.document){elem=window.parent.document.getElementsByClassName("embedded-printer-device-container");if(elem&&elem.length>0)elem=elem[0];helper.style.add(elem,{"display":"block"})}setTimeout(function(){_domElements["embeddedDocumentContainer"].contentWindow.focus();
_domElements["embeddedDocumentContainer"].contentWindow.print()},1E3)}else{_domElements["embeddedDocumentContainer"].contentWindow.focus();_domElements["embeddedDocumentContainer"].contentWindow.print()}}else;}}function closeIconClick(e){hideDialog()}function connectIconClick(e){if(!_isConnected)_args.callback({"name":"connect"});else _args.callback({"name":"disconnect"})}function onResize(e){var hMain=helper.size.getHeight(_domElements.main);var h=Math.min(Math.max(Math.floor(hMain*.2),120),180);
helper.style.add(_domElements.printDocumentContainer,{"height":h+"px"});helper.style.add(_domElements.previewBodyContainer,{"top":h+"px"});var psic=helper.size.getHeight(_domElements.printStatusInfoContainer.left);var hb=helper.size.getHeight(_domElements.printDocumentContainerHeaderBar);helper.style.add(_domElements.documentBodyContainer,{"height":h-(psic+hb+8)+"px"})}function row_click(e){var evt=e.target||e.srcElement;if(evt.nodeName=="TD")evt=evt.parentElement;for(var i=_domElements.tbody.childNodes.length-
1;i>=0;i--)helper.style.remove(_domElements.tbody.childNodes[i],"selected");helper.style.add(evt,"selected");displayPreview(getDocObject(evt.className));$(".prnDevIcon.disabled").removeClass("disabled")}function getElement(){return _domElements.main}function setInfoMessage(msg){if(_domElements.printStatusInfoContainer!=null)_domElements.printStatusInfoContainer.middle.innerHTML=msg}function setStatusMessage(status){if(_domElements.printStatusInfoContainer!=null)_domElements.printStatusInfoContainer.right.innerHTML=
status}function setStartupInfo(cmd){if(_domElements.printStatusInfoContainer){_domElements.printStatusInfoContainer.left.innerHTML=helper.string.format("{0} : {1}",cmd.n,cmd.d);_domElements.printStatusInfoContainer.middle.innerHTML=helper.string.format("{0} - {1}",cmd.r,cmd.t)}}function attachEvents(embedded){_navigation.hook=KBHook.prototype.getInstance();_navigation.hook.registerKey("keydown",{ctrlKey:false,altKey:false,shiftKey:false,keyCode:38},selectPrevRow);_navigation.hook.registerKey("keydown",
{ctrlKey:false,altKey:false,shiftKey:true,keyCode:38},selectPrevRow);_navigation.hook.registerKey("keydown",{ctrlKey:false,altKey:false,shiftKey:false,keyCode:13},displayRow);_navigation.hook.registerKey("keydown",{ctrlKey:false,altKey:false,shiftKey:false,keyCode:40},selectNextRow);_navigation.hook.registerKey("keydown",{ctrlKey:false,altKey:false,shiftKey:true,keyCode:40},selectNextRow);_navigation.hook.registerKey("keydown",{ctrlKey:false,altKey:false,shiftKey:false,keyCode:8},deleteRow);_navigation.hook.registerKey("keydown",
{ctrlKey:false,altKey:false,shiftKey:false,keyCode:110},deleteRow);_navigation.hook.registerKey("keydown",{ctrlKey:false,altKey:false,shiftKey:false,keyCode:46},deleteRow);_navigation.hook.registerKey("keydown",{ctrlKey:false,altKey:false,shiftKey:false,keyCode:9},switchSection);if(embedded){_domElements.embeddedPrintBtnCancel.onclick=embeddedPrintBtnCancelTouchStart;$(_domElements.embeddedPrintBtnCancel).bind("touchStart",embeddedPrintBtnCancelTouchStart);_navigation.hook.registerKey("keydown",{ctrlKey:false,
altKey:false,shiftKey:false,keyCode:27},escapeDialog)}_navigation.selectedSection=_domElements.printDocumentContainer;_navigation.hook.initHook();helper.dom.addEvent(_domElements.printDocumentContainer,"click",setCurrentSection);helper.dom.addEvent(_domElements.previewBodyContainer,"click",setCurrentSection)}function detachEvents(){_domElements.embeddedPrintBtnCancel.onclick=null;$(_domElements.embeddedPrintBtnCancel).unbind("touchStart",embeddedPrintBtnCancelTouchStart);_navigation.hook.deactivateHook()}
function setCurrentSection(e){elem=e.target||e.source;if(elem!=null){while(elem!=_domElements.printDocumentContainer&&elem!=_domElements.previewBodyContainer)elem=elem.parentElement;_navigation.selectedSection=elem;if(elem==_domElements.previewBodyContainer&&elem.childNodes.length==0)switchSection()}}function onStartDrag(e){var d=_domElements.containerDialog;d.parentElement.onmousemove=onMouseMove;d.parentElement.onmouseup=onMouseUp;if(agentInfo.isMobile==true){d.parentElement.ontouchmove=onMouseMove;
d.parentElement.ontouchend=onMouseUp}if(d.offsetLeft!=parseInt(d.style.left,10)){var l=d.offsetLeft;d.style.marginLeft=d.style.marginRight="0px";d.style.left=l+"px"}_systemPopup.drag={"active":true,"lastX":e.clientX||e.x||e.touches&&e.touches[0].clientX,"lastY":e.clientY||e.y||e.touches&&e.touches[0].clientY,"lastCursor":$(_systemPopup.owner.vncdiv).css("cursor")};if(!TVNC.overrideCursor)$(_systemPopup.owner.vncdiv).css("cursor","move");else helper.style.changeCSSRule("div.systemPopup .title","cursor",
"move")}function onMouseMove(e){if(_systemPopup.drag.active){var x=typeof e.clientX!="undefined"?e.clientX:typeof e.x!="undefined"?e.x:typeof e.touches!="undefined"?e.touches[0].clientX:0;var y=typeof e.clientY!="undefined"?e.clientY:typeof e.y!="undefined"?e.y:typeof e.touches!="undefined"?e.touches[0].clientY:0;_domElements.embeddedPrintDialog.style.left=_domElements.embeddedPrintDialog.offsetLeft+(x-_systemPopup.drag.lastX)+"px";_domElements.embeddedPrintDialog.style.top=_domElements.embeddedPrintDialog.offsetTop+
(y-_systemPopup.drag.lastY)+"px";_systemPopup.drag.lastX=x;_systemPopup.drag.lastY=y}}function onMouseUp(e){if(!TVNC.overrideCursor)$(_systemPopup.owner.vncdiv).css("cursor",_systemData.drag.lastCursor);else helper.style.changeCSSRule("div.systemPopup .title","cursor","inherit");_systemData.drag={"active":false,"lastX":-1,"lastY":-1,"lastCursor":null};_domElements.containerDialog.parentElement.onmousemove=null;_domElements.containerDialog.parentElement.onmouseup=null;if(agentInfo.isMobile){_domElements.containerDialog.parentElement.ontouchmove=
null;_domElements.containerDialog.parentElement.ontouchend=null}}function unblock(){detachEvents();Thinfinity.Popups.unblock();if(agentInfo.isMSIE&&typeof TVNC!="undefined"&&!TVNC.overrideCursor)TVNC.vncdiv.style.cursor="none";$(this).removeAttr("disabled")}function embeddedPrintBtnCancelTouchStart(){unblock()}function embeddedPrintBtnCloseClick(){if(_args.action)_args.action(CLOSE_DIALOG);unblock()}function onBlockAction(){if(helper.object.existsPath(_systemPopup,"owner.dragDrop.start"))_systemPopup.owner.dragDrop.start()}
function showDialog(){if(_args.mode=="embedded"){if(agentInfo.isFirefox)helper.style.add(_domElements.embeddedPrintDialog,{"visibility":"visible"});var elem=null;if(window&&window.parent&&window.parent.document){elem=window.parent.document.getElementsByClassName("embedded-printer-device-container");if(elem&&elem.length>0)elem=elem[0];if(!agentInfo.isFirefox)helper.style.add(elem,{"display":"block"});else helper.style.add(elem,{"visibility":"visible"})}if(_navigation.hook)_navigation.hook.activateHook()}var popup=
new PopupDialog;popup.owner=_systemPopup.owner;popup.verticalMiddle=true;popup.block("embeddedPrintDialog",_domElements.embeddedPrintDialog,null,function(){setTimeout(function(){_domElements.shadowText.focus()},250)});try{if(ThinVNCTouchManager)ThinVNCTouchManager.disableGestures()}catch(error){}try{if(_args.onToggleDisplay)_args.onToggleDisplay(_ref.isActive)}catch(error){}}function hideDialog(){unblock();if(_args.mode=="embedded"){if(agentInfo.isFirefox)helper.style.add(_domElements.embeddedPrintDialog,
{"visibility":"hidden"});var elem=null;if(window&&window.parent&&window.parent.document){elem=window.parent.document.getElementsByClassName("embedded-printer-device-container");if(elem&&elem.length>0)elem=elem[0];if(!agentInfo.isFirefox)helper.style.add(elem,{"display":"none"});else helper.style.add(elem,{"visibility":"hidden"})}if(_args.retrieveFocus)try{setTimeout(function(){_args.retrieveFocus()},50)}catch(error){helper.console.error("'retrieveFocus' calling attached method fail.",error,arguments)}}try{if(_args.onToggleDisplay)_args.onToggleDisplay(_ref.isActive)}catch(error){}}
function escapeDialog(){if(!_deleting)toggleDisplay()}function toggleDisplay(){if(agentInfo.isFirefox)if(helper.style.getAttribute(_domElements.embeddedPrintDialog,"visibility")!="hidden")hideDialog();else showDialog();else if(helper.style.getAttribute(_domElements.embeddedPrintDialog,"display")!="none")hideDialog();else showDialog()}function dispose(){try{clearDocuments();helper.dom.removeEvent(_domElements["btnPrint"],"click",printIconClick);helper.dom.removeEvent(_domElements["btnDelete"],"click",
deleteIconClick);for(var i=_domElements["table"].childNodes.length-1;i>=0;i--)_domElements["table"].removeChild(_domElements["table"].childNodes[i]);for(var plugin in _plugins)if(typeof _plugins[plugin]["dispose"]!="undefined"){_plugins[plugin]["dispose"]();delete _plugins[plugin]}}catch(error){helper.console.log("Cannot dispose zScope.printer.device: "+_args["terminal"]["handle"]+" - message: "+error.message)}try{if(_args.onToggleDisplay)_args.onToggleDisplay(false)}catch(error){}_args=_plugins=
null;for(var elem in _domElements)delete _domElements[elem];_ref=_documents=_bindingTable=_domElements=null;return true}function addDocTest(name){var idx=(new Date).getTime().toString().substr(9,3)+(name||"");var headerline="5770SS1 V7R2M0 140418                                         HELP                               16-08-08  18:42:42     Page     1  \r\n";headerline=name+headerline.substr(name.length,headerline.length-name.length);var cmd={"d":headerline+"All Spooled Files - Help                                                        \r\n"+
"                                                                                                                                    \r\n"+"         The Work with All Spooled Files display shows all (or a specified                                                          \r\n"+"         portion) of the spooled files that are currently on the system.                                                            \r\n"+"         The purpose of this display is to allow you to find spooled files                                                          \r\n"+
"         on the system.  This display is shown when you specify the assist                                                          \r\n"+"         level parameter as intermediate, ASTLVL(*INTERMED) on the WRKSPLF                                                          \r\n"+"         command.                                                                                                                   \r\n"+"                                                                                                                                    \r\n"+
"         You can type an option number next to one or more files.  When you                                                         \r\n"+"         then press the Enter key, the function associated with the selected                                                        \r\n"+"         option is performed for each of the selected files.                                                                        \r\n"+"                                                                                                                                    \r\n"+
"         If you press the Enter key from this display without typing any                                                            \r\n"+"         other data, you are returned to the previous menu or display.                                                              \r\n"+"                                                                                                                                    \r\n"+"         You can type parameters in the command line if you want to override                                                        \r\n"+
"         the defaults for the options you typed.  You can type parameters                                                           \r\n"+"         only if you used option 1 (Send), option 2 (Change), or option 3                                                           \r\n"+"         (Hold).                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+
"         You can also type a command in this entry field.  To run a command                                                         \r\n"+"         immediately, type the command and press the Enter key.  For                                                                \r\n"+"         assistance in typing the command, type the command name and press                                                          \r\n"+"         the F4 (Prompt) key.                                                                                                       \r\n"+
"                                                                                                                                    \r\n"+"         If you see More... on the lower right side of your display, there                                                          \r\n"+"         is more information to view.  Press Page Down (or Roll Up) to move                                                         \r\n"+"         toward the end of the information.  Press Page Up (or Roll Down) to                                                        \r\n"+
"         move toward the beginning of the information.                                                                              \r\n"+"                                                                                                                                    \r\n"+"         If you see Bottom instead of More..., you are at the end of the                                                            \r\n"+"         list.                                                                                                                      \r\n"+
"                                                                                                                                    \r\n"+"     Option                                                                                                                         \r\n"+"                                                                                                                                    \r\n"+"         Type the option number of the function you want to be performed.                                                           \r\n"+
"         If you place numbers in the entry fields of several files before                                                           \r\n"+"         the Enter or F4 key is pressed, the specified functions are                                                                \r\n"+"         performed on the files in the order in which the files are                                                                 \r\n"+"         displayed.                                                                                                                 \r\n"+
"                                                                                                                                    \r\n"+"         The options you can select are:                                                                                            \r\n"+"                                                                                                                                    \r\n"+"         1=Send                                                                                                                     \r\n"+
"             Use this option to send the spooled file.  When you choose this                                                        \r\n"+"             option, you cause the Send Network Spooled File (SNDNETSPLF)                                                           \r\n"+"             command to be processed.                                                                                               \r\n"+"                                                                                                                                    \r\n"+
"         2=Change                                                                                                                   \r\n"+"             Use this option to run the Change Spooled File Attributes                                                              \r\n"+"             (CHGSPLFA) command to change the attributes of the spooled                                                             \r\n"+"             file.  If no value is specified on the Parameters entry field,                                                         \r\n"+
"             the current values for the spooled file are shown when you                                                             \r\n"+"             press the Enter key or the F4 (Prompt) key.  However, if values                                                        \r\n"+"             have been specified on the Parameters entry field and the Enter                                                        \r\n"+"             key is pressed, then the command is run without displaying the                                                         \r\n"+
"             prompt.  If values have been specified on the Parameters entry                                                         \r\n"+"             field and the F4 (Prompt) key is pressed, then the command is                                                          \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+
"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+
"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+
"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+
"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+
"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+
"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+
"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+
"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+
"                                                   ** WWW.PUB400.COM **                                                             \r\n"+"\f"+"                                                                                                                        Page     2  \r\n"+"                                                                                                                                    \r\n"+"             prompted with the specified values having a greater than sign                                                          \r\n"+
"             (>) to the left of them.  Current values are shown for the                                                             \r\n"+"             remaining parameters.                                                                                                  \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+
"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+
"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+
"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+
"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+
"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+
"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+
"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+
"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+
"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+
"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+
"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+
"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+
"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+
"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+
"                                                   ** WWW.PUB400.COM **                                                             \r\n"+"\f","name":"test_doc_"+idx,"startedat":helper.datetime.getFormattedDatetime(new Date),"n":"__test_doc_"+idx,"action":"Done","docType":"text/plain","t":1,"l":8864,"a":2};setDocument(cmd)}function addDocTestAsync(){var idx=(new Date).getTime().toString().substr(9,3);var step0=function(){return{"d":"","name":"test_doc_"+idx,"startedat":helper.datetime.getFormattedDatetime(new Date),
"n":"__test_doc_"+idx,"action":"Pending","docType":"text/plain","t":1,"l":1,"a":0}};var step1=function(){return{"d":"","name":"test_doc_"+idx,"startedat":helper.datetime.getFormattedDatetime(new Date),"n":"__test_doc_"+idx,"action":"Pending","docType":"text/plain","t":1,"l":89,"a":1}};var step2=function(){return{"d":"","name":"test_doc_"+idx,"startedat":helper.datetime.getFormattedDatetime(new Date),"n":"__test_doc_"+idx,"action":"Pending","docType":"text/plain","t":1,"l":132,"a":1}};var step3=function(){return{"d":"5770SS1 V7R2M0 140418                                         HELP                               16-08-08  18:42:42     Page     1  \r\n"+
"All Spooled Files - Help                                                        \r\n"+"                                                                                                                                    \r\n"+"         The Work with All Spooled Files display shows all (or a specified                                                          \r\n"+"         portion) of the spooled files that are currently on the system.                                                            \r\n"+
"         The purpose of this display is to allow you to find spooled files                                                          \r\n"+"         on the system.  This display is shown when you specify the assist                                                          \r\n"+"         level parameter as intermediate, ASTLVL(*INTERMED) on the WRKSPLF                                                          \r\n"+"         command.                                                                                                                   \r\n"+
"                                                                                                                                    \r\n"+"         You can type an option number next to one or more files.  When you                                                         \r\n"+"         then press the Enter key, the function associated with the selected                                                        \r\n"+"         option is performed for each of the selected files.                                                                        \r\n"+
"                                                                                                                                    \r\n"+"         If you press the Enter key from this display without typing any                                                            \r\n"+"         other data, you are returned to the previous menu or display.                                                              \r\n"+"                                                                                                                                    \r\n"+
"         You can type parameters in the command line if you want to override                                                        \r\n"+"         the defaults for the options you typed.  You can type parameters                                                           \r\n"+"         only if you used option 1 (Send), option 2 (Change), or option 3                                                           \r\n"+"         (Hold).                                                                                                                    \r\n"+
"                                                                                                                                    \r\n"+"         You can also type a command in this entry field.  To run a command                                                         \r\n"+"         immediately, type the command and press the Enter key.  For                                                                \r\n"+"         assistance in typing the command, type the command name and press                                                          \r\n"+
"         the F4 (Prompt) key.                                                                                                       \r\n"+"                                                                                                                                    \r\n"+"         If you see More... on the lower right side of your display, there                                                          \r\n"+"         is more information to view.  Press Page Down (or Roll Up) to move                                                         \r\n"+
"         toward the end of the information.  Press Page Up (or Roll Down) to                                                        \r\n"+"         move toward the beginning of the information.                                                                              \r\n"+"                                                                                                                                    \r\n"+"         If you see Bottom instead of More..., you are at the end of the                                                            \r\n"+
"         list.                                                                                                                      \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"     Option                                                                                                                         \r\n"+
"                                                                                                                                    \r\n"+"         Type the option number of the function you want to be performed.                                                           \r\n"+"         If you place numbers in the entry fields of several files before                                                           \r\n"+"         the Enter or F4 key is pressed, the specified functions are                                                                \r\n"+
"         performed on the files in the order in which the files are                                                                 \r\n"+"         displayed.                                                                                                                 \r\n"+"                                                                                                                                    \r\n"+"         The options you can select are:                                                                                            \r\n"+
"                                                                                                                                    \r\n"+"         1=Send                                                                                                                     \r\n"+"             Use this option to send the spooled file.  When you choose this                                                        \r\n"+"             option, you cause the Send Network Spooled File (SNDNETSPLF)                                                           \r\n"+
"             command to be processed.                                                                                               \r\n"+"                                                                                                                                    \r\n"+"         2=Change                                                                                                                   \r\n"+"             Use this option to run the Change Spooled File Attributes                                                              \r\n"+
"             (CHGSPLFA) command to change the attributes of the spooled                                                             \r\n"+"             file.  If no value is specified on the Parameters entry field,                                                         \r\n"+"             the current values for the spooled file are shown when you                                                             \r\n"+"             press the Enter key or the F4 (Prompt) key.  However, if values                                                        \r\n"+
"             have been specified on the Parameters entry field and the Enter                                                        \r\n"+"             key is pressed, then the command is run without displaying the                                                         \r\n"+"             prompt.  If values have been specified on the Parameters entry                                                         \r\n"+"             field and the F4 (Prompt) key is pressed, then the command is                                                          \r\n"+
"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+
"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+
"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                   ** WWW.PUB400.COM **                                                             \r\n"+
"\f"+"                                                                                                                        Page     2  \r\n"+"                                                                                                                                    \r\n"+"             prompted with the specified values having a greater than sign                                                          \r\n"+"             (>) to the left of them.  Current values are shown for the                                                             \r\n"+
"             remaining parameters.                                                                                                  \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+
"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+
"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+
"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+
"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+
"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+
"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+
"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+
"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+
"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+
"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+
"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+
"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+
"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+
"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                   ** WWW.PUB400.COM **                                                             \r\n"+
"\f","name":"test_doc_"+idx,"startedat":helper.datetime.getFormattedDatetime(new Date),"n":"__test_doc_"+idx,"action":"Done","docType":"text/plain","t":1,"l":8624,"a":2}};setTimeout(function(){setDocument(step0())},500);setTimeout(function(){setDocument(step1())},1500);setTimeout(function(){setDocument(step2())},2500);setTimeout(function(){setDocument(step3())},3500)}function addDocTestAsync2(){var idx=(new Date).getTime().toString().substr(9,3);var step0=function(){return{"d":"","name":"test_doc_"+
idx,"startedat":helper.datetime.getFormattedDatetime(new Date),"n":"__test_doc_"+idx,"action":"Done","docType":"text/plain","t":1,"l":1,"a":0}};var step1=function(){return{"d":"","name":"test_doc_"+idx,"startedat":helper.datetime.getFormattedDatetime(new Date),"n":"__test_doc_"+idx,"action":"Done","docType":"text/plain","t":1,"l":234,"a":1}};var step2=function(){return{"d":"","name":"test_doc_"+idx,"startedat":helper.datetime.getFormattedDatetime(new Date),"n":"__test_doc_"+idx,"action":"Done","docType":"text/plain",
"t":1,"l":1234,"a":1}};var step3=function(){return{"d":"5770SS1 V7R2M0 140418                                         HELP                               16-08-08  18:42:42     Page     1  \r\n"+"All Spooled Files - Help                                                        \r\n"+"                                                                                                                                    \r\n"+"         You can type an option number next to one or more files.  When you                                                         \r\n"+
"         then press the Enter key, the function associated with the selected                                                        \r\n"+"         option is performed for each of the selected files.                                                                        \r\n"+"                                                                                                                                    \r\n"+"         If you press the Enter key from this display without typing any                                                            \r\n"+
"         other data, you are returned to the previous menu or display.                                                              \r\n"+"                                                                                                                                    \r\n"+"         You can type parameters in the command line if you want to override                                                        \r\n"+"         the defaults for the options you typed.  You can type parameters                                                           \r\n"+
"         only if you used option 1 (Send), option 2 (Change), or option 3                                                           \r\n"+"         (Hold).                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"         You can also type a command in this entry field.  To run a command                                                         \r\n"+
"         immediately, type the command and press the Enter key.  For                                                                \r\n"+"         assistance in typing the command, type the command name and press                                                          \r\n"+"         the F4 (Prompt) key.                                                                                                       \r\n"+"                                                                                                                                    \r\n"+
"         The Work with All Spooled Files display shows all (or a specified                                                          \r\n"+"         portion) of the spooled files that are currently on the system.                                                            \r\n"+"         The purpose of this display is to allow you to find spooled files                                                          \r\n"+"         on the system.  This display is shown when you specify the assist                                                          \r\n"+
"         level parameter as intermediate, ASTLVL(*INTERMED) on the WRKSPLF                                                          \r\n"+"         command.                                                                                                                   \r\n"+"                                                                                                                                    \r\n"+"         If you see More... on the lower right side of your display, there                                                          \r\n"+
"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+
"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+
"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+
"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+
"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+
"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+"                                                                                                                                    \r\n"+
"                                                                                                                                    \r\n"+"                                                   ** WWW.PUB400.COM **                                                             \r\n"+"\f","name":"test_doc_"+idx,"startedat":helper.datetime.getFormattedDatetime(new Date),"n":"__test_doc_"+idx,"action":"Done","docType":"text/plain","t":1,"l":3652,"a":2}};setTimeout(function(){setDocument(step0())},500);setTimeout(function(){setDocument(step1())},
1500);setTimeout(function(){setDocument(step2())},2500);setTimeout(function(){setDocument(step3())},3500)}initialize(args);Object.defineProperty(_ref,"name",{"enumerable":true,"configurable":false,"get":function(){return _args["terminal"]["name"]}});Object.defineProperty(_ref,"hwnd",{"enumerable":true,"configurable":false,"get":function(){return _args["terminal"]["hwnd"]}});Object.defineProperty(_ref,"profileId",{"enumerable":true,"configurable":false,"get":function(){return _args["terminal"]["profileId"]}});
Object.defineProperty(_ref,"setInfoMessage",{"enumerable":true,"configurable":false,"writable":false,"value":setInfoMessage});Object.defineProperty(_ref,"setStatusMessage",{"enumerable":true,"configurable":false,"writable":false,"value":setStatusMessage});Object.defineProperty(_ref,"setDocument",{"enumerable":true,"configurable":false,"writable":false,"value":setDocument});Object.defineProperty(_ref,"getElement",{"enumerable":true,"configurable":false,"writable":false,"value":getElement});Object.defineProperty(_ref,
"setStartupInfo",{"enumerable":true,"configurable":false,"writable":false,"value":setStartupInfo});Object.defineProperty(_ref,"dispose",{"enumerable":true,"configurable":false,"writable":false,"value":dispose});if(_args.mode=="embedded"){Object.defineProperty(_ref,"show",{"enumerable":true,"configurable":false,"writable":false,"value":showDialog});Object.defineProperty(_ref,"hide",{"enumerable":true,"configurable":false,"writable":false,"value":hideDialog});Object.defineProperty(_ref,"toggleDisplay",
{"enumerable":true,"configurable":false,"writable":false,"value":toggleDisplay});Object.defineProperty(_ref,"isActive",{"enumerable":true,"configurable":false,"get":function(){return helper.style.getAttribute(_domElements.embeddedPrintDialog,"display")!="none"}})}if(_testing){Object.defineProperty(_ref,"addDocTest",{"enumerable":true,"configurable":false,"writable":false,"value":addDocTest});Object.defineProperty(_ref,"args",{"enumerable":true,"configurable":false,"get":function(){return _args}});
for(var i=0;i<15;i++)setTimeout(function(d){addDocTest("_"+d)},(i+1)*3E3,i)}return this}try{zScope!=undefined}catch(e){zScope={}}zScope.PrinterDevice=PrinterDevice})();
(function(){function PrintManager(args){var _ref=this;var _args={"events":{"onPrintDocument":null,"onPrinterStartupInfo":null}};var _printers={};function initialize(args){helper.object.parseAttributes(_args,args,"MATCH");if(helper.object.existsPath(_args,"events.onPrintDocument"))_args["events"]["onPrintDocument"](function(cmd){if(_printers[cmd.hwnd])_printers[cmd.hwnd]["printer"]["setDocument"](cmd)});if(helper.object.existsPath(_args,"events.onPrinterStartupInfo"))_args["events"]["onPrinterStartupInfo"](function(cmd){if(_printers[cmd.hwnd])_printers[cmd.hwnd]["printer"]["setStartupInfo"](cmd)})}
function addNewDevice(prn){if(helper.object.existsPath(prn,"terminal.handle"))if(typeof _printers[prn["terminal"]["handle"]]=="undefined")_printers[prn["terminal"]["handle"]]={}}function addPrinterDevice(prn){if(helper.object.existsPath(prn,"terminal.handle")){if(typeof _printers[prn["terminal"]["handle"]]!="undefined"){_printers[prn["terminal"]["handle"]]=prn;return prn}}else return null}function removePrinterDevice(prn){if(helper.object.existsPath(prn,"terminal.handle")){if(typeof _printers[prn["terminal"]["handle"]]!=
"undefined"){_printers[prn["terminal"]["handle"]]["printer"].dispose();delete _printers[prn["terminal"]["handle"]]}}else;}function addDocTest(terminalNumber){if(_printers[terminalNumber])_printers[terminalNumber]["printer"]["addDocTest"]()}function getArgs(terminalNumber){if(_printers[terminalNumber])return _printers[terminalNumber]["printer"]["args"]()}initialize(args);Object.defineProperty(_ref,"addNewDevice",{"enumerable":true,"configurable":false,"value":addNewDevice});Object.defineProperty(_ref,
"addPrinterDevice",{"enumerable":true,"configurable":false,"value":addPrinterDevice});Object.defineProperty(_ref,"removePrinterDevice",{"enumerable":true,"configurable":false,"value":removePrinterDevice});Object.defineProperty(_ref,"addDocTest",{"enumerable":true,"configurable":false,"value":addDocTest});Object.defineProperty(_ref,"args",{"enumerable":true,"configurable":false,"value":getArgs});return this}try{zScope!=undefined}catch(e){zScope={}}zScope.PrintManager=PrintManager})();
(function(){function CaptionColors(){var _ref=this;var _captionStyles=[{"background-color":"#ee5c5c","color":"#fcfcfc"},{"background-color":"#ad4bb4","color":"#fcfcfc"},{"background-color":"#4b4fb4","color":"#fcfcfc"},{"background-color":"#24aaaa","color":"#000000"},{"background-color":"#21cb6d","color":"#000000"},{"background-color":"#cbc521","color":"#000000"},{"background-color":"#cb6f21","color":"#fcfcfc"},{"background-color":"#ff7500","color":"#fcfcfc"},{"background-color":"#446c45","color":"#fcfcfc"},
{"background-color":"#44666c","color":"#fcfcfc"},{"background-color":"#0043ff","color":"#fcfcfc"},{"background-color":"#7e0081","color":"#fcfcfc"},{"background-color":"#f6abb2","color":"#000000"},{"background-color":"#59a3ff","color":"#000000"},{"background-color":"#037e8b","color":"#fcfcfc"},{"background-color":"#56856d","color":"#fcfcfc"},{"background-color":"#ebeabd","color":"#000000"},{"background-color":"#bea37b","color":"#000000"},{"background-color":"#7c5418","color":"#fcfcfc"},{"background-color":"#786657",
"color":"#fcfcfc"},{"background-color":"#d7d6d5","color":"#000000"},{"background-color":"#878686","color":"#fcfcfc"},{"background-color":"#5c5b5b","color":"#fcfcfc"},{"background-color":"#a2d3ae","color":"#000000"},{"background-color":"#876c81","color":"#fcfcfc"},{"background-color":"#6c7d87","color":"#fcfcfc"}];var _basicPalette=["#E00000","#00E000","#0000E0","#00E0E0","#E000E0","#E0E000","#E09090","#90E090","#9090E0","#90E0E0","#E090E0","#E0E090","#E09000","#90E000","#9000E0","#E00090","#00E090",
"#0090E0"];var _availableColors=[];var _captionUsed=[];function initialize(){for(var x=0;x<_captionStyles.length;x++)_availableColors.push(_captionStyles[x]);for(var x=0;x<_basicPalette.length;x++)_availableColors.push({"background-color":_basicPalette[x],"color":helper.color.getTextColor(_basicPalette[x])});for(var x=0;x<_basicPalette.length;x++){var color=helper.color.averageColor(_basicPalette[x],"#333333");_availableColors.push({"background-color":color,"color":helper.color.getTextColor(_basicPalette[x])})}for(var x=
0;x<_basicPalette.length;x++){var color=helper.color.averageColor(_basicPalette[x],"#CCCCCC");_availableColors.push({"background-color":color,"color":helper.color.getTextColor(_basicPalette[x])})}for(var x=0;x<_basicPalette.length;x++){var color=helper.color.averageColor(_basicPalette[x],"#CC6633");_availableColors.push({"background-color":color,"color":helper.color.getTextColor(_basicPalette[x])})}for(var x=0;x<_basicPalette.length;x++){var color=helper.color.averageColor(_basicPalette[x],"#66CC33");
_availableColors.push({"background-color":color,"color":helper.color.getTextColor(_basicPalette[x])})}for(var x=0;x<_basicPalette.length;x++){var color=helper.color.averageColor(_basicPalette[x],"#6633CC");_availableColors.push({"background-color":color,"color":helper.color.getTextColor(_basicPalette[x])})}for(var x=0;x<_basicPalette.length;x++){var color=helper.color.averageColor(_basicPalette[x],"#CC3366");_availableColors.push({"background-color":color,"color":helper.color.getTextColor(_basicPalette[x])})}for(var x=
0;x<_basicPalette.length;x++){var color=helper.color.averageColor(_basicPalette[x],"#33CC66");_availableColors.push({"background-color":color,"color":helper.color.getTextColor(_basicPalette[x])})}for(var x=0;x<_basicPalette.length;x++){var color=helper.color.averageColor(_basicPalette[x],"#3366CC");_availableColors.push({"background-color":color,"color":helper.color.getTextColor(_basicPalette[x])})}}var makePalette=function(parent,palette){if(typeof parent=="undefined")parent=document.body;if(typeof palette==
"undefined")palette=_availableColors;var pcol=palette.sort(function(a,b){var x=parseInt(a["background-color"].substring(1,7),16);var y=parseInt(b["background-color"].substring(1,7),16);return x<y?-1:1});for(var color=0;color<pcol.length;color++){var obj=document.createElement("div");obj.style.display="inline-block";obj.style.width="50px";obj.style.height="20px";obj.style.lineHeight="20px";obj.style.textAlign="center";obj.style.verticalAlign="middle";obj.style.backgroundColor=pcol[color]["background-color"];
obj.style.color=pcol[color]["color"];obj.innerHTML=pcol[color]["background-color"].replace("#","");parent.appendChild(obj)}};function getHLLAPIColor(code){var num=codeToNum(code);return{"code":code,"num":num,"style":_availableColors[num%_availableColors.length]}}function codeToNum(hllapiCode){var num=0;hllapiCode=hllapiCode.toUpperCase();var hllApiValue=0;for(var idx in hllapiCode)hllApiValue+=hllapiCode[idx].toString().charCodeAt(0);var v=hllApiValue%_captionStyles.length-13;if(v<0)v=_captionStyles.length-
hllApiValue%_captionStyles.length;return v}initialize();Object.defineProperty(_ref,"getColor",{"enumerable":true,"configurable":false,"writable":false,"value":getHLLAPIColor});Object.defineProperty(_ref,"codeToNum",{"enumerable":true,"configurable":false,"writable":false,"value":codeToNum});Object.defineProperty(_ref,"makePalette",{"enumerable":true,"configurable":false,"writable":false,"value":makePalette});Object.defineProperty(_ref,"availColors",{"enumerable":true,"configurable":false,"writable":false,
"value":function(){return _availableColors}});return this}try{zScope!=undefined}catch(e){zScope={}}zScope.CaptionColors=new CaptionColors})();
(function(){function Terminal(args){var _ref=this;var _terminalConnectionStatus=["Connected","Disconnected","Connection Failed"];var postData=args&&args.postData?args.postData:"";var thinZS=null,logInWindow=helper.url.gup("log"),macroCount=0,keypadMenu=null,connected=false,shiftWithCaret=true,mouseX=0,mouseY=0,touchStart=null,pageX=0,pageY=0,newPageX=0,newPageY=0,prevX=0,initDir="",moving=false,button="",minDiffToSwap=0,closing=false,profileKey=null,broker=null,inputFocusIntervalId=null,prnManager,
prnDevice,closePrnWnd=function(){},disposeBroker=function(){},disposeJsRO=function(){},prnStatusChange=function(){},runRemote=window.top===window,lastConnectionStatusFired=null,closeStatusFired=false,isOneTimeUrl=window.location.pathname=="/ot.html",macroToPlayInStart=null;var _pointer={"startTime":0,"x":-1,"y":-1,"eventPhase":0,"pageX":0,"pageY":0};var _downDetection={"threshold":7,"detectionTimeout":helper.object.getValue(window,"customSettings.mobile.keyboardPressDetection",250)};var _pressDetection=
{"threshold":15,"detectionTimeout":helper.object.getValue(window,"customSettings.mobile.clipboardPressDetection",1E3)};var _moveDetection={"threshold":20};var _clipboard={"isAvailable":agentInfo.isMobile&&agentInfo.isIOS&&agentInfo.ipadModel>=3?!helper.object.getValue(window,"customSettings.mobile.disableClipboard",false):false,"autoHide":true,"container":null,"textArea":null,"btnCopy":null,"event":null,"VK":false,"copy":true,"paste":true,"isInUse":false};var _forceCaptionValue=false;var _fontFamily=
"zscope";var _zscopeSettingsKey="__#"+productId+".settings__";var _hasEmbeddedPrinter=false;var _getProfilesCallback=null;var _hsAppManager=null;var _keyboardHelper;var _toolbar=null;var _toolbarRegistered=false;var _oInterfaceRegistered=false;var _printPreview=null;var _connEnvironment=environment.getEnvironmentInformation();var _currentWndClose=_connEnvironment.inNewWindow?window.parent.doClose?window.parent.doClose:null:null;var runInNewWindow=false;var _dataError=true;var _errorMessage=helper.string.sprintf(consts.connAttemptFailed,
consts.invalidProfileData);var fireEvent=function(){};var te=new Thinfinity.Events({"owner":this,"events":null});fireEvent=te.fireEvent;if(postData!=undefined&&typeof postData=="string")try{postData=JSON.parse(unescape(postData));_dataError=false}catch(error){postData=null}var closeBtn_handler=function(){};var disconnected=false;var closeFired=false;var canClose=false;var _sessionStart=false;var _thinMenuProps=null;var _defaultFireEventArgs={async:false};let _propertyChanged=null;profileKey=helper.object.getValue(postData,
"profileKey","");Thinfinity.Theme.apply({auto:true});function initialize(){attachHandlers()}function attachHandlers(){helper.dom.addEvent(window,"thinfinity.components.registration.services.ready",registerComponents)}function registerComponents(){helper.dom.removeEvent(window,"thinfinity.components.registration.services.ready",registerComponents);if(thinZS.registerComponentObject)registerInterfaceComponent()}function registerInterfaceComponent(){if(thinZS.registerComponentObject){if(!_toolbarRegistered&&
_toolbar){thinZS.registerComponentObject("TOOLBAR",_toolbar);_toolbarRegistered=true}if(!_oInterfaceRegistered&&_thinMenuProps){thinZS.registerComponentObject("THINZS.ZSC.PROPERTIES",_thinMenuProps);_oInterfaceRegistered=true}}}function _isBTKeyboard(){try{return!runRemote&&window.parent.BTKeyboardAvailable}catch(error){return false}}function getKeyboardHelper(){if(_keyboardHelper!==undefined)return _keyboardHelper;if(_isBTKeyboard())_keyboardHelper=window.parent.keyboardHelper;else _keyboardHelper=
null;return _keyboardHelper}function hideVKeyboard(){if(thinZS.drivers["keyboard"])thinZS.drivers["keyboard"].hide()}function setScreenSizes(){minDiffToSwap=Math.round($(window).width()/8);if(minDiffToSwap<100)minDiffToSwap=100;if(agentInfo.isIphone&&!window.navigator.standalone){var delta=agentInfo.isIphone&&!window.navigator.standalone?60:0;$("#emulcont").height($(window).height()+delta)}}function isScrollbar(mouseX){if(thinZS.terminal.protocol=="VT"){var s=thinZS.scale;var ml=parseInt($(window).width(),
10)/2+parseInt($("#zsdiv").css("margin-left"),10);if(mouseX-ml>thinZS.terminal.display._window.colCount*thinZS.terminal.display._window.colWidth*s)return true;else return false}else return false}function calcWidth(height){return Math.floor(height*8/5/132)*132}function collectData(publickey){var pk=publickey;var jdata=new Object;jdata.divId="zsdiv";jdata.newWindow=false;jdata.logWindow=logInWindow=="1";jdata.credentials="";jdata.profileKey=pk;jdata.wscompression=false;var w=$(window).width();var h=
$(window).height();var kh=getKeyboardHelper();if(typeof kh!="undefined"&&kh!=null)if(window.initialScreenSize!=undefined){w=window.initialScreenSize.width;h=window.initialScreenSize.height}else{w=window.environment.detectedWidth;h=window.environment.detectedHeight}if(agentInfo.isMobile){var portrait=h>w;if(portrait){w=screen.height;h=screen.width-(screen.height-h)}if(agentInfo.isIphone){if(!window.navigator.standalone){h+=60;w=calcWidth(h)}}else w=Math.floor(w/80)*80}else{w=calcWidth(screen.height);
h=screen.height}jdata.width=w;jdata.height=h;jdata.viewWidth=w;jdata.viewHeight=h;jdata.borderLeft=0;jdata.borderBottom=0;if(agentInfo.isMobile)if(_clipboard.isAvailable&&_clipboard.copy)jdata.hookMouse=true;else jdata.hookMouse=false;jdata.relativeTouch=false;jdata.scaled=true;jdata.overrideDefaults=true;return jdata}function terminate(message){if(closing)return false;closing=true;if(typeof message=="undefined")message="";if(!closeStatusFired){closeStatusFired=true;fireEvent("close",{"title":"Error",
"description":message,"close":!runInNewWindow,"closeTab":runInNewWindow&&!canClose})}}function getScreenshot(width,height,callback){var getImageFromCanvas=function(canvas){if(canvas&&canvas.toDataURL){var srcUrl=canvas.toDataURL("image/jpeg");if(srcUrl!="data:,"){var img=new Image;img.width=width;img.height=height;img.onload=function(){callback(window.name,img)};img.onabort=function(){callback(window.name,null)};img.onerror=function(){callback(window.name,null)};img.src=srcUrl}else callback(window.name,
null)}else callback(window.name,null)};if(helper.object.existsPath(thinZS,"terminal.handle")){var canvas=document.getElementById(productId+"_canvas_"+thinZS.terminal.handle);if(canvas&&canvas.childNodes.length>0)getImageFromCanvas(document.getElementById(productId+"_canvas_"+thinZS.terminal.handle).childNodes[0])}}window["getScreenshot"]=getScreenshot;function initializeHandlerEvents(){$("#zsdiv").bind("touchstart",function(e){onTouchStartHandler(e)});$("#zsdiv").bind("touchmove",function(e){onTouchMoveHandler(e)});
$("#zsdiv").bind("touchend",function(e){onTouchEndHandler(e)});$("ul.tabs li").click(function(){$("ul.tabs li").removeClass("active");$(this).addClass("active");$(".tab_content").hide();var activeTab=$(this).find("a").attr("href");$(activeTab).fadeIn();return false})}function initializeToolbar(){return new Promise((resolve,reject)=>{if(!_toolbar){_thinMenuProps=new Thinfinity.Menu.Properties({API:thinZS});_thinMenuProps.ready(()=>{if(Thinfinity.Theme.version==="V7")_toolbar=new Thinfinity.Menu({"draggable":true,
"position":"right","initialLocation":"top middle","initialTacked":["actionsBtn","optionsBtn","disconnectBtn","rightclickBtn","fnKeyboardBtn","keyboardBtn"],"autoTacked":[],"visible":false,"autoIndexed":true,"capturingMouse":function(value){self.allowMouseCapture=!value},"oProperties":_thinMenuProps});else _toolbar=new Thinfinity.Toolbar({"id":"connectionToolbar","attributes":{"class":"connectionToolbar"},"itemClass":"connectionToolbarItem","owner":thinZS,"oProperties":_thinMenuProps});_thinMenuProps.allowNotifications=
true;_propertyChanged=function(name,oldValue,newValue){_toolbar.refresh()};_thinMenuProps.on("propertyChanged",_propertyChanged);thinZS.toolbar=_toolbar;registerInterfaceComponent();resolve()})}})}function onTouchStartHandler(e){if(e){var touches=e.changedTouches||e.touches||e.originalEvent&&e.originalEvent.touches||null;if(touches&&touches.length>0){mouseX=thinZS.serverMouseX(e,false);mouseY=thinZS.serverMouseY(e,false);thinZS.MouseClicks.mobileClickCallback=null;var evt=touches[0];_pointer.x=evt.pageX;
_pointer.y=evt.pageY;_pointer.startTime=(new Date).getTime();_pointer.eventPhase=1;if(_clipboard.isAvailable){_clipboard.event=e;_pointer.pageX=evt.pageX;_pointer.pageY=evt.pageY;if(_clipboard.copy)thinZS.rcParams.hookMouse=false}initMovement(e)}e.stopPropagation();e.preventDefault()}}function onTouchMoveHandler(e){if(e){var touches=e.changedTouches||e.touches||e.originalEvent&&e.originalEvent.touches||null;if(touches&&touches.length>0){checkMovement(e);e.stopPropagation();e.preventDefault();if(_clipboard.isAvailable&&
_pointer.eventPhase==1&&isMoveEvent(e)){if(_clipboard.copy)thinZS.rcParams.hookMouse=true;var evt={"touches":[],"pageX":_pointer.pageX,"pageY":_pointer.pageY};evt.touches[0]={"force":touches[0].force,"pageX":_pointer.pageX,"screenX":_pointer.pageX,"clientX":_pointer.pageX,"pageY":_pointer.pageY,"screenY":_pointer.pageY,"clientY":_pointer.pageY,"target":touches[0].target,"identifier":touches[0].identifier};thinZS.onTouchStart(evt);_clipboard.event=e;_pointer.eventPhase=5}}}}function onTouchEndHandler(e){function postTouchEnd(){if(touchStart){if(moving){if(_clipboard.isAvailable&&
_pointer.eventPhase==5&&_clipboard.copy)enableCopy();moving=false}else{thinZS.caretY=mouseY;thinZS.mouseDown(mouseX,mouseY,button);thinZS.mouseUp(mouseX,mouseY,button)}touchStart=null}}if(_pointer.eventPhase<=4){if(_pointer.eventPhase<=1)_pointer.eventPhase=isPressEvent(e)?3:isDownEvent(e)?2:4;if(_pointer.eventPhase==3&&!_clipboard["paste"])_pointer.eventPhase=2;switch(_pointer.eventPhase){case 3:enablePaste();break;case 2:thinZS.caretY=mouseY;thinZS.mouseDown(mouseX,mouseY,button);thinZS.mouseUp(mouseX,
mouseY,button);thinZS.MouseClicks.mobileClickCallback=mobileClickCallback;break;case 1:default:postTouchEnd();break}if(_clipboard.copy)setTimeout(function(){thinZS.rcParams.hookMouse=true},50)}else postTouchEnd();_pointer.startTime=0;e.stopPropagation();e.preventDefault()}function isPressEvent(e){var evt=getTouch(e);if(evt)return(new Date).getTime()-_pointer.startTime>=_pressDetection["detectionTimeout"]&&Math.abs(_pointer["x"]-evt.pageX)+Math.abs(_pointer["y"]-evt.pageY)<_pressDetection["threshold"]}
function isDownEvent(e){var evt=getTouch(e);if(evt)return(new Date).getTime()-_pointer.startTime>=_downDetection["detectionTimeout"]&&Math.abs(_pointer["x"]-evt.pageX)+Math.abs(_pointer["y"]-evt.pageY)<_downDetection["threshold"]}function isMoveEvent(e){var evt=getTouch(e);if(evt)return Math.abs(_pointer["x"]-evt.pageX)+Math.abs(_pointer["y"]-evt.pageY)>_moveDetection["threshold"]}function getTouch(e){var touches=e.changedTouches||e.touches||e.originalEvent&&(e.originalEvent.touches||e.originalEvent.targetTouches)||
e.originalEvent||null;if(touches&&touches.length>0)return touches[0];else return null}function mobileClickCallback(X,Y,button,command){if(command=="down"&&(button&4)==0)if(!isScrollbar(mouseX)){var kh=getKeyboardHelper();if(_isBTKeyboard()==false||typeof kh=="undefined"||kh==null)showVKeyboard();else{kh.log("keyboardHelper exists. HasFocus: "+kh.hasFocus);kh.focus()}}}function setFullScreen(active){var onResizeComplete=function(){window.environment.off("resizeComplete",onResizeComplete)};window.environment.on("resizeComplete",
onResizeComplete);var el=document.documentElement;if(active)window.environment.requestFullscreen(el);else window.environment.exitFullscreen(el)}function initMovement(e){touchStart=(new Date).getTime();prevX=pageX=e.originalEvent.touches[0].pageX;pageY=e.originalEvent.touches[0].pageY;button=0;initDir=""}function checkMovement(e){newPageY=e.originalEvent.touches[0].pageY;newPageX=e.originalEvent.touches[0].pageX;var diffX=newPageX-pageX;var diffY=newPageY-pageY;var dir;if(Math.abs(diffY)>Math.abs(diffX))dir=
"V";else if(newPageX>prevX)dir="E";else dir="W";if(initDir==""){initDir=dir;moving=true}else{var changeDir=dir!=initDir;if(changeDir){initDir=dir;pageX=newPageX;pageY=newPageY}prevX=newPageX}}function checkNavButtons(){function initNavBtn(button,isValid){if(isValid)$(button).removeClass("hidden");else $(button).remove()}initNavBtn("#btnPrintScreen",thinZS.permissions.printScreen)}function enableConnectedButtons(){$(".connectedOnly").removeClass("btnDisabled")}function disableConnectedButtons(){$(".connectedOnly").addClass("hidden").addClass("btnDisabled");
$("#btnMacros").addClass("hidden")}function getShiftForCaret(){var scale=thinZS.getScale();var vkh=$("#vkcont").height();var zsh=$("#zsdiv").height();if(window.environment.viewportHeight>zsh+vkh)return"0px";var centerPos=(window.environment.viewportHeight-vkh)/2;var cursorDown=thinZS.caretY-thinZS.vncdiv.scrollTop;if(cursorDown>centerPos)return(cursorDown-centerPos)*-1+"px";else return"0px"}function slideToCaret(){if(shiftWithCaret)$("#emulcont").css("margin-top",getShiftForCaret())}function showVKeyboard(){$("#vkcont").show();
if(!thinZS.drivers["keyboard"]){thinZS.drivers["keyboard"]=new Thinfinity.MobileKeyboardDriver({"owner":thinZS,"ownerContainer":document.getElementById("emulcont"),"container":"vkcont","shiftWithCaret":shiftWithCaret});thinZS.drivers["keyboard"].on("show",function(){thinZS.sendCmd("cmd=setFocus");slideToCaret()});thinZS.drivers["keyboard"].on("hide",function(){thinZS.sendCmd("cmd=killFocus");if(shiftWithCaret)$("#emulcont").css("margin-top","0px");else{thinZS.rcParams.borderBottom=0;thinZS.zoomDesktop()}});
thinZS.drivers["keyboard"].on("sendfunctionkey",thinZS.sendFunctionKey)}thinZS.drivers["keyboard"].show()}function createClipboardTextArea(){_clipboard["container"]=helper.dom.appendJsonElement({"parentElement":document.body,"type":"div","attributes":{"id":"clipboardMainContainer","class":"clipboardMainContainer_hidden","contenteditable":false}});helper.dom.appendJsonElement({"parentElement":_clipboard["container"],"type":"div","attributes":{"class":"fadeBackground"}});_clipboard["textArea"]=helper.dom.appendJsonElement({"parentElement":_clipboard["container"],
"type":"textarea","attributes":{"id":"clipboardTextArea"},"events":{"blur":function(e){if(_clipboard["autoHide"])$(_clipboard["container"]).fadeOut("fast",mobileClickCallback)}}});switch(true){case agentInfo.isChrome:helper.style.add(_clipboard["textArea"],"half");_clipboard["btnCopy"]=helper.dom.appendJsonElement({"parentElement":_clipboard["container"],"type":"div","attributes":{"id":"btnCopyClipboard","class":"hidden"},"content":"Copy","events":{"click":function(e){}}});break;default:break}}function enablePaste(){helper.style.add(_clipboard["container"],
{"display":"block"});_clipboard["VK"]=isVKeyboardVisible();hideVKeyboard();document.body.focus();_clipboard["textArea"].blur();_clipboard["textArea"].value=" ";_clipboard["textArea"].focus();_clipboard["textArea"].select()}function postCopy(text){if(text=="")return;_clipboard["VK"]=isVKeyboardVisible();hideVKeyboard();helper.style.add(_clipboard["container"],{"display":"block"});_clipboard["textArea"].focus();_clipboard["textArea"].value=text;_clipboard["textArea"].setSelectionRange(0,_clipboard["textArea"].value.length);
if(agentInfo.isChrome){helper.style.add(_clipboard["btnCopy"],"visible");helper.style.add(_clipboard["textArea"],"half")}}function enableCopy(cut){var url=thinZS.getAjaxUrl()+"cmd?id="+thinZS.rcParams.id+"&cmd=cli&type=clipboard";if(cut!=undefined&&cut)url+="&action=cut&dokey=true";else url+="&action=copy&dokey=true";var me=this;var cors=thinZS.crossdomain||thinZS.rcParams.isCrossDomain;try{var params={url:url,async:false,cache:false,dataType:"json",error:function(jqXHR,err){alert(helper.string.sprintf(consts.connectError,
err))},success:function(obj){postCopy(obj.text)}};if(cors&&!thinZS.useAjax){params.url=thinZS.getCrossDomainUrl(url);params.xhrFields={withCredentials:true}}$.ajax(params)}catch(e){alert(e)}}function showRightKeyboard(){var kh=getKeyboardHelper();if(_isBTKeyboard()==false||typeof kh=="undefined"||kh==null){if(_clipboard["VK"])showVKeyboard()}else kh.focus()}function afterClipboardAction(){_clipboard["textArea"].value="";_clipboard["textArea"].setSelectionRange(0,_clipboard["textArea"].value.length);
_clipboard["textArea"].blur();if(_clipboard["autoHide"])$(_clipboard["container"]).fadeOut();showRightKeyboard()}function addClipboardListener(){document.addEventListener("cut",function(e){setTimeout(afterClipboardAction,250)},false);document.addEventListener("copy",function(e){setTimeout(afterClipboardAction,250)},false);document.addEventListener("paste",function(e){var txt=e.clipboardData.getData("text/plain");if(thinZS.useAjax){var url=thinZS.getAjaxUrl()+"cmd?id="+thinZS.rcParams.id+"&cmd=cli&type=clipboard&action=paste";
$.post(url,encodeURIComponent(txt))}else{var cmd="cmd=cli&type=clipboard&action=paste&linemode=LF&textdata="+encodeURIComponent(txt);thinZS.sendCmd(cmd)}_clipboard["textArea"].blur();afterClipboardAction()},false);document.addEventListener("keydown",function(e){_clipboard["textArea"].blur();showRightKeyboard()},false)}function isVKeyboardVisible(){return!($("#vkcont").css("marginTop")=="0px")}function updateConnectButton(status){}function connect(){var continueConnecting=function(){helper.dom.ready(function(){_connEnvironment=
environment.getEnvironmentInformation();if(!_dataError)doConnect();else{helper.console.warning(_errorMessage,arguments);fireEvent("error",{"title":"error","message":_errorMessage});terminate(_errorMessage);return _errorMessage}})};continueConnecting()}function doConnect(){fireEvent("loading",{});if(window.top==window.parent){broker=new Thinfinity.Broker({"registerCmd":{"disconnect":function(){showClosePopup(broker.getData().data.hllapiId+" - "+thinZS.terminal.name,thinzs_consts.closingTerminal,thinzs_consts.youreClosingConnection,
"close",function(){thinZS.disconnect()},function(){thinZS.getForceFocus()})}},"focus":function(data){if(agentInfo.isMobile)thinZS.triggerCustomEvent("focus");else if(thinZS.inputAllowed())thinZS.KeyboardHandler.kbdInput.focus()}});broker.registerCommand("captionChange",function(data){});broker.registerCommand("executeCommand",function(data){if(data&&data.cmd)switch(data.cmd.toLowerCase()){case "showcloseconnectiondialog":document.getElementById("btnCloseConnection").click();break;case "closeconnection":thinZS.disconnect();
closePrnWnd();disposeBroker(function(){disposeJsRO();doClose()});break;case "retrieveprofiles":if(data.profiles&&_getProfilesCallback){var profiles=[];try{profiles=JSON.parse(data.profiles)}catch(error){helper.console.error("Cannot parse JSON profiles. "+error.message,error,arguments)}try{_getProfilesCallback(profiles)}catch(error){}}_getProfilesCallback=null;break}});if(typeof KBHook!="undefined"){kbdHook=KBHook.prototype.getInstance();kbdHook.registerKey("keydown",{"ctrlKey":true,"altKey":true,
"shiftKey":false,"keyCode":37},function(e){broker.sendCommand("executeCommand",{"cmd":"slidePrevious","name":window.name},"main-broker")});kbdHook.registerKey("keydown",{"ctrlKey":true,"altKey":true,"shiftKey":false,"keyCode":39},function(e){broker.sendCommand("executeCommand",{"cmd":"slideNext","name":window.name},"main-broker")});kbdHook.initHook()}}setTimeout(function(){var btnClipboard=document.getElementById("btnClipboard");var display="none";if(_clipboard.isAvailable){createClipboardTextArea();
if(btnClipboard)btnClipboard.addEventListener("click",function(e){if(_clipboard["container"].style.display.indexOf("none")!=-1){$(_clipboard["container"]).fadeIn();_clipboard["autoHide"]=false}else{$(_clipboard["container"]).fadeOut();_clipboard["autoHide"]=true}},false);addClipboardListener()}else{_clipboard.copy=false;_clipboard["paste"]=false}helper.style.add(btnClipboard,{"display":display})},1E3);setScreenSizes();$(window).bind("orientationchange",function(e){window.scroll(0,1);setScreenSizes()});
runInNewWindow=_connEnvironment.inNewWindow;thinZS=new ThinZS("",{"mode":ThinZS.mode.HOST});thinZS.fromBroker=helper.object.convertTo(helper.object.getValue(postData,"fromBroker",false),"boolean");thinZS.hsAppManager=_hsAppManager;thinZS.rcParams.isJsROEnabled=postData&&(postData.hsrule!=""||postData.hllapiEnabled);if(agentInfo.isMobile)thinZS.registerCustomCmd("updateCaretPosition",function(e){if(thinZS.drivers.keyboard.isVisible)slideToCaret()});if(_fontFamily!=null)thinZS.fontFamily=_fontFamily;
setTimeout(()=>{var jdata=collectData(profileKey);thinZS.connect(jdata)},100);var ssh=startSSH(thinZS);window.thinZS=thinZS;if(!thinZS.drivers)thinZS.drivers={};thinZS.rcParams.externalId=helper.url.gup("sessionid");if(broker){var brokerData=broker.getData();if(helper.object.existsPath(brokerData,"sessionId")&&brokerData["sessionId"]!="")thinZS.rcParams.id=brokerData.sessionId}thinZS.getForceFocus=function(){return};thinZS.on("focus",function(){if(thinZS.AutoBlocker){thinZS.AutoBlocker.unblock();
setTimeout(function(){if(_isBTKeyboard())window.parent.currentThinZS=thinZS;thinZS.allowMouseCapture=true},50)}thinZS.sendCmd("cmd=setFocus");return true});thinZS.on("blur",function(){if(thinZS.AutoBlocker){var block=true;if(_hasEmbeddedPrinter){var embeddedPrinter=document.getElementsByClassName("embedded-printer-device-container");block=embeddedPrinter&&embeddedPrinter.length>0&&embeddedPrinter[0].style.display=="none"}if(block)thinZS.AutoBlocker.block();thinZS.allowMouseCapture=false}thinZS.sendCmd("cmd=killFocus");
return true});thinZS.setParamEvents({"onMacroStop":function(cmd){return;if(cmd.rc!=0)Thinfinity.Popups.alert(cmd.err)},"onMacroPlay":function(cmd){if(cmd.rc!=0)Thinfinity.Popups.alert(cmd.err)},"onUpdateKeypads":function(){return},"onServerConnecting":function(status){updateConnectButton(thinzs_consts.connecting);if(status&&!status.reconnecting)fireEvent("loading",status)},"onSessionStart":function(obj){if(window.top==window.parent){thinZS.triggerCustomEvent(document.hasFocus()?"focus":"blur");if(!_sessionStart){if(!thinZS.AutoBlocker)$(document).on("click",
function(evt){broker.sendCommand("focus",{"name":window.name},"main-broker")});$("#caption").on("dblclick",function(evt){broker.sendCommand("select",{"name":window.name},"main-broker")})}}_sessionStart=true;thinZS.closeReconnectDiv();Thinfinity.Popups.establishing.hide();if(!thinZS.fromReconnection){if(broker){disposeBroker=function(callback){if(broker)broker.dispose(function(){if(callback)callback()})};if(!obj.isPrinter){var data=helper.object.clone(obj);data["sessionId"]=data["id"];var _tempBrokerData=
broker.getData();if(_tempBrokerData&&_tempBrokerData.sessionId&&_tempBrokerData["sessionId"]!=data["sessionId"]){helper.console.log(helper.string.format("Mismatch sessionId, given SessionId: {0}, brokerData: {1} ",obj.id,_tempBrokerData?_tempBrokerData.sessionId:""),arguments);broker.sendCommand("executeCommand",{"cmd":"mismatchData","name":window.name},"main-broker")}broker.setData(data);broker.sendCommand("executeCommand",{"cmd":"newTerminal","name":window.name,"sessionId":data["sessionId"]},"main-broker")}}if(Thinfinity["JsRO"]&&
thinZS.remoteApp)disposeJsRO=function(){if(Thinfinity["JsRO"]&&thinZS.remoteApp){thinZS.unregisterOOBCmd("rapp");thinZS.remoteApp.dispose()}};if(helper.object.existsPath(obj,"printer")&&(helper.object.existsPath(obj,"isPrinter")||obj.isPrinter==false)){var embeddedPrinter=document.getElementsByClassName("embedded-printer-device-container");if(embeddedPrinter&&embeddedPrinter.length>0){embeddedPrinter=embeddedPrinter[0];for(var i=embeddedPrinter.childNodes.length-1;i>=0;i--)embeddedPrinter.removeChild(embeddedPrinter.childNodes[i])}var iframe=
helper.dom.appendJsonElement({"parentElement":embeddedPrinter,"type":"iframe"});_hasEmbeddedPrinter=true;if(agentInfo.isFirefox)helper.style.add(embeddedPrinter,{"display":"block","visibility":"hidden"});iframe.src="/"+obj.printer.urlKey+"/";window.wndPrinter=iframe.contentWindow;closePrnWnd=function(){if(broker&&window.wndPrinter&&window.wndPrinter.disconnectPrinter)window.wndPrinter.disconnectPrinter()};$("#btnEmbeddedPrintStatus").show();var firstTime=true;var _embeddedPrintStatusHandler=function(evt){evt.stopPropagation();
if(firstTime)if(window.wndPrinter.onToggleDisplay){firstTime=false;window.wndPrinter.onToggleDisplay(function(isActive){if(isActive)thinZS.unbindKeyboardEvents();else thinZS.bindKeyboardEvents()})}if(broker&&window.wndPrinter&&window.wndPrinter.toggleDisplay)window.wndPrinter.toggleDisplay()};if(!agentInfo.isMobile)helper.dom.addEvent(document.getElementById("btnEmbeddedPrintStatus"),"mousedown",_embeddedPrintStatusHandler);else helper.dom.addEvent(document.getElementById("btnEmbeddedPrintStatus"),
"touchstart",_embeddedPrintStatusHandler);window.printerStatusChange=function(status){if(status===true){helper.style.replace(document.getElementById("btnEmbeddedPrintStatus"),"disconnected","connected");document.getElementById("btnEmbeddedPrintStatus").title=thinzs_consts.connected}else{helper.style.replace(document.getElementById("btnEmbeddedPrintStatus"),"connected","disconnected");document.getElementById("btnEmbeddedPrintStatus").title=thinzs_consts.disconnected}}}}connected=true;initializeToolbar().then(()=>
{}).catch(err=>{helper.console.warning(`Cannot initialize toolbar ${err.message||err}`)})},"onServerConnect":function(){logDebug("server connected");$.unblockUI()},"onServerError":function(obj){fireEvent("error",obj);terminate(obj.message)},"onServerConnectionError":function(errMessage){updateConnectButton(thinzs_consts.connect);fireEvent("error",{"message":errMessage});terminate(errMessage)},"onKeypadsReceived":function(obj){return},"onMacrosReceived":function(obj){return},"onSoundAlarm":function(){logDebug("soundAlarm")},
"onScreenChanged":function(){if($("#vkcont").css("margin-top")!="0px")slideToCaret();if(broker)broker.sendCommand("executeCommand",{"cmd":"screenchanged","name":window.name},"main-broker")},"onTerminalConnected":function(obj){var kh=getKeyboardHelper();if(typeof kh!="undefined"&&kh!=null){helper.console.log("try to fix position");var _getPosInterval=setInterval(function(){var lastPos=thinZS.getLastCursorPosition();if(helper.object.existsPath(lastPos,"x")==true){clearInterval(_getPosInterval);thinZS.setCursorInField(lastPos.x,
lastPos.y);kh.focus()}},500)}checkNavButtons();enableConnectedButtons();if(lastConnectionStatusFired!="connect"){lastConnectionStatusFired="connect";fireEvent("connect")}updateConnectButton(thinzs_consts.disconnect)},"onSessionEnd":function(){doDisconnect()},"onServerDisconnect":function(){doDisconnect()},"onTerminalDisconnected":function(obj){if(!disconnected){doDisconnect();return}disableConnectedButtons();helper.console.log("Terminal disconnected");if(!closing){$.unblockUI();terminate(!connected?
consts.connectionNotStablished:"")}clearInterval(inputFocusIntervalId);if(broker){closePrnWnd();broker.sendCommand("executeCommand",{"cmd":"screenchanged","name":window.name},"main-broker")}if(helper.object.existsPath(thinZS.terminal,"isPrinter")&&obj["isPrinter"]&&helper.object.existsPath(window,"zScope.PrintManager")&&prnManager)prnManager.removePrinterDevice({"terminal":{"handle":thinZS.terminal.handle}});if(lastConnectionStatusFired!="disconnect"){lastConnectionStatusFired="disconnect";fireEvent("disconnect")}updateConnectButton(thinzs_consts.connect)},
"onTerminalConnectFailed":function(obj){obj.message=_terminalConnectionStatus[obj.code-1];if(!closing){$.unblockUI();terminate(!connected?consts.connectionNotStablished:obj.message)}clearInterval(inputFocusIntervalId);fireEvent("error",obj);updateConnectButton(thinzs_consts.connect)},"onMacroStateChanged":function(){return},"onMacroGet":function(cmd){if(cmd.rc!=0)Thinfinity.Popups.alert(cmd.err)},"onTerminalReady":function(){if(macroToPlayInStart&&(thinZS.permissions.macros||isOneTimeUrl)){var mplay=
macroToPlayInStart;macroToPlayInStart=null;thinZS.macroPlay(mplay)}},"onSessionTimeout":function(obj){fireEvent("sessionTimeout",obj)},onLicenseMsg:function(obj){if(fireEvent("licenseMsg",obj,_defaultFireEventArgs).preventExecution!==true)terminate(obj.errorMsg)},onQueryDisconnect:function(){var closeBtn_handler=null;var closeTimeoutId=null;var clickClose_Handler=function(){canClose=true;closeBtn_handler()};var doDisconnect=function(){$.unblockUI();if(thinZS.connected)thinZS.disconnect();else doClose()};
var doDisconnectBroker=function(){doDisconnect();closePrnWnd();disposeBroker(function(){disposeJsRO();doClose()});closeTimeoutId=setTimeout(function(){disposeJsRO();doClose()},1500)};closeBtn_handler=broker?doDisconnectBroker:doDisconnect;_currentWndClose=_currentWndClose||window.close;if(!thinZS.terminal.isConnected)clickClose_Handler();else if(broker){var bData=broker.getData();if(bData)if(thinZS.zsParams.noShowConnectionDisconnectPopup)doDisconnectBroker();else showClosePopup(bData.data.hllapiId+
" - "+thinZS.terminal.name,thinzs_consts.closingTerminal,thinzs_consts.youreClosingConnection,"disconnect",doDisconnectBroker,function(){thinZS.getForceFocus()});else{disposeJsRO();doClose()}}else{let closeHandler=()=>{thinZS.getForceFocus();doClose()};if(thinZS.zsParams.noShowConnectionDisconnectPopup)closeHandler();else showClosePopup(thinZS.terminal.name,thinzs_consts.closingTerminal,thinzs_consts.youreClosingConnection,"disconnect",doDisconnect,closeHandler)}return}});if(this.__proto__==null)this.__proto__=
Object.getPrototypeOf(this);minDiffToSwap=$(window).width()/5;if(minDiffToSwap<200)minDiffToSwap=200;$("ul.tabs li:first").addClass("active").show();$(".tab_content:first").show();$.blockUI.defaults.fadeOut=100;initializeHandlerEvents();$("#btnEmbeddedPrintStatus").hide();$.blockUI.defaults.fadeOut=0;$("#displayOpt").val("80cols");$("label").css("font-weight","400");initFileElements("zsc/images/fileSelector.png")}function doDisconnect(){if(!disconnected){_thinMenuProps.off("propertyChanged",_propertyChanged);
Thinfinity.Popups.unblock();disconnected=true;closeBtn_handler();_thinMenuProps=null}}function doClose(win){if(_toolbar){_toolbar.dispose();_toolbar=null}if(closeFired)return;closeFired=true;var closeTimeout=runInNewWindow?10:500;setTimeout(function(){if(!closeStatusFired){closeStatusFired=true;fireEvent("close",{"title":"","message":"","close":!runInNewWindow,"closeTab":runInNewWindow&&!canClose,"wnd":win})}if(thinZS.AutoBlocker)thinZS.AutoBlocker.dispose();var closeable=document.referrer!="";if(closeable&&
_currentWndClose)_currentWndClose(agentInfo);if(canClose)setTimeout(function(w){if(closeable&&w.close)w.close()},100,win)},closeTimeout)}function showClosePopup(text,title,message,buttonText,callbackYes,callbackNo){message+="&nbsp;"+text+"<br/>&nbsp;"+thinzs_consts.questionContinue;Thinfinity.Popups.choice("","","disconnectedDlg","disconnectedIco",title,message,[consts.ok,consts.cancel],callbackYes,callbackNo)}function disconnect(){thinZS.callDisconnect()}function getProfiles(callback){_getProfilesCallback=
callback;broker.sendCommand("executeCommand",{"cmd":"getProfiles","name":window.name},"main-broker")}initialize();Object.defineProperty(this,"connect",{"enumerable":true,"configurable":false,"value":connect});Object.defineProperty(this,"disconnect",{"enumerable":true,"configurable":false,"value":disconnect});Object.defineProperty(this,"fontFamily",{"enumerable":true,"configurable":false,"get":function(){return thinZS&&thinZS.fontFamily||_fontFamily},"set":function(fontFamily){_fontFamily=fontFamily;
if(thinZS)thinZS.fontFamily=fontFamily}});Object.defineProperty(this,"getProfiles",{"enumerable":true,"configurable":false,"value":getProfiles});return this}try{zScope!=undefined}catch(e){zScope={}}zScope.Terminal=Terminal})();
(function(){function AutoBlocker(){var _ref=this;var _blockTimer={"timeoutId":null,"time":10};var _eventsHandler={};var _canGetFocus=null;var _onFocusHandler=null;var _blockElem=null;var _wasInitialized=false;var _lastStatus=null;var _mobileThreshold={"value":15,"pageX":null,"pageY":null,"start":false};function initialize(){if(!_wasInitialized){helper.dom.addEvent(document,"click",document_click);if(agentInfo.isMobile){helper.dom.addEvent(document,"touchstart",document_touchstart);helper.dom.addEvent(document,
"touchend",document_touchend)}_wasInitialized=true}}function document_click(e){if(document.hasFocus()&&(_canGetFocus==null||_canGetFocus()))if(_eventsHandler["click"]&&_eventsHandler["click"].length>0)for(var i=0;i<_eventsHandler["click"].length;i++)try{_eventsHandler["click"][i](e,"click")}catch(error){}else{window.focus();window.document.body.focus()}}function document_touchstart(e){if(document.hasFocus()&&(_canGetFocus==null||_canGetFocus())){_mobileThreshold.start=true;var touches=e.changedTouches||
e.touches||e.originalEvent&&e.originalEvent.touches||null;if(touches&&touches.length>0){_mobileThreshold.pageX=touches[0].pageX;_mobileThreshold.pageY=touches[0].pageY}}}function document_touchend(e){if(!_mobileThreshold.start)return;var touches=e.changedTouches||e.touches||e.originalEvent&&e.originalEvent.touches||null;if(touches&&touches.length>0&&Math.abs(_mobileThreshold.pageX-touches[0].pageX)+Math.abs(_mobileThreshold.pageY-touches[0].pageY)<_mobileThreshold.value)document_click(e);_mobileThreshold.start=
false}function block(){var defaultProcessing=true;if(_lastStatus!="block"){_lastStatus="block";if(_eventsHandler["block"]&&_eventsHandler["block"].length>0)for(var i=0;i<_eventsHandler["block"].length;i++)try{defaultProcessing=_eventsHandler["block"][i]("block")}catch(error){}}if(defaultProcessing){var block=_blockElem||document.getElementById("blockContainer");if(!block)helper.dom.appendJsonElement({"parentElement":document.getElementById("prnBefore"),"type":"div","attributes":{"id":"blockContainer",
"class":"blocked"}});else helper.style.replace(block,"unblocked","blocked")}}function unblock(force){var defaultProcessing=true;if(_lastStatus!="unblock"){_lastStatus="unblock";if(force!==true&&_eventsHandler["unblock"]&&_eventsHandler["unblock"].length>0)for(var i=0;i<_eventsHandler["unblock"].length;i++)try{defaultProcessing=_eventsHandler["unblock"][i]("unblock")}catch(error){}}if(defaultProcessing){clearTimeout(_blockTimer.timeoutId);_blockTimer.timeoutId=null;if(_blockElem&&document.getElementById("blockContainer"))document.removeChild(document.getElementById("blockContainer"));
var block=_blockElem||document.getElementById("blockContainer");if(block&&block.className.indexOf("unblocked")==-1)helper.style.replace(block,"blocked","unblocked")}}function on(name,handler){if(!_eventsHandler[name])_eventsHandler[name]=[];var wasAdded=false;for(var i=0;i<_eventsHandler[name].length;i++)if(_eventsHandler[name]===handler){wasAdded=true;break}if(!wasAdded)_eventsHandler[name].push(handler)}function off(name,handler){if(_eventsHandler[name])for(var i=_eventsHandler[name].length-1;i>=
0;i--)if(_eventsHandler[name]===handler)_eventsHandler[name].splice(i,1)}function set(name,handler){if(name&&name.toUpperCase)switch(name.toUpperCase()){case "CANGETFOCUS":_canGetFocus=handler;break;default:break}}function dispose(){off();var block=_blockElem||document.getElementById("blockContainer");if(block)block.parentElement.removeChild(block)}initialize();Object.defineProperty(_ref,"block",{"enumerable":true,"configurable":false,"writable":false,"value":block});Object.defineProperty(_ref,"unblock",
{"enumerable":true,"configurable":false,"writable":false,"value":unblock});Object.defineProperty(_ref,"on",{"enumerable":true,"configurable":false,"writable":false,"value":on});Object.defineProperty(_ref,"off",{"enumerable":true,"configurable":false,"writable":false,"value":off});Object.defineProperty(_ref,"set",{"enumerable":true,"configurable":false,"writable":false,"value":set});Object.defineProperty(_ref,"dispose",{"enumerable":true,"configurable":false,"writable":false,"value":dispose})}try{Thinfinity!=
undefined}catch(e){Thinfinity={}}Thinfinity.AutoBlocker=AutoBlocker})();
