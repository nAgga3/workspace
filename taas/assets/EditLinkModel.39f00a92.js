var A=Object.defineProperty,E=Object.defineProperties;var B=Object.getOwnPropertyDescriptors;var V=Object.getOwnPropertySymbols;var x=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var M=(e,i,a)=>i in e?A(e,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[i]=a,y=(e,i)=>{for(var a in i||(i={}))x.call(i,a)&&M(e,a,i[a]);if(V)for(var a of V(i))q.call(i,a)&&M(e,a,i[a]);return e},w=(e,i)=>E(e,B(i));/* empty css                          */import{_ as R,s as S,x as T,E as U,a5 as k,r as g,o as r,c,a as o,t,f as l,h as m,w as I}from"../main.js";import{C as L,e as v,u as O,r as u,p as C}from"./validators.31c1fb33.js";import{c as N,a as D,b as W}from"./connectionModes.enum.1a94a4a1.js";const h="linkModels",j={name:"EditLinkModel",mixins:[L],components:{},setup(){return{editorModes:v,pageBase:h,v$:O()}},data:()=>({name:"",description:"",group:"",credentialsId:null,naming:"",stopAfterDisconnect:5,connectionMode:N.PUBLICIP,submitted:!1,saving:!1}),validations(){return{name:{required:u,providerIdRegExpValidatorWMessage:C},description:{required:u},credentialsId:{required:u},group:{required:u,providerIdRegExpValidatorWMessage:C},naming:{required:u},stopAfterDisconnect:{required:u},connectionMode:{required:u}}},computed:w(y({},S(T,["credentials"])),{credential:{get(){return this.credentials.find(e=>e.id===this.credentialsId)},set(e){var i;this.credentialsId=(i=e==null?void 0:e.id)!=null?i:null}},connectionModes(){return Object.keys(D).map(e=>({id:e,name:D[e]}))}}),methods:{async load({id:e}){var a,s;let i=(s=(a=await U.get(e))==null?void 0:a.items)!=null?s:{};Object.assign(this.$data,{id:i.id,name:i.name,description:i.desc,credentialsId:i.credentialsId,group:i.group,naming:i.naming,stopAfterDisconnect:i.stopAfterDisconnect,connectionMode:i.connectionMode})},async save(){var i,a,s,f;let e=!1;try{if(this.submitted=!0,!await this.v$.$validate())return e;this.saving=!0;const d={name:this.name,desc:this.description,credentialsId:this.credentialsId,group:this.group,naming:this.naming,stopAfterDisconnect:this.stopAfterDisconnect,connectionMode:W[this.connectionMode],id:this.id};this._mode===v.CREATE?await k.create(d):await k.update(d),this.toasts&&this.$toast.add({group:"br",severity:"success",summary:this.$t(`${h}.toasts.events.${this._mode===v.CREATE?"created":"updated"}.summary`),detail:this.$t(`${h}.toasts.events.${this._mode===v.CREATE?"created":"updated"}.detail`,{name:this.name}),life:3e3}),e=!0,this.$emit("saved"),this.back()}catch(d){this.$toast.add({group:"br",severity:"error",summary:this.$t("common.toasts.events.error.summary"),detail:this.$t("common.toasts.events.error.detail",{error:(f=(s=(a=(i=d==null?void 0:d.response)==null?void 0:i.data)==null?void 0:a.error)==null?void 0:s.message)!=null?f:d}),life:3e3}),this.$emit("error")}finally{this.saving=!1}return e}}},F={class:"grid grid-nogutter flex flex-column flex-1 overflow-hidden custom-scrollbars h-full edit-linkmodel side-panel"},z={class:"grid grid-nogutter flex-1 overflow-hidden flex-column flex-nowrap"},G={class:"overflow-hidden flex-1 flex-column"},H={class:"overflow-hidden flex-1 h-full"},J={class:"overflow-auto h-full flex-1 px-4"},K={class:"flex flex-column flex-1 flex-nowrap h-full"},Q={class:"col flex-1 mt-3 overflow-auto"},X={class:"grid grid-nogutter flex-column"},Y={class:"col"},Z={class:"grid grid-nogutter my-2"},P={class:"col col flex justify-content-start align-items-center"},ee={class:"text-xl m-0 mb-3"},oe={class:"col"},se={class:"formgrid grid"},ie={class:"field col"},ne={for:"name"},te={key:0,class:"p-error"},ae={class:"formgrid grid"},de={class:"field col"},le={for:"description"},re={key:0,class:"p-error"},ce={class:"formgrid grid"},me={class:"field col"},ue={for:"credential"},pe={key:0,class:"p-dropdown-option flex"},ge={class:"flex-1"},ve={key:1},fe={class:"p-dropdown-option flex"},he={class:"flex-1"},_e={key:0,class:"p-error"},$e={class:"formgrid grid"},be={class:"field col"},Ve={for:"group"},Me={key:0,class:"p-error"},ye={class:"formgrid grid"},we={class:"field col"},ke={for:"naming"},Ie={key:0,class:"p-error"},Ce={class:"formgrid grid"},De={class:"field col"},Ae={for:"stopAfterDisconnect"},Ee={class:"p-inputgroup mb-2"},Be={class:"p-inputgroup-addon"},xe={key:0,class:"p-error"},qe={class:"formgrid grid"},Re={class:"field col"},Se={for:"connectionMode"},Te={key:0,class:"p-error"},Ue={class:"footer-buttons flex w-full py-5 justify-content-end"},Le={class:"grid grid-nogutter mx-2"},Oe={class:"flex flex-1 mx-2"},Ne={class:"flex flex-1 mx-2"};function We(e,i,a,s,f,d){const p=g("InputText"),_=g("Tag"),$=g("Dropdown"),b=g("Button");return r(),c("div",F,[o("div",z,[o("div",G,[o("div",H,[o("div",J,[o("div",K,[o("div",Q,[o("div",X,[o("div",Y,[o("div",Z,[o("div",P,[o("p",ee,t(e.$t(`${s.pageBase}.${this._mode==s.editorModes.CREATE?"add":"edit"}_title`)),1)])])]),o("div",oe,[o("div",se,[o("div",ie,[o("label",ne,t(e.$t(`${s.pageBase}.name`)),1),l(p,{autofocus:"autofocus",id:"name",class:"w-full mb-2",modelValue:e.name,"onUpdate:modelValue":i[0]||(i[0]=n=>e.name=n)},null,8,["modelValue"]),s.v$.name.$invalid&&e.submitted||s.v$.name.$pending.$response?(r(),c("small",te,t(s.v$.name.required.$invalid?s.v$.name.required.$message.replace("Value","Name"):"")+" "+t(s.v$.name.providerIdRegExpValidatorWMessage.$invalid?s.v$.name.providerIdRegExpValidatorWMessage.$message:""),1)):m("",!0)])]),o("div",ae,[o("div",de,[o("label",le,t(e.$t(`${s.pageBase}.description`)),1),l(p,{id:"description",class:"w-full mb-2",modelValue:e.description,"onUpdate:modelValue":i[1]||(i[1]=n=>e.description=n)},null,8,["modelValue"]),s.v$.description.$invalid&&e.submitted||s.v$.description.$pending.$response?(r(),c("small",re,t(s.v$.description.required.$message.replace("Value","Description")),1)):m("",!0)])]),o("div",ce,[o("div",me,[o("label",ue,t(e.$t(`${s.pageBase}.credential`)),1),l($,{id:"credential",class:"w-full mb-2",optionLabel:"Name",placeholder:"Select credential",options:e.credentials,modelValue:d.credential,"onUpdate:modelValue":i[2]||(i[2]=n=>d.credential=n)},{value:I(n=>[n.value?(r(),c("div",pe,[o("div",ge,[o("span",null,t(n.value.name),1)]),l(_,{class:"ml-2",value:n.value.provider},null,8,["value"])])):(r(),c("span",ve,t(n.placeholder),1))]),option:I(n=>[o("div",fe,[o("div",he,[o("span",null,t(n.option.name),1)]),l(_,{class:"ml-2",value:n.option.provider},null,8,["value"])])]),_:1},8,["options","modelValue"]),s.v$.credentialsId.$invalid&&e.submitted||s.v$.credentialsId.$pending.$response?(r(),c("small",_e,t(s.v$.credentialsId.required.$message.replace("Value","Credential")),1)):m("",!0)])]),o("div",$e,[o("div",be,[o("label",Ve,t(e.$t(`${s.pageBase}.group`)),1),l(p,{id:"group",class:"w-full mb-2",modelValue:e.group,"onUpdate:modelValue":i[3]||(i[3]=n=>e.group=n)},null,8,["modelValue"]),s.v$.group.$invalid&&e.submitted||s.v$.group.$pending.$response?(r(),c("small",Me,t(s.v$.group.required.$invalid?s.v$.group.required.$message.replace("Value","Group"):"")+" "+t(s.v$.group.providerIdRegExpValidatorWMessage.$invalid?s.v$.group.providerIdRegExpValidatorWMessage.$message:""),1)):m("",!0)])]),o("div",ye,[o("div",we,[o("label",ke,t(e.$t(`${s.pageBase}.instance`)),1),l(p,{autofocus:"autofocus",id:"naming",class:"w-full mb-2",modelValue:e.naming,"onUpdate:modelValue":i[4]||(i[4]=n=>e.naming=n)},null,8,["modelValue"]),s.v$.naming.$invalid&&e.submitted||s.v$.naming.$pending.$response?(r(),c("small",Ie,t(s.v$.naming.required.$message.replace("Value","Instance")),1)):m("",!0)])]),o("div",Ce,[o("div",De,[o("label",Ae,t(e.$t(`${s.pageBase}.stopAfterDisconnect`)),1),o("div",Ee,[l(p,{id:"stopAfterDisconnect",class:"",modelValue:e.stopAfterDisconnect,"onUpdate:modelValue":i[5]||(i[5]=n=>e.stopAfterDisconnect=n),readOnly:e._readOnly},null,8,["modelValue","readOnly"]),o("span",Be,t(e.$t(`${s.pageBase}.minutes`)),1)]),s.v$.stopAfterDisconnect.$invalid&&e.submitted||s.v$.stopAfterDisconnect.$pending.$response?(r(),c("small",xe,t(s.v$.stopAfterDisconnect.required.$message.replace("Value","Stop After Disconnect")),1)):m("",!0)])]),o("div",qe,[o("div",Re,[o("label",Se,t(e.$t(`${s.pageBase}.connectionMode`)),1),l($,{id:"connectionMode",class:"w-full mb-2",optionValue:"id",optionLabel:"name",placeholder:"Select Connection Mode",options:d.connectionModes,modelValue:e.connectionMode,"onUpdate:modelValue":i[6]||(i[6]=n=>e.connectionMode=n),disabled:e._readOnly},null,8,["options","modelValue","disabled"]),s.v$.connectionMode.$invalid&&e.submitted||s.v$.connectionMode.$pending.$response?(r(),c("small",Te,t(s.v$.connectionMode.required.$message.replace("Value","Connection Mode")),1)):m("",!0)])])])])]),o("div",Ue,[o("div",Le,[o("div",Oe,[l(b,{label:e.$t("common.cancel"),icon:"pi pi-times",class:"p-button-secondary",disabled:e.saving,onClick:e.cancel},null,8,["label","disabled","onClick"])]),o("div",Ne,[l(b,{label:e.$t("common.save"),icon:"pi pi-check",class:"p-button-success",loading:e.saving,onClick:d.save},null,8,["label","loading","onClick"])])])])])])])])])])}var Je=R(j,[["render",We]]);export{Je as default};
